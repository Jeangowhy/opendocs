# Webpack Readme
- [Webpack ä¸­æ–‡æ–‡æ¡£](https://github.com/docschina/webpack.js.org)
- [Webpack Documentation](https://github.com/webpack/webpack.js.org)
- [Babel](https://github.com/babel/babel)
- [Babel Documetation](https://github.com/babel/website)
- [Babel Handbook](https://github.com/jamiebuilds/babel-handbook/)

- [Webpack Internal Plugin Relation](https://alienzhou.github.io/webpack-internal-plugin-relation/)
- [webpack-bundle-analyzer](https://www.npmjs.com/package/webpack-bundle-analyzer)

- [2018ä½ æˆé•¿äº†ä¹ˆï¼Ÿä¸€ä»½ç»™ä½ çš„å‰ç«¯æŠ€æœ¯æ¸…å•](https://www.jianshu.com/p/23fc6b07b8e2)

- [Wepack å·¥ç¨‹æ‰“åŒ…æœº](https://webpack.github.io/)
- [Webpack åŸºæœ¬æ¦‚å¿µ](https://webpack.js.org/concepts/)
- [Webpack Demos](https://github.com/ruanyf/webpack-demos)
- [Node.js Debugger](http://www.ruanyifeng.com/blog/2018/03/node-debugger.html)
- [webpackå­¦ä¹ å®è·µç³»åˆ—](http://www.imooc.com/article/7221)
- [Webpack Dev Server](https://www.npmjs.com/package/webpack-dev-server)
- [Webpack loader åé—®](https://www.jianshu.com/p/6a08e1b1f2fd)

Webpack æ€»å¾—æ¥è¯´æ˜¯ä¸€ä¸ªèµ„æºæ¨¡å—åŒ– JS Module æ‰“åŒ…å·¥å…·ï¼Œå®ƒçš„æ ¸å¿ƒæ€æƒ³æ˜¯æ¨¡å—åŒ–æ€æƒ³ï¼Œä¸ç®¡ä½ æ˜¯å›¾ç‰‡ï¼ŒJSï¼ŒCSSï¼ŒSCSSï¼ŒLESSï¼Œè¿˜æ˜¯ JSX/TSXï¼Œç»Ÿç»Ÿéƒ½æ‰“åŒ…æˆ JS Moduleï¼ŒAnythin to JS Modulesã€‚å„ç§èµ„æºéƒ½æœ‰ç›¸é€‚é…çš„åŠ è½½å™¨ Loaders è´Ÿè´£å¯¹èµ„æºè¿›è¡Œå¤„ç†ï¼ŒWebpack é€šè¿‡æ‰§è¡ŒåŠ è½½å™¨å®ŒæˆåŸå§‹èµ„æºçš„è½¬æ¢ã€‚


# ğŸš© Hello Webpack
- [TypeScript](https://www.tslang.cn/docs/home.html)
- [TypeScript Samples](https://github.com/Microsoft/TypeScriptSamples)
- [TypeScript Node Starte](https://github.com/Microsoft/TypeScript-Node-Starte)
- [TS-Node](https://www.npmjs.com/package/ts-node)
- [Webpack with TypeScript](https://webpack.js.org/guides/typescript/)
- [Awesome TypeScript Loader](https://www.npmjs.com/package/awesome-typescript-loader)
- [TypeScript loader for webpack](https://www.npmjs.com/package/ts-loader)
- [Babel loader for webpack](https://github.com/babel/babel-loader)
- [Base64 URL Loader](https://www.npmjs.com/package/url-loader)
- [Webpack èµ„æºç®¡ç†](https://webpack.js.org/guides/asset-management/)
- [TypeScriptå£°æ˜æ–‡ä»¶ `.d.ts`](https://www.tslang.cn/docs/handbook/declaration-files/introduction.html)
- [Build Performance](https://webpack.js.org/guides/build-performance/#general)


è¿™é‡ŒåŒè¿‡ TypeScript + Webpack ç¼–å†™ä¸€ä¸ª Demo å·¥ç¨‹æ¥å…¥é—¨ Webpack å·¥ç¨‹åŒ–æ‰“åŒ…æœºçš„ç†å¿µï¼Œå·¥ç¨‹åŒ–æ˜¯å¿…ç„¶çš„è½¯ä»¶æŠ€æœ¯å‘å±•æ–¹å‘ã€‚TypeScript ä½œä¸ºä¸€ä¸ªå¼ºå¤§çš„é™æ€ç±»å‹æ£€æŸ¥è¯­è¨€æ˜¯ä½œä¸ºå·¥ç¨‹åŒ–å¼€å‘çš„ç†æƒ³å·¥å…·ï¼Œæ‰€ä»¥ Node.js + TypeScript + Webpack + æ¡†æ¶çš„å·¥ç¨‹ç»“æ„å°†ä¼šæ˜¯éå¸¸æµè¡Œçš„æŠ€æœ¯æ ˆã€‚TypeScript ç°åœ¨å‘å¸ƒ v3.5.3 ç‰ˆæœ¬ï¼Œå®˜æ–¹æä¾›çš„ç¤ºä¾‹ [TypeScript Node Starte] æ˜¯éå¸¸å€¼å¾—å­¦ä¹ çš„æ¡ˆä¾‹ã€‚

## å®‰è£…ä½¿ç”¨

Node.js å‘½ä»¤è¡Œçš„ TypeScript ç¼–è¯‘å™¨å¯ä»¥ä½¿ç”¨ npm æ¥å®‰è£…ï¼Œå®‰è£…åä¼šæœ‰ä¸€ä¸ª tsc å‘½ä»¤æ¥è½¬è¯‘ TypeScript ä»£ç ä¸º JavaScriptï¼Œä¹Ÿå¯ä»¥å®‰è£… ts-node æ¥ç›´æ¥è§£æè¿è¡Œã€‚

	npm install --save-dev typescript@3.5.3 ts-node@8.3.0
	tsc helloworld.ts
	ts-node helloworld.ts

ä½¿ç”¨ VSCodeã€Sublime Textã€Vim ä½œä¸ºå¼€å‘å·¥å…·éƒ½æ˜¯å¾ˆå¥½çš„é€‰æ‹©ã€‚

é€šè¿‡ Node.js ç¯å¢ƒä½¿ç”¨ Webpackï¼Œå…ˆé€šè¿‡ npm æ¥è¿›è¡Œå…¨å±€å®‰è£…ï¼Œåˆ›å»ºç¤ºä¾‹å·¥ç¨‹ `webpack-demo` ç›®å½•ï¼Œ`npm init` é¡¹ç›®åˆå§‹åŒ–å‘½ä»¤ç”Ÿæˆé»˜è®¤çš„ `package.json` é…ç½®æ–‡ä»¶ï¼Œå¯ä»¥ä¼ å…¥é»˜è®¸å‚æ•° `--yes` å¿½ç•¥è®¾ç½®å†…å®¹ï¼Œå…³äºå®ƒå¾—ç”¨æ³•å¯ä»¥æŸ¥è¯¢ `npm help init`ã€‚ä¸€å¹¶å®‰è£… `webpack-dev-server` è¿™ä¸ªå¼€å‘ç”¨çš„ Web æœåŠ¡å™¨ï¼Œè¿˜æœ‰ TypeScript æ”¯æŒã€‚

## ç›¸å…³æ¨¡å—

Webpack å¤„ç† TypeScript (`.ts`) åŸä»£ç æ–‡ä»¶éœ€è¦ç”¨åˆ° `ts-loader` æˆ– `awesome-typescript-loader`ï¼Œå‰è€…ä½¿ç”¨å¾—æ›´å¤šã€‚åœ¨ä»£ç ä¸­å¯¼å…¥æ–‡ä»¶èµ„æºæ—¶éœ€è¦ `file-loader`ï¼Œå¯¼å…¥å›¾ç‰‡æ—¶éœ€è¦ `url-loader`ï¼Œå®ƒå¯ä»¥å¯¹å¸¸ç”¨å¾—å›¾ç‰‡è¿›è¡Œ Base64ç¼–ç ï¼Œå¯ä»¥è®¾ç½® `limit` é€‰é¡¹æ¥é™å®šå¾…ç¼–ç æ–‡ä»¶å¤§å°ã€‚åœ¨å¤„ç† CSS æ ·å¼æ–‡ä»¶æ—¶ä¼šç”¨åˆ° `css-loader`ï¼Œæ‰“åŒ…åçš„æ ·å¼åœ¨é¡µé¢ä¸Šè¿˜åŸå‡ºæ¥æ—¶éœ€è¦`style-loader` æä¾›çš„åŠŸèƒ½ï¼Œå®ƒä¼šåœ¨ `<head>` èŠ‚ç‚¹ä¸‹æ’å…¥ä¸€ä¸ª `<style>` èŠ‚ç‚¹ï¼Œé€šè¿‡å†™å…¥æ ·å¼è§„åˆ™æ¥è¿˜åŸç»è¿‡æ‰“åŒ…çš„æ ·å¼ã€‚

ç”±äº TypeScript é™æ€ç±»å‹çš„ç‰¹æ®Šæ€§ï¼Œé‚£äº›éä»£ç èµ„æºéœ€è¦ä¸º TypeScript æä¾›ä¸€ä¸ª Type Declaration ç±»å‹å£°æ˜æ–‡ä»¶ `.d.ts`ï¼Œåœ¨å·¥ç¨‹åŸä»£ç ç›®å½•ä¸‹ä¿å­˜å³å¯ï¼ŒTypeScript ä¼šè‡ªåŠ¨è§£æã€‚å¦‚ç¼–å†™ä¸€ä¸ª `.svg` èµ„æºçš„Dç±»å‹å£°æ˜æ–‡ä»¶ï¼š

	// custom.d.ts
	declare module "*.svg" {
	  const content: any;
	  export default content;
	}

è¿™ä¸ª SVG ç±»å‹å£°æ˜æ¨¡å—æŒ‡æ˜ï¼Œä»»ä½•ä»¥ `.svg` ç»“å°¾çš„æ–‡ä»¶å¯¼å…¥æ—¶å°†æ‹¥æœ‰ä¸€ä¸ª any ä»»æ„ç±»å‹å±æ€§çš„ contentï¼Œå³æ•°æ®éƒ¨åˆ†æ˜¯ä»»æ„ç±»å‹ã€‚è¿˜å¯ä»¥æ˜¾å¼å®šä¹‰ `url` å±æ€§ä¸º stringï¼Œå³æ–‡ä»¶çš„åœ°å€ã€‚ è¿™ä¸ªDeç±»å‹å£°æ˜è§„åˆ™åŒæ ·é€‚ç”¨äº CSS, SCSS, JSON ç­‰ç­‰ï¼Œè¿™æ˜¯ TypeScript é™æ€ç±»å‹ç³»ç»Ÿç‰¹æœ‰çš„åšæ³•ã€‚

TypeScript ç›¸æ¯” JavaScript å¢åŠ äº†ç±»å‹å£°æ˜ã€‚è¿™äº›ç±»å‹å£°æ˜å¸®åŠ©ç¼–è¯‘å™¨è¯†åˆ«ç±»å‹ï¼Œä»è€Œé˜²æ­¢å¼€å‘è€…æ¬èµ·çŸ³å¤´ç ¸è‡ªå·±çš„è„šã€‚

åŸåˆ™ä¸Šï¼ŒTypeScript éœ€è¦å¼€å‘è€…åšåˆ°å…ˆå£°æ˜åä½¿ç”¨ã€‚è¿™å°±å¯¼è‡´å¼€å‘è€…åœ¨è°ƒç”¨å¾ˆå¤šåŸç”Ÿæ¥å£ï¼ˆæµè§ˆå™¨ã€Node.jsï¼‰æˆ–è€…ç¬¬ä¸‰æ–¹æ¨¡å—çš„æ—¶å€™ï¼Œå› ä¸ºæŸäº›å…¨å±€å˜é‡æˆ–è€…å¯¹è±¡çš„æ–¹æ³•å¹¶æ²¡æœ‰å£°æ˜è¿‡ï¼Œå¯¼è‡´ç¼–è¯‘å™¨çš„ç±»å‹æ£€æŸ¥å¤±è´¥ã€‚

ç”¨ ts å†™çš„æ¨¡å—åœ¨å‘å¸ƒçš„æ—¶å€™ä»ç„¶æ˜¯ç”¨ js å‘å¸ƒï¼Œè¿™å°±å¯¼è‡´ä¸€ä¸ªé—®é¢˜ï¼šts é‚£ä¹ˆå¤šç±»å‹æ•°æ®éƒ½æ²¡äº†ï¼Œæ‰€ä»¥éœ€è¦ä¸€ä¸ª d.ts æ–‡ä»¶æ¥æ ‡è®°æŸä¸ª js åº“é‡Œé¢å¯¹è±¡çš„ç±»å‹
ç„¶å typings å°±æ˜¯ä¸€ä¸ªç½‘ç»œä¸Šçš„ `.d.ts` æ•°æ®åº“ã€‚

Lodash æ˜¯ä¸€ä¸ªä¸€è‡´æ€§ã€æ¨¡å—åŒ–ã€é«˜æ€§èƒ½çš„ JavaScript å®ç”¨å·¥å…·åº“ã€‚å®ƒé€šè¿‡é™ä½ arrayã€numberã€objectsã€string ç­‰ç­‰çš„ä½¿ç”¨éš¾åº¦ä»è€Œè®© JavaScript å˜å¾—æ›´ç®€å•çš„å·¥å…·ç±»ã€‚Lodash çš„æ¨¡å—åŒ–æ–¹æ³• éå¸¸é€‚ç”¨äºåš arrayã€object å’Œ string çš„éå†æ“ä½œï¼Œå¯¹å€¼è¿›è¡Œæ“ä½œå’Œæ£€æµ‹ï¼Œåˆ›å»ºç¬¦åˆåŠŸèƒ½çš„å‡½æ•°ç­‰ã€‚

`source-map-loader` æ˜¯ä¸€ä¸ª SourceMap ä»£ç åœ°å›¾å·¥å…·ï¼Œå¯ä»¥ç”Ÿæˆä»£ç åœ°å›¾æ–¹ä¾¿åšè°ƒå¼ã€‚é…ç½®æ—¶å¯ä»¥åœ¨é…ç½® `devtool` è®¾ç½®å†…è” `inline-source-map` æˆ– `source-map` æ–¹å¼ï¼Œå‰è€…ä¼šå°†è°ƒå¼ä»£ç åµŒå…¥æ‰“åŒ…è¾“å‡ºï¼Œåè€…åˆ™ç‹¬ç«‹ä¿å­˜ä¸º `.map` ä»£ç åœ°å›¾æ–‡ä»¶ã€‚

	mkdir webpack-demo
	cd webpack-demo
	npm init --yes
	npm install --save-dev webpack@4.1.1 webpack-cli@3.3.6 webpack-dev-server@3.7.2
	npm install --save-dev file-loader@4.0.0 url-loader@2.0.1 ts-loader@6.0.4 css-loader@3.0.0 style-loader@0.23.1
	npm install --save-dev awesome-typescript-loader@5.2.1
	npm install --save-dev lodash@4.17.14 source-map-loader@0.2.4

webpackâ€”â€”devtoolé‡Œçš„7ç§ SourceMapæ¨¡å¼

eval	æ¯ä¸ªmoduleä¼šå°è£…åˆ° eval é‡ŒåŒ…è£¹èµ·æ¥æ‰§è¡Œï¼Œå¹¶ä¸”ä¼šåœ¨æœ«å°¾è¿½åŠ æ³¨é‡Š //@ sourceURL.
source-map	ç”Ÿæˆä¸€ä¸ªSourceMapæ–‡ä»¶.
hidden-source-map	å’Œ source-map ä¸€æ ·ï¼Œä½†ä¸ä¼šåœ¨ bundle æœ«å°¾è¿½åŠ æ³¨é‡Š.
inline-source-map	ç”Ÿæˆä¸€ä¸ª DataUrl å½¢å¼çš„ SourceMap æ–‡ä»¶.
eval-source-map	æ¯ä¸ªmoduleä¼šé€šè¿‡eval()æ¥æ‰§è¡Œï¼Œå¹¶ä¸”ç”Ÿæˆä¸€ä¸ªDataUrlå½¢å¼çš„SourceMap.
cheap-source-map	ç”Ÿæˆä¸€ä¸ªæ²¡æœ‰åˆ—ä¿¡æ¯ï¼ˆcolumn-mappingsï¼‰çš„SourceMapsæ–‡ä»¶ï¼Œä¸åŒ…å«loaderçš„ sourcemapï¼ˆè­¬å¦‚ babel çš„ sourcemapï¼‰
cheap-module-source-map	ç”Ÿæˆä¸€ä¸ªæ²¡æœ‰åˆ—ä¿¡æ¯ï¼ˆcolumn-mappingsï¼‰çš„SourceMapsæ–‡ä»¶ï¼ŒåŒæ—¶ loader çš„ sourcemap ä¹Ÿè¢«ç®€åŒ–ä¸ºåªåŒ…å«å¯¹åº”è¡Œçš„ã€‚

webpack ä¸ä»…æ”¯æŒè¿™ 7 ç§ï¼Œè€Œä¸”å®ƒä»¬è¿˜æ˜¯å¯ä»¥ä»»æ„ç»„åˆä¸Šé¢çš„evalã€inlineã€hiddenå…³é”®å­—ï¼Œå°±å¦‚æ–‡æ¡£æ‰€è¯´ï¼Œä½ å¯ä»¥è®¾ç½® souremap é€‰é¡¹ä¸º cheap-module-inline-source-mapã€‚å¦‚æœä½ çš„ modules é‡Œé¢å·²ç»åŒ…å«äº† SourceMapsï¼Œä½ éœ€è¦ç”¨ source-map-loader æ¥å’Œåˆå¹¶ç”Ÿæˆä¸€ä¸ªæ–°çš„ SourceMapsã€‚

å¼€å‘ç¯å¢ƒæ¨èï¼š

	cheap-module-eval-source-map

ç”Ÿäº§ç¯å¢ƒæ¨èï¼š

	cheap-module-source-map

è¿™ä¹Ÿæ˜¯ä¸‹ç‰ˆæœ¬ webpack ä½¿ç”¨ -d å‘½ä»¤å¯åŠ¨ debug æ¨¡å¼æ—¶çš„é»˜è®¤é€‰é¡¹ï¼ŒåŸå› å¦‚ä¸‹ï¼š

ä½¿ç”¨ cheap æ¨¡å¼å¯ä»¥å¤§å¹…æé«˜ souremap ç”Ÿæˆçš„æ•ˆç‡ã€‚å¤§éƒ¨åˆ†æƒ…å†µæˆ‘ä»¬è°ƒè¯•å¹¶ä¸å…³å¿ƒåˆ—ä¿¡æ¯ï¼Œè€Œä¸”å°±ç®— sourcemap æ²¡æœ‰åˆ—ï¼Œæœ‰äº›æµè§ˆå™¨å¼•æ“ï¼ˆä¾‹å¦‚ v8ï¼‰ ä¹Ÿä¼šç»™å‡ºåˆ—ä¿¡æ¯ã€‚

ä½¿ç”¨ eval æ–¹å¼å¯å¤§å¹…æé«˜æŒç»­æ„å»ºæ•ˆç‡ã€‚å®˜æ–¹æ–‡æ¡£æä¾›çš„é€Ÿåº¦å¯¹æ¯”è¡¨æ ¼å¯ä»¥çœ‹åˆ° eval æ¨¡å¼çš„ç¼–è¯‘é€Ÿåº¦å¾ˆå¿«ã€‚

ä½¿ç”¨ module å¯æ”¯æŒ babel è¿™ç§é¢„ç¼–è¯‘å·¥å…·ï¼ˆåœ¨ webpack é‡Œåšä¸º loader ä½¿ç”¨ï¼‰ã€‚

ä½¿ç”¨ eval-source-map æ¨¡å¼å¯ä»¥å‡å°‘ç½‘ç»œè¯·æ±‚ã€‚è¿™ç§æ¨¡å¼å¼€å¯ DataUrl æœ¬èº«åŒ…å«å®Œæ•´ sourcemap ä¿¡æ¯ï¼Œå¹¶ä¸éœ€è¦åƒ sourceURL é‚£æ ·ï¼Œæµè§ˆå™¨éœ€è¦å‘é€ä¸€ä¸ªå®Œæ•´è¯·æ±‚å»è·å– sourcemap æ–‡ä»¶ï¼Œè¿™ä¼šç•¥å¾®æé«˜ç‚¹æ•ˆç‡ã€‚è€Œç”Ÿäº§ç¯å¢ƒä¸­åˆ™ä¸å®œç”¨ evalï¼Œè¿™æ ·ä¼šè®©æ–‡ä»¶å˜å¾—æå¤§ã€‚


## npm é…ç½®æ–‡ä»¶

`package.json`é…ç½®æ–‡ä»¶å‚è€ƒï¼Œ`main` è¿™é‡Œè®¾ç½®çš„å¼é¡¹ç›®å…¥å£ç¨‹åºï¼Œé€šå¸¸é¡¹ç›®éœ€è¦ç»“åˆ Webpack å¼€å‘ï¼Œå…¥å£æ–‡ä»¶åªåœ¨ `webpack.config.js` é…ç½®ã€‚å¦‚æœå·²ç»å‡†å¤‡å¥½é…ç½®æ–‡ä»¶ï¼Œç›´æ¥æ‰§è¡Œ `npm install` å°±å¯ä»¥æ ¹æ®é…ç½®å¥½çš„ä¾èµ–æ¨¡å—åˆ—è¡¨è¿›è¡Œä¸‹è½½å®‰è£…ï¼š

	{
	  "name": "webpack",
	  "version": "1.0.0",
	  "description": "Webpack Getting Started",
	  "main": "index.ts",
	  "devDependencies": {
	    "clean-webpack-plugin": "^3.0.0",
	    "css-loader": "^3.0.0",
	    "file-loader": "^4.0.0",
	    "html-webpack-plugin": "^3.2.0",
	    "html-webpack-template": "^6.2.0",
	    "lodash": "^4.17.14",
	    "source-map-loader": "^0.2.4",
	    "style-loader": "^0.23.1",
	    "ts-loader": "^6.0.4",
	    "ts-node": "^8.3.0",
	    "typescript": "^3.5.3",
	    "url-loader": "^2.0.1",
	    "webpack": "^4.1.1",
	    "webpack-cli": "^3.3.6",
	    "webpack-dev-server": "^3.7.2"
	  },
	  "dependencies": {},
	  "scripts": {
	    "test": "echo \"Error: no test specified\" && exit 1",
	    "dev": "webpack-dev-server --devtool eval --progress --colors",
	    "build": "set NODE_ENV=production&& webpack -p"
	  },
	  "author": "Jeango",
	  "license": "ISC"
	}

éœ€è¦æ³¨æ„çš„å¼ï¼ŒåŠ è½½çš„æ¨¡å—æ„ˆå¤šï¼Œå°±è¶Šæ¶ˆè€—ç¡¬ä»¶èµ„æºï¼Œå› æ­¤æ²¡æœ‰å¿…è¦ä½¿ç”¨çš„ç»„ä»¶å°±ä¸è¦å®‰è£…äº†ï¼Œç›´æ¥ä»é…ç½®æ–‡ä»¶ä¸­ç§»é™¤ç„¶åä»æ–°æ‰§è¡Œ `npm install` å®‰è£…å³å¯æ›´æ–°é…ç½®ã€‚
ä¾‹å¦‚ç»™ç»™è§„åˆ™æŒ‡å®š `include` ç›®å½•èŠ‚çœæœç´¢æ—¶é—´ï¼Œç®€åŒ– `resolve.modules`, `resolve.extensions`, `resolve.mainFiles`, `resolve.descriptionFiles`ã€‚ä½¿ç”¨ `DllPlugin` æ’ä»¶å°†é‚£äº›ä¸æ€ä¹ˆä¿®æ”¹çš„å†…å®¹åˆ†ç¦»åˆ°å¦ä¸€ä¸ªç¼–è¯‘å•å…ƒï¼Œé¿å…åœ¨å¼€å‘è¿‡ç¨‹ä½¿ç”¨ `source-map` æˆ– `minimize`ï¼Œç‰¹åˆ«æ˜¯ä»£ç åœ°å›¾ Source maps å®ƒéå¸¸è€—èµ„æºï¼Œè¯·è€ƒè™‘æ˜¯å¦çœŸçš„éœ€è¦ã€‚

å¯ä»¥ä½¿ç”¨å¹¶è¡Œç¼–è¯‘ï¼Œ`parallel-webpack` å’Œ `cache-loader` æä¾›å¹¶è¡Œç¼–è¯‘çš„èƒ½åŠ›ï¼Œåè€…å¯¹æ€§èƒ½å¼€é”€è¾ƒå¤§çš„ loader æä¾›ç¼“å­˜æœåŠ¡ã€‚å…·ä½“è¦ç‚¹å‚è€ƒå®˜æ–¹çš„æ„å»ºä¼˜åŒ–æ–‡æ¡£[Build Performance]ã€‚

	rules: [
	  {
	    test: /\.js$/,
	    include: path.resolve(__dirname, 'src'),
	    loader: 'babel-loader'
	  }
	]


ä¸ºäº†æ–¹ä¾¿ä½¿ç”¨æ‰“åŒ…å‘½ä»¤ï¼Œå¯ä»¥é…ç½®åˆ° `package.json` ä¸­çš„ `scripts`ï¼Œä¾‹å¦‚è¦è¿è¡Œå¼€å‘æœåŠ¡å™¨ `webpack-dev-server` åªéœ€è¦æ‰§è¡Œ `npm run dev`ï¼Œè¦ç”Ÿæˆå‘å¸ƒæ‰“åŒ…å°±æ‰§è¡Œ `npm run build`ï¼Œå¦å¤– VSCode å¯¹è¿™é‡Œè®¾ç½®çš„å‘½ä»¤é…ç½®é¡¹æ”¯æŒå¾ˆåˆ°ä½ï¼Œç›´æ¥é€šè¿‡ VSCode çš„ Terminal èœå• `Run Task` å°±å¯ä»¥æ‰§è¡Œã€‚Sublime 

	{
	  "scripts": {
	    "dev": "webpack-dev-server --devtool eval --progress --colors",
	    "build": "NODE_ENV=production webpack -p"
	  },
	}

å½“é¡¹ç›®é€æ¸å˜å¤§ï¼Œwebpack çš„ç¼–è¯‘æ—¶é—´ä¼šå˜é•¿ï¼Œæœä¸æƒ³æ¯æ¬¡ä¿®æ”¹æ¨¡å—åéƒ½é‡æ–°ç¼–è¯‘ï¼Œé‚£ä¹ˆå¯ä»¥å¯åŠ¨ç›‘å¬æ¨¡å¼ `--watch`ã€‚å¼€å¯ç›‘å¬æ¨¡å¼åï¼Œæ²¡æœ‰å˜åŒ–çš„æ¨¡å—ä¼šåœ¨ç¼–è¯‘åç¼“å­˜åˆ°å†…å­˜ä¸­ï¼Œè€Œä¸ä¼šæ¯æ¬¡éƒ½è¢«é‡æ–°ç¼–è¯‘ï¼Œæ‰€ä»¥ç›‘å¬æ¨¡å¼çš„æ•´ä½“é€Ÿåº¦æ˜¯å¾ˆå¿«çš„ã€‚`-p` å³è®¾ç½® NODE_ENV ä¸º production æ¨¡å¼è¿›è¡Œæ‰“åŒ…ï¼Œ `--progress` æ˜¾ç¤ºç™¾åˆ†æ¯”è¿›åº¦, `--colors` å‚æ•°è®©ç¼–è¯‘çš„è¾“å‡ºå†…å®¹å¸¦æœ‰è¿›åº¦å’Œé¢œè‰²ã€‚

	webpack -p --progress --colors --watch

webpack å‘½ä»¤çš„åŸºæœ¬ç”¨æ³•å¯ä»¥æŸ¥çœ‹å¸®åŠ©ä¿¡æ¯ `webpack --help`

	webpack				â€“ building for development
	webpack -p			â€“ building for production (minification)
	webpack --watch		â€“ for continuous incremental building
	webpack -d			â€“ including source maps
	webpack --colors	â€“ making building output pretty

	webpack-cli [options] --entry <entry> --output <output>
	webpack-cli [options] <entries...> --output <output>
	webpack-cli <command> [options]


## TypeScript é…ç½®

æ¥ä¸‹æ¥éœ€è¦ä¸€ä¸ª TypeScript é…ç½®æ–‡ä»¶ `tsconfig.json`ï¼Œå› ä¸º TypeScript éœ€è¦ä½¿ç”¨åˆ° Node.js çš„ç±»å‹ä¿¡æ¯ï¼Œæ¨¡å—è§£æ`moduleResolution` è®¾ç½®æˆ `node` æ¨¡å¼ã€‚å…¶å®ƒé…ç½®é¡¹ä¿¡æ¯å¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£ [TypeScript]ã€‚

	{
	    "compilerOptions": {
	        "outDir": "./dist/", // path to output directory
	        "sourceMap": true, // allow sourcemap support
	        "strictNullChecks": true, // enable strict null checks as a best practice
	        "module": "es6", // specifiy module code generation
	        "target": "es5", // specify ECMAScript target version
	        "allowJs": true, // allow a partial TypeScript and JavaScript codebase  
	        "moduleResolution": "node",
	        "noImplicitAny": true, // disallow implicit any type
	        "noImplicitReturns": true,
	        "strict": true,
	    },
	    "include": ["./src/"]
	}




## Webpack é…ç½®

å®‰è£…å„ç§ Loaders åï¼Œéœ€è¦æ ¹æ® Loader å¼€å‘æ–‡æ¡£å‚è€ƒé…ç½®ï¼ŒWebpack å¾—é…ç½®æ–‡ä»¶æ˜¯ `webpack.config.js` å®˜æ–¹æ–‡æ¡£æœ‰å¾ˆè¯¦ç»†å¾—è¯´æ˜ã€‚å¯¹äº Loaderï¼Œä¸»è¦æ˜¯é…ç½® `rules` è§„åˆ™ï¼Œ`test` æ˜¯æ–‡ä»¶ååŒ¹é…æ­£åˆ™è§„åˆ™ï¼Œç¬¦åˆåŒ¹é…æ¡ä»¶å¾—æ–‡ä»¶å°±äº¤ç»™æŒ‡å®šçš„ `loader` è¿›è¡Œå¤„ç†ï¼Œå„ä¸ª Loader çš„é…ç½®é€‰é¡¹å‚è€ƒæ–‡æ¡£è®¾ç½®ã€‚

å…¶ä¸­ `entry` å’Œ `output` æ˜¯æ¯”è¾ƒé‡è¦çš„é…ç½®ï¼Œentry è¡¨ç¤ºç¨‹åºå…¥å£ï¼Œoutput è¡¨ç¤ºæ‰“åŒ…å‡ºå£ï¼Œå³æ‰“åŒ…ç”Ÿæˆçš„æ–‡ä»¶ã€‚`publicPath` æ˜¯è®¿é—®èµ„æºæ—¶ä½¿ç”¨çš„å‚è€ƒè·¯å¾„ï¼Œæ‰“åŒ…åçš„èµ„æºå­˜æ”¾è·¯å¾„ä¸å®ƒç›´æ¥å…³è”ã€‚åœ¨ä½¿ç”¨å¼€å‘æœåŠ¡å™¨æ—¶ï¼Œå®ƒå°±æ˜¯é¡¹ç›®çš„æ ¹ç›®å½•ä¸‹çš„è·¯å¾„ï¼Œä½¿ç”¨ç›¸å¯¹ç›®å½•æ—¶è¦å‚è€ƒæ ¹ç›®å½•æ¥è®¾ç½®ã€‚`output` è¿˜å¯ä»¥è®¾ç½® `path` å±æ€§æ¥æŒ‡å®šæ‰“åŒ…æ–‡ä»¶å­˜æ”¾ä½ç½®ï¼Œé»˜è®¤æ˜¯ `dist` ç›®å½•ã€‚ç»“åˆ `filename` æŒ‡å®šè¾“å‡ºæ–‡ä»¶å°±æ˜¯ `/dist/bin/bundle.js`ã€‚å¦‚æœå¯¹èµ„æºæ–‡ä»¶çš„å‘å¸ƒç›®å½•æœ‰è‡ªå®šä¹‰éœ€æ±‚ï¼Œå¯ä»¥é€šè¿‡ `process.env.NODE_ENV` å˜é‡åˆ¤ç«¯æ˜¯å¦æ˜¯å‘å¸ƒç¼–è¯‘ï¼Œç„¶åå†æŒ‡å®šä¸€ä¸ª `publicPath` ç›®å½•ã€‚

- Entry    å³æ‰“åŒ…åè¿è¡Œå…¥å£ï¼Œé»˜è®¤æ˜¯ ./src/index.jsï¼Œå¯ä»¥åœ¨é…ç½®æ–‡ä»¶ä¸­ä¿®æ”¹ã€‚
- Output   å‡ºå£æ‰“åŒ…æ–‡ä»¶å³æ‰“åŒ…ç”Ÿæˆçš„æ–‡ä»¶ï¼Œé»˜è®¤åœ¨ ./dist/main.jsï¼Œå¯ä»¥é€šè¿‡é…ç½®ä¿®æ”¹ã€‚
- Mode     æ¨¡å¼è®¾ç½®ï¼ŒåŸºæœ¬ä¸Šæœ‰ development, production, none å‡ ç§æ¨¡å¼ã€‚æ ¹æ®ä¸åŒçš„æ¨¡å¼ä½¿ç”¨ä¸åŒçš„é…ç½®æ–‡ä»¶æ¥ä¼˜åŒ–å¼€å‘/å‘å¸ƒã€‚

åœ¨ Webpack 4 ä¸­ï¼Œä¸å†å¼ºåˆ¶è¦æ±‚æŒ‡å®š entry å’Œ output è·¯å¾„ã€‚webpack 4 ä¼šé»˜è®¤ entry ä¸º `./src`ï¼Œoutput ä¸º `./dist`ã€‚

`mode` æ¨¡å¼è®¾ç½®ï¼ŒåŸºæœ¬ä¸Šæœ‰ development, production, none å‡ ç§æ¨¡å¼ã€‚æ ¹æ®ä¸åŒçš„æ¨¡å¼ä½¿ç”¨ä¸åŒçš„é…ç½®æ–‡ä»¶æ¥ä¼˜åŒ–å¼€å‘/å‘å¸ƒã€‚

`resolve` è®¾å®šè¦è§£æçš„æ–‡ä»¶ç±»å‹ï¼Œè®¾ç½®é”™è¯¯è§£æä¸åˆ°çš„æ–‡ä»¶ç±»å‹ä¼šäº§ç”Ÿ Module not found: Error: Can't resolve...

	module.exports = {
	    // change to .tsx if necessary
	    entry: './src/index.ts',
	    mode: 'development',
	    output: {
	        publicPath: "/",
	        filename: './bin/bundle.js'
	    },
	    resolve: {
	        extensions: [".ts", ".tsx", ".js", ".jsx"]
	    },
	    module: {
	        rules: [{
	            test: /\.(t|j)sx?$/,
	            use: {
	                loader: 'ts-loader'
	            }
	        }, {
	            test: /\.(png|jpg|gif)$/i,
	            use: [{
	                loader: 'url-loader',
	                options: {
	                    limit: 8192,
	                },
	            }, ],
	        }, {
	            test: /\.css$/i,
	            use: [{
	                loader: "style-loader"
	            }, {
	                loader: 'css-loader',
	                options: {
	                    modules: true,
	                }
	            }]
	        }]
	    // },
	    // devtool: 'inline-source-map',
	    // devtool: "source-map",
	    // optimization: {
	    //     minimize: true
	    // },
	    // externals: {
	    //     "react": "React",
	    //     "react-dom": "ReactDOM",
	    }
	}
	if (process.env.NODE_ENV === "production") {
	    module.exports.output.publicPath = "./release";
	}

å¦‚æœå·¥ç¨‹æœ‰å¤šä¸ªä¸»ç¨‹åºå…¥å£æ–‡ä»¶ï¼Œé‚£ä¹ˆå¯ä»¥å°† `entry` å’Œ `output` ä¿®æ”¹æˆåˆ†ç»„æ‰“åŒ…æ–¹å¼ã€‚Webpack çš„è¾“å‡ºå‚æ•° `output` æŒ‡å®šè§„åˆ™ç”Ÿæˆè¾“å‡ºæ–‡ä»¶ã€‚æ‰€æœ‰çš„å…¥å£äº§ç”Ÿçš„è¾“å‡ºæ–‡ä»¶éƒ½å¿…é¡»ä½¿ç”¨è¿™ä¸€å¥—è§„åˆ™ï¼Œä¸èƒ½é’ˆå¯¹æŸä¸€ä¸ªç‰¹å®šçš„å…¥å£æ¥åˆ¶å®š `output` è§„åˆ™ã€‚è¾“å‡ºé¡¹ä¸­ç”¨ `[name]` æ¥å¼•ç”¨ `entry`æ¯ä¸€é¡¹ä¸­çš„é”®å€¼ï¼Œç”¨ä»¥æ‰¹é‡æŒ‡å®šç”Ÿæˆåæ–‡ä»¶çš„åç§°ã€‚`[hash]` å¼•ç”¨æœ¬æ¬¡ç¼–è¯‘çš„ä¸€ä¸ªhashç‰ˆæœ¬å·ï¼Œ`[chunkhash]` å¼•ç”¨çš„æ˜¯å½“å‰chunkçš„ä¸€ä¸ªhashç‰ˆæœ¬ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œåœ¨åŒä¸€æ¬¡ç¼–è¯‘ä¸­ï¼Œæ¯ä¸€ä¸ªchunkçš„hashéƒ½æ˜¯ä¸ä¸€æ ·çš„ï¼›è€Œåœ¨ä¸¤æ¬¡ç¼–è¯‘ä¸­ï¼Œå¦‚æœæŸä¸ªchunkæ ¹æœ¬æ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼Œé‚£ä¹ˆè¯¥chunkçš„hashä¹Ÿå°±ä¸ä¼šå‘ç”Ÿå˜åŒ–ã€‚

`html-webpack-plugin` å’Œ `html-webpack-template` æ˜¯ä¸¤ä¸ªç”Ÿæˆ HTML æ¨¡æ¿çš„æ’ä»¶ï¼Œä¸ºäº†å¯¹å‘å¸ƒç›®å½• `dist` è‡ªåŠ¨æ¸…ç†ï¼Œå¯ä»¥ä½¿ç”¨ `clean-webpack-plugin` æ’ä»¶ã€‚è¿™å‡ ä¸ªæ’ä»¶éƒ½æ˜¯ Webpack æä¾›å­¦ä¹ å¦‚ä½•åœ¨ Node.js å¹³å°ä¸‹åš Webpack æ’ä»¶å¼€å‘ç”¨çš„ï¼Œä¹Ÿå…·æœ‰ä¸€å®šçš„å®ç”¨ã€‚

Node.js æä¾›çš„å†…ç½®æ¨¡å— `path` å¯ä»¥ç”¨æ¥è§£æç»å¯¹è·¯å¾„ã€‚

	const path = require('path');
	const HtmlWebpackPlugin = require('html-webpack-plugin');
	const { CleanWebpackPlugin } = require('clean-webpack-plugin');

	module.exports = {
	  entry: {
	    app: './src/index.js',
	    print: './src/print.js'
	  },
	  // entry: {
	  //   home: ['./home.js', './home.scss'],
	  //   account: ['./account.js', './account.scss']
	  // },
	  output: {
	    filename: '[name].bundle.js',
	    path: path.resolve(__dirname, 'dist')
	  },
	  plugins: [
	    new CleanWebpackPlugin(),
	    new HtmlWebpackPlugin({
	      title: 'Output Management'
	    })
	  ]
	};

## é¡¹ç›®æ–‡ä»¶

å…ˆå‡†å¤‡ä¸€ä¸ªé¡µé¢æ¨¡æ¿ `index.html` ç”¨å®ƒæ¥åŠ è½½ Webpack æ‰“åŒ…ç”Ÿæˆçš„è¾“å‡ºæ–‡ä»¶ `bundle.js`ï¼Œä¸ºäº†ç®€åŒ–è¿™é‡Œå°±ä¸å¼•ç”¨ç¬¬ä¸‰æ–¹ JavaScript åº“:

	<!DOCTYPE html>
	<html lang="en">
	    <head>
	        <meta charset="utf-8" />
	        <title>TypeScript with Webpack</title>
	        <style>
	        	.frame {
	        		width:50%;
	        		padding:10%;
	        		color:white;
	        		background: #282828;
	        	}
	        </style>
	    </head>
	    <body>
	        <div id="content" class="frame"></div>
	        <script src="./bin/bundle.js"></script>
	    </body>
	</html>

æ–°å»º `src` ç›®å½•ç”¨æ¥æ”¾æºä»£ç  `index.ts`ï¼š

	class Student {
		fullName: string = "";
		readonly age:number = 18;
		constructor( public firstName:string, public middle:string, public lastName:string){
			this.fullName = firstName + ' ' + middle + ' ' + lastName;
		}
	}

	interface Person {
	    firstName: string;
	    lastName: string;
	}

	function greeter(person: Person) {
	    return "Hello, " + person.firstName;
	}

	let user = { firstName: "Jane", lastName: "User" };
	// let user = new Student("Jane", "M.", "User");

	let $ = (id:string, msg:string) => {
		let tag = document.getElementById(id);
		if (!tag){
			document.body.innerHTML = ("HTML element not found #"+id);
		}else{
			tag.innerHTML = msg;
		}
	}
	$("content", greeter(user));

å…¶å®ƒä¸éœ€è¦æ‰“åŒ…çš„èµ„æºæ–‡ä»¶å•ç‹¬æ”¾æ”¾åˆ° `public` å­ç›®å½•ä¸‹ï¼Œè¿™æ ·çš„å·¥ç¨‹ç›®å½•ç»“æ„æ˜¯æ¯”è¾ƒé€šç”¨åˆç†çš„ã€‚


## æ‰“åŒ…
[webpack 4 splitChunk æ’ä»¶é…ç½®](https://juejin.im/post/5af1677c6fb9a07ab508dabb)
[webpack examples](https://github.com/webpack/webpack/tree/master/examples/)
[webpack 4 split-chunks-plugins](https://webpack.docschina.org/plugins/split-chunks-plugin/)
[webpack code splitting](https://webpack.docschina.org/guides/code-splitting/)

ç¼–å†™å¥½é¡¹ç›®ä»£ç åï¼Œå°±å¯ä»¥æ‰“åŒ…é¡¹ç›®ï¼Œå‚è€ƒå‰é¢é…ç½®çš„æ‰“åŒ…å‘½ä»¤ï¼Œæ‰§è¡Œå…¶ä¸­ä¸€ä¸ªï¼š

	npm run build
	webpack -p
	webpack --profile --json>profile.json

ç”Ÿæˆè¿‡ç¨‹ä¼šæœ‰ä¸­é—´ä»£ç å— chunksï¼Œå¯ä»¥åœ¨entryé‡Œé…ç½®ä»£ç çš„nameå±æ€§ã€‚ä½¿ç”¨äº†ä»£ç åˆ†å‰²code splittingé…ç½®ï¼Œä¼šæœ‰å¤šä¸ª bundle è¾“å‡ºæ–‡ä»¶ã€‚å¤šä¸ªchunkåˆåœ¨ä¸€èµ·å°±æ˜¯bundleï¼Œä¸€ä¸ªbundleå¯ä»¥ç†è§£ä¸ºä¸€ä¸ªå¤§çš„jsæ‰“åŒ…ä¹‹åç”Ÿæˆçš„æ–‡ä»¶ï¼Œè€Œå¤šä¸ªbundleé‡Œå¯èƒ½æœ‰å…¬å…±çš„éƒ¨åˆ†ï¼Œæˆ–è€…ä¸€ä¸ªbundleé‡Œçš„ä¸œè¥¿å¹¶ä¸éœ€è¦ä¸€æ¬¡æ€§åŠ è½½ï¼Œéœ€è¦æŒ‰ç…§è·¯ç”±æŒ‰éœ€åŠ è½½ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦æŒ‰éœ€åŠ è½½ï¼Œæ‹†åˆ†æˆä¸åŒçš„ chunk æ¨¡å—ã€‚Webpack æœ¬èº«åªèƒ½å¤„ç† JavaScript æ¨¡å—ï¼Œå¦‚æœè¦å¤„ç†å…¶ä»–ç±»å‹çš„æ–‡ä»¶ï¼Œå°±éœ€è¦ä½¿ç”¨ loader è¿›è¡Œè½¬æ¢ã€‚

å‡çº§åˆ° webpack 4 ä¼šè‡ªåŠ¨åˆ†å‰²ã€å‹ç¼©ã€ä¼˜åŒ–ï¼ŒåŒæ—¶ webpack ä¹Ÿä¼šè‡ªåŠ¨å¸®ä½  Scope hoisting å’Œ Tree-shakingã€‚å–æ¶ˆäº† UglifyjsWebpackPluginï¼Œä½¿ç”¨minimizeè¿›è¡Œå‹ç¼©ï¼Œä¹Ÿå–æ¶ˆäº† CommonsChunkPlugin åˆ†åŒ…ï¼Œä½¿ç”¨ splitChunks è¿›è¡Œåˆ†åŒ…é…ç½®ã€‚å› ä¸ºwebpackåªåšäº†å…¥å£æ–‡ä»¶çš„ä¾èµ–ä»£ç æ‰“åŒ…ï¼Œåªåšäº†å…¥å£æ–‡ä»¶çš„å…¬å…±ä»£ç åˆ†æï¼Œåªæœ‰å…¥å£æ–‡ä»¶å¼•ç”¨è¿‡çš„ä»£ç ï¼Œå¹¶ä¸”å…¶ä»–chunké¡µé¢ä¹Ÿå¼•å…¥äº†çš„è¯ï¼Œwebpackä¼šä¾æ®è‡ªèº«é»˜è®¤åˆ†åŒ…è§„åˆ™å°†å…¶åˆ†åŒ…ã€‚

åˆ†åŒ… Code Splitting è§£å†³çš„æ—¶ä»£ç åŠ è½½æµç¨‹çš„ä¼˜åŒ–é—®é¢˜ï¼Œå¤šå…¥å£é…ç½® entry è§£å†³ä¸åŒç¨‹åºçš„å¤šå…¥å£éœ€æ±‚ï¼›æŠ½å–å…¬æœ‰ä»£ç è§£å†³é‚£äº›éœ€è¦å¤šæ¬¡ä½¿ç”¨çš„ä»£ç ç»Ÿä¸€æ‰“åŒ…é¿å…å¤šæ¬¡ç½‘ç»œè¯·æ±‚ï¼›åŠ¨æ€åŠ è½½ï¼Œå°±æ˜¯æŒ‰éœ€åŠ è½½æˆ–è€…æ‡’åŠ è½½ï¼Œé¿å…æ‰“åŒ…æ–‡ä»¶è¿‡å¤§å¯¼è‡´é¦–å±åŠ è½½æ—¶é—´è¿‡é•¿ã€‚

ä½†æ˜¯å¦‚æœå…¥å£æ–‡ä»¶æ²¡æœ‰å¼•å…¥ï¼Œé‚£ä¹ˆå…¶å®ƒchunké¡µé¢é‡Œé¢çš„å…¬å…±ä»£ç å¹¶æ²¡æœ‰æŠ½å‡ºï¼Œå¯èƒ½å¯¼è‡´æ¯ä¸ªbundleéƒ½æœ‰é‡å¤æ‰“åŒ…ä»£ç çš„æƒ…å†µï¼Œå¯¼è‡´æ•´ä¸ªé¡¹ç›®æ–‡ä»¶è¾ƒå¤§ã€‚

	optimization: {
	  splitChunks: {
	     chunks: "async", // å¿…é¡»ä¸‰é€‰ä¸€ï¼šasync(é»˜è®¤åŠ¨æ€åŠ è½½æ¨¡å—) initial(å…¥å£æ¨¡å—) all(å…¨éƒ¨æ¨¡å—å…¥å£å’ŒåŠ¨æ€çš„)ã€‚
	     minSize: 30000, // æœ€å°å°ºå¯¸ï¼Œ30000
	     minChunks: 1, // æ‰“åŒ…åˆ°å…¬å…±åŒ…è¦æ±‚æœ€å° chunk å¼•ç”¨æ¬¡æ•°ï¼Œé»˜è®¤1
	     maxAsyncRequests: 5, // æœ€å¤§å¼‚æ­¥è¯·æ±‚æ•°ï¼Œ é»˜è®¤5
	     maxInitialRequests : 3, // æœ€å¤§åˆå§‹åŒ–è¯·æ±‚ä¹¦ï¼Œé»˜è®¤3
	     automaticNameDelimiter: '~',// æ‰“åŒ…åˆ†éš”ç¬¦
	     name: function(){}, // æ‰“åŒ…åçš„åç§°ï¼Œæ­¤é€‰é¡¹å¯æ¥æ”¶ function
	     cacheGroups:{ // è¿™é‡Œå¼€å§‹è®¾ç½®ç¼“å­˜çš„ chunks
	         priority: 0, // ç¼“å­˜ç»„ä¼˜å…ˆçº§
	         vendor: { // key ä¸ºentryä¸­å®šä¹‰çš„ å…¥å£åç§°
	             chunks: "initial", // å¿…é¡»ä¸‰é€‰ä¸€ï¼š "initial" | "all" | "async"(é»˜è®¤å°±æ˜¯async) 
	             test: /react|lodash/, // æ­£åˆ™è§„åˆ™éªŒè¯ï¼Œå¦‚æœç¬¦åˆå°±æå– chunk
	             name: "vendor", // è¦ç¼“å­˜çš„ åˆ†éš”å‡ºæ¥çš„ chunk åç§° 
	             minSize: 30000,
	             minChunks: 1,
	             enforce: true,
	             maxAsyncRequests: 5, // æœ€å¤§å¼‚æ­¥è¯·æ±‚æ•°ï¼Œ é»˜è®¤1
	             maxInitialRequests : 3, // æœ€å¤§åˆå§‹åŒ–è¯·æ±‚ä¹¦ï¼Œé»˜è®¤1
	             reuseExistingChunk: true // å¯è®¾ç½®æ˜¯å¦é‡ç”¨è¯¥chunk
	         }
	     }
	  }
	 },

æœ€å¤§çš„å¼‚æ­¥è¯·æ±‚æ•° `maxAsyncRequests` å’Œæœ€å¤§çš„åˆå§‹è¯·æ±‚æ•° `maxInitialRequests`æ˜¯ä¸ºäº†é˜²æ­¢chunkåˆ’åˆ†çš„è¿‡äºç»†è‡´ï¼Œå¯¼è‡´å¤§é‡çš„æ–‡ä»¶è¯·æ±‚é™ä½performanceã€‚æŒ‰éœ€åŠ è½½çš„ä»£ç å—ï¼ˆvendor-chunkï¼‰å¹¶è¡Œè¯·æ±‚çš„æ•°é‡å°äºæˆ–ç­‰äº5ä¸ªï¼Œæ‰ä¼šè¿›è¡Œåˆ†å‰²ï¼Œè¶…è¿‡è¯·æ±‚çš„æŒ‡å®šè¯·æ±‚é¢‘åº¦æ•°é‡ï¼Œè¿˜è¿›è¡Œåˆ†åŒ…å°±æœ‰å¯èƒ½åº”ç½‘ç»œè¯·æ±‚é¢‘å‘è€Œé™ä½æ€§èƒ½ï¼Œå› æ­¤ webpack ä½¿ç”¨è¿™ä¸¤ä¸ªå‚æ•°æ¥ç¡®å®šæ˜¯å¦åˆ†åŒ…ã€‚

ä¿®æ”¹ä¸€ä¸‹ Webpack é…ç½®ï¼Œå°è¯•ä½¿ç”¨å¤šæ¨¡å—çš„æ‰“åŒ…ï¼š

    entry: {
        main:'./src/index.ts',
        sd:'./src/standalone.ts',
    },
    output: {
        publicPath: "/",
        filename: './bin/[name].bundle.js'
    },

å› ä¸ºè¾“å‡ºæ–‡ä»¶å‘½åè§„åˆ™æ”¹å˜äº†ï¼ŒHTML æ¨¡æ¿ä¹Ÿéœ€è¦ä¿®æ”¹ä¸€ä¸‹å…¥å£å¼•ç”¨ï¼š

	<!DOCTYPE html>
	<html lang="en">
	    <head>
	        <meta charset="utf-8" />
	        <title>TypeScript with Webpack & Plugin Development!</title>
	        <!-- <link rel="stylesheet" href="style.css"> -->
	    </head>
	    <body>
	        <div id="content" class="frame"></div>
	        <script src="./bin/main.bundle.js"></script>
	    </body>
	</html>

æ·»åŠ ä¸€ä¸ªç‹¬ç«‹æ¨¡å— `standalone.ts`ï¼Œåªéœ€è¦ä¸€ä¸ªè¾“å‡ºè°ƒè¯•ä¿¡æ¯çš„ `test()` æ–¹æ³•ã€‚`standalone.ts` å…¶å®æ˜¯ä½œä¸ºå…¥å£æ¨¡å—é…ç½®ï¼Œä½†è¿™é‡Œæ˜¯å½“ä½œæ¨¡å—å®ç°å’Œä½¿ç”¨çš„ã€‚

	export default class Demo{
		test(msg:string){
			console.log("Test:", msg);
		}
	}

ç„¶ååœ¨ `index.ts` å¯¼å…¥å¹¶è¿›è¡Œæ¨¡å—æµ‹è¯•ï¼š

	import SD from "./standalone";
	new SD().test("Jeango");

æ‰§è¡Œ `webpack -p` æ‰“åŒ…æ—¶å°±ä¼šç”Ÿæˆç›¸åº”çš„æ¨¡å—:

	Hash: 1da5fe1d39990835525f
	Version: webpack 4.1.1
	Time: 1988ms
	Built at: 2019-7-24 23:51:34
	               Asset       Size  Chunks             Chunk Names
	  ./bin/sd.bundle.js  675 bytes       0  [emitted]  sd
	./bin/main.bundle.js  992 bytes    1, 0  [emitted]  main
	Entrypoint main = ./bin/main.bundle.js
	Entrypoint sd = ./bin/sd.bundle.js
	   [0] ./src/standalone.ts 206 bytes {0} {1} [built]
	   [1] ./src/index.ts 995 bytes {1} [built]

æ‰“åŒ…åé€šè¿‡`serve dist` å‘½ä»¤è¿è¡Œæµ‹è¯•æœåŠ¡ï¼Œéœ€è¦ç»“åˆå¼€å‘çƒ­åŠ è½½å°±ä½¿ç”¨ `webpack-dev-server`ã€‚


## devServer config
[Dev Server Config](https://webpack.js.org/configuration/dev-server/#devserver-hot)
	

	module.exports = {
	  //...
	  devServer: {
	    index: 'index.html',
	    open: 'Chrome.exe',
	    openPage: '/home/page',
	    public: 'demo.com:80',
	    publicPath: '/assets/',
	    port: 8080,
	    proxy: {
	      '/api': 'http://localhost:3000'
	    }
	    proxy: {
	      '/api': {
	        target: 'http://localhost:3000',
	        pathRewrite: {'^/api' : ''}
	      }
	    }
	    proxy: {
	      '/api': {
	        target: 'https://other-server.example.com',
	        secure: false
	      }
	    }

	    http2: true,
	    // https: true,
	    https: {
	      key: fs.readFileSync('/path/to/server.key'),
	      cert: fs.readFileSync('/path/to/server.crt'),
	      ca: fs.readFileSync('/path/to/ca.pem'),
	    }
	  }
	};


# static assets

éœ€è¦ç†è§£ webpack æ˜¯æ€æ ·å¤„ç†é™æ€èµ„æºçš„ï¼Œåœ¨ .vue ç»„ä»¶ä¸­ï¼Œæ‰€æœ‰çš„ templates å’Œ css éƒ½ä¼šè¢« vue-html-loader å’Œ css-loader è§£æï¼Œå¯»æ‰¾èµ„æºçš„ URLã€‚ä¸¾ä¸ªä¾‹å­ï¼Œåœ¨ img src="./logo.png" å’Œ background: url(./logo.png) ä¸­çš„å›¾åƒéƒ½æ˜¯ç›¸å¯¹èµ„æºè·¯å¾„ï¼Œéƒ½ä¼šè¢« Webpack è§£ææˆæ¨¡å—ä¾èµ–ã€‚

ç”±äº logo.png ä¸æ˜¯ JavaScriptï¼Œå½“è¢«çœ‹æˆä¸€ä¸ªæ¨¡å—ä¾èµ–çš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦ä½¿ç”¨ url-loader å’Œ file-loader è¿›è¡Œå¤„ç†ã€‚ æ¨¡æ¿å·²ç»é…ç½®å¥½è¿™äº› loadersï¼Œä½¿ç”¨ç›¸å¯¹/æ¨¡å—è·¯å¾„æ—¶ä¸éœ€è¦æ‹…å¿ƒéƒ¨ç½²çš„é—®é¢˜ã€‚

ç”±äºè¿™äº›èµ„æºå¯èƒ½åœ¨æ„å»ºçš„æ—¶å€™è¢«å†…è”/å¤åˆ¶/é‡å‘½åï¼Œ æ‰€ä»¥å®ƒä»¬ä»æœ¬è´¨ä¸Šæ¥è¯´æ˜¯ä½ æºç çš„ä¸€éƒ¨åˆ†ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘ä»¬å»ºè®®å°†äº¤ç”± webpack å¤„ç†çš„é™æ€èµ„æºå’Œå…¶å®ƒæºæ–‡ä»¶ä¸€æ ·æ”¾åœ¨ /src è·¯å¾„ä¸‹é¢ã€‚å®é™…ä¸Šï¼Œä½ ç”šè‡³ä¸éœ€è¦æŠŠå®ƒä»¬å…¨éƒ½æ”¾åœ¨ /src/assets è·¯å¾„ä¸‹ï¼Œä½ å¯ä»¥åŸºäºæ¨¡å—/ç»„ä»¶çš„ä½¿ç”¨æ¥ç»„ç»‡æ–‡ä»¶ç»“æ„ã€‚ä¾‹å¦‚ï¼Œä½ å¯ä»¥æŠŠæ¯ä¸ªç»„ä»¶å’Œå±äºå®ƒçš„é™æ€èµ„æºæ”¾åœ¨å®ƒè‡ªå·±çš„ç›®å½•ä¸‹ã€‚

èµ„æºå¤„ç†è§„åˆ™ï¼Œç›¸å¯¹ URL å¦‚ ./assets/logo.png è§£é‡Šæˆä¸€ä¸ªæ¨¡å—ä¾èµ–ï¼Œä¼šè¢«ä¸€ä¸ªåŸºäº Webpack è¾“å‡ºé…ç½®è‡ªåŠ¨ç”Ÿæˆçš„ URL æ›¿ä»£ã€‚

æ²¡æœ‰å‰ç¼€çš„ URL å¦‚ assets/logo.png å°†ä¼šè¢«çœ‹æˆç›¸å¯¹ URLï¼Œå¹¶ä¸”è½¬æ¢æˆ ./assets/logo.pngã€‚

å‰ç¼€å¸¦ ~ çš„ URL ä¼šè¢«å½“æˆæ¨¡å—è¯·æ±‚, ç±»ä¼¼äº require æ“ä½œã€‚å¦‚æœä½ æƒ³è¦åˆ©ç”¨ Webpack çš„æ¨¡å—å¤„ç†é…ç½®ï¼Œå°±å¯ä»¥ä½¿ç”¨è¿™ä¸ªå‰ç¼€ã€‚ä¾‹å¦‚ï¼Œå¦‚æœä½ æœ‰ä¸€ä¸ªå¯¹äº assets çš„è·¯å¾„è§£æï¼Œä½ éœ€è¦ä½¿ç”¨ img src="~assets/logo.png" æ¥ç¡®ä¿è§£ææ˜¯å¯¹åº”ä¸Šçš„ã€‚

ç›¸å¯¹æ ¹ç›®å½•çš„ URL /assets/logo.png æ˜¯ä¸ä¼šè¢«å¤„ç†çš„.

åœ¨ JavaScript é‡Œè·å–èµ„æºè·¯å¾„ï¼Œä¸ºäº†èƒ½è®© Webpack è¿”å›æ­£ç¡®çš„èµ„æºè·¯å¾„ï¼Œä½ éœ€è¦ä½¿ç”¨ require ç›¸å¯¹ç›®å½•ï¼Œç”± file-loader è¿›è¡Œè§£æï¼Œç„¶åè¿”å›å¤„ç†è¿‡çš„ URLã€‚ä¾‹å¦‚ï¼š

	computed: {
	  background () {
	    return require('./bgs/' + this.id + '.jpg')
	  }
	}


ä½œä¸ºå¯¹æ¯”ï¼Œåœ¨ static/ ä¸‹çš„æ–‡ä»¶éƒ½ä¸ä¼šè¢« Webpack å¤„ç†ï¼ŒåŸæ ·ç›´æ¥æ‹·è´åˆ°æœ€ç»ˆçš„è¾“å‡ºè·¯å¾„ã€‚ä½ å¿…é¡»ä½¿ç”¨ç»å¯¹è·¯å¾„æ¥å¼•ç”¨è¿™äº›æ–‡ä»¶ï¼Œå–å†³äºåœ¨ config.js é‡Œé¢åŠ å…¥çš„ build.assetsPublicPath å’Œ build.assetsSubDirectoryã€‚

æ³¨æ„ä¸Šé¢çš„ä¾‹å­ï¼Œåœ¨æœ€ç»ˆçš„æ„å»ºæ—¶å°†ä¼šåŒ…å« ./bgs/ è·¯å¾„ä¸‹çš„æ‰€æœ‰å›¾ç‰‡ è¿™æ˜¯å› ä¸º Webpack ä¸èƒ½çŒœå‡ºæ¥åœ¨è¿è¡Œæ—¶ä¼šç”¨åˆ°å…¶ä¸­çš„å“ªä¸ªï¼Œæ‰€ä»¥ä¼šåŒ…å«æ‰€æœ‰çš„ã€‚

	// config/index.js
	module.exports = {
	  // ...
	  build: {
	    assetsPublicPath: '/',
	    assetsSubDirectory: 'static'
	  }
	}

æ‰€æœ‰æ”¾åœ¨ static ç›®å½•ä¸‹çš„æ–‡ä»¶éƒ½åº”è¯¥æ˜¯ä½¿ç”¨ç»å¯¹ /static/[filename] å¼•ç”¨çš„ã€‚å¦‚æœä½ å°† assetSubDirectory çš„å€¼æ”¹æˆ assetsï¼Œ é‚£ä¹ˆè¿™äº› URL å°±ä¼šè¢«å˜æˆ /assets/[filename]


# ğŸš© Hello Webpack Plugin
[Webpack Internal Plugin Relation](https://alienzhou.github.io/webpack-internal-plugin-relation/)
[WebPack æ’ä»¶å¼€å‘å®ä¾‹](https://github.com/jantimon/html-webpack-plugin)
[Webpack API](https://webpack.js.org/api/)
[Webpack Modules](https://webpack.js.org/concepts/modules/)
[File System](https://nodejs.org/docs/latest-v9.x/api/fs.html)
[child_process](http://nodejs.cn/api/child_process.html)
[ä»Webpackæºç æ¢ç©¶æ‰“åŒ…æµç¨‹](https://juejin.im/post/5c0206626fb9a049bc4c6540)


Webpack æ’ä»¶å¼€å‘å¯ä»¥å‚è€ƒå®˜æ–¹æä¾›çš„ `html-webpack-plugin`ã€ `clean-webpack-plugin` æˆ– `webpack-manifest-plugin` è¿™äº›æ’ä»¶ä½œä¸ºå‚è€ƒï¼Œæ¨èä½¿ç”¨ ES6 è¯­æ³•å†™æ’ä»¶ï¼ŒWebpack 2.0 å°±å¼€å§‹æ”¯æŒ ES6ã€‚

å…¶æ¬¡è¦äº†è§£ Webpack å†…éƒ¨æ’ä»¶ä¸é’©å­å…³ç³»ï¼Œå‚è€ƒ[Webpack Internal Plugin Relation]ï¼Œäº†è§£ `Compolation`ã€`Compiler`ã€`Parser`ã€`MainTemplate` åŸºæœ¬å¯¹è±¡ç»“æ„ã€‚

Webpack åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸åŒçš„é˜¶æ®µæ‰§è¡Œæ’ä»¶æ–¹æ³•ï¼Œå¼€å§‹æ—¶æ‰§è¡Œ `apply(compiler)` æ–¹æ³•ä¼šå°†å½“å‰çš„ç¼–è¯‘å™¨å®ä¾‹ä¼ å…¥ï¼Œç¼–è¯‘å™¨åŒ…å«äº†ä¸€ç»„é’©å­å‡½æ•° `compiler.hooks` ä¾›æ’ä»¶ä½¿ç”¨ã€‚`compiler.options` åŒ…å«äº† Webpack çš„é…ç½®æ–‡ä»¶å†…å®¹ï¼Œè¿™äº›é…ç½®æ‹¼åˆäº†é»˜è®¤çš„é€‰é¡¹ã€‚

å®åˆ—åŒ– Webpack æ—¶ï¼Œæ²¡æœ‰è®¾ç½®å›è°ƒå‡½æ•°ï¼ŒWebpack å°±ä¼šè¿”å›ä¸€ä¸ª Compiler å®ä¾‹ï¼š

	const webpack = require('webpack');

	const compiler = webpack({
	  // Configuration Object
	});

	compiler.run((err, stats) => { // Stats Object
	  // ...
	});

	const watching = compiler.watch({
	  // Example watchOptions
	  aggregateTimeout: 300,
	  poll: undefined
	}, (err, stats) => { // Stats Object
	  // Print watch/build result here...
	  console.log(stats);
	});

åŸºäº Node.js, Compiler å®ä¾‹æä¾›äº†åŸºæœ¬çš„æ–‡ä»¶ç³»ç»Ÿ inputFileSystemï¼ŒoutputFileSystemï¼Œå¯ä»¥è¿™æ ·æ¥å®šåˆ¶ï¼š

	const MemoryFS = require('memory-fs');
	const webpack = require('webpack');

	const fs = new MemoryFS();
	const compiler = webpack({ / options / });

	compiler.outputFileSystem = fs;
	compiler.run((err, stats) => {
	  // Read the output later:
	  const content = fs.readFileSync('...');
	});

åœ¨ä½¿ç”¨ `webpack-dev-server` å¼€å‘æ—¶ï¼Œå°±æ˜¯ä½¿ç”¨ `CachedInputFileSystem` å’Œ `MemoryFileSystem`ã€‚Webpack å†…éƒ¨è¿˜å®ç°äº†å‡ ä¸ªæ–‡ä»¶ç³»ç»Ÿ `NodeWatchFileSystem`ã€ `NodeOutputFileSystem`ã€ `NodeJsInputFileSystem` ç”¨äºä¸åŒçš„åœºæ™¯ã€‚å¯¹ç£ç›˜æ–‡ä»¶çš„è¯»å†™è¿˜æ˜¯é€šè¿‡ Node.js æä¾›çš„ [File System] æ–‡ä»¶ç³»ç»Ÿæ¨¡å—å®ç°çš„ã€‚


å®Œæˆåè¦æ‰§è¡Œçš„åŠ¨ä½œé€šè¿‡ `compiler.hooks.done` é’©å­æ¥æ³¨å†Œï¼ŒWebpack ä¼šå°† Compilation å®ä¾‹ä¼ å…¥ã€‚`compilation.hooks` ä¹Ÿæä¾›äº†ä¸€äº›é’©å­å‡½æ•°ã€‚æ³¨å†Œé’©å­çš„æ–¹æ³•å‚è€ƒä»¥ä¸‹ä»£ç ï¼Œä¸åŒé’©å­å›è°ƒå‡½æ•°çš„å‚æ•°ä¼šæœ‰æ‰€å·®åˆ«ï¼š

	compiler.hooks.someHook.tap('MyPlugin', (params) => {

	});

	compilation.hooks.buildModule.tap('MyPlugin',
	  module => {
	    module.useSourceMap = true;
	  }
	);

Webpack çš„ Module æ˜¯æ¨¡å—åŒ–ç¼–ç¨‹çš„åŸºæœ¬å•å…ƒç»“æ„ï¼Œæ”¯æŒçš„æ¨¡å—ç±»å‹æœ‰ CoffeeScriptã€ TypeScriptã€ ESNext (Babel)ã€ Sassã€ Lessã€ Stylus ç­‰ç­‰ï¼ŒWebpack ç³»ç»Ÿçš„ Loader ä¹Ÿæ˜¯æ¨¡å—çš„ä¸€ç§ã€‚åœ¨ `buildModule` é’©å­ä¸­å¯ä»¥è¯»å– `module.type`ã€`module.constructor` ç¡®å®šæ¨¡å—ç±»å‹ã€‚

`compiler.hooks.done` é’©å­åœ¨ç¼–è¯‘å®Œæˆæ—¶æ‰§è¡Œï¼Œå›è°ƒå‚æ•°æ˜¯ä¸€ä¸ªç»Ÿè®¡ä¿¡æ¯å¯¹è±¡ï¼Œcompilation ä¸­æœ‰åŒ…å«äº† compiler å’Œç¼–è¯‘æ¨¡å— modules ä¿¡æ¯ï¼š

	{
		compilation: ...
		hash: '00354804c2f21f00c528',
		startTime: 1563516897225,
		endTime: 1563516905223
	}

å…³é”®é’©å­ä½œç”¨		é’©å­ç±»å‹				å›è°ƒå‚æ•°		è§£æ			
`beforeRun`		AsyncSeriesHook		Compiler	è¿è¡Œå‰çš„å‡†å¤‡æ´»åŠ¨ï¼Œä¸»è¦å¯ç”¨äº†æ–‡ä»¶è¯»å–çš„åŠŸèƒ½ã€‚
`run`			AsyncSeriesHook		Compiler	è·‘èµ·æ¥äº†ï¼Œåœ¨ç¼–è¯‘ä¹‹å‰æœ‰ç¼“å­˜ï¼Œåˆ™å¯ç”¨ç¼“å­˜ï¼Œè¿™æ ·å¯ä»¥æé«˜æ•ˆç‡ã€‚
`beforeCompile`	AsyncSeriesHook		params		å¼€å§‹ç¼–è¯‘å‰çš„å‡†å¤‡ï¼Œåˆ›å»ºçš„ModuleFactoryï¼Œåˆ›å»ºCompilationï¼Œå¹¶ç»‘å®šModuleFactoryåˆ°Compilationä¸Šã€‚
`compile`		SyncHook			params		ç¼–è¯‘äº†
`make`			AsyncParallelHook	compilation	ä»Compilationçš„addEntryå‡½æ•°ï¼Œå¼€å§‹æ„å»ºæ¨¡å—
`afterCompile`	AsyncSeriesHook		compilation	ç¼–è¯‘ç»“æŸäº†
`shouldEmit`	SyncBailHook		compilation	è·å–compilationå‘æ¥çš„ç”µæŠ¥ï¼Œç¡®å®šç¼–è¯‘æ—¶å€™æˆåŠŸï¼Œæ˜¯å¦å¯ä»¥å¼€å§‹è¾“å‡ºäº†ã€‚
`emit`			AsyncSeriesHook		compilation	è¾“å‡ºæ–‡ä»¶äº†
`afterEmit`		AsyncSeriesHook		compilation	è¾“å‡ºå®Œæ¯•
`done`			AsyncSeriesHook		Stats		æ— è®ºæˆåŠŸä¸å¦ï¼Œä¸€åˆ‡å·²å°˜åŸƒè½å®šã€‚

ç°åœ¨å°±æ¥å†™ä¸€ä¸ªæ’ä»¶ï¼Œç”¨æ¥å°†é¡¹ç›®æ ¹ç›®å½•ä¸‹çš„ `index.html` æ¨¡æ¿æ‹·è´åˆ°å‘å¸ƒç›®å½•ä¸‹ã€‚åˆ©ç”¨ Shell æ¥æ‹·è´ public ç›®å½•çš„èµ„æºã€‚åœ¨ Node.js ä¸­ä½¿ç”¨ child_process æ‰§è¡Œ shell æœ‰ä¸‰ç§æ–¹æ³•ï¼Œspawnï¼Œexecå’ŒexecFileã€‚å‡å®š Windows ç³»ç»Ÿï¼Œå€Ÿç”¨äº† xcopy å‘½ä»¤æ¥å¤åˆ¶ç›®å½•ç»“æ„ã€‚åŒæ—¶ä½¿ç”¨äº† `iconv-lite` åšé»˜è®¤çš„ Windows ç³»ç»Ÿ GB2312 ç¼–ç çš„é»˜è®¤çš„ Node.js ç¼–ç  UTF-8 çš„è½¬æ¢ã€‚ `iconv-lite` æ˜¯ iconv çš„çº¯jså®ç°ï¼Œæ”¯æŒçš„ç¼–ç åŒ…æ‹¬ Node.js åŸç”Ÿç¼–ç ï¼šutf8, ucs2, ascii, binary, base64ï¼›åŒæ—¶æ”¯æŒå¹¿æ³›ä½¿ç”¨çš„å•å­—èŠ‚ç¼–ç ï¼šWindows 125x family, ISO-8859 family, IBM/DOS codepages, Macintosh family, KOI8 family, latin1, us-asciiï¼›å¤šå­—èŠ‚ç¼–ç ï¼šgbk, gb2312, Big5, cp950ã€‚å®˜æ–¹å®£ç§°æ¯”node-iconvæ›´å¿«ã€‚

	const fs = require('fs');
	const exec = require('child_process').execSync;
	var iconv = require('iconv-lite');

	let isProfile = false;

	class AssetsCopier{
	  constructor(options){
	    this.options = options || {};
	    // console.log('Plugin options', this.options);
	  }

	  apply(compiler){
	    let path = compiler.options.output.path;
	    isProfile = !!compiler.options.profile;
	    let buf = exec(`xcopy ${process.cwd()}\\public ${path}\\public /Y /S /I`, err => {
	      if(err) console.log(err);
	    });
	    let str = iconv.decode(buf, "gb2312");
	    !isProfile && console.log("âœ“ apply", str);
	    // fs.copyFile(src, dest[, flags], callback)  
	    fs.readFile(process.cwd()+'/index.html', 'utf8', function (err, data) {
	      if (err) return console.log("HTML Template not found "+err.path);
	      fs.writeFile(path+'/index.html', data, err => {
	        !isProfile && console.log( err? "Fail to copy index.html":"Copy index.html to "+path)
	      });
	    });

	    if (compiler.hooks) {
	      compiler.hooks.done.tap('AssetsCopier', this.onDone);
	      // compiler.hooks.compilation.tap('AssetsCopier', this.onCompilation);
	      compiler.hooks.afterResolvers.tap('AssetsCopier', this.onAfterResolve);
	    // } else { for old webpack
	    //   compiler.plugin('done', this.onDone);
	    //   compiler.plugin('compilation', this.onCompilation);
	    //   compiler.plugin('normal-module-factory', (nmf) => {
	    //     nmf.plugin('after-resolve', this.onAfterResolve);
	    //   });
	    }
	  }

	  onAfterResolve(compiler){
	    !isProfile && console.log("âœ“ onAfterResolve");
	  }
	  onCompilation(compilation, compilationParams){
	    !isProfile && console.log("âœ“ onCompilation");
	    compilation.hooks.buildModule.tap('AssetsCopier',
	      module => {
	        !isProfile && console.log(`\nâœ“ buildModule ${module.type}\n`, module.constructor.toString().split("{")[0]);
	      }
	    );
	  }
	  onDone(stats){
	    !isProfile && console.log("âœ“ onDone");
	  }
	}

	module.exports = AssetsCopier;

ç°åœ¨ï¼ŒæŠŠä»¥ä¸Šä»£ç ä¿å­˜åˆ° `assets-copier.js` å¹¶åœ¨ Webpack é…ç½®æ–‡ä»¶ä¸­å¼•å…¥æ’ä»¶ï¼Œç„¶åå°±å¯ä»¥æºæ‰“åŒ…ï¼ŒWebpack å°±ä¼šæ‰§è¡Œæ’ä»¶äº†ã€‚

	const AssetsCopier = require("./assets-copier");

	module.exports = {
		// ...
	    plugins: [
	        new AssetsCopier(),
	    ]
	}



	## lib/Compiler.js

	åˆ›å»ºçš„hook(é’©å­)

	### Compiler.hooks.additionalPass
	### Compiler.hooks.afterCompile
	### Compiler.hooks.afterEmit
	### Compiler.hooks.afterEnvironment
	### Compiler.hooks.afterPlugins
	### Compiler.hooks.afterResolvers
	### Compiler.hooks.beforeCompile
	### Compiler.hooks.beforeRun
	### Compiler.hooks.compilation
	### Compiler.hooks.compile
	### Compiler.hooks.contextModuleFactory
	### Compiler.hooks.done
	### Compiler.hooks.emit
	### Compiler.hooks.entryOption
	### Compiler.hooks.environment
	### Compiler.hooks.failed
	### Compiler.hooks.invalid
	### Compiler.hooks.make
	### Compiler.hooks.normalModuleFactory
	### Compiler.hooks.run
	### Compiler.hooks.shouldEmit
	### Compiler.hooks.thisCompilation
	### Compiler.hooks.watchClose
	### Compiler.hooks.watchRun

	æ— æ³¨å†Œçš„hook(é’©å­)

	è°ƒç”¨çš„hook(é’©å­)

	### Compiler.call.additionalPass - callAsync
	### Compiler.call.afterCompile - callAsync
	### Compiler.call.afterEmit - callAsync
	### Compiler.call.beforeCompile - callAsync
	### Compiler.call.beforeRun - callAsync
	### Compiler.call.childCompiler - call
	### Compiler.call.compilation - call
	### Compiler.call.compile - call
	### Compiler.call.contextModuleFactory - call
	### Compiler.call.done - callAsync
	### Compiler.call.emit - callAsync
	### Compiler.call.make - callAsync
	### Compiler.call.needAdditionalPass - call
	### Compiler.call.normalModuleFactory - call
	### Compiler.call.run - callAsync
	### Compiler.call.shouldEmit - call
	### Compiler.call.thisCompilation - call


	## lib/Compilation.js

	åˆ›å»ºçš„hook(é’©å­)

	### Compilatio.hooks.additionalAssets
	### Compilatio.hooks.additionalChunkAssets
	### Compilatio.hooks.advancedOptimizeModuleOrder
	### Compilatio.hooks.afterChunks
	### Compilatio.hooks.afterHash
	### Compilatio.hooks.afterOptimizeAssets
	### Compilatio.hooks.afterOptimizeChunkAssets
	### Compilatio.hooks.afterOptimizeChunkIds
	### Compilatio.hooks.afterOptimizeChunkModules
	### Compilatio.hooks.afterOptimizeChunks
	### Compilatio.hooks.afterOptimizeDependencies
	### Compilatio.hooks.afterOptimizeExtractedChunks
	### Compilatio.hooks.afterOptimizeModuleIds
	### Compilatio.hooks.afterOptimizeModules
	### Compilatio.hooks.afterOptimizeTree
	### Compilatio.hooks.afterSeal
	### Compilatio.hooks.assetPath
	### Compilatio.hooks.beforeChunkAssets
	### Compilatio.hooks.beforeChunkIds
	### Compilatio.hooks.beforeChunks
	### Compilatio.hooks.beforeHash
	### Compilatio.hooks.beforeModuleAssets
	### Compilatio.hooks.beforeModuleIds
	### Compilatio.hooks.buildModule
	### Compilatio.hooks.childCompiler
	### Compilatio.hooks.chunkAsset
	### Compilatio.hooks.chunkHash
	### Compilatio.hooks.contentHash
	### Compilatio.hooks.dependencyReference
	### Compilatio.hooks.failedModule
	### Compilatio.hooks.finishModules
	### Compilatio.hooks.finishRebuildingModule
	### Compilatio.hooks.moduleAsset
	### Compilatio.hooks.moduleIds
	### Compilatio.hooks.needAdditionalPass
	### Compilatio.hooks.needAdditionalSeal
	### Compilatio.hooks.normalModuleLoader
	### Compilatio.hooks.optimize
	### Compilatio.hooks.optimizeAssets
	### Compilatio.hooks.optimizeChunkAssets
	### Compilatio.hooks.optimizeChunkIds
	### Compilatio.hooks.optimizeChunkModules
	### Compilatio.hooks.optimizeChunkModulesAdvanced
	### Compilatio.hooks.optimizeChunkModulesBasic
	### Compilatio.hooks.optimizeChunkOrder
	### Compilatio.hooks.optimizeChunks
	### Compilatio.hooks.optimizeChunksAdvanced
	### Compilatio.hooks.optimizeChunksBasic
	### Compilatio.hooks.optimizeDependencies
	### Compilatio.hooks.optimizeDependenciesAdvanced
	### Compilatio.hooks.optimizeDependenciesBasic
	### Compilatio.hooks.optimizeExtractedChunks
	### Compilatio.hooks.optimizeExtractedChunksAdvanced
	### Compilatio.hooks.optimizeExtractedChunksBasic
	### Compilatio.hooks.optimizeModuleIds
	### Compilatio.hooks.optimizeModuleOrder
	### Compilatio.hooks.optimizeModules
	### Compilatio.hooks.optimizeModulesAdvanced
	### Compilatio.hooks.optimizeModulesBasic
	### Compilatio.hooks.optimizeTree
	### Compilatio.hooks.rebuildModule
	### Compilatio.hooks.record
	### Compilatio.hooks.recordChunks
	### Compilatio.hooks.recordHash
	### Compilatio.hooks.recordModules
	### Compilatio.hooks.reviveChunks
	### Compilatio.hooks.reviveModules
	### Compilatio.hooks.seal
	### Compilatio.hooks.shouldGenerateChunkAssets
	### Compilatio.hooks.shouldRecord
	### Compilatio.hooks.succeedModule
	### Compilatio.hooks.unseal


	è°ƒç”¨çš„hook(é’©å­)

	### Compilation.call.additionalAssets - callAsync
	### Compilation.call.additionalChunkAssets - call
	### Compilation.call.advancedOptimizeModuleOrder - call
	### Compilation.call.afterChunks - call
	### Compilation.call.afterHash - call
	### Compilation.call.afterOptimizeAssets - call
	### Compilation.call.afterOptimizeChunkAssets - call
	### Compilation.call.afterOptimizeChunkIds - call
	### Compilation.call.afterOptimizeChunkModules - call
	### Compilation.call.afterOptimizeChunks - call
	### Compilation.call.afterOptimizeDependencies - call
	### Compilation.call.afterOptimizeModuleIds - call
	### Compilation.call.afterOptimizeModules - call
	### Compilation.call.afterOptimizeTree - call
	### Compilation.call.afterSeal - callAsync
	### Compilation.call.beforeChunkAssets - call
	### Compilation.call.beforeChunkIds - call
	### Compilation.call.beforeChunks - call
	### Compilation.call.beforeHash - call
	### Compilation.call.beforeModuleAssets - call
	### Compilation.call.beforeModuleIds - call
	### Compilation.call.buildModule - call
	### Compilation.call.chunkAsset - call
	### Compilation.call.chunkHash - call
	### Compilation.call.contentHash - call
	### Compilation.call.dependencyReference - call
	### Compilation.call.failedModule - call
	### Compilation.call.finishModules - call
	### Compilation.call.finishRebuildingModule - call
	### Compilation.call.moduleAsset - call
	### Compilation.call.moduleIds - call
	### Compilation.call.needAdditionalSeal - call
	### Compilation.call.optimize - call
	### Compilation.call.optimizeAssets - callAsync
	### Compilation.call.optimizeChunkAssets - callAsync
	### Compilation.call.optimizeChunkIds - call
	### Compilation.call.optimizeChunkModules - call
	### Compilation.call.optimizeChunkModulesAdvanced - call
	### Compilation.call.optimizeChunkModulesBasic - call
	### Compilation.call.optimizeChunkOrder - call
	### Compilation.call.optimizeChunks - call
	### Compilation.call.optimizeChunksAdvanced - call
	### Compilation.call.optimizeChunksBasic - call
	### Compilation.call.optimizeDependencies - call
	### Compilation.call.optimizeDependenciesAdvanced - call
	### Compilation.call.optimizeDependenciesBasic - call
	### Compilation.call.optimizeModuleIds - call
	### Compilation.call.optimizeModuleOrder - call
	### Compilation.call.optimizeModules - call
	### Compilation.call.optimizeModulesAdvanced - call
	### Compilation.call.optimizeModulesBasic - call
	### Compilation.call.optimizeTree - callAsync
	### Compilation.call.rebuildModule - call
	### Compilation.call.record - call
	### Compilation.call.recordChunks - call
	### Compilation.call.recordHash - call
	### Compilation.call.recordModules - call
	### Compilation.call.reviveChunks - call
	### Compilation.call.reviveModules - call
	### Compilation.call.seal - call
	### Compilation.call.shouldGenerateChunkAssets - call
	### Compilation.call.shouldRecord - call
	### Compilation.call.succeedModule - call
	### Compilation.call.unseal - call


## CLI é€‰é¡¹å‚è€ƒ
https://github.com/docschina/webpack.js.org/blob/cn/src/content/api/cli.md

webpack-cli 3.0.8

	Usage: webpack-cli [options]
	       webpack-cli [options] --entry <entry> --output <output>
	       webpack-cli [options] <entries...> --output <output>
	       webpack-cli <command> [options]

	For more information, see https://webpack.js.org/api/cli/.

	Config options:
	  --config               Path to the config file
	                         [string] [default: webpack.config.js or webpackfile.js]
	  --config-register, -r  Preload one or more modules before loading the webpack
	                         configuration      [array] [default: module id or path]
	  --config-name          Name of the config to use                      [string]
	  --env                  Environment passed to the config, when it is a function
	  --mode                 Enable production optimizations or development hints.
	                                  [choices: "development", "production", "none"]

	Basic options:
	  --context    The base directory (absolute path!) for resolving the `entry`
	               option. If `output.pathinfo` is set, the included pathinfo is
	               shortened to this directory.
	                                       [string] [default: The current directory]
	  --entry      The entry point(s) of the compilation.                   [string]
	  --watch, -w  Enter watch mode, which rebuilds on file change.        [boolean]
	  --debug      Switch loaders to debug mode                            [boolean]
	  --devtool    A developer tool to enhance debugging.                   [string]
	  -d           shortcut for --debug --devtool eval-cheap-module-source-map
	               --output-pathinfo                                       [boolean]
	  -p           shortcut for --optimize-minimize --define
	               process.env.NODE_ENV="production"                       [boolean]
	  --progress   Print compilation progress in percentage                [boolean]

	Module options:
	  --module-bind       Bind an extension to a loader                     [string]
	  --module-bind-post  Bind an extension to a post loader                [string]
	  --module-bind-pre   Bind an extension to a pre loader                 [string]

	Output options:
	  --output, -o                  The output path and file for compilation assets
	  --output-path                 The output directory as **absolute path**
	                                (required).
	                                       [string] [default: The current directory]
	  --output-filename             Specifies the name of each output file on disk.
	                                You must **not** specify an absolute path here!
	                                The `output.path` option determines the location
	                                on disk the files are written to, filename is
	                                used solely for naming the individual files.
	                                                   [string] [default: [name].js]
	  --output-chunk-filename       The filename of non-entry chunks as relative
	                                path inside the `output.path` directory.
	       [string] [default: filename with [id] instead of [name] or [id] prefixed]
	  --output-source-map-filename  The filename of the SourceMaps for the
	                                JavaScript files. They are inside the
	                                `output.path` directory.                [string]
	  --output-public-path          The `publicPath` specifies the public URL
	                                address of the output files when referenced in a
	                                browser.                                [string]
	  --output-jsonp-function       The JSONP function used by webpack for async
	                                loading of chunks.                      [string]
	  --output-pathinfo             Include comments with information about the
	                                modules.                               [boolean]
	  --output-library              Expose the exports of the entry point as library
	                                                                        [string]
	  --output-library-target       Type of library
	         [string] [choices: "var", "assign", "this", "window", "self", "global",
	      "commonjs", "commonjs2", "commonjs-module", "amd", "umd", "umd2", "jsonp"]

	Advanced options:
	  --records-input-path       Store compiler state to a json file.       [string]
	  --records-output-path      Load compiler state from a json file.      [string]
	  --records-path             Store/Load compiler state from/to a json file. This
	                             will result in persistent ids of modules and
	                             chunks. An absolute path is expected. `recordsPath`
	                             is used for `recordsInputPath` and
	                             `recordsOutputPath` if they left undefined.[string]
	  --define                   Define any free var in the bundle          [string]
	  --target                   Environment to build for                   [string]
	  --cache                    Cache generated modules and chunks to improve
	                             performance for multiple incremental builds.
	                      [boolean] [default: It's enabled by default when watching]
	  --watch-stdin, --stdin     Stop watching when stdin stream has ended [boolean]
	  --watch-aggregate-timeout  Delay the rebuilt after the first change. Value is
	                             a time in ms.                              [number]
	  --watch-poll               Enable polling mode for watching           [string]
	  --hot                      Enables Hot Module Replacement            [boolean]
	  --prefetch                 Prefetch this request (Example: --prefetch
	                             ./file.js)                                 [string]
	  --provide                  Provide these modules as free vars in all modules
	                             (Example: --provide jQuery=jquery)         [string]
	  --labeled-modules          Enables labeled modules                   [boolean]
	  --plugin                   Load this plugin                           [string]
	  --bail                     Report the first error as a hard error instead of
	                             tolerating it.            [boolean] [default: null]
	  --profile                  Capture timing information for each module.
	                                                       [boolean] [default: null]

	Resolving options:
	  --resolve-alias         Redirect module requests                      [string]
	  --resolve-extensions    Redirect module requests                       [array]
	  --resolve-loader-alias  Setup a loader alias for resolving            [string]

	Optimizing options:
	  --optimize-max-chunks      Try to keep the chunk count below a limit
	  --optimize-min-chunk-size  Minimal size for the created chunk
	  --optimize-minimize        Enable minimizing the output. Uses
	                             optimization.minimizer.                   [boolean]

	Stats options:
	  --color, --colors               Enables/Disables colors on the console
	                                           [boolean] [default: (supports-color)]
	  --sort-modules-by               Sorts the modules list by property in module
	                                                                        [string]
	  --sort-chunks-by                Sorts the chunks list by property in chunk
	                                                                        [string]
	  --sort-assets-by                Sorts the assets list by property in asset
	                                                                        [string]
	  --hide-modules                  Hides info about modules             [boolean]
	  --display-exclude               Exclude modules in the output         [string]
	  --display-modules               Display even excluded modules in the output
	                                                                       [boolean]
	  --display-max-modules           Sets the maximum number of visible modules in
	                                  output                                [number]
	  --display-chunks                Display chunks in the output         [boolean]
	  --display-entrypoints           Display entry points in the output   [boolean]
	  --display-origins               Display origins of chunks in the output
	                                                                       [boolean]
	  --display-cached                Display also cached modules in the output
	                                                                       [boolean]
	  --display-cached-assets         Display also cached assets in the output
	                                                                       [boolean]
	  --display-reasons               Display reasons about module inclusion in the
	                                  output                               [boolean]
	  --display-depth                 Display distance from entry point for each
	                                  module                               [boolean]
	  --display-used-exports          Display information about used exports in
	                                  modules (Tree Shaking)               [boolean]
	  --display-provided-exports      Display information about exports provided
	                                  from modules                         [boolean]
	  --display-optimization-bailout  Display information about why optimization
	                                  bailed out for modules               [boolean]
	  --display-error-details         Display details about errors         [boolean]
	  --display                       Select display preset
	              [string] [choices: "", "verbose", "detailed", "normal", "minimal",
	                                                          "errors-only", "none"]
	  --verbose                       Show more details                    [boolean]
	  --info-verbosity                Controls the output of lifecycle messaging
	                                  e.g. Started watching files...
	                 [string] [choices: "none", "info", "verbose"] [default: "info"]
	  --build-delimiter               Display custom text after build output[string]

	Options:
	  --help, -h     Show help                                             [boolean]
	  --version, -v  Show version number                                   [boolean]
	  --silent       Prevent output from being displayed in stdout         [boolean]
	  --json, -j     Prints the result as JSON.                            [boolean]


# ğŸš© Output è¾“å‡ºé…ç½®
https://www.webpackjs.com/configuration/output/
https://webpack.js.org/configuration/output/

---
title: è¾“å‡º(output)
sort: 5
contributors:
  - sokra
  - skipjack
  - tomasAlabes
  - mattce
  - irth
  - fvgs
  - dhurlburtusa
  - MagicDuck
  - fadysamirsadek
  - byzyk
  - madhavarshney
  - harshwardhansingh
  - eemeli
  - EugeneHlushko
---

`output` ä½äºå¯¹è±¡æœ€é¡¶çº§é”®(key)ï¼ŒåŒ…æ‹¬äº†ä¸€ç»„é€‰é¡¹ï¼ŒæŒ‡ç¤º webpack å¦‚ä½•å»è¾“å‡ºã€ä»¥åŠåœ¨å“ªé‡Œè¾“å‡ºä½ çš„ã€Œbundleã€asset å’Œå…¶ä»–ä½ æ‰€æ‰“åŒ…æˆ–ä½¿ç”¨ webpack è½½å…¥çš„ä»»ä½•å†…å®¹ã€ã€‚


## `output.auxiliaryComment`

`string` `object`

åœ¨å’Œ [`output.library`](#output-library) å’Œ [`output.libraryTarget`](#output-librarytarget) ä¸€èµ·ä½¿ç”¨æ—¶ï¼Œæ­¤é€‰é¡¹å…è®¸ç”¨æˆ·å‘å¯¼å‡ºå®¹å™¨(export wrapper)ä¸­æ’å…¥æ³¨é‡Šã€‚è¦ä¸º `libraryTarget` æ¯ç§ç±»å‹éƒ½æ’å…¥ç›¸åŒçš„æ³¨é‡Šï¼Œå°† `auxiliaryComment` è®¾ç½®ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²ï¼š

__webpack.config.js__

```javascript
module.exports = {
  //...
  output: {
    library: 'someLibName',
    libraryTarget: 'umd',
    filename: 'someLibName.js',
    auxiliaryComment: 'Test Comment'
  }
};
```

å°†ä¼šç”Ÿæˆå¦‚ä¸‹ï¼š

__webpack.config.js__

```javascript
(function webpackUniversalModuleDefinition(root, factory) {
  // Test Comment
  if(typeof exports === 'object' && typeof module === 'object')
    module.exports = factory(require('lodash'));
  // Test Comment
  else if(typeof define === 'function' && define.amd)
    define(['lodash'], factory);
  // Test Comment
  else if(typeof exports === 'object')
    exports['someLibName'] = factory(require('lodash'));
  // Test Comment
  else
    root['someLibName'] = factory(root['_']);
})(this, function(__WEBPACK_EXTERNAL_MODULE_1__) {
  // ...
});
```

å¯¹äº `libraryTarget` æ¯ç§ç±»å‹çš„æ³¨é‡Šè¿›è¡Œæ›´ç»†ç²’åº¦åœ°æ§åˆ¶ï¼Œè¯·ä¼ å…¥ä¸€ä¸ªå¯¹è±¡ï¼š

__webpack.config.js__

```javascript
module.exports = {
  //...
  output: {
    //...
    auxiliaryComment: {
      root: 'Root Comment',
      commonjs: 'CommonJS Comment',
      commonjs2: 'CommonJS2 Comment',
      amd: 'AMD Comment'
    }
  }
};
```


## `output.chunkFilename`

`string`

æ­¤é€‰é¡¹å†³å®šäº†éå…¥å£(non-entry) chunk æ–‡ä»¶çš„åç§°ã€‚æœ‰å…³å¯å–çš„å€¼çš„è¯¦ç»†ä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹ [`output.filename`](#output-filename) é€‰é¡¹ã€‚

æ³¨æ„ï¼Œè¿™äº›æ–‡ä»¶åéœ€è¦åœ¨ runtime æ ¹æ® chunk å‘é€çš„è¯·æ±‚å»ç”Ÿæˆã€‚å› æ­¤ï¼Œéœ€è¦åœ¨ webpack runtime è¾“å‡º bundle å€¼æ—¶ï¼Œå°† chunk id çš„å€¼å¯¹åº”æ˜ å°„åˆ°å ä½ç¬¦(å¦‚ `[name]` å’Œ `[chunkhash]`)ã€‚è¿™ä¼šå¢åŠ æ–‡ä»¶å¤§å°ï¼Œå¹¶ä¸”åœ¨ä»»ä½• chunk çš„å ä½ç¬¦å€¼ä¿®æ”¹åï¼Œéƒ½ä¼šä½¿ bundle å¤±æ•ˆã€‚

é»˜è®¤ä½¿ç”¨ `[id].js` æˆ–ä» [`output.filename`](#output-filename) ä¸­æ¨æ–­å‡ºçš„å€¼ï¼ˆ`[name]` ä¼šè¢«é¢„å…ˆæ›¿æ¢ä¸º `[id]` æˆ– `[id].`ï¼‰ã€‚


## `output.chunkLoadTimeout`

`integer`

chunk è¯·æ±‚åˆ°æœŸä¹‹å‰çš„æ¯«ç§’æ•°ï¼Œé»˜è®¤ä¸º 120 000ã€‚ä» webpack 2.6.0 å¼€å§‹æ”¯æŒæ­¤é€‰é¡¹ã€‚


## `output.crossOriginLoading`

`boolean` `string`

åªç”¨äº [`target`](/configuration/target) æ˜¯ webï¼Œä½¿ç”¨äº†é€šè¿‡ script æ ‡ç­¾çš„ JSONP æ¥æŒ‰éœ€åŠ è½½ chunkã€‚

å¯ç”¨ [cross-origin å±æ€§](https://developer.mozilla.org/en/docs/Web/HTML/Element/script#attr-crossorigin) åŠ è½½ chunkã€‚ä»¥ä¸‹æ˜¯å¯æ¥æ”¶çš„å€¼â€¦â€¦

`crossOriginLoading: false` - ç¦ç”¨è·¨åŸŸåŠ è½½ï¼ˆé»˜è®¤ï¼‰

`crossOriginLoading: 'anonymous'` - __ä¸å¸¦å‡­æ®(credential)__ å¯ç”¨è·¨åŸŸåŠ è½½

`crossOriginLoading: 'use-credentials'` - __å¸¦å‡­æ®(credential)__ å¯ç”¨è·¨åŸŸåŠ è½½ **with credentials**


## `output.jsonpScriptType`

`string`

å…è®¸è‡ªå®šä¹‰ `script` çš„ç±»å‹ï¼Œwebpack ä¼šå°† `script` æ ‡ç­¾æ³¨å…¥åˆ° DOM ä¸­ä»¥ä¸‹è½½å¼‚æ­¥ chunkã€‚å¯ä»¥ä½¿ç”¨ä»¥ä¸‹é€‰é¡¹ï¼š

- `'text/javascript'`ï¼ˆé»˜è®¤ï¼‰
- `'module'`ï¼šä¸ ES6 å°±ç»ªä»£ç ä¸€èµ·ä½¿ç”¨ã€‚


## `output.devtoolFallbackModuleFilenameTemplate`

`string | function(info)`

å½“ä¸Šé¢çš„æ¨¡æ¿å­—ç¬¦ä¸²æˆ–å‡½æ•°äº§ç”Ÿé‡å¤æ—¶ä½¿ç”¨çš„å¤‡ç”¨å†…å®¹ã€‚

æŸ¥çœ‹ [`output.devtoolModuleFilenameTemplate`](#output-devtoolmodulefilenametemplate)ã€‚


## `output.devtoolLineToLine`

`boolean | object`

> é¿å…ä½¿ç”¨æ­¤é€‰é¡¹ï¼Œå› ä¸ºå®ƒä»¬å·²åºŸå¼ƒï¼Œå¹¶å°†å¾ˆå¿«åˆ é™¤ã€‚

å¯¹æ‰€æœ‰æˆ–æŸäº›æ¨¡å—å¯ç”¨ã€Œè¡Œåˆ°è¡Œæ˜ å°„(line to line mapping)ã€ã€‚è¿™å°†ç”ŸæˆåŸºæœ¬çš„æºæ˜ å°„(source map)ï¼Œå³ç”Ÿæˆèµ„æº(generated source)çš„æ¯ä¸€è¡Œï¼Œæ˜ å°„åˆ°åŸå§‹èµ„æº(original source)çš„åŒä¸€è¡Œã€‚è¿™æ˜¯ä¸€ä¸ªæ€§èƒ½ä¼˜åŒ–ç‚¹ï¼Œå¹¶ä¸”åº”è¯¥åªéœ€è¦è¾“å…¥è¡Œ(input line)å’Œç”Ÿæˆè¡Œ(generated line)ç›¸åŒ¹é…æ—¶æ‰ä½¿ç”¨ã€‚

ä¼ å…¥ boolean å€¼ï¼Œå¯¹æ‰€æœ‰æ¨¡å—å¯ç”¨æˆ–ç¦ç”¨æ­¤åŠŸèƒ½ï¼ˆé»˜è®¤ `false`ï¼‰ã€‚å¯¹è±¡å¯æœ‰ `test`, `include`, `exclude` ä¸‰ç§å±æ€§ã€‚ä¾‹å¦‚ï¼Œå¯¹æŸä¸ªç‰¹å®šç›®å½•ä¸­æ‰€æœ‰ javascript æ–‡ä»¶å¯ç”¨æ­¤åŠŸèƒ½ï¼š

__webpack.config.js__

```javascript
module.exports = {
  //...
  output: {
    devtoolLineToLine: { test: /\.js$/, include: 'src/utilities' }
  }
};
```


## `output.devtoolModuleFilenameTemplate`

`string | function(info)`

æ­¤é€‰é¡¹ä»…åœ¨ ã€Œ[`devtool`](/configuration/devtool) ä½¿ç”¨äº†éœ€è¦æ¨¡å—åç§°çš„é€‰é¡¹ã€æ—¶ä½¿ç”¨ã€‚

è‡ªå®šä¹‰æ¯ä¸ª source map çš„ `sources` æ•°ç»„ä¸­ä½¿ç”¨çš„åç§°ã€‚å¯ä»¥é€šè¿‡ä¼ é€’æ¨¡æ¿å­—ç¬¦ä¸²(template string)æˆ–è€…å‡½æ•°æ¥å®Œæˆã€‚ä¾‹å¦‚ï¼Œå½“ä½¿ç”¨ `devtool: 'eval'`ï¼Œé»˜è®¤å€¼æ˜¯ï¼š

__webpack.config.js__

```javascript
module.exports = {
  //...
  output: {
    devtoolModuleFilenameTemplate: 'webpack://[namespace]/[resource-path]?[loaders]'
  }
};
```

æ¨¡æ¿å­—ç¬¦ä¸²(template string)ä¸­åšä»¥ä¸‹æ›¿æ¢ï¼ˆé€šè¿‡ webpack å†…éƒ¨çš„ [`ModuleFilenameHelpers`](https://github.com/webpack/webpack/blob/master/lib/ModuleFilenameHelpers.js)ï¼‰ï¼š

| æ¨¡æ¿                 | æè¿° |
| ------------------------ | ----------- |
| [absolute-resource-path] | ç»å¯¹è·¯å¾„æ–‡ä»¶å |
| [all-loaders]            | è‡ªåŠ¨å’Œæ˜¾å¼çš„ loaderï¼Œå¹¶ä¸”å‚æ•°å–å†³äºç¬¬ä¸€ä¸ª loader åç§° |
| [hash]                   | æ¨¡å—æ ‡è¯†ç¬¦çš„ hash |
| [id]                     | æ¨¡å—æ ‡è¯†ç¬¦ |
| [loaders]                | æ˜¾å¼çš„ loaderï¼Œå¹¶ä¸”å‚æ•°å–å†³äºç¬¬ä¸€ä¸ª loader åç§° |
| [resource]               | ç”¨äºè§£ææ–‡ä»¶çš„è·¯å¾„å’Œç”¨äºç¬¬ä¸€ä¸ª loader çš„ä»»æ„æŸ¥è¯¢å‚æ•° |
| [resource-path]          | ä¸å¸¦ä»»ä½•æŸ¥è¯¢å‚æ•°ï¼Œç”¨äºè§£ææ–‡ä»¶çš„è·¯å¾„ |
| [namespace]              | æ¨¡å—å‘½åç©ºé—´ã€‚åœ¨æ„å»ºæˆä¸ºä¸€ä¸ª library ä¹‹åï¼Œé€šå¸¸ä¹Ÿæ˜¯ library åç§°ï¼Œå¦åˆ™ä¸ºç©º |

å½“ä½¿ç”¨ä¸€ä¸ªå‡½æ•°ï¼ŒåŒæ ·çš„é€‰é¡¹è¦é€šè¿‡ `info` å‚æ•°å¹¶ä½¿ç”¨é©¼å³°å¼(camel-cased)ï¼š

```javascript
module.exports = {
  //...
  output: {
    devtoolModuleFilenameTemplate: info => {
      return `webpack:///${info.resourcePath}?${info.loaders}`;
    }
  }
};
```

å¦‚æœå¤šä¸ªæ¨¡å—äº§ç”Ÿç›¸åŒçš„åç§°ï¼Œä½¿ç”¨ [`output.devtoolFallbackModuleFilenameTemplate`](#output-devtoolfallbackmodulefilenametemplate) æ¥ä»£æ›¿è¿™äº›æ¨¡å—ã€‚


## `output.devtoolNamespace`

`string`

æ­¤é€‰é¡¹ç¡®å®š [`output.devtoolModuleFilenameTemplate`](#output-devtoolmodulefilenametemplate) ä½¿ç”¨çš„æ¨¡å—åç§°ç©ºé—´ã€‚æœªæŒ‡å®šæ—¶çš„é»˜è®¤å€¼ä¸ºï¼š[`output.library`](#output-library)ã€‚åœ¨åŠ è½½å¤šä¸ªé€šè¿‡ webpack æ„å»ºçš„ library æ—¶ï¼Œç”¨äºé˜²æ­¢ source map ä¸­æºæ–‡ä»¶è·¯å¾„å†²çªã€‚

ä¾‹å¦‚ï¼Œå¦‚æœä½ æœ‰ä¸¤ä¸ª libraryï¼Œåˆ†åˆ«ä½¿ç”¨å‘½åç©ºé—´ `library1` å’Œ `library2`ï¼Œå¹¶ä¸”éƒ½æœ‰ä¸€ä¸ªæ–‡ä»¶ `./src/index.js`ï¼ˆå¯èƒ½å…·æœ‰ä¸åŒå†…å®¹ï¼‰ï¼Œå®ƒä»¬ä¼šå°†è¿™äº›æ–‡ä»¶æš´éœ²ä¸º `webpack://library1/./src/index.js` å’Œ `webpack://library2/./src/index.js`ã€‚


## `output.filename`

`string` `function`

æ­¤é€‰é¡¹å†³å®šäº†æ¯ä¸ªè¾“å‡º bundle çš„åç§°ã€‚è¿™äº› bundle å°†å†™å…¥åˆ° [`output.path`](#output-path) é€‰é¡¹æŒ‡å®šçš„ç›®å½•ä¸‹ã€‚

å¯¹äºå•ä¸ª[`å…¥å£`](/configuration/entry-context#entry)èµ·ç‚¹ï¼Œfilename ä¼šæ˜¯ä¸€ä¸ªé™æ€åç§°ã€‚

__webpack.config.js__

```javascript
module.exports = {
  //...
  output: {
    filename: 'bundle.js'
  }
};
```

ç„¶è€Œï¼Œå½“é€šè¿‡å¤šä¸ªå…¥å£èµ·ç‚¹(entry point)ã€ä»£ç æ‹†åˆ†(code splitting)æˆ–å„ç§æ’ä»¶(plugin)åˆ›å»ºå¤šä¸ª bundleï¼Œåº”è¯¥ä½¿ç”¨ä»¥ä¸‹ä¸€ç§æ›¿æ¢æ–¹å¼ï¼Œæ¥èµ‹äºˆæ¯ä¸ª bundle ä¸€ä¸ªå”¯ä¸€çš„åç§°â€¦â€¦

ä½¿ç”¨å…¥å£åç§°ï¼š

__webpack.config.js__

```javascript
module.exports = {
  //...
  output: {
    filename: '[name].bundle.js'
  }
};
```

ä½¿ç”¨å†…éƒ¨ chunk id

__webpack.config.js__

```javascript
module.exports = {
  //...
  output: {
    filename: '[id].bundle.js'
  }
};
```

ä½¿ç”¨æ¯æ¬¡æ„å»ºè¿‡ç¨‹ä¸­ï¼Œå”¯ä¸€çš„ hash ç”Ÿæˆ

__webpack.config.js__

```javascript
module.exports = {
  //...
  output: {
    filename: '[name].[hash].bundle.js'
  }
};
```

ä½¿ç”¨åŸºäºæ¯ä¸ª chunk å†…å®¹çš„ hashï¼š

__webpack.config.js__

```javascript
module.exports = {
  //...
  output: {
    filename: '[chunkhash].bundle.js'
  }
};
```

Using hashes generated for extracted content:

__webpack.config.js__

```javascript
module.exports = {
  //...
  output: {
    filename: '[contenthash].bundle.css'
  }
};
```

Using function to return the filename:

__webpack.config.js__

```javascript
module.exports = {
  //...
  output: {
    filename: (chunkData) => {
      return chunkData.chunk.name === 'main' ? '[name].js': '[name]/[name].js';
    },
  }
};
```

è¯·ç¡®ä¿å·²é˜…è¯»è¿‡ [æŒ‡å— - ç¼“å­˜](/guides/caching) çš„è¯¦ç»†ä¿¡æ¯ã€‚è¿™é‡Œæ¶‰åŠæ›´å¤šæ­¥éª¤ï¼Œä¸ä»…ä»…æ˜¯è®¾ç½®æ­¤é€‰é¡¹ã€‚

æ³¨æ„æ­¤é€‰é¡¹è¢«ç§°ä¸ºæ–‡ä»¶åï¼Œä½†æ˜¯ä½ è¿˜æ˜¯å¯ä»¥ä½¿ç”¨åƒ `'js/[name]/bundle.js'` è¿™æ ·çš„æ–‡ä»¶å¤¹ç»“æ„ã€‚

æ³¨æ„ï¼Œæ­¤é€‰é¡¹ä¸ä¼šå½±å“é‚£äº›ã€ŒæŒ‰éœ€åŠ è½½ chunkã€çš„è¾“å‡ºæ–‡ä»¶ã€‚å¯¹äºè¿™äº›æ–‡ä»¶ï¼Œè¯·ä½¿ç”¨ [`output.chunkFilename`](#output-chunkfilename) é€‰é¡¹æ¥æ§åˆ¶è¾“å‡ºã€‚é€šè¿‡ loader åˆ›å»ºçš„æ–‡ä»¶ä¹Ÿä¸å—å½±å“ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œä½ å¿…é¡»å°è¯• loader ç‰¹å®šçš„å¯ç”¨é€‰é¡¹ã€‚

å¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ›¿æ¢æ¨¡æ¿å­—ç¬¦ä¸²ï¼ˆé€šè¿‡ webpack å†…éƒ¨çš„[`TemplatedPathPlugin`][`TemplatedPathPlugin`](https://github.com/webpack/webpack/blob/master/lib/TemplatedPathPlugin.js)ï¼‰ï¼š

| æ¨¡æ¿ | æè¿° |
| ----------- | ----------------------------------------------------------------------------------- |
| [hash]      | æ¨¡å—æ ‡è¯†ç¬¦(module identifier)çš„ hash |
| [chunkhash] | chunk å†…å®¹çš„ hash |
| [name]      | æ¨¡å—åç§° |
| [id]        | æ¨¡å—æ ‡è¯†ç¬¦(module identifier) |
| [query]     | æ¨¡å—çš„ queryï¼Œä¾‹å¦‚ï¼Œæ–‡ä»¶å `?` åé¢çš„å­—ç¬¦ä¸² |
| [function]  | The function, which can return filename [string] |

`[hash]` å’Œ `[chunkhash]` çš„é•¿åº¦å¯ä»¥ä½¿ç”¨ `[hash:16]`ï¼ˆé»˜è®¤ä¸º20ï¼‰æ¥æŒ‡å®šã€‚æˆ–è€…ï¼Œé€šè¿‡æŒ‡å®š[`output.hashDigestLength`](#output-hashdigestlength) åœ¨å…¨å±€é…ç½®é•¿åº¦ã€‚

å¦‚æœå°†è¿™ä¸ªé€‰é¡¹è®¾ä¸ºä¸€ä¸ªå‡½æ•°ï¼Œå‡½æ•°å°†è¿”å›ä¸€ä¸ªåŒ…å«ä¸Šé¢è¡¨æ ¼ä¸­æ›¿æ¢ä¿¡æ¯çš„å¯¹è±¡ã€‚

T> åœ¨ä½¿ç”¨ [`ExtractTextWebpackPlugin`](/plugins/extract-text-webpack-plugin) æ—¶ï¼Œå¯ä»¥ç”¨ `[contenthash]` æ¥è·å–æå–æ–‡ä»¶çš„ hashï¼ˆæ—¢ä¸æ˜¯ `[hash]` ä¹Ÿä¸æ˜¯ `[chunkhash]`ï¼‰ã€‚


## `output.hashDigest`

åœ¨ç”Ÿæˆ hash æ—¶ä½¿ç”¨çš„ç¼–ç æ–¹å¼ï¼Œé»˜è®¤ä¸º `'hex'`ã€‚æ”¯æŒ Node.js [`hash.digest`](https://nodejs.org/api/crypto.html#crypto_hash_digest_encoding) çš„æ‰€æœ‰ç¼–ç ã€‚å¯¹æ–‡ä»¶åä½¿ç”¨ `'base64'`ï¼Œå¯èƒ½ä¼šå‡ºç°é—®é¢˜ï¼Œå› ä¸º base64 å­—æ¯è¡¨ä¸­å…·æœ‰ `/` è¿™ä¸ªå­—ç¬¦(character)ã€‚åŒæ ·çš„ï¼Œ`'latin1'` è§„å®šå¯ä»¥å«æœ‰ä»»ä½•å­—ç¬¦(character)ã€‚


## `output.hashDigestLength`

æ•£åˆ—æ‘˜è¦çš„å‰ç¼€é•¿åº¦ï¼Œé»˜è®¤ä¸º `20`ã€‚


## `output.hashFunction`

`string|function`

æ•£åˆ—ç®—æ³•ï¼Œé»˜è®¤ä¸º `'md4'`ã€‚æ”¯æŒ Node.JS [`crypto.createHash`](https://nodejs.org/api/crypto.html#crypto_crypto_createhash_algorithm_options) çš„æ‰€æœ‰åŠŸèƒ½ã€‚ä» `4.0.0-alpha2` å¼€å§‹ï¼Œ`hashFunction` ç°åœ¨å¯ä»¥æ˜¯ä¸€ä¸ªè¿”å›è‡ªå®šä¹‰ hash çš„æ„é€ å‡½æ•°ã€‚å‡ºäºæ€§èƒ½åŸå› ï¼Œä½ å¯ä»¥æä¾›ä¸€ä¸ªä¸åŠ å¯†çš„å“ˆå¸Œå‡½æ•°(non-crypto hash function)ã€‚

```javascript
module.exports = {
  //...
  output: {
    hashFunction: require('metrohash').MetroHash64
  }
};
```

ç¡®ä¿ hash å‡½æ•°æœ‰å¯è®¿é—®çš„ `update` and `digest` æ–¹æ³•ã€‚

## `output.hashSalt`

ä¸€ä¸ªå¯é€‰çš„åŠ ç›å€¼ï¼Œé€šè¿‡ Node.JS [`hash.update`](https://nodejs.org/api/crypto.html#crypto_hash_update_data_inputencoding) æ¥æ›´æ–°å“ˆå¸Œã€‚


## `output.hotUpdateChunkFilename`

`string` `function`

è‡ªå®šä¹‰çƒ­æ›´æ–° chunk çš„æ–‡ä»¶åã€‚å¯é€‰çš„å€¼çš„è¯¦ç»†ä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹ [`output.filename`](#output-filename) é€‰é¡¹ã€‚

å ä½ç¬¦åªèƒ½æ˜¯ `[id]` å’Œ `[hash]`ï¼Œé»˜è®¤å€¼æ˜¯ï¼š

__webpack.config.js__

```javascript
module.exports = {
  //...
  output: {
    hotUpdateChunkFilename: '[id].[hash].hot-update.js'
  }
};
```

è¿™é‡Œæ²¡æœ‰å¿…è¦ä¿®æ”¹å®ƒã€‚


## `output.hotUpdateFunction`

`function`

åªåœ¨ [`target`](/configuration/target) æ˜¯ web æ—¶ä½¿ç”¨ï¼Œç”¨äºåŠ è½½çƒ­æ›´æ–°(hot update)çš„ JSONP å‡½æ•°ã€‚

JSONP å‡½æ•°ç”¨äºå¼‚æ­¥åŠ è½½(async load)çƒ­æ›´æ–°(hot-update) chunkã€‚

è¯¦ç»†è¯·æŸ¥çœ‹ [`output.jsonpFunction`](#output-jsonpfunction)ã€‚


## `output.hotUpdateMainFilename`

`string` `function`

è‡ªå®šä¹‰çƒ­æ›´æ–°çš„ä¸»æ–‡ä»¶å(main filename)ã€‚å¯é€‰çš„å€¼çš„è¯¦ç»†ä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹ [`output.filename`](#output-filename) é€‰é¡¹

å ä½ç¬¦åªèƒ½æ˜¯ `[hash]`ï¼Œé»˜è®¤å€¼æ˜¯ï¼š

__webpack.config.js__

```javascript
module.exports = {
  //...
  output: {
    hotUpdateMainFilename: '[hash].hot-update.json'
  }
};
```

è¿™é‡Œæ²¡æœ‰å¿…è¦ä¿®æ”¹å®ƒã€‚


## `output.jsonpFunction`

`string`

åªåœ¨ [`target`](/configuration/target) æ˜¯ web æ—¶ä½¿ç”¨ï¼Œç”¨äºæŒ‰éœ€åŠ è½½(load on-demand) chunk çš„ JSONP å‡½æ•°ã€‚

JSONP å‡½æ•°ç”¨äºå¼‚æ­¥åŠ è½½(async load) chunkï¼Œæˆ–è€…æ‹¼æ¥å¤šä¸ªåˆå§‹ chunk(SplitChunksPlugin, AggressiveSplittingPlugin)ã€‚

å¦‚æœåœ¨åŒä¸€ç½‘é¡µä¸­ä½¿ç”¨äº†å¤šä¸ªï¼ˆæ¥è‡ªä¸åŒç¼–è¯‘è¿‡ç¨‹(compilation)çš„ï¼‰webpack runtimeï¼Œåˆ™éœ€è¦ä¿®æ”¹æ­¤é€‰é¡¹ã€‚

å¦‚æœä½¿ç”¨äº† [`output.library`](#output-library) é€‰é¡¹ï¼Œlibrary åç§°æ—¶è‡ªåŠ¨è¿½åŠ çš„ã€‚


## `output.library`

`string` æˆ– `object`ï¼ˆä» webpack 3.1.0 å¼€å§‹ï¼›ç”¨äº `libraryTarget: 'umd'`ï¼‰

`output.library` çš„å€¼çš„ä½œç”¨ï¼Œå–å†³äº[`output.libraryTarget`](#output-librarytarget) é€‰é¡¹çš„å€¼ï¼›å®Œæ•´çš„è¯¦ç»†ä¿¡æ¯è¯·æŸ¥é˜…è¯¥ç« èŠ‚ã€‚æ³¨æ„ï¼Œ`output.libraryTarget` çš„é»˜è®¤é€‰é¡¹æ˜¯ `var`ï¼Œæ‰€ä»¥å¦‚æœä½¿ç”¨ä»¥ä¸‹é…ç½®é€‰é¡¹ï¼š

__webpack.config.js__

```javascript
module.exports = {
  //...
  output: {
    library: 'MyLibrary'
  }
};
```

å¦‚æœç”Ÿæˆçš„è¾“å‡ºæ–‡ä»¶ï¼Œæ˜¯åœ¨ HTML é¡µé¢ä¸­ä½œä¸ºä¸€ä¸ª script æ ‡ç­¾å¼•å…¥ï¼Œåˆ™å˜é‡ `MyLibrary` å°†ä¸å…¥å£æ–‡ä»¶çš„è¿”å›å€¼ç»‘å®šã€‚

W> æ³¨æ„ï¼Œå¦‚æœå°†`æ•°ç»„`ä½œä¸º `entry`ï¼Œé‚£ä¹ˆåªä¼šæš´éœ²æ•°ç»„ä¸­çš„æœ€åä¸€ä¸ªæ¨¡å—ã€‚å¦‚æœå°†`å¯¹è±¡`ä½œä¸º `entry`ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ `array` è¯­æ³•æš´éœ²ï¼ˆå…·ä½“æŸ¥çœ‹[è¿™ä¸ªç¤ºä¾‹](https://github.com/webpack/webpack/tree/master/examples/multi-part-library) for details)ï¼‰ã€‚

T> æœ‰å…³ `output.library` ä»¥åŠ `output.libraryTarget` è¯¦ç»†ä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹[åˆ›å»º library æŒ‡å—](/guides/author-libraries)ã€‚


## `output.libraryExport`

`string | string[]`

Configure which module or modules will be exposed via the `libraryTarget`. It is `undefined` by default, same behaviour will be applied if you set `libraryTarget` to an empty string e.g. `''` it will export the whole (namespace) object. The examples below demonstrate the effect of this config when using `libraryTarget: 'var'`.

The following configurations are supported:

`libraryExport: 'default'` - The __default export of your entry point__ will be assigned to the library target:

```javascript
// if your entry has a default export of `MyDefaultModule`
var MyDefaultModule = _entry_return_.default;
```

`libraryExport: 'MyModule'` - The __specified module__ will be assigned to the library target:

```javascript
var MyModule = _entry_return_.MyModule;
```

`libraryExport: ['MyModule', 'MySubModule']` - The array is interpreted as a __path to a module__ to be assigned to the library target:

```javascript
var MySubModule = _entry_return_.MyModule.MySubModule;
```

With the `libraryExport` configurations specified above, the resulting libraries could be utilized as such:

```javascript
MyDefaultModule.doSomething();
MyModule.doSomething();
MySubModule.doSomething();
```


## `output.libraryTarget`

`string: 'var'`

é…ç½®å¦‚ä½•æš´éœ² libraryã€‚å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„é€‰é¡¹ä¸­çš„ä»»æ„ä¸€ä¸ªã€‚æ³¨æ„ï¼Œæ­¤é€‰é¡¹ä¸åˆ†é…ç»™ [`output.library`](#output-library) çš„å€¼ä¸€åŒä½¿ç”¨ã€‚å¯¹äºä¸‹é¢çš„æ‰€æœ‰ç¤ºä¾‹ï¼Œéƒ½å‡å®šå°† `output.library` çš„å€¼é…ç½®ä¸º `MyLibrary`ã€‚

T> æ³¨æ„ï¼Œä¸‹é¢çš„ç¤ºä¾‹ä»£ç ä¸­çš„ `_entry_return_` æ˜¯å…¥å£èµ·ç‚¹è¿”å›çš„å€¼ã€‚åœ¨ bundle æœ¬èº«ä¸­ï¼Œå®ƒæ˜¯ä»å…¥å£èµ·ç‚¹ã€ç”± webpack ç”Ÿæˆçš„å‡½æ•°çš„è¾“å‡ºç»“æœã€‚

### æš´éœ²ä¸ºä¸€ä¸ªå˜é‡

è¿™äº›é€‰é¡¹å°†å…¥å£èµ·ç‚¹çš„è¿”å›å€¼ï¼ˆä¾‹å¦‚ï¼Œå…¥å£èµ·ç‚¹çš„ä»»ä½•å¯¼å‡ºå€¼ï¼‰ï¼Œåœ¨ bundle åŒ…æ‰€å¼•å…¥çš„ä½ç½®ï¼Œèµ‹å€¼ç»™ output.library æä¾›çš„å˜é‡åã€‚

`libraryTarget: 'var'` - ï¼ˆé»˜è®¤å€¼ï¼‰å½“ library åŠ è½½å®Œæˆï¼Œ__å…¥å£èµ·ç‚¹çš„è¿”å›å€¼__ å°†åˆ†é…ç»™ä¸€ä¸ªå˜é‡ï¼š

```javascript
var MyLibrary = _entry_return_;

// åœ¨ä¸€ä¸ªå•ç‹¬çš„ scriptâ€¦â€¦
MyLibrary.doSomething();
```

W> å½“ä½¿ç”¨æ­¤é€‰é¡¹æ—¶ï¼Œå°† `output.library` è®¾ç½®ä¸ºç©ºï¼Œä¼šå› ä¸ºæ²¡æœ‰å˜é‡å¯¼è‡´æ— æ³•èµ‹å€¼ã€‚


`libraryTarget: 'assign'` - è¿™å°†äº§ç”Ÿä¸€ä¸ªéšå«çš„å…¨å±€å˜é‡ï¼Œå¯èƒ½ä¼šæ½œåœ¨åœ°é‡æ–°åˆ†é…åˆ°å…¨å±€ä¸­å·²å­˜åœ¨çš„å€¼ï¼ˆè°¨æ…ä½¿ç”¨ï¼‰ã€‚.

```javascript
MyLibrary = _entry_return_;
```

æ³¨æ„ï¼Œå¦‚æœ `MyLibrary` åœ¨ä½œç”¨åŸŸä¸­æœªåœ¨å‰é¢ä»£ç è¿›è¡Œå®šä¹‰ï¼Œåˆ™ä½ çš„ library å°†è¢«è®¾ç½®åœ¨å…¨å±€ä½œç”¨åŸŸå†…ã€‚

W> å½“ä½¿ç”¨æ­¤é€‰é¡¹æ—¶ï¼Œå°† `output.library` è®¾ç½®ä¸ºç©ºï¼Œå°†äº§ç”Ÿä¸€ä¸ªç ´æŸçš„è¾“å‡º bundleã€‚


### é€šè¿‡åœ¨å¯¹è±¡ä¸Šèµ‹å€¼æš´éœ²

è¿™äº›é€‰é¡¹å°†å…¥å£èµ·ç‚¹çš„è¿”å›å€¼ï¼ˆä¾‹å¦‚ï¼Œå…¥å£èµ·ç‚¹çš„ä»»ä½•å¯¼å‡ºå€¼ï¼‰èµ‹å€¼ç»™ä¸€ä¸ªç‰¹å®šå¯¹è±¡çš„å±æ€§ï¼ˆæ­¤åç§°ç”± `output.library` å®šä¹‰ï¼‰ä¸‹ã€‚

å¦‚æœ `output.library` æœªèµ‹å€¼ä¸ºä¸€ä¸ªéç©ºå­—ç¬¦ä¸²ï¼Œåˆ™é»˜è®¤è¡Œä¸ºæ˜¯ï¼Œå°†å…¥å£èµ·ç‚¹è¿”å›çš„æ‰€æœ‰å±æ€§éƒ½èµ‹å€¼ç»™ä¸€ä¸ªå¯¹è±¡ï¼ˆæ­¤å¯¹è±¡ç”± `output.libraryTarget` ç‰¹å®šï¼‰ï¼Œé€šè¿‡å¦‚ä¸‹ä»£ç ç‰‡æ®µï¼š

```javascript
(function(e, a) { for(var i in a) { e[i] = a[i]; } }(output.libraryTarget, _entry_return_));
```

W> æ³¨æ„ï¼Œä¸è®¾ç½® `output.library` å°†å¯¼è‡´ç”±å…¥å£èµ·ç‚¹è¿”å›çš„æ‰€æœ‰å±æ€§ï¼Œéƒ½ä¼šè¢«èµ‹å€¼ç»™ç»™å®šçš„å¯¹è±¡ï¼›è¿™é‡Œå¹¶ä¸ä¼šæ£€æŸ¥ç°æœ‰çš„å±æ€§åæ˜¯å¦å­˜åœ¨ã€‚

`libraryTarget: "this"` - __å…¥å£èµ·ç‚¹çš„è¿”å›å€¼__ å°†åˆ†é…ç»™ this çš„ä¸€ä¸ªå±æ€§ï¼ˆæ­¤åç§°ç”± `output.library` å®šä¹‰ï¼‰ä¸‹ï¼Œ`this` çš„å«ä¹‰å–å†³äºä½ ï¼š

```javascript
this['MyLibrary'] = _entry_return_;

// åœ¨ä¸€ä¸ªå•ç‹¬çš„ scriptâ€¦â€¦
this.MyLibrary.doSomething();
MyLibrary.doSomething(); // å¦‚æœ this æ˜¯ window
```

`libraryTarget: 'window'` - __å…¥å£èµ·ç‚¹çš„è¿”å›å€¼__ å°†ä½¿ç”¨ `output.library` ä¸­å®šä¹‰çš„å€¼ï¼Œåˆ†é…ç»™ `window` å¯¹è±¡çš„è¿™ä¸ªå±æ€§ä¸‹ã€‚

```javascript
window['MyLibrary'] = _entry_return_;

window.MyLibrary.doSomething();
```


`libraryTarget: 'global'` - __å…¥å£èµ·ç‚¹çš„è¿”å›å€¼__ å°†ä½¿ç”¨ `output.library` ä¸­å®šä¹‰çš„å€¼ï¼Œåˆ†é…ç»™ `global` å¯¹è±¡çš„è¿™ä¸ªå±æ€§ä¸‹ã€‚

```javascript
global['MyLibrary'] = _entry_return_;

global.MyLibrary.doSomething();
```


`libraryTarget: 'commonjs'` - __å…¥å£èµ·ç‚¹çš„è¿”å›å€¼__ å°†ä½¿ç”¨ `output.library` ä¸­å®šä¹‰çš„å€¼ï¼Œåˆ†é…ç»™ exports å¯¹è±¡ã€‚è¿™ä¸ªåç§°ä¹Ÿæ„å‘³ç€ï¼Œæ¨¡å—ç”¨äº CommonJS ç¯å¢ƒï¼š

```javascript
exports['MyLibrary'] = _entry_return_;

require('MyLibrary').doSomething();
```

### æ¨¡å—å®šä¹‰ç³»ç»Ÿ

è¿™äº›é€‰é¡¹å°†å¯¼è‡´ bundle å¸¦æœ‰æ›´å®Œæ•´çš„æ¨¡å—å¤´éƒ¨ï¼Œä»¥ç¡®ä¿ä¸å„ç§æ¨¡å—ç³»ç»Ÿçš„å…¼å®¹æ€§ã€‚æ ¹æ® `output.libraryTarget` é€‰é¡¹ä¸åŒï¼Œ`output.library` é€‰é¡¹å°†å…·æœ‰ä¸åŒçš„å«ä¹‰ã€‚


`libraryTarget: 'commonjs2'` - __å…¥å£èµ·ç‚¹çš„è¿”å›å€¼__ å°†åˆ†é…ç»™ `module.exports` å¯¹è±¡ã€‚è¿™ä¸ªåç§°ä¹Ÿæ„å‘³ç€æ¨¡å—ç”¨äº CommonJS ç¯å¢ƒï¼š

```javascript
module.exports = _entry_return_;

require('MyLibrary').doSomething();
```

æ³¨æ„ï¼Œ`output.library` ä¼šè¢«çœç•¥ï¼Œå› æ­¤å¯¹äºæ­¤ç‰¹å®šçš„ `output.libraryTarget`ï¼Œæ— éœ€å†è®¾ç½® `output.library` ã€‚

T> æƒ³è¦å¼„æ¸…æ¥š CommonJS å’Œ CommonJS2 ä¹‹é—´çš„åŒºåˆ«ï¼Ÿè™½ç„¶å®ƒä»¬å¾ˆç›¸ä¼¼ï¼Œä½†äºŒè€…ä¹‹é—´å­˜åœ¨ä¸€äº›å¾®å¦™çš„å·®å¼‚ï¼Œè¿™é€šå¸¸ä¸ webpack ä¸Šä¸‹æ–‡æ²¡æœ‰å…³è”ã€‚ï¼ˆæ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·[é˜…è¯»æ­¤ issue](https://github.com/webpack/webpack/issues/1114)ã€‚ï¼‰


`libraryTarget: 'amd'` - å°†ä½ çš„ library æš´éœ²ä¸º AMD æ¨¡å—ã€‚

AMD æ¨¡å—è¦æ±‚å…¥å£ chunkï¼ˆä¾‹å¦‚ä½¿ç”¨ `<script>` æ ‡ç­¾åŠ è½½çš„ç¬¬ä¸€ä¸ªè„šæœ¬ï¼‰é€šè¿‡ç‰¹å®šçš„å±æ€§å®šä¹‰ï¼Œä¾‹å¦‚ `define` å’Œ `require`ï¼Œå®ƒä»¬é€šå¸¸ç”± RequireJS æˆ–ä»»ä½•å…¼å®¹çš„æ¨¡å—åŠ è½½å™¨æä¾›ï¼ˆä¾‹å¦‚ almondï¼‰ã€‚å¦åˆ™ï¼Œç›´æ¥åŠ è½½ç”Ÿæˆçš„ AMD bundle å°†å¯¼è‡´æŠ¥é”™ï¼Œå¦‚ `define is not defined`ã€‚

æ‰€ä»¥ï¼Œä½¿ç”¨ä»¥ä¸‹é…ç½®â€¦â€¦

```javascript
module.exports = {
  //...
  output: {
    library: 'MyLibrary',
    libraryTarget: 'amd'
  }
};
```

ç”Ÿæˆçš„ output å°†ä¼šä½¿ç”¨ "MyLibrary" ä½œä¸ºæ¨¡å—åå®šä¹‰ï¼Œå³

```javascript
define('MyLibrary', [], function() {
  return _entry_return_;
});
```

å¯ä»¥åœ¨ script æ ‡ç­¾ä¸­ï¼Œå°† bundle ä½œä¸ºä¸€ä¸ªæ¨¡å—æ•´ä½“å¼•å…¥ï¼Œå¹¶ä¸”å¯ä»¥åƒè¿™æ ·è°ƒç”¨ bundleï¼š

```javascript
require(['MyLibrary'], function(MyLibrary) {
  // ä½¿ç”¨ library åšä¸€äº›äº‹â€¦â€¦
});
```

å¦‚æœ `output.library` æœªå®šä¹‰ï¼Œå°†ä¼šç”Ÿæˆä»¥ä¸‹å†…å®¹ã€‚

```javascript
define([], function() {
  return _entry_return_; // æ­¤æ¨¡å—è¿”å›å€¼ï¼Œæ˜¯å…¥å£ chunk è¿”å›çš„å€¼
});
```

å¦‚æœç›´æ¥åŠ è½½ `<script>` æ ‡ç­¾ï¼Œæ­¤ bundle æ— æ³•æŒ‰é¢„æœŸè¿è¡Œï¼Œæˆ–è€…æ ¹æœ¬æ— æ³•æ­£å¸¸è¿è¡Œï¼ˆåœ¨ almond loader ä¸­ï¼‰ã€‚åªèƒ½é€šè¿‡æ–‡ä»¶çš„å®é™…è·¯å¾„ï¼Œåœ¨ RequireJS å…¼å®¹çš„å¼‚æ­¥æ¨¡å—åŠ è½½å™¨ä¸­è¿è¡Œï¼Œå› æ­¤åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå¦‚æœè¿™äº›è®¾ç½®ç›´æ¥æš´éœ²åœ¨æœåŠ¡å™¨ä¸Šï¼Œé‚£ä¹ˆ `output.path` å’Œ `output.filename` å¯¹äºè¿™ä¸ªç‰¹å®šçš„è®¾ç½®å¯èƒ½å˜å¾—å¾ˆé‡è¦ã€‚


`libraryTarget: 'amd-require'` - This packages your output with an immediately-executed AMD `require(dependencies, factory)` wrapper.

The `'amd-require'` target allows for the use of AMD dependencies without needing a separate later invocation. As with the `'amd'` target, this depends on the appropriate [`require` function](https://github.com/amdjs/amdjs-api/blob/master/require.md) being available in the environment in which the webpack output is loaded.

With this target, the library name is ignored.


`libraryTarget: 'umd'` - å°†ä½ çš„ library æš´éœ²ä¸ºæ‰€æœ‰çš„æ¨¡å—å®šä¹‰ä¸‹éƒ½å¯è¿è¡Œçš„æ–¹å¼ã€‚å®ƒå°†åœ¨ CommonJS, AMD ç¯å¢ƒä¸‹è¿è¡Œï¼Œæˆ–å°†æ¨¡å—å¯¼å‡ºåˆ° global ä¸‹çš„å˜é‡ã€‚äº†è§£æ›´å¤šè¯·æŸ¥çœ‹ [UMD ä»“åº“](https://github.com/umdjs/umd)ã€‚

åœ¨è¿™ä¸ªä¾‹å­ä¸­ï¼Œä½ éœ€è¦ `library` å±æ€§æ¥å‘½åä½ çš„æ¨¡å—ï¼š

```javascript
module.exports = {
  //...
  output: {
    library: 'MyLibrary',
    libraryTarget: 'umd'
  }
};
```

æœ€ç»ˆè¾“å‡ºå¦‚ä¸‹ï¼š

```javascript
(function webpackUniversalModuleDefinition(root, factory) {
  if(typeof exports === 'object' && typeof module === 'object')
    module.exports = factory();
  else if(typeof define === 'function' && define.amd)
    define([], factory);
  else if(typeof exports === 'object')
    exports['MyLibrary'] = factory();
  else
    root['MyLibrary'] = factory();
})(typeof self !== 'undefined' ? self : this, function() {
  return _entry_return_; // æ­¤æ¨¡å—è¿”å›å€¼ï¼Œæ˜¯å…¥å£ chunk è¿”å›çš„å€¼
});
```

æ³¨æ„ï¼Œçœç•¥ `library` ä¼šå¯¼è‡´å°†å…¥å£èµ·ç‚¹è¿”å›çš„æ‰€æœ‰å±æ€§ï¼Œç›´æ¥èµ‹å€¼ç»™ root å¯¹è±¡ï¼Œå°±åƒ[å¯¹è±¡åˆ†é…ç« èŠ‚](#expose-via-object-assignment)ã€‚ä¾‹å¦‚ï¼š

```javascript
module.exports = {
  //...
  output: {
    libraryTarget: 'umd'
  }
};
```

è¾“å‡ºç»“æœå¦‚ä¸‹ï¼š

```javascript
(function webpackUniversalModuleDefinition(root, factory) {
  if(typeof exports === 'object' && typeof module === 'object')
    module.exports = factory();
  else if(typeof define === 'function' && define.amd)
    define([], factory);
  else {
    var a = factory();
    for(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];
  }
})(typeof self !== 'undefined' ? self : this, function() {
  return _entry_return_; // æ­¤æ¨¡å—è¿”å›å€¼ï¼Œæ˜¯å…¥å£ chunk è¿”å›çš„å€¼
});
```

ä» webpack 3.1.0 å¼€å§‹ï¼Œä½ å¯ä»¥å°† `library` æŒ‡å®šä¸ºä¸€ä¸ªå¯¹è±¡ï¼Œç”¨äºç»™æ¯ä¸ª target èµ·ä¸åŒçš„åç§°ï¼š

```javascript
module.exports = {
  //...
  output: {
    library: {
      root: 'MyLibrary',
      amd: 'my-library',
      commonjs: 'my-common-library'
    },
    libraryTarget: 'umd'
  }
};
```

æ¨¡å—éªŒè¯ libraryã€‚


### å…¶ä»– Targets

`libraryTarget: 'jsonp'` - è¿™å°†æŠŠå…¥å£èµ·ç‚¹çš„è¿”å›å€¼ï¼ŒåŒ…è£¹åˆ°ä¸€ä¸ª jsonp åŒ…è£…å®¹å™¨ä¸­

``` javascript
MyLibrary(_entry_return_);
```

ä½ çš„ library çš„ä¾èµ–å°†ç”± [`externals`](/configuration/externals/) é…ç½®å®šä¹‰ã€‚


## `output.path`

`string`

output ç›®å½•å¯¹åº”ä¸€ä¸ª__ç»å¯¹è·¯å¾„__ã€‚

__webpack.config.js__

```javascript
module.exports = {
  //...
  output: {
    path: path.resolve(__dirname, 'dist/assets')
  }
};
```

æ³¨æ„ï¼Œ`[hash]` åœ¨å‚æ•°ä¸­è¢«æ›¿æ¢ä¸ºç¼–è¯‘è¿‡ç¨‹(compilation)çš„ hashã€‚è¯¦ç»†ä¿¡æ¯è¯·æŸ¥çœ‹[æŒ‡å— - ç¼“å­˜](/guides/caching)ã€‚


## `output.pathinfo`

`boolean`

å‘ŠçŸ¥ webpack åœ¨ bundle ä¸­å¼•å…¥ã€Œæ‰€åŒ…å«æ¨¡å—ä¿¡æ¯ã€çš„ç›¸å…³æ³¨é‡Šã€‚æ­¤é€‰é¡¹åœ¨ `development` [æ¨¡å¼](/concepts/mode/)æ—¶çš„é»˜è®¤å€¼æ˜¯ `true`ï¼Œè€Œåœ¨ `production` [æ¨¡å¼](/concepts/mode/)æ—¶çš„é»˜è®¤å€¼æ˜¯ `false`ã€‚

W> å¯¹äºåœ¨å¼€å‘ç¯å¢ƒ(development)ä¸‹é˜…è¯»ç”Ÿæˆä»£ç æ—¶ï¼Œè™½ç„¶é€šè¿‡è¿™äº›æ³¨é‡Šå¯ä»¥æä¾›éå¸¸æœ‰ç”¨çš„æ•°æ®ä¿¡æ¯ï¼Œä½†åœ¨ç”Ÿäº§ç¯å¢ƒ(production)ä¸‹ï¼Œ__ä¸åº”è¯¥__ ä½¿ç”¨ã€‚

__webpack.config.js__

```javascript
module.exports = {
  //...
  output: {
    pathinfo: true
  }
};
```

æ³¨æ„ï¼Œè¿™äº›æ³¨é‡Šä¹Ÿä¼šè¢«æ·»åŠ è‡³ç»è¿‡ tree shaking åç”Ÿæˆçš„ bundle ä¸­ã€‚


## `output.publicPath`

`string: ''` `function`

å¯¹äºæŒ‰éœ€åŠ è½½(on-demand-load)æˆ–åŠ è½½å¤–éƒ¨èµ„æº(external resources)ï¼ˆå¦‚å›¾ç‰‡ã€æ–‡ä»¶ç­‰ï¼‰æ¥è¯´ï¼Œoutput.publicPath æ˜¯å¾ˆé‡è¦çš„é€‰é¡¹ã€‚å¦‚æœæŒ‡å®šäº†ä¸€ä¸ªé”™è¯¯çš„å€¼ï¼Œåˆ™åœ¨åŠ è½½è¿™äº›èµ„æºæ—¶ä¼šæ”¶åˆ° 404 é”™è¯¯ã€‚

æ­¤é€‰é¡¹æŒ‡å®šåœ¨æµè§ˆå™¨ä¸­æ‰€å¼•ç”¨çš„ã€Œæ­¤è¾“å‡ºç›®å½•å¯¹åº”çš„__å…¬å¼€ URL__ã€ã€‚ç›¸å¯¹ URL(relative URL) ä¼šè¢«ç›¸å¯¹äº HTML é¡µé¢ï¼ˆæˆ– `<base>` æ ‡ç­¾ï¼‰è§£æã€‚ç›¸å¯¹äºæœåŠ¡çš„ URL(Server-relative URL)ï¼Œç›¸å¯¹äºåè®®çš„ URL(protocol-relative URL) æˆ–ç»å¯¹ URL(absolute URL) ä¹Ÿå¯æ˜¯å¯èƒ½ç”¨åˆ°çš„ï¼Œæˆ–è€…æœ‰æ—¶å¿…é¡»ç”¨åˆ°ï¼Œä¾‹å¦‚ï¼šå½“å°†èµ„æºæ‰˜ç®¡åˆ° CDN æ—¶ã€‚

è¯¥é€‰é¡¹çš„å€¼æ˜¯ä»¥ runtime(è¿è¡Œæ—¶) æˆ– loader(è½½å…¥æ—¶) æ‰€åˆ›å»ºçš„æ¯ä¸ª URL ä¸ºå‰ç¼€ã€‚å› æ­¤ï¼Œåœ¨å¤šæ•°æƒ…å†µä¸‹ï¼Œ__æ­¤é€‰é¡¹çš„å€¼éƒ½ä¼šä»¥ `/` ç»“æŸ__ã€‚

ç®€å•è§„åˆ™å¦‚ä¸‹ï¼š[`output.path`](#output-path) ä¸­çš„ URL ä»¥ HTML é¡µé¢ä¸ºåŸºå‡†ã€‚

__webpack.config.js__

```javascript
module.exports = {
  //...
  output: {
    path: path.resolve(__dirname, 'public/assets'),
    publicPath: 'https://cdn.example.com/assets/'
  }
};
```

å¯¹äºè¿™ä¸ªé…ç½®ï¼š

__webpack.config.js__

```javascript
module.exports = {
  //...
  output: {
    publicPath: '/assets/',
    chunkFilename: '[id].chunk.js'
  }
};
```

å¯¹äºä¸€ä¸ª chunk è¯·æ±‚ï¼Œçœ‹èµ·æ¥åƒè¿™æ · `/assets/4.chunk.js`ã€‚

å¯¹äºä¸€ä¸ªè¾“å‡º HTML çš„ loader å¯èƒ½ä¼šåƒè¿™æ ·è¾“å‡ºï¼š

```html
<link href="/assets/spinner.gif" />
```

æˆ–è€…åœ¨åŠ è½½ CSS çš„ä¸€ä¸ªå›¾ç‰‡æ—¶ï¼š

```css
background-image: url(/assets/spinner.gif);
```

webpack-dev-server ä¹Ÿä¼šé»˜è®¤ä» `publicPath` ä¸ºåŸºå‡†ï¼Œä½¿ç”¨å®ƒæ¥å†³å®šåœ¨å“ªä¸ªç›®å½•ä¸‹å¯ç”¨æœåŠ¡ï¼Œæ¥è®¿é—® webpack è¾“å‡ºçš„æ–‡ä»¶ã€‚

æ³¨æ„ï¼Œå‚æ•°ä¸­çš„ `[hash]` å°†ä¼šè¢«æ›¿æ¢ä¸ºç¼–è¯‘è¿‡ç¨‹(compilation) çš„ hashã€‚è¯¦ç»†ä¿¡æ¯è¯·æŸ¥çœ‹[æŒ‡å— - ç¼“å­˜](/guides/caching)ã€‚

ç¤ºä¾‹ï¼š

```javascript
module.exports = {
  //...
  output: {
    // One of the below
    publicPath: 'https://cdn.example.com/assets/', // CDNï¼ˆæ€»æ˜¯ HTTPS åè®®ï¼‰
    publicPath: '//cdn.example.com/assets/', // CDNï¼ˆåè®®ç›¸åŒï¼‰
    publicPath: '/assets/', // ç›¸å¯¹äºæœåŠ¡(server-relative)
    publicPath: 'assets/', // ç›¸å¯¹äº HTML é¡µé¢
    publicPath: '../assets/', // ç›¸å¯¹äº HTML é¡µé¢
    publicPath: '', // ç›¸å¯¹äº HTML é¡µé¢ï¼ˆç›®å½•ç›¸åŒï¼‰
  }
};
```

åœ¨ç¼–è¯‘æ—¶(compile time)æ— æ³•çŸ¥é“è¾“å‡ºæ–‡ä»¶çš„ `publicPath` çš„æƒ…å†µä¸‹ï¼Œå¯ä»¥ç•™ç©ºï¼Œç„¶ååœ¨å…¥å£æ–‡ä»¶(entry file)å¤„ä½¿ç”¨[è‡ªç”±å˜é‡(free variable)](https://stackoverflow.com/questions/12934929/what-are-free-variables) `__webpack_public_path__`ï¼Œä»¥ä¾¿åœ¨è¿è¡Œæ—¶(runtime)è¿›è¡ŒåŠ¨æ€è®¾ç½®ã€‚

```javascript
__webpack_public_path__ = myRuntimePublicPath;

// åº”ç”¨ç¨‹åºå…¥å£çš„å…¶ä»–éƒ¨åˆ†
```

æœ‰å…³ `__webpack_public_path__` çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹[æ­¤è®¨è®º](https://github.com/webpack/webpack/issues/2776#issuecomment-233208623)ã€‚


## `output.sourceMapFilename`

`string`

 æ­¤é€‰é¡¹ä¼šå‘ç¡¬ç›˜å†™å…¥ä¸€ä¸ªè¾“å‡ºæ–‡ä»¶ï¼Œåªåœ¨ [`devtool`](/configuration/devtool) å¯ç”¨äº† SourceMap é€‰é¡¹æ—¶æ‰ä½¿ç”¨ã€‚

é…ç½® source map çš„å‘½åæ–¹å¼ã€‚é»˜è®¤ä½¿ç”¨ `'[file].map'`ã€‚

å¯ä»¥ä½¿ç”¨ [#output-filename](#output-filename) ä¸­çš„ `[name]`, `[id]`, `[hash]` å’Œ `[chunkhash]` æ›¿æ¢ç¬¦å·ã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ›¿æ¢ç¬¦å·ã€‚`[file]` å ä½ç¬¦ä¼šè¢«æ›¿æ¢ä¸ºåŸå§‹æ–‡ä»¶çš„æ–‡ä»¶åã€‚æˆ‘ä»¬å»ºè®®__åªä½¿ç”¨ `[file]` å ä½ç¬¦__ï¼Œå› ä¸ºå…¶ä»–å ä½ç¬¦åœ¨é chunk æ–‡ä»¶(non-chunk files)ç”Ÿæˆçš„ SourceMap æ—¶ä¸èµ·ä½œç”¨ã€‚

| æ¨¡æ¿ | æè¿° |
| -------------------------- | ----------------------------------------------------------------------------------- |
| [file] | æ¨¡å—æ–‡ä»¶åç§° |
| [filebase] | æ¨¡å— [basename](https://nodejs.org/api/path.html#path_path_basename_path_ext) |


## `output.sourcePrefix`

`string`

ä¿®æ”¹è¾“å‡º bundle ä¸­æ¯è¡Œçš„å‰ç¼€ã€‚

__webpack.config.js__

```javascript
module.exports = {
  //...
  output: {
    sourcePrefix: '\t'
  }
};
```

æ³¨æ„ï¼Œé»˜è®¤æƒ…å†µä¸‹ä½¿ç”¨ç©ºå­—ç¬¦ä¸²ã€‚ä½¿ç”¨ä¸€äº›ç¼©è¿›ä¼šçœ‹èµ·æ¥æ›´ç¾è§‚ï¼Œä½†æ˜¯å¯èƒ½å¯¼è‡´å¤šè¡Œå­—ç¬¦ä¸²ä¸­çš„é—®é¢˜ã€‚

è¿™é‡Œæ²¡æœ‰å¿…è¦ä¿®æ”¹å®ƒã€‚


## `output.strictModuleExceptionHandling`

`boolean`

å¦‚æœä¸€ä¸ªæ¨¡å—æ˜¯åœ¨ `require` æ—¶æŠ›å‡ºå¼‚å¸¸ï¼Œå‘Šè¯‰ webpack ä»æ¨¡å—å®ä¾‹ç¼“å­˜(`require.cache`)ä¸­åˆ é™¤è¿™ä¸ªæ¨¡å—ã€‚

å‡ºäºæ€§èƒ½åŸå› ï¼Œé»˜è®¤ä¸º `false`ã€‚

å½“è®¾ç½®ä¸º `false` æ—¶ï¼Œè¯¥æ¨¡å—ä¸ä¼šä»ç¼“å­˜ä¸­åˆ é™¤ï¼Œè¿™å°†é€ æˆä»…åœ¨ç¬¬ä¸€æ¬¡ `require` è°ƒç”¨æ—¶æŠ›å‡ºå¼‚å¸¸ï¼ˆä¼šå¯¼è‡´ä¸ node.js ä¸å…¼å®¹ï¼‰ã€‚

ä¾‹å¦‚ï¼Œè®¾æƒ³ä¸€ä¸‹ `module.js`ï¼š

```javascript
throw new Error('error');
```

å°† `strictModuleExceptionHandling` è®¾ç½®ä¸º `false`ï¼Œåªæœ‰ç¬¬ä¸€ä¸ª `require` æŠ›å‡ºå¼‚å¸¸ï¼š

```javascript
// with strictModuleExceptionHandling = false
require('module'); // <- æŠ›å‡º
require('module'); // <- ä¸æŠ›å‡º
```

ç›¸åï¼Œå°† `strictModuleExceptionHandling` è®¾ç½®ä¸º `true`ï¼Œè¿™ä¸ªæ¨¡å—æ‰€æœ‰çš„ `require` éƒ½æŠ›å‡ºå¼‚å¸¸ï¼š

```javascript
// with strictModuleExceptionHandling = true
require('module'); // <- æŠ›å‡º
require('module'); // <- ä»ç„¶æŠ›å‡º
```


## `output.umdNamedDefine`

`boolean`

å½“ä½¿ç”¨äº† `libraryTarget: "umd"`ï¼Œè®¾ç½®ï¼š

```javascript
module.exports = {
  //...
  output: {
    umdNamedDefine: true
  }
};
```

ä¼šå¯¹ UMD çš„æ„å»ºè¿‡ç¨‹ä¸­çš„ AMD æ¨¡å—è¿›è¡Œå‘½åã€‚å¦åˆ™å°±ä½¿ç”¨åŒ¿åçš„ `define`ã€‚






# Module æ¨¡å—

---
title: æ¨¡å—(module)
sort: 6
contributors:
  - sokra
  - skipjack
  - jouni-kantola
  - jhnns
  - dylanonelson
  - byzyk
  - pnevares
  - fadysamirsadek
  - nerdkid93
  - EugeneHlushko
---

è¿™äº›é€‰é¡¹å†³å®šäº†å¦‚ä½•å¤„ç†é¡¹ç›®ä¸­çš„[ä¸åŒç±»å‹çš„æ¨¡å—](/concepts/modules)ã€‚


## `module.noParse`

`RegExp` `[RegExp]` `function(resource)` `string` `[string]`

é˜²æ­¢ webpack è§£æé‚£äº›ä»»ä½•ä¸ç»™å®šæ­£åˆ™è¡¨è¾¾å¼ç›¸åŒ¹é…çš„æ–‡ä»¶ã€‚å¿½ç•¥çš„æ–‡ä»¶ä¸­__ä¸åº”è¯¥å«æœ‰__ `import`, `require`, `define` çš„è°ƒç”¨ï¼Œæˆ–ä»»ä½•å…¶ä»–å¯¼å…¥æœºåˆ¶ã€‚å¿½ç•¥å¤§å‹çš„ library å¯ä»¥æé«˜æ„å»ºæ€§èƒ½ã€‚

__webpack.config.js__

```javascript
module.exports = {
  //...
  module: {
    noParse: /jquery|lodash/,
  }
};
```

```javascript
module.exports = {
  //...
  module: {
    noParse: (content) => /jquery|lodash/.test(content)
  }
};
```


## `module.rules`

`[Rule]`

åˆ›å»ºæ¨¡å—æ—¶ï¼ŒåŒ¹é…è¯·æ±‚çš„[è§„åˆ™](#rule)æ•°ç»„ã€‚è¿™äº›è§„åˆ™èƒ½å¤Ÿä¿®æ”¹æ¨¡å—çš„åˆ›å»ºæ–¹å¼ã€‚è¿™äº›è§„åˆ™èƒ½å¤Ÿå¯¹æ¨¡å—(module)åº”ç”¨ loaderï¼Œæˆ–è€…ä¿®æ”¹è§£æå™¨(parser)ã€‚


## Rule

`object`

æ¯ä¸ªè§„åˆ™å¯ä»¥åˆ†ä¸ºä¸‰éƒ¨åˆ† - æ¡ä»¶(condition)ï¼Œç»“æœ(result)å’ŒåµŒå¥—è§„åˆ™(nested rule)ã€‚


### Rule æ¡ä»¶

æ¡ä»¶æœ‰ä¸¤ç§è¾“å…¥å€¼ï¼š

1. resourceï¼šè¯·æ±‚æ–‡ä»¶çš„ç»å¯¹è·¯å¾„ã€‚å®ƒå·²ç»æ ¹æ® [`resolve` è§„åˆ™](/configuration/resolve)è§£æã€‚

2. issuer: è¢«è¯·æ±‚èµ„æº(requested the resource)çš„æ¨¡å—æ–‡ä»¶çš„ç»å¯¹è·¯å¾„ã€‚æ˜¯å¯¼å…¥æ—¶çš„ä½ç½®ã€‚

__ä¾‹å¦‚:__ ä» `app.js` `å¯¼å…¥ './style.css'`ï¼Œresource æ˜¯ `/path/to/style.css`. issuer æ˜¯ `/path/to/app.js`ã€‚

åœ¨è§„åˆ™ä¸­ï¼Œå±æ€§ [`test`](#rule-test), [`include`](#rule-include), [`exclude`](#rule-exclude) å’Œ [`resource`](#rule-resource) å¯¹ resource åŒ¹é…ï¼Œå¹¶ä¸”å±æ€§ [`issuer`](#rule-issuer) å¯¹ issuer åŒ¹é…ã€‚

å½“ä½¿ç”¨å¤šä¸ªæ¡ä»¶æ—¶ï¼Œæ‰€æœ‰æ¡ä»¶éƒ½åŒ¹é…ã€‚

W> å°å¿ƒï¼resource æ˜¯æ–‡ä»¶çš„_è§£æ_è·¯å¾„ï¼Œè¿™æ„å‘³ç€ç¬¦å·é“¾æ¥çš„èµ„æºæ˜¯çœŸæ­£çš„è·¯å¾„ï¼Œ_è€Œä¸æ˜¯_ç¬¦å·é“¾æ¥ä½ç½®ã€‚åœ¨ä½¿ç”¨å·¥å…·æ¥ç¬¦å·é“¾æ¥åŒ…çš„æ—¶å€™ï¼ˆå¦‚ `npm link`ï¼‰æ¯”è¾ƒå¥½è®°ï¼Œåƒ `/node_modules/` ç­‰å¸¸è§æ¡ä»¶å¯èƒ½ä¼šä¸å°å¿ƒé”™è¿‡ç¬¦å·é“¾æ¥çš„æ–‡ä»¶ã€‚æ³¨æ„ï¼Œå¯ä»¥é€šè¿‡ [`resolve.symlinks`](/configuration/resolve#resolve-symlinks) å…³é—­ç¬¦å·é“¾æ¥è§£æï¼ˆä»¥ä¾¿å°†èµ„æºè§£æä¸ºç¬¦å·é“¾æ¥è·¯å¾„ï¼‰ã€‚


### Rule ç»“æœ

è§„åˆ™ç»“æœåªåœ¨è§„åˆ™æ¡ä»¶åŒ¹é…æ—¶ä½¿ç”¨ã€‚

è§„åˆ™æœ‰ä¸¤ç§è¾“å…¥å€¼ï¼š

1. åº”ç”¨çš„ loaderï¼šåº”ç”¨åœ¨ resource ä¸Šçš„ loader æ•°ç»„ã€‚
2. Parser é€‰é¡¹ï¼šç”¨äºä¸ºæ¨¡å—åˆ›å»ºè§£æå™¨çš„é€‰é¡¹å¯¹è±¡ã€‚

è¿™äº›å±æ€§ä¼šå½±å“ loaderï¼š[`loader`](#rule-loader), [`options`](#rule-options-rule-query), [`use`](#rule-use)ã€‚

ä¹Ÿå…¼å®¹è¿™äº›å±æ€§ï¼š[`query`](#rule-options-rule-query), [`loaders`](#rule-loaders)ã€‚

[`enforce`](#rule-enforce) å±æ€§ä¼šå½±å“ loader ç§ç±»ã€‚ä¸è®ºæ˜¯æ™®é€šçš„ï¼Œå‰ç½®çš„ï¼Œåç½®çš„ loaderã€‚

[`parser`](#rule-parser) å±æ€§ä¼šå½±å“ parser é€‰é¡¹ã€‚


## åµŒå¥—çš„ Rule

å¯ä»¥ä½¿ç”¨å±æ€§ [`rules`](#rule-rules) å’Œ [`oneOf`](#rule-oneof) æŒ‡å®šåµŒå¥—è§„åˆ™ã€‚

è¿™äº›è§„åˆ™ç”¨äºåœ¨è§„åˆ™æ¡ä»¶(rule condition)åŒ¹é…æ—¶è¿›è¡Œå–å€¼ã€‚


## `Rule.enforce`

`string`

å¯èƒ½çš„å€¼æœ‰ï¼š`"pre" | "post"`

æŒ‡å®š loader ç§ç±»ã€‚æ²¡æœ‰å€¼è¡¨ç¤ºæ˜¯æ™®é€š loaderã€‚

è¿˜æœ‰ä¸€ä¸ªé¢å¤–çš„ç§ç±»"è¡Œå†… loader"ï¼Œloader è¢«åº”ç”¨åœ¨ import/require è¡Œå†…ã€‚

æ‰€æœ‰ä¸€ä¸ªæ¥ä¸€ä¸ªåœ°è¿›å…¥çš„ loaderï¼Œéƒ½æœ‰ä¸¤ä¸ªé˜¶æ®µï¼š

1. __pitching__ é˜¶æ®µï¼šloader ä¸Šçš„ pitch æ–¹æ³•ï¼ŒæŒ‰ç…§ `åç½®(post)ã€è¡Œå†…(normal)ã€æ™®é€š(inline)ã€å‰ç½®(pre)` çš„é¡ºåºè°ƒç”¨ã€‚æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹ [ è¶Šè¿‡ loader(pitching loader)](/api/loaders/#pitching-loader)ã€‚
2. __normal__ é˜¶æ®µï¼šloader ä¸Šçš„ å¸¸è§„æ–¹æ³•ï¼ŒæŒ‰ç…§ `å‰ç½®(pre)ã€è¡Œå†…(normal)ã€æ™®é€š(inline)ã€åç½®(post)` çš„é¡ºåºè°ƒç”¨ã€‚æ¨¡å—æºç çš„è½¬æ¢ï¼Œå‘ç”Ÿåœ¨è¿™ä¸ªé˜¶æ®µã€‚

æ‰€æœ‰æ™®é€š loader å¯ä»¥é€šè¿‡åœ¨è¯·æ±‚ä¸­åŠ ä¸Š `!` å‰ç¼€æ¥å¿½ç•¥ï¼ˆè¦†ç›–ï¼‰ã€‚

æ‰€æœ‰æ™®é€šå’Œå‰ç½® loader å¯ä»¥é€šè¿‡åœ¨è¯·æ±‚ä¸­åŠ ä¸Š `-!` å‰ç¼€æ¥å¿½ç•¥ï¼ˆè¦†ç›–ï¼‰ã€‚

æ‰€æœ‰æ™®é€šï¼Œåç½®å’Œå‰ç½® loader å¯ä»¥é€šè¿‡åœ¨è¯·æ±‚ä¸­åŠ ä¸Š `!!` å‰ç¼€æ¥å¿½ç•¥ï¼ˆè¦†ç›–ï¼‰ã€‚

ä¸åº”è¯¥ä½¿ç”¨è¡Œå†… loader å’Œ `!` å‰ç¼€ï¼Œå› ä¸ºå®ƒä»¬æ˜¯éæ ‡å‡†çš„ã€‚å®ƒä»¬å¯åœ¨ç”± loader ç”Ÿæˆçš„ä»£ç ä¸­ä½¿ç”¨ã€‚


## `Rule.exclude`

`Rule.exclude` æ˜¯ `Rule.resource.exclude` çš„ç®€å†™ã€‚å¦‚æœä½ æä¾›äº† `Rule.exclude` é€‰é¡¹ï¼Œå°±ä¸èƒ½å†æä¾› `Rule.resource`ã€‚è¯¦ç»†è¯·æŸ¥çœ‹ [`Rule.resource`](#rule-resource) å’Œ [`Condition.exclude`](#æ¡ä»¶)ã€‚


## `Rule.include`

`Rule.include` æ˜¯ `Rule.resource.include` çš„ç®€å†™ã€‚å¦‚æœä½ æä¾›äº† `Rule.include` é€‰é¡¹ï¼Œå°±ä¸èƒ½å†æä¾› `Rule.resource`ã€‚è¯¦ç»†è¯·æŸ¥çœ‹ [`Rule.resource`](#rule-resource) å’Œ [`Condition.include`](#æ¡ä»¶)ã€‚


## `Rule.issuer`

ä¸€ä¸ª[`æ¡ä»¶`](#æ¡ä»¶)ï¼Œç”¨æ¥ä¸è¢«å‘å¸ƒçš„ request å¯¹åº”çš„æ¨¡å—é¡¹åŒ¹é…ã€‚åœ¨ä»¥ä¸‹ç¤ºä¾‹ä¸­ï¼Œa.js request çš„`å‘å¸ƒè€…(issuer)`æ˜¯ index.js æ–‡ä»¶çš„è·¯å¾„ã€‚

__index.js__

```javascript
import A from './a.js';
```

è¿™ä¸ªé€‰é¡¹å¯ä»¥ç”¨æ¥å°† loader åº”ç”¨åˆ°ä¸€ä¸ªç‰¹å®šæ¨¡å—æˆ–ä¸€ç»„æ¨¡å—çš„ä¾èµ–ä¸­ã€‚


## `Rule.loader`

`Rule.loader` æ˜¯ `Rule.use: [ { loader } ]` çš„ç®€å†™ã€‚è¯¦ç»†è¯·æŸ¥çœ‹ [`Rule.use`](#rule-use) å’Œ [`UseEntry.loader`](#useentry)ã€‚


## `Rule.loaders`

W> ç”±äºéœ€è¦æ”¯æŒ `Rule.use`ï¼Œæ­¤é€‰é¡¹__å·²åºŸå¼ƒ__ã€‚

`Rule.loaders` æ˜¯ `Rule.use` çš„åˆ«åã€‚è¯¦ç»†è¯·æŸ¥çœ‹ [`Rule.use`](#rule-use)ã€‚


## `Rule.oneOf`

[`è§„åˆ™`](#rule)æ•°ç»„ï¼Œå½“è§„åˆ™åŒ¹é…æ—¶ï¼Œåªä½¿ç”¨ç¬¬ä¸€ä¸ªåŒ¹é…è§„åˆ™ã€‚

__webpack.config.js__

```javascript
module.exports = {
  //...
  module: {
    rules: [
      {
        test: /\.css$/,
        oneOf: [
          {
            resourceQuery: /inline/, // foo.css?inline
            use: 'url-loader'
          },
          {
            resourceQuery: /external/, // foo.css?external
            use: 'file-loader'
          }
        ]
      }
    ]
  }
};
```

## `Rule.options / Rule.query`

`Rule.options` å’Œ `Rule.query` æ˜¯ `Rule.use: [ { options } ]` çš„ç®€å†™ã€‚è¯¦ç»†è¯·æŸ¥çœ‹ [`Rule.use`](#rule-use) å’Œ [`UseEntry.options`](#useentry)ã€‚

W> ç”±äºéœ€è¦æ”¯æŒ `Rule.options` å’Œ `UseEntry.options`ï¼Œ`Rule.use`ï¼Œ`Rule.query` å·²åºŸå¼ƒã€‚


## `Rule.parser`

è§£æé€‰é¡¹å¯¹è±¡ã€‚æ‰€æœ‰åº”ç”¨çš„è§£æé€‰é¡¹éƒ½å°†åˆå¹¶ã€‚

è§£æå™¨(parser)å¯ä»¥æŸ¥é˜…è¿™äº›é€‰é¡¹ï¼Œå¹¶ç›¸åº”åœ°ç¦ç”¨æˆ–é‡æ–°é…ç½®ã€‚å¤§å¤šæ•°é»˜è®¤æ’ä»¶ï¼Œä¼šå¦‚ä¸‹è§£é‡Šå€¼ï¼š

- å°†é€‰é¡¹è®¾ç½®ä¸º `false`ï¼Œå°†ç¦ç”¨è§£æå™¨ã€‚
- å°†é€‰é¡¹è®¾ç½®ä¸º `true`ï¼Œæˆ–ä¸ä¿®æ”¹å°†å…¶ä¿ç•™ä¸º `undefined`ï¼Œå¯ä»¥å¯ç”¨è§£æå™¨ã€‚

ç„¶è€Œï¼Œä¸€äº›è§£æå™¨(parser)æ’ä»¶å¯èƒ½ä¸å…‰åªæ¥æ”¶ä¸€ä¸ªå¸ƒå°”å€¼ã€‚ä¾‹å¦‚ï¼Œå†…éƒ¨çš„ `NodeStuffPlugin` å·®è·ï¼Œå¯ä»¥æ¥æ”¶ä¸€ä¸ªå¯¹è±¡ï¼Œè€Œä¸æ˜¯ `true`ï¼Œæ¥ä¸ºç‰¹å®šçš„è§„åˆ™æ·»åŠ é¢å¤–çš„é€‰é¡¹ã€‚

__ç¤ºä¾‹__ï¼ˆé»˜è®¤çš„æ’ä»¶è§£æå™¨é€‰é¡¹ï¼‰ï¼š

```js
module.exports = {
  //...
  module: {
    rules: [
      {
        //...
        parser: {
          amd: false, // ç¦ç”¨ AMD
          commonjs: false, // ç¦ç”¨ CommonJS
          system: false, // ç¦ç”¨ SystemJS
          harmony: false, // ç¦ç”¨ ES2015 Harmony import/export
          requireInclude: false, // ç¦ç”¨ require.include
          requireEnsure: false, // ç¦ç”¨ require.ensure
          requireContext: false, // ç¦ç”¨ require.context
          browserify: false, // ç¦ç”¨ç‰¹æ®Šå¤„ç†çš„ browserify bundle
          requireJs: false, // ç¦ç”¨ requirejs.*
          node: false, // ç¦ç”¨ __dirname, __filename, module, require.extensions, require.main ç­‰ã€‚
          node: {...} // åœ¨æ¨¡å—çº§åˆ«(module level)ä¸Šé‡æ–°é…ç½® [node](/configuration/node) å±‚(layer)
        }
      }
    ]
  }
}
```


## `Rule.resource`

[`æ¡ä»¶`](#æ¡ä»¶)ä¼šåŒ¹é… resourceã€‚æ—¢å¯ä»¥æä¾› `Rule.resource` é€‰é¡¹ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨å¿«æ·é€‰é¡¹ `Rule.test`ï¼Œ`Rule.exclude` å’Œ `Rule.include`ã€‚åœ¨ [`Rule` æ¡ä»¶](#rule-conditions) ä¸­æŸ¥çœ‹è¯¦ç»†ã€‚


## `Rule.resourceQuery`

A [`Condition`](#æ¡ä»¶) matched with the resource query. This option is used to test against the query section of a request string (i.e. from the question mark onwards). If you were to `import Foo from './foo.css?inline'`, the following condition would match:

__webpack.config.js__

```javascript
module.exports = {
  //...
  module: {
    rules: [
      {
        test: /\.css$/,
        resourceQuery: /inline/,
        use: 'url-loader'
      }
    ]
  }
};
```


## `Rule.rules`

[`è§„åˆ™`](#rule)æ•°ç»„ï¼Œå½“è§„åˆ™åŒ¹é…æ—¶ä½¿ç”¨ã€‚


## `Rule.sideEffects`

`bool`

æ ‡ç¤ºå‡ºæ¨¡å—çš„å“ªäº›éƒ¨åˆ†åŒ…å«å¤–éƒ¨ä½œç”¨(side effect)ã€‚æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·æŸ¥çœ‹ [tree shaking](/guides/tree-shaking/#mark-the-file-as-side-effect-free)ã€‚


## `Rule.test`

`Rule.test` æ˜¯ `Rule.resource.test` çš„ç®€å†™ã€‚å¦‚æœä½ æä¾›äº†ä¸€ä¸ª `Rule.test` é€‰é¡¹ï¼Œå°±ä¸èƒ½å†æä¾› `Rule.resource`ã€‚è¯¦ç»†è¯·æŸ¥çœ‹ [`Rule.resource`](#rule-resource) å’Œ [`Condition.test`](#æ¡ä»¶)ã€‚


## `Rule.type`

`string`

Possible values: `'javascript/auto' | 'javascript/dynamic' | 'javascript/esm' | 'json' | 'webassembly/experimental'`

`Rule.type` sets the type for a matching module. This prevents defaultRules and their default importing behaviors from occurring. For example, if you want to load a `.json` file through a custom loader, you'd need to set the `type` to `javascript/auto` to bypass webpack's built-in json importing. (See [v4.0 changelog](https://github.com/webpack/webpack/releases/tag/v4.0.0) for more details)

__webpack.config.js__

```javascript
module.exports = {
  //...
  module: {
    rules: [
      //...
      {
        test: /\.json$/,
        type: 'javascript/auto',
        loader: 'custom-json-loader'
      }
    ]
  }
};
```


## `Rule.use`

`[UseEntry]` `function(info)`

__`[UseEntry]`__

`Rule.use` å¯ä»¥æ˜¯ä¸€ä¸ªåº”ç”¨äºæ¨¡å—çš„ [UseEntries](#useentry) æ•°ç»„ã€‚æ¯ä¸ªå…¥å£(entry)æŒ‡å®šä½¿ç”¨ä¸€ä¸ª loaderã€‚

ä¼ é€’å­—ç¬¦ä¸²ï¼ˆå¦‚ï¼š`use: [ 'style-loader' ]`ï¼‰æ˜¯ loader å±æ€§çš„ç®€å†™æ–¹å¼ï¼ˆå¦‚ï¼š`use: [ { loader: 'style-loader'} ]`ï¼‰ã€‚

Loaders can be chained by passing multiple loaders, which will be applied from right to left (last to first configured).

__webpack.config.js__

```javascript
module.exports = {
  //...
  module: {
    rules: [
      {
        //...
        use: [
          'style-loader',
          {
            loader: 'css-loader',
            options: {
              importLoaders: 1
            }
          },
          {
            loader: 'less-loader',
            options: {
              noIeCompat: true
            }
          }
        ]
      }
    ]
  }
};
```

__`function(info)`__

`Rule.use` can also be a function which receives the object argument describing the module being loaded, and must return an array of `UseEntry` items.

The `info` object parameter has the following fields:

- `compiler`: The current webpack compiler (can be undefined)
- `issuer`: The path to the module that is importing the module being loaded
- `realResource`: Always the path to the module being loaded
- `resource`: The path to the module being loaded, it is usually equal to `realResource` except when the resource name is overwritten via `!=!` in request string

The same shortcut as an array can be used for the return value (i.e. `use: [ 'style-loader' ]`).

__webpack.config.js__

```javascript
module.exports = {
  //...
  module: {
    rules: [
      {
        use: (info) => ([
          {
            loader: 'custom-svg-loader'
          },
          {
            loader: 'svgo-loader',
            options: {
              plugins: [{
                cleanupIDs: { prefix: basename(info.resource) }
              }]
            }
          }
        ])
      }
    ]
  }
};
```

è¯¦ç»†ä¿¡æ¯è¯·æŸ¥çœ‹ [UseEntry](#useentry)ã€‚


## `æ¡ä»¶`

æ¡ä»¶å¯ä»¥æ˜¯è¿™äº›ä¹‹ä¸€ï¼š

- å­—ç¬¦ä¸²ï¼šåŒ¹é…è¾“å…¥å¿…é¡»ä»¥æä¾›çš„å­—ç¬¦ä¸²å¼€å§‹ã€‚æ˜¯çš„ã€‚ç›®å½•ç»å¯¹è·¯å¾„æˆ–æ–‡ä»¶ç»å¯¹è·¯å¾„ã€‚
- æ­£åˆ™è¡¨è¾¾å¼ï¼štest è¾“å…¥å€¼ã€‚
- å‡½æ•°ï¼šè°ƒç”¨è¾“å…¥çš„å‡½æ•°ï¼Œå¿…é¡»è¿”å›ä¸€ä¸ªçœŸå€¼(truthy value)ä»¥åŒ¹é…ã€‚
- æ¡ä»¶æ•°ç»„ï¼šè‡³å°‘ä¸€ä¸ªåŒ¹é…æ¡ä»¶ã€‚
- å¯¹è±¡ï¼šåŒ¹é…æ‰€æœ‰å±æ€§ã€‚æ¯ä¸ªå±æ€§éƒ½æœ‰ä¸€ä¸ªå®šä¹‰è¡Œä¸ºã€‚

`{ test: Condition }`ï¼šåŒ¹é…ç‰¹å®šæ¡ä»¶ã€‚ä¸€èˆ¬æ˜¯æä¾›ä¸€ä¸ªæ­£åˆ™è¡¨è¾¾å¼æˆ–æ­£åˆ™è¡¨è¾¾å¼çš„æ•°ç»„ï¼Œä½†è¿™ä¸æ˜¯å¼ºåˆ¶çš„ã€‚

`{ include: Condition }`ï¼šåŒ¹é…ç‰¹å®šæ¡ä»¶ã€‚ä¸€èˆ¬æ˜¯æä¾›ä¸€ä¸ªå­—ç¬¦ä¸²æˆ–è€…å­—ç¬¦ä¸²æ•°ç»„ï¼Œä½†è¿™ä¸æ˜¯å¼ºåˆ¶çš„ã€‚

`{ exclude: Condition }`ï¼šæ’é™¤ç‰¹å®šæ¡ä»¶ã€‚ä¸€èˆ¬æ˜¯æä¾›ä¸€ä¸ªå­—ç¬¦ä¸²æˆ–å­—ç¬¦ä¸²æ•°ç»„ï¼Œä½†è¿™ä¸æ˜¯å¼ºåˆ¶çš„ã€‚

`{ and: [Condition] }`ï¼šå¿…é¡»åŒ¹é…æ•°ç»„ä¸­çš„æ‰€æœ‰æ¡ä»¶

`{ or: [Condition] }`ï¼šåŒ¹é…æ•°ç»„ä¸­ä»»ä½•ä¸€ä¸ªæ¡ä»¶

`{ not: [Condition] }`ï¼šå¿…é¡»æ’é™¤è¿™ä¸ªæ¡ä»¶

__ç¤ºä¾‹ï¼š__

```javascript
module.exports = {
  //...
  module: {
    rules: [
      {
        test: /\.css$/,
        include: [
          path.resolve(__dirname, 'app/styles'),
          path.resolve(__dirname, 'vendor/styles')
        ]
      }
    ]
  }
};
```


## `UseEntry`

`object` `function(info)`

__`object`__

å¿…é¡»æœ‰ä¸€ä¸ª `loader` å±æ€§æ˜¯å­—ç¬¦ä¸²ã€‚å®ƒä½¿ç”¨ loader è§£æé€‰é¡¹ï¼ˆ[resolveLoader](/configuration/resolve#resolveloader)ï¼‰ï¼Œç›¸å¯¹äºé…ç½®ä¸­çš„ [`context`](/configuration/entry-context#context) æ¥è§£æã€‚

å¯ä»¥æœ‰ä¸€ä¸ª `options` å±æ€§ä¸ºå­—ç¬¦ä¸²æˆ–å¯¹è±¡ã€‚å€¼å¯ä»¥ä¼ é€’åˆ° loader ä¸­ï¼Œå°†å…¶ç†è§£ä¸º loader é€‰é¡¹ã€‚

ç”±äºå…¼å®¹æ€§åŸå› ï¼Œä¹Ÿå¯èƒ½æœ‰ `query` å±æ€§ï¼Œå®ƒæ˜¯ `options` å±æ€§çš„åˆ«åã€‚ä½¿ç”¨ `options` å±æ€§æ›¿ä»£ã€‚

æ³¨æ„ï¼Œwebpack éœ€è¦ç”Ÿæˆèµ„æºå’Œæ‰€æœ‰ loader çš„ç‹¬ç«‹æ¨¡å—æ ‡è¯†ï¼ŒåŒ…æ‹¬é€‰é¡¹ã€‚å®ƒå°è¯•å¯¹é€‰é¡¹å¯¹è±¡ä½¿ç”¨ `JSON.stringify`ã€‚è¿™åœ¨ 99.9% çš„æƒ…å†µä¸‹æ˜¯å¯ä»¥çš„ï¼Œä½†æ˜¯å¦‚æœå°†ç›¸åŒçš„ loader åº”ç”¨äºç›¸åŒèµ„æºçš„ä¸åŒé€‰é¡¹ï¼Œå¹¶ä¸”é€‰é¡¹å…·æœ‰ä¸€äº›å¸¦å­—ç¬¦çš„å€¼ï¼Œåˆ™å¯èƒ½ä¸æ˜¯å”¯ä¸€çš„ã€‚

å¦‚æœé€‰é¡¹å¯¹è±¡ä¸è¢«å­—ç¬¦åŒ–ï¼ˆä¾‹å¦‚å¾ªç¯ JSONï¼‰ï¼Œå®ƒä¹Ÿä¼šä¸­æ–­ã€‚å› æ­¤ï¼Œä½ å¯ä»¥åœ¨é€‰é¡¹å¯¹è±¡ä½¿ç”¨ `ident` å±æ€§ï¼Œä½œä¸ºå”¯ä¸€æ ‡è¯†ç¬¦ã€‚

__webpack.config.js__

```javascript
module.exports = {
  //...
  module: {
    rules: [
      {
        loader: 'css-loader',
        options: {
          modules: true
        }
      }
    ]
  }
};
```

__`function(info)`__

A `UseEntry` can also be a function which receives the object argument describing the module being loaded, and must return an options object. This can be used to vary the loader options on a per-module basis.

The `info` object parameter has the following fields:

- `compiler`: The current webpack compiler (can be undefined)
- `issuer`: The path to the module that is importing the module being loaded
- `realResource`: Always the path to the module being loaded
- `resource`: The path to the module being loaded, it is usually equal to `realResource` except when the resource name is overwritten via `!=!` in request string

__webpack.config.js__

```javascript
module.exports = {
  //...
  module: {
    rules: [
      {
        loader: 'file-loader',
        options: {
          outputPath: 'svgs'
        }
      },
      (info) => ({
        loader: 'svgo-loader',
        options: {
          plugins: [{
            cleanupIDs: { prefix: basename(info.resource) }
          }]
        }
      })
    ]
  }
};
```


## æ¨¡å—ä¸Šä¸‹æ–‡(module context)

> é¿å…ä½¿ç”¨è¿™äº›é€‰é¡¹ï¼Œå› ä¸ºå®ƒä»¬__å·²åºŸå¼ƒ__ï¼Œå¹¶å°†å¾ˆå¿«åˆ é™¤ã€‚

è¿™äº›é€‰é¡¹æè¿°äº†å½“é‡åˆ°åŠ¨æ€ä¾èµ–æ—¶ï¼Œåˆ›å»ºä¸Šä¸‹æ–‡çš„é»˜è®¤è®¾ç½®ã€‚

ä¾‹å¦‚ï¼Œ`æœªçŸ¥çš„(unknown)` åŠ¨æ€ä¾èµ–ï¼š`require`ã€‚

ä¾‹å¦‚ï¼Œ`è¡¨è¾¾å¼(expr)` åŠ¨æ€ä¾èµ–ï¼š`require(expr)`ã€‚

ä¾‹å¦‚ï¼Œ`åŒ…è£¹çš„(wrapped)` åŠ¨æ€ä¾èµ–ï¼š`require('./templates/' + expr)`ã€‚

ä»¥ä¸‹æ˜¯å…¶[é»˜è®¤å€¼](https://github.com/webpack/webpack/blob/master/lib/WebpackOptionsDefaulter.js)çš„å¯ç”¨é€‰é¡¹

__webpack.config.js__

```javascript
module.exports = {
  //...
  module: {
    exprContextCritical: true,
    exprContextRecursive: true,
    exprContextRegExp: false,
    exprContextRequest: '.',
    unknownContextCritical: true,
    unknownContextRecursive: true,
    unknownContextRegExp: false,
    unknownContextRequest: '.',
    wrappedContextCritical: false,
    wrappedContextRecursive: true,
    wrappedContextRegExp: /.*/,
    strictExportPresence: false // since webpack 2.3.0
  }
};
```

T> ä½ å¯ä»¥ä½¿ç”¨ `ContextReplacementPlugin` æ¥ä¿®æ”¹è¿™äº›å•ä¸ªä¾èµ–çš„å€¼ã€‚è¿™ä¹Ÿä¼šåˆ é™¤è­¦å‘Šã€‚

å‡ ä¸ªç”¨ä¾‹ï¼š

- åŠ¨æ€ä¾èµ–çš„è­¦å‘Šï¼š`wrappedContextCritical: true`ã€‚
- `require(expr)` åº”è¯¥åŒ…å«æ•´ä¸ªç›®å½•ï¼š`exprContextRegExp: /^\.\//`
- `require("./templates/" + expr)` ä¸åº”è¯¥åŒ…å«é»˜è®¤å­ç›®å½•ï¼š`wrappedContextRecursive: false`
- `strictExportPresence` makes missing exports an error instead of warning







# Plugins æ’ä»¶
https://www.webpackjs.com/configuration/plugins/
https://www.webpackjs.com/plugins/

---
title: æ’ä»¶(plugins)
sort: 8
contributors:
  - sokra
  - skipjack
  - yatharthk
  - byzyk
  - EugeneHlushko
---

`plugins` é€‰é¡¹ç”¨äºä»¥å„ç§æ–¹å¼è‡ªå®šä¹‰ webpack æ„å»ºè¿‡ç¨‹ã€‚webpack é™„å¸¦äº†å„ç§å†…ç½®æ’ä»¶ï¼Œå¯ä»¥é€šè¿‡ `webpack.[plugin-name]` è®¿é—®è¿™äº›æ’ä»¶ã€‚è¯·æŸ¥çœ‹ [æ’ä»¶é¡µé¢](/plugins) è·å–æ’ä»¶åˆ—è¡¨å’Œå¯¹åº”æ–‡æ¡£ï¼Œä½†è¯·æ³¨æ„è¿™åªæ˜¯å…¶ä¸­ä¸€éƒ¨åˆ†ï¼Œç¤¾åŒºä¸­è¿˜æœ‰è®¸å¤šæ’ä»¶ã€‚

T> æ³¨æ„ï¼šæœ¬é¡µé¢ä»…è®¨è®ºä½¿ç”¨æ’ä»¶ï¼Œå¦‚æœä½ æœ‰å…´è¶£ç¼–å†™è‡ªå·±çš„æ’ä»¶ï¼Œè¯·è®¿é—® [ç¼–å†™ä¸€ä¸ªæ’ä»¶](/contribute/writing-a-plugin/) é¡µé¢ã€‚


## `plugins`

[`[Plugin]`](/plugins/)

ä¸€ç»„ webpack æ’ä»¶ã€‚ä¾‹å¦‚ï¼Œ[`DefinePlugin`](/plugins/define-plugin/) å…è®¸ä½ åˆ›å»ºå¯åœ¨ç¼–è¯‘æ—¶é…ç½®çš„å…¨å±€å¸¸é‡ã€‚è¿™å¯¹éœ€è¦å†å¼€å‘ç¯å¢ƒæ„å»ºå’Œç”Ÿäº§ç¯å¢ƒæ„å»ºä¹‹é—´äº§ç”Ÿä¸åŒè¡Œä¸ºæ¥è¯´éå¸¸æœ‰ç”¨ã€‚

__webpack.config.js__

```js
module.exports = {
  //...
  plugins: [
    new webpack.DefinePlugin({
      // Definitions...
    })
  ]
};
```

ä¸€ä¸ªå¤æ‚ç¤ºä¾‹ï¼Œä½¿ç”¨å¤šä¸ªæ’ä»¶ï¼Œå¯èƒ½çœ‹èµ·æ¥å°±åƒè¿™æ ·ï¼š

__webpack.config.js__

```js
var webpack = require('webpack');
// å¯¼å…¥é webpack è‡ªå¸¦é»˜è®¤æ’ä»¶
var ExtractTextPlugin = require('extract-text-webpack-plugin');
var DashboardPlugin = require('webpack-dashboard/plugin');

// åœ¨é…ç½®ä¸­æ·»åŠ æ’ä»¶
module.exports = {
  //...
  plugins: [
    new ExtractTextPlugin({
      filename: 'build.min.css',
      allChunks: true,
    }),
    new webpack.IgnorePlugin(/^\.\/locale$/, /moment$/),
    // ç¼–è¯‘æ—¶(compile time)æ’ä»¶
    new webpack.DefinePlugin({
      'process.env.NODE_ENV': '"production"',
    }),
    // webpack-dev-server å¼ºåŒ–æ’ä»¶
    new DashboardPlugin(),
    new webpack.HotModuleReplacementPlugin(),
  ]
};
```

## html-webpack-inline-source-plugin

å°†æ‰“åŒ…å¥½çš„ js ä»£ç  inline è¿› htmlï¼Œhtml-webpack-plugin çš„é…ç½®é‡Œæœ‰ inlineSource: '.(js|css)'

è¿™å°±æ˜¯å‘Šè¯‰ html-webpack-inline-source-plugin éœ€è¦å°†æ‰“åŒ…å¥½çš„ä»£ç  inline è¿› html é‡Œï¼Œæ’ä»¶éœ€è¦æ·»åŠ åˆ° html-webpack-plugin çš„é…ç½®å

	plugins: [
	    new MiniCssExtractPlugin({
	        filename: 'css/[hash].css'
	    })
	].concat(htmlPluginArray).concat([
	    new HtmlWebpackInlineSourcePlugin()
	])

ä½†æ˜¯ html-webpack-inline-source-plugin ä¹Ÿä»…èƒ½å°†æ‰“åŒ…åè¾“å‡ºçš„ js æ–‡ä»¶å¼•å…¥ htmlï¼Œè‹¥ä½ æƒ³å°† html ç å…¶ä»–ä½¿ç”¨ script æ ‡ç­¾åŠ è½½çš„ js æ–‡ä»¶æˆ–è€… style æ ‡ç­¾åŠ è½½çš„ css æ–‡ä»¶ä¹Ÿ inline è¿› html é‡Œçš„è¯ï¼Œhtml-webpack-inline-source-plugin å¹¶ä¸èƒ½å®ç°ã€‚ä» html-webpack-plugin é‡Œçš„ Issues æ¥çœ‹ï¼Œhtml-webpack-plugin çš„ä½œè€…ä¹Ÿæ— æ„åšè¿™æ ·çš„äº‹æƒ…ï¼Œä½†ä¹Ÿç»™å‡ºäº†å»ºè®®ï¼Œå¯ä»¥å€ŸåŠ© html-webpack-plugin æ’ä»¶çš„ hooks html-webpack-plugin-before-html-processing è¾¾åˆ°æˆ‘ä»¬éœ€è¦çš„æ•ˆæœã€‚




# Authoring Libraries å‘è¡Œæ¨¡å—
https://webpack.js.org/guides/author-libraries/#root

Aside from applications, webpack can also be used to bundle JavaScript libraries. The following guide is meant for library authors looking to streamline their bundling strategy.

## Authoring a Library

Let's assume that you are writing a small library ,webpack-numbers, that allows users to convert the numbers 1 through 5 from their numeric representation to a textual one and vice-versa, e.g. 2 to 'two'.

The basic project structure may look like this:

project

	+  |- webpack.config.js
	+  |- package.json
	+  |- /src
	+    |- index.js
	+    |- ref.json

Initialize npm, install webpack and lodash:

	npm init -y
	npm install --save-dev webpack lodash

src/ref.json

	[
	  {
	    "num": 1,
	    "word": "One"
	  },
	  {
	    "num": 2,
	    "word": "Two"
	  },
	  {
	    "num": 3,
	    "word": "Three"
	  },
	  {
	    "num": 4,
	    "word": "Four"
	  },
	  {
	    "num": 5,
	    "word": "Five"
	  },
	  {
	    "num": 0,
	    "word": "Zero"
	  }
	]

src/index.js

	import _ from 'lodash';
	import numRef from './ref.json';

	export function numToWord(num) {
	  return _.reduce(numRef, (accum, ref) => {
	    return ref.num === num ? ref.word : accum;
	  }, '');
	}

	export function wordToNum(word) {
	  return _.reduce(numRef, (accum, ref) => {
	    return ref.word === word && word.toLowerCase() ? ref.num : accum;
	  }, -1);
	}

The usage specification for the library use will be as follows:

ES2015 module import:

	import * as webpackNumbers from 'webpack-numbers';
	// ...
	webpackNumbers.wordToNum('Two');

CommonJS module require:

	const webpackNumbers = require('webpack-numbers');
	// ...
	webpackNumbers.wordToNum('Two');

AMD module require:

	require(['webpackNumbers'], function (webpackNumbers) {
	  // ...
	  webpackNumbers.wordToNum('Two');
	});

The consumer also can use the library by loading it via a script tag:

	<!doctype html>
	<html>
	  ...
	  <script src="https://unpkg.com/webpack-numbers"></script>
	  <script>
	    // ...
	    // Global variable
	    webpackNumbers.wordToNum('Five')
	    // Property in the window object
	    window.webpackNumbers.wordToNum('Five')
	    // ...
	  </script>
	</html>

Note that we can also configure it to expose the library in the following ways:

Property in the global object, for node.
Property in the this object.
For full library configuration and code please refer to webpack-library-example.

## Base Configuration
Now let's bundle this library in a way that will achieve the following goals:

Using externals to avoid bundling lodash, so the consumer is required to load it.
Setting the library name as webpack-numbers.
Exposing the library as a variable called webpackNumbers.
Being able to access the library inside Node.js.
Also, the consumer should be able to access the library in the following ways:

ES2015 module. i.e. import webpackNumbers from 'webpack-numbers'.
CommonJS module. i.e. require('webpack-numbers').
Global variable when included through script tag.
We can start with this basic webpack configuration:

webpack.config.js

	const path = require('path');

	module.exports = {
	  entry: './src/index.js',
	  output: {
	    path: path.resolve(__dirname, 'dist'),
	    filename: 'webpack-numbers.js',
	  },
	};

## Externalize Lodash

Now, if you run webpack, you will find that a largish bundle is created. If you inspect the file, you'll see that lodash has been bundled along with your code. In this case, we'd prefer to treat lodash as a peerDependency. Meaning that the consumer should already have lodash installed. Hence you would want to give up control of this external library to the consumer of your library.

This can be done using the externals configuration:

webpack.config.js

	  const path = require('path');

	  module.exports = {
	    entry: './src/index.js',
	    output: {
	      path: path.resolve(__dirname, 'dist'),
	      filename: 'webpack-numbers.js',
	    },
	+   externals: {
	+     lodash: {
	+       commonjs: 'lodash',
	+       commonjs2: 'lodash',
	+       amd: 'lodash',
	+       root: '_',
	+     },
	+   },
	  };

This means that your library expects a dependency named lodash to be available in the consumer's environment.

Note that if you only plan on using your library as a dependency in another webpack bundle, you may specify externals as an array.

## External Limitations
For libraries that use several files from a dependency:

	import A from 'library/one';
	import B from 'library/two';

	// ...

You won't be able to exclude them from the bundle by specifying library in the externals. You'll either need to exclude them one by one or by using a regular expression.

	module.exports = {
	  //...
	  externals: [
	    'library/one',
	    'library/two',
	    // Everything that starts with "library/"
	    /^library\/.+$/,
	  ],
	};

## Expose the Library
For widespread use of the library, we would like it to be compatible in different environments, i.e. CommonJS, AMD, Node.js and as a global variable. To make your library available for consumption, add the library property inside output:

webpack.config.js

	  const path = require('path');

	  module.exports = {
	    entry: './src/index.js',
	    output: {
	      path: path.resolve(__dirname, 'dist'),
	      filename: 'webpack-numbers.js',
	+     library: 'webpackNumbers',
	    },
	    externals: {
	      lodash: {
	        commonjs: 'lodash',
	        commonjs2: 'lodash',
	        amd: 'lodash',
	        root: '_',
	      },
	    },
	  };

Note that the library setup is tied to the entry configuration. For most libraries, specifying a single entry point is sufficient. While multi-part libraries are possible, it is simpler to expose partial exports through an index script that serves as a single entry point. Using an array as an entry point for a library is not recommended.

This exposes your library bundle available as a global variable named webpackNumbers when imported. To make the library compatible with other environments, add libraryTarget property to the config. This will add various options about how the library can be exposed.

webpack.config.js

	  const path = require('path');

	  module.exports = {
	    entry: './src/index.js',
	    output: {
	      path: path.resolve(__dirname, 'dist'),
	      filename: 'webpack-numbers.js',
	      library: 'webpackNumbers',
	+     libraryTarget: 'umd',
	    },
	    externals: {
	      lodash: {
	        commonjs: 'lodash',
	        commonjs2: 'lodash',
	        amd: 'lodash',
	        root: '_',
	      },
	    },
	  };

You can expose the library in the following ways:

Variable: as a global variable made available by a script tag (libraryTarget:'var').
This: available through the this object (libraryTarget:'this').
Window: available through the window object, in the browser (libraryTarget:'window').
UMD: available after AMD or CommonJS require (libraryTarget:'umd').
If library is set and libraryTarget is not, libraryTarget defaults to var as specified in the output configuration documentation. See output.libraryTarget there for a detailed list of all available options.

With webpack 3.5.5, using `libraryTarget: { root:'_' }` doesn't work properly (as stated in issue 4824). However, you can set `libraryTarget: { var: '_' }` to expect the library as a global variable.

## Final Steps

Optimize your output for production by following the steps mentioned in the production guide. Let's also add the path to your generated bundle as the package's main field in with the package.json

package.json

	{
	  ...
	  "main": "dist/webpack-numbers.js",
	  ...
	}

Or, to add it as a standard module as per this guide:

	{
	  ...
	  "module": "src/index.js",
	  ...
	}

The key main refers to the standard from package.json, and module to a proposal to allow the JavaScript ecosystem upgrade to use ES2015 modules without breaking backwards compatibility.

The module property should point to a script that utilizes ES2015 module syntax but no other syntax features that aren't yet supported by browsers or node. This enables webpack to parse the module syntax itself, allowing for lighter bundles via tree shaking if users are only consuming certain parts of the library.

Now you can publish it as an npm package and find it at unpkg.com to distribute it to your users.

To expose stylesheets associated with your library, the MiniCssExtractPlugin should be used. Users can then consume and load these as they would any other stylesheet.


# Targets æ„å»ºç›®æ ‡
https://github.com/docschina/webpack.js.org/blob/cn/src/content/configuration/target.md

---
title: æ„å»ºç›®æ ‡(targets)
sort: 11
contributors:
  - juangl
  - sokra
  - skipjack
  - SpaceK33z
  - pastelsky
  - tbroadley
  - byzyk
  - EugeneHlushko
---

webpack èƒ½å¤Ÿä¸ºå¤šç§ç¯å¢ƒæˆ– _target_ æ„å»ºç¼–è¯‘ã€‚æƒ³è¦ç†è§£ä»€ä¹ˆæ˜¯ `target` çš„è¯¦ç»†ä¿¡æ¯ï¼Œè¯·é˜…è¯» [target æ¦‚å¿µé¡µé¢](/concepts/targets/)ã€‚

## `target`

`string | function (compiler)`

å‘ŠçŸ¥ webpack ä¸ºç›®æ ‡(target)æŒ‡å®šä¸€ä¸ªç¯å¢ƒã€‚


### `string`

é€šè¿‡ [`WebpackOptionsApply`](https://github.com/webpack/webpack/blob/master/lib/WebpackOptionsApply.js) ï¼Œå¯ä»¥æ”¯æŒä»¥ä¸‹å­—ç¬¦ä¸²å€¼ï¼š

é€‰é¡¹                | æè¿°
--------------------- | -----------------------
`async-node`          | ç¼–è¯‘ä¸ºç±» Node.js ç¯å¢ƒå¯ç”¨ï¼ˆä½¿ç”¨ fs å’Œ vm å¼‚æ­¥åŠ è½½åˆ†å—ï¼‰
`electron-main`       | ç¼–è¯‘ä¸º [Electron](https://electronjs.org/) ä¸»è¿›ç¨‹ã€‚
`electron-renderer`   | ç¼–è¯‘ä¸º [Electron](https://electronjs.org/) æ¸²æŸ“è¿›ç¨‹ï¼Œä½¿ç”¨ `JsonpTemplatePlugin`, `FunctionModulePlugin` æ¥ä¸ºæµè§ˆå™¨ç¯å¢ƒæä¾›ç›®æ ‡ï¼Œä½¿ç”¨ `NodeTargetPlugin` å’Œ `ExternalsPlugin` ä¸º CommonJS å’Œ Electron å†…ç½®æ¨¡å—æä¾›ç›®æ ‡ã€‚
`node`                | ç¼–è¯‘ä¸ºç±» Node.js ç¯å¢ƒå¯ç”¨ï¼ˆä½¿ç”¨ Node.js `require` åŠ è½½ chunkï¼‰
`node-webkit`         | ç¼–è¯‘ä¸º Webkit å¯ç”¨ï¼Œå¹¶ä¸”ä½¿ç”¨ jsonp å»åŠ è½½åˆ†å—ã€‚æ”¯æŒ Node.js å†…ç½®æ¨¡å—å’Œ [`nw.gui`](http://docs.nwjs.io/en/latest/) å¯¼å…¥ï¼ˆå®éªŒæ€§è´¨ï¼‰
`web`                 | ç¼–è¯‘ä¸ºç±»æµè§ˆå™¨ç¯å¢ƒé‡Œå¯ç”¨__ï¼ˆé»˜è®¤ï¼‰__
`webworker`           | ç¼–è¯‘æˆä¸€ä¸ª WebWorker

ä¾‹å¦‚ï¼Œå½“ `target` è®¾ç½®ä¸º `"electron-main"`ï¼Œwebpack å¼•å…¥å¤šä¸ª electron ç‰¹å®šçš„å˜é‡ã€‚æœ‰å…³ä½¿ç”¨å“ªäº›æ¨¡æ¿å’Œ externals çš„æ›´å¤šä¿¡æ¯ï¼Œä½ å¯ä»¥ [ç›´æ¥å‚è€ƒ webpack æºç ](https://github.com/webpack/webpack/blob/master/lib/WebpackOptionsApply.js#L70-L185)ã€‚


### `function`

å¦‚æœä¼ å…¥ä¸€ä¸ªå‡½æ•°ï¼Œæ­¤å‡½æ•°è°ƒç”¨æ—¶ä¼šä¼ å…¥ä¸€ä¸ª compiler ä½œä¸ºå‚æ•°ã€‚å¦‚æœä»¥ä¸Šåˆ—è¡¨ä¸­æ²¡æœ‰ä¸€ä¸ªé¢„å®šä¹‰çš„ç›®æ ‡(target)ç¬¦åˆä½ çš„è¦æ±‚ï¼Œè¯·å°†å…¶è®¾ç½®ä¸ºä¸€ä¸ªå‡½æ•°ã€‚

ä¾‹å¦‚ï¼Œå¦‚æœä½ ä¸éœ€è¦ä½¿ç”¨ä»¥ä¸Šä»»ä½•æ’ä»¶ï¼š

```js
const options = {
  target: () => undefined
};
```

æˆ–è€…å¯ä»¥ä½¿ç”¨ä½ æƒ³è¦æŒ‡å®šçš„æ’ä»¶

```js
const webpack = require('webpack');

const options = {
  target: (compiler) => {
    compiler.apply(
      new webpack.JsonpTemplatePlugin(options.output),
      new webpack.LoaderTargetPlugin('web')
    );
  }
};
```



# Externals å¤–éƒ¨æ‰©å±•
https://www.webpackjs.com/configuration/externals/
https://webpack.js.org/configuration/externals/
https://raw.githubusercontent.com/docschina/webpack.js.org/cn/src/content/configuration/externals.md
Webpack externals æ·±å…¥ç†è§£ https://segmentfault.com/a/1190000012113011?utm_source=tag-newest

---
title: å¤–éƒ¨æ‰©å±•(externals)
sort: 13
contributors:
  - sokra
  - skipjack
  - pksjce
  - fadysamirsadek
  - byzyk
  - zefman
---

`externals` é…ç½®é€‰é¡¹æä¾›äº†ã€Œä»è¾“å‡ºçš„ bundle ä¸­æ’é™¤ä¾èµ–ã€çš„æ–¹æ³•ã€‚ç›¸åï¼Œæ‰€åˆ›å»ºçš„ bundle ä¾èµ–äºé‚£äº›å­˜åœ¨äºç”¨æˆ·ç¯å¢ƒ(consumer's environment)ä¸­çš„ä¾èµ–ã€‚æ­¤åŠŸèƒ½é€šå¸¸å¯¹ **library å¼€å‘äººå‘˜** æ¥è¯´æ˜¯æœ€æœ‰ç”¨çš„ï¼Œç„¶è€Œä¹Ÿä¼šæœ‰å„ç§å„æ ·çš„åº”ç”¨ç¨‹åºç”¨åˆ°å®ƒã€‚

T> **ç”¨æˆ·(consumer)**ï¼Œåœ¨è¿™é‡Œæ˜¯æŒ‡ï¼Œå¼•ç”¨äº†ã€Œä½¿ç”¨ webpack æ‰“åŒ…çš„ libraryã€çš„æ‰€æœ‰ç»ˆç«¯ç”¨æˆ·çš„åº”ç”¨ç¨‹åº(end user application)ã€‚


## `externals`

`string` `object` `function`  `regex`

**é˜²æ­¢**å°†æŸäº› `import` çš„åŒ…(package)**æ‰“åŒ…**åˆ° bundle ä¸­ï¼Œè€Œæ˜¯åœ¨è¿è¡Œæ—¶(runtime)å†å»ä»å¤–éƒ¨è·å–è¿™äº›**æ‰©å±•ä¾èµ–(external dependencies)**ã€‚

ä¾‹å¦‚ï¼Œä» CDN å¼•å…¥ [jQuery](https://jquery.com/)ï¼Œè€Œä¸æ˜¯æŠŠå®ƒæ‰“åŒ…ï¼š

__index.html__

``` html
<script
  src="https://code.jquery.com/jquery-3.1.0.js"
  integrity="sha256-slogkvB1K3VOkzAI8QITxV3VzpOnkeNVsKvtkYLMjfk="
  crossorigin="anonymous">
</script>
```

__webpack.config.js__

```javascript
module.exports = {
  //...
  externals: {
    jquery: 'jQuery'
  }
};
```

è¿™æ ·å°±å‰¥ç¦»äº†é‚£äº›ä¸éœ€è¦æ”¹åŠ¨çš„ä¾èµ–æ¨¡å—ï¼Œæ¢å¥è¯ï¼Œä¸‹é¢å±•ç¤ºçš„ä»£ç è¿˜å¯ä»¥æ­£å¸¸è¿è¡Œï¼š

```javascript
import $ from 'jquery';

$('.my-element').animate(/* ... */);
```

å…·æœ‰å¤–éƒ¨ä¾èµ–(external dependency)çš„ bundle å¯ä»¥åœ¨å„ç§æ¨¡å—ä¸Šä¸‹æ–‡(module context)ä¸­ä½¿ç”¨ï¼Œä¾‹å¦‚ [CommonJS, AMD, å…¨å±€å˜é‡å’Œ ES2015 æ¨¡å—](/concepts/modules)ã€‚å¤–éƒ¨ library å¯èƒ½æ˜¯ä»¥ä¸‹ä»»ä½•ä¸€ç§å½¢å¼ï¼š

- __root__ï¼šå¯ä»¥é€šè¿‡ä¸€ä¸ªå…¨å±€å˜é‡è®¿é—® libraryï¼ˆä¾‹å¦‚ï¼Œé€šè¿‡ script æ ‡ç­¾ï¼‰ã€‚
- __commonjs__ï¼šå¯ä»¥å°† library ä½œä¸ºä¸€ä¸ª CommonJS æ¨¡å—è®¿é—®ã€‚
- __commonjs2__ï¼šå’Œä¸Šé¢çš„ç±»ä¼¼ï¼Œä½†å¯¼å‡ºçš„æ˜¯ `module.exports.default`.
- __amd__ï¼šç±»ä¼¼äº `commonjs`ï¼Œä½†ä½¿ç”¨ AMD æ¨¡å—ç³»ç»Ÿã€‚

å¯ä»¥æ¥å—å„ç§è¯­æ³•â€¦â€¦


### string

è¯·æŸ¥çœ‹ä¸Šé¢çš„ä¾‹å­ã€‚å±æ€§åç§°æ˜¯ `jquery`ï¼Œè¡¨ç¤ºåº”è¯¥æ’é™¤ `import $ from 'jquery'` ä¸­çš„ `jquery` æ¨¡å—ã€‚ä¸ºäº†æ›¿æ¢è¿™ä¸ªæ¨¡å—ï¼Œ`jQuery` çš„å€¼å°†è¢«ç”¨æ¥æ£€ç´¢ä¸€ä¸ªå…¨å±€çš„ `jQuery` å˜é‡ã€‚æ¢å¥è¯è¯´ï¼Œå½“è®¾ç½®ä¸ºä¸€ä¸ªå­—ç¬¦ä¸²æ—¶ï¼Œå®ƒå°†è¢«è§†ä¸º`å…¨å±€çš„`ï¼ˆå®šä¹‰åœ¨ä¸Šé¢å’Œä¸‹é¢ï¼‰ã€‚


### array

```javascript
module.exports = {
  //...
  externals: {
    subtract: ['./math', 'subtract']
  }
};
```

`subtract: ['./math', 'subtract']` è½¬æ¢ä¸ºçˆ¶å­ç»“æ„ï¼Œå…¶ä¸­ `./math` æ˜¯çˆ¶æ¨¡å—ï¼Œè€Œ bundle åªå¼•ç”¨ `subtract` å˜é‡ä¸‹çš„å­é›†ã€‚


### object

W> An object with `{ root, amd, commonjs, ... }` is only allowed for [`libraryTarget: 'umd'`](/configuration/output/#output-librarytarget). It's not allowed for other library targets.

```javascript
module.exports = {
  //...
  externals : {
    react: 'react'
  },

  // æˆ–è€…

  externals : {
    lodash : {
      commonjs: 'lodash',
      amd: 'lodash',
      root: '_' // æŒ‡å‘å…¨å±€å˜é‡
    }
  },

  // æˆ–è€…

  externals : {
    subtract : {
      root: ['math', 'subtract']
    }
  }
};
```

æ­¤è¯­æ³•ç”¨äºæè¿°å¤–éƒ¨ library æ‰€æœ‰å¯ç”¨çš„è®¿é—®æ–¹å¼ã€‚è¿™é‡Œ `lodash` è¿™ä¸ªå¤–éƒ¨ library å¯ä»¥åœ¨ AMD å’Œ CommonJS æ¨¡å—ç³»ç»Ÿä¸­é€šè¿‡ `lodash` è®¿é—®ï¼Œä½†åœ¨å…¨å±€å˜é‡å½¢å¼ä¸‹ç”¨ `_` è®¿é—®ã€‚`subtract` å¯ä»¥é€šè¿‡å…¨å±€ `math` å¯¹è±¡ä¸‹çš„å±æ€§ `subtract` è®¿é—®ï¼ˆä¾‹å¦‚ `window['math']['subtract']`ï¼‰ã€‚


### function

å¯¹äº webpack å¤–éƒ¨åŒ–ï¼Œé€šè¿‡å®šä¹‰å‡½æ•°æ¥æ§åˆ¶è¡Œä¸ºï¼Œå¯èƒ½ä¼šå¾ˆæœ‰å¸®åŠ©ã€‚ä¾‹å¦‚ï¼Œ[webpack-node-externals](https://www.npmjs.com/package/webpack-node-externals) èƒ½å¤Ÿæ’é™¤ `node_modules` ç›®å½•ä¸­æ‰€æœ‰æ¨¡å—ï¼Œè¿˜æä¾›ä¸€äº›é€‰é¡¹ï¼Œæ¯”å¦‚ç™½åå• package(whitelist package)ã€‚

åŸºæœ¬é…ç½®å¦‚ä¸‹ï¼š

```javascript
module.exports = {
  //...
  externals: [
    function(context, request, callback) {
      if (/^yourregex$/.test(request)){
        return callback(null, 'commonjs ' + request);
      }
      callback();
    }
  ]
};
```

`'commonjs'+ request` å®šä¹‰äº†éœ€è¦å¤–éƒ¨åŒ–çš„æ¨¡å—ç±»å‹ã€‚


### regex

åŒ¹é…ç»™å®šæ­£åˆ™è¡¨è¾¾å¼çš„æ¯ä¸ªä¾èµ–ï¼Œéƒ½å°†ä»è¾“å‡º bundle ä¸­æ’é™¤ã€‚

```javascript
module.exports = {
  //...
  externals: /^(jquery|\$)$/i
};
```

è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæ‰€æœ‰åä¸º `jQuery` çš„ä¾èµ–ï¼ˆå¿½ç•¥å¤§å°å†™ï¼‰ï¼Œæˆ–è€… `$`ï¼Œéƒ½ä¼šè¢«å¤–éƒ¨åŒ–ã€‚

### Combining syntaxes

Sometimes you may want to use a combination of the above syntaxes. This can be done in the following manner:

```javascript
module.exports = {
  //...
  externals: [
    {
      // String
      react: 'react',
      // Object
      lodash : {
        commonjs: 'lodash',
        amd: 'lodash',
        root: '_' // indicates global variable
      },
      // Array
      subtract: ['./math', 'subtract']
    },
    // Function
    function(context, request, callback) {
      if (/^yourregex$/.test(request)){
        return callback(null, 'commonjs ' + request);
      }
      callback();
    },
    // Regex
    /^(jquery|\$)$/i
  ]
};
```

å…³äºå¦‚ä½•ä½¿ç”¨æ­¤ externals é…ç½®çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·å‚è€ƒ[å¦‚ä½•ç¼–å†™ library](/guides/author-libraries)ã€‚





# Loaders åŠ è½½å™¨
https://github.com/docschina/webpack.js.org/tree/cn/src/content/loaders/index.md
https://www.webpackjs.com/loaders/

---
title: loader
sort: 1
contributors:
  - simon04
  - bajras
  - rhys-vdw
  - EugeneHlushko
  - hemal7735
---

webpack å¯ä»¥ä½¿ç”¨ [loader](/concepts/loaders) æ¥é¢„å¤„ç†æ–‡ä»¶ã€‚è¿™å…è®¸ä½ æ‰“åŒ…é™¤ JavaScript ä¹‹å¤–çš„ä»»ä½•é™æ€èµ„æºã€‚ä½ å¯ä»¥ä½¿ç”¨ Node.js æ¥å¾ˆç®€å•åœ°ç¼–å†™è‡ªå·±çš„ loaderã€‚

loader é€šè¿‡åœ¨ `require()` è¯­å¥ä¸­ä½¿ç”¨ `loadername!` å‰ç¼€æ¥æ¿€æ´»ï¼Œæˆ–è€…é€šè¿‡ webpack é…ç½®ä¸­çš„æ­£åˆ™è¡¨è¾¾å¼æ¥è‡ªåŠ¨åº”ç”¨ - æŸ¥çœ‹[é…ç½®](/concepts/loaders#configuration)ã€‚


## æ–‡ä»¶

- [`raw-loader`](/loaders/raw-loader) åŠ è½½æ–‡ä»¶åŸå§‹å†…å®¹ï¼ˆutf-8ï¼‰
- [`val-loader`](/loaders/val-loader) å°†ä»£ç ä½œä¸ºæ¨¡å—æ‰§è¡Œï¼Œå¹¶å°† exports è½¬ä¸º JS ä»£ç 
- [`url-loader`](/loaders/url-loader) åƒ file loader ä¸€æ ·å·¥ä½œï¼Œä½†å¦‚æœæ–‡ä»¶å°äºé™åˆ¶ï¼Œå¯ä»¥è¿”å› [data URL](https://tools.ietf.org/html/rfc2397)
- [`file-loader`](/loaders/file-loader) å°†æ–‡ä»¶å‘é€åˆ°è¾“å‡ºæ–‡ä»¶å¤¹ï¼Œå¹¶è¿”å›ï¼ˆç›¸å¯¹ï¼‰URL
- [`ref-loader`](https://www.npmjs.com/package/ref-loader) æ‰‹åŠ¨åˆ›å»ºæ‰€æœ‰æ–‡ä»¶ä¹‹é—´çš„ä¾èµ–å…³ç³»


## JSON

- [`json-loader`](/loaders/json-loader) åŠ è½½ [JSON](http://json.org/) æ–‡ä»¶ï¼ˆé»˜è®¤åŒ…å«ï¼‰
- [`json5-loader`](/loaders/json5-loader) åŠ è½½å’Œè½¬è¯‘ [JSON 5](https://json5.org/) æ–‡ä»¶
- `cson-loader` åŠ è½½å’Œè½¬è¯‘ [CSON](https://github.com/awnist/cson-loader) æ–‡ä»¶


## è½¬è¯‘(transpiling)

- [`script-loader`](/loaders/script-loader) åœ¨å…¨å±€ä¸Šä¸‹æ–‡ä¸­æ‰§è¡Œä¸€æ¬¡ JavaScript æ–‡ä»¶ï¼ˆå¦‚åœ¨ script æ ‡ç­¾ï¼‰ï¼Œä¸éœ€è¦è§£æ
- [`babel-loader`](/loaders/babel-loader) åŠ è½½ ES2015+ ä»£ç ï¼Œç„¶åä½¿ç”¨ [Babel](https://babel.docschina.org/) è½¬è¯‘ä¸º ES5
- [`buble-loader`](https://github.com/sairion/buble-loader) ä½¿ç”¨ [BublÃ©](https://buble.surge.sh/guide/) åŠ è½½ ES2015+ ä»£ç ï¼Œå¹¶ä¸”å°†ä»£ç è½¬è¯‘ä¸º ES5
- [`traceur-loader`](https://github.com/jupl/traceur-loader) åŠ è½½ ES2015+ ä»£ç ï¼Œç„¶åä½¿ç”¨ [Traceur](https://github.com/google/traceur-compiler#readme) è½¬è¯‘ä¸º ES5
- [`ts-loader`](https://github.com/TypeStrong/ts-loader) æˆ– [`awesome-typescript-loader`](https://github.com/s-panferov/awesome-typescript-loader) åƒ JavaScript ä¸€æ ·åŠ è½½ [TypeScript](https://www.typescriptlang.org/) 2.0+
- [`coffee-loader`](/loaders/coffee-loader) åƒ JavaScript ä¸€æ ·åŠ è½½ [CoffeeScript](http://coffeescript.org/)
- [`fengari-loader`](https://github.com/fengari-lua/fengari-loader/) ä½¿ç”¨ [fengari](https://fengari.io/) åŠ è½½ Lua ä»£ç 


## æ¨¡æ¿(templating)

- [`html-loader`](/loaders/html-loader) å¯¼å‡º HTML ä¸ºå­—ç¬¦ä¸²ï¼Œéœ€è¦å¼•ç”¨é™æ€èµ„æº
- [`pug-loader`](https://github.com/pugjs/pug-loader) åŠ è½½ Pug æ¨¡æ¿å¹¶è¿”å›ä¸€ä¸ªå‡½æ•°
- [`markdown-loader`](https://github.com/peerigon/markdown-loader) å°† Markdown è½¬è¯‘ä¸º HTML
- [`react-markdown-loader`](https://github.com/javiercf/react-markdown-loader) ä½¿ç”¨ markdown-parse parser(è§£æå™¨) å°† Markdown ç¼–è¯‘ä¸º React ç»„ä»¶
- [`posthtml-loader`](https://github.com/posthtml/posthtml-loader) ä½¿ç”¨ [PostHTML](https://github.com/posthtml/posthtml) åŠ è½½å¹¶è½¬æ¢ HTML æ–‡ä»¶
- [`handlebars-loader`](https://github.com/pcardune/handlebars-loader) å°† Handlebars è½¬ç§»ä¸º HTML
- [`markup-inline-loader`](https://github.com/asnowwolf/markup-inline-loader) å°†å†…è”çš„ SVG/MathML æ–‡ä»¶è½¬æ¢ä¸º HTMLã€‚åœ¨åº”ç”¨äºå›¾æ ‡å­—ä½“ï¼Œæˆ–å°† CSS åŠ¨ç”»åº”ç”¨äº SVG æ—¶éå¸¸æœ‰ç”¨ã€‚
- [`twig-loader`](https://github.com/zimmo-be/twig-loader) ç¼–è¯‘ Twig æ¨¡æ¿ï¼Œç„¶åè¿”å›ä¸€ä¸ªå‡½æ•°

## æ ·å¼

- [`style-loader`](/loaders/style-loader) å°†æ¨¡å—çš„å¯¼å‡ºä½œä¸ºæ ·å¼æ·»åŠ åˆ° DOM ä¸­
- [`css-loader`](/loaders/css-loader) è§£æ CSS æ–‡ä»¶åï¼Œä½¿ç”¨ import åŠ è½½ï¼Œå¹¶ä¸”è¿”å› CSS ä»£ç 
- [`less-loader`](/loaders/less-loader) åŠ è½½å’Œè½¬è¯‘ LESS æ–‡ä»¶
- [`sass-loader`](/loaders/sass-loader) åŠ è½½å’Œè½¬è¯‘ SASS/SCSS æ–‡ä»¶
- [`postcss-loader`](/loaders/postcss-loader) ä½¿ç”¨ [PostCSS](http://postcss.org) åŠ è½½å’Œè½¬è¯‘ CSS/SSS æ–‡ä»¶
- [`stylus-loader`](https://github.com/shama/stylus-loader) åŠ è½½å’Œè½¬è¯‘ Stylus æ–‡ä»¶


## ä»£ç æ£€æŸ¥å’Œæµ‹è¯•(linting && testing)

- [`mocha-loader`](/loaders/mocha-loader) ä½¿ç”¨ [mocha](https://mochajs.org/) æµ‹è¯•ï¼ˆæµè§ˆå™¨/NodeJSï¼‰
- [`eslint-loader`](https://github.com/webpack-contrib/eslint-loader) PreLoaderï¼Œä½¿ç”¨ [ESLint](https://eslint.org/) æ¸…ç†ä»£ç 
- [`jshint-loader`](/loaders/jshint-loader) PreLoaderï¼Œä½¿ç”¨ [JSHint](http://jshint.com/about/) æ¸…ç†ä»£ç 
- [`jscs-loader`](https://github.com/unindented/jscs-loader) PreLoaderï¼Œä½¿ç”¨ [JSCS](http://jscs.info/) æ£€æŸ¥ä»£ç æ ·å¼
- [`coverjs-loader`](/loaders/coverjs-loader) PreLoaderï¼Œä½¿ç”¨ [CoverJS](https://github.com/arian/CoverJS) ç¡®å®šæµ‹è¯•è¦†ç›–ç‡


## æ¡†æ¶(frameworks)

- [`vue-loader`](https://github.com/vuejs/vue-loader) åŠ è½½å’Œè½¬è¯‘ [Vue ç»„ä»¶](https://vuejs.org/v2/guide/components.html)
- [`polymer-loader`](https://github.com/webpack-contrib/polymer-webpack-loader) ä½¿ç”¨é€‰æ‹©é¢„å¤„ç†å™¨(preprocessor)å¤„ç†ï¼Œå¹¶ä¸” `require()` ç±»ä¼¼ä¸€ç­‰æ¨¡å—(first-class)çš„ Web ç»„ä»¶
- [`angular2-template-loader`](https://github.com/TheLarkInn/angular2-template-loader) åŠ è½½å’Œè½¬è¯‘ [Angular](https://angular.io/) ç»„ä»¶


![Awesome](../assets/awesome-badge.svg)
æ›´å¤šç¬¬ä¸‰æ–¹ loaderï¼ŒæŸ¥çœ‹ [awesome-webpack](https://github.com/webpack-contrib/awesome-webpack#loaders) åˆ—è¡¨ã€‚


# babel-loader

---
title: babel-loader
source: https://raw.githubusercontent.com/babel/babel-loader/master/README.md
edit: https://github.com/babel/babel-loader/edit/master/README.md
repo: https://github.com/babel/babel-loader
---



æ­¤ package å…è®¸ä½ ä½¿ç”¨ [Babel](https://github.com/babel/babel) å’Œ [webpack](https://github.com/webpack/webpack) è½¬è¯‘ `JavaScript` æ–‡ä»¶ã€‚

**æ³¨æ„**ï¼šè¯·åœ¨ Babel [Issues](https://github.com/babel/babel/issues) tracker ä¸ŠæŠ¥å‘Šè¾“å‡ºæ—¶é‡åˆ°çš„é—®é¢˜ã€‚

## ä¸­æ–‡æ–‡æ¡£

<a href="https://babel.docschina.org" target="_blank" style="font-size: 24px;">Babel ä¸­æ–‡æ–‡æ¡£</a>

## å®‰è£…

> webpack 4.x | babel-loader 8.x | babel 7.x

```bash
npm install -D babel-loader @babel/core @babel/preset-env webpack
```

## ç”¨æ³•

webpack æ–‡æ¡£ï¼š[loaders](https://webpack.js.org/loaders/)

åœ¨ webpack é…ç½®å¯¹è±¡ä¸­ï¼Œéœ€è¦å°† babel-loader æ·»åŠ åˆ° module åˆ—è¡¨ä¸­ï¼Œå°±åƒä¸‹é¢è¿™æ ·ï¼š

```javascript
module: {
  rules: [
    {
      test: /\.m?js$/,
      exclude: /(node_modules|bower_components)/,
      use: {
        loader: 'babel-loader',
        options: {
          presets: ['@babel/preset-env']
        }
      }
    }
  ]
}
```

## é€‰é¡¹

æŸ¥çœ‹ `babel` [é€‰é¡¹](https://babel.docschina.org/docs/en/options)ã€‚

ä½ å¯ä»¥ä½¿ç”¨ [`options`](https://webpack.js.org/configuration/module/#rule-options-rule-query) å±æ€§ï¼Œæ¥å‘ loader ä¼ é€’ options é€‰é¡¹ï¼š

```javascript
module: {
  rules: [
    {
      test: /\.m?js$/,
      exclude: /(node_modules|bower_components)/,
      use: {
        loader: 'babel-loader',
        options: {
          presets: ['@babel/preset-env'],
          plugins: ['@babel/plugin-proposal-object-rest-spread']
        }
      }
    }
  ]
}
```

æ­¤ loader ä¹Ÿæ”¯æŒä¸‹é¢è¿™äº› loader ç‰¹æœ‰çš„é€‰é¡¹ï¼š

* `cacheDirectory`ï¼šé»˜è®¤å€¼ä¸º `false`ã€‚å½“æœ‰è®¾ç½®æ—¶ï¼ŒæŒ‡å®šçš„ç›®å½•å°†ç”¨æ¥ç¼“å­˜ loader çš„æ‰§è¡Œç»“æœã€‚ä¹‹åçš„ webpack æ„å»ºï¼Œå°†ä¼šå°è¯•è¯»å–ç¼“å­˜ï¼Œæ¥é¿å…åœ¨æ¯æ¬¡æ‰§è¡Œæ—¶ï¼Œå¯èƒ½äº§ç”Ÿçš„ã€é«˜æ€§èƒ½æ¶ˆè€—çš„ Babel é‡æ–°ç¼–è¯‘è¿‡ç¨‹(recompilation process)ã€‚å¦‚æœè®¾ç½®äº†ä¸€ä¸ªç©ºå€¼ (`loader: 'babel-loader?cacheDirectory'`) æˆ–è€… `true` (`loader: 'babel-loader?cacheDirectory=true'`)ï¼Œloader å°†ä½¿ç”¨é»˜è®¤çš„ç¼“å­˜ç›®å½• `node_modules/.cache/babel-loader`ï¼Œå¦‚æœåœ¨ä»»ä½•æ ¹ç›®å½•ä¸‹éƒ½æ²¡æœ‰æ‰¾åˆ° `node_modules` ç›®å½•ï¼Œå°†ä¼šé™çº§å›é€€åˆ°æ“ä½œç³»ç»Ÿé»˜è®¤çš„ä¸´æ—¶æ–‡ä»¶ç›®å½•ã€‚

* `cacheIdentifier`ï¼šé»˜è®¤æ˜¯ç”± `@babel/core` ç‰ˆæœ¬å·ï¼Œ`babel-loader` ç‰ˆæœ¬å·ï¼Œ`.babelrc` æ–‡ä»¶å†…å®¹ï¼ˆå­˜åœ¨çš„æƒ…å†µä¸‹ï¼‰ï¼Œç¯å¢ƒå˜é‡ `BABEL_ENV` çš„å€¼ï¼ˆæ²¡æœ‰æ—¶é™çº§åˆ° `NODE_ENV`ï¼‰ç»„æˆçš„ä¸€ä¸ªå­—ç¬¦ä¸²ã€‚å¯ä»¥è®¾ç½®ä¸ºä¸€ä¸ªè‡ªå®šä¹‰çš„å€¼ï¼Œåœ¨ identifier æ”¹å˜åï¼Œæ¥å¼ºåˆ¶ç¼“å­˜å¤±æ•ˆã€‚

* `cacheCompression`ï¼šé»˜è®¤å€¼ä¸º `true`ã€‚å½“è®¾ç½®æ­¤å€¼æ—¶ï¼Œä¼šä½¿ç”¨ Gzip å‹ç¼©æ¯ä¸ª Babel transform è¾“å‡ºã€‚å¦‚æœä½ æƒ³è¦é€€å‡ºç¼“å­˜å‹ç¼©ï¼Œå°†å®ƒè®¾ç½®ä¸º `false` -- å¦‚æœä½ çš„é¡¹ç›®ä¸­æœ‰æ•°åƒä¸ªæ–‡ä»¶éœ€è¦å‹ç¼©è½¬è¯‘ï¼Œé‚£ä¹ˆè®¾ç½®æ­¤é€‰é¡¹å¯èƒ½ä¼šä»ä¸­æ”¶ç›Šã€‚

* `customize`: é»˜è®¤å€¼ä¸º `null`ã€‚å¯¼å‡º `custom` å›è°ƒå‡½æ•°çš„æ¨¡å—è·¯å¾„ï¼Œ[ä¾‹å¦‚ä¼ å…¥ `.custom()` çš„ callback å‡½æ•°](#è‡ªå®šä¹‰-loader)ã€‚ç”±äºä½ å¿…é¡»åˆ›å»ºä¸€ä¸ªæ–°æ–‡ä»¶æ‰èƒ½ä½¿ç”¨å®ƒï¼Œå»ºè®®æ”¹ä¸ºä½¿ç”¨ `.custom` æ¥åˆ›å»ºä¸€ä¸ªåŒ…è£… loaderã€‚åªæœ‰åœ¨ä½ _å¿…é¡»_ç»§ç»­ç›´æ¥ä½¿ç”¨ `babel-loader` ä½†åˆæƒ³è‡ªå®šä¹‰çš„æƒ…å†µä¸‹ï¼Œæ‰ä½¿ç”¨è¿™é¡¹é…ç½®ã€‚

## ç–‘éš¾è§£ç­”

### babel-loader å¾ˆæ…¢ï¼

ç¡®ä¿è½¬è¯‘å°½å¯èƒ½å°‘çš„æ–‡ä»¶ã€‚ä½ å¯èƒ½ä½¿ç”¨ `/\.m?js$/` æ¥åŒ¹é…ï¼Œè¿™æ ·ä¹Ÿè®¸ä¼šå»è½¬è¯‘ `node_modules` ç›®å½•æˆ–è€…å…¶ä»–ä¸éœ€è¦çš„æºä»£ç ã€‚

è¦æ’é™¤ `node_modules`ï¼Œå‚è€ƒæ–‡æ¡£ä¸­çš„ `loaders` é…ç½®çš„ `exclude` é€‰é¡¹ã€‚

ä½ ä¹Ÿå¯ä»¥é€šè¿‡ä½¿ç”¨ `cacheDirectory` é€‰é¡¹ï¼Œå°† babel-loader æé€Ÿè‡³å°‘ä¸¤å€ã€‚è¿™ä¼šå°†è½¬è¯‘çš„ç»“æœç¼“å­˜åˆ°æ–‡ä»¶ç³»ç»Ÿä¸­ã€‚

### Babel åœ¨æ¯ä¸ªæ–‡ä»¶éƒ½æ’å…¥äº†è¾…åŠ©ä»£ç ï¼Œä½¿ä»£ç ä½“ç§¯è¿‡å¤§ï¼

Babel å¯¹ä¸€äº›å…¬å…±æ–¹æ³•ä½¿ç”¨äº†éå¸¸å°çš„è¾…åŠ©ä»£ç ï¼Œæ¯”å¦‚ `_extend`ã€‚é»˜è®¤æƒ…å†µä¸‹ä¼šè¢«æ·»åŠ åˆ°æ¯ä¸€ä¸ªéœ€è¦å®ƒçš„æ–‡ä»¶ä¸­

ä½ å¯ä»¥å¼•å…¥ Babel runtime ä½œä¸ºä¸€ä¸ªç‹¬ç«‹æ¨¡å—ï¼Œæ¥é¿å…é‡å¤å¼•å…¥ã€‚

ä¸‹é¢çš„é…ç½®ç¦ç”¨äº† Babel è‡ªåŠ¨å¯¹æ¯ä¸ªæ–‡ä»¶çš„ runtime æ³¨å…¥ï¼Œè€Œæ˜¯å¼•å…¥ `@babel/plugin-transform-runtime` å¹¶ä¸”ä½¿æ‰€æœ‰è¾…åŠ©ä»£ç ä»è¿™é‡Œå¼•ç”¨ã€‚

æ›´å¤šä¿¡æ¯è¯·æŸ¥çœ‹ [æ–‡æ¡£](https://babel.docschina.org/docs/en/babel-plugin-transform-runtime/)ã€‚

**æ³¨æ„**ï¼šä½ å¿…é¡»æ‰§è¡Œ `npm install -D @babel/plugin-transform-runtime` æ¥æŠŠå®ƒåŒ…å«åˆ°ä½ çš„é¡¹ç›®ä¸­ï¼Œç„¶åä½¿ç”¨ `npm install @babel/runtime` æŠŠ `@babel/runtime` å®‰è£…ä¸ºä¸€ä¸ªä¾èµ–ã€‚

```javascript
rules: [
  // 'transform-runtime' æ’ä»¶å‘Šè¯‰ Babel
  // è¦å¼•ç”¨ runtime æ¥ä»£æ›¿æ³¨å…¥ã€‚
  {
    test: /\.m?js$/,
    exclude: /(node_modules|bower_components)/,
    use: {
      loader: 'babel-loader',
      options: {
        presets: ['@babel/preset-env'],
        plugins: ['@babel/plugin-transform-runtime']
      }
    }
  }
]
```

#### **æ³¨æ„**ï¼štransform-runtime å’Œè‡ªå®šä¹‰ polyfills (ä¾‹å¦‚ Promise library)

ç”±äº [@babel/plugin-transform-runtime](https://github.com/babel/babel/tree/master/packages/babel-plugin-transform-runtime) åŒ…å«äº†ä¸€ä¸ª polyfillï¼Œå«æœ‰è‡ªå®šä¹‰çš„ [regenerator-runtime](https://github.com/facebook/regenerator/blob/master/packages/regenerator-runtime/runtime.js) å’Œ [core-js](https://github.com/zloirock/core-js), ä¸‹é¢ä½¿ç”¨ `webpack.ProvidePlugin` æ¥é…ç½® shimming çš„å¸¸ç”¨æ–¹æ³•å°†æ²¡æœ‰ä½œç”¨ï¼š

```javascript
// ...
        new webpack.ProvidePlugin({
            'Promise': 'bluebird'
        }),
// ...
```

ä¸‹é¢è¿™æ ·çš„å†™æ³•ä¹Ÿæ²¡æœ‰ä½œç”¨ï¼š

```javascript
require('@babel/runtime/core-js/promise').default = require('bluebird');

var promise = new Promise;
```

å®ƒå…¶å®ä¼šç”Ÿæˆä¸‹é¢è¿™æ · (ä½¿ç”¨äº† `runtime` å)ï¼š

```javascript
'use strict';

var _Promise = require('@babel/runtime/core-js/promise')['default'];

require('@babel/runtime/core-js/promise')['default'] = require('bluebird');

var promise = new _Promise();
```

å‰é¢çš„ `Promise` library åœ¨è¢«è¦†ç›–å‰å·²ç»è¢«å¼•ç”¨å’Œä½¿ç”¨äº†ã€‚

ä¸€ç§å¯è¡Œçš„åŠæ³•æ˜¯ï¼Œåœ¨ä½ çš„åº”ç”¨ç¨‹åºä¸­åŠ å…¥ä¸€ä¸ªâ€œå¼•å¯¼(bootstrap)â€æ­¥éª¤ï¼Œåœ¨åº”ç”¨ç¨‹åºå¼€å§‹å‰å…ˆè¦†ç›–é»˜è®¤çš„å…¨å±€å˜é‡ã€‚

```javascript
// bootstrap.js

require('@babel/runtime/core-js/promise').default = require('bluebird');

// ...

require('./app');
```

### `babel` çš„ Node.js API å·²ç»è¢«ç§»åˆ° `babel-core` ä¸­ã€‚ï¼ˆåŸæ–‡ï¼šThe Node.js API for `babel` has been moved to `babel-core`.ï¼‰

å¦‚æœä½ æ”¶åˆ°è¿™ä¸ªä¿¡æ¯ï¼Œè¿™è¯´æ˜ä½ æœ‰ä¸€ä¸ªå·²ç»å®‰è£…çš„ `babel` npm packageï¼Œå¹¶ä¸”åœ¨ webpack é…ç½®ä¸­ä½¿ç”¨ loader ç®€å†™æ–¹å¼ï¼ˆåœ¨ webpack 2.x ç‰ˆæœ¬ä¸­å°†ä¸å†æ”¯æŒè¿™ç§æ–¹å¼ï¼‰ã€‚
```javascript
  {
    test: /\.m?js$/,
    loader: 'babel',
  }
```

webpack å°†å°è¯•è¯»å– `babel` package è€Œä¸æ˜¯ `babel-loader`ã€‚

æƒ³è¦ä¿®å¤è¿™ä¸ªé—®é¢˜ï¼Œä½ éœ€è¦å¸è½½ `babel` npm packageï¼Œå› ä¸ºå®ƒåœ¨ Babel v6 ä¸­å·²ç»è¢«åºŸé™¤ã€‚ï¼ˆå®‰è£… `@babel/cli` æˆ–è€… `@babel/core` æ¥æ›¿ä»£å®ƒï¼‰
åœ¨å¦ä¸€ç§åœºæ™¯ä¸­ï¼Œå¦‚æœä½ çš„ä¾èµ–äº `babel` è€Œæ— æ³•åˆ é™¤å®ƒï¼Œå¯ä»¥åœ¨ webpack é…ç½®ä¸­ä½¿ç”¨å®Œæ•´çš„ loader åç§°æ¥è§£å†³ï¼š
```javascript
  {
    test: /\.m?js$/,
    loader: 'babel-loader',
  }
```

## è‡ªå®šä¹‰ loader

`babel-loader` æä¾›äº†ä¸€ä¸ª loader-builder å·¥å…·å‡½æ•°ï¼Œ
å…è®¸ç”¨æˆ·ä¸º Babel å¤„ç†è¿‡çš„æ¯ä¸ªæ–‡ä»¶æ·»åŠ è‡ªå®šä¹‰å¤„ç†é€‰é¡¹ã€‚

`.custom` æ¥æ”¶ä¸€ä¸ª callback å‡½æ•°ï¼Œ
å®ƒå°†è¢«è°ƒç”¨ï¼Œå¹¶ä¼ å…¥ loader ä¸­çš„ `babel` å®ä¾‹ï¼Œ
å› æ­¤ï¼Œæ­¤å·¥å…·å‡½æ•°æ‰èƒ½å¤Ÿå®Œå…¨ç¡®ä¿å®ƒä½¿ç”¨ä¸ loader çš„ `@babel/core` ç›¸åŒçš„å®ä¾‹ã€‚

å¦‚æœä½ æƒ³è‡ªå®šä¹‰ï¼Œä½†å®é™…ä¸ŠæŸä¸ªæ–‡ä»¶åˆä¸æƒ³è°ƒç”¨ `.custom`ï¼Œ
å¯ä»¥å‘ `customize` é€‰é¡¹ä¼ å…¥ä¸€ä¸ªå­—ç¬¦ä¸²ï¼Œ
æ­¤å­—ç¬¦ä¸²æŒ‡å‘ä¸€ä¸ªå¯¼å‡º `custom` å›è°ƒå‡½æ•°çš„æ–‡ä»¶ã€‚

### ç¤ºä¾‹

```js
// ä» "./my-custom-loader.js" ä¸­å¯¼å‡ºï¼Œæˆ–è€…ä»»ä½•ä½ æƒ³è¦çš„æ–‡ä»¶ä¸­å¯¼å‡ºã€‚
module.exports = require("babel-loader").custom(babel => {
  function myPlugin() {
    return {
      visitor: {},
    };
  }

  return {
    // ä¼ ç»™ loader çš„é€‰é¡¹ã€‚
    customOptions({ opt1, opt2, ...loader }) {
      return {
        // è·å– loader å¯èƒ½ä¼šæœ‰çš„è‡ªå®šä¹‰é€‰é¡¹
        custom: { opt1, opt2 },

        // ä¼ å…¥"ç§»é™¤äº†ä¸¤ä¸ªè‡ªå®šä¹‰é€‰é¡¹"åçš„é€‰é¡¹
        loader,
      };
    },

    // æä¾› Babel çš„ 'PartialConfig' å¯¹è±¡
    config(cfg) {
      if (cfg.hasFilesystemConfig()) {
        // ä½¿ç”¨æ­£å¸¸çš„é…ç½®
        return cfg.options;
      }

      return {
        ...cfg.options,
        plugins: [
          ...(cfg.options.plugins || []),

          // åœ¨é€‰é¡¹ä¸­åŒ…å«è‡ªå®šä¹‰ plugin
          myPlugin,
        ],
      };
    },

    result(result) {
      return {
        ...result,
        code: result.code + "\n// Generated by some custom loader",
      };
    },
  };
});
```

```js
// ç„¶åï¼Œåœ¨ä½ çš„ webpack config æ–‡ä»¶ä¸­
module.exports = {
  // ..
  module: {
    rules: [{
      // ...
      loader: path.join(__dirname, 'my-custom-loader.js'),
      // ...
    }]
  }
};
```

### `customOptions(options: Object): { custom: Object, loader: Object }`

æŒ‡å®šçš„ loader çš„é€‰é¡¹ï¼Œ
ä» `babel-loader` é€‰é¡¹ä¸­åˆ†ç¦»å‡ºè‡ªå®šä¹‰é€‰é¡¹ã€‚


### `config(cfg: PartialConfig): Object`

æŒ‡å®šçš„ Babel çš„ `PartialConfig` å¯¹è±¡ï¼Œ
è¿”å›åº”è¯¥è¢«ä¼ é€’ç»™ `babel.transform` çš„ `option` å¯¹è±¡ã€‚


### `result(result: Result): Result`

æŒ‡å®šçš„ Babel ç»“æœå¯¹è±¡ï¼Œå…è®¸ loaders å¯¹å®ƒè¿›è¡Œé¢å¤–çš„è°ƒæ•´ã€‚


## License
[MIT](https://couto.mit-license.org/)





# sass-loader
https://github.com/docschina/webpack.js.org/tree/cn/src/content/loaders/sass-loader.md
https://www.webpackjs.com/loaders/sass-loader/

---
title: sass-loader
source: https://raw.githubusercontent.com/webpack-contrib/sass-loader/master/README.md
edit: https://github.com/webpack-contrib/sass-loader/edit/master/README.md
repo: https://github.com/webpack-contrib/sass-loader
---
Loads a Sass/SCSS file and compiles it to CSS.

Use the [css-loader](/loaders/css-loader/) or the [raw-loader](/loaders/raw-loader/) to turn it into a JS module and the [mini-css-extract-plugin](/plugins/mini-css-extract-plugin/) to extract it into a separate file.
Looking for the webpack 1 loader? Check out the [archive/webpack-1 branch](https://github.com/webpack-contrib/sass-loader/tree/archive/webpack-1).

## å®‰è£…

```bash
npm install sass-loader node-sass webpack --save-dev
```

[webpack](https://github.com/webpack) æ˜¯ sass-loader çš„ [`peerDependency`](https://docs.npmjs.com/files/package.json#peerdependencies)ï¼Œ
å¹¶ä¸”è¿˜éœ€è¦ä½ é¢„å…ˆå®‰è£…
[Node Sass](https://github.com/sass/node-sass) æˆ– [Dart Sass](https://github.com/sass/dart-sass)ã€‚
è¿™å¯ä»¥æ§åˆ¶æ‰€æœ‰ä¾èµ–çš„ç‰ˆæœ¬ï¼Œ
å¹¶é€‰æ‹©è¦ä½¿ç”¨çš„ Sass å®ç°ã€‚

[Node Sass]ï¼šhttps://github.com/sass/node-sass
[Dart Sass]ï¼šhttp://sass-lang.com/dart-sass

## ç¤ºä¾‹

é€šè¿‡å°† [style-loader](https://github.com/webpack-contrib/style-loader) å’Œ [css-loader](https://github.com/webpack-contrib/css-loader) ä¸ sass-loader é“¾å¼è°ƒç”¨ï¼Œå¯ä»¥ç«‹åˆ»å°†æ ·å¼ä½œç”¨åœ¨ DOM å…ƒç´ ã€‚

```bash
npm install style-loader css-loader --save-dev
```

```js
// webpack.config.js
module.exports = {
	...
    module: {
        rules: [{
            test: /\.scss$/,
            use: [
                "style-loader", // å°† JS å­—ç¬¦ä¸²ç”Ÿæˆä¸º style èŠ‚ç‚¹
                "css-loader", //  å°† CSS è½¬åŒ–æˆ CommonJS æ¨¡å—
                "sass-loader" // å°† Sass ç¼–è¯‘æˆ CSSï¼Œé»˜è®¤ä½¿ç”¨ Node Sass
            ]
        }]
    }
};
```

ä¹Ÿå¯ä»¥ç›´æ¥å°†é€‰é¡¹ä¼ é€’ç»™ [Node Sass][] æˆ– [Dart Sass][]ï¼š

```js
// webpack.config.js
module.exports = {
  ...
  module: {
    rules: [{
      test: /\.scss$/,
      use: [{
        loader: "style-loader"
      }, {
        loader: "css-loader"
      }, {
        loader: "sass-loader",
        options: {
          includePaths: ["absolute/path/a", "absolute/path/b"]
        }
      }]
    }]
  }
};
```

æ›´å¤š Sass å¯ç”¨é€‰é¡¹ï¼ŒæŸ¥çœ‹ [Node Sass æ–‡æ¡£](https://github.com/sass/node-sass/blob/master/README.md#options) for all available Sass options.

By default the loader resolve the implementation based on your dependencies.
Just add required implementation to `package.json`
(`node-sass` or `sass` package) and install dependencies.

Example where the `sass-loader` loader uses the `sass` (`dart-sass`) implementation:

**package.json**

```json
{
   "devDependencies": {
      "sass-loader": "*",
      "sass": "*"
   }
}
```

Example where the `sass-loader` loader uses the `node-sass` implementation:

**package.json**

```json
{
   "devDependencies": {
      "sass-loader": "*",
      "node-sass": "*"
   }
}
```

Beware the situation
when `node-sass` and `sass` was installed, by default the `sass-loader`
prefers `node-sass`, to avoid this situation use the `implementation` option.

The special `implementation` option determines which implementation of Sass to
use. It takes either a [Node Sass][] or a [Dart Sass][] module. For example, to
use Dart Sass, you'd pass:

```js
// ...
    {
        loader: "sass-loader",
        options: {
            implementation: require("sass")
        }
    }
// ...
```

Note that when using Dart Sass, **synchronous compilation is twice as fast as
asynchronous compilation** by default, due to the overhead of asynchronous
callbacks. To avoid this overhead, you can use the
[`fibers`](https://www.npmjs.com/package/fibers) package to call asynchronous
importers from the synchronous code path. To enable this, pass the `Fiber` class
to the `fiber` option:

```js
// webpack.config.js
const Fiber = require('fibers');

module.exports = {
    ...
    module: {
        rules: [{
            test: /\.scss$/,
            use: [{
                loader: "style-loader"
            }, {
                loader: "css-loader"
            }, {
                loader: "sass-loader",
                options: {
                    implementation: require("sass"),
                    fiber: Fiber
                }
            }]
        }]
    }
};
```

é€šå¸¸ï¼Œç”Ÿäº§ç¯å¢ƒä¸‹æ¯”è¾ƒæ¨èçš„åšæ³•æ˜¯ï¼Œä½¿ç”¨ [mini-css-extract-plugin](/plugins/mini-css-extract-plugin/) å°†æ ·å¼è¡¨æŠ½ç¦»æˆä¸“é—¨çš„å•ç‹¬æ–‡ä»¶ã€‚è¿™æ ·ï¼Œæ ·å¼è¡¨å°†ä¸å†ä¾èµ–äº JavaScriptï¼š

```js
const MiniCssExtractPlugin = require("mini-css-extract-plugin");

module.exports = {
	...
    module: {
        rules: [{
            test: /\.scss$/,
            use: [
                // fallback to style-loader in development
                process.env.NODE_ENV !== 'production' ? 'style-loader' : MiniCssExtractPlugin.loader,
                "css-loader",
                "sass-loader"
            ]
        }]
    },
    plugins: [
        new MiniCssExtractPlugin({
            // Options similar to the same options in webpackOptions.output
            // both options are optional
            filename: "[name].css",
            chunkFilename: "[id].css"
        })
    ]
};
```

## ç”¨æ³•

### å¯¼å…¥(import)

webpack æä¾›ä¸€ç§[è§£ææ–‡ä»¶çš„é«˜çº§çš„æœºåˆ¶](https://webpack.js.org/concepts/module-resolution/)ã€‚sass-loader ä½¿ç”¨ Sass çš„ custom importer ç‰¹æ€§ï¼Œå°†æ‰€æœ‰çš„ query ä¼ é€’ç»™ webpack çš„è§£æå¼•æ“(resolving engine)ã€‚åªè¦å®ƒä»¬å‰é¢åŠ ä¸Š `~`ï¼Œå‘Šè¯‰ webpack å®ƒä¸æ˜¯ä¸€ä¸ªç›¸å¯¹è·¯å¾„ï¼Œè¿™æ ·å°±å¯ä»¥ import å¯¼å…¥ `node_modules` ç›®å½•é‡Œé¢çš„ sass æ¨¡å—ï¼š

```css
@import "~bootstrap/dist/css/bootstrap";
```

é‡è¦çš„æ˜¯ï¼Œåªåœ¨å‰é¢åŠ ä¸Š `~`ï¼Œå› ä¸º `~/` ä¼šè§£æåˆ°ä¸»ç›®å½•(home directory)ã€‚webpack éœ€è¦åŒºåˆ† `bootstrap` å’Œ `~bootstrap`ï¼Œå› ä¸º CSS å’Œ Sass æ–‡ä»¶æ²¡æœ‰ç”¨äºå¯¼å…¥ç›¸å…³æ–‡ä»¶çš„ç‰¹æ®Šè¯­æ³•ã€‚`@import "file"` ä¸ `@import "./file";` è¿™ä¸¤ç§å†™æ³•æ˜¯ç›¸åŒçš„

### `url(...)` çš„é—®é¢˜

ç”±äº Sass/[libsass](https://github.com/sass/libsass) å¹¶æ²¡æœ‰æä¾›[url rewriting](https://github.com/sass/libsass/issues/532) çš„åŠŸèƒ½ï¼Œæ‰€ä»¥æ‰€æœ‰çš„é“¾æ¥èµ„æºéƒ½æ˜¯ç›¸å¯¹è¾“å‡ºæ–‡ä»¶(output)è€Œè¨€ã€‚

- å¦‚æœç”Ÿæˆçš„ CSS æ²¡æœ‰ä¼ é€’ç»™ css-loaderï¼Œå®ƒç›¸å¯¹äºç½‘ç«™çš„æ ¹ç›®å½•ã€‚
- å¦‚æœç”Ÿæˆçš„ CSS ä¼ é€’ç»™äº† css-loaderï¼Œåˆ™æ‰€æœ‰çš„ url éƒ½ç›¸å¯¹äºå…¥å£æ–‡ä»¶ï¼ˆä¾‹å¦‚ï¼š`main.scss`ï¼‰ã€‚

ç¬¬äºŒç§æƒ…å†µå¯èƒ½ä¼šå¸¦æ¥ä¸€äº›é—®é¢˜ã€‚æ­£å¸¸æƒ…å†µä¸‹æˆ‘ä»¬æœŸæœ›ç›¸å¯¹è·¯å¾„çš„å¼•ç”¨æ˜¯ç›¸å¯¹äº `.scss` å»è§£æï¼ˆå¦‚åŒåœ¨ `.css` æ–‡ä»¶ä¸€æ ·ï¼‰ã€‚å¹¸è¿çš„æ˜¯ï¼Œæœ‰2ä¸ªæ–¹æ³•å¯ä»¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼š

- å°† [resolve-url-loader](https://github.com/bholloway/resolve-url-loader)  è®¾ç½®äº loader é“¾ä¸­çš„ sass-loader ä¹‹å‰ï¼Œå°±å¯ä»¥é‡å†™ urlã€‚
- Library ä½œè€…ä¸€èˆ¬éƒ½ä¼šæä¾›å˜é‡ï¼Œç”¨æ¥è®¾ç½®èµ„æºè·¯å¾„ï¼Œå¦‚ [bootstrap-sass](https://github.com/twbs/bootstrap-sass)  å¯ä»¥é€šè¿‡ `$icon-font-path` æ¥è®¾ç½®ã€‚å‚è§[this working bootstrap example](https://github.com/webpack-contrib/sass-loader/tree/master/test/bootstrapSass)ã€‚

### æå–æ ·å¼è¡¨

ä½¿ç”¨ webpack æ‰“åŒ… CSS æœ‰è®¸å¤šä¼˜ç‚¹ï¼Œåœ¨å¼€å‘ç¯å¢ƒï¼Œå¯ä»¥é€šè¿‡ hashed urls æˆ– [æ¨¡å—çƒ­æ›¿æ¢(HMR)](https://webpack.js.org/concepts/hot-module-replacement/) å¼•ç”¨å›¾ç‰‡å’Œå­—ä½“èµ„æºã€‚è€Œåœ¨çº¿ä¸Šç¯å¢ƒï¼Œä½¿æ ·å¼ä¾èµ– JS æ‰§è¡Œç¯å¢ƒå¹¶ä¸æ˜¯ä¸€ä¸ªå¥½çš„å®è·µã€‚æ¸²æŸ“ä¼šè¢«æ¨è¿Ÿï¼Œç”šè‡³ä¼šå‡ºç° [FOUC](https://en.wikipedia.org/wiki/Flash_of_unstyled_content)ï¼Œå› æ­¤åœ¨æœ€ç»ˆçº¿ä¸Šç¯å¢ƒæ„å»ºæ—¶ï¼Œæœ€å¥½è¿˜æ˜¯èƒ½å¤Ÿå°† CSS æ”¾åœ¨å•ç‹¬çš„æ–‡ä»¶ä¸­ã€‚

ä» bundle ä¸­æå–æ ·å¼è¡¨ï¼Œæœ‰2ç§å¯ç”¨çš„æ–¹æ³•ï¼š

- [extract-loader](https://github.com/peerigon/extract-loader) ï¼ˆç®€å•ï¼Œä¸“é—¨é’ˆå¯¹ css-loader çš„è¾“å‡ºï¼‰
- [mini-css-extract-plugin](/plugins/mini-css-extract-plugin/) (use this, when using webpack 4 configuration. Works in all use-cases)

### Source maps

è¦å¯ç”¨ CSS source mapï¼Œéœ€è¦å°† `sourceMap` é€‰é¡¹ä½œä¸ºå‚æ•°ï¼Œä¼ é€’ç»™ *sass-loader* å’Œ *css-loader*ã€‚æ­¤æ—¶`webpack.config.js`  å¦‚ä¸‹ï¼š

```javascript
module.exports = {
    ...
    devtool: "source-map", // any "source-map"-like devtool is possible
    module: {
        rules: [{
            test: /\.scss$/,
            use: [{
                loader: "style-loader", options: {
                    sourceMap: true
                }
            }, {
                loader: "css-loader", options: {
                    sourceMap: true
                }
            }, {
                loader: "sass-loader", options: {
                    sourceMap: true
                }
            }]
        }]
    }
};
```

å¦‚æœä½ è¦åœ¨ Chrome ä¸­ç¼–è¾‘åŸå§‹çš„ Sass æ–‡ä»¶ï¼Œå»ºè®®é˜…è¯»[è¿™ç¯‡ä¸é”™çš„åšå®¢æ–‡ç« ](https://medium.com/@toolmantim/getting-started-with-css-sourcemaps-and-in-browser-sass-editing-b4daab987fb0)ã€‚å…·ä½“ç¤ºä¾‹å‚è€ƒ [test/sourceMap](https://github.com/webpack-contrib/sass-loader/tree/master/test) ã€‚

###  ç¯å¢ƒå˜é‡

å¦‚æœä½ è¦å°† Sass ä»£ç æ”¾åœ¨å®é™…çš„å…¥å£æ–‡ä»¶(entry file)ä¹‹å‰ï¼Œå¯ä»¥è®¾ç½® `data` é€‰é¡¹ã€‚æ­¤æ—¶ sass-loader ä¸ä¼šè¦†ç›– `data` é€‰é¡¹ï¼Œåªä¼šå°†å®ƒæ‹¼æ¥åœ¨å…¥å£æ–‡ä»¶çš„å†…å®¹ä¹‹å‰ã€‚å½“ Sass å˜é‡ä¾èµ–äºç¯å¢ƒæ—¶ï¼Œè¿™ä¸€ç‚¹å°¤å…¶æœ‰ç”¨ã€‚

```javascript
{
    loader: "sass-loader",
    options: {
        data: "$env: " + process.env.NODE_ENV + ";"
    }
}
```

The `data` option supports `Function` notation:

```javascript
{
    loader: "sass-loader",
    options: {
        data: (loaderContext) => {
          // More information about avalaible options https://webpack.js.org/api/loaders/
          const { resourcePath, rootContext } = loaderContext;
          const relativePath = path.relative(rootContext,resourcePath);

          if (relativePath === "styles/foo.scss") {
             return "$value: 100px;"
          }

          return "$value: 200px;"
        }
    }
}
```

**æ³¨æ„ï¼š**ç”±äºä»£ç æ³¨å…¥, ä¼šç ´åæ•´ä¸ªå…¥å£æ–‡ä»¶çš„ source mapã€‚ é€šå¸¸ä¸€ä¸ªç®€å•çš„è§£å†³æ–¹æ¡ˆæ˜¯ï¼Œå¤šä¸ª Sass æ–‡ä»¶å…¥å£ã€‚

## ç»´æŠ¤äººå‘˜

<table>
    <tr>
      <td align="center">
        <a href="https://github.com/jhnns"><img width="150" height="150" src="https://avatars0.githubusercontent.com/u/781746?v=3"></a><br>
        <a href="https://github.com/jhnns">Johannes Ewald</a>
      </td>
      <td align="center">
        <a href="https://github.com/webpack-contrib"><img width="150" height="150" src="https://avatars1.githubusercontent.com/u/1243901?v=3&s=460"></a><br>
        <a href="https://github.com/webpack-contrib">Jorik Tangelder</a>
      </td>
      <td align="center">
        <a href="https://github.com/akiran"><img width="150" height="150" src="https://avatars1.githubusercontent.com/u/3403295?v=3"></a><br>
        <a href="https://github.com/akiran">Kiran</a>
      </td>
    <tr>
</table>


## License

[MIT](http://www.opensource.org/licenses/mit-license.php)

[npm]: https://img.shields.io/npm/v/sass-loader.svg
[npm-stats]: https://img.shields.io/npm/dm/sass-loader.svg
[npm-url]: https://npmjs.com/package/sass-loader

[node]: https://img.shields.io/node/v/sass-loader.svg
[node-url]: https://nodejs.org

[deps]: https://david-dm.org/webpack-contrib/sass-loader.svg
[deps-url]: https://david-dm.org/webpack-contrib/sass-loader

[travis]: http://img.shields.io/travis/webpack-contrib/sass-loader.svg
[travis-url]: https://travis-ci.org/webpack-contrib/sass-loader

[appveyor-url]: https://ci.appveyor.com/project/webpack-contrib/sass-loader/branch/master
[appveyor]: https://ci.appveyor.com/api/projects/status/rqpy1vaovh20ttxs/branch/master?svg=true

[cover]: https://codecov.io/gh/webpack-contrib/sass-loader/branch/master/graph/badge.svg
[cover-url]: https://codecov.io/gh/webpack-contrib/sass-loader

[chat]: https://badges.gitter.im/webpack/webpack.svg
[chat-url]: https://gitter.im/webpack/webpack






# webpackåŸºç¡€ ä¼˜åŒ–æ‰“åŒ…å‘å¸ƒ å»æ‰#å· é¡µé¢ç©ºç™½é—®é¢˜

package.json ä¹Ÿæ˜¯ npm çš„é…ç½®ä¿¡æ¯æ–‡ä»¶ï¼Œå»ºè®®äº†è§£ä¸€äº› npm è„šæœ¬åŸºç¡€ã€‚å¦‚ scripts ä¸­é…ç½®çš„æ˜¯å‘½ä»¤ï¼Œé€šè¿‡ npm run æ‰§è¡Œè„šæœ¬å‘½ä»¤æ—¶ï¼Œä¼šæ–°å»ºä¸€ä¸ª shell æ¥æ‰§è¡Œè¿™é‡Œé…ç½®çš„å‘½ä»¤ï¼Œæ‰€ä»¥åªè¦ç³»ç»Ÿè®¤è¯†çš„å‘½ä»¤éƒ½å¯ä»¥åœ¨è¿™é…ç½®ã€‚å¦å¤– npm æä¾›äº† pre & post é’©å­æœºåˆ¶ï¼Œå¦‚ npm run build æ‰§è¡Œæ—¶ï¼Œç®€å†™æˆ npm buildï¼Œå®ƒå¯ä»¥æŒ‰é¡ºåºè°ƒç”¨ä»¥ä¸‹ä¸‰ä¸ªè„šæœ¬ï¼š

	"prebuild": "echo I run before the build script",
	"build": "cross-env NODE_ENV=production webpack",
	"postbuild": "echo I run after the build script"

ä½¿ç”¨é’©å­å¯ä»¥ç”¨æ¥åšä¸€äº›å‰æœŸæˆ–åæœŸåŠ¨ä½œï¼Œå¦‚æ¸…ç†å·¥ä½œï¼Œåƒ clean-webpack-plugin è¿™ç§æ’ä»¶å°±æ˜¯ä¸€è¡Œè„šæœ¬é…ç½®çš„äº‹ã€‚æ¸…ç†è„šæœ¬ä¹Ÿå¯ä»¥è¿™æ ·å†™è„šæœ¬ï¼š

	"clean": "rimraf ./dist && mkdir dist",
	"prebuild": "npm run clean",
	"build": "cross-env NODE_ENV=production webpack"

å¦‚æœè„šæœ¬ä¸­éœ€è¦æ‰§è¡Œå¤šç»„å‘½ä»¤ï¼Œ& å¯ä»¥ç”¨æ¥è¿æ¥å‘½ä»¤ï¼Œå†™æˆ a & bï¼Œå®ƒä¼šæŒ‰å‰åé¡ºåºè¿è¡Œå‘½ä»¤ a å’Œ bã€‚è€Œ a && b åˆ™ä¼šåœ¨ a å‘½ä»¤æˆåŠŸåæ‰æ‰§è¡Œ b å‘½ä»¤ã€‚npm è„šæœ¬æœ‰ä¸€ä¸ªéå¸¸å¼ºå¤§çš„åŠŸèƒ½ï¼Œå°±æ˜¯å¯ä»¥ä½¿ç”¨ npm çš„å†…éƒ¨å˜é‡ã€‚ é€šè¿‡ç¯å¢ƒå˜é‡process.envå¯¹è±¡ï¼Œæ‹¿åˆ°package.jsoné…ç½®ä¿¡æ¯ï¼Œå†é€šè¿‡npm_package_å‰ç¼€å¯ä»¥è·å–é…ç½®æ–‡ä»¶å†…çš„é…ç½®é¡¹ï¼Œå¦‚è„šæœ¬ä¸­è¯»å– name & version ç­‰ä¿¡æ¯ï¼š

	console.log(process.env.npm_package_name);
	console.log(process.env.npm_package_version);
	console.log(process.env.npm_package_scripts_build);

ä»¥ä¸‹æ˜¯å¸¸ç”¨è„šæœ¬ï¼Œå‚è€ƒï¼š
http://www.ruanyifeng.com/blog/2016/10/npm_scripts.html

    "prebuild": "del /Q dist\\*",
	"clean": "rimraf dist/*", // åˆ é™¤ç›®å½•
	"clean": "rimraf dist/*", // åˆ é™¤ç›®å½•
	"serve": "http-server -p 9090 dist/", // æœ¬åœ°æ­å»ºä¸€ä¸ª HTTP æœåŠ¡
	"open:dev": "opener http://localhost:9090", // æ‰“å¼€æµè§ˆå™¨
	"livereload": "live-reload --port 9091 dist/", // å®æ—¶åˆ·æ–°
	"build:html": "jade index.jade > dist/index.html", // æ„å»º HTML æ–‡ä»¶
	"watch:css": "watch 'npm run build:css' assets/styles/", // åªè¦ CSS æ–‡ä»¶æœ‰å˜åŠ¨ï¼Œå°±é‡æ–°æ‰§è¡Œæ„å»º
	"watch:html": "watch 'npm run build:html' assets/html", // åªè¦ HTML æ–‡ä»¶æœ‰å˜åŠ¨ï¼Œå°±é‡æ–°æ‰§è¡Œæ„å»º
	"deploy:prod": "s3-cli sync ./dist/ s3://example-com/prod-site/", // éƒ¨ç½²åˆ° Amazon S3
	"build:favicon": "node scripts/favicon.js", // æ„å»º favicon


webpackæä¾›ä¸¤ä¸ªå·¥å…·å¤„ç†æ ·å¼è¡¨ï¼Œcss-loader å’Œ style-loaderï¼ŒäºŒè€…å¤„ç†çš„ä»»åŠ¡ä¸åŒï¼Œcss-loaderä½¿ä½ èƒ½å¤Ÿä½¿ç”¨ç±»ä¼¼@import å’Œ url(...)çš„æ–¹æ³•å®ç°require()çš„åŠŸèƒ½,style-loaderå°†æ‰€æœ‰çš„è®¡ç®—åçš„æ ·å¼åŠ å…¥é¡µé¢ä¸­ï¼ŒäºŒè€…ç»„åˆåœ¨ä¸€èµ·ä½¿ä½ èƒ½å¤ŸæŠŠæ ·å¼è¡¨åµŒå…¥webpackæ‰“åŒ…åçš„JSæ–‡ä»¶ä¸­ï¼Œå®‰è£…å‘½ä»¤ï¼š

	npm install --save-dev style-loader css-loader

CSS modules çš„æŠ€æœ¯å°±æ„åœ¨æŠŠJSçš„æ¨¡å—åŒ–æ€æƒ³å¸¦å…¥CSSä¸­æ¥ï¼Œé€šè¿‡CSSæ¨¡å—ï¼Œæ‰€æœ‰çš„ç±»åï¼ŒåŠ¨ç”»åé»˜è®¤éƒ½åªä½œç”¨äºå½“å‰æ¨¡å—ã€‚Webpackä»ä¸€å¼€å§‹å°±å¯¹CSSæ¨¡å—åŒ–æä¾›äº†æ”¯æŒï¼Œåœ¨CSS loaderä¸­è¿›è¡Œé…ç½®åï¼Œä½ æ‰€éœ€è¦åšçš„ä¸€åˆ‡å°±æ˜¯æŠŠâ€modulesâ€œä¼ é€’éƒ½æ‰€éœ€è¦çš„åœ°æ–¹ï¼Œç„¶åå°±å¯ä»¥ç›´æ¥æŠŠCSSçš„ç±»åä¼ é€’åˆ°ç»„ä»¶çš„ä»£ç ä¸­ï¼Œä¸”è¿™æ ·åšåªå¯¹å½“å‰ç»„ä»¶æœ‰æ•ˆï¼Œä¸å¿…æ‹…å¿ƒåœ¨ä¸åŒçš„æ¨¡å—ä¸­å…·æœ‰ç›¸åŒçš„ç±»åå¯èƒ½ä¼šé€ æˆçš„é—®é¢˜ã€‚

æ’ä»¶ï¼ˆPluginsï¼‰æ˜¯ç”¨æ¥æ‹“å±•WebpackåŠŸèƒ½çš„ï¼Œå®ƒä»¬ä¼šåœ¨æ•´ä¸ªæ„å»ºè¿‡ç¨‹ä¸­ç”Ÿæ•ˆï¼Œæ‰§è¡Œç›¸å…³çš„ä»»åŠ¡ã€‚Loaderså’ŒPluginså¸¸å¸¸è¢«å¼„æ··ï¼Œä½†æ˜¯ä»–ä»¬å…¶å®æ˜¯å®Œå…¨ä¸åŒçš„ä¸œè¥¿ï¼Œå¯ä»¥è¿™ä¹ˆæ¥è¯´ï¼Œloadersæ˜¯åœ¨æ‰“åŒ…æ„å»ºè¿‡ç¨‹ä¸­ç”¨æ¥å¤„ç†æºæ–‡ä»¶çš„ï¼ˆJSXï¼ŒScssï¼ŒLess..ï¼‰ï¼Œä¸€æ¬¡å¤„ç†ä¸€ä¸ªï¼Œæ’ä»¶å¹¶ä¸ç›´æ¥æ“ä½œå•ä¸ªæ–‡ä»¶ï¼Œå®ƒç›´æ¥å¯¹æ•´ä¸ªæ„å»ºè¿‡ç¨‹å…¶ä½œç”¨ã€‚Webpackæœ‰å¾ˆå¤šå†…ç½®æ’ä»¶ï¼ŒåŒæ—¶ä¹Ÿæœ‰å¾ˆå¤šç¬¬ä¸‰æ–¹æ’ä»¶ï¼Œå¯ä»¥è®©æˆ‘ä»¬å®Œæˆæ›´åŠ ä¸°å¯Œçš„åŠŸèƒ½ã€‚

Hot Module Replacementï¼ˆHMRï¼‰ä¹Ÿæ˜¯webpacké‡Œå¾ˆæœ‰ç”¨çš„ä¸€ä¸ªæ’ä»¶ï¼Œå®ƒå…è®¸ä½ åœ¨ä¿®æ”¹ç»„ä»¶ä»£ç åï¼Œè‡ªåŠ¨åˆ·æ–°å®æ—¶é¢„è§ˆä¿®æ”¹åçš„æ•ˆæœï¼Œè¿™ä¸ªç‰¹æ€§åœ¨å¼€å‘è¿‡ç¨‹ä¸­ä½œç”¨éå¸¸å·¨å¤§ã€‚åœ¨æ–°ç‰ˆæœ¬ä¸­ï¼Œè¿™ä¸ªæ’ä»¶å·²ç»å†…ç½®äº†ï¼Œé€šè¿‡ webpack-dev-server æŒ‡å®š hot å‚æ•°å°±å¯ä»¥ä½¿ç”¨ï¼š

	webpack-dev-server --content-base ./ --open --inline --hot ...

ç›¸å¯¹SAPçš„å•é¢å…¥å£ï¼Œå¤šé¡µåº”ç”¨çš„æ¯ä¸ªæ¨¡å—å¯ä»¥å¯¹åº”ä¸€ä¸ªé¡µé¢ï¼Œç”±äºå¤šä¸ªé¡µé¢å¯¹åº”å¤šä¸ªè¾“å‡ºæ–‡ä»¶ï¼Œå¤šé¡µåº”ç”¨éœ€è¦åœ¨æ¯ä¸ªé¡µé¢ä¸­å¼•å…¥å…¬å…±çš„ JavaScript æ–‡ä»¶ä»¥åŠå…¶è‡ªèº«çš„ JavaScript æ–‡ä»¶ã€‚è¿™ä¸ªå¼•ç”¨å¦‚æœæ˜¯ CSS æ–‡ä»¶ï¼Œåˆ™å¯ä»¥ç”± extract-text-webpack-plugin è¿™ä¸ªæ’ä»¶è‡ªåŠ¨æå–å¹¶æ’å…¥åˆ° HTML é¡µé¢ï¼Œå¯¹äº HTML é¡µé¢ä¸­å¼•å…¥ JavaScript æ–‡ä»¶åˆ™éœ€è¦ä½¿ç”¨ html-webpack-plugin è¿™ä¸ªæ’ä»¶ã€‚ä»¥ä¸‹å°±æ˜¯ä¸€ä¸ªé¡µé¢çš„é…ç½®ï¼Œå¤šä¸ªé¡µé¢åˆ™å¯ä»¥å°†é¡µé¢è®°å½•åœ¨æ•°ç»„ä¸­ï¼Œç„¶åé€šè¿‡è„šæœ¬æšä¸¾ç”Ÿæˆç›¸åº”çš„é…ç½®ï¼Œå½“ç„¶åœ¨æ•°é‡ä¸å¤šçš„æƒ…å†µä¸‹ï¼Œå¤åˆ¶å‡ ä»½é…ç½®ä¹Ÿæ˜¯å¯è¡Œçš„ï¼š

    new HtmlWebpackPlugin({
        filename: '../index.html',
        template: './src/template/index.ejs',
        inject: false
    })

	['index','home','login'].forEach((page) => {
	    const htmlPlugin = new HTMLWebpackPlugin({
	        filename: `${page}.html`,
	        template: path.resolve(__dirname, `../src/html/${page}.html`),
	        chunks: [page, 'commons'],
	    });
	    HTMLPlugins.push(htmlPlugin);
	    Entries[page] = path.resolve(__dirname, `../src/js/${page}.js`);
	})


æ¨¡æ¿çš„é…ç½®å‚è€ƒæ’ä»¶æ–‡æ¡£ï¼Œè¿™é‡Œç¨ä½œå¼•å¯¼ï¼ŒåŸæœ‰ä¸€ä¸ªæ¨¡æ¿å†…å®¹å¦‚ä¸‹ï¼š

    <link rel="stylesheet" href="<%= htmlWebpackPlugin.files.css[0] %>">
    <script type="text/javascript" src="<%= htmlWebpackPlugin.files.js[0] %>"></script>
    <script type="text/javascript" src="<%= htmlWebpackPlugin.files.js[1] %>"></script>

webpack ç¼–è¯‘æ—¶ï¼Œä¼šäº§ç”Ÿè¾“å‡ºæ–‡ä»¶ï¼Œæ’ä»¶å¯ä»¥è·å–åˆ°ç›¸åº”çš„æ–‡ä»¶åˆ—è¡¨ï¼Œé€šè¿‡è¾“å‡ºåˆ—è¡¨é‡Œçš„æ–‡ä»¶ä¿¡æ¯åˆ°æ¨¡æ¿å°±å¯ä»¥å®ç°å¼•å…¥è„šæœ¬æ–‡ä»¶åˆ°é¡µé¢ã€‚js[0] ä»£è¡¨çš„æ˜¯ vendor.js å…±å…¬éƒ¨åˆ†ï¼Œjs[1] ä»£è¡¨çš„æ˜¯ main.js å³å…¥å£æ¨¡å—ï¼Œè¿™é‡Œæœ‰è·¯ç”±é…ç½®ä¿¡æ¯ã€‚js[2], js[3] åˆ™ä¼šåˆ†åˆ«ä»£è¡¨ä¸¤ä¸ªé¡µé¢æ¨¡å—ç”Ÿæˆçš„è¾“å‡ºæ–‡ä»¶ï¼Œæ–°å»ºä¸€ä¸ªæ¨¡æ¿å¹¶ä¸”æŠŠæ¨¡æ¿åå­—è®¾ç½®åˆ°æ’ä»¶é…ç½®é¡¹é‡Œå°±å¯ä»¥å®Œæˆé¡µé¢çš„ç”ŸæˆåŠ¨ä½œã€‚

    <link rel="stylesheet" href="<%= htmlWebpackPlugin.files.css[0] %>">
    <script type="text/javascript" src="<%= htmlWebpackPlugin.files.js[0] %>"></script>
    <script type="text/javascript" src="<%= htmlWebpackPlugin.files.js[1] %>"></script>
    <script type="text/javascript" src="<%= htmlWebpackPlugin.files.js[2] %>"></script>

    new HtmlWebpackPlugin({
        filename: '../TabPane.html',
        template: './src/template/TabPane.ejs',
        inject: false
    })




+ é¡µé¢ç©ºç™½é—®é¢˜

æ–°æ‰‹æ‰“åŒ…vueé¡¹ç›®ï¼Œå¹¶è¡Œç¼–è¯‘ç»“æœå‡ºç°é¡µé¢ç©ºç™½é—®é¢˜ã€‚ä¸€èˆ¬æ˜¯å› ä¸ºé…ç½®ä¸æ­£ç¡®å¯¼è‡´çš„ï¼Œï¼š

	"main": "index.js",

routerè·¯ç”±é…ç½®æ–‡ä»¶å¤¹ä¸‹index.jsçš„è®¾ç½®ï¼Œææœ‰å¯èƒ½æ˜¯æ²¡æœ‰åŒ¹é…çš„è·¯ç”±é¡¹å¯¼è‡´é¡µé¢æ— å†…å®¹ã€‚ä»”ç»†æ£€æŸ¥å„ä¸ªè·¯ç”±é…ç½®é¡¹ï¼Œéœ€è¦ VurRouter çš„åŸºç¡€è‡ªè¡Œè¡¥è¯¾

	// mode:'hash' 
	mode: 'history',//å»æ‰#ï¼Œ
	base: '/app/',  //è¿™ä¸ªé…ç½®ä¹Ÿå¾ˆé‡è¦ï¼Œå¦åˆ™ä¼šå‡ºç°é¡µé¢ç©ºç™½æƒ…å†µ
	scrollBehavior: () => ({ y: 0 }),


+ webpackæ„å»ºæ€§èƒ½ä¼˜åŒ–æŠ€å·§
http://www.hangge.com/blog/cache/detail_2105.html

å¯¹äºå¤§å‹ Vue é¡¹ç›®ï¼Œæˆ–è€…è¯´é¡¹ç›®ä¸­å¼•å…¥äº†è®¸å¤šç¬¬ä¸‰æ–¹åº“ï¼Œé‚£ä¹ˆåœ¨æ‰§è¡Œ npm run build æ„å»ºé¡¹ç›®çš„æ—¶å€™ä¼šæå…¶çš„æ…¢ï¼Œä¸Šå‡ åç§’ç”šè‡³å‡ åˆ†é’Ÿçš„æ—¶é—´ï¼Œç‰¹åˆ«æ˜¯å¼€å‘è¿‡ç¨‹ä¸­çš„æ—¶æ®µï¼Œè¿™æ˜¯éš¾ä»¥æ¥å—çš„ç­‰å¾…ã€‚

+ æ¨¡å—å®šä½ resolve modules

webpack çš„ resolve.modules æ˜¯ç”¨æ¥é…ç½®æ¨¡å—åº“ï¼ˆå³ node_modulesï¼‰æ‰€åœ¨çš„ä½ç½®ã€‚å½“ js é‡Œå‡ºç° import 'vue' è¿™æ ·ä¸æ˜¯ç›¸å¯¹ã€ä¹Ÿä¸æ˜¯ç»å¯¹è·¯å¾„çš„å†™æ³•æ—¶ï¼Œå®ƒä¾¿ä¼šåˆ° node_modules ç›®å½•ä¸‹å»æ‰¾ã€‚åœ¨é»˜è®¤é…ç½®ä¸‹ï¼Œwebpack ä¼šé‡‡ç”¨å‘ä¸Šé€’å½’æœç´¢çš„æ–¹å¼å»å¯»æ‰¾ã€‚ä¸ºäº†å‡å°‘æœç´¢èŒƒå›´ï¼Œå¯æˆ‘ä»¬ä»¥ç›´æ¥å†™æ˜ node_modules çš„å…¨è·¯å¾„ã€‚

æ‰“å¼€ build/webpack.base.conf.js æ–‡ä»¶ï¼Œæ·»åŠ å¦‚ä¸‹é«˜äº®é…ç½®ï¼š

		resolve: {
		    extensions: ['.js', '.vue', '.json'],
		    modules: [
		      resolve('src'),
		      resolve('node_modules')
		    ],
		    alias: {
		      'vue$': 'vue/dist/vue.esm.js',
		      '@': resolve('src'),
		    }
		},


+ é…ç½®è£…è½½æœºçš„ include & exclude

webpack çš„è£…è½½æœºï¼ˆloadersï¼‰é‡Œçš„æ¯ä¸ªå­é¡¹éƒ½å¯ä»¥æœ‰ include å’Œ exclude å±æ€§ã€‚ä½¿ç”¨ include æ›´ç²¾ç¡®åœ°æŒ‡å®šè¦å¤„ç†çš„ç›®å½•ï¼Œè¿™å¯ä»¥å‡å°‘ä¸å¿…è¦çš„éå†ï¼Œä»è€Œå‡å°‘æ€§èƒ½æŸå¤±ã€‚åŒæ—¶ä½¿ç”¨ exclude å¯¹äºå·²ç»æ˜ç¡®çŸ¥é“çš„ï¼Œä¸éœ€è¦å¤„ç†çš„ç›®å½•ï¼Œäºˆä»¥æ’é™¤ï¼Œä»è€Œè¿›ä¸€æ­¥æå‡æ€§èƒ½ã€‚

æ‰“å¼€ build/webpack.base.conf.js æ–‡ä»¶ï¼Œæ·»åŠ ç±»ä¼¼å¦‚ä¸‹é…ç½®ï¼Œä¾‹å¦‚ easytable æ²¡æœ‰åœ¨é¡¹ç›®ä½¿ç”¨ï¼Œåˆ™å¯ä»¥æŠŠå®ƒä» include ä¸­å»é™¤ã€‚

  rules: [
    {
      test: /\.vue$/,
      loader: 'vue-loader',
      options: vueLoaderConfig,
      include: [resolve('src'), resolve('node_modules/vue-easytable/libs')],
      exclude: /node_modules\/(?!(autotrack|dom-utils))|vendor\.dll\.js/
    },
    {
      test: /\.js$/,
      loader: 'babel-loader',
      include: [resolve('src')],
      exclude: /node_modules/
    },

+ ä½¿ç”¨ webpack-parallel-uglify-plugin æ’ä»¶æ¥å‹ç¼©ä»£ç 

é»˜è®¤æƒ…å†µä¸‹ webpack ä½¿ç”¨ UglifyJS æ’ä»¶è¿›è¡Œä»£ç å‹ç¼©ï¼Œä½†ç”±äºå…¶é‡‡ç”¨å•çº¿ç¨‹å‹ç¼©ï¼Œé€Ÿåº¦å¾ˆæ…¢ã€‚å¯ä»¥æ”¹ç”¨ webpack-parallel-uglify-plugin æ’ä»¶ï¼Œå®ƒå¯ä»¥å¹¶è¡Œè¿è¡Œ UglifyJS æ’ä»¶ï¼Œä»è€Œæ›´åŠ å……åˆ†ã€åˆç†çš„ä½¿ç”¨ CPU èµ„æºï¼Œä»è€Œå¤§å¤§å‡å°‘æ„å»ºæ—¶é—´ã€‚

æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å®‰è£… webpack-parallel-uglify-plugin

	npm i webpack-parallel-uglify-plugin

æ‰“å¼€ webpack.prod.conf.js æ–‡ä»¶ï¼Œå¹¶ä½œå¦‚ä¸‹ä¿®æ”¹ï¼š

	const ParallelUglifyPlugin = require('webpack-parallel-uglify-plugin');
	//....
    // åˆ æ‰webpackæä¾›çš„UglifyJSæ’ä»¶
    //new UglifyJsPlugin({
    //  uglifyOptions: {
    //    compress: {
    //      warnings: false
    //    }
    //  },
    //  sourceMap: config.build.productionSourceMap,
    //  parallel: true
    //}),
    // å¢åŠ  webpack-parallel-uglify-pluginæ¥æ›¿æ¢
    new ParallelUglifyPlugin({
      cacheDir: '.cache/',
      uglifyJS:{
        output: {
          comments: false
        },
        compress: {
          warnings: false
        }
      }
    }),


+ ä½¿ç”¨ HappyPack æ¥åŠ é€Ÿä»£ç æ„å»º

è¿è¡Œåœ¨ Node.js ä¹‹ä¸Šçš„ Webpack æ˜¯å•çº¿ç¨‹æ¨¡å‹çš„ï¼Œæ‰€ä»¥ Webpack éœ€è¦å¤„ç†çš„äº‹æƒ…åªèƒ½ä¸€ä»¶ä¸€ä»¶åœ°åšï¼Œä¸èƒ½å¤šä»¶äº‹ä¸€èµ·åšã€‚è€Œ HappyPack çš„å¤„ç†æ€è·¯æ˜¯ï¼šå°†åŸæœ‰çš„ webpack å¯¹ loader çš„æ‰§è¡Œè¿‡ç¨‹ï¼Œä»å•ä¸€è¿›ç¨‹çš„å½¢å¼æ‰©å±•å¤šè¿›ç¨‹æ¨¡å¼ï¼Œä»è€ŒåŠ é€Ÿä»£ç æ„å»ºã€‚

æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å®‰è£… happypackï¼š

	npm i happypack

æ‰“å¼€ build/webpack.base.conf.js æ–‡ä»¶ï¼Œå¹¶ä½œç±»ä¼¼å¦‚ä¸‹ä¿®æ”¹ï¼š

	const HappyPack = require('happypack');
	const os = require('os');
	const happyThreadPool = HappyPack.ThreadPool({ size: os.cpus().length });
	 
	module.exports = {
	    module: {
	        rules: [{
	            test: /\.js$/,
	            //æŠŠjsæ–‡ä»¶å¤„ç†äº¤ç»™idä¸º happyBabel çš„HappyPack çš„å®ä¾‹æ‰§è¡Œ
	            loader: 'happypack/loader?id=happyBabel',
	            include: [path.resolve('src')],
	            //æ’é™¤node_modules ç›®å½•ä¸‹çš„æ–‡ä»¶
	            exclude: /node_modules/
	        }, ]
	    },
	    plugins: [
	        new HappyPack({
	            //ç”¨idæ¥æ ‡è¯† happypackå¤„ç†é‚£é‡Œç±»æ–‡ä»¶
	            id: 'happyBabel',
	            //å¦‚ä½•å¤„ç†  ç”¨æ³•å’Œloader çš„é…ç½®ä¸€æ ·
	            loaders: [{
	                loader: 'babel-loader?cacheDirectory=true',
	            }],
	            //å…±äº«è¿›ç¨‹æ± 
	            threadPool: happyThreadPool,
	            //å…è®¸ HappyPack è¾“å‡ºæ—¥å¿—
	            verbose: true,
	        })
	    ]
	}


+ å¯ç”¨DllPluginå’ŒDllReferencePluginé¢„ç¼–è¯‘åº“æ–‡ä»¶
ã€€ã€€ã€€
è¿™æ˜¯æœ€å¤æ‚ä¹Ÿæ˜¯æå‡æ•ˆæœæœ€æ˜æ˜¾çš„ä¸€æ­¥ï¼ŒåŸç†æ˜¯å°†ç¬¬ä¸‰æ–¹åº“æ–‡ä»¶å•ç‹¬ç¼–è¯‘æ‰“åŒ…ä¸€æ¬¡ï¼Œä»¥åçš„æ„å»ºéƒ½ä¸éœ€è¦å†ç¼–è¯‘æ‰“åŒ…ç¬¬ä¸‰æ–¹åº“ã€‚é¡¹ç›®ä¾èµ–ä¸­é€šå¸¸ä¼šå¼•ç”¨å¤§é‡çš„ npm åŒ…ï¼Œè€Œè¿™äº›åŒ…åœ¨æ­£å¸¸çš„å¼€å‘è¿‡ç¨‹ä¸­å¹¶ä¸ä¼šè¿›è¡Œä¿®æ”¹ï¼Œä½†æ˜¯åœ¨æ¯ä¸€æ¬¡æ„å»ºè¿‡ç¨‹ä¸­å´éœ€è¦åå¤çš„å°†å…¶è§£æã€‚

è€Œè¿™ä¸¤ä¸ªæ’ä»¶å°±æ˜¯ç”¨æ¥è§„é¿æ­¤ç±»æŸè€—çš„ï¼ŒDllPlugin æ’ä»¶ç”¨æ¥é¢„å…ˆç¼–è¯‘ä¸€äº›æ¨¡å—ï¼ŒDllReferencePlugin æ’ä»¶ç”¨æ¥å¼•ç”¨è¿™äº›é¢„å…ˆç¼–è¯‘å¥½çš„æ¨¡å—ã€‚æ³¨æ„ï¼šDllPlugin å¿…é¡»è¦åœ¨ DllReferencePlugin æ‰§è¡Œå‰å…ˆæ‰§è¡Œä¸€æ¬¡ï¼Œdll è¿™ä¸ªæ¦‚å¿µåº”è¯¥ä¹Ÿæ˜¯å€Ÿé‰´äº† windows ç¨‹åºå¼€å‘ä¸­çš„ dll æ–‡ä»¶çš„è®¾è®¡ç†å¿µã€‚


é¦–å…ˆå¢åŠ  webpack.dll.config.js é…ç½®æ–‡ä»¶ï¼Œå¹¶åœ¨ entry ä¸­é…ç½®éœ€è¦å•ç‹¬DLLåŒ–çš„æ¨¡å—ï¼Œä»¥ä¸‹ä½œä¸ºç¤ºä¾‹ï¼Œæ®éœ€æ±‚è£å‰ª
ã€€ã€€ã€€ã€€
	const path = require('path');
	const webpack = require('webpack');

	module.exports = {
	    entry: {
	        vendor: ['vue/dist/vue.common.js',
	            'vue-router',
	            'axios',
	            'mint-ui',
	            'vue-cordova',
	            '@fortawesome/fontawesome-svg-core',
	            '@fortawesome/free-solid-svg-icons',
	            '@fortawesome/free-regular-svg-icons',
	            '@fortawesome/free-brands-svg-icons',
	            '@fortawesome/vue-fontawesome'
	        ]
	    },
	    output: {
	        path: path.join(__dirname, './dist'),
	        filename: '[name].dll.js',
	        library: '[name]_library' // vendor.dll.jsä¸­æš´éœ²å‡ºçš„å…¨å±€å˜é‡å
	    },
	    plugins: [
	        new webpack.DllPlugin({
	            path: path.join(__dirname, '/dist/', '[name]-manifest.json'),
	            name: '[name]_library'
	        }),
	        new webpack.optimize.UglifyJsPlugin({
	            compress: {
	                warnings: false
	            }
	        })
	    ]
	};


ç„¶ååœ¨ webpack.base.conf.js æ–‡ä»¶ï¼Œå¢åŠ ä¸€ä¸ªæ’ä»¶é…ç½®é…ç½®ï¼Œä½œç”¨æ˜¯é€šè¿‡ DLLReferencePlugin æ¥ä½¿ç”¨ DllPlugin ç”Ÿæˆçš„ DLL Bundleã€‚

	// æ·»åŠ DllReferencePluginæ’ä»¶
	new webpack.DllReferencePlugin({
		context: path.resolve(__dirname, '..'),
		manifest: require('./dist/vendor-manifest.json')
	}),


åœ¨ package.json å¢åŠ æ„å»ºå‘½ä»¤ã€€ã€€

	"dll": "webpack --config webpack.dll.config.js"

æ‰§è¡Œæ„å»ºï¼Œè¿™ä¸€æ­¥ä¼šç”Ÿæˆ vendor-manifest.json å’Œ static/js/vendor.dll.js

	npm run dll
	npm run dev æˆ– npm run build
ã€€ã€€
æœ€ååœ¨å…¥å£é¡µé¢ä¸­ index.html å¢åŠ  dll.js å¼•å…¥ï¼Œè€Œä¸”å¿…é¡»é¦–å…ˆå¼•å…¥ï¼Œå¦å¤–å°†å·²ç»ç‹¬ç«‹æ‰“åŒ…çš„æ¨¡å—ä»åŸæœ‰çš„é…ç½®æ–‡ä»¶ webpack.base.conf.js ä¸­è®¾ç½®ä¸º externals å¤–éƒ¨å¼•ç”¨

	<script src="/static/js/vendor.dll.js"></script>

	module.exports = {
	    externals: {
	        'echarts': 'echarts',
	        'vue': 'vue',
	        'axios': 'axios',
	        'iview': 'iview'
	    }
	}


+ æå–js/cssåˆ°cdnä¼˜åŒ–ç¼–è¯‘å¤§å°

ä»¥ä¸€ä¸ªvueé¡¹ç›®ä¸ºä¾‹ã€‚é¡¹ç›®å¼•ç”¨äº†vueã€axiosã€iviewã€iviewçš„cssï¼š

	import Vue from 'vue'
	import App from './App.vue'
	import router from './router'
	import axios from 'axios'
	import iView from 'iview'
	import echarts from 'echarts'
	import 'iview/dist/styles/iview.css'

åœ¨ webpack.base.conf.js ä¸­ï¼Œå¢åŠ externalsé…ç½®ï¼š


ç„¶ååœ¨é¡µé¢æ–‡ä»¶ index.html å¼•å…¥cdnèµ„æºæ–‡ä»¶

	<body>
	    <div id="app"></div>
	    <script src="https://cdn.bootcss.com/vue/2.5.2/vue.min.js"></script>
	    <script src="https://cdn.bootcss.com/axios/0.17.1/axios.min.js"></script>
	    <script src="https://cdn.bootcss.com/iview/2.6.0/iview.min.js"></script>
	    <script src="//cdn.staticfile.org/echarts/4.2.0-rc.1/echarts.min.js"></script>
	</body>

å°†å¤§ä½“ç§¯æ–‡ä»¶æ”¾ç½®åœ¨cdnä¸Šï¼Œå‡å°äº†æœåŠ¡å™¨æµé‡å‹åŠ›ï¼ŒåŠ å¿«äº†ä¸åŒåœ°åŒºç½‘é¡µåŠ è½½é€Ÿåº¦ï¼Œå¦‚ç™¾åº¦å›¾è¡¨åº“ echarts å°±å¾ˆå¤§ï¼Œå‹ç¼©åçš„å®Œæ•´åŒ…è¿‘ä¸€ä¸ªå…†çš„é‡ã€‚å¦å¤–ä½¿ç”¨gzipå‹ç¼©vendor.jså¯ä»¥æœ‰æ•ˆå‡å°æ–‡ä»¶ä½“ç§¯ï¼Œä¸€èˆ¬èƒ½å‹ç¼©70%å·¦å³ã€‚ 


