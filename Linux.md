

# ğŸš© Linux æ—è°±

*   [Linux æ—è°±](https://upload.wikimedia.org/wikipedia/commons/1/1b/Linux_Distribution_Timeline.svg)
*   [é¸¿è’™å¾®å†…æ ¸æ€§èƒ½ä¸å…¼å®¹æ€§å®ç°](https://www.usenix.org/system/files/osdi24-chen-haibo.pdf)


ä»€ä¹ˆæ˜¯Linuxï¼Ÿ

Linux ä¸æ˜¯ä¸€ä¸ªæ“ä½œç³»ç»Ÿï¼Œä¸¥æ ¼æ¥è®²ï¼ŒLinux åªæ˜¯ä¸€ä¸ªæ“ä½œç³»ç»Ÿä¸­çš„å†…æ ¸ã€‚å†…æ ¸æ˜¯ä»€ä¹ˆï¼Ÿå†…æ ¸å»ºç«‹äº†è®¡ç®—æœºè½¯ä»¶ä¸ç¡¬ä»¶ä¹‹é—´é€šè®¯çš„å¹³å°ï¼Œå†…æ ¸æä¾›ç³»ç»ŸæœåŠ¡ï¼Œæ¯”å¦‚æ–‡ä»¶ç®¡ç†ã€è™šæ‹Ÿå†…å­˜ã€è®¾å¤‡I/Oç­‰ã€‚

é€šå¸¸æ‰€è¯´çš„ Linux æ“ä½œç³»ç»ŸæŒ‡ GNU/Linuxï¼Œå³é‡‡ç”¨ Linux å†…æ ¸çš„ GNU æ“ä½œç³»ç»Ÿã€‚æ˜¯çš„ï¼Œæ“ä½œç³»ç»Ÿçš„å®é™…åç§°æ˜¯ GNU - GNUâ€™s Not Unixï¼Œå¯ä»¥è¯´æ˜¯ä¸€ä¸ªæ“ä½œç³»ç»Ÿåˆå¯ä»¥è¯´æ˜¯ä¸€ç§è§„èŒƒã€‚æ¯”å¦‚ï¼Œä¼—æ‰€å‘¨çŸ¥çš„ PHPï¼ŒåŸåä¸º Personal HomePageï¼Œæ ¹æ® GNU çš„è½¯ä»¶å‘½åè§„åˆ™ï¼ŒPHP ç°å·²æ›´åä¸º PHP: Hypertext Preprocessor è¶…æ–‡æœ¬é¢„å¤„ç†ç¨‹åºã€‚

ç°åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šå¤§é‡ä½¿ç”¨çš„ Android æ“ä½œç³»ç»Ÿä¹Ÿæ˜¯åŸºäº Linux å†…æ ¸å¼€å‘çš„ã€‚


è°åˆ›é€ äº†Linuxï¼Ÿ

Linux æœ€æ—©ç”± Linus Torvalds åœ¨1991å¹´å¼€å§‹ç¼–å†™ã€‚åœ¨è¿™æœŸé—´ï¼ŒRichard Stallman åˆ›å»ºäº† GNU ç»„ç»‡ï¼Œå¹¶ä¸æ–­çš„ç¼–å†™åˆ›å»º GNU ç¨‹åºï¼Œç¨‹åºçš„è®¸å¯æ–¹å¼å‡ä¸º GPL - General Public Licenseã€‚åœ¨ä¸æ–­çš„æœ‰ç¨‹åºå‘˜å’Œå¼€å‘è€…åŠ å…¥åˆ° GNU ç»„ç»‡ä¸­åï¼Œå˜é€ å°±äº†ä»Šå¤©æˆ‘ä»¬æ‰€çœ‹åˆ°çš„ Linuxï¼Œæˆ–ç§° GNU/Linuxã€‚


ä»€ä¹ˆæ˜¯Linuxå‘è¡Œç‰ˆï¼Ÿ

æ­£å¦‚ä¹‹å‰æ‰€è¯´çš„ï¼ŒLinux åªæ˜¯ä¸€ä¸ªå†…æ ¸ã€‚ç„¶è€Œï¼Œä¸€ä¸ªå®Œæ•´çš„æ“ä½œç³»ç»Ÿä¸ä»…ä»…æ˜¯å†…æ ¸è€Œå·²ã€‚æ‰€ä»¥ï¼Œè®¸å¤šä¸ªäººã€ç»„ç»‡å’Œä¼ä¸šï¼Œå¼€å‘äº†åŸºäº GNU/Linux çš„ Linux å‘è¡Œç‰ˆã€‚è¿™å…¶ä¸­æœ€è‘—åçš„ä¾¿æ˜¯ Red Hat å…¬å¸çš„ Red Hat ç³»åˆ—ä»¥åŠç¤¾åŒº community ç»„ç»‡çš„ Debian ç³»åˆ—ã€‚

ç®€å•çš„è¯´ï¼Œåœ¨æ¡Œé¢ç³»ç»Ÿä¸Šï¼Œå¯åˆ†ä¸º Debian å’Œ RedHat ä¸¤å¤§åˆ†æ”¯ï¼Œç„¶å Debian è¿™ä¸€åˆ†æ”¯åˆ°ç°åœ¨æ¯”è¾ƒç«çš„æ˜¯ Ubuntu æä¾›äº†æ›´å‹å¥½çš„æ¡Œé¢ç¯å¢ƒã€‚, RedHat åˆ†æ”¯æ¯”è¾ƒç«çš„æ˜¯ Fedoraã€‚æœ€æ—© Fedora Linux ç¤¾åŒºçš„ç›®æ ‡æ˜¯ä¸º Red Hat Linux åˆ¶ä½œå¹¶å‘å¸ƒç¬¬ä¸‰æ–¹çš„è½¯ä»¶åŒ…ï¼Œç„¶è€Œå½“ Red Hat Linux å…è´¹ç‰ˆåœæ­¢å‘å¸ƒåï¼ŒFedora ç¤¾åŒºä¾¿é›†æˆåˆ° Red Hat èµåŠ©çš„ Fedora é¡¹ç›®ï¼Œç›®æ ‡æ˜¯å¼€å‘å‡ºç”±ç¤¾åŒºæ”¯æŒçš„æ“ä½œç³»ç»Ÿï¼Œäº‹å®ä¸Šï¼ŒFedora Project é™¤äº†ç”±å¿—æ„¿è€…ç»„ç»‡å¤–ï¼Œä¹Ÿæœ‰è®¸å¤š Red Hat çš„å‘˜å·¥å‚ä¸å¼€å‘ã€‚Red Hat Enterprise Linux åˆ™å–ä»£åŸæ¥çš„ Red Hat Linux æˆä¸ºå®˜æ–¹æ”¶è´¹æ”¯æŒçš„ç³»ç»Ÿç‰ˆæœ¬ã€‚

ä¸‹é¢æˆ‘å°±ç®€å•å¾—ä»‹ç»ä¸€ä¸‹ç›®å‰æ¯”è¾ƒè‘—åã€æµè¡Œçš„ Linux å‘è¡Œç‰ˆæœ¬ã€‚éƒ¨åˆ†èµ„æ–™æ¥æº DistroWatch.comï¼š

Mandriva

Mandriva åŸå Mandrakeï¼Œæœ€æ—©ç”±Ga&euml;l Duvalåˆ›å»ºå¹¶åœ¨1998å¹´7æœˆå‘å¸ƒã€‚è®°å¾—å‰ä¸¤å¹´å›½å†…åˆšå¼€å§‹æ™®åŠLinuxæ—¶ï¼ŒMandrakeéå¸¸æµè¡Œã€‚è¯´èµ·Mandrakeçš„å†å²ï¼Œå…¶å®æœ€æ—©Mandrakeçš„å¼€å‘è€…æ˜¯åŸºäºRedhatè¿›è¡Œå¼€å‘çš„ã€‚Redhaté»˜è®¤é‡‡ç”¨GNOMEæ¡Œé¢ç³»ç»Ÿï¼Œè€ŒMandrakeå°†ä¹‹æ”¹ä¸ºKDEã€‚è€Œç”±äºå½“æ—¶çš„Linuxæ™®éæ¯”è¾ƒéš¾å®‰è£…ï¼Œä¸é€‚åˆç¬¬ä¸€æ¬¡æ¥è§¦Linuxçš„æ–°æ‰‹ï¼Œæ‰€ä»¥Mandrakeè¿˜ç®€åŒ–äº†å®‰è£…ç³»ç»Ÿã€‚æˆ‘æƒ³è¿™ä¹Ÿæ˜¯å½“æ—¶Mandrakeåœ¨å›½å†…å¦‚æ­¤çº¢ç«çš„åŸå› ä¹‹ä¸€ã€‚Mandrakeåœ¨æ˜“ç”¨æ€§æ–¹é¢çš„ç¡®æ˜¯ä¸‹äº†ä¸å°‘åŠŸå¤«ï¼ŒåŒ…æ‹¬é»˜è®¤æƒ…å†µä¸‹çš„ç¡¬ä»¶æ£€æµ‹ç­‰ã€‚

Mandrakeçš„å¼€å‘å®Œå…¨é€æ˜åŒ–ï¼ŒåŒ…æ‹¬â€œcookerâ€ã€‚å½“ç³»ç»Ÿæœ‰äº†æ–°çš„æµ‹è¯•ç‰ˆæœ¬åï¼Œä¾¿å¯ä»¥åœ¨cookerä¸Šæ‰¾åˆ°ã€‚ä¹‹å‰Mandrakeçš„æ–°ç‰ˆæœ¬çš„å‘å¸ƒé€Ÿåº¦å¾ˆå¿«ï¼Œä½†ä»9.0ä¹‹åä¾¿å¼€å§‹å‡ç¼“ã€‚ä¼°è®¡æ˜¯å¸Œæœ›èƒ½å¤Ÿå»¶é•¿ç‰ˆæœ¬çš„ç”Ÿå‘½åŠ›ä»¥ç¡®ä¿ç¨³å®šå’Œå®‰å…¨æ€§ã€‚

ä¼˜ç‚¹ï¼šå‹å¥½çš„æ“ä½œç•Œé¢ï¼Œå›¾å½¢é…ç½®å·¥å…·ï¼Œåºå¤§çš„ç¤¾åŒºæŠ€æœ¯æ”¯æŒï¼ŒNTFSåˆ†åŒºå¤§å°å˜æ›´
ç¼ºç‚¹ï¼šéƒ¨åˆ†ç‰ˆæœ¬bugè¾ƒå¤šï¼Œæœ€æ–°ç‰ˆæœ¬åªå…ˆå‘å¸ƒç»™Mandrakeä¿±ä¹éƒ¨çš„æˆå‘˜
è½¯ä»¶åŒ…ç®¡ç†ç³»ç»Ÿï¼šurpmi (RPM)
å…è´¹ä¸‹è½½ï¼šFTPå³æ—¶å‘å¸ƒä¸‹è½½ï¼ŒISOåœ¨ç‰ˆæœ¬å‘å¸ƒåæ•°æ˜ŸæœŸå†…æä¾›
å®˜æ–¹ä¸»é¡µï¼šhttp://www.mandrivalinux.com/


Red Hat

å›½å†…ï¼Œä¹ƒè‡³æ˜¯å…¨ä¸–ç•Œçš„Linuxç”¨æˆ·æ‰€æœ€ç†Ÿæ‚‰ã€æœ€è€³é—»èƒ½è¯¦çš„å‘è¡Œç‰ˆæƒ³å¿…å°±æ˜¯Red Hatäº†ã€‚Red Hatæœ€æ—©ç”±Bob Youngå’ŒMarc Ewingåœ¨1995å¹´åˆ›å»ºã€‚è€Œå…¬å¸åœ¨æœ€è¿‘æ‰å¼€å§‹çœŸæ­£æ­¥å…¥ç›ˆåˆ©æ—¶ä»£ï¼Œå½’åŠŸäºæ”¶è´¹çš„Red Hat Enterprise Linuxï¼ˆRHELï¼ŒRed Hatçš„ä¼ä¸šç‰ˆï¼‰ã€‚è€Œæ­£ç»Ÿçš„Red Hatç‰ˆæœ¬æ—©å·²åœæ­¢æŠ€æœ¯æ”¯æŒï¼Œæœ€åä¸€ç‰ˆæ˜¯Red Hat 9.0ã€‚äºæ˜¯ï¼Œç›®å‰Red Hatåˆ†ä¸ºä¸¤ä¸ªç³»åˆ—ï¼šç”±Red Hatå…¬å¸æä¾›æ”¶è´¹æŠ€æœ¯æ”¯æŒå’Œæ›´æ–°çš„Red Hat Enterprise Linuxï¼Œä»¥åŠç”±ç¤¾åŒºå¼€å‘çš„å…è´¹çš„Fedora Coreã€‚Fedora Core 1å‘å¸ƒäº2003å¹´å¹´æœ«ï¼Œè€ŒFCçš„å®šä½ä¾¿æ˜¯æ¡Œé¢ç”¨æˆ·ã€‚FCæä¾›äº†æœ€æ–°çš„è½¯ä»¶åŒ…ï¼ŒåŒæ—¶ï¼Œå®ƒçš„ç‰ˆæœ¬æ›´æ–°å‘¨æœŸä¹Ÿéå¸¸çŸ­ï¼Œä»…å…­ä¸ªæœˆã€‚ç›®å‰æœ€æ–°ç‰ˆæœ¬ä¸ºFC 3ï¼Œè€ŒFC4ä¹Ÿé¢„å®šå°†äºä»Šå¹´6æœˆå‘å¸ƒã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæœåŠ¡å™¨ä¸Šä¸€èˆ¬ä¸æ¨èé‡‡ç”¨Fedora Coreã€‚

é€‚ç”¨äºæœåŠ¡å™¨çš„ç‰ˆæœ¬æ˜¯Red Hat Enterprise Linuxï¼Œè€Œç”±äºè¿™æ˜¯ä¸ªæ”¶è´¹çš„æ“ä½œç³»ç»Ÿã€‚äºæ˜¯ï¼Œå›½å†…å¤–è®¸å¤šä¼ä¸šæˆ–ç©ºé—´å•†é€‰æ‹©CentOSã€‚CentOSå¯ä»¥ç®—æ˜¯RHELçš„å…‹éš†ç‰ˆï¼Œä½†å®ƒæœ€å¤§çš„å¥½å¤„æ˜¯å…è´¹ï¼èœé¸Ÿæ²¹ç›®å‰çš„æœåŠ¡å™¨ä¾¿é‡‡ç”¨çš„CentOS 3.4ã€‚

ä¼˜ç‚¹ï¼šæ‹¥æœ‰æ•°é‡åºå¤§çš„ç”¨æˆ·ï¼Œä¼˜ç§€çš„ç¤¾åŒºæŠ€æœ¯æ”¯æŒï¼Œè®¸å¤šåˆ›æ–°
ç¼ºç‚¹ï¼šå…è´¹ç‰ˆï¼ˆFedora Coreï¼‰ç‰ˆæœ¬ç”Ÿå‘½å‘¨æœŸå¤ªçŸ­ï¼Œå¤šåª’ä½“æ”¯æŒä¸ä½³
è½¯ä»¶åŒ…ç®¡ç†ç³»ç»Ÿï¼šup2date (RPM), YUM (RPM)
å…è´¹ä¸‹è½½ï¼šæ˜¯
å®˜æ–¹ä¸»é¡µï¼šhttp://www.redhat.com/


SUSE

SUSEæ˜¯å¾·å›½æœ€è‘—åçš„Linuxå‘è¡Œç‰ˆï¼Œåœ¨å…¨ä¸–ç•ŒèŒƒå›´ä¸­ä¹Ÿäº«æœ‰è¾ƒé«˜çš„å£°èª‰ã€‚SUSEè‡ªä¸»å¼€å‘çš„è½¯ä»¶åŒ…ç®¡ç†ç³»ç»ŸYaSTä¹Ÿå¤§å—å¥½è¯„ã€‚SUSEäº2003å¹´å¹´æœ«è¢«Novellæ”¶è´­ã€‚

SUSEä¹‹åçš„å‘å¸ƒæ˜¾å¾—æ¯”è¾ƒæ··ä¹±ï¼Œæ¯”å¦‚9.0ç‰ˆæœ¬æ˜¯æ”¶è´¹çš„ï¼Œè€Œ10.0ç‰ˆæœ¬ï¼ˆä¹Ÿè®¸ç”±äºå„ç§å‹åŠ›ï¼‰åˆå…è´¹å‘å¸ƒã€‚è¿™ä½¿å¾—ä¸€éƒ¨åˆ†ç”¨æˆ·æ„Ÿåˆ°å›°æƒ‘ï¼Œä¹Ÿè½¬è€Œä½¿ç”¨å…¶å®ƒå‘è¡Œç‰ˆæœ¬ã€‚ä½†æ˜¯ï¼Œç‘•ä¸æ©ç‘œï¼ŒSUSEä»ç„¶æ˜¯ä¸€ä¸ªéå¸¸ä¸“ä¸šã€ä¼˜ç§€çš„å‘è¡Œç‰ˆã€‚

ä¼˜ç‚¹ï¼šä¸“ä¸šï¼Œæ˜“ç”¨çš„YaSTè½¯ä»¶åŒ…ç®¡ç†ç³»ç»Ÿ
ç¼ºç‚¹ï¼šFTPå‘å¸ƒé€šå¸¸è¦æ¯”é›¶å”®ç‰ˆæ™š1~3ä¸ªæœˆ
è½¯ä»¶åŒ…ç®¡ç†ç³»ç»Ÿï¼šYaST (RPM), ç¬¬ä¸‰æ–¹APT (RPM) è½¯ä»¶åº“ï¼ˆrepositoryï¼‰
å…è´¹ä¸‹è½½ï¼šå–å†³äºç‰ˆæœ¬
å®˜æ–¹ä¸»é¡µï¼šhttp://www.suse.com/


Debian GNU/Linux

Debianæ˜¯èœé¸Ÿæ²¹æœåŠ¡å™¨ä¹‹å‰æ‰€é‡‡ç”¨çš„æ“ä½œç³»ç»Ÿã€‚Debianæœ€æ—©ç”±Ian Murdockäº1993å¹´åˆ›å»ºã€‚å¯ä»¥ç®—æ˜¯è¿„ä»Šä¸ºæ­¢ï¼Œæœ€éµå¾ªGNUè§„èŒƒçš„Linuxç³»ç»Ÿã€‚Debianç³»ç»Ÿåˆ†ä¸ºä¸‰ä¸ªç‰ˆæœ¬åˆ†æ”¯ï¼ˆbranchï¼‰ï¼šstable, testing å’Œ unstableã€‚æˆªè‡³2005å¹´5æœˆï¼Œè¿™ä¸‰ä¸ªç‰ˆæœ¬åˆ†æ”¯åˆ†åˆ«å¯¹åº”çš„å…·ä½“ç‰ˆæœ¬ä¸ºï¼šWoody, Sarge å’Œ Sidã€‚å…¶ä¸­ï¼Œunstableä¸ºæœ€æ–°çš„æµ‹è¯•ç‰ˆæœ¬ï¼Œå…¶ä¸­åŒ…æ‹¬æœ€æ–°çš„è½¯ä»¶åŒ…ï¼Œä½†æ˜¯ä¹Ÿæœ‰ç›¸å¯¹è¾ƒå¤šçš„bugï¼Œé€‚åˆæ¡Œé¢ç”¨æˆ·ã€‚testingçš„ç‰ˆæœ¬éƒ½ç»è¿‡unstableä¸­çš„æµ‹è¯•ï¼Œç›¸å¯¹è¾ƒä¸ºç¨³å®šï¼Œä¹Ÿæ”¯æŒäº†ä¸å°‘æ–°æŠ€æœ¯ï¼ˆæ¯”å¦‚SMPç­‰ï¼‰ã€‚è€ŒWoodyä¸€èˆ¬åªç”¨äºæœåŠ¡å™¨ï¼Œä¸Šé¢çš„è½¯ä»¶åŒ…å¤§éƒ¨åˆ†éƒ½æ¯”è¾ƒè¿‡æ—¶ï¼Œä½†æ˜¯ç¨³å®šå’Œå®‰å…¨æ€§éƒ½éå¸¸çš„é«˜ã€‚èœé¸Ÿæ²¹ä¹‹å‰æ‰€é‡‡ç”¨çš„æ˜¯Debian Sargeã€‚

ä¸ºä½•æœ‰å¦‚æ­¤å¤šçš„ç”¨æˆ·ç—´è¿·äºDebianå‘¢ï¼ˆåŒ…æ‹¬ç¬”è€…åœ¨å†…ï¼‰ï¼Ÿapt-get / dpkgæ˜¯åŸå› ä¹‹ä¸€ã€‚dpkgæ˜¯Debianç³»åˆ—ç‰¹æœ‰çš„è½¯ä»¶åŒ…ç®¡ç†å·¥å…·ï¼Œå®ƒè¢«èª‰ä¸ºæ‰€æœ‰Linuxè½¯ä»¶åŒ…ç®¡ç†å·¥å…·ï¼ˆæ¯”å¦‚RPMï¼‰æœ€å¼ºå¤§çš„ï¼é…åˆapt-getï¼Œåœ¨Debianä¸Šå®‰è£…ã€å‡çº§ã€åˆ é™¤å’Œç®¡ç†è½¯ä»¶å˜å¾—å¼‚å¸¸å®¹æ˜“ã€‚è®¸å¤šDebiançš„ç”¨æˆ·éƒ½å¼€ç©ç¬‘çš„è¯´ï¼ŒDebianå°†ä»–ä»¬å…»æ‡’äº†ï¼Œå› ä¸ºåªè¦ç®€å•å¾—æ•²ä¸€ä¸‹â€apt-get upgrade && apt-get updateâ€ï¼Œæœºå™¨ä¸Šæ‰€æœ‰çš„è½¯ä»¶å°±ä¼šè‡ªåŠ¨æ›´æ–°äº†â€¦â€¦

ä¼˜ç‚¹ï¼šéµå¾ªGNUè§„èŒƒï¼Œ100%å…è´¹ï¼Œä¼˜ç§€çš„ç½‘ç»œå’Œç¤¾åŒºèµ„æºï¼Œå¼ºå¤§çš„apt-get
ç¼ºç‚¹ï¼šå®‰è£…ç›¸å¯¹ä¸æ˜“ï¼Œstableåˆ†æ”¯çš„è½¯ä»¶æåº¦è¿‡æ—¶
è½¯ä»¶åŒ…ç®¡ç†ç³»ç»Ÿï¼šAPT (DEB)
å…è´¹ä¸‹è½½ï¼šæ˜¯
å®˜æ–¹ä¸»é¡µï¼šhttp://www.debian.org/


Ubuntu

ç¬”è€…çš„æ¡Œé¢ç”µè„‘ä¾¿ä½¿ç”¨çš„Ubuntuã€‚ä¾ç…§ç¬”è€…çš„ç†è§£ï¼Œç®€å•è€Œè¨€ï¼ŒUbuntuå°±æ˜¯ä¸€ä¸ªæ‹¥æœ‰Debianæ‰€æœ‰çš„ä¼˜ç‚¹ï¼Œä»¥åŠè‡ªå·±æ‰€åŠ å¼ºçš„ä¼˜ç‚¹çš„è¿‘ä¹å®Œç¾çš„Linuxæ“ä½œç³»ç»Ÿã€‚Smile Ubuntuæ˜¯ä¸€ä¸ªç›¸å¯¹è¾ƒæ–°çš„å‘è¡Œç‰ˆï¼Œä½†æ˜¯ï¼Œå®ƒçš„å‡ºç°å¯èƒ½æ”¹å˜äº†è®¸å¤šæ½œåœ¨ç”¨æˆ·å¯¹Linuxçš„çœ‹æ³•ã€‚ä¹Ÿè®¸ï¼Œä»å‰äººä»¬ä¼šè®¤ä¸ºLinuxéš¾ä»¥å®‰è£…ã€éš¾ä»¥ä½¿ç”¨ï¼Œä½†æ˜¯ï¼ŒUbuntuå‡ºç°åï¼Œè¿™äº›éƒ½æˆä¸ºäº†å†å²ã€‚UbuntuåŸºäºDebian Sidï¼Œæ‰€ä»¥è¿™ä¹Ÿå°±æ˜¯ç¬”è€…æ‰€è¯´çš„ï¼ŒUbuntuæ‹¥æœ‰Debiançš„æ‰€æœ‰ä¼˜ç‚¹ï¼ŒåŒ…æ‹¬apt-getã€‚ç„¶è€Œï¼Œä¸ä»…å¦‚æ­¤è€Œå·²ï¼ŒUbuntué»˜è®¤é‡‡ç”¨çš„GNOMEæ¡Œé¢ç³»ç»Ÿä¹Ÿå°†Ubuntuçš„ç•Œé¢è£…é¥°çš„ç®€æ˜“è€Œä¸å¤±åä¸½ã€‚å½“ç„¶ï¼Œå¦‚æœä½ æ˜¯ä¸€ä¸ªKDEçš„æ‹¥æŠ¤è€…çš„è¯ï¼ŒKubuntuåŒæ ·é€‚åˆä½ ï¼

Ubuntuçš„å®‰è£…éå¸¸çš„äººæ€§åŒ–ï¼Œåªè¦æŒ‰ç…§æç¤ºä¸€æ­¥ä¸€æ­¥è¿›è¡Œï¼Œå®‰è£…å’ŒWindowsåŒæ ·ç®€ä¾¿ï¼å¹¶ä¸”ï¼ŒUbuntuè¢«èª‰ä¸ºå¯¹ç¡¬ä»¶æ”¯æŒæœ€å¥½æœ€å…¨é¢çš„Linuxå‘è¡Œç‰ˆä¹‹ä¸€ï¼Œè®¸å¤šåœ¨å…¶ä»–å‘è¡Œç‰ˆä¸Šæ— æ³•ä½¿ç”¨ï¼Œæˆ–è€…é»˜è®¤é…ç½®æ—¶æ— æ³•ä½¿ç”¨çš„ç¡¬ä»¶ï¼Œåœ¨Ubuntuä¸Šè½»æ¾æå®šã€‚å¹¶ä¸”ï¼ŒUbuntué‡‡ç”¨è‡ªè¡ŒåŠ å¼ºçš„å†…æ ¸ï¼ˆkernelï¼‰ï¼Œå®‰å…¨æ€§æ–¹é¢æ›´ä¸Šä¸€å±‚æ¥¼ã€‚å¹¶ä¸”ï¼ŒUbuntué»˜è®¤ä¸èƒ½ç›´æ¥rootç™»é™†ï¼Œå¿…é¡»ä»ç¬¬ä¸€ä¸ªåˆ›å»ºçš„ç”¨æˆ·é€šè¿‡suæˆ–sudoæ¥è·å–rootæƒé™ï¼ˆè¿™ä¹Ÿè®¸ä¸å¤ªæ–¹ä¾¿ï¼Œä½†æ— ç–‘å¢åŠ äº†å®‰å…¨æ€§ï¼Œé¿å…ç”¨æˆ·ç”±äºç²—å¿ƒè€ŒæŸåç³»ç»Ÿï¼‰ã€‚Ubuntuçš„ç‰ˆæœ¬å‘¨æœŸä¸ºå…­ä¸ªæœˆï¼Œå¼¥è¡¥äº†Debianæ›´æ–°ç¼“æ…¢çš„ä¸è¶³ã€‚

ä¼˜ç‚¹ï¼šäººæ°”é¢‡é«˜çš„è®ºå›æä¾›ä¼˜ç§€çš„èµ„æºå’ŒæŠ€æœ¯æ”¯æŒï¼Œå›ºå®šçš„ç‰ˆæœ¬æ›´æ–°å‘¨æœŸå’ŒæŠ€æœ¯æ”¯æŒï¼Œå¯ä»Debian Woodyç›´æ¥å‡çº§
ç¼ºç‚¹ï¼šè¿˜æœªå»ºç«‹æˆç†Ÿçš„å•†ä¸šæ¨¡å¼
è½¯ä»¶åŒ…ç®¡ç†ç³»ç»Ÿï¼šAPT (DEB)
å…è´¹ä¸‹è½½ï¼šæ˜¯
å®˜æ–¹ä¸»é¡µï¼šhttp://www.ubuntulinux.org/


Gentoo

Gentooæœ€åˆç”±Daniel Robbinsï¼ˆå‰Stampede Linuxå’ŒFreeBSDçš„å¼€å‘è€…ä¹‹ä¸€ï¼‰åˆ›å»ºã€‚ç”±äºå¼€å‘è€…å¯¹FreeBSDçš„ç†Ÿè¯†ï¼Œæ‰€ä»¥Gentooæ‹¥æœ‰åª²ç¾FreeBSDçš„å¹¿å—ç¾èª‰çš„portsç³»ç»Ÿâ€”â€”portageã€‚ï¼ˆPortså’ŒPortageéƒ½æ˜¯ç”¨äºåœ¨çº¿æ›´æ–°è½¯ä»¶çš„ç³»ç»Ÿï¼Œç±»ä¼¼apt-getï¼Œä½†è¿˜æ˜¯æœ‰å¾ˆå¤§ä¸åŒï¼‰Gentooçš„é¦–ä¸ªç¨³å®šç‰ˆæœ¬å‘å¸ƒäº2002å¹´ã€‚

Gentooçš„å‡ºåæ˜¯å› ä¸ºå…¶é«˜åº¦çš„è‡ªå®šåˆ¶æ€§ï¼šå› ä¸ºå®ƒæ˜¯ä¸€ä¸ªåŸºäºæºä»£ç çš„ï¼ˆsource-basedï¼‰å‘è¡Œç‰ˆã€‚å°½ç®¡å®‰è£…æ—¶å¯ä»¥é€‰æ‹©é¢„å…ˆç¼–è¯‘å¥½çš„è½¯ä»¶åŒ…ï¼Œä½†æ˜¯å¤§éƒ¨åˆ†ä½¿ç”¨Gentooçš„ç”¨æˆ·éƒ½é€‰æ‹©è‡ªå·±æ‰‹åŠ¨ç¼–è¯‘ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆGentooé€‚åˆæ¯”è¾ƒæœ‰Linuxä½¿ç”¨ç»éªŒçš„è€æ‰‹ä½¿ç”¨çš„åŸå› ã€‚ä½†æ˜¯è¦æ³¨æ„çš„æ˜¯ï¼Œç”±äºç¼–è¯‘è½¯ä»¶éœ€è¦æ¶ˆè€—å¤§é‡çš„æ—¶é—´ï¼Œæ‰€ä»¥å¦‚æœä½ æ‰€æœ‰çš„è½¯ä»¶éƒ½è‡ªå·±ç¼–è¯‘ï¼Œå¹¶å®‰è£…KDEæ¡Œé¢ç³»ç»Ÿç­‰æ¯”è¾ƒå¤§çš„è½¯ä»¶åŒ…ï¼Œå¯èƒ½éœ€è¦å‡ å¤©æ—¶é—´æ‰èƒ½ç¼–è¯‘å®Œâ€¦â€¦

ä¼˜ç‚¹ï¼šé«˜åº¦çš„å¯å®šåˆ¶æ€§ï¼Œå®Œæ•´çš„ä½¿ç”¨æ‰‹å†Œï¼Œåª²ç¾Portsçš„Portageç³»ç»Ÿï¼Œé€‚åˆâ€œè‡­ç¾â€çš„é«˜æ‰‹ä½¿ç”¨^^
ç¼ºç‚¹ï¼šç¼–è¯‘è€—æ—¶å¤šï¼Œå®‰è£…ç¼“æ…¢
è½¯ä»¶åŒ…ç®¡ç†ç³»ç»Ÿï¼šPortage (SRC)
å…è´¹ä¸‹è½½ï¼šæ˜¯
å®˜æ–¹ä¸»é¡µï¼šhttp://www.gentoo.org/


Slackware

Slackwareç”±Patrick Volkerdingåˆ›å»ºäº1992å¹´ã€‚ç®—èµ·æ¥åº”å½“æ˜¯å†å²æœ€æ‚ ä¹…çš„Linuxå‘è¡Œç‰ˆã€‚æ›¾ç»Slackwareéå¸¸çš„æµè¡Œï¼Œä½†æ˜¯å½“Linuxè¶Šæ¥è¶Šæ™®åŠï¼Œç”¨æˆ·çš„æŠ€æœ¯å±‚é¢è¶Šæ¥è¶Šå¹¿ï¼ˆæ›´å¤šçš„æ–°æ‰‹ï¼‰åï¼ŒSlackwareæ¸æ¸çš„è¢«æ–°æ¥çš„äººä»¬æ‰€é—å¿˜ã€‚åœ¨å…¶ä»–ä¸»æµå‘è¡Œç‰ˆå¼ºè°ƒæ˜“ç”¨æ€§çš„æ—¶å€™ï¼ŒSlackwareä¾ç„¶å›ºæ‰§çš„è¿½æ±‚æœ€åŸå§‹çš„æ•ˆç‡â€”â€”æ‰€æœ‰çš„é…ç½®å‡è¿˜æ˜¯è¦é€šè¿‡é…ç½®æ–‡ä»¶æ¥è¿›è¡Œã€‚

å°½ç®¡å¦‚æ­¤ï¼ŒSlackwareä»ç„¶æ·±å…¥äººå¿ƒï¼ˆå¤§éƒ¨åˆ†éƒ½æ˜¯æ¯”è¾ƒæœ‰ç»éªŒçš„Linuxè€æ‰‹ï¼‰ã€‚Slackwareç¨³å®šã€å®‰å…¨ï¼Œæ‰€ä»¥ä»ç„¶æœ‰å¤§æ‰¹çš„å¿ å®ç”¨æˆ·ã€‚ç”±äºSlackwareå°½é‡é‡‡ç”¨åŸç‰ˆçš„è½¯ä»¶åŒ…è€Œä¸è¿›è¡Œä»»ä½•ä¿®æ”¹ï¼Œæ‰€ä»¥åˆ¶é€ æ–°bugçš„å‡ ç‡ä¾¿ä½äº†å¾ˆå¤šã€‚Slackwareçš„ç‰ˆæœ¬æ›´æ–°å‘¨æœŸè¾ƒé•¿ï¼ˆå¤§çº¦1å¹´ï¼‰ï¼Œä½†æ˜¯æ–°ç‰ˆæœ¬çš„è½¯ä»¶ä»ç„¶ä¸é—´æ–­çš„æä¾›ç»™ç”¨æˆ·ä¸‹è½½ã€‚

ä¼˜ç‚¹ï¼šéå¸¸ç¨³å®šã€å®‰å…¨ï¼Œé«˜åº¦åšæŒUNIXçš„è§„èŒƒ
ç¼ºç‚¹ï¼šæ‰€æœ‰çš„é…ç½®å‡é€šè¿‡ç¼–è¾‘æ–‡ä»¶æ¥è¿›è¡Œï¼Œè‡ªåŠ¨ç¡¬ä»¶æ£€æµ‹èƒ½åŠ›è¾ƒå·®
è½¯ä»¶åŒ…ç®¡ç†ç³»ç»Ÿï¼šSlackware Package Management (TGZ)
å…è´¹ä¸‹è½½ï¼šæ˜¯
å®˜æ–¹ä¸»é¡µï¼šhttp://www.slackware.com/


Knoppix

ç”±å¾·å›½çš„Klaus Knopperå¼€å‘çš„Knoppixï¼Œæ˜¯ä¸€ä¸ªåŸºäºDebiançš„å‘è¡Œç‰ˆã€‚Knoppixä¸¥æ ¼ç®—èµ·æ¥æ˜¯ä¸€æ¬¾LiveCD Linuxï¼Œæ‰€è°“çš„LiveCDå°±æ˜¯æ•´ä¸ªæ“ä½œç³»ç»Ÿéƒ½åœ¨ä¸€å¼ å…‰ç›˜ä¸Šï¼Œåªè¦å¼€æœºä»å…‰ç›˜å¯åŠ¨ï¼Œå°±èƒ½æ‹¥æœ‰ä¸€ä¸ªå®Œæ•´çš„Linuxç³»ç»Ÿï¼æ— éœ€å®‰è£…ï¼å½“ç„¶ï¼ŒKnoppixä¹Ÿèƒ½å¤Ÿéå¸¸è½»æ¾çš„å®‰è£…åˆ°ç¡¬ç›˜ä¸Šã€‚å…¶å¼ºå¤§çš„ç¡¬ä»¶æ£€æµ‹èƒ½åŠ›ã€ç³»ç»Ÿä¿®å¤èƒ½åŠ›ã€å³æ—¶å‹ç¼©ä¼ è¾“æŠ€æœ¯ï¼Œéƒ½ä»¤äººå¤§åŠ ç§°èµã€‚å¯ä»¥è¯´ï¼Œåœ¨LiveCDç•Œï¼ŒKnoppixæ˜¯æ— äººèƒ½åŠçš„ï¼

ä¼˜ç‚¹ï¼šæ— éœ€å®‰è£…å¯ç›´æ¥è¿è¡ŒäºCDä¸Šï¼Œä¼˜ç§€çš„ç¡¬ä»¶æ£€æµ‹èƒ½åŠ›ï¼Œå¯ä½œä¸ºç³»ç»Ÿæ€¥æ•‘ç›˜ä½¿ç”¨
ç¼ºç‚¹ï¼šLiveCDç”±äºå…‰ç›˜çš„æ•°æ®è¯»å–é€Ÿåº¦é™åˆ¶å¯¼è‡´æ€§èƒ½å¤§å¹…ä¸‹é™
è½¯ä»¶åŒ…ç®¡ç†ç³»ç»Ÿï¼šAPT (DEB)
å…è´¹ä¸‹è½½ï¼šæ˜¯
å®˜æ–¹ä¸»é¡µï¼šhttp://www.knoppix.com/


MEPIS

MEPISç”±Warren Woodfordåœ¨2003å¹´å»ºç«‹ã€‚MEPISè™½ç„¶åˆšå»ºç«‹ä¸ä¹…ï¼Œä½†æ˜¯è¿…é€Ÿçš„ä¼ æ’­åœ¨Linuxç”¨æˆ·é—´ã€‚ç®€å•æ¥è¯´ï¼ŒMEPISæ˜¯ä¸€ä¸ªé›†åˆäº†Debian Sidå’ŒKnoppixçš„äº§ç‰©ã€‚ç”¨æˆ·å³èƒ½å°†ä¹‹å½“ä½œLiveCDä½¿ç”¨ï¼Œä¹Ÿèƒ½ä½¿ç”¨å¸¸è§„çš„å›¾å½¢ç•Œé¢è¿›è¡Œå®‰è£…ã€‚

MEPISé»˜è®¤é›†æˆå®‰è£…äº†Java Runtime Environmentã€Flashæ’ä»¶ã€nVidiaåŠ é€Ÿé©±åŠ¨ç­‰è®¸å¤šå¸¸ç”¨çš„ç¨‹åºã€‚ç”¨æˆ·å¯ä»¥éå¸¸è½»æ¾çš„å®‰è£…å®Œç³»ç»Ÿåå°±ç›´æ¥å¼€å§‹ä½¿ç”¨ï¼Œè€Œä¸ç”¨åˆ°å¤„å¯»æ‰¾èµ„æ–™å¦‚ä½•ä¸‹è½½ã€å¦‚ä½•å®‰è£…ã€å¦‚ä½•é…ç½®è¿™äº›è½¯ä»¶ã€‚è¿™ä¸ä»…ç»™Linuxæ–°æ‰‹å¸¦æ¥äº†ä¾¿æ·ï¼Œä¹Ÿç»™è€æ‰‹ä»¬èŠ‚çº¦äº†ç›¸å½“å¤šçš„æ—¶é—´ã€‚

ä¼˜ç‚¹ï¼šLiveCDä¸å¸¸è§„å®‰è£…ä¸¤ç”¨ï¼Œä¼˜ç§€çš„ç¡¬ä»¶æ£€æµ‹èƒ½åŠ›ï¼Œé¢„è£…äº†è®¸å¤šå®ç”¨çš„è½¯ä»¶
ç¼ºç‚¹ï¼šå»ºç«‹æ—¶é—´ä¸é•¿ï¼Œé»˜è®¤çš„ç•Œé¢æœ‰äº›å¯’é…¸
è½¯ä»¶åŒ…ç®¡ç†ç³»ç»Ÿï¼šAPT (DEB)
å…è´¹ä¸‹è½½ï¼šæ˜¯
å®˜æ–¹ä¸»é¡µï¼šhttp://www.mepis.org/


Xandros

Xandroså»ºç«‹åœ¨å·²ç»æˆä¸ºå†å²çš„Corel Linuxä¹‹ä¸Šã€‚å½“åˆCorel Linuxçš„å…¬å¸ç”±äºè´¢æ”¿ä¸Šçš„å›°éš¾ï¼Œè¢«è¿«ç»ˆæ­¢äº†Corel Linuxçš„å¼€å‘ï¼Œè€ŒXandrosé€‚æ—¶çš„å°†Corel Linuxéƒ¨é—¨ä¹°ä¸‹ï¼Œäº2002å¹´10æœˆæ¨å‡ºå…¨æ–°çš„Xandros Desktopã€‚

Xandrosçš„å–ç‚¹åœ¨äºæå…¶ç®€å•çš„å®‰è£…å’Œä½¿ç”¨ï¼Œæ‰€ä»¥å®ƒçš„å¸‚åœºå®šä½æ˜¯é‚£äº›æ²¡æœ‰ä»»ä½•Linuxä½¿ç”¨ç»éªŒçš„æ–°æ‰‹ï¼Œæˆ–æ˜¯ä¹ æƒ¯ä½¿ç”¨Windowsçš„ç”¨æˆ·ã€‚Xandrosçš„æ ‡å‡†ç‰ˆå’Œå¢å¼ºç‰ˆéƒ½æ˜¯å•†ä¸šè½¯ä»¶ï¼Œåˆ†åˆ«å”®ä»·$40å’Œ$99ç¾å…ƒã€‚ä¸è¿‡ä½ ä»ç„¶å¯ä»¥åœ¨è¿™é‡Œä¸‹è½½åˆ°å…è´¹çš„å…¬å¼€å‘è¡Œç‰ˆã€‚

ä¼˜ç‚¹ï¼šé€‚åˆå®Œå…¨æ²¡æœ‰ç»éªŒçš„æ–°æ‰‹ï¼Œå®‰è£…å®Œä»¥åå°±èƒ½ç«‹å³æŠ•å…¥ä½¿ç”¨ï¼Œè‡ªå¸¦éå¸¸ä¸é”™çš„å·¥å…·
ç¼ºç‚¹ï¼šå•†ä¸šè½¯ä»¶
è½¯ä»¶åŒ…ç®¡ç†ç³»ç»Ÿï¼šXandros Networks (DEB) æˆ– APT (DEB) ï¼ˆå¯é€‰ï¼Œä½†ä¸æä¾›æŠ€æœ¯æ”¯æŒï¼‰
å…è´¹ä¸‹è½½ï¼šå…¬å¼€å‘è¡Œç‰ˆ
å®˜æ–¹ä¸»é¡µï¼šhttp://www.xandros.com/


FreeBSD

é¦–å…ˆè¦å¼ºè°ƒçš„æ˜¯ï¼šFreeBSDä¸æ˜¯ä¸€ä¸ªLinuxç³»ç»Ÿï¼ å¯æ˜¯ï¼Œä¸ºä»€ä¹ˆç¬”è€…è¦ä»‹ç»FreeBSDå‘¢ï¼Ÿå› ä¸ºFreeBSDçš„ç”¨æˆ·ä¹Ÿç›¸å½“å¤šï¼Œå…¶è®¸å¤šç‰¹æ€§éƒ½ä¸Linuxç›¸ç±»ä¼¼ã€‚äº‹å®ä¸Šï¼ŒLinuxå’ŒBSDï¼ˆBerkeley Software Distributionï¼‰å‡æ˜¯UNIXçš„æ¼”åŒ–åˆ†æ”¯ã€‚å¹¶ä¸”ï¼ŒLinuxä¸­ç›¸å½“å¤šçš„ç‰¹æ€§å’ŒåŠŸèƒ½ï¼ˆæ¯”å¦‚ç”¨äºé…ç½®DNSçš„Bindè½¯ä»¶ï¼‰éƒ½æ˜¯å–è‡ªäºBSDçš„ã€‚è€ŒFreeBSDä¾¿æ˜¯BSDå®¶æ—ä¸­æœ€å‡ºåï¼Œç”¨æˆ·æ•°é‡æœ€å¤šçš„ä¸€ä¸ªå‘è¡Œç‰ˆã€‚MEZOCä¹‹å‰æ‰€é‡‡ç”¨çš„ä¾¿æ˜¯FreeBSDç³»ç»Ÿã€‚

FreeBSDå»ºç«‹äº1993å¹´ï¼Œæ‹¥æœ‰ç›¸å½“é•¿çš„å†å²ã€‚FreeBSDæ‹¥æœ‰ä¸¤ä¸ªåˆ†æ”¯ï¼šstableå’Œcurrentã€‚é¡¾åæ€ä¹‰ï¼Œstableæ˜¯ç¨³å®šç‰ˆï¼Œè€Œcurrentåˆ™æ˜¯æ·»åŠ äº†æ–°æŠ€æœ¯çš„æµ‹è¯•ç‰ˆã€‚å¦å¤–ï¼ŒFreeBSDä¼šä¸å®šæœŸçš„å‘å¸ƒæ–°çš„ç‰ˆæœ¬ï¼Œç§°ä¸ºRELEASEï¼Œstableå’Œcurrentå‡æœ‰è‡ªå·±çš„RELEASEç‰ˆæœ¬ã€‚æ¯”å¦‚4.11-RELEASEå’Œ5.3-RELEASEï¼Œè¯·æ³¨æ„ï¼Œè¿™å¹¶ä¸ä»£è¡¨åè€…æ¯”å‰è€…çš„ç‰ˆæœ¬æ–°ã€‚è¿™ä»…ä»…ä»£è¡¨å‰è€…ï¼ˆæ•°å­—å°çš„ç‰ˆæœ¬ï¼‰æ˜¯stableç‰ˆæœ¬ï¼Œåè€…ï¼ˆæ•°å­—å¤§çš„ç‰ˆæœ¬ï¼‰æ˜¯currentç‰ˆæœ¬ã€‚

FreeBSDé™¤äº†ä½œä¸ºæœåŠ¡å™¨ç³»ç»Ÿå¤–ï¼Œä¹Ÿé€‚åˆæ¡Œé¢ç”¨æˆ·ã€‚ä¸è¿‡ï¼Œè€ƒè™‘åˆ°è½¯ä»¶æ–¹é¢çš„å…¼å®¹æ€§ï¼Œä¸€èˆ¬ç”¨æˆ·é€‰æ‹©FreeBSDä½œä¸ºæ¡Œé¢ç³»ç»Ÿä¸æ˜¯å¾ˆæ˜æ™ºã€‚ä½œä¸ºæœåŠ¡å™¨è€Œè¨€ï¼ŒFreeBSDæ˜¯ç›¸å½“ä¼˜ç§€çš„ã€‚æ›¾ç»æœ‰äººè¯´è¿‡ï¼ŒåŒæ ·çš„æœåŠ¡å™¨ç¡¬ä»¶é…ç½®ï¼Œè¿è¡ŒåŒæ ·çš„ä¸€ä¸ªvBulletinè®ºå›ï¼ŒFreeBSDæ‰€ç”¨çš„èµ„æºè¦æ¯”Linuxå°‘ã€‚è¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆè®¸å¤šç©ºé—´å•†æåŠ›æ¨å´‡FreeBSDçš„åŸå› ã€‚Smile

ä¼˜ç‚¹ï¼šé€Ÿåº¦å¿«ï¼Œéå¸¸ç¨³å®šï¼Œä¼˜ç§€çš„ä½¿ç”¨æ‰‹å†Œï¼ŒPortsç³»ç»Ÿ
ç¼ºç‚¹ï¼šæ¯”èµ·Linuxè€Œè¨€å¯¹ç¡¬ä»¶çš„æ”¯æŒè¾ƒå·®ï¼Œå¯¹äºæ¡Œé¢ç³»ç»Ÿè€Œè¨€è½¯ä»¶çš„å…¼å®¹æ€§æ˜¯ä¸ªé—®é¢˜
è½¯ä»¶åŒ…ç®¡ç†ç³»ç»Ÿï¼šPorts (TBZ)
å…è´¹ä¸‹è½½ï¼šæ˜¯
å®˜æ–¹ä¸»é¡µï¼šhttp://www.freebsd.org/



# ğŸš© GUI å›¾å½¢ç•Œé¢æ¶æ„

*   https://www.x.org/wiki/
    The X.Org project provides an open source implementation of the X Window System. 

*   [Xorg Sources Download](https://www.x.org/wiki/Releases/Download/)
*   [The (Re)Architecture of the X Window System](https://www.kernel.org/doc/ols/2004/ols2004v1-pages-227-238.pdf)
*   [X.Org Development](https://www.x.org/wiki/Development/)
*   [The X New Developerâ€™s Guide](https://www.x.org/wiki/guide/)
*   [The X New Developerâ€™s Guide: X Window System Concepts](https://www.x.org/wiki/guide/concepts/)
*   [X Window System Version 11 Release 7.7](https://www.x.org/releases/X11R7.7/)
*   [X Window System Protocol](https://www.x.org/releases/X11R7.7/doc/xproto/x11protocol.html)
*   [Wayland](https://wayland.freedesktop.org/)
*   [Open Source Desktop Technology Road Map](https://wiki.freedesktop.org/xorg/Development/Documentation/Obsolescence/roadmap-2-clean.pdf)
*   [FreeBSD Handbook - Chapter 5. The X Window System](https://docs.freebsd.org/en/books/handbook/book/#x11)
*   [The Wayland Protocol](https://wayland-book.com)

X Window Server å›¾å½¢ç³»ç»Ÿèµ·æºäº 1984 å¹´ï¼Œæ˜¯ UNIX æ“ä½œç³»ç»Ÿä¸ŠåŸºäºä½å›¾æ˜¾ç¤ºçš„å›¾å½¢ç”¨æˆ·ç•Œé¢ç³»ç»Ÿã€‚
å®ƒå®šä¹‰äº†ä¸€ç§å®¢æˆ·ç«¯/æœåŠ¡å™¨æ¶æ„ï¼Œè¿è¡Œåœ¨æœ¬åœ°ã€è¿œç¨‹ä¸»æœºä¸Šçš„çš„åº”ç”¨ç¨‹åºçš„ GUI æ•°æ®å‘é€åˆ°æœåŠ¡å™¨ï¼Œå›¾å½¢
æœåŠ¡å™¨è´Ÿè´£å‘ç¡¬ä»¶ç»˜åˆ¶å›¾å½¢ç•Œé¢ã€‚å½“å‰æœ€æ–°ç‰ˆæœ¬ä¸º 11ï¼Œå› æ­¤åŒç®€ç§°ä¸º Xã€X11 æˆ–è€… X Window çª—å£ç³»ç»Ÿã€‚
å…¶æ ¸å¿ƒæ˜¯æœåŠ¡å™¨ç«¯å£ï¼ˆX Serverï¼‰ï¼Œè´Ÿè´£ä¸è®¡ç®—æœºçš„æ˜¾ç¤ºç¡¬ä»¶é€šä¿¡ï¼Œå¹¶ç®¡ç†è¾“å…¥è®¾å¤‡çš„äº‹ä»¶ã€‚å®ƒçš„æ‰€æœ‰ç»˜å›¾
è¡Œä¸ºéƒ½æ˜¯æ ¹æ® X Protocol æ–‡æ¡£æ‰€è¿°çš„è¯·æ±‚ï¼ˆRequestsï¼‰è§„èŒƒè¿›è¡Œï¼Œä¹Ÿå°±æ˜¯å®¢æˆ·ç«¯è¯·æœåŠ¡å™¨è¿›è¡Œç»˜å›¾ã€‚
æ–‡æ¡£è¿˜å®šä¹‰äº†æ•°åç§æœåŠ¡å™¨ä¸å®¢æˆ·ç«¯ä¹‹é—´çš„äº‹ä»¶ã€‚

    Definitive Guides to the X Window System:
        Volume 0:X Protocol Reference Manual
        Volume 1:Xlib Programming Manual
        Volume 2:Xlib Reference Manual
        Volume 3M:X Window System User's Guide
        Volume 4M:X Toolkit Intrinsics Programming Manual
        Volume 5:X Toolkit Intrinsics Reference Manual
        Volume 6A:Motif Programming Manual
        Volume 7A:XView Programming Manual
        Volume 8:X Window System Administrator's Guide

X Window å›¾å½¢ç¨‹åºåŸºæœ¬è¿è¡Œè¿‡ç¨‹ï¼š

- ç”¨æˆ·é€šè¿‡é¼ æ ‡é”®ç›˜å¯¹ X server ä¸‹è¾¾æ“ä½œå‘½ä»¤ 
- X server åˆ©ç”¨ Event ä¼ é€’ç”¨æˆ·æ“ä½œä¿¡æ¯ç»™ X client 
- X client è¿ç®—ç›¸åº”çš„ç¨‹åºè¿ç®— 
- X client åˆ©ç”¨ Request ä¼ å›æ‰€è¦æ˜¾ç¤ºçš„ç»“æœ 
- X server å°†ç»“æœæ˜¾ç¤ºåœ¨å±å¹•ä¸Š

X Window System ä½¿ç”¨ C/S ç»“æ„è®¾è®¡çš„å¥½å¤„ï¼š

- é‡‡ç”¨ C/S æ¶æ„å¯ä»¥è§£è€¦ï¼Œclient å¯ä»¥é‡‡ç”¨ä»»æ„è¯­è¨€å¼€å‘ï¼Œåªè¦ç¬¦åˆ X11 Protocol è¦æ±‚ã€‚
- èµ„æºç»Ÿä¸€ç®¡ç†ï¼Œæ–¹ä¾¿å…±äº«ã€‚X server æ¥ç®¡ç¡¬ä»¶åŠè¾“å…¥äº‹ä»¶ï¼Œclinet å¯ä»¥æ–¹ä¾¿å…±äº«ä½¿ç”¨ï¼Œä¹Ÿå¯ä¸»åŠ¨ç»™å„ä¸ª clients å‘æ¶ˆæ¯ã€‚
- è¿œç¨‹æ˜¾ç¤ºæ”¯æŒï¼Œä¸€èˆ¬æ¥è¯´ server å’Œ client æ˜¯åœ¨åŒä¸€å°ç”µè„‘ä¸Šï¼Œåœ¨ä¸åŒç½‘ç»œçš„ç”µè„‘ä¸Šè¿è¡Œå°±æ˜¯è¿œç¨‹ç™»å½•ã€‚

å®¢æˆ·ç«¯ï¼ˆX clientï¼‰é€šå¸¸æ˜¯å„ç±» GUI åº”ç”¨ï¼Œä¾‹å¦‚ Firefox æµè§ˆå™¨ã€xtermã€xclock ç­‰ç­‰ã€‚å±å¹•ï¼ˆscreenï¼‰
æ˜¯é€»è¾‘æ¦‚å¿µä¸Šçš„å±å¹•ï¼Œå¯ä»¥æ˜¯ä¸€å°ç‰©ç†æ˜¾ç¤ºå™¨ã€å¤šå°ç‰©ç†æ˜¾ç¤ºå™¨æˆ–è€…æ˜¯ VNC è™šæ‹Ÿæ˜¾ç¤ºå™¨ã€‚å®¢æˆ·ç«¯ä¸æœåŠ¡ç«¯çš„é€šä¿¡
æ–¹å¼æœ‰ä¸‰ç§ï¼šTCPï¼Œunix socket å’Œå…±äº«å†…å­˜é€šä¿¡ã€‚åä¸¤ç§æ–¹å¼ä»…é™äº X client ä¸ X server ä½äºåŒä¸€
ä¸»æœºå†…è¿è¡Œçš„æƒ…å†µï¼Œæ— éœ€ç½‘ç»œé“¾è·¯å¾„ï¼Œé€šä¿¡æ•ˆç‡æ›´é«˜ã€‚è¿™ç§è¿œç¨‹æ¸²æŸ“çš„å›¾å½¢ç³»ç»Ÿä¹Ÿç§°ä¸ºè¿œç¨‹æ¡Œé¢ï¼ˆRemote Desktopï¼‰ï¼Œ
ä½†æ˜¯ï¼Œè¿œç¨‹æ¡Œé¢é€šå¸¸æ˜¯ä»¥ä½å›¾å½¢å¼äº¤å®¢æˆ·ç«¯æ¡Œé¢å›¾åƒã€‚è€Œæ›´æœ‰æ•ˆç‡çš„æ–¹æ¡ˆæ˜¯åœ¨æœåŠ¡å™¨ç«¯å®ç°ç»˜å›¾é€»è¾‘ï¼Œå®¢æˆ·ç«¯åª
éœ€è¦å¾ˆå°çš„ç½‘ç»œå¸¦å®½æ¥ä¼ é€’ç»˜å›¾è¡Œä¸ºã€å›¾å½¢äº¤äº’äº‹ä»¶ã€‚

ä¸€å°ç”µè„‘ä¸Šå¯ä»¥è¿è¡Œå¤šä¸ª X serverï¼Œä¸€ä¸ª X server å¯ä»¥ç®¡ç†å¤šä¸ª screenï¼Œä¸€ä¸ª screen åˆå¯ä»¥å¯¹åº”
å•ä¸ªæˆ–å¤šä¸ªç‰©ç†æ˜¾ç¤ºå™¨ï¼Œå¤šä¸ªæ˜¾ç¤ºå™¨åˆæˆä¸€ä¸ªé€»è¾‘ screenã€‚åœ¨é…ç½®ç¯å¢ƒå˜é‡ DISPLAY çš„å‚æ•°å€¼åŒ…å«æ­¤ä¿¡æ¯ï¼Œ
å…¶æ ¼å¼ä¸º hostname:display.screenï¼Œå¯ä»¥ä½¿ç”¨ IP åœ°å€è¡¨ç¤ºä¸»æœºåï¼Œæœ¬åœ°è¿æ¥é€šå¸¸çœç•¥ã€‚åŠ å†’å·åæ¥
display:screenã€‚ä¾‹å¦‚ï¼Œlocalhost:10.0ï¼Œè¡¨ç¤ºé€šè¿‡ TCP åè®®å‘è¿œç¨‹æœºå™¨è‡ªèº«çš„ç¬¬ 10 å· X server
æ˜¾ç¤ºå™¨å‘é€ç»˜å›¾è¯·æ±‚ï¼Œå¹¶å°†å›¾å½¢ç»˜åˆ¶åˆ° 0 å·å±å¹•ä¸Šã€‚æœ€ç®€åŒ–çš„é…ç½®çœç•¥ä¸»æœºå’Œ displayï¼Œåªè®¾ç½® screen
ç¼–å·ï¼Œæ¯”å¦‚ ":0"ï¼Œè¡¨ç¤ºè¿æ¥åˆ°æœ¬åœ°é»˜è®¤çš„ X Serverã€‚

* https://goteleport.com/blog/x11-forwarding/
* https://unix.stackexchange.com/questions/503806/what-are-x-server-display-and-screen
* https://github.com/Xpra-org/xpra
* https://wiki.x2go.org/doku.php

The XFree86 Project, Inc is a global volunteer organization which produces 
XFree86Â®, the freely redistributable open-source implementation of the X Window 
System continuously since 1992.

XFree86 runs primarily on UNIXÂ® and UNIX-like operating systems like Linux, 
all of the BSD variants, Sun Solaris both native 32 and 64 bit support, Solaris 
x86, Mac OS X (via Darwin) as well as other platforms like OS/2 and Cygwin.

What XFree86 does, is provide a client/server interface between the display 
hardware (those physical things like the mouse, keyboard, and video displays) 
and the desktop environment, (this is typically called a window manager as it 
deals with how X is displayed i.e. the overall appearance). Yet X it goes 
beyond that and also gives the infrastructure and a standardized application 
interface (API).

All of this which makes XFree86 platform-independent, network-transparent 
and fully extensible. In short, XFree86 is the premier open source X11-based 
desktop infrastructure. Our group's goals and overall purpose are Detailed 
in goals and purpose detailed in our Mission Statement.

*   [XFree86](https://www.xfree86.org/)

Xorg æ˜¯ X Window ç³»ç»Ÿçš„ä¸€ä¸ªå¼€æºå®ç°ç‰ˆæœ¬ï¼Œå¹¶å·²æˆä¸ºå¤§å¤šæ•° Linux å‘è¡Œç‰ˆé»˜è®¤çš„ X Window ç³»ç»Ÿå®ç°ã€‚
å®ƒåŒ…å«äº† X Serverã€X Client å®¢æˆ·ç«¯åº”ç”¨ç¨‹åºä»¥åŠä¸€ç³»åˆ—å­—ä½“ã€‚Xorg çš„å‘å±•å……åˆ†åˆ©ç”¨äº†ç°ä»£ç¡¬ä»¶çš„å‘å±•ï¼Œ
æ”¯æŒ 3D å›¾å½¢åŠ é€Ÿã€é«˜åˆ†è¾¨ç‡æ˜¾ç¤ºå’Œå…ˆè¿›çš„è¾“å…¥è®¾å¤‡å¤„ç†ç­‰åŠŸèƒ½ã€‚ç°åœ¨å·²ç»æˆä¸º XFree86 çš„æ›¿ä»£äº§å“ã€‚Xorg
åŸºé‡‘ä¼šæœ¬èº«ä¹Ÿæ˜¯ä» XFree86 é¡¹ç›®ç»„åˆ†æ‹†å‡ºæ¥çš„æˆç«‹çš„ç»„ç»‡ï¼Œ2004 æˆç«‹ä»¥æ¥å¸¦é¢† Xorg å®ç°å¿«é€Ÿå–å¾—å¸‚åœºè®¤å¯ã€‚

In a period between close to the end of 2003 and beginning of 2004, there were 
attempts from leading XFree86.org project members to apply a few restrictions 
on the existing 1.0 license of the upcoming XFree86 X4.4.0 release. Since not 
all (developers, distributors, hardware vendors) were able or willing to agree 
with and implement that new licensing policy in their code, their development 
process and their products, they consequently split up and rejoined in the form 
of the X.Org Foundation.


Wayland æ˜¯ä¸€ä¸ªç›¸å¯¹è¾ƒæ–°çš„æ˜¾ç¤ºæœåŠ¡å™¨åè®®ï¼Œæ—¨åœ¨æä¾›æ¯”ä¼ ç»Ÿ X Window ç³»ç»Ÿæ›´ç®€å•ã€æ›´é«˜æ•ˆçš„æ–¹æ³•æ¥ç®¡ç†
çª—å£å’Œå¤„ç†è¾“å…¥è®¾å¤‡ã€‚Wayland ä¸é‡‡ç”¨ä¸ X Window ç³»ç»Ÿçš„å®¢æˆ·ç«¯/æœåŠ¡å™¨æ¨¡å‹ï¼Œè€Œæ˜¯ç›´æ¥åœ¨æœåŠ¡å™¨ä¸­å®ç°
å¤§éƒ¨åˆ†åŠŸèƒ½ï¼Œè¿™æ„å‘³ç€æ›´å°‘çš„å»¶è¿Ÿå’Œæ›´é«˜çš„æ€§èƒ½ã€‚Wayland è®¾è®¡ç›®æ ‡æ˜¯ç®€åŒ–æ¶æ„ï¼Œæé«˜å›¾å½¢æ¸²æŸ“çš„æ•ˆç‡å’Œå®‰å…¨æ€§ã€‚
å®ƒé€šè¿‡é¿å…ä¸å¿…è¦çš„ä¸­é—´å¤„ç†å’Œå‡å°‘ä¸Šä¸‹æ–‡åˆ‡æ¢ï¼Œå®ç°æ— ç¼å’Œæµç•…çš„å›¾å½¢ä½“éªŒã€‚Wayland åœ¨å®‰å…¨æ€§æ–¹é¢æå‡ºæ”¹è¿›ï¼Œ
æ¯”å¦‚é€šè¿‡ä¸¥æ ¼æ§åˆ¶åº”ç”¨ç¨‹åºå¯¹å±å¹•å†…å®¹çš„è®¿é—®ï¼Œä»¥é˜²æ­¢ä¿¡æ¯æ³„éœ²ã€‚

Wayland å’Œ Xorg éƒ½æ˜¯ç”¨äºå›¾å½¢æ˜¾ç¤ºçš„åè®®å’ŒæœåŠ¡å™¨è½¯ä»¶ï¼Œä½†å®ƒä»¬æœ‰ä¸€äº›é‡è¦çš„åŒºåˆ«ã€‚Wayland æ›´åŠ ç®€æ´
å’Œç°ä»£åŒ–ï¼Œå®ƒè®¾è®¡ç”¨äºæä¾›æ›´å¥½çš„æ€§èƒ½å’Œæ›´ä½çš„å»¶è¿Ÿã€‚è€Œ Xorg ç›¸å¯¹æ¯”è¾ƒå¤æ‚ï¼Œä½†ä¹Ÿæ›´åŠ æˆç†Ÿå’Œç¨³å®šã€‚Wayland
åœ¨æŸäº›æ–¹é¢å¯èƒ½æ¯” Xorg æ›´åŠ é€‚åˆäºä¸€äº›ç‰¹å®šçš„åº”ç”¨åœºæ™¯ï¼Œè€Œå¯¹äºå…¶ä»–ä¸€äº›ç‰¹å®šéœ€æ±‚ï¼ŒXorg å¯èƒ½ä»ç„¶æ˜¯æ›´å¥½çš„
é€‰æ‹©ã€‚ä¸¤è€…éƒ½åœ¨ä¸æ–­å‘å±•ï¼Œä»¥æ»¡è¶³ç”¨æˆ·å¯¹å›¾å½¢æ˜¾ç¤ºçš„ä¸åŒéœ€æ±‚ã€‚

X Window Architecture vs. Wayland Architecture

![X Window Architecture](https://wayland.freedesktop.org/x-architecture.png)
![Wayland Architecture](https://wayland.freedesktop.org/wayland-architecture.png)

X Window åœ¨æ¨å‡ºä¹‹åå¿«é€Ÿæ¼”åŒ–ï¼Œ1987 å¹´å…¶æ ¸å¿ƒåè®®å°±å·²ç»æ˜¯ç¬¬ 11 ç‰ˆæœ¬ï¼Œæ­¤æ„æ¶å°†"æä¾›æœºåˆ¶ï¼Œè€Œéç­–ç•¥"
è¿™ä¸ªå“²å­¦è´¯å½»åœ°éå¸¸å½»åº•ï¼Œä»¥è‡´äºæ ¸å¿ƒåè®®åŸºæœ¬ç¨³å®šï¼Œä¸éœ€è¦ç‰¹åˆ«å¤§çš„æ”¹åŠ¨ã€‚äºæ˜¯ä¹ï¼Œå‡ åå¹´åï¼Œåˆ°ç°åœ¨ï¼ŒX Window
ä¾ç„¶æ˜¯ X11 R7.7ã€‚X Window æ ¸å¿ƒå±‚ä¹‹å¤–æä¾›ä¸€ä¸ªæ‰©å±•å±‚ï¼Œå¼€å‘è€…å¯ä»¥å¼€å‘ç›¸åº”æ‰©å±•ï¼Œæ¥å®ç°è‡ªå·±çš„æ‰©å±•åè®®ï¼Œ
è¿™ä½¿å¾— X11 å…·æœ‰éå¸¸è‰¯å¥½çš„å¯æ‰©å±•æ€§ã€‚æ ¸å¿ƒæ‰©å±•å¦‚ä¸‹ï¼ŒModern Extensions To Xï¼š

*   XKB - X Keyboard Extension 
*   Xinput 2 - å¤šç‚¹è§¦æ‘¸è¾“å…¥æ”¯æŒï¼ŒMultiPointer X (MPX)
*   Composite - æ··æˆå™¨æ‰©å±•ï¼Œç”¨äºç¦»å±é‡ç»˜ã€‚
*   RandR and Xinerama - å±å¹•ç¼©æ”¾ã€æ—‹è½¬ï¼Œå¤šå±å¤„ç†æ‰©å±•ã€‚
*   SYNC - X Synchronization Extensionï¼Œç”¨äºæ¶ˆæ¯åŒæ­¥çš„æ‰©å±•ã€‚

X Window ç³»ç»Ÿæœ€åˆæ˜¯ä¸ºå“ªäº›åªæœ‰å‡  MB å†…å­˜çš„æœºå™¨è®¾è®¡çš„ï¼ŒComposite æ‰©å±•ç”¨äºåœ¨ç¦»å±ç¼“å†²å†…å­˜ï¼ˆoff-screenï¼‰
ä¸­ç»˜å›¾ï¼Œä»¥é¿å…æ—©æœŸæœºå™¨å› ä¸ºæ€§èƒ½å¯¼è‡´çš„ç”»é¢é¢‘é—ªç­‰ä¸ç¨³å®šé—®é¢˜ã€‚ä½†æ˜¯ï¼Œéšç€ç¡¬ä»¶å’Œ Linux ç³»ç»Ÿçš„å‘å±•ï¼Œè¿™ä¸ª
æ‰©å±•æ˜¾å¾—ç´¯èµ˜äº†ï¼Œå¹¶ä¸”ç°ä»£æœºå™¨çš„æ˜¾ç¤ºåˆ·æ–°é¢‘ç‡æ—©å·²ç»ä¸æ˜¯å‡ åå¹´å‰çš„æ°´å¹³ã€‚å› æ­¤ï¼Œæœ€æ–°çš„ Wayland åœ¨æ¶æ„è®¾è®¡
ä¸Šå°† Compositor çš„åŠŸèƒ½è§’è‰²æ•´åˆåˆ°äº†æœåŠ¡ç«¯ï¼Œå®ƒå°±åƒæ˜¯ X Server ï¼‹ Window Managerï¼Œé‡æ–°è®¾è®¡çš„æ„æ¶
æ›´ç®€å•è€Œä¸”é«˜æ•ˆï¼Œå®ƒä¸€ä¸¾è§£å†³äº† X Window å‘å±•è¿™ä¹ˆå¤šå¹´æ¥ç§¯ç´¯çš„ã€é€šè¿‡"æ‰©å±•"å»è§£å†³çš„é‚£äº›é—®é¢˜ã€‚

RandR è¡¨ç¤º The X Resize, Rotate and Reflect Extensionï¼Œå¦‚å…¶å…¨ç§°æ‰€ç¤ºï¼Œæ˜¯ä¸€ä¸ªç”¨äºå¤„ç†å›¾å½¢
æ—‹è½¬ä¸ç¼©æ”¾çš„æ‰©å±•ã€‚æœ€åˆ X Window è®¾è®¡æ˜¯ä¸€ä¸ª screen å¯¹åº”ä¸€ä¸ªç”¨æˆ·æ˜¾ç¤ºå™¨ï¼Œä¸ºäº†è§£å†³ç°ä»£å¤šæ˜¾ç¤ºé…ç½®éœ€è¦ï¼Œ
å¼•å…¥äº† Xinerama æ‰©å±•ï¼Œå®ƒå¯ä»¥å°†å¤šä¸ªè¾“å‡ºè®¾å¤‡å¯¹è±¡é›†åˆåˆ°ä¸€ä¸ªé€»è¾‘å±å¹•ï¼Œå®ç°ç•Œé¢è·¨å±ä¼¸ç¼©ã€‚

Xinerama å®é™…ä¸Šåœ¨ä¸€ä¸ªæ‰©å±•ä¸­æä¾›äº†ä¸¤ä¸ªå¯†åˆ‡ç›¸å…³çš„åŠŸèƒ½ï¼šåœ¨ X Server ä¸­çš„è®¾å¤‡ä¹‹é—´è¿›è¡Œå¤šè·¯å¤ç”¨ï¼Œä»¥åŠ
å…è®¸å®¢æˆ·ç«¯æŸ¥è¯¢ X Server ä»¥å‘ç°æ¯ä¸ªé€»è¾‘å±å¹•ä¸‹çš„è®¾å¤‡è¾¹ç•Œçš„åè®®ã€‚åæ¥ï¼Œç¡¬ä»¶å‘å±•åˆ°ä¸€ä¸ªå›¾å½¢é€‚é…å™¨é©±åŠ¨
å¤šä¸ªè¾“å‡ºè®¾å¤‡ï¼Œä¸€æ˜¾å¡é…ç½®å¤šä¸ªæ˜¾ç¤ºæ¥å£ï¼Œä¹Ÿæ˜¯å¸¸è§çš„ã€‚Xinerama åè®®è¢«é‡æ–°ç”¨äºè¿™äº›è®¾å¤‡ï¼šè¿™ä½¿å¾—èƒ½å¤Ÿä»
å¤šå¤´å¡ä¸­æ£€ç´¢ç›‘è§†å™¨ä¿¡æ¯ï¼Œå³ä½¿æ­¤ç”¨ä¾‹ä¸å†éœ€è¦å¤šè·¯å¤ç”¨åŠŸèƒ½ã€‚

Waylang is  a protocol between a compositor and its clients, not an X server 
and not a fork. The compositor sends input events to the clients. The clients 
render locally and then communicate video memory buffers and information 
about updates to those buffers back to the compositor.

Wayland is a replacement for the X11 window system protocol and architecture 
with the aim to be easier to develop, extend, and maintain.

Wayland is the language (protocol) that applications can use to talk to a 
display server in order to make themselves visible and get input from the 
user (a person). A Wayland server is called a "compositor". Applications 
are Wayland clients.

Wayland also refers to a system architecture. It is not just a server-client 
relationship between a compositor and applications. There is no single common 
Wayland server like Xorg is for X11, but every graphical environment brings 
with it one of many compositor implementations. Window management and the end 
user experience are often tied to the compositor rather than swappable components.

A core part of Wayland architecture is libwayland: an inter-process communication 
library that translates a protocol definition in XML to a C language API. 
This library does not implement Wayland, it merely encodes and decodes 
Wayland messages. The actual implementations are in the various compositor 
and application toolkit projects.

Wayland does not restrict where and how it is used. A Wayland compositor 
could be a standalone display server running on Linux kernel modesetting 
and evdev input devices or on many other operating systems, or a nested 
compositor that itself is an X11 or Wayland application (client). Wayland 
can even be used in application-internal communication as is done in some 
web browsers.

æ¡Œé¢ç¯å¢ƒï¼ˆDesktop Environmentï¼‰æ˜¯æŒ‡æ“ä½œç³»ç»Ÿä¸Šçš„ä¸€ç§å›¾å½¢åŒ–æ“ä½œç¯å¢ƒï¼Œåœ¨å•†ä¸šæœåŠ¡å™¨ä¸Šé€šå¸¸ä¸éœ€è¦è¿™æ ·
çš„å›¾å½¢ç•Œé¢ï¼ŒæœåŠ¡å™¨çš„è¿ç»´æ´»åŠ¨ä¸€èˆ¬éƒ½é€šè¿‡è½¯ä»¶ç»ˆç«¯ï¼ˆTerminalï¼‰è¿è¡Œå‘½ä»¤çš„æ–¹å¼è¿›è¡Œç»´æŠ¤ã€‚è€Œä¸ªäººç”¨æˆ·ï¼Œå®¶åº­
æˆ–è€…åŠå…¬ç”¨æˆ·åˆ™æ˜¯æ¡Œé¢ç¯å¢ƒçš„ä¸»è¦ç”¨æˆ·ã€‚Windows æ˜¯å¾®è½¯å¼€å‘å°é—­æºä»£ç çš„è‡ªå¸¦æ¡Œé¢ç¯å¢ƒçš„æ“ä½œç³»ç»Ÿï¼Œç›¸æ¯”
Linux è¿™æ ·çš„å¼€æºæ“ä½œç³»ç»Ÿï¼Œå®ƒçš„å¼€å‘å»ºè®¾æ˜¯é€šè¿‡ç½‘ç»œä¸Šçš„ä¼—å¤šå¼€å‘è€…ï¼ˆä¼°è®¡å‡ ç™¾ä¸‡ï¼‰ï¼Œé›†ä¼—äººä¹‹åŠ›å®Œæˆçš„ä¸€ä¸ª
å¼ºå¤§çš„æ“ä½œç³»ç»Ÿï¼Œå®ƒçš„è¯ç”Ÿæºè‡ª Linus ä¸ªäººçš„åœ¨å¤§å­¦æ—¶æœŸçš„ä¸€ä¸ªå°ä½œå“ï¼Œæ…¢æ…¢æˆé•¿ä¸ºå½“å‰æœ€æµè¡Œæœ€ç¨³å®šå¯é çš„
å¼€æºæ“ä½œç³»ç»Ÿã€‚Linux æœ¬èº«ä¸å«å›¾å½¢ç•Œé¢ï¼Œå› æ­¤éœ€è¦é€šè¿‡ç¤¾åŒºåŠ›é‡å®ç°æ¡Œé¢ç¯å¢ƒï¼Œè¿™ä¹Ÿå°±æ˜¯ä¸ºä½• Linux ç³»ç»Ÿ
ä¸Šçš„æ¡Œé¢ç¯å¢ƒç¹èŠ±å…¥çœ¼ï¼Œä¹Ÿå ªç§°ç™¾èŠ±é½æ”¾äº†ã€‚

Linux ç¯å¢ƒä¸Šçš„å›¾å½¢ç•Œé¢å®ç°ä¸°å¯Œå¤šæ ·ï¼Œä»åè®®ã€æ„æ¶å±‚é¢ä¸Šçš„è®¾è®¡åˆ°å„ç§ä¸åŒçš„å…·ä½“å®ç°ï¼Œå®ƒä»¬ä¹‹é—´ä¸ä¸€å®š
åœ¨ä¸Šå±‚è®¾è®¡ä¸å…·ä½“å®ç°çš„åˆ†ç¦»ï¼Œä¹Ÿå­˜åœ¨æ„æ¶ä¸å®ç°ç»Ÿä¸€çš„æƒ…å†µï¼Œä¾‹å¦‚ Waylandï¼Œæˆ–è€… Xfce è½»é‡çº§æ¡Œé¢ç¯å¢ƒã€‚
æ¯«æ— ç–‘é—®ï¼ŒGNU/Linux å‘è¡Œç‰ˆçš„æ¡Œé¢ç¯å¢ƒå’Œçª—å£ç®¡ç†å™¨æ­£åœ¨èµ°å‘ï¼šWayland å›¾å½¢æœåŠ¡å™¨æ›¿ä»£ X11 (Xorg)ã€‚

æœ‰äº†è§†çª—å›¾å½¢ç³»ç»Ÿï¼Œè¿˜éœ€è¦æœ‰ç»˜åˆ¶å›¾å½¢ç•Œé¢çš„æ„æ¶ï¼Œä¾‹å¦‚ Qt æˆ–è€… GTK è¿™äº›å›¾å½¢æ¡†æ¶ã€‚é€šè¿‡å›¾å½¢æ¡†æ¶ï¼Œåº”ç”¨
å¼€å‘äººå‘˜å°±å¯ä»¥æ›´å¿«é€Ÿåœ°åˆ¶ä½œåº”ç”¨ç¨‹åºï¼Œè¿™ä¸ªè¿‡ç¨‹ç±»ä¼¼ä¸€ä¸ªç»„ä»¶ç»„è£…ã€æ­ç§¯æœ¨çš„è¿‡ç¨‹ã€‚

[GTK](https://docs.gtk.org/gtk4/getting_started.html) 

A feature-rich development tool

GTK has all the features that a widget toolkit needs to have. These features 
make it the most trusted toolkit for developing Linux applications.

Create apps that users just love

Offering a complete set of UI elements, GTK is suitable for projects ranging 
from small one-off tools to complete application suites.

åŸºäº X Window ç­‰å›¾å½¢ç³»ç»Ÿæ¡†æ¶ä¹‹ä¸Šï¼ŒLinxu ç”¨æˆ·å¯ä»¥æœ‰å¤šç§æ¡Œé¢ç¯å¢ƒé€‰æ‹©ï¼Œä»¥ç”¨æˆ·ä¸ºä¸­å¿ƒçš„æ¡Œé¢ç¯å¢ƒåŒ…æ‹¬ï¼š

*   [GNOME](https://www.gnome.org/)
    GNOME (/É¡noÊŠm/) is a desktop environment that aims to be simple and easy 
    to use. It is designed by The GNOME Project and is composed entirely of 
    free and open-source software. The default display is Wayland instead of Xorg.

*   [KDE](https://develop.kde.org/products/frameworks/)

    The KDE Frameworks are add-on libraries for coding applications with Qt.

    The individual Frameworks are well documented, tested and their API style 
    will be familiar to Qt developers.

    Frameworks are developed under the proven KDE governance model with a 
    predictable release schedule, a clear and vendor neutral contributor 
    process, open governance and flexible LGPL or MIT licensing.

    The frameworks are cross-platform and function on Windows, Mac, Android and Linux.

*   [Xfce Desktop Environment](https://xfce.org/?lang=en)

    Xfce is a lightweight desktop environment for UNIX-like operating systems. 
    It aims to be fast and low on system resources, while still being visually 
    appealing and user friendly.

    Xfce embodies the traditional UNIX philosophy of modularity and re-usability. 
    It consists of a number of components that provide the full functionality 
    one can expect of a modern desktop environment. They are packaged separately 
    and you can pick among the available packages to create the optimal personal 
    working environment.

    Another priority of Xfce is an adherence to standards, specifically those 
    defined at freedesktop.org.

Windows æ“ä½œç³»ç»Ÿä¸Šä¹Ÿå¯ä»¥ä½¿ç”¨ WSL ç¯å¢ƒä½¿ç”¨è¿™äº›å›¾å½¢ç•Œé¢ï¼Œå¯ä»¥ä½¿ç”¨å¼€æºçš„ VcXsrvã€Xmingï¼Œæˆ–è€…æ”¶è´¹
è½¯ä»¶ MobaXtermï¼ˆä¸ªäººç‰ˆæœ¬å…è´¹ï¼‰ã€Xmanagerã€‚


## Xorg Sources [rsync]

Xorg æºä»£ç å¯ä»¥é€šè¿‡ HTTP/FTP ä»¥åŠ gitlab æˆ–è€… rsync åŒæ­¥å·¥å…·è·å–ï¼Œ

*   https://www.x.org/releases/individual/
*   https://ftp.kaist.ac.kr/x.org/X11R7.7/
*   https://gitlab.freedesktop.org/xorg

*   https://dbus.freedesktop.org/doc/dbus-specification.html
*   https://dbus.freedesktop.org/doc/dbus-daemon.1.html
*   [D-Bus Tutorial by Karunesh Johri](https://www.softprayog.in/programming/d-bus-tutorial)

Remote synchronization (rsync) æ˜¯ä¸€ä¸ªå¸¸ç”¨çš„ Linux æ–‡ä»¶åŒæ­¥åº”ç”¨ç¨‹åºï¼Œå®ƒä¸ä»…å¯ä»¥åœ¨æœ¬åœ°è®¡ç®—æœº
åŒæ­¥æ–‡ä»¶ï¼Œè¿˜å¯ä»¥ä¸è¿œç¨‹è®¡ç®—æœºåŒæ­¥æ–‡ä»¶ã€‚å®ƒä¹Ÿå¯ä»¥å½“ä½œæ–‡ä»¶å¤åˆ¶å·¥å…·ï¼Œæ›¿ä»£ cp å’Œ mv å‘½ä»¤ã€‚ä¸å…¶ä»–æ–‡ä»¶ä¼ è¾“
å·¥å…·ä¸åŒï¼ˆFTP æˆ– scpï¼‰ï¼Œrsync çš„æœ€å¤§ç‰¹ç‚¹æ˜¯ä¼šæ£€æŸ¥å‘é€æ–¹å’Œæ¥æ”¶æ–¹å·²æœ‰çš„æ–‡ä»¶ï¼Œä»…ä¼ è¾“æœ‰å˜åŠ¨çš„éƒ¨åˆ†ï¼Œ
é»˜è®¤è§„åˆ™æ˜¯æ ¹æ®æ–‡ä»¶å¤§å°æˆ–ä¿®æ”¹æ—¶é—´å˜åŠ¨ã€‚rsync æ”¯æŒç‰¹æ€§ï¼š

*   å¯ä»¥é•œåƒä¿å­˜æ•´ä¸ªç›®å½•æ ‘å’Œæ–‡ä»¶ç³»ç»Ÿæ–‡ä»¶ç³»ç»Ÿã€‚
*   å¯ä»¥å¾ˆå®¹æ˜“åšåˆ°ä¿æŒåŸæ¥æ–‡ä»¶çš„æƒé™ã€æ—¶é—´ã€è½¯ç¡¬é“¾æ¥ç­‰ç­‰ã€‚
*   æ— é¡»ç‰¹æ®Šæƒé™å³å¯å®‰è£…ã€‚
*   å¿«é€Ÿï¼šé¦–æ¬¡åŒæ­¥ä¼šå¤åˆ¶å…¨éƒ¨å†…å®¹ï¼Œåç»­åŒæ­¥åªä¼ è¾“æ”¹åŠ¨æ–‡ä»¶ã€‚ä½¿ç”¨æ•°æ®å‹ç¼©ä¼ è¾“ï¼ŒèŠ‚çœå¸¦å®½ã€‚
*   å®‰å…¨ï¼šå¯ä»¥ä½¿ç”¨ scpã€ssh ç­‰æ–¹å¼æ¥ä¼ è¾“æ–‡ä»¶ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥é€šè¿‡ç›´æ¥çš„socketè¿æ¥ã€‚
*   æ”¯æŒåŒ¿åä¼ è¾“ï¼Œä»¥æ–¹ä¾¿è¿›è¡Œç½‘ç«™é•œåƒã€‚

æ€»ç»“ï¼šä¸€ä¸ª rsync å‘½ä»¤ç›¸å½“äº scpã€cpã€rm å‘½ä»¤ï¼Œä½†æ˜¯æ¯”å®ƒä»¬å‘½ä»¤æ›´èƒœä¸€ç­¹ã€‚

rsyncä½¿ç”¨æ–¹å¼æœ‰ä¸‰ç§ï¼š

*   Local æœ¬åœ°æ¨¡å¼ï¼Œä¸»æœºæœ¬åœ°ä¹‹é—´çš„æ•°æ®ä¼ è¾“ï¼ˆæ­¤æ—¶ç±»ä¼¼äº cp å‘½ä»¤çš„åŠŸèƒ½ï¼‰ã€‚
*   Access via remote shellï¼Œå€ŸåŠ© rcp æˆ– ssh ç­‰é€šé“æ¥è¿›è¡Œè¿œç¨‹æ•°æ®ä¼ è¾“ï¼ˆæ­¤æ—¶ç±»ä¼¼äº scp å‘½ä»¤çš„åŠŸèƒ½ï¼‰ã€‚
*   daemon å®ˆæŠ¤è¿›ç¨‹æ¨¡å¼ï¼Œæœ¬åœ°ä¸»æœºè¿æ¥ç½‘ç»œè¿œç¨‹ä¸»æœºä¸Šçš„ rsync daemon å®ˆæŠ¤è¿›ç¨‹è¿›è¡Œè¿œç¨‹æ–‡ä»¶ä¼ è¾“ã€‚

è¿œç¨‹åŒæ­¥æ–‡ä»¶ç™»å½• remote ä¸»æœºè¦å…ˆè®¤è¯ï¼Œè®¤è¯è¿‡ç¨‹ä¸­ç”¨åˆ°çš„åè®®æœ‰ 2 ç§ï¼šssh å’Œ rsync åè®®ã€‚
rsync daemon é»˜è®¤ç›‘å¬ TCP 873 ç«¯å£ã€‚è‡ªå¸¦çš„ rsync:// åè®®è®¤è¯æ˜¯é»˜è®¤æ–¹å¼ï¼Œä¹Ÿæ˜¯å¸¸ç”¨æ–¹å¼ã€‚

æ³¨æ„ï¼šrsync-daemon è®¤è¯æ–¹å¼ï¼Œéœ€è¦æœåŠ¡å™¨å’Œå®¢æˆ·ç«¯éƒ½å®‰è£… rsyncï¼Œä½†æ˜¯åªéœ€è¦æœåŠ¡å™¨ç«¯å¯åŠ¨ rsync å®ˆæŠ¤
è¿›ç¨‹æœåŠ¡ï¼ŒåŒæ—¶è®¾ç½® /etc/rsyncd.conf é…ç½®æ–‡ä»¶ã€‚å®¢æˆ·ç«¯å¯åŠ¨ä¸å¯åŠ¨ rsync æœåŠ¡ã€‚

SSH è®¤è¯æ–¹å¼ä¸‹ï¼Œå¯é€šè¿‡ç³»ç»Ÿç”¨æˆ·è¿›è¡Œè®¤è¯ï¼Œrsync é€šè¿‡ ssh éš§é“è¿›è¡Œä¼ è¾“ï¼Œç±»ä¼¼äº scp å·¥å…·ã€‚åŒæ­¥æ“ä½œ
ä¸å±€é™äº rsync ä¸­å®šä¹‰çš„åŒæ­¥æ–‡ä»¶å¤¹ï¼Œä¹Ÿä¸éœ€è¦ç”¨ 873 ç«¯å£è¿›è¡Œä¼ è¾“ï¼Œè€Œä½¿ç”¨ SSH ç«¯å£ä¼ è¾“æ•°æ®ã€‚ä¹Ÿä¸éœ€
è¦ rsync æœåŠ¡å’Œé…ç½®æ–‡ä»¶ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹å‘½ä»¤å¯ç”¨ SSH é€šé“åŒæ­¥æ–‡ä»¶ï¼Œä½¿ç”¨å‹ç¼©æ•°æ®ä¼ è¾“ï¼ˆ-zï¼‰å’Œä¿æŒæ–‡ä»¶
å½’æ¡£å±æ€§ï¼ˆ-aï¼‰ï¼š

    rsync -avz /SRC -e ssh root@192.168.100.10:/DEST 

    rsync -avz /SRC -e "ssh -p22" root@192.168.100.10:/DEST  

    rsync -avz --delete --exclude=**/stats --exclude=**/error -e "ssh -i /root/rsync/mirror-rsync-key" someuser@example.com:/var/www/

å‘½ä»¤åŸºæœ¬ç”¨æ³•ï¼š

    Local:
        rsync [OPTION...] SRC... [DEST]

    Access via remote shell:
        Pull:
            rsync [OPTION...] [USER@]HOST:SRC... [DEST]
        Push:
            rsync [OPTION...] SRC... [USER@]HOST:DEST

    Access via rsync daemon:
        Pull:
            rsync [OPTION...] [USER@]HOST::SRC... [DEST]
            rsync [OPTION...] rsync://[USER@]HOST[:PORT]/SRC... [DEST]
        Push:
            rsync [OPTION...] SRC... [USER@]HOST::DEST
            rsync [OPTION...] SRC... rsync://[USER@]HOST[:PORT]/DEST)

The ':' usages connect via remote shell, while '::' & 'rsync://' usages connect
to an rsync daemon, and require SRC or DEST to start with a module name.

åŒæ—¶åŒ…å«æœåŠ¡ç«¯ï¼Œå› æ­¤å¯ä»¥æ”¯æŒ rsync:// åè®®è¿›è¡Œæ–‡ä»¶ä¼ è¾“ã€‚è®¿é—®çš„èµ„æºä½¿ç”¨ module name æŒ‡å®šï¼Œ
åœ¨æ‰§è¡Œå‘½ä»¤æ—¶çœç•¥ module name å¯ä»¥è·å– rsync å®ˆæŠ¤ç¨‹åºåˆ†é…çš„æ‰€æœ‰ module åç§°åˆ—è¡¨ï¼Œå°±åƒ
ls å‘½ä»¤åˆ—è¡¨æ ¹ç›®å½•ä¸€æ ·ï¼š

    rsync rsync://ftp.kaist.ac.kr/
    rsync rsync://ftp.kaist.ac.kr/x.org
    rsync -r -a rsync://ftp.kaist.ac.kr/x.org/X11R7.7/ x.org_X11R7.7

ä½¿ç”¨ rsync --daemon --help æŸ¥çœ‹æœåŠ¡ç«¯å¯åŠ¨å‘½ä»¤ä½¿ç”¨æ–¹å¼ã€‚

rsync æ”¯æŒå¢é‡å¤‡ä»½ï¼Œä¹Ÿå°±æ˜¯é»˜è®¤åªå¤åˆ¶æœ‰å˜åŠ¨çš„æ–‡ä»¶ã€‚--link-dest å‚æ•°ç”¨æ¥æŒ‡å®šåŒæ­¥æ—¶çš„åŸºå‡†ç›®å½•ï¼Œ
SRC ç›®å½•çš„æ–‡ä»¶ä¸åŸºå‡†æ–‡ä»¶æ¯”è¾ƒï¼Œæ‰¾å‡ºå˜åŠ¨çš„éƒ¨åˆ†å¤åˆ¶åˆ° DEST ç›®å½•ã€‚DEST ç›®å½•ä¸­åŒ…å«æ‰€æœ‰æ–‡ä»¶ï¼Œå®é™…ä¸Šï¼Œ
åªæœ‰é‚£äº›å˜åŠ¨è¿‡çš„æ–‡ä»¶æ˜¯å¤åˆ¶çš„å‰¯æœ¬ï¼Œå…¶ä»–æ²¡æœ‰å˜åŠ¨çš„æ–‡ä»¶éƒ½æ˜¯æŒ‡å‘åŸºå‡†ç›®å½•æ–‡ä»¶çš„ç¡¬é“¾æ¥ã€‚

æ³¨æ„ï¼šx.org ä»£ç æ–‡ä»¶ä¸­ä½¿ç”¨äº†ç¬¦å·é“¾æ¥ï¼Œå¹¶ä¸”è¶…å‡ºäº†ç›®å½•å±‚çº§ï¼Œæ‰€ä»¥ rsync æœåŠ¡å™¨åªæä¾›äº†æ–‡æ¡£æ–‡ä»¶ã€‚
æœ€æ–°ç‰ˆæœ¬ X11R7.7 ä»£ç æ–‡ä»¶é“¾æ¥åˆ°äº† individual ç›®å½•ã€‚

1. å¦‚æœ SRC å­˜åœ¨é“¾æ¥æ–‡ä»¶å¹¶ä¸”æ²¡æœ‰ä½¿ç”¨ -a å½’æ¡£æ¨¡å¼æˆ–ä½¿ç”¨ --linksï¼Œåˆ™ä¼šæç¤º skipping non-regular file
2. å¦‚æœ SRC å­˜åœ¨å­ç›®å½•å¹¶ä¸”æ²¡æœ‰ä½¿ç”¨ -r ç›®å½•é€’å½’æ¨¡å¼ï¼Œåˆ™ä¼šæç¤º skipping directory

/etc/rsyncd.conf é…ç½®æ–‡ä»¶å‚è€ƒï¼Œæ³¨æ„ï¼Œåªæœ‰è¡Œé¦–ä»¥ # å¼€å§‹æ‰è¢«è®¤ä¸ºæ˜¯æ³¨é‡Šã€‚åé¢å‡ºç°çš„ # å¹¶ä¸è¡¨ç¤º
é…ç½®æ–‡ä»¶ä¸­çš„æ³¨è§£ï¼Œéœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¸­åˆ é™¤ï¼š

    # GLOBAL PARAMETERS
    log file = /var/log/rsyncd.log      # æ—¥å¿—æ–‡ä»¶ä½ç½®ï¼Œå¯åŠ¨ rsync åè‡ªåŠ¨äº§ç”Ÿè¿™ä¸ªæ–‡ä»¶ï¼Œæ— éœ€æå‰åˆ›å»º
    pidfile = /var/run/rsyncd.pid       # è¿›ç¨‹æ ‡å¿—æ–‡ä»¶ pid çš„å­˜æ”¾ä½ç½®
    lock file = /var/run/rsyncd.lock    # æ”¯æŒ max connections å‚æ•°çš„é”æ–‡ä»¶

    # MODULE PARAMETERS
    [module_test]                       # è‡ªå®šä¹‰åŒæ­¥æ¨¡å—åç§° module name 
    path = /tmp/                        # rsync ç›®æ ‡ä¸»æœºæ•°æ®å­˜æ”¾è·¯å¾„ï¼Œæºä¸»æœºçš„æ•°æ®å°†åŒæ­¥è‡³æ­¤ç›®å½•
    comment = sync etc from client
    dont compress = *.gz *.bz2 *.zip
    uid = root                          # è®¾ç½® daemon ä½œä¸º root è¿è¡Œæ—¶çš„æ–‡ä»¶ä¼ è¾“æ›¿ä»£è´¦æˆ·
    gid = root                          # è®¾ç½® daemon ä½œä¸º root è¿è¡Œæ—¶çš„æ–‡ä»¶ä¼ è¾“æ›¿ä»£è´¦æˆ·ç»„
    port = 873                          # é»˜è®¤ç«¯å£
    ignore errors                       # è¡¨ç¤ºå‡ºç°é”™è¯¯å¿½ç•¥é”™è¯¯
    use chroot = no                     # é»˜è®¤ä¸º trueï¼Œä¿®æ”¹ä¸º noï¼Œå¢åŠ å¯¹ç›®å½•æ–‡ä»¶è½¯è¿æ¥çš„å¤‡ä»½
    read only = no                      # è®¾ç½® rsync æºä¸»æœºä¸ºè¯»å†™æƒé™
    list = no                           # ä¸æ˜¾ç¤º rsync æºä¸»æœºèµ„æºåˆ—è¡¨
    max connections = 200               # æœ€å¤§è¿æ¥æ•°
    timeout = 600                       # è®¾ç½®è¶…æ—¶æ—¶é—´
    auth users = admin                  # æ‰§è¡Œæ•°æ®åŒæ­¥çš„ç”¨æˆ·åï¼Œå¤šä¸ªç”¨æˆ·åä½¿ç”¨é€—å·åˆ†éš”ã€‚
    secrets file = /etc/rsyncd.secrets  # ç”¨æˆ·è®¤è¯é…ç½®æ–‡ä»¶ï¼Œé‡Œé¢ä¿å­˜ç”¨æˆ·åç§°å’Œå¯†ç ï¼Œå¿…é¡»æ‰‹åŠ¨åˆ›å»ºè¿™ä¸ªæ–‡ä»¶
    hosts allow = 192.168.0.104         # å…è®¸è¿›è¡Œæ•°æ®åŒæ­¥çš„æºä¸»æœº IP åœ°å€ï¼Œå¤šä¸ªåœ°å€ä½¿ç”¨é€—å·åˆ†éš”ã€‚
    hosts deny = 192.168.110.10         # ç¦æ­¢æ•°æ®åŒæ­¥çš„æºä¸»æœº IP åœ°å€ï¼Œå¤šä¸ªåœ°å€ä½¿ç”¨é€—å·åˆ†éš”ã€‚

ä»¥ä¸Šé…ç½®æ–‡ä»¶å®šä¹‰äº†ä¸€ä¸ªå¯åŒæ­¥çš„æ¨¡å— module_testï¼Œä½¿ç”¨ä»¥ä¸‹å‘½ä»¤å°±å¯ä»¥å’ŒæœåŠ¡å™¨é€šè¿›è¡Œæ–‡ä»¶åŒæ­¥ï¼š

    rsync rsync://localhost/module_test
    rsync rsync://Jeango@localhost/module_test

è®¤è¯é…ç½®åŒ…å« auth users ä¸­æŒ‡å®šçš„ç”¨æˆ·åˆ—è¡¨ï¼Œæ ¼å¼ä¸º username:optionï¼Œå¦‚æœç”¨æˆ·åå«ç©ºæ ¼ï¼Œé‚£ä¹ˆå¯ä»¥
ä½¿ç”¨é€—å·å¼€å¤´è¡¨ç¤ºæ­¤é…ç½®é¡¹åªèƒ½é€—å·ä¸ºåˆ†éš”ç¬¦å·ã€‚é»˜è®¤å…è®¸æ— å¯†ç çš„åŒ¿åæ–¹å¼è®¿é—®ï¼Œ"anonymous rsync"ã€‚

    auth users = joe:deny @guest:deny admin:rw @rsync:ro susan joe sam
    auth users = , joe:deny, @Some Group:deny, admin:rw, @RO Group:ro

é€‰é¡¹åŒ…æ‹¬ï¼šæ‹’ç»ç”¨æˆ·ï¼ˆç»„ï¼‰è¿æ¥ denyï¼Œåªè¯»è®¿é—® ro (read-only) æˆ–è€…å¯è¯»å†™è®¿é—® rw (read/write)ã€‚

ç”¨æˆ·è´¦æˆ·å¯¹åº”çš„å¯†ç ä¿å­˜åœ¨ secrets file æŒ‡å®šçš„å¯†ç æœ¬æ–‡ä»¶ä¸­ï¼Œæ¯”å¦‚ /etc/rsyncd.secretsï¼Œå†…å®¹æ ¼å¼
ä¸º username:password æˆ–è€… @groupname:passwordï¼Œæ¯ä¸ªè´¦æˆ·é…ç½®å æ®ä¸€è¡Œã€‚å¯†ç æœ¬åœ¨æ¯æ¬¡éªŒè¯æ—¶ä¼š
é‡æ–°è¯»å–ï¼Œå› æ­¤æ›´æ–°å¯†ç ä¸éœ€è¦é‡å¯æœåŠ¡è¿›ç¨‹ã€‚

æ³¨æ„ï¼Œå¿…é¡»ä¿è¯ secrets file æ–‡ä»¶æ‹¥æœ‰è€…å¿…é¡»å’Œè¿è¡Œ deamon è¿›ç¨‹çš„æ˜¯åŒä¸€ä¸ªè´¦æˆ·ã€‚å‡è®¾ root è´¦æˆ·è¿è¡Œ
rsync --daemonï¼Œåˆ™ secrets file çš„ owner ä¹Ÿå¿…é¡»æ˜¯ rootï¼Œå¹¶ä¸”å¿…é¡»ä¸ºè¯»å†™æƒé™ 600ã€‚å¯ä»¥è®¾ç½®
strict modes = false æ¥ç¦ç”¨å¯†ç æœ¬æ–‡ä»¶çš„æ‰€æœ‰è€…æ£€æŸ¥ï¼Œæ­¤åŠŸèƒ½é€‚ç”¨äº Windows æ“ä½œç³»ç»Ÿä¸Šè¿è¡Œ rsyncã€‚
æ‰§è¡Œå®¢æˆ·ç«¯å‘½ä»¤è¿æ¥æ—¶ï¼Œå¯ä»¥é€šè¿‡ --password-file=FILE æŒ‡å®šå¯†ç æ–‡ä»¶ï¼Œé¿å…æ‰‹åŠ¨è¾“å…¥å¯†ç ã€‚å®¢æˆ·ç«¯ä½¿ç”¨
çš„å¯†ç æ–‡ä»¶ä¸ç”¨å¸¦ç”¨æˆ·åï¼Œåªéœ€è¦å¯†ç ã€‚

    chmod 600 /etc/rsyncd.secrets
    chown  admin:Administrators /etc/rsyncd.secrets

å¯ä»¥ä½¿ç”¨ç¯å¢ƒå˜é‡æ¥è®¾ç½®å®¢æˆ·ç«¯ç™»å½•å¯†ç ï¼Œé¿å…æ‰‹åŠ¨è½¯ä»¶ï¼š

    export RSYNC_PASSWORD=your-password

rsync å¸¸è§é”™è¯¯ï¼š

*   @ERROR: invalid uid  é…ç½®ä¸å­˜åœ¨çš„ç”¨æˆ·åï¼Œæœªé…ç½®è®¤è¯ï¼ˆå¯†ç æœ¬å’Œè®¤è¯ç”¨æˆ·åï¼‰æƒ…å†µä¸‹è®¾ç½® uidã€‚
*   @ERROR: invalid gid  ä¸å­˜åœ¨ç›¸åº”çš„ç”¨æˆ·ç»„ã€‚
*   @ERROR: setuid failed å®ˆæŠ¤è¿›ç¨‹çš„è´¦å·æ— æƒä¿®æ”¹ setuidï¼ŒOperation not permittedã€‚
*   @ERROR: auth failed on module é…ç½®æ–‡ä»¶æ²¡æœ‰é…ç½®ç›¸åº”çš„æ¨¡å—ã€‚
*   @ERROR: chroot failed   æœåŠ¡å™¨ç«¯çš„ç›®å½•ä¸å­˜åœ¨æˆ–æ— æƒé™ï¼Œåˆ›å»ºç›®å½•å¹¶ä¿®æ­£æƒé™å¯è§£å†³é—®é¢˜ã€‚
*   @ERROR: Unknown module  æ¨¡å—åé”™è¯¯ï¼Œè¯·æ±‚çš„æ¨¡å—ä¸é…ç½®æ–‡ä»¶ä¸­å®šä¹‰çš„æ¨¡å—åä¸ä¸€è‡´ã€‚
*   ERROR: password file must not be other-accessible å®¢æˆ·ç«¯æŒ‡å®šçš„å¯†ç æ–‡ä»¶å¯è¢«å…¶å®ƒç”¨æˆ·è®¿é—®ã€‚

é€šè¿‡ log file æŒ‡å®šçš„æ—¥å¿—æ–‡ä»¶å†…å®¹æŸ¥é”™ï¼Œä»¥ä¸‹æ˜¯å®¢æˆ·ç«¯ä¸¤ä¸ªå‘½ä»¤å¯¹åº”çš„æœåŠ¡ç«¯å“åº”æ—¥å¿—è®°å½•ï¼š

    ==> rsync rsync://localhost/module_test
    2024/10/20 00:08:25 [1864] Global parameter port found in module section!
    2024/10/20 00:08:25 [1864] params.c:Parameter() - Ignoring badly formed line in config file: ignore errors
    2024/10/20 00:08:25 [1864] ::1 is not a known address for "DESKTOP-CBSK60R": spoofed address?
    2024/10/20 00:08:25 [1864] connect from UNKNOWN (::1)
    2024/10/20 00:08:25 [1864] rsync allowed access on module module_test from UNKNOWN (::1)
    2024/10/20 00:08:29 [1864] auth failed on module module_test from UNKNOWN (::1) for OCEAN: password mismatch

    ==> rsync rsync://Jeango@localhost/module_test
    2024/10/20 00:28:26 [1903] Global parameter port found in module section!
    2024/10/20 00:28:26 [1903] params.c:Parameter() - Ignoring badly formed line in config file: ignore errors
    2024/10/20 00:28:26 [1903] ::1 is not a known address for "DESKTOP-CBSK60R": spoofed address?
    2024/10/20 00:28:26 [1903] connect from UNKNOWN (::1)
    2024/10/20 00:28:26 [1903] rsync allowed access on module module_test from UNKNOWN (::1)
    2024/10/20 00:28:28 [1903] rsync on module_test/ from Jeango@UNKNOWN (::1)
    2024/10/20 00:28:28 [1903] building file list
    2024/10/20 00:28:28 [1903] sent 370 bytes  received 29 bytes  total size 441973

å¯ä»¥çœ‹åˆ°ï¼Œå®¢æˆ·ç«¯æ²¡æœ‰æŒ‡å®šç”¨æˆ·åæ—¶ï¼Œä¼šè‡ªåŠ¨ä½¿ç”¨ä¸€ä¸ªè´¦æˆ·è¿›è¡Œç™»å½•ï¼Œè¿™ä¸ªè´¦æˆ·å¯èƒ½ä¸è¿è¡ŒæœåŠ¡ç«¯æ—¶ä½¿ç”¨çš„è´¦æˆ·æœ‰å…³ï¼Œ
ä¹Ÿå¯ä»¥ä¸å®¢æˆ·ç«¯å½“å‰è´¦æˆ·æœ‰å…³ï¼Œä½†æ˜¯æœ‰å¯èƒ½ä¼šå‡ºç° nobody ç”¨æˆ·åçš„æƒ…å†µï¼ŒåŸå› æœªæ˜ã€‚æ€»ç»“ä¸€ä¸‹ï¼ŒéªŒè¯å¤±è´¥çš„åŸå› 
å¤§æ¦‚æœ‰ä»¥ä¸‹å‡ ç§:

*   é…ç½®æ–‡ä»¶ä¸­æ²¡è®¾ç½®å½“å‰ç™»å½•ç”¨æˆ·ï¼Œno matching ruleï¼›
*   é…ç½®æ–‡ä»¶ä¸­å¯†ç æœ¬æ–‡ä»¶åé…ç½®é”™è¯¯ï¼Œno secrets fileï¼›
*   ç”¨æˆ·åæ­£ç¡®ä½†ä½¿ç”¨äº†é”™è¯¯çš„å¯†ç ï¼Œpassword mismatchï¼›
*   è®¾ç½®äº†ç”¨æˆ·åï¼Œä½†å¯†ç æœ¬ä¸­æ²¡æœ‰ç›¸åº”å¯†ç ï¼Œsecret not foundï¼›

è¯·æ±‚æœåŠ¡å™¨èµ„æºæ—¶ï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šæ¨¡å—åç§°ï¼Œé‚£ä¹ˆå°±æ˜¯åœ¨æ‰§è¡Œåˆ—è¡¨è¯·æ±‚ï¼ˆmodule-listï¼‰ã€‚é»˜è®¤çš„æ¨¡å—é…ç½®
ä¸ºå¯åˆ—è¡¨çŠ¶æ€ï¼Œlist = yesã€‚å¦‚æœè®¾ç½®ä¸º falseï¼Œå¹¶ä¸”å®¢æˆ·ç«¯è¢« hosts allow" å’Œ "hosts deny"
é…ç½®æ‹’ç»æ—¶ï¼Œå®ˆæŠ¤è¿›ç¨‹ä¼šå‡è£…æ¨¡å—ä¸å­˜åœ¨ã€‚å¦‚æœ reverse lookup é…ç½®ä¸ºå…¨å±€ç¦ç”¨ã€æ¨¡å—ä¸­å¯ç”¨æ—¶ï¼Œæ½œåœ¨
çš„å®¢æˆ·ç«¯æ§åˆ¶ DNS æœåŠ¡å™¨åå‘è§£é‡Šä¾ç„¶å¯ä»¥æ­ç¤ºå½“å‰è¿æ¥åˆ°ç›¸åº”æ¨¡å—çš„å®¢æˆ·ç«¯ã€‚

Realize that if "reverse lookup" is disabled globally but enabled for the module, 
the resulting reverse lookup to a potentially client-controlled DNS server may 
still reveal to the client that it hit an existing module. The default is for 
modules to be listable.

é…ç½®é¡¹ reverse lookup ç”¨äºåå‘åŸŸåè§£æï¼ˆæ ¹æ® IP æŸ¥è¯¢å…¶åŸŸåï¼‰ï¼Œå¦‚ä¸éœ€è¦è®°å½•å®¢æˆ·ç«¯ IP åœ°å€ï¼Œå¯ä»¥
ç¦ç”¨å®ƒæ¥èŠ‚çœæ—¶é—´ï¼ŒæœåŠ¡ç«¯ä¼šä½¿ç”¨ UNDETERMINED æ›¿ä»£ã€‚æ­¤åŠŸèƒ½ä¸ hosts allow å’Œ hosts denyï¼Œä»¥åŠ
æ—¥å¿—ä¸­çš„ %h ç‚¹ä½ç¬¦å·æœ‰å…³ã€‚æ­¤åŠŸèƒ½ï¼ˆå…¨å±€é…ç½®é¡¹ï¼‰é»˜è®¤å¯ç”¨ï¼Œå¯ä»¥è¿›è¡Œæ¨¡å—çº§é…ç½®ï¼Œå®ˆæŠ¤è¿›ç¨‹ä¼šåœ¨å®¢æˆ·ç«¯è¿æ¥
æ—¶ç«‹å³å°†ä¸»æœºåŸŸååå‘è§£é‡Šå¾—åˆ°å…¶ IP åœ°å€ã€‚

é…ç½®é¡¹ forward lookup ç”¨äºæ­£å‘åŸŸåè§£æï¼ˆæ ¹æ®åŸŸåæŸ¥è¯¢ IPï¼‰ï¼Œä¸ hosts allow/deny è®¾ç½®çš„åŸŸåç›¸å…³ã€‚

é…ç½®æ–‡ä»¶çš„é…ç½®å€¼è®¾ç½®ä¹æœ‰ç‚¹æ··ä¹±ï¼Œæ­¤é€‰é¡¹æœ‰ä¸‰å¥—é€‰é¡¹å€¼ï¼šyes/no, 0/1 or true/false éƒ½æ˜¯å¯èƒ½çš„å€¼ã€‚
é…ç½®æ–‡ä»¶ä»¥è¡Œä¸ºå•ä½ï¼Œé…ç½®è¦æ¢è¡Œå¯ä»¥ä½¿ç”¨ \ ç»“å°¾å¯¹æ¢è¡Œç¬¦å·è¿›è¡Œè½¬ä¹‰ã€‚æ¯ä¸ªé…ç½®é¡¹ä½¿ç”¨ = åˆ†éš”é…ç½®é¡¹åç§°
ä¸é…ç½®å€¼ã€‚æ³¨æ„ï¼Œåªæœ‰é¦–ä¸ª = ç¬¦å·æ‰æ˜¯é…ç½®é¡¹åˆ†éš”ç¬¦å·ã€‚

ä½¿ç”¨ use chroot é…ç½®é¡¹å°†å®ˆæŠ¤è¿›ç¨‹é™åˆ¶åœ¨æŸä¸ªç›®å½•å†…ä»¥æé«˜å®‰å…¨æ€§ï¼Œé»˜è®¤å€¼æ˜¯ trueã€‚ç¼ºç‚¹æ˜¯éœ€è¦ root æƒé™ï¼Œ
å¹¶ä¸”ä¸èƒ½å¤‡ä»½æŒ‡å‘ path å¤–éƒ¨çš„ç¬¦å·è¿æ¥æ‰€æŒ‡å‘çš„ç›®å½•æ–‡ä»¶ã€‚

*   use chroot é€‰é¡¹æœªè®¾ç½®ï¼ˆunsetï¼‰ï¼Œé»˜è®¤æƒ…å†µä¸‹ä¼šå°è¯•å¯ç”¨ chrootï¼Œå¤±è´¥æ—¶å…è®¸å®ˆæŠ¤è¿›ç¨‹ç»§ç»­ï¼ˆè®°å½•è­¦å‘Šï¼‰ã€‚
    ä¸€ä¸ªä¾‹å¤–æ˜¯ï¼Œå½“æ¨¡å—çš„è·¯å¾„ä¸­æœ‰ä¸€ä¸ª dot-dir â€œ/./â€ åˆ†éš”ç¬¦æ—¶ï¼Œè¿™ä¼šå¯¼è‡´è¯¥æ¨¡å—çš„ unset è¢«è§†ä¸º trueã€‚
    åœ¨ rsync 3.2.7 ä¹‹å‰ï¼Œé»˜è®¤å€¼ä¸º trueã€‚æ–°çš„ unset é»˜è®¤å€¼ä½¿ä»¥é root ç”¨æˆ·èº«ä»½è®¾ç½® rsync å®ˆæŠ¤è¿›ç¨‹
    æˆ–åœ¨ chroot å¤±è´¥çš„ç³»ç»Ÿä¸Šè¿è¡Œå®ˆæŠ¤è¿›ç¨‹å˜å¾—æ›´åŠ å®¹æ˜“ã€‚åœ¨ rsyncd.conf ä¸­å°†å€¼æ˜¾å¼è®¾ç½®ä¸º true æ€»æ˜¯éœ€è¦ chroot æˆåŠŸã€‚
*   use chroot = true è¡¨ç¤ºåœ¨ä¼ è¾“æ–‡ä»¶ä¹‹é—´å°†åˆ‡æ¢åˆ° path æŒ‡å®šçš„æ ¹ç›®å½•ã€‚
*   use chroot = false è¡¨ç¤ºå°† path è·¯å¾„ä¸­çš„ dot-dir /./ æ›¿ä»£ä¸º /ã€‚

    path = /var/rsync/./module1


[X server source layout](https://www.x.org/wiki/Development/)

    Xserver Directory Layout
    XXX: Add more directories, such as miext/ and the hw/kdrive/ subdirectories.

    =========== ================================================================
    Name        Explanation
    dix/        The device independent parts of X, for example the code used for 
                dispatching requests (see Dispatch() in dix/dispatch.c) and handling  
                resources. main() is located in this directory in main.c.
    doc/        Less documentation than would be expected - contains the X server  
                man page and an explanation of the scheduler.
    fb/         Code for doing graphical operations on framebuffer surfaces,  
                for example blitting and compositing images.
    hw/         Hardware dependent code, driver APIs and configuration file operations.
    hw/dmx/     Distributed Multi-Head X code - well documented in hw/dmx/doc/html/index.html.
    hw/kdrive/  The kdrive server and associated code.
    hw/xfree86/ Code associated with unix-like OSes, such as Linux or BSD.
    hw/xquartz/ Mac OS X specific code.
    hw/xwin/    Cygwin/X code, for running on Windows machines.
    include/    Xserver include files lie here.
    mi/         Machine independent code, used for things like high-level graphical  
                operations. Makes calls down to the fb/ code through function pointers  
                in screens, windows or gcs.
    os/         Operating system dependent code that does not control hardware,  
                things like authentication, or processing arguments passed to the  
                server (see ProcessCommandLine() in util.c for example).
    randr/      Code for the RandR extension.
    render/     Code for the Render extension.
    Xext/       Code for various extensions, for example Xinerama and Xv.
    xtrans/     Code for handling network connections.
    =========== ================================================================


# ğŸ£ WSL - Windows Subsystem for Linux
- [WSL Installation Guide for Windows 10](https://docs.microsoft.com/en-us/windows/wsl/install-win10)
- [WSL VSCode](https://docs.microsoft.com/en-us/windows/wsl/tutorials/wsl-vscode)
- [VSCode Remote Development](https://code.visualstudio.com/docs/remote/remote-overview)
- [VSCode Remote Development](https://code.visualstudio.com/docs/remote/wsl)
- [Using C++ and WSL in VS Code](https://code.visualstudio.com/docs/cpp/config-wsl)
- [chmod chown wsl improvements](https://devblogs.microsoft.com/commandline/chmod-chown-wsl-improvements/)
- [linux GTKã€KDEã€Gnomeã€XWindows å›¾å½¢ç•Œé¢](https://www.jb51.net/LINUXjishu/512251.html)
- WSL - Windows Subsystem for Linux & Xfce Desktop https://www.jianshu.com/p/2dd28c78355a

Windows 1607 x64 ä½ç‰ˆæœ¬åæä¾›äº† WSL - Windows Subsystem for Linux åŠŸèƒ½ï¼Œå³åœ¨ Windows
è¿è¡Œçš„ Linux å¼€å‘ç¯å¢ƒï¼Œèƒ½åŸç”Ÿè¿è¡Œ Linux ELF æ ¼å¼å¯æ‰§è¡Œæ–‡ä»¶ã€‚

WSL ç›®çš„æ˜¯è¿è¡Œ Bash å’Œ Linux æ ¸å¿ƒå‘½ä»¤è¡Œå·¥å…·ï¼Œå¹¶ä¸åŒ…å« GUI ç»„ä»¶ï¼Œæ‰€ä»¥ Gnome, KDE ç­‰å­ç³»ç»Ÿ
ä¸èƒ½ä½¿ç”¨ã€‚å¯¹äºä¸éœ€è¦å›¾å½¢çš„å¼€å‘ï¼ŒWSL ä½“éªŒç”šè‡³è¶…è¿‡äº†åœ¨çº¯ Linux ä¸‹å¼€å‘ï¼Œå› ä¸ºèŠ‚çœäº† GUI çš„æ¶ˆè€—ï¼Œ
ä½¿å¾—ç³»ç»Ÿæ„æƒ³ä¸åˆ°çš„ç¨³å®šã€‚è€Œä¸”æ²¡æœ‰è™šæ‹Ÿæœºé‚£æ¶å¿ƒçš„åœ°å€æ¡¥æ¥ã€è½¬æ¢ï¼ŒWindows çš„ç½‘ç»œé€šä¿¡åœ°å€å’Œç«¯å£ç›´æ¥
å¯ä»¥åœ¨ WSL ä¸Šä½¿ç”¨ã€‚

å› ä¸º WSL æ˜¯åŸºäºä»£ç è½¬è¯‘åŸç†å®ç°çš„ Linux åº”ç”¨è¿è¡Œï¼Œå› æ­¤ WSL ä¸æ”¯æŒå®Œæ•´çš„ GUI æ¡Œé¢ç¯å¢ƒï¼Œä½†æ˜¯ï¼Œ
å®ƒè‡³å°‘å¯ä»¥ä¸ºå¤§éƒ¨åˆ† Linux å·¥å…·æä¾›ä¸€ä¸ªæ­£å¸¸ Windows å·¥ä½œç¯å¢ƒã€‚WSL 2 å‡çº§åï¼Œå·²ç»å¯ä»¥å®ç° X Server
å›¾å½¢ç•Œé¢çš„æ”¯æŒï¼Œå·ç§° WSLgã€‚

Visual Studio Code å¼€å‘éå¸¸æ–¹ä¾¿ï¼Œåªéœ€è¦åœ¨ä¸»æœºä¸Šå®‰è£… VSCode æ’ä»¶åŒ…ï¼Œå«æœ‰ Remote - WSL æ’ä»¶ï¼Œ
å®ƒå¯ä»¥å¤„ç†æ˜ å°„åˆ° Linux ç³»ç»Ÿçš„ `/mnt/c` ç›®å½•ï¼Œä½¿ç”¨ remote-wsl èœå•å‘½ä»¤ï¼Œæˆ–æ‰“å¼€ç»ˆç«¯è¾“å…¥ wsl 
å³å¯ä»¥è¿›è¡Œè¿œç¨‹å¼€å‘ã€‚

Remote Development extension pack æ’ä»¶åŒ…ï¼š

- Remote - SSH å®‰å…¨ Shell å¯ä»¥æ‰“å¼€è¿œç¨‹ç³»ç»Ÿçš„æ–‡ä»¶ï¼ŒåŒ…æ‹¬è™šæ‹Ÿæœºã€‚
- Remote - Containers æä¾› sandboxed å·¥å…·é“¾å’ŒåŸºäºçª—å£çš„åº”ç”¨ã€‚
- Remote - WSL ä½¿ç”¨é›†æˆäº Windows çš„ Linux å­ç³»ç»ŸåŠŸèƒ½ã€‚ 

ä½¿ç”¨ Sublime Text ä¹Ÿå¯ä»¥ç»“åˆ wsl å‘½ä»¤ä½¿ç”¨ã€‚

é¦–å…ˆï¼Œæ‰“å¼€ æ›´æ–°å’Œå®‰å…¨ -> é’ˆå¯¹å¼€å‘äººå‘˜ -> å¼€å‘äººå‘˜æ¨¡å¼ï¼Œç„¶ååœ¨ PowerShell æ‰§è¡Œå‘½ä»¤å®‰è£… WSLï¼š

    dism /online /enable-feature /featurename:microsoft-windows-subsystem-linux

æ‰“å¼€ Microsoft store é€‰æ‹© Linxu ç³»ç»Ÿè¿›è¡Œå®‰è£…ã€‚

    wsl -l -v
    wsl --list --verbose
    wsl -l --all

WSL ç³»ç»Ÿå®‰è£…ç›®æ ‡ä½ç½®å’Œå®‰è£…åŒ…ä½ç½®ï¼Œä»¥ Ubuntuon ç³»ç»Ÿä¸ºä¾‹ï¼Œä½†æ˜¯å°½é‡ä¸è¦ç›´æ¥åœ¨ Windows ç³»ç»Ÿä¿®æ”¹
è¿™é‡Œçš„æ–‡ä»¶ï¼Œå› ä¸ºå®ƒä»¬æ˜¯æŒ‰ Linux ç³»ç»Ÿç»„ç»‡çš„ï¼š

    C:\Users\xxx\AppData\Local\Packages\CanonicalGroupLimited.UbuntuonWindows_xxx\LocalState\rootfs
    C:\Program Files\WindowsApps\CanonicalGroupLimited.UbuntuonWindows_xxx

å¯ä»¥é€šè¿‡ç½‘ç»œè®¿é—® WSL å­ç³»ç»Ÿæ–‡ä»¶ç³»ç»Ÿï¼Œç›´æ¥åœ¨æ–‡ä»¶èµ„æºç®¡ç†å™¨è¾“å…¥ `\\wsl$` å°±å¯ä»¥ã€‚

Linux å­ç³»ç»Ÿè®¿é—® Windows å¯„ä¸»ç³»ç»Ÿçš„æ–‡ä»¶ï¼Œåªéœ€è¦åˆ° `/mnt` æŒ‚è½½ç‚¹å°±å¯ä»¥çœ‹åˆ° c ç›˜çš„æ–‡ä»¶ã€‚

å®‰è£… GCC å¼€å‘å·¥å…·ï¼š

    wsl
    sudo apt install gcc
    sudo apt install g++

    sudo apt-get install libpng-dev
    sudo apt-get install zlib1g-dev

    sudo apt-get install zlib1g
    sudo apt-get install --reinstall zlibc zlib1g zlib1g-dev

ä½¿ç”¨ cat å‘½ä»¤ç”Ÿæˆä»£ç ï¼Œå†ç¼–è¯‘å¹¶è¿è¡Œç¤ºä¾‹ç¨‹åºï¼š

    cat > demo.c << END
    #include <stdio.h>
    int main()
    {
        printf("\033[5;46;37m%s\033[0m\n", "hello");
    }
    END

    gcc demo.c -o demo && ./demo

`cat >>` è¡¨ç¤ºé™„åŠ å†…å®¹åˆ°æ–‡ä»¶ï¼Œ`cat >` è¡¨ç¤ºè¦†ç›–æ–‡ä»¶å†…å®¹ï¼Œ`cat file` è¡¨ç¤ºæ‰“å°æ–‡ä»¶å†…å®¹ã€‚`<< END` 
è¡¨ç¤ºè®¾ç½®ä¸€ä¸ªç»“æŸæ ‡è®°ï¼Œå†æ¬¡è¾“å…¥ END å°±ä¼šåœæ­¢ cat å‘½ä»¤ã€‚

ä½¿ç”¨ Sublime æ—¶å°±è¦é…ç½®ä»¥ä¸‹å‘½ä»¤ï¼š

    wsl gcc ../src/demo.c -o pr && wsl ./pr

å‡çº§åˆ° WSL 2:

    dism.exe /online /enable-feature /featurename:VirtualMachinePlatform /all /norestart
    wsl --set-default-version 2
    wsl --set-version <distribution name> <versionNumber>

ä¸‹è½½æ–‡ä»¶è¾ƒå¤§ï¼Œéœ€è¦ç½‘ç»œå¿«é€Ÿã€‚å®‰è£…æˆåŠŸåï¼Œæ‰“å¼€ PowerShellï¼Œé”®å…¥ bash å¹¶å›è½¦ï¼Œå³å¯è¿›å…¥ Linux å­ç³»ç»Ÿã€‚
ä½¿ç”¨ lsb_release -a å‘½ä»¤æŸ¥çœ‹ Linux å­ç³»ç»Ÿç‰ˆæœ¬ï¼Œç›®å‰å·²ç»æ”¯æŒçš„å­ç³»ç»Ÿå¦‚ä¸‹ï¼š

- Ubuntu 16.04 LTS
- Ubuntu 18.04 LTS
- Ubuntu 20.04 LTS
- openSUSE Leap 15.1
- SUSE Linux Enterprise Server 12 SP5
- SUSE Linux Enterprise Server 15 SP1
- Kali Linux
- Debian GNU/Linux
- Fedora Remix for WSL
- Pengwin
- Pengwin Enterprise
- Alpine WSL

åœ¨ Windows 10 Build 19041ï¼Œç‰ˆæœ¬å· 2004 æˆ–æ›´é«˜ç³»ç»Ÿä¸­ï¼Œå¯ä»¥ä½¿ç”¨ WSL 2ï¼Œå¯ä»¥é€šè¿‡ winver å‘½ä»¤æŸ¥çœ‹å½“å‰ç³»ç»Ÿç‰ˆæœ¬ã€‚

WSL ç‰ˆæœ¬åŠŸèƒ½å¯¹æ¯”ï¼š

|              Feature               |   WSL 1   |   WSL 2   |
|------------------------------------|-----------|-----------|
| é›†æˆ Windows & Linux               | âœ…         | âœ…         |
| Fast boot times                    | âœ…         | âœ…         |
| Small resource foot print          | âœ…         | âœ…         |
| Managed VM                         | âŒ         | âœ…         |
| Full Linux Kernel                  | âŒ         | âœ…         |
| Full system call compatibility     | âŒ         | âœ…         |
| è¿è¡Œå½“å‰ç‰ˆæœ¬ VMWare and VirtualBox  | âœ…         | âŒ         |
| Performance across OS file systems | âœ…         | âŒ         |


Linux å­ç³»ç»Ÿçš„ç®¡ç†ï¼š

    wsl -l --all
    wsl --list --running
    wsl --terminate Ubuntu

    wsl --export <Linux_distrib> <export_file>
    wsl --export Ubuntu C:\WSL\Ubuntu.tar

    wsl --import <system_name> <save_path> <import_path>
    wsl --import MyUbuntu C:\WSL\Ubuntu C:\WSL\Ubuntu.tar

    wsl --distribution MyUbuntu
    wsl --unregister MyUbuntu


DrvFs æ˜¯ WSL æä¾›çš„æ–‡ä»¶é©±åŠ¨å™¨æ˜ å°„ç³»ç»Ÿï¼Œé€šè¿‡å®ƒå¯ä»¥è£…é¥°å„ä¸ªç£ç›˜åˆ†åŒºæ˜ å°„åˆ° `/mnt/c`, `/mnt/d` ç­‰ç›®å½•ä¸Šã€‚

    mount -l
    sudo umount /mnt/c
    sudo mount -t drvfs C: /mnt/c -o metadata

å¯åŠ¨ WSLï¼ŒWindows çš„ç¡¬ç›˜ä¼šè‡ªåŠ¨ mount åˆ° Linux ç³»ç»Ÿä¸‹ï¼Œä½†æ˜¯æ—©æœŸç‰ˆæœ¬æ‰€æœ‰ Windows æ–‡ä»¶çš„ owner
å’Œ group éƒ½ä¼šè®¾ç½®ä¸º rootï¼Œè¯»å†™æƒé™åˆ™æ˜¯ä» Windows ç³»ç»Ÿä¸‹ç»§æ‰¿è¿‡æ¥ã€‚ç»å¸¸å¯ä»¥çœ‹åˆ°ä¸€ç‰‡ç»¿æ²¹æ²¹çš„ 777
æƒé™çš„æ–‡ä»¶å’Œæ–‡ä»¶å¤¹åˆ—è¡¨ï¼Œè¿™æ˜¾ç„¶å’Œ Linux ç³»ç»Ÿä¸­çš„æœ€ä½³å®è·µä¸ç¬¦çš„ï¼Œè€Œä¸”å¯¹è¿™äº›æ–‡ä»¶ä½¿ç”¨ chmod æˆ–è€… chown
æ˜¯ä¸èµ·ä½œç”¨çš„ï¼Œç®€ç›´æ²¡æ³•å¿ã€‚

æˆ–è€…ä½¿ç”¨æ·»åŠ  umask å’Œ fmask ç­‰å‚æ•°è£…è½½ï¼š

    sudo mount -t drvfs C: /mnt/c -o metadata,uid=1000,gid=1000,umask=22,fmask=111

è¿™äº›æ ‡è®°è¯´æ˜ï¼Œumask=22 å’Œ fmask=111 è¡¨ç¤ºæ–‡ä»¶å’Œç›®å½•æœ‰ç›¸åº”çš„ read/write/execute æƒé™ï¼š

- uid: the user ID used for the owner of all files
- gid: the group ID used for the owner of all files
- umask: an octal mask of permissions to exclude for all files and directories.
- fmask: an octal mask of permissions to exclude for all regular files.
- dmask: an octal mask of permissions to exclude for all directories.


ä½†æ˜¯æ¯æ¬¡ä½¿ç”¨æ—¶æ‰‹åŠ¨ mount ä¹Ÿå¤ªéº»çƒ¦äº†ï¼Œè¿™æ—¶æ­£å¥½ç”¨ä¸Šå¦ä¸€ä¸ªæ–°ç‰¹æ€§ Automatically Configuring WSLã€‚
æŠŠä¸‹é¢ automount çš„é€‰é¡¹æ·»åŠ åˆ° wsl é…ç½®æ–‡ä»¶ä¸­å°±å¯ä»¥äº†ã€‚

    sudo cat > /etc/wsl.conf << END
    [automount] 
    enabled = true 
    root = /mnt/ 
    options = "metadata,umask=22,fmask=11" 
    mountFsTab = false 
    END

å¦‚æœ sudo cat æ‰§è¡Œä¸äº†ï¼Œå¯ä»¥ä½¿ç”¨ sudo vim è¿›è¡Œç¼–è¾‘ã€‚

ç°åœ¨é‡å¯ WSL çš„ console, Windows ç¡¬ç›˜ä¸Šçš„æ–‡ä»¶å’Œæ–‡ä»¶å¤¹éƒ½æ‹¥æœ‰æ­£å¸¸æƒé™äº†ã€‚ä½†æ˜¯ï¼Œç”¨ mkdir å‘½ä»¤
åˆ›å»ºä¸€ä¸ªç©ºæ–‡ä»¶å¤¹ï¼Œå°±ä¼šå‘ç°æ–°çš„æ–‡ä»¶å¤¹è¿˜æ˜¯ 777 æƒé™ã€‚è¿™å¯èƒ½æ˜¯ wsl çš„ä¸€ä¸ªbug (Issue 1801, Issue 352)ï¼Œ
console é»˜è®¤çš„ umask å€¼ä»ç„¶æ˜¯ 0000ã€‚work-around çš„æ–¹æ³•æ˜¯åœ¨ .profileã€.bashrcã€.zshrc 
æˆ–è€…å…¶ä»– shell é…ç½®æ–‡ä»¶ä¸­é‡æ–°è®¾ç½®ä¸€ä¸‹ umaskã€‚

    #Fix mkdir command has wrong permissions
    if grep -q Microsoft /proc/version; then
        if [ "$(umask)" == '0000' ]; then
            umask 0022
        fi
    fi

[WSL ç£ç›˜ç©ºé—´ç®¡ç†](https://learn.microsoft.com/zh-cn/windows/wsl/disk-space)ï¼š

    # wsl.exe --system -d <distribution-name> df -h /mnt/wslg/distro

    $ df -h /
    Filesystem      Size  Used Avail Use% Mounted on
    /dev/sdb        251G   23G  217G  10% /

    du -h ~/.local | sort -h
    du -h /var/cache | sort -h

æ ¹æ®æŸ¥è¯¢åˆ°çš„ç©ºé—´å ç”¨å¤§å¤´ï¼Œé€‰æ‹©æ¸…ç†ç›¸åº”çš„å®‰è£…åŒ…ç¼“å­˜ç©ºé—´æˆ–åƒåœ¾æ–‡ä»¶ï¼Œæˆ–æ¸…ç†æœªä½¿ç”¨çš„ Docker é•œåƒï¼š

    sudo apt-get clean
    sudo apt-get autoclean
    sudo apt-get autoremove

    docker system prune
    docker volume prune
    docker network prune
    docker container prune
    docker image prune -a // -a would clean image without linking a container

æŸ¥æ‰¾ Linux å‘è¡Œç‰ˆçš„ .vhdx æ–‡ä»¶å’Œç£ç›˜è·¯å¾„

    $path="HKCU:\Software\Microsoft\Windows\CurrentVersion\Lxss"
    (Get-ChildItem -Path $path)[0].GetValue("BasePath") + "\ext4.vhdx"


å‹ç¼©æœªæ›¾ä½¿ç”¨çš„ç©ºé—´ï¼Œå‹ç¼©åå¤§å°åº”è¯¥å’Œ df å‘½ä»¤æŸ¥è¯¢åˆ°çš„ Used æ‰€ç¤ºå¤§å°ä¸€è‡´ï¼š

    > wsl.exe --shutdown
    > diskpart
    DISKPART> select vdisk file="C:\Users\OCEAN\AppData\Local\Packages\CanonicalGroupLimited.Ubuntu20.04LTS_79rhkp1fndgsc\LocalState\ext4.vhdx"

    DiskPart å·²æˆåŠŸé€‰æ‹©è™šæ‹Ÿç£ç›˜æ–‡ä»¶ã€‚

    DISKPART> detail vdisk

        è®¾å¤‡ç±»å‹ ID: 0 (æœªçŸ¥)
        ä¾›åº”å•† ID: {00000000-0000-0000-0000-000000000000} (æœªçŸ¥)
        çŠ¶æ€: å·²æ·»åŠ 
        è™šæ‹Ÿå¤§å°:  256 GB
        ç‰©ç†å¤§å°:   25 GB
        æ–‡ä»¶å: C:\Users\OCEAN\AppData\Local\Packages\CanonicalGroupLimited.Ubuntu20.04LTS_79rhkp1fndgsc\LocalState\ext4.vhdx
        ä¸ºå­çº§: å¦
        çˆ¶æ–‡ä»¶å:
        æ‰¾ä¸åˆ°å…³è”çš„ç£ç›˜å·ã€‚

    DISKPART> compact vdisk

        100 ç™¾åˆ†æ¯”å·²å®Œæˆ

        DiskPart å·²æˆåŠŸå‹ç¼©è™šæ‹Ÿç£ç›˜æ–‡ä»¶ã€‚

    DISKPART> detach vdisk

        è™šæ‹Ÿç£ç›˜æœåŠ¡é”™è¯¯:
        è™šæ‹Ÿç£ç›˜å·²ç»åˆ†ç¦»ã€‚


## ğŸ¤ğŸ¥ GUI - X Window å›¾å½¢åè®®
- [The Xlib Manual](https://tronche.com/gui/x/xlib/)
- [Dear imgui](https://github.com/ocornut/imgui)
- [Dear ImGUI åœ¨çº¿æ¼”ç¤º](https://greggman.github.io/doodles/glfw-imgui/out/glfw-imgui.html)
- [Nuklear UI](https://github.com/Immediate-Mode-UI/Nuklear)
- [Nuklear UI Doc](https://cdn.statically.io/gh/vurtun/nuklear/master/doc/nuklear.html)
- [VcXsrv Windows X Server](https://sourceforge.net/projects/vcxsrv/)
- [WSL Terminal](https://github.com/mskyaxl/wsl-terminal)
- [FVWM - F? Virtual Window Manager](https://www.fvwm.org/)
- [FVWM - Beginners Guide by Jaimos F Skriletz](http://zensites.net/fvwm/guide/)
- [FVWM ç®€æ˜ä½¿ç”¨æŒ‡å—](https://docs.huihoo.com/homepage/shredderyin/fvwm_frame.html)
- [Windows Subsystem for Linux GUI](https://github.com/microsoft/wslg?tab=readme-ov-file)

GUI ç¨‹åºæ˜¯æŒ‡æŸä¸€ç±»å¸¦æœ‰å›¾å½¢ç•Œé¢çš„ç¨‹åºï¼Œå’Œæ§åˆ¶å°ç¨‹åºçš„åŒºåˆ«å°±æ˜¯å›¾å½¢å¤„ç†çš„å·®åˆ«ã€‚åœ¨ä¼ ç»Ÿ DOS ç³»ç»Ÿä¸­ï¼Œ
å¯ä»¥é€šè¿‡ç¡¬ä»¶ä¸­æ–­çš„æ–¹å¼è®¾ç½®æ˜¾å¡å·¥ä½œåœ¨å›¾å½¢æ¨¡å¼ä¸‹ï¼Œç¨‹åºé€šè¿‡å†™æ˜¾å¡å†…å­˜æ•°æ®å®ç°å›¾å½¢æ˜¾ç¤ºã€‚

è€Œåœ¨ç°ä»£çš„æ“ä½œç³»ç»Ÿä¸­ï¼Œé€šè¿‡æ–°çš„ API å®ç°ï¼Œæˆ–è€…é€šè¿‡ç°æˆçš„å›¾å½¢åº“å®ç° GUI ç¨‹åºã€‚å¦‚æœæ˜¯ Windows ç³»ç»Ÿï¼Œ
å¯ä»¥é€‰æ‹© MFC æˆ– ALTï¼Œæˆ–æ›´æ–°çš„ .Net æ¡†æ¶ã€‚

åœ¨ Linux ä¸‹é€‰æ‹©ä¹Ÿå¾ˆå¤šï¼Œä½† X Window æ˜¯é€šç”¨æ€§æœ€å¥½çš„ä¸€ä¸‹å›¾å½¢ç•Œé¢åè®®ã€‚

æ­¤å¤–ï¼Œè¿˜æœ‰å¤§é‡å¯è·¨å¹³å°çš„ GUI å›¾å½¢åº“ï¼Œå¦‚åŸºäº OpenGL çš„ IMGUIã€Nuklear UI ç­‰ï¼Œè¿˜æœ‰ Qtã€wxWidgets ç­‰ã€‚

ç”¨ C++ ä»é›¶ç¼–å†™ GUI è¿™ç§æƒ³æ³•æ˜¯æ¯ä¸ªå¥½å¥‡è€…éƒ½ä¼šæœ‰çš„æƒ³æ³•ï¼Œä½†æ˜¯è¦ä»å¤´å®ç°ä¸€æ¬¾è‡ªå·±çš„ç•Œé¢åº“ï¼Œä½ éœ€è¦äº†è§£
ç•Œé¢åº“æ˜¯å¦‚ä½•è¿ä½œçš„ï¼Œæ¶ˆæ¯æœºåˆ¶ã€ç»˜å›¾æœºåˆ¶ï¼Œå­—ä½“å¤„ç†ï¼Œç”šè‡³å¤šè¯­è¨€å¤„ç†ã€‚å¦å¤–ä¸€ä¸ªå±‚é¢ä¸Šè®²ï¼Œç¨‹åºç»ˆå½’æ˜¯è¦ä¾èµ–
ç³»ç»Ÿè¿è¡Œï¼Œåº•å±‚éƒ¨åˆ†è‚¯å®šæ˜¯è¦åŸºäºç³»ç»Ÿ API ä¹‹ä¸Šã€‚

å³ä½¿ä½œä¸€å±‚æŠ½è±¡ï¼Œåƒ IMGUI è¿™ç±»ç›´ç™½å›¾å½¢åº“ï¼Œä¹Ÿæ˜¯éœ€è¦å¤„ç†ä¸ç³»ç»Ÿçš„å…³ç³»çš„ã€‚Immediate Mode GUI æ˜¯ä¸€ç§
ç®€åŒ–çš„å›¾å½¢æ¶æ„ï¼Œè¿™ç§ç±»å‹çš„æ›´å¤šçš„é€‚ç”¨äºæ˜¾ç¤ºåŒºåŸŸå®æ—¶åˆ·æ–°çš„ç¨‹åºé‡Œé¢ï¼Œåº”ç”¨äºæ¸¸æˆç•Œé¢çš„å®ç°ä¸Šï¼Œå¦‚è‘—åçš„
æ¸¸æˆå¼•æ“ Unity å°±æ˜¯ç”¨ IMGUI æ¨¡å¼å†™çš„ GUIã€‚

IMGUI è¿™ç§å®ç°æ¨¡å¼çš„ä¼˜åŠ¿åœ¨äºä»–åœ¨å®ç°å’Œå®ç”¨ä¸Šéƒ½ä¼šæ¯”ä¼ ç»Ÿçš„ Retained Mode GUIï¼Œä¾‹å¦‚ Qtã€ MFC ç­‰ï¼Œ
è¦ç®€å•ä¸å°‘ï¼Œä¸ç”¨å»ç®¡ç†å›¾å½¢ç»„ä»¶çš„ç”Ÿå­˜å‘¨æœŸã€‚IMGUI æ¨¡å¼æ²¡æœ‰å›¾å½¢æ§ä»¶å¯¹è±¡ï¼Œä¸ä¿å­˜ä»»ä½•çŠ¶æ€ï¼Œä¸ç”¨å•ç‹¬çš„å»
å®ç° UI å’Œç¨‹åºé—´æ•°æ®çš„äº¤æ¢ï¼Œç”šè‡³éƒ½ä¸éœ€è¦å•ç‹¬ä¸ºäº‹ä»¶å†™å›è°ƒå‡½æ•°ã€‚æ¯ä¸ªæ§ä»¶éƒ½é€šè¿‡ç»˜å›¾å‡½æ•°å®ç°ï¼Œç›´æ¥åœ¨
ç¨‹åºçš„ Draw() å‡½æ•°é‡Œè¦å“ªä¸ªæ§ä»¶å°±è°ƒç”¨å“ªä¸ªå‡½æ•°ç»˜å›¾ã€‚ä¹Ÿå› æ­¤ï¼Œåœ¨ IMGUI ä¸­å®ç°å¸¦çŠ¶æ€çš„å›¾å½¢ä¼šæ˜¾å¾—éº»çƒ¦ï¼Œ
æ¯”å¦‚åŠ¨ç”»æ§ä»¶ã€‚

åŸºäºç³»ç»Ÿ API è°ƒç”¨å®ç° GUI å›¾å½¢ç•Œé¢ï¼Œåœ¨ Windows ç³»ç»Ÿä¸­ GUI ç¼–ç¨‹é‡‡ç”¨çš„æ˜¯æ¶ˆæ¯å¾ªç¯æœºåˆ¶ï¼Œé€šè¿‡ API 
å‘ç³»ç»Ÿæ³¨å†Œçª—å£ç±»ï¼Œå¹¶è®¾ç½®å¥½æ¶ˆæ¯å¤„ç†çš„å›è°ƒå‡½æ•°ï¼Œå¤„ç†å¥½ç”¨æˆ·ä¸ç³»ç»Ÿ GUI äº¤äº’è¿‡ç¨‹ä¸­äº§ç”Ÿçš„äº‹ä»¶ï¼Œè¿™å°±æ˜¯ä¸€ä¸ª
åŸºæœ¬ç¨‹åºæµç¨‹ã€‚è€Œ MFC åˆ™æ˜¯ä½¿ç”¨å„ç§ç±»å¸®ä½ ç»„ç»‡å¥½äº†ç³»ç»Ÿ APIï¼Œè¿™æ ·å¼€å§‹ GUI ç¨‹åºå°±ä¼šæ¯”ç›´æ¥ä½¿ç”¨ API 
æ›´æ–¹ä¾¿ã€‚MFC ä½œä¸ºæœ€ç»å…¸çš„ Windows GUI æ¡†æ¶ï¼Œç°åœ¨å·²ç»ä¸æ›´æ–°äº†ï¼Œä½†æ˜¯å…¶ä¸­çš„æ¡†æ¶æ€æƒ³æ˜¯å€¼å¾—å­¦ä¹ çš„ï¼Œ
å°æ¹¾çš„ä¾¯æ·è€å¸ˆç¼–å†™äº†ä¸€æœ¬ã€Šæ·±å…¥æµ…å‡º MFCã€‹å¯ä»¥å‚è€ƒï¼Œæ­¤ä¹¦æ˜¯è®²åŸç†æ›´å…³å¿ƒ MFC çš„æ¡†æ¶è®¾è®¡ã€‚å¦‚æœè¦å¿«é€Ÿä¸Š
æ‰‹åˆ™åˆé€‚å‚è€ƒæä¹…è¿›çš„ã€ŠMFC æ·±å…¥æµ…å‡ºã€‹ æˆ–ã€ŠWindows ç¨‹åºè®¾è®¡ã€‹ã€‚


è€Œ X Window ç³»ç»Ÿæ˜¯ä¸€ä¸ªåŸºäºç½‘ç»œçš„å›¾å½¢ç•Œé¢ç³»ç»Ÿï¼Œè¯´å®ƒæ˜¯å›¾å½¢åè®®è‡ªç„¶æ˜¯å› ä¸ºå®ƒçš„æ¶æ„ç‰¹åˆ«ã€‚å®ƒäº 1984 
å¹´åœ¨éº»çœç†å·¥å­¦é™¢å¼€å‘ï¼Œæœ‰å°†è¿‘ 20 å¹´çš„åº”ç”¨å†å²ï¼ŒX Window ç³»ç»Ÿå¹¿æ³›çš„åº”ç”¨äºæ¡Œé¢ Linuxï¼ˆå¦‚ Fedoraã€
Debianã€Ubuntu ç­‰ï¼‰ï¼ŒåµŒå…¥å¼ Linuxï¼ˆå¦‚ Nokia çš„ Maemoã€Intel çš„ Moblin ç­‰ï¼‰ã€‚éšç€ Nokia 
å’Œ Intel é«˜è°ƒçš„å°† Maemo å’Œ Moblin åˆå¹¶ä¸º Meegoï¼ŒX Window ç³»ç»Ÿçš„åº”ç”¨å°†è¢«æ¨å‘ä¸€ä¸ªæ–°çš„é«˜æ½®ã€‚

X Window æ˜¯ C/S æ¶æ„ï¼Œæ¶µç›– X Serverã€X åè®®ã€X Client ä¸‰éƒ¨åˆ†å†…å®¹ã€‚X Client æœ‰ä¸‰ç§å¼€å‘æ¨¡å¼ï¼š
åŸºäº XLibã€åŸºäº GTKã€åŸºäº Qtã€‚


X Window å›¾å½¢ç¨‹åºåŸºæœ¬è¿è¡Œè¿‡ç¨‹ï¼š

- ç”¨æˆ·é€šè¿‡é¼ æ ‡é”®ç›˜å¯¹ X server ä¸‹è¾¾æ“ä½œå‘½ä»¤ 
- X server åˆ©ç”¨ Event ä¼ é€’ç”¨æˆ·æ“ä½œä¿¡æ¯ç»™ X client 
- X client è¿ç®—ç›¸åº”çš„ç¨‹åºè¿ç®— 
- X client åˆ©ç”¨ Request ä¼ å›æ‰€è¦æ˜¾ç¤ºçš„ç»“æœ 
- X server å°†ç»“æœæ˜¾ç¤ºåœ¨å±å¹•ä¸Š

X Client å®¢æˆ·ç«¯æä¾›ç•Œé¢å®ç°ï¼Œæ‰§è¡Œå„ç§ X ç¨‹åºï¼Œåˆ›å»ºä¸€äº›å›¾å½¢ç›¸å…³èµ„æºå¦‚ XImageï¼›

å¸¸è§çš„æƒ…å†µæ˜¯ X server ä¸ X client éƒ½åœ¨åŒä¸€å°ç”µè„‘ä¸Šè¿è¡Œï¼Œåˆ†åˆ«è¿è¡Œäºç½‘ç»œä¸Šä¸åŒçš„ç”µè„‘ä¸Šå³è¿œç¨‹æ¡Œé¢ã€‚
X client æ˜¯ä¸ç¡¬ä»¶æ— å…³çš„ï¼Œå®ƒå¹¶ä¸å…³å¿ƒä½ ä½¿ç”¨çš„æ˜¯ä»€ä¹ˆæ˜¾å¡ä»€ä¹ˆæ˜¾ç¤ºå™¨ä»€ä¹ˆé”®ç›˜é¼ æ ‡ï¼Œè¿™äº›åªä¸ X server 
ç›¸å…³ã€‚æœåŠ¡å™¨ç«¯è¿è¡Œåœ¨æœ‰æ˜¾ç¤ºè®¾å¤‡çš„ä¸»æœºä¸Šï¼Œæ§åˆ¶è¾“å…¥è¾“å‡ºï¼Œç»´æŠ¤å­—ä½“ï¼Œé¢œè‰²ç­‰ç›¸å…³èµ„æºï¼Œä¸ºå®¢æˆ·ç«¯æä¾› GCã€
Pixmapã€Window ç­‰èµ„æºã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨ XFree86 æ¡Œé¢ç¯å¢ƒï¼Œè¿è¡Œ xf86config æˆ– xf86cfg è¿›è¡Œçš„é…ç½®
å®é™…ä¸Šåªæ˜¯ä¸ X server æœ‰å…³ã€‚X protocol å°±æ˜¯ X server å’Œ X client ä¹‹é—´é€šä¿¡çš„åè®®ï¼Œæ”¯æŒç°åœ¨
å¸¸ç”¨çš„ç½‘ç»œé€šä¿¡åè®®ï¼Œå¦‚ TCP/IPï¼Œé»˜è®¤ X server ä¾¦å¬ tcp 6000 ç«¯å£ã€‚

ä»æ§åˆ¶å°è¿›å…¥ X å›¾å½¢ç¯å¢ƒä¸€èˆ¬æ˜¯ç”¨ startx å‘½ä»¤ï¼š

    startx [[client] options .....] [-- [server] options ....] 
    xinit [[client] options ] [-- [server] [display] options] 

æŠŠä¸Šé¢ [client] å’Œ [server] åˆ†åˆ«ç§°ä¸º client ç¨‹åºå’Œ server ç¨‹åºã€‚

X window system ä½¿ç”¨ C/S ç»“æ„è®¾è®¡çš„å¥½å¤„ï¼š

- é‡‡ç”¨ C/S æ¶æ„å¯ä»¥è§£è€¦ï¼Œclient å¯ä»¥é‡‡ç”¨ä»»æ„è¯­è¨€å¼€å‘ï¼Œåªè¦ç¬¦åˆ X protocol è¦æ±‚ã€‚
- èµ„æºç»Ÿä¸€ç®¡ç†ï¼Œæ–¹ä¾¿å…±äº«ã€‚X server æ¥ç®¡ç¡¬ä»¶åŠè¾“å…¥äº‹ä»¶ï¼Œclinet å¯ä»¥æ–¹ä¾¿å…±äº«ä½¿ç”¨ï¼Œä¹Ÿå¯ä¸»åŠ¨ç»™å„ä¸ª clients å‘æ¶ˆæ¯ã€‚
- è¿œç¨‹æ˜¾ç¤ºæ”¯æŒï¼Œä¸€èˆ¬æ¥è¯´ server å’Œ client æ˜¯åœ¨åŒä¸€å°ç”µè„‘ä¸Šï¼Œåœ¨ä¸åŒç½‘ç»œçš„ç”µè„‘ä¸Šè¿è¡Œå°±æ˜¯è¿œç¨‹ç™»å½•ã€‚

å¸¸ç”¨çš„ GTK+ï¼ŒQt å°±æ˜¯å¾ˆæµè¡Œçš„ x toolkitï¼Œå®ç°äº†å¸¸ç”¨çš„ç»„ä»¶ï¼Œè€Œ xlib å°è£… X åè®®ä¸­çš„æ‰“åŒ…ã€è§£åŒ…ç­‰æ“ä½œã€‚
æ‰€ä»¥å¹³æ—¶åŸºäº Qt ç­‰æ¡†æ¶å¼€å‘åº”ç”¨çš„æ—¶å€™ï¼Œæ— éœ€ç†ä¼š X server çš„å­˜åœ¨ã€‚

XLib å°±æ˜¯ C Language X Interface å®¢æˆ·ç«¯çš„ C è¯­è¨€æ¥å£åº“ï¼Œå®ƒå°è£…äº† X åè®®ï¼Œå¹¶å¯¹åº”ç”¨ç¨‹åºæä¾›æ–¹ä¾¿
ä½¿ç”¨çš„ APIã€‚ä½¿ç”¨ X-Libï¼Œåº”ç”¨ç¨‹åºä¸ç”¨ç›´æ¥å‘æœåŠ¡å™¨å‘é€è¯·æ±‚ä¸å¤„ç†å›å¤ã€‚

Windows 10 å¯ä»¥é€šè¿‡ WSL æä¾›çš„è¿è¡Œç¯å¢ƒå®‰è£…å’Œè¿è¡Œ X Window å›¾å½¢ç³»ç»Ÿï¼Œå¸¸ç”¨çš„ X Server å®ç°æœ‰
Xmanager, Xming, VcXsrv ç­‰ï¼š

- Xmanager æ˜¯å•†ä¸šè½¯ä»¶ï¼Œéœ€è¦ä»˜è´¹ã€‚
- Xming æ˜¯å¼€æºè½¯ä»¶ï¼Œä» 2007 å¹´æœ€åä¸€ä¸ªå…è´¹ç‰ˆæœ¬ (6.9.0.31) ä¹‹åï¼Œå°±éœ€è¦æåŠ©æ‰èƒ½ä¸‹è½½ã€‚
- VcXsrv ä¸ºå¼€æºå…è´¹è½¯ä»¶ï¼Œä½¿ç”¨æ–¹å¼åŠç•Œé¢ä¸ Xming æä¸ºç›¸è¿‘ã€‚
  https://github.com/marchaesen/vcxsrv

WSL å®‰è£… xfce desktop è½¯ä»¶åœ¨åå°è¿è¡Œå°±å¯ä»¥æä¾› Linux çš„å›¾å½¢ç•Œé¢ï¼Œå®ƒçš„ä¼˜ç‚¹æ˜¯è½»é‡ã€å ç”¨ç³»ç»Ÿèµ„æºå°‘ï¼š

    sudo apt-get install xfce4-terminal
    sudo apt-get install xfce4

Windows ç³»ç»Ÿå®‰è£… VcXsrv åï¼Œå¼€å§‹èœå•é‡Œç°åœ¨å‡ºç°äº†ä¸€ä¸ªæ–‡ä»¶å¤¹ VcXsrvï¼Œé€‰æ‹©é‡Œé¢çš„ **XLaunch**ï¼Œ
ä¸€è·¯é€‰æ‹©ä¸‹ä¸€æ­¥ï¼Œä½¿ç”¨ Start no Client å¯åŠ¨æœåŠ¡ç«¯ã€‚å¦å¤–ï¼Œç”±äºè½¯ä»¶å‡çº§å˜åŠ¨ï¼Œä½¿ç”¨ VM æ¨¡å¼ï¼Œå› æ­¤ï¼Œ
å¯åŠ¨æœåŠ¡ç«¯æ—¶ï¼Œå‹¾é€‰ä¸Š Disable access control é€‰é¡¹ä»¥åŠè¾“å…¥ -ac é¢å¤–å‚æ•°å³å¯ã€‚å¦åˆ™ Broadway
ç±»å‹æ˜¾ç¤ºå™¨å°±ä¸èƒ½æˆåŠŸè¿æ¥ï¼Œå¯¼è‡´å›¾å½¢æœåŠ¡åˆå§‹åŒ–å¤±è´¥ã€‚

æ•°æ®å†…å®¹ä¸¢å¤±ã€‚è™½ç„¶ Multiple Windows è¿™ç§å¤šçª—å£æ¨¡å¼ä¸ Windows ç•Œé¢é›†æˆæœ€å¥½ï¼Œä½†æ˜¯ä¹Ÿå¯ä»¥é€‰æ‹©
å¸¦æœ‰æ ‡é¢˜æ çš„ One large window æ¨¡å¼ï¼Œå¸¦æœ‰æ ‡é¢˜æ æˆ–è€…ä¸å¸¦æ ‡é¢˜ï¼Œä¹Ÿå¯ä»¥é€‰æ‹©ä½¿ç”¨å…¨å±æ¨¡å¼ã€‚Windows
ç³»ç»Ÿçš„å¤šæ¡Œé¢åŠŸèƒ½é…åˆä½¿ç”¨æ›´ä½³ï¼Œé€šè¿‡è§¦æ‘¸æ¿çš„æ‰‹åŠ¿å¯ä»¥å¿«é€Ÿåˆ‡æ¢ Windows ä¸ X-Server ç•Œé¢ã€‚å¯ä»¥å°è¯•
Xmingï¼Œå®ƒæ¯” VcXsrc å¥½åœ¨ Multiple æ¨¡å¼ä¸‹ï¼Œé»˜è®¤çš„ä»»åŠ¡é¢æ¿ä¸ä¼šå‡ºç°åœ¨æ‰€æœ‰ Windows æ¡Œé¢ä¸Šï¼Œåªåœ¨
å½“å‰è¿è¡Œçš„ Xming çš„æ¡Œé¢ä¸Šæ‰ä¼šæ˜¾ç¤ºã€‚å¦ä¸€ä¸ªé€‰æ‹©æ˜¯ä½¿ç”¨ MobaXtermï¼Œè¿™æ˜¯ä¸€ä¸ªå¤šé¢æ‰‹ï¼ŒåŒ…å« SSH client
å’Œ X server åŠŸèƒ½ï¼Œè¿˜æœ‰ä¸€äº›é™„åŠ çš„ç½‘ç»œå·¥å…·ã€‚

å®‰è£… xfce åï¼Œä½¿ç”¨ `wsl --shutdown` å‘½ä»¤é€€å‡º WSL ç³»ç»Ÿï¼Œå†é‡æ–°è¿›å…¥æ‰§è¡Œ xfce4-session æˆ–è€… 
startxfce4ï¼Œ**XLaunch** æœåŠ¡ç«¯çª—å£å°±ä¼šæœ‰å›¾å½¢ç•Œé¢ã€‚

    $ startx
    xauth:  file /home/jeango/.Xauthority does not exist

    /usr/lib/xorg/Xorg.wrap: Only console users are allowed to run the X server
    
    xinit: giving up
    xinit: unable to connect to X server: Connection refused
    xinit: server error
    Couldn't get a file descriptor referring to the console

    $ xfce4-session --display=192.168.0.104:0
    Authorization required, but no authorization protocol specified
    Unable to init server: Broadway display type not supported: 192.168.0.104:0
    xfce4-session: Cannot open display: 192.168.0.104:0.
    Type 'xfce4-session --help' for usage.

å¯ä»¥å°†é»˜è®¤æ˜¾ç¤ºå™¨é…ç½®å†™å…¥é…ç½®æ–‡ä»¶ï¼ŒIP åœ°å€è‡ªè¡Œæ›¿æ¢ä¸ºæ­£ç¡®å€¼ï¼š

    # WSL 1
    echo "export DISPLAY=:0.0" >> ~/.bashrc
    # WSL 2
    echo "export DISPLAY=192.168.0.104:0" >> ~/.bashrc

    export DISPLAY="$(grep nameserver /etc/resolv.conf | sed 's/nameserver //'):0"

æˆåŠŸå¯åŠ¨å›¾å½¢ç•Œé¢åï¼Œä¼šåœ¨ Windows ç³»ç»Ÿæ¡Œé¢ä¸­åˆ›å»º xfce4-panel é¢æ¿ï¼Œä¸€ä¸ªé»˜è®¤å›ºå®šåœ¨é¡¶éƒ¨ï¼Œå¦ä¸€ä¸ª
åƒä»»åŠ¡æ ä¸€æ ·å›ºå®šåœ¨åº•éƒ¨ä¸­é—´ä½ç½®ï¼Œå¯ä»¥å‚è€ƒæ–‡æ¡£å¯¹å…¶è¿›è¡Œé…ç½®ã€‚
https://docs.xfce.org/xfce/xfce4-panel/4.14/preferences

å£°éŸ³æ”¯æŒè¿˜æœªå®ç°ç›´æ¥å£°å¡æ’­æ”¾ï¼Œç›®å‰åªèƒ½é€šè¿‡è½¯ä»¶å°†å£°éŸ³æ•°æ®å‘é€åˆ°å®¿ä¸»ï¼ˆWindowsï¼‰ä¸Šæ’­æ”¾ï¼Œé»˜è®¤ä½¿ç”¨çš„æ˜¯
PulseAudioï¼Œè¿™æ˜¯ç”¨äº Linuxï¼ŒPOSIX å’Œ Windows ç³»ç»Ÿçš„ç½‘ç»œä½å»¶è¿Ÿå£°éŸ³æœåŠ¡å™¨ã€‚é…ç½®å‚è€ƒ WSL ç¤¾åŒºæ–‡æ¡£ï¼š

*   https://github.com/microsoft/WSL/issues/5816
*   https://www.linuxuprising.com/2021/03/how-to-get-sound-pulseaudio-to-work-on.html

ä¸»è¦æ˜¯åœ¨ WSL ç¯å¢ƒé…ç½® PulseAudio è¦è”æ¥çš„æœåŠ¡å™¨ï¼ˆWindowsï¼‰ï¼Œä»¥åŠæœåŠ¡å™¨ç«¯å¯ç”¨ TCP è¿æ¥åŠŸèƒ½ï¼š

    # on WSL (Linux)
    # echo 'export PULSE_SERVER=tcp:127.0.0.1' >> ~/.profile
    export WSL2IP=$(cat /etc/resolv.conf | grep nameserver | awk '{print $2; exit;}')
    export DISPLAY="$WSL2IP":0.0
    export PULSE_SERVER=tcp:"$WSL2IP"

    # on Host (Windows)
    # Download https://pgaskin.net/pulseaudio-win32/
    # Modify config.pa file, add the following configurations:
    # Here, we allow connections from 127.0.0.1 which is the local IP address, 
    # and WSL use the default space (172.16.0.0 - 172.31.255.255) for WSL2.
    load-module module-native-protocol-tcp auth-ip-acl=127.0.0.1;172.16.0.0/12
    load-module module-esound-protocol-tcp auth-ip-acl=127.0.0.1;172.16.0.0/12
    load-module module-waveout sink_name=output source_name=input record=0

è¯·æ³¨æ„ï¼Œå‡ºäºå®‰å…¨å’Œéšç§è€ƒè™‘ï¼ŒWindows 10ï¼ˆ2018å¹´4æœˆæ›´æ–°ï¼‰ä¼¼ä¹é™åˆ¶äº†å¯¹å½•éŸ³è®¾å¤‡çš„è®¿é—®ã€‚ä¹Ÿè®¸éœ€è¦é€šè¿‡
æ·»åŠ  record = 0 æ¥é¿å… PulseAudio æœåŠ¡å™¨ä½¿ç”¨å®ƒã€‚åˆ™å½“æœ€åä¸€ä¸ªå®¢æˆ·ç«¯æ–­å¼€è¿æ¥å¹¶è¶…æ—¶åï¼ŒæœåŠ¡å™¨å°†
è‡ªåŠ¨ç»ˆæ­¢è‡ªèº«ã€‚ä¹Ÿå¯ä»¥è®¾ç½® exit-idle-time = -1 æ¥é¿å…æœåŠ¡å™¨è‡ªåŠ¨å…³é—­ï¼Œæ­¤é€‰é¡¹ä»¥ç§’ä¸ºå•ä½ã€‚

æ‰§è¡Œ `pulseaudio --start` æ£€æŸ¥æœåŠ¡ç«¯æ˜¯å¦åœ¨ä¾¦å¬é»˜è®¤ TCP ç«¯å£ï¼š

    netstat -ano | grep 4713
    TCP    0.0.0.0:4713           0.0.0.0:0              LISTENING       12012
    TCP    [::]:4713              [::]:0                 LISTENING       12012

ä½¿ç”¨ PulseAudio è‡ªå¸¦çš„å‘½ä»¤æ’­æ”¾æµ‹è¯•éŸ³ä¹ï¼š

    paplay /mnt/c/Music/16.å‡¡äººæ­Œ.ogg
    paplay -p --server=tcp:localhost /mnt/c/Music/16.å‡¡äººæ­Œ.ogg
    paplay -p --server=tcp:172.17.54.177 /c/Music/16.å‡¡äººæ­Œ.ogg

WSL ä¸­æ‰§è¡Œ `pavucontrol` å‘½ä»¤ï¼Œå¦‚æœ PulseAudio æœåŠ¡å™¨è¿æ¥ä¸ä¸Šï¼Œå°±ä¼šä¸€ç›´æ˜¾ç¤ºï¼š

    Establishing connection to PulseAudio. Please wait...


å¦å¤–ï¼Œæ³¨æ„ä¸è¦åœ¨é¼ æ ‡ä¸è§¦æ‘¸æ¿é…ç½®ä¸­ç¦ç”¨ï¼ŒSetting -> Mouse and Touchpadï¼Œåœ¨è®¾å¤‡åˆ—è¡¨ä¸­æœ‰ä¸€ä¸ª
Windows pointer è®¾å¤‡ï¼Œå¦‚æœç¦ç”¨äº†å®ƒå°±ä¼šå¯¼è‡´ X-Server å›¾å½¢ç•Œé¢è‡ªåŠ¨å…³é—­ã€‚å†æ¬¡å¯åŠ¨å‰éœ€è¦ä¿®æ”¹é…ç½®
æ–‡ä»¶ï¼Œå¦åˆ™ VcXsrv æœåŠ¡ç«¯ä¼šå¯åŠ¨åç«‹å³é—ªé€€ã€‚é€šè¿‡ xinput å‘½ä»¤å¯ä»¥æŸ¥è¯¢ã€é…ç½®è¾“å…¥è®¾å¤‡ã€‚

    $ xinput
    â¡ Virtual core pointer                          id=2    [master pointer  (3)]
    âœ   â†³ Virtual core XTEST pointer                id=4    [slave  pointer  (2)]
    âœ   â†³ Windows pointer                           id=6    [slave  pointer  (2)]
    â£ Virtual core keyboard                         id=3    [master keyboard (2)]
        â†³ Virtual core XTEST keyboard               id=5    [slave  keyboard (3)]
        â†³ Windows keyboard                          id=7    [slave  keyboard (3)]

    $ xinput enable 6

æ­¤é…ç½®ä¸ºä¸´æ—¶æ€§è®¾ç½®ï¼Œåº”è¯¥å°†é…ç½®å†™å…¥ /etc/X11/Xsession.d ç›®å½•ä¸‹çš„é…ç½®æ–‡ä»¶ä¸­ã€‚ä¹Ÿå¯ä»¥å°è¯•åœ¨ GUI
ç•Œé¢ä¸­åŒå‡»è§¦å‘é…ç½®å†™å…¥ç£ç›˜æ–‡ä»¶ã€‚ 
https://manpages.ubuntu.com/manpages/oracular/en/man5/Xsession.5.html

X11 é»˜è®¤è¾“å…¥é…ç½®æ–‡ä»¶ï¼Œä»¥åŠé…ç½®æ–‡æ¡£æŸ¥è¯¢å‘½ä»¤å¦‚ä¸‹ï¼š

    cat /usr/share/X11/xorg.conf.d/40-libinput.conf

    man xorg.conf

    https://wiki.ubuntu.com/X/Config/Input

Xfce é»˜è®¤é…ç½®åªå…è®¸ console ç”¨æˆ·å¯åŠ¨ X-Serverã€‚å¦‚æœæ‚¨ç¡®å®šæ— å®‰å…¨éšæ‚£å¹¶ä¸”åªå…³å¿ƒåŠŸèƒ½ï¼Œè€Œä¸æ˜¯å…³å¿ƒ
å®‰å…¨ï¼Œå¯ä»¥è®¾ç½®ä¸ºä»»ä½•äººï¼ˆanybodyï¼‰éƒ½å¯ä»¥ä½¿ç”¨ root æƒé™å¯åŠ¨ X-Serverï¼Œå› ä¸ºå®ƒå…·æœ‰ç‰¹æƒç¡¬ä»¶è®¿é—®æƒé™
å¹¶è®¿é—®å¤§é‡æ–‡ä»¶å¯èƒ½ä¼šæ‰“å¼€ä¸€ä¸ªå¾ˆå¤§çš„å®‰å…¨æ¼æ´ã€‚æ–‡æ¡£å‚è€ƒ man Xorg.wrapï¼š

    CONFIG FILE
       Xorg.wrap's  default  behavior  can  be  overridden from the /etc/X11/Xwrapper.config config file. Lines starting with a # in
       Xwrapper.config are considered comments and will be ignored. Any other non empty lines must take the form of key = value.        

       allowed_users = rootonly|console|anybody
               Specify which users may start the X server through the wrapper. Use rootonly to only allow root, use console to  only    
               allow users logged into a physical console, and use anybody to allow anybody.  The default is console.

       needs_root_rights = yes|no|auto
               Configure if the wrapper should drop its elevated (root) rights before starting the X server. Use yes to force execuâ€    
               tion as root, no to force execution with all suid rights dropped, and auto to let the wrapper  auto-detect.  The  deâ€    
               fault is auto.

       When  auto-detecting  the wrapper will drop rights if kms graphics are available and not drop them if no kms graphics are deâ€    
       tected. If a system has multiple graphics cards and some are not kms capable auto-detection may fail,  in  this  case  manual    
       configuration should be used.

é…ç½®å¥½ Linux å›¾å½¢ç•Œé¢åå°±åªå¯ä»¥å®‰è£…ä½¿ç”¨ Inkscape è¿™äº›å·¥å…·è½¯ä»¶ï¼Œè¿™æ¬¾è½¯ä»¶åœ¨ Windows ç¯å¢ƒä¸‹çœŸçš„
å¡åˆ°æ²¡åŠæ³•ä½¿ç”¨ã€‚å®˜æ–¹å·²ç»å‡çº§åˆ° 1.5 ç‰ˆæœ¬ï¼Œä½†æ˜¯ Ubuntu è¿˜åªæä¾› 0.92 å®‰è£…åŒ…ã€‚åªèƒ½ä»¥ä¸ªäººè½¯ä»¶åŒ…å­˜æ¡£
ï¼ˆPersonal Package Archiveï¼‰æ–¹å¼å®‰è£…ã€‚PPA å…è®¸ Linux ç”¨æˆ·ã€åº”ç”¨ç¨‹åºå¼€å‘äººå‘˜åˆ›å»ºè‡ªå·±çš„è½¯ä»¶
ä»“åº“æ¥åˆ†å‘è½¯ä»¶ã€‚é€šè¿‡ PPAï¼Œå¯ä»¥è½»æ¾åœ°è·å¾—æ›´åŠ æ–°çš„è½¯ä»¶ç‰ˆæœ¬æˆ–è·å¾—å®˜æ–¹ Ubuntu ä»“åº“ä»¥å¤–çš„è½¯ä»¶ã€‚å¯æƒœï¼Œ
WSL ç¯å¢ƒä¸‹ï¼Œè¿™äº›è½¯ä»¶å¹¶ä¸èƒ½ä½¿ç”¨ç»˜æ¿çš„å‹æ„Ÿä¿¡å·ã€‚

    $ sudo apt install inkscape
    Reading package lists... Done
    Building dependency tree       
    Reading state information... Done
    inkscape is already the newest version (0.92.5-1ubuntu1.1).

    # https://inkscape.org/release/inkscape-1.4/gnulinux/ubuntu/ppa/dl/
    sudo add-apt-repository ppa:inkscape.dev/stable
    sudo apt update
    sudo apt install inkscape

å¯ä»¥å°† VcXsrv é…ç½®ä¿å­˜åˆ°æ–‡ä»¶ï¼Œå¹¶é€šè¿‡å‘½ä»¤è¡ŒåŠ è½½ï¼š

    if [[ -z "$(tasklist | grep vcxsrv | grep Console)" ]]; then
        "C:\Program Files (x86)\VcXsrv\xlaunch.exe" -run "C:\Users\OCEAN\config.xlaunch" > /c/tmp/xsrv.log 2>&1
    fi

    # "C:\Program Files (x86)\VcXsrv\vcxsrv.exe" :0 -clipboard -multiwindow -ac
    # "C:\Program Files (x86)\Xming\Xming.exe" :0 -clipboard -multiwindow -ac
    # wsl --exec xfce4-session --display=192.168.0.104:0 > /c/tmp/xfce.log 2>&1
    wsl -- xfce4-session --display=192.168.0.104:0 > /c/tmp/xfce.log 2>&1

    srv=$(tasklist | grep Services | grep vcxsrv | awk "{print \$2}")

    if ! [[ -z "$srv" ]]; then
        # taskkill -f -im vcxsrv.exe
        for it in $srv; do taskkill -f -pid $it; done
    fi

ä¸åŒæ–¹å¼å¯åŠ¨ Xfce ä¼šè¯ï¼Œæ¶ˆè€—çš„æ—¶é—´ä¼šä¸ä¸€æ ·ï¼Œåå°ä»»åŠ¡æ‰§è¡Œä¼šç­‰å¾…å‡ åˆ†é’Ÿçš„æ—¶é—´æ‰èƒ½è¿æ¥ä¸Š X æœåŠ¡ç¨‹åºï¼š

    wsl xfce4-session --display=192.168.0.104:0
    xfce4-session --display=192.168.0.104:0 &

ä½¿ç”¨è¿‡ç¨‹ä¸­å‘ç°ï¼Œé™ç½® 10 åˆ†é’Ÿå·¦å³ä¼šå‡ºç° Linux å›¾å½¢åº”ç”¨ç¨‹åºå¤±å»äº‹ä»¶å“åº”ã€é»‘å±ï¼Œä¼¼ä¹åˆä¸æ˜¯æ˜¯å¾…æœºå¼•èµ·
çš„é—®é¢˜ã€‚`Ubuntu Desktop Guide <https://help.ubuntu.com/stable/ubuntu-help/power.html>`__

å¯¼è‡´ Xfce æ¡Œé¢å¡æ­»é—®é¢˜å¯èƒ½æ˜¯å±å¹•ä¿æŠ¤ç¨‹åºæœºåˆ¶ï¼Œæˆ–è€…å±å¹•äº®åº¦é”å®šï¼Œå› ä¸ºé”å®šåæ— æ³•æ¥æ”¶è§£é”ä¿¡å·ï¼Œå¯¼è‡´
æ¡Œé¢å¤±å»å“åº”ã€‚å¯ä»¥å¸è½½å±ä¿ç¨‹åºæˆ–è€…è°ƒæ•´è®¾ç½®ï¼š

    Applications -> Settings -> Light Locker Settings ->
    Automatically lock the session -> Never

    sudo apt purge xfce4-screensaver
    sudo apt autoremove

å¦å¤–ï¼Œæ¡Œé¢ç®¡ç†å™¨ã€é¢æ¿ï¼ˆpanelï¼‰ä¹Ÿæœ‰ç›¸åº”å‘½ä»¤æ¥é‡ç½®ï¼š

    // Window Manager (xfwm4) https://docs.xfce.org/xfce/xfwm4/start
    // Panel (xfce4-panel) https://docs.xfce.org/xfce/xfce4-panel/start

    xfwm4 --replace &
    xfce4-panel -r &

The Xfce 4 Window Manager is part of the Xfce Desktop Environment. The command to 
run it in the foreground is xfwm4; to run it in the background use xfwm4 â€“daemon. 
The window manager is responsible for the placement of windows on the screen, 
provides the window decorations and allows them to be moved, resized or closed.

å¯ä»¥åˆ›å»º .desktop æ¡Œé¢çš„å¿«æ·æ–¹å¼ç”¨äºæ‰§è¡Œé‡ç½®ï¼š

    [Desktop Entry]
    Version=1.0
    Type=Application
    Name=Repanel
    Comment=Replace panel
    Exec=xfce4-panel -r
    Icon=xfce4-panel
    Path=/
    Terminal=false
    StartupNotify=false

    [Desktop Entry]
    Version=1.0
    Type=Application
    Name=Replace
    Comment=Replace Desktop 
    Exec=xfwm4 --replace &
    Icon=system-reboot
    Path=/
    Terminal=false
    StartupNotify=false

å¯ä»¥å°†è„šæœ¬å½“ä½œ Windows æœåŠ¡è¿è¡Œï¼Œä½†æ˜¯è„šæœ¬ä¸èƒ½ç›´æ¥ä½¿ç”¨ sc æ³¨å†Œä¸ºæœåŠ¡ï¼Œå®ƒæ³¨å†Œ exe ç¨‹åºï¼Œå› æ­¤
éœ€è¦é€šè¿‡è„šæœ¬è§£é‡Šå™¨æ¥æ‰§è¡Œè„šæœ¬ã€‚è¿˜å¯ä»¥ä½¿ç”¨â€œå¯åŠ¨â€æˆ–è€… Task Scheduler åŠŸèƒ½ï¼Œæˆ–è€…åˆ©ç”¨ç°æœ‰çš„å·¥å…·
ï¼ˆé¿å…è‡ªå·±å®ç°æœåŠ¡ç¨‹åºï¼‰ã€‚Microsoft Windows Resource Kits å·¥å…·é›†æä¾›çš„ instsrv.exe
å’Œ srvany.exe ä¸¤ä¸ªå®ç”¨å·¥å…·ï¼Œæˆ–è€… Python ä¸­çš„ pywin32 æ¨¡å—ä¹Ÿæä¾›äº†æœåŠ¡æ³¨å†ŒåŠŸèƒ½ã€‚PowerShell
å¯ä»¥ä½¿ç”¨ New-Service å°†ä¸€ä¸ª .ps1 è„šæœ¬æ–‡ä»¶æ³¨å†Œä¸ºæœåŠ¡ã€‚`NSSM <https://nssm.cc/download>`__
æ˜¯ä¸€ä¸ªå¼€æºæœåŠ¡ç¨‹åºç®¡ç†å·¥å…·å®ç°ã€‚ä½¿ç”¨ Go è¯­è¨€æä¾›çš„æœåŠ¡ç¨‹åºæ¨¡å—ï¼Œå¯ä»¥éå¸¸æ–¹ä¾¿åœ°å®ç°è‡ªå·±çš„æœåŠ¡ã€‚

    sc create xlaunch binPath="C:\msys64\usr\bin\mintty.exe C:\vcpkg\xsrv.sh"
    sc create xlaunch binPath="C:\Windows\System32\WindowsPowerShell\v1.0\powershell.exe -ExecutionPolicy Bypass -File C:\vcpkg\xsrv.ps1" -Description "XLaunch"

    nssm install xsrv "C:\Windows\System32\WindowsPowerShell\v1.0\powershell.exe" "C:\vcpkg\xsrv.ps1"
    nssm edit xsrv
    nssm start xsrv

    New-Service -Name "XLaunch" -BinaryPathName "C:\Windows\System32\WindowsPowerShell\v1.0\powershell.exe -ExecutionPolicy Bypass -File C:\vcpkg\xsrv.ps1"

ä½¿ç”¨ NSSM è®¾ç½® vcxsrv.exe ä¸ºæœåŠ¡ï¼Œå¦‚æœå¯åŠ¨å¤±è´¥ï¼Œå¹¶ä¸”æœåŠ¡è®¾ç½®ä¸ºè‡ªåŠ¨è¿è¡Œï¼Œè¿™ä¼šå¯¼è‡´éšç€
æ—¶é—´å¢åŠ ï¼Œvcxsrv.exe æœåŠ¡è¿›ç¨‹ä¹Ÿä¼šä¸æ–­å¢åŠ ï¼Œå¯èƒ½æ˜¯å› ä¸ºå°è¯•é‡å¯å¯¼è‡´çš„ã€‚

PowerShell ä½œä¸ºä¸€ä¸ªæœ€æ–°çš„è„šæœ¬è§£é‡Šå™¨ï¼Œå®ƒè¿˜å¯ä»¥ç¼–è¯‘å’Œé“¾æ¥çš„å®Œæ•´ C# åº”ç”¨åˆ°æ–°çš„å¯æ‰§è¡Œæ–‡ä»¶ã€‚ä¾‹å¦‚ï¼Œ
ä»¥ä¸‹æ­¤è„šæœ¬é€šè¿‡å†…åµŒ C# ä»£ç ï¼Œç¼–è¯‘å¾—åˆ°ä¸€ä¸ª hello.exe å¯æ‰§è¡Œç¨‹åºï¸°

    $source = @"
    using System;
    class Hello {
        static void Main() {
        while
        Console.WriteLine("Hello World!");
        }
    }
    "@
    Add-Type -TypeDefinition $source -Language CSharp -OutputAssembly "hello.exe" -OutputType ConsoleApplication

    # https://learn.microsoft.com/zh-cn/archive/msdn-magazine/2016/may/windows-powershell-writing-windows-services-in-powershell

Ubuntu é»˜è®¤æºé€Ÿåº¦å¦‚æœç¼“æ…¢ï¼Œå¯ä»¥åˆ‡æ¢åˆ°é˜¿é‡Œæºï¼Œä½¿ç”¨ vim ç¼–è¾‘æºé…ç½®ï¼š

    sudo cp /etc/apt/sources.list /etc/apt/sources.list.bak
    sudo vim /etc/apt/sources.list

å…ˆå¤‡åˆ†é…ç½®æ–‡ä»¶ï¼Œå†å°†é…ç½®æ–‡ä»¶ä¸­çš„å†…å®¹æ›¿æ¢ï¼š

- cn.archive.ubuntu.com ---> mirrors.aliyun.com
- security.ubuntu.com ---> mirrors.aliyun.com

vim çš„æ›¿æ¢ substitute å‘½ä»¤ `:s` ç”¨æ¥æŸ¥æ‰¾å’Œæ›¿æ¢å­—ç¬¦ä¸²ï¼Œè¯­æ³•å¦‚ä¸‹ï¼š

    :{ä½œç”¨èŒƒå›´}s/{ç›®æ ‡}/{æ›¿æ¢}/{æ›¿æ¢æ ‡å¿—}
    
    :%s/cn.archive.ubuntu.com/mirrors.aliyun.com
    :%s/security.ubuntu.com/mirrors.aliyun.com

ä¿å­˜å¹¶é€€å‡ºï¼Œæ‰§è¡Œä¸€ä¸‹ä»¥ä¸‹ä»£ç æ›´æ–°è½¯ä»¶åŒ…åˆ°æœ€æ–°çŠ¶æ€ã€‚

    sudo apt update
    sudo apt upgrade

å®‰è£…ä¸­æ–‡è¯­è¨€åŒ…

    sudo apt install language-pack-zh-hans language-pack-zh-hans-base

è®¾ç½®æœ¬åœ°åŒ–ç¯å¢ƒå˜é‡

    echo "LANG=zh_CN.UTF-8" >> ~/.profile

ä¸­æ–‡è¾“å…¥æ³•

    sudo apt install fcitx fcitx-pinyin
    echo -e "export XMODIFIERS=@im=fcitx\nexport GTK_IM_MODULE=fcitx\nexport QT_IM_MODULE=fcitx\n" >> .profile


## ğŸ¤ğŸ¥ SSH ç™»å½•è®¾ç½®

åœ¨ Windows WSL ç³»ç»Ÿä¸Šå¯ç”¨ SSH æœåŠ¡ï¼Œå…ˆé€‚å½“ä¿®æ”¹é…ç½®æ–‡ä»¶ï¼Œæ›´æ”¹ç«¯å£ Port 22 æ”¹æˆ Portï¼Œæˆ–å¯ç”¨
å¯†ç éªŒè¯ PasswordAuthenticationï¼Œå¹¶åˆ›å»ºå¯†é’¥å¯¹ï¼š

```sh
$ sudo vi /etc/ssh/sshd_config
$ cd /etc/ssh              
$ sudo ssh-keygen -A
 ssh-keygen: generating new host keys: RSA DSA ECDSA ED25519   
$ sudo /etc/init.d/ssh start
  * Starting OpenBSD Secure Shell server sshd          [ OK ]
$ sudo service ssh restart

# å¼€æœºè‡ªå¯è®¾ç½®
# vi /etc/rc.local
# service sshd start
```

å¯ç”¨å¯†ç éªŒè¯å°±å¯ä»¥ä½¿ç”¨ç”¨æˆ·è´¦æˆ·ç™»å½•ï¼š

    ssh root@localhost -p 22

æœªå¯ç”¨å¯†ç ç™»å½•ï¼Œä¸”æœªæ­£ç¡®é…ç½®ç™»å½•å¯†é’¥ï¼Œå°±å¯èƒ½å‡ºç°å…¬é’¥æƒé™é—®é¢˜ Permission denied (publickey).

ä½¿ç”¨å…¬é’¥ç™»å½•éœ€è¦åœ¨æœåŠ¡å™¨ä¸­è®°å½•å—è®¤å¯çš„å…¬é’¥ï¼Œä»¥ä¸‹æƒ…å†µéƒ½ä¼šå¯¼è‡´å…¬é’¥è®¿é—®æƒé™è¢«æ‹’ç»ï¼š

- æœ¬åœ°è®¿é—®è¿œç¨‹ä¸»æœºçš„å…¬é’¥æ²¡æœ‰æ·»åŠ æˆ–è€…è¢«å–æ¶ˆï¼ˆæ— æ³•è®¤è¯ï¼‰
- è¿œç¨‹æœåŠ¡å™¨å…¬é’¥æ–‡ä»¶å¤¹æƒé™é”™è¯¯ï¼Œ.ssh å’Œ .ssh/authorized_keysï¼Œéœ€è¦ä¿è¯åªæœ‰ç”¨æˆ·è‡ªå·±æœ‰æƒé™ï¼Œå¦åˆ™éªŒè¯æ— æ•ˆã€‚

ä½¿ç”¨ ssh-keygen ä¸ºæœ¬åœ°æœºå™¨ç”Ÿæˆçš„ä¸€å¯¹ç§˜é’¥ï¼Œå…¬é’¥æ–‡ä»¶çš„å†…å®¹ï¼ŒC:\Users\XXX\.ssh\id_rsa.pubï¼Œ
åº”è¯¥ä¿å­˜åœ¨è¿œç¨‹æœåŠ¡å™¨ç«¯å·²è®¤è¯ç§˜é’¥æ–‡ä»¶å†… `~/.ssh/authorized_keys`ã€‚ç™»å½•æ—¶ï¼Œæ³¨æ„è¦æŒ‡å®šç›¸åº”çš„ç”¨æˆ·è´¦æˆ·ã€‚

ä½¿ç”¨ SSH å®¢æˆ·ç«¯ç™»å½•æ—¶ï¼Œå¦‚æœéœ€è¦è¿è¡Œ GUIï¼Œé‚£ä¹ˆå°±éœ€è¦è½¬å‘ X Client å’Œ X Server ä¹‹é—´çš„æ•°æ®ï¼ŒX11
åè®®çš„æ‰€æœ‰æ•°æ®åŒ…é€šè¿‡ SSH åŠ å¯†é€šé“å®‰å…¨è½¬å‘ï¼ˆX11 Forwardingï¼‰ã€‚


# ğŸš© Debian ç¼–è¯‘å†…æ ¸æ•™ç¨‹
[Debian å‚è€ƒæ‰‹å†Œ - ç¼–è¯‘å†…æ ¸æºä»£ç ï¼šDebian å†…æ ¸å›¢é˜Ÿæ¨è](https://www.debian.org/doc/manuals/debian-reference/ch09.zh-cn.html#_the_kernel)

    ä¸ªäººæ‹¼å‡‘

    åŸºæœ¬æ–¹æ³•
    å…ˆæ˜¯è·å–å†…æ ¸æºç 
    æ–¹æ³•1ã€å†…æ ¸å®˜ç½‘ä¸‹è½½å†…æ ¸
    å®˜ç½‘ï¼š åœ¨ kernel çš„å®˜ç½‘ä¸Šæœ‰ä¸‰ç§ç‰ˆæœ¬,mainline,stable,longterm
    mainline æ˜¯ä¸»çº¿ç‰ˆæœ¬,æœ€æ–°çš„,åƒ linux-3.7 æˆ–æ˜¯ 3.8-rc1 stable æ˜¯ç¨³å®šç‰ˆ,åƒ linux-3.7.1
    longterm æ˜¯é•¿æœŸæ”¯æŒç‰ˆ,ç›®å‰å®˜ç½‘ä¸Šæ˜¯ 2 ä¸ª,3.0,3.4,å†åŠ ä¸€ä¸ªåå¨˜å…»çš„ 3.2
    è¿˜æœ‰ä¸€ä¸ªæ˜¯ eol,å½“ç„¶å°±æ˜¯ä¸å†æ”¯æŒäº†,3.5.3.6 å°±æ˜¯ eol äº† é€‰é‚£ä¸ªéšä¾¿ å»ºè®®ç¨³å®šç‰ˆ
    æ–¹æ³•2ã€æ˜¯ç”¨git ,git çš„ä¼˜ç‚¹æ˜¯å–å‡ºå¾ˆå¿«,ä¸ç”¨æ‰“è¡¥ä¸,ç¼ºç‚¹æ˜¯ç¬¬ä¸€æ¬¡æ¯”è¾ƒæ…¢
    ç¨³å®šç‰ˆ git clone git://git.kernel.org/pub/scm/linux/kernel/git/stable/linux-stable.git
    è€å¤§ç‰ˆ git clone git://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git
    å…ˆè£…ä¸Š git-core è¿™ä¸ªè½¯ä»¶åŒ… ä¸€èˆ¬é»˜è®¤æ˜¯ master è¿™ä¸ªåˆ†æ”¯,å½“ç„¶å¤§å®¶å¯ä»¥æŸ¥çœ‹è¿œç¨‹åˆ†æ”¯
    git branch -r å–å‡ºçš„è¯,å¯ä»¥çœ‹æ ¹æ®ä¸Šé¢çš„ç‰ˆæœ¬ ç„¶å git checkout ä½ è¦çš„ç‰ˆæœ¬
    ä¸‹æ¬¡æ›´æ–° ç›´æ¥ git pull,åŒ…ä¸‹è½½,åŒ…æ•´åˆ,å¦‚æœæ˜¯æ•´åˆå¤±è´¥å†æ‰‹å·¥æ•´åˆ,å‡ ç‡æ¯”è¾ƒå°

    é¦–å…ˆè·å–ä¸€ä¸‹rootæƒé™

    sudo -s -H
    å®‰è£…å¿…è¦çš„å·¥å…·

    make gcc gdb bison m4 autoconf automake libtool dpkg-dev libncurses5-dev build-essential kernel-package fakeroot
    å¯é€‰å®‰è£…ï¼š

    sudo aptitude install libqt3-headers libqt3-mt-dev libqt3-compat-headers libqt3-mt
    è¿™ä¸€æ­¥å®‰è£…qtåº“ å®ç°å›¾å‹é…ç½® ä¸æ˜¯å¿…é¡»ä¸ªäººæ²¡ä½¿ç”¨
    æ‰¾åˆ°ä½ å†…æ ¸ä¸‹è½½çš„ç›®å½• æŠŠæºç å¤åˆ¶åˆ°any directory you likeç„¶åtar -jxvf +å†…æ ¸æ–‡ä»¶å
    ç„¶åè¿›åˆ°è§£å‹ç›®å½• lsä¸€ä¸‹çœ‹ä¸‹å‡ ä¸ªç›®å½•æ‰¾åˆ°è·Ÿä½ ä¸‹è½½çš„å†…æ ¸æ–‡ä»¶åä¸€æ ·çš„æ–‡ä»¶å¤¹
    è¿›åˆ°ç›®å½• ç„¶åé…ç½®å†…æ ¸å‚æ•°

    cp /boot/config-`uname -r` ./.config
    è¿™æ˜¯ç”¨ç°åœ¨çš„å†…æ ¸é…ç½®æ–°å†…æ ¸
    å†…æ ¸é…ç½® make nconfig è‡ªå®šä¹‰é…ç½® nconfig æ˜¯åœ¨ 2.6.35 ä¹‹åæ¨èç”¨çš„,ä¹Ÿå»ºè®®ä¸è¦å†ç”¨å›ä»¥å‰çš„menuconfig
    æ© å†…æ ¸ç¼–è¯‘é‡è¦çš„å°±æ˜¯å†…æ ¸é…ç½® è¿™å—éœ€è¦å•ç‹¬æ‹¿å‡ºæ¥è®² å…ˆæ”¾ä¸€è¾¹ å¦‚æœå«Œè¿™æ ·é…ç½®éº»çƒ¦çš„è¯å¯ä»¥ä»æœ€å°åŒ–é…ç½®ï¼Œmake defconfigï¼Œå†make nconfigæˆ–è€…ç”¨make localmodconfigè‡ªåŠ¨ç²¾ç®€å†…æ ¸
    æ¥ä¸‹æ¥å°±æ˜¯ç¼–è¯‘äº†

    make-kpkg clean
    (sudo)fakeroot make-kpkg --initrd --append-to-version= -å†…æ ¸åå­— kernel_image kernel-headers -jn
    næ ¹æ®gentooçš„æ‰‹å†Œä¸Šæ¨èæ˜¯çº¿ç¨‹æ•°+1 è¿™ä¸ªå¯ä»¥è‡ªå·±æ ¹æ®æƒ…å†µæ¥
    ç„¶åç­‰ä¸€ä¼šå°±å¯ä»¥äº† ç¼–è¯‘å¥½çš„å†…æ ¸åœ¨ä¸Šä¸€å±‚ç›®å½•ã€‚åŒ…æ‹¬linux-headers-...-_i386.debå’Œlinux-image-...-i386.debä¸¤ä¸ªæ–‡ä»¶ï¼Œimageé‚£ä¸ªæ˜¯å†…æ ¸
    åˆ‡æ¢åˆ°ä¸Šä¸€å±‚ç›®å½•ç„¶å

    (sudo)dpkg -i + æ–°å†…æ ¸
    psï¼šæ‰“è¡¥ä¸
    æˆ‘ä»¬æ‰“è¡¥ä¸ä¸€èˆ¬çš„ç›®çš„æ˜¯ä¸ºäº†ç¨³å®šæˆ–è€…åŠ ä¸€äº›å…¶ä»–åŠŸèƒ½,æ¯”å¦‚æ‰“ä¸Š 3.7.1 çš„è¡¥ä¸ æˆ–è€…åŠ å…¥ realtime çš„è¡¥ä¸,æ‰“è¡¥ä¸æ˜¯åœ¨ä¸»çº¿ç‰ˆæœ¬ä¹‹ä¸Šçš„,åƒ 3.7.1 æ˜¯åœ¨ 3.7 ä¸Šé¢ patch
    å¯èƒ½è¿‡å‡ å¤©åˆå‡ºæ¥ 3.7.2,ä¹Ÿæ˜¯åœ¨ 3.7 ä¸Šçš„,è¿™æ—¶ä½ å¦‚æœæ˜¯ 3.7.1,è¦å…ˆåˆ é™¤æ‰ 3.7.1 å¦‚æœæ˜¯ 3.8-rc1,ä¹Ÿæ˜¯åœ¨ 3.7.0 ä¸Šé¢æ‰“çš„,è€Œä¸æ˜¯ 3.7.1
    æ‰“è¡¥ä¸å®ä¾‹,å‡è®¾ä»¥æˆ‘ä»¬ä¸‹è½½çš„æ˜¯ patch-3.7.1.xz,
    å…ˆåˆ‡æ¢åˆ°ä½ çš„æºç ç›®å½•,æ¥ç€ xzcat è¡¥ä¸åŒ…çš„ä½ç½®/patch-3.7.1.xz | patch -p1
    åˆ é™¤:xzcat è¡¥ä¸åŒ…çš„ä½ç½®/patch-3.7.1.xz | patch -p1 -R
    å»ºè®®ä¸‹è½½ä¸€ä¸ªç›¸è¿‘çš„ä¸»çº¿ç‰ˆæœ¬,ç„¶åç”¨è¡¥ä¸åŒ…æ„é€ å‡ºä½ æƒ³è¦çš„ç‰ˆæœ¬,è¿™æ ·ä¸ç”¨ä¸€ç›´ä¸‹è½½ æ•´åŒ…,å»ºè®®å¤§å®¶ç”¨ xz çš„å‹ç¼©åŒ… æ‰“è¡¥ä¸è¿™é¡¹å·¥ä½œä¸€èˆ¬æ˜¯ä¸‹è½½å®Œæºç åå°±è¦åšçš„

    ç¼–è¯‘æ–¹æ³•
    kernelå®˜æ–¹çš„æ–¹æ³•ï¼Œdeb-pkgï¼Œè¿™ä¸ªæ˜¯åœ¨ä¸Šå±‚ç›®å½•ä¸­ç”Ÿæˆimage,header,libc-devæˆ–è€…ä¹ŸåŒ…æ‹¬ firmwareï¼Œè¿™ä¸ªä¹Ÿæ˜¯ç”ŸæˆdebåŒ…çš„ï¼Œå®‰è£…å°±æ˜¯dpkg -i xxï¼Œæ¨èç”¨è¿™ç§æ–¹æ³•

    å‘½ä»¤:make deb-pkg
    ç°åœ¨cpuéƒ½æ˜¯å¤šæ ¸çš„ï¼Œè¦å¿«ç‚¹æ˜¯è¿™æ ·

    make -j2 deb-ppkg
    j2å°±å¾ˆå¿«äº†ï¼Œ4æ ¸çš„è¯ä¹Ÿå¯ä»¥j4
    å¦‚æœæƒ³çŸ¥é“ç”¨å¤šå°‘æ—¶é—´ï¼Œæ˜¯è¿™æ ·

    time make -j2 deb-pkg
    é€šç”¨ç¼–è¯‘æ–¹æ³•
    æ‰€è°“é€šç”¨ï¼Œå°±æ˜¯ä½ ç¼–å¥½åï¼Œä¹Ÿå¯ä»¥æ”¾åœ¨å…¶ä»–ç³»ç»Ÿï¼Œæ¯”å¦‚gentoo

    make ç„¶å make modules_install && make install
    ä½†è¿™æ˜¯ä»¥å‰çš„æ–¹æ³•ï¼Œç°åœ¨å°±ç®—è¦è¿™æ ·ï¼Œä¸Šé¢çš„æ–¹æ³•æ˜¾å¾—å¤ªæš´åŠ›äº†ï¼Œç°åœ¨æ¨èçš„æ˜¯è¿™æ ·ï¼š
    make -j2 tar-pkg/make -j2 targz-pkg/make -j2 tarbz2-pkg/make -j2 tarxz-pkg
    è¿™æ ·ç¼–è¯‘å‡ºæ¥æ˜¯ä¸€ä¸ªtaråŒ…/tarå†å‹ç¼©çš„åŒ…ï¼Œ
    å®‰è£…çš„æ—¶å€™åªè¦è¿™æ · åˆ‡æ¢åˆ°rootï¼Œç„¶å
    tar xvf ä½ çš„åŒ…å -C /
    æ„æ€å°±æ˜¯æŠŠä½ çš„åŒ…è§£å‹åˆ°/æ ¹ç›®å½•ï¼Œè¿™æ ·åœ¨/bootä¸‹å°±æ˜¯ä½ è£…çš„æ–‡ä»¶ï¼Œè¿˜æœ‰/lib/modules/ä¸‹
    æœ€åä½ è¦åšçš„æ˜¯æ›´æ–°ä¸‹grubï¼Œdebianæ›´æ˜¯ç®€å•ï¼Œupdate-grub
    å¦‚æœè¦åˆ é™¤ï¼Œä¹Ÿå¾ˆç®€å•

    rm /boot/ä¸‹é¢çš„systemxx vmlinzxx configxx
    è¿˜æœ‰ä¸ä¹‹ç›¸å¯¹åº”çš„ä¸€äº›æ¨¡å—

    rm /lib/modules/ä½ è¦åˆ é™¤ç‰ˆæœ¬çš„æ–‡ä»¶å¤¹
    ç„¶åupdate-grub
    å‰æï¼Œå¦‚æœä½ åªæ˜¯è¿™æ ·ç¼–è¯‘å‡ºæ¥ï¼Œåªæœ‰vmlinuz,å¦‚æœæœ‰éœ€è¦initramfsï¼Œè¿˜è¦æ‰‹åŠ¨æ„å»ºinitramfs
    å¦‚æœç”¨deb-pkgåŒ…å®‰è£…ï¼Œè¿™ä¸ªæ˜¯è‡ªåŠ¨æ„å»ºçš„ å¦‚æœä½ ä¸æƒ³è¦initramfsï¼Œçœ‹ä¸‹é¢
    initramfs
    debianè™½ç„¶åå«initrdï¼Œä½†æ˜¯ç”¨çš„æ˜¯initramfs
    ç®€å•ä¸€ç‚¹ï¼Œå°±æ˜¯å¯åŠ¨æ—¶å…ˆæ„å»ºä¸€ä¸ªå°ç¯å¢ƒï¼Œç„¶åå†æŒ‚è½½/è¿™ä¸ªæ–‡ä»¶ç³»ç»Ÿ
    ä½†æ˜¯è¿™æ ·ä¸€æ¥å¯åŠ¨æ—¶é—´ä¼šæ…¢äº›ï¼Œå› ä¸ºè¦ç­‰ï½ï½ï½æ¯”å¦‚ext4ï¼Œahciç¼–è¯‘æˆæ¨¡å—çš„æ—¶å€™

    å¦‚æœä¸è¦è¿™æ ·ï¼Œæˆ‘ä»¬ç›´æ¥ä»å†…æ ¸å¯åŠ¨ï¼Œé‚£é¦–è¦æ¡ä»¶æ˜¯ä¸‹åˆ—çš„ä¸€å®šè¦ç¼–è¯‘åˆ°å†…æ ¸é‡Œ
    è€Œä¸æ˜¯åšä¸ºæ¨¡å—ï¼Œä¸ç„¶å†…æ ¸ä¼šææ…Œ~~~
    Serial ATA and Parallel ATA driversä¸€å®šè¦ä¸ºå†…æ ¸ï¼Œåœ¨å­èœå•é‡Œä½ çš„ç£ç›˜æ§åˆ¶å™¨é©±åŠ¨ä¹Ÿè¦Y
    SCSI device supporté‡Œçš„SCSI device support&&SCSI disk support
    Generic Driver Options->
    Maintain a devtmpfs filesystem to mount at /dev
    Automount devtmpfs at /dev, after the kernel mounted the rootfs
    è¿˜æœ‰æ–‡ä»¶ç³»ç»Ÿæ¯”å¦‚ext4ï¼Œä¸€å®šè¦åˆ°å†…æ ¸

    æ€»ç»“
    make deb-pkgå’Œmake tar-pkgçš„ä¼˜ç¼ºç‚¹
    deb-pkgçš„ä¼˜ç‚¹ï¼š
    å®‰è£…å®Œåå¯ä»¥ç”¨aptæ¥åˆ é™¤ï¼Œæ›´å’Œè°
    deb-pkgçš„ç¼ºç‚¹ï¼š
    åªèƒ½åœ¨debianç”¨ï¼Œè€Œä¸”ä½ å®‰è£…æ—¶è‡ªåŠ¨æ„å»ºinitramfs
    make tar-pkgä¼˜ç‚¹ï¼š
    é€šç”¨ï¼Œä½ å¯ä»¥åº”ç”¨åœ¨å…¶ä»–çš„ç³»ç»Ÿï¼Œæ¯”å¦‚arch/gentoo
    ä¸ä¼šè‡ªåŠ¨åˆ›å»ºinitramfs(è¿™ä¸ªç®—ä¼˜ç‚¹å§ï¼Œå› ä¸ºæ²¡å¼ºåŠ ç»™ä½ )
    ç¼ºç‚¹ï¼š
    å¾—æ‰‹å·¥åˆ é™¤ï¼Œä½†å…¶å®ä¹Ÿä¸ç®—ç¼ºç‚¹ï¼Œå°±æ˜¯æœ‰ç‚¹ä¸å’Œè°
    å…¶å®å°±æ˜¯åˆ é™¤ä¸€ä¸ªæ–‡ä»¶å¤¹å’Œå‡ ä¸ªæ–‡ä»¶

    å…¶ä»–
    å†…æ ¸ç›¸å…³æ–‡ä»¶åªåœ¨ä¸‰ä¸ªåœ°æ–¹
    /bootä¸‹é¢æ˜¯å†…æ ¸çš„æœ¬ä½“ï¼ŒäºŒè¿›åˆ¶æ–‡ä»¶ï¼Œä¸€èˆ¬éƒ½ä¼šè‡ªå¸¦ç‰ˆæœ¬å·
    /usr/srcä¸‹é¢æ˜¯å†…æ ¸çš„æºä»£ç æ–‡ä»¶ï¼Œä¸æ˜¯è·Ÿé©±åŠ¨æœ‰å…³çš„æ¨¡å—ç­‰éƒ½æ˜¯æ ¹æ®/usr/src/linux/çš„è½¯é“¾æ¥æ¥Â·åˆ¤æ–­å†…æ ¸çš„ç‰ˆæœ¬çš„ï¼ŒåŒæ—¶é™¤äº†linuxæ–‡ä»¶å¤¹å¤–ï¼Œå…¶ä»–çš„æºä»£ç æ–‡ä»¶å¤¹ä¸€æ ·å¸¦ç‰ˆæœ¬å·
    /lib/modules å†…æ ¸æ¨¡å—ï¼Œä¹Ÿæ˜¯ç¼–è¯‘å¥½çš„ï¼Œä¹Ÿå¸¦äº†ç‰ˆæœ¬å·ã€‚å…¶ä½™çš„åŸºæœ¬å°±æ²¡äº†
    ä¸å·¥ä½œçš„å†…æ ¸é™¤äº†å ç©ºé—´æ²¡ä»€ä¹ˆç”¨é€”ï¼Œæœ‰ä¸€ä¸ªå¯å¯åŠ¨çš„å†…æ ¸å°±è¡Œäº† æŠŠæ²¡ç”¨çš„åˆ äº†æ›´æ–°ä¸€ä¸‹grub.cfgå°±è¡Œ

# ğŸš© ç¼–è¯‘linux2.6.24

çœŸæ˜¯æ¯ä¸ªlinuxçš„å°ç‰ˆæœ¬ç¼–è¯‘çš„æ—¶å€™éƒ½æœ‰ä¸åŒçš„é—®é¢˜å•Šï¼Œ
æœ€è¿‘åœ¨çœ‹ã€Šç‹¬è¾Ÿè¹Šå¾„å“å†…æ ¸ã€‹ã€Šlinux2.6å†…æ ¸æ ‡å‡†æ•™ç¨‹ã€‹
ç”¨åˆ°linux2.6.24.ç¼–è¯‘çš„é—®é¢˜æ±‡æ€»åˆ°è¿™é‡Œ

ç¯å¢ƒ

    [root@centos140_11 boot]# gcc --version  
    gcc (GCC) 4.8.3 20140911 (Red Hat 4.8.3-9)  
    Copyright (C) 2013 Free Software Foundation, Inc.  
    This is free software; see the source for copying conditions.  There is NO  
    warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  
      
    [root@centos140_11 boot]# cat /etc/redhat-release   
    CentOS Linux release 7.1.1503 (Core)   
    [root@centos140_11 boot]#   

ä¸‹è½½ Linux 2.6.24 åŸä»£ç 
https://www.kernel.org/pub/linux/kernel/v2.6/

è§£å‹å
è®¾ç½®menuconfig é€‰debug

    make O=/home/haoning/rtclinux/websocket/web/jslinux/tmp/linux2.6.24.build/kernel/ menuconfig  


å¼€å§‹ç¼–è¯‘ï¼š

    time make O=/home/haoning/rtclinux/websocket/web/jslinux/tmp/linux2.6.24.build/kernel/ -j10  

é‡åˆ°é—®é¢˜ï¼š

é”™è¯¯1
å‚è€ƒ
http://blog.sina.com.cn/s/blog_8f9cdbbd01014lxj.html

    arch/x86/vdso/Makefile  
     19 quiet_cmd_syscall = SYSCALL $@  
     20       cmd_syscall = $(CC) -m elf_x86_64 -nostdlib $(SYSCFLAGS_$(@F)) \  
     21                   -Wl,-T,$(filter-out FORCE,$^) -o $@  


    -m elf_x86_64 æ¢æˆ -m64

é”™è¯¯2ï¼š

    /tmp/cct0Bawg.s: Assembler messages:  
    /tmp/cct0Bawg.s: Error: .size expression for copy_user_generic_c does not evaluate to a constant  
    make[2]: *** [arch/x86/lib/copy_user_64.o] Error 1  
    make[1]: *** [arch/x86/lib] Error 2  
    make: *** [sub-make] Error 2  


å‚è€ƒ
http://stackoverflow.com/questions/23194840/linux-2-6-24-kernel-compilation-error-size-expression-for-copy-user-generic-c-d

    arch/x86/lib/copy_user_64.S  
    347 END(copy_user_generic_c)  
    348   
    349     .section __ex_table,"a"  
    350     .quad 1b,3b  
    351     .quad 2b,5b  

æ¢æˆ  

    347 END(copy_user_generic_c)  
    348   
    349     .section __ex_table,"a"  
    350     .quad 1b,3b  
    351     .quad 2b,5b  


é”™è¯¯3ï¼š

    kernel/built-in.o: In function `mutex_lock':  
    /home/haoning/rtclinux/websocket/web/jslinux/tmp/linux-2.6.24/kernel/mutex.c:92: undefined reference to `__mutex_lock_slowpath'  
    kernel/built-in.o: In function `mutex_unlock':  
    /home/haoning/rtclinux/websocket/web/jslinux/tmp/linux-2.6.24/kernel/mutex.c:118: undefined reference to `__mutex_unlock_slowpath'  
    make[1]: *** [.tmp_vmlinux1] Error 1  
    make: *** [sub-make] Error 2  


kernel/mutex.c
è¿™ä¸ªå¥½ä½¿ï¼Œå…¶ä»–çš„éƒ½æ˜¯æ‰¯æ·¡ï¼Œä»€ä¹ˆè¯¥configå‚æ•°ï¼Œä»€ä¹ˆåŠ __usedéƒ½ä¸è¡Œï¼Œéœ€è¦æŠŠstaticå»æ‰ï¼ŒåŠ é”å’Œè§£é”çš„
https://github.com/socketpair/jslinux_reversed/blob/master/contrib/patches/2.6.20_common_fixes.patch

    __mutex_lock_slowpathçš„ä¸¤ä¸ªæ–¹æ³•çš„staticå»æ‰
    __mutex_unlock_slowpathçš„ä¸¤ä¸ªæ–¹æ³•çš„staticå»æ‰

é”™è¯¯4ï¼š

    /scripts/unifdef.c:70:0:  
    /usr/include/stdio.h:678:20: note: previous declaration of â€˜getlineâ€™ was here  


è§£å†³ï¼š

    scripts/unifdef.c  
    207 static int              findsym(const char *);  
    208 static void             flushline(bool);  
    209 //static Linetype         getline(void);  
    210 static Linetype         mygetline(void);  
    211 static Linetype         ifeval(const char **);  
    212 static void             ignoreoff(void);  
      
    511     Linetype lineval;  
    512   
    513     for (;;) {  
    514         linenum++;  
    515         //lineval = getline();  
    516         lineval = mygetline();  
    517         trans_table[ifstate[depth]][lineval]();  
    518         debug("process %s -> %s depth %d",  
    519             linetype_name[lineval],  
    520             ifstate_name[ifstate[depth]], depth);  
    521     }  
    522 }  
    523   
    524 /* 
    525  * Parse a line and determine its type. We keep the preprocessor line 
    526  * parser state between calls in the global variable linestate, with 
    527  * help from skipcomment(). 
    528  */  
    529 static Linetype  
    530 //getline(void)  
    531 mygetline(void)  
    532 {     
    533     const char *cp;  
    534     int cursym;  
    535     int kwlen;  


# ğŸš© å¦‚ä½•ç¼–è¯‘ Linux å†…æ ¸
[å¦‚ä½•ç¼–è¯‘ Linux å†…æ ¸](https://linux.cn/article-9665-1.html?pr)

è¯‘è‡ªï¼šhttps://www.linux.com/learn/intro-to-linux/2018/4/how-compile-linux-kernel-0ä½œè€…ï¼š Jack Wallen
åŸåˆ›ï¼šLCTT https://linux.cn/article-9665-1.html è¯‘è€…ï¼š Luke

Jack å°†å¸¦ä½ åœ¨ Ubuntu 16.04 æœåŠ¡å™¨ä¸Šèµ°è¿‡å†…æ ¸ç¼–è¯‘ä¹‹æ—…ã€‚



æ›¾ç»æœ‰ä¸€æ®µæ—¶é—´ï¼Œå‡çº§ Linux å†…æ ¸è®©å¾ˆå¤šç”¨æˆ·æ‰“å¿ƒé‡Œæœ‰æ‰€ç•æƒ§ã€‚åœ¨é‚£ä¸ªæ—¶å€™ï¼Œå‡çº§å†…æ ¸åŒ…å«äº†å¾ˆå¤šæ­¥éª¤ï¼Œä¹Ÿéœ€è¦å¾ˆå¤šæ—¶é—´ã€‚ç°åœ¨ï¼Œå†…æ ¸çš„å®‰è£…å¯ä»¥è½»æ˜“åœ°é€šè¿‡åƒ apt è¿™æ ·çš„åŒ…ç®¡ç†å™¨æ¥å¤„ç†ã€‚é€šè¿‡æ·»åŠ ç‰¹å®šçš„ä»“åº“ï¼Œä½ èƒ½å¾ˆè½»æ˜“åœ°å®‰è£…å®éªŒç‰ˆæœ¬çš„æˆ–è€…æŒ‡å®šç‰ˆæœ¬çš„å†…æ ¸ï¼ˆæ¯”å¦‚é’ˆå¯¹éŸ³é¢‘äº§å“çš„å®æ—¶å†…æ ¸ï¼‰ã€‚

è€ƒè™‘ä¸€ä¸‹ï¼Œæ—¢ç„¶å‡çº§å†…æ ¸å¦‚æ­¤å®¹æ˜“ï¼Œä¸ºä»€ä¹ˆä½ ä¸æ„¿æ„è‡ªè¡Œç¼–è¯‘ä¸€ä¸ªå‘¢ï¼Ÿè¿™é‡Œåˆ—ä¸¾ä¸€äº›å¯èƒ½çš„åŸå› ï¼š

ä½ æƒ³è¦ç®€å•äº†è§£ç¼–è¯‘å†…æ ¸çš„è¿‡ç¨‹
ä½ éœ€è¦å¯ç”¨æˆ–è€…ç¦ç”¨å†…æ ¸ä¸­ç‰¹å®šçš„é€‰é¡¹ï¼Œå› ä¸ºå®ƒä»¬æ²¡æœ‰å‡ºç°åœ¨æ ‡å‡†é€‰é¡¹é‡Œ
ä½ æƒ³è¦å¯ç”¨æ ‡å‡†å†…æ ¸ä¸­å¯èƒ½æ²¡æœ‰æ·»åŠ çš„ç¡¬ä»¶æ”¯æŒ
ä½ ä½¿ç”¨çš„å‘è¡Œç‰ˆéœ€è¦ä½ ç¼–è¯‘å†…æ ¸
ä½ æ˜¯ä¸€ä¸ªå­¦ç”Ÿï¼Œè€Œç¼–è¯‘å†…æ ¸æ˜¯ä½ çš„ä»»åŠ¡
ä¸ç®¡å‡ºäºä»€ä¹ˆåŸå› ï¼Œæ‡‚å¾—å¦‚ä½•ç¼–è¯‘å†…æ ¸æ˜¯éå¸¸æœ‰ç”¨çš„ï¼Œè€Œä¸”å¯ä»¥è¢«è§†ä½œä¸€ä¸ªé€šè¡Œæƒã€‚å½“æˆ‘ç¬¬ä¸€æ¬¡ç¼–è¯‘ä¸€ä¸ªæ–°çš„ Linux å†…æ ¸ï¼ˆé‚£æ˜¯å¾ˆä¹…ä»¥å‰äº†ï¼‰ï¼Œç„¶åå°è¯•ä»å®ƒå¯åŠ¨ï¼Œæˆ‘ä»ä¸­ï¼ˆç³»ç»Ÿé©¬ä¸Šå°±å´©æºƒäº†ï¼Œç„¶åä¸æ–­åœ°å°è¯•å’Œå¤±è´¥ï¼‰æ„Ÿå—åˆ°ä¸€ç§ç‰¹å®šçš„å…´å¥‹ã€‚

æ—¢ç„¶è¿™æ ·ï¼Œè®©æˆ‘ä»¬æ¥å®éªŒä¸€ä¸‹ç¼–è¯‘å†…æ ¸çš„è¿‡ç¨‹ã€‚æˆ‘å°†ä½¿ç”¨ Ubuntu 16.04 Server æ¥è¿›è¡Œæ¼”ç¤ºã€‚åœ¨è¿è¡Œäº†ä¸€æ¬¡å¸¸è§„çš„ sudo apt upgrade ä¹‹åï¼Œå½“å‰å®‰è£…çš„å†…æ ¸ç‰ˆæœ¬æ˜¯ 4.4.0-121ã€‚æˆ‘æƒ³è¦å‡çº§å†…æ ¸ç‰ˆæœ¬åˆ° 4.17ï¼Œ è®©æˆ‘ä»¬å°å¿ƒåœ°å¼€å§‹å§ã€‚

æœ‰ä¸€ä¸ªè­¦å‘Šï¼šå¼ºçƒˆå»ºè®®ä½ åœ¨è™šæ‹Ÿæœºé‡Œå®éªŒè¿™ä¸ªè¿‡ç¨‹ã€‚åŸºäºè™šæ‹Ÿæœºï¼Œä½ æ€»èƒ½åˆ›å»ºä¸€ä¸ªå¿«ç…§ï¼Œç„¶åè½»æ¾åœ°ä»ä»»ä½•é—®é¢˜ä¸­å›é€€å‡ºæ¥ã€‚ä¸è¦åœ¨äº§å“æœºå™¨ä¸Šä½¿ç”¨è¿™ç§æ–¹å¼å‡çº§å†…æ ¸ï¼Œé™¤éä½ çŸ¥é“ä½ åœ¨åšä»€ä¹ˆã€‚

ä¸‹è½½å†…æ ¸
æˆ‘ä»¬è¦åšçš„ç¬¬ä¸€ä»¶äº‹æ˜¯ä¸‹è½½å†…æ ¸æºç ã€‚åœ¨ Kernel.org[1] æ‰¾åˆ°ä½ è¦ä¸‹è½½çš„æ‰€éœ€å†…æ ¸çš„ URLã€‚æ‰¾åˆ° URL ä¹‹åï¼Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤ï¼ˆæˆ‘ä»¥ 4.17 RC2 å†…æ ¸ä¸ºä¾‹ï¼‰ æ¥ä¸‹è½½æºç æ–‡ä»¶:

wget https://git.kernel.org/torvalds/t/linux-4.17-rc2.tar.gz

åœ¨ä¸‹è½½æœŸé—´ï¼Œæœ‰ä¸€äº›äº‹éœ€è¦å»è€ƒè™‘ã€‚

å®‰è£…éœ€è¦çš„ç¯å¢ƒ
ä¸ºäº†ç¼–è¯‘å†…æ ¸ï¼Œæˆ‘ä»¬é¦–å…ˆå¾—å®‰è£…ä¸€äº›éœ€è¦çš„ç¯å¢ƒã€‚è¿™å¯ä»¥é€šè¿‡ä¸€ä¸ªå‘½ä»¤æ¥å®Œæˆï¼š

sudo apt-get install git fakeroot build-essential ncurses-dev xz-utils libssl-dev bc flex libelf-dev bison
åŠ¡å¿…æ³¨æ„ï¼šä½ å°†éœ€è¦è‡³å°‘ 12 GB çš„æœ¬åœ°å¯ç”¨ç£ç›˜ç©ºé—´æ¥å®Œæˆå†…æ ¸çš„ç¼–è¯‘è¿‡ç¨‹ã€‚å› æ­¤ä½ å¿…é¡»ç¡®ä¿æœ‰è¶³å¤Ÿçš„ç©ºé—´ã€‚

è§£å‹æºç 
åœ¨æ–°ä¸‹è½½çš„å†…æ ¸æ‰€åœ¨çš„æ–‡ä»¶å¤¹ä¸‹ï¼Œä½¿ç”¨è¯¥å‘½ä»¤æ¥è§£å‹å†…æ ¸ï¼š

tar xvzf linux-4.17-rc2.tar.gz
ä½¿ç”¨å‘½ä»¤ cd linux-4.17-rc2 è¿›å…¥æ–°ç”Ÿæˆçš„æ–‡ä»¶å¤¹ã€‚

é…ç½®å†…æ ¸
åœ¨æ­£å¼ç¼–è¯‘å†…æ ¸ä¹‹å‰ï¼Œæˆ‘ä»¬é¦–å…ˆå¿…é¡»é…ç½®éœ€è¦åŒ…å«å“ªäº›æ¨¡å—ã€‚å®é™…ä¸Šï¼Œæœ‰ä¸€äº›éå¸¸ç®€å•çš„æ–¹å¼æ¥é…ç½®ã€‚ä½¿ç”¨ä¸€ä¸ªå‘½ä»¤ï¼Œä½ èƒ½æ‹·è´å½“å‰å†…æ ¸çš„é…ç½®æ–‡ä»¶ï¼Œç„¶åä½¿ç”¨å¯é çš„ menuconfig å‘½ä»¤æ¥åšä»»ä½•å¿…è¦çš„æ›´æ”¹ã€‚ä½¿ç”¨å¦‚ä¸‹å‘½ä»¤æ¥å®Œæˆï¼š

cp /boot/config-$(uname -r) .config
ç°åœ¨ä½ æœ‰ä¸€ä¸ªé…ç½®æ–‡ä»¶äº†ï¼Œè¾“å…¥å‘½ä»¤ make menuconfigã€‚è¯¥å‘½ä»¤å°†æ‰“å¼€ä¸€ä¸ªé…ç½®å·¥å…·ï¼ˆå›¾ 1ï¼‰ï¼Œå®ƒå¯ä»¥è®©ä½ éå†æ¯ä¸ªå¯ç”¨æ¨¡å—ï¼Œç„¶åå¯ç”¨æˆ–è€…ç¦ç”¨ä½ éœ€è¦æˆ–è€…ä¸éœ€è¦çš„æ¨¡å—ã€‚

å›¾ 1: è¿è¡Œä¸­çš„ make menuconfig

å›¾ 1: è¿è¡Œä¸­çš„ make menuconfig

å¾ˆæœ‰å¯èƒ½ä½ ä¼šç¦ç”¨æ‰å†…æ ¸ä¸­çš„ä¸€ä¸ªé‡è¦éƒ¨åˆ†ï¼Œæ‰€ä»¥åœ¨ menuconfig æœŸé—´å°å¿ƒåœ°ä¸€æ­¥æ­¥è¿›è¡Œã€‚å¦‚æœä½ å¯¹æŸä¸ªé€‰é¡¹ä¸ç¡®å®šï¼Œä¸è¦å»ç®¡å®ƒã€‚æˆ–è€…æ›´å¥½çš„æ–¹æ³•æ˜¯ä½¿ç”¨æˆ‘ä»¬æ‹·è´çš„å½“å‰è¿è¡Œçš„å†…æ ¸çš„é…ç½®æ–‡ä»¶ï¼ˆå› ä¸ºæˆ‘ä»¬çŸ¥é“å®ƒå¯ä»¥å·¥ä½œï¼‰ã€‚ä¸€æ—¦ä½ å·²ç»éå†äº†æ•´ä¸ªé…ç½®åˆ—è¡¨ï¼ˆå®ƒéå¸¸é•¿ï¼‰ï¼Œä½ å°±å‡†å¤‡å¥½å¼€å§‹ç¼–è¯‘äº†ã€‚

ç¼–è¯‘å’Œå®‰è£…
ç°åœ¨æ˜¯æ—¶å€™å»å®é™…åœ°ç¼–è¯‘å†…æ ¸äº†ã€‚ç¬¬ä¸€æ­¥æ˜¯ä½¿ç”¨ make å‘½ä»¤å»ç¼–è¯‘ã€‚è°ƒç”¨ make å‘½ä»¤ç„¶åå›ç­”å¿…è¦çš„é—®é¢˜ï¼ˆå›¾ 2ï¼‰ã€‚è¿™äº›é—®é¢˜å–å†³äºä½ å°†å‡çº§çš„ç°æœ‰å†…æ ¸ä»¥åŠå‡çº§åçš„å†…æ ¸ã€‚ç›¸ä¿¡æˆ‘ï¼Œå°†ä¼šæœ‰éå¸¸å¤šçš„é—®é¢˜è¦å›ç­”ï¼Œå› æ­¤ä½ å¾—é¢„ç•™å¤§é‡çš„æ—¶é—´ã€‚

å›¾ 2: å›ç­” make å‘½ä»¤çš„é—®é¢˜

å›¾ 2: å›ç­” make å‘½ä»¤çš„é—®é¢˜

å›ç­”äº†é•¿ç¯‡ç´¯ç‰çš„é—®é¢˜ä¹‹åï¼Œä½ å°±å¯ä»¥ç”¨å¦‚ä¸‹çš„å‘½ä»¤å®‰è£…é‚£äº›ä¹‹å‰å¯ç”¨çš„æ¨¡å—ï¼š

make modules_install
åˆæ¥äº†ï¼Œè¿™ä¸ªå‘½ä»¤å°†è€—è´¹ä¸€äº›æ—¶é—´ï¼Œæ‰€ä»¥è¦ä¹ˆåä¸‹æ¥çœ‹ç€ç¼–è¯‘è¾“å‡ºï¼Œæˆ–è€…å»åšäº›å…¶ä»–äº‹ï¼ˆå› ä¸ºç¼–è¯‘æœŸé—´ä¸éœ€è¦ä½ çš„è¾“å…¥ï¼‰ã€‚å¯èƒ½çš„æƒ…å†µæ˜¯ï¼Œä½ æƒ³è¦å»è¿›è¡Œåˆ«çš„ä»»åŠ¡ï¼ˆé™¤éä½ çœŸçš„å–œæ¬¢çœ‹ç€ç»ˆç«¯ç•Œé¢ä¸Šé£èˆè€Œè¿‡çš„è¾“å‡ºï¼‰ã€‚

ç°åœ¨æˆ‘ä»¬ä½¿ç”¨è¿™ä¸ªå‘½ä»¤æ¥å®‰è£…å†…æ ¸ï¼š

sudo make install
åˆä¸€æ¬¡ï¼Œå¦ä¸€ä¸ªå°†è¦è€—è´¹å¤§é‡å¯è§‚æ—¶é—´çš„å‘½ä»¤ã€‚äº‹å®ä¸Šï¼Œmake install å‘½ä»¤å°†æ¯” make modules_install å‘½ä»¤èŠ±è´¹æ›´å¤šçš„æ—¶é—´ã€‚å»äº«ç”¨åˆé¤ï¼Œé…ç½®ä¸€ä¸ªè·¯ç”±å™¨ï¼Œå°† Linux å®‰è£…åœ¨ä¸€äº›æœåŠ¡å™¨ä¸Šï¼Œæˆ–è€…å°ç¡ä¸€ä¼šå§ã€‚

å¯ç”¨å†…æ ¸ä½œä¸ºå¼•å¯¼
ä¸€æ—¦ make install å‘½ä»¤å®Œæˆäº†ï¼Œå°±æ˜¯æ—¶å€™å°†å†…æ ¸å¯ç”¨æ¥ä½œä¸ºå¼•å¯¼ã€‚ä½¿ç”¨è¿™ä¸ªå‘½ä»¤æ¥å®ç°ï¼š

sudo update-initramfs -c -k 4.17-rc2
å½“ç„¶ï¼Œä½ éœ€è¦å°†ä¸Šè¿°å†…æ ¸ç‰ˆæœ¬å·æ›¿æ¢æˆä½ ç¼–è¯‘å®Œçš„ã€‚å½“å‘½ä»¤æ‰§è¡Œå®Œæ¯•åï¼Œä½¿ç”¨å¦‚ä¸‹å‘½ä»¤æ¥æ›´æ–° grubï¼š

sudo update-grub
ç°åœ¨ä½ å¯ä»¥é‡å¯ç³»ç»Ÿå¹¶ä¸”é€‰æ‹©æ–°å®‰è£…çš„å†…æ ¸äº†ã€‚

æ­å–œ!
ä½ å·²ç»ç¼–è¯‘äº†ä¸€ä¸ª Linux å†…æ ¸ï¼å®ƒæ˜¯ä¸€é¡¹è€—è´¹æ—¶é—´çš„æ´»åŠ¨ï¼›ä½†æ˜¯ï¼Œæœ€ç»ˆä½ çš„ Linux å‘è¡Œç‰ˆå°†æ‹¥æœ‰ä¸€ä¸ªå®šåˆ¶çš„å†…æ ¸ï¼ŒåŒæ—¶ä½ ä¹Ÿå°†æ‹¥æœ‰ä¸€é¡¹è¢«è®¸å¤š Linux ç®¡ç†å‘˜æ‰€å€¾å‘å¿½è§†çš„é‡è¦æŠ€èƒ½ã€‚

ä» Linux åŸºé‡‘ä¼šå’Œ edX æä¾›çš„å…è´¹ â€œIntroduction to Linuxâ€[2] è¯¾ç¨‹æ¥å­¦ä¹ æ›´å¤šçš„ Linux çŸ¥è¯†ã€‚

via: https://www.linux.com/learn/intro-to-linux/2018/4/how-compile-linux-kernel-0

ä½œè€…ï¼šJack Wallen[3] é€‰é¢˜ï¼šlujun9972[4] è¯‘è€…ï¼šicecoobe[5] æ ¡å¯¹ï¼šwxy[6]

æœ¬æ–‡ç”± LCTT[7] åŸåˆ›ç¼–è¯‘ï¼ŒLinuxä¸­å›½[8] è£èª‰æ¨å‡º

- [1]: https://www.kernel.org/
- [2]: https://training.linuxfoundation.org/linux-courses/system-administration-training/introduction-to-linux
- [3]: https://www.linux.com/users/jlwallen
- [4]: https://github.com/lujun9972
- [5]: https://github.com/icecoobe
- [6]: https://github.com/wxy
- [7]: https://github.com/LCTT/TranslateProject
- [8]: https://linux.cn/article-9665-1.html?pr



# ğŸš© APT & apt-get
[Debian å‚è€ƒæ‰‹å†Œ - è½¯ä»¶åŒ…ç®¡ç†](https://www.debian.org/doc/manuals/debian-reference/ch02.zh-cn.html)

ä¸€èˆ¬æ¥è¯´è‘—åçš„linuxç³»ç»ŸåŸºæœ¬ä¸Šåˆ†ä¸¤å¤§ç±»ï¼š

- RedHat ç³»åˆ—ï¼šRedhatã€Centosã€Fedora ç­‰
- Debian ç³»åˆ—ï¼šDebianã€Ubuntu ç­‰

RedHat ç³»åˆ—ä½¿ç”¨åŒ…ç®¡ç†å·¥å…· yumï¼Œå¸¸è§çš„å®‰è£…åŒ…æ ¼å¼ rpmï¼Œå®‰è£…å‘½ä»¤æ˜¯ rpmï¼Œæ”¯æŒ tar åŒ…ã€‚

Debian ç³»åˆ—å¸¸è§çš„å®‰è£…åŒ…æ ¼å¼ deb åŒ…ï¼Œå®‰è£…å‘½ä»¤æ˜¯ dpkgï¼Œ åŒ…ç®¡ç†å·¥å…·æ˜¯ apt-getï¼Œæ”¯æŒ tar åŒ…ã€‚

    wget http://mirrors.163.com/debian/pool/main/a/apt/apt_1.9.4_arm64.deb
    wget http://mirrors.kernel.org/ubuntu/pool/main/d/dpkg/dpkg_1.18.4ubuntu1_amd64.deb

rpm ç›¸å½“äº Windows ä¸­çš„å®‰è£…æ–‡ä»¶ï¼Œå®ƒä¼šè‡ªåŠ¨å¤„ç†è½¯ä»¶åŒ…ä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚ ç›´æ¥é€šè¿‡rpmå‘½ä»¤è¿›è¡Œå®‰è£…åˆ é™¤ç­‰æ“ä½œï¼Œæœ€å¤§çš„ä¼˜ç‚¹æ˜¯è‡ªå·±å†…éƒ¨è‡ªåŠ¨å¤„ç†äº†å„ç§è½¯ä»¶åŒ…å¯èƒ½çš„ä¾èµ–å…³ç³»ã€‚rpm ä¸€èˆ¬éƒ½æ˜¯é¢„å…ˆç¼–è¯‘å¥½çš„æ–‡ä»¶ï¼Œå®ƒå¯èƒ½å·²ç»ç»‘å®šåˆ°æŸç§ CPU æˆ–è€…å‘è¡Œç‰ˆä¸Šé¢äº†ã€‚

tar åªæ˜¯ä¸€ç§å‹ç¼©æ–‡ä»¶æ ¼å¼ï¼Œæ‰€ä»¥ï¼Œå®ƒåªæ˜¯æŠŠæ–‡ä»¶å‹ç¼©æ‰“åŒ…è€Œå·²ã€‚tarä¸€èˆ¬åŒ…æ‹¬ç¼–è¯‘è„šæœ¬ï¼Œå¯ä»¥åœ¨å½“å‰ç¯å¢ƒä¸‹ç¼–è¯‘ï¼Œæ‰€ä»¥å…·æœ‰é€šç”¨æ€§ã€‚ å¦‚æœä½ çš„åŒ…ä¸æƒ³å¼€æ”¾æºä»£ç ï¼Œä½ å¯ä»¥åˆ¶ä½œæˆ rpmï¼Œå¦‚æœå¼€æºï¼Œç”¨ tar æ›´æ–¹ä¾¿äº†ã€‚ tar ä¸€èˆ¬éƒ½æ˜¯æºç æ‰“åŒ…çš„è½¯ä»¶ï¼Œéœ€è¦è‡ªå·±è§£åŒ…ï¼Œç„¶åè¿›è¡Œå®‰è£…ä¸‰éƒ¨æ›²ï¼Œ./configure, make, make install. æ¥å®‰è£…è½¯ä»¶ã€‚

Advanced Package Tool å³ apt-getï¼Œæ˜¯ç³»ç»Ÿçš„åº”ç”¨ç¨‹åºç®¡ç†å™¨ï¼Œæœ€åˆäº 1998 å¹´å‘å¸ƒï¼Œç”¨äºæ£€ç´¢åº”ç”¨ç¨‹åºå¹¶å°†å…¶åŠ è½½åˆ° Debian Linux ç³»ç»Ÿï¼Œå½“å‰çš„ç¨³å®šç‰ˆæœ¬æ˜¯ 2014 å¹´ 10 æœˆå‘å¸ƒçš„ 1.0.9.2ã€‚Apt-get æµè¡Œçš„åŸå› ä¹‹ä¸€åœ¨äºå…¶å‡ºè‰²çš„è§£å†³è½¯ä»¶ä¾èµ–å…³ç³»çš„èƒ½åŠ›ã€‚å…¶é€šå¸¸ä½¿ç”¨ .deb æ ¼å¼æ–‡ä»¶ï¼Œä½†ç»è¿‡ä¿®æ”¹åå¯ä»¥ä½¿ç”¨ apt-rpm å¤„ç†çº¢å¸½çš„ RPM - Redhat Package Manager æ–‡ä»¶ã€‚å¦‚æœä½ æƒ³è¦åŠ è½½çš„åº”ç”¨éœ€è¦ç¨‹åºåº“æˆ–å¦ä¸€ä¸ªåº”ç”¨ç¨‹åºæ‰èƒ½æ­£å¸¸å·¥ä½œï¼Œapt-get ä¼šå¸®ä½ æ‰¾åˆ°å¹¶åŠ è½½æ‰€éœ€çš„ç¨‹åºåº“æˆ–åº”ç”¨ä»£ç ã€‚apt-get

Ubuntu 16.04 å‘å¸ƒæ—¶ï¼Œä¸€ä¸ªå¼•äººæ³¨ç›®çš„æ–°ç‰¹æ€§ä¾¿æ˜¯ apt å‘½ä»¤çš„å¼•å…¥ã€‚å…¶å®æ—©åœ¨ 2014 å¹´ï¼Œapt å‘½ä»¤å°±å·²ç»å‘å¸ƒäº†ç¬¬ä¸€ä¸ªç¨³å®šç‰ˆï¼Œåªæ˜¯ç›´åˆ° 2016 å¹´çš„ Ubuntu 16.04 ç³»ç»Ÿå‘å¸ƒæ—¶æ‰å¼€å§‹å¼•äººå…³æ³¨ã€‚

éšç€ apt install package å‘½ä»¤çš„ä½¿ç”¨é¢‘ç‡å’Œæ™®éæ€§é€æ­¥è¶…è¿‡ apt-get install packageï¼Œè¶Šæ¥è¶Šå¤šçš„å…¶å®ƒ Linux å‘è¡Œç‰ˆä¹Ÿå¼€å§‹éµå¾ª Ubuntu çš„è„šæ­¥ï¼Œå¼€å§‹é¼“åŠ±ç”¨æˆ·ä½¿ç”¨ apt è€Œä¸æ˜¯ apt-getã€‚

Debian ä½œä¸º Ubuntuã€Linux Mint å’Œ elementary OS ç­‰ Linux æ“ä½œç³»ç»Ÿçš„æ¯æ¿ï¼Œå…¶å…·æœ‰å¼ºå¥çš„ã€ŒåŒ…ç®¡ç†ã€ç³»ç»Ÿï¼Œå®ƒçš„æ¯ä¸ªç»„ä»¶å’Œåº”ç”¨ç¨‹åºéƒ½å†…ç½®åœ¨ç³»ç»Ÿä¸­å®‰è£…çš„è½¯ä»¶åŒ…ä¸­ã€‚Debian ä½¿ç”¨ä¸€å¥—åä¸º APT - Advanced Packaging Tool çš„å·¥å…·æ¥ç®¡ç†è¿™ç§åŒ…ç³»ç»Ÿï¼Œä¸è¿‡è¯·ä¸è¦æŠŠå®ƒä¸ apt å‘½ä»¤æ··æ·†ï¼Œå®ƒä»¬ä¹‹é—´æ˜¯å…¶å®ä¸æ˜¯åŒä¸€ä¸ªä¸œè¥¿ã€‚

åœ¨åŸºäº Debian çš„ Linux å‘è¡Œç‰ˆä¸­ï¼Œæœ‰å„ç§å·¥å…·å¯ä»¥ä¸ APT è¿›è¡Œäº¤äº’ï¼Œä»¥æ–¹ä¾¿ç”¨æˆ·å®‰è£…ã€åˆ é™¤å’Œç®¡ç†çš„è½¯ä»¶åŒ…ã€‚apt-get ä¾¿æ˜¯å…¶ä¸­ä¸€æ¬¾å¹¿å—æ¬¢è¿çš„å‘½ä»¤è¡Œå·¥å…·ï¼Œå¦å¤–ä¸€æ¬¾è¾ƒä¸ºæµè¡Œçš„æ˜¯ Aptitude å³è¿™ä¸€å‘½ä»¤è¡Œä¸ GUI å…¼é¡¾çš„å°å·¥å…·ã€‚

å¸¸ç”¨çš„ Linux åŒ…ç®¡ç†å‘½ä»¤éƒ½è¢«åˆ†æ•£åœ¨äº† apt-getã€apt-cache å’Œ apt-config è¿™ä¸‰æ¡å‘½ä»¤å½“ä¸­ã€‚apt å‘½ä»¤çš„å¼•å…¥å°±æ˜¯ä¸ºäº†è§£å†³å‘½ä»¤è¿‡äºåˆ†æ•£çš„é—®é¢˜ï¼Œå®ƒåŒ…æ‹¬äº† apt-get å‘½ä»¤å‡ºç°ä»¥æ¥ä½¿ç”¨æœ€å¹¿æ³›çš„åŠŸèƒ½é€‰é¡¹ï¼Œä»¥åŠ apt-cache å’Œ apt-config å‘½ä»¤ä¸­å¾ˆå°‘ç”¨åˆ°çš„åŠŸèƒ½ã€‚

ç®€å•æ¥è¯´å°±æ˜¯ï¼šapt = apt-getã€apt-cache å’Œ apt-config ä¸­æœ€å¸¸ç”¨å‘½ä»¤é€‰é¡¹çš„é›†åˆã€‚

è™½ç„¶ apt ä¸ apt-get æœ‰ä¸€äº›ç±»ä¼¼çš„å‘½ä»¤é€‰é¡¹ï¼Œä½†å®ƒå¹¶ä¸èƒ½å®Œå…¨å‘ä¸‹å…¼å®¹ apt-get å‘½ä»¤ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¯ä»¥ç”¨ apt æ›¿æ¢éƒ¨åˆ† apt-get ç³»åˆ—å‘½ä»¤ï¼Œä½†ä¸æ˜¯å…¨éƒ¨ã€‚

    apt å‘½ä»¤              å–ä»£çš„å‘½ä»¤               å‘½ä»¤çš„åŠŸèƒ½
    apt install         apt-get install         å®‰è£…è½¯ä»¶åŒ…
    apt remove          apt-get remove          ç§»é™¤è½¯ä»¶åŒ…
    apt purge           apt-get purge           ç§»é™¤è½¯ä»¶åŒ…åŠé…ç½®æ–‡ä»¶
    apt update          apt-get update          åˆ·æ–°å­˜å‚¨åº“ç´¢å¼•
    apt upgrade         apt-get upgrade         å‡çº§æ‰€æœ‰å¯å‡çº§çš„è½¯ä»¶åŒ…
    apt autoremove      apt-get autoremove      è‡ªåŠ¨åˆ é™¤ä¸éœ€è¦çš„åŒ…
    apt full-upgrade    apt-get dist-upgrade    åœ¨å‡çº§è½¯ä»¶åŒ…æ—¶è‡ªåŠ¨å¤„ç†ä¾èµ–å…³ç³»
    apt search          apt-cache search        æœç´¢åº”ç”¨ç¨‹åº
    apt show            apt-cache show          æ˜¾ç¤ºå®‰è£…ç»†èŠ‚

å½“ç„¶ï¼Œapt è¿˜æœ‰ä¸€äº›è‡ªå·±çš„å‘½ä»¤ï¼š

    apt list            åˆ—å‡ºåŒ…å«æ¡ä»¶çš„åŒ…ï¼ˆå·²å®‰è£…ï¼Œå¯å‡çº§ç­‰ï¼‰
    apt edit-sources    ç¼–è¾‘æºåˆ—è¡¨


apt-get å®‰è£…ç›®å½•å’Œå®‰è£…è·¯å¾„ï¼š

    /var/cache/apt/archives ä¸‹è½½è½¯ä»¶ä¿å­˜è·¯å¾„
    /usr/share              ç³»ç»Ÿå®‰è£…è½¯ä»¶ä¸€èˆ¬åœ¨
    /usr/bin                å¯æ‰§è¡Œçš„æ–‡ä»¶åœ¨
    /etc                    é…ç½®æ–‡ä»¶åœ¨
    /usr/share              æ–‡æ¡£ä¸€èˆ¬åœ¨
    /usr/bin                å¯æ‰§è¡Œæ–‡ä»¶
    /etc                    é…ç½®æ–‡ä»¶
    /usr/lib                libæ–‡ä»¶

å¸¸ç”¨çš„å‘½ä»¤ï¼š

    apt-cache search packagename   # æœç´¢åŒ…
    apt-cache show packagename     # è·å–åŒ…çš„ç›¸å…³ä¿¡æ¯ï¼Œå¦‚è¯´æ˜ã€å¤§å°ã€ç‰ˆæœ¬ç­‰
    apt-get install packagename    # å®‰è£…åŒ…
    apt-get -f install             # ä¿®å¤å®‰è£… -f = â€“fix-missing
    apt-get remove packagename     # åˆ é™¤åŒ…
    apt-get remove packagename --purge      # åˆ é™¤åŒ…ï¼ŒåŒ…æ‹¬åˆ é™¤é…ç½®æ–‡ä»¶ç­‰
    apt-get install packagename --reinstall # é‡æ–°å®‰è£…åŒ…
    apt-get update                 # æ›´æ–°æº
    apt-get upgrade                # æ›´æ–°å·²å®‰è£…çš„åŒ…
    apt-get dist-upgrade           # å‡çº§ç³»ç»Ÿ
    apt-get dselect-upgrade        # ä½¿ç”¨ dselect å‡çº§
    apt-cache depends packagename  # äº†è§£ä½¿ç”¨ä¾èµ–
    apt-cache rdepends packagename # æ˜¯æŸ¥çœ‹è¯¥åŒ…è¢«å“ªäº›åŒ…ä¾èµ–
    apt-get build-dep packagename  # å®‰è£…ç›¸å…³çš„ç¼–è¯‘ç¯å¢ƒ
    apt-get source packagename     # ä¸‹è½½è¯¥åŒ…çš„æºä»£ç 
    apt-get clean                  # æ¸…ç†æ— ç”¨çš„åŒ…
    apt-get autoclean              # æ¸…ç†æ— ç”¨çš„åŒ…
    apt-get check                  # æ£€æŸ¥æ˜¯å¦æœ‰æŸåçš„ä¾èµ–


ubuntu é»˜è®¤çš„PATHä¸º

    PATH=/home/brightman/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games

apt-get install å®‰è£…ç›®å½•æ˜¯åŒ…çš„ç»´æŠ¤è€…ç¡®å®šçš„ï¼Œä¸æ˜¯ç”¨æˆ·ï¼Œdpkg -L +è½¯ä»¶åŒ…çš„åå­—ï¼Œå¯ä»¥æŸ¥è¯¢è¿™ä¸ªè½¯ä»¶åŒ…åŒ…å«äº†å“ªäº›æ–‡ä»¶

    $ dpkg -L packagename


åœ¨ Debian/Ubuntu è¿›è¡Œ apt-get install å®‰è£…è½¯ä»¶æ—¶ï¼Œæœ‰æ—¶å€™ä¼šå‡ºç°æ–‡ä»¶é”å®šé—®é¢˜ï¼š

    E: Could not get lock /var/lib/dpkg/lock - open (11: Resource temporarily unavailable)
    E: Unable to lock the administration directory (/var/lib/dpkg/), is another process using it?

ä¸»è¦æ˜¯å› ä¸º apt è¿˜åœ¨è¿è¡Œï¼Œè¿˜æœ‰å°±æ˜¯å¯èƒ½ apt è¿›ç¨‹è¢«å¼ºæ€æœªèƒ½åˆ é™¤æ–‡ä»¶é”ï¼Œæ­¤æ—¶çš„è§£å†³æ–¹æ¡ˆæ˜¯æ‰¾åˆ°å¹¶ä¸”æ€æ‰æ‰€æœ‰çš„ apt-get å’Œ apt è¿›ç¨‹ï¼Œæˆ–è€…æ‰‹åŠ¨åˆ é™¤æ–‡ä»¶é”

    ps -A | grep apt

    sudo kill processnumber
    sudo kill -9 processnumber
    sudo kill -SIGKILL processnumber
    sudo kill -9 processnumber
    sudo kill -SIGKILL processnumber


é”å®šçš„æ–‡ä»¶ä¼šé˜»æ­¢ Linux ç³»ç»Ÿä¸­æŸäº›æ–‡ä»¶æˆ–è€…æ•°æ®çš„è®¿é—®ï¼Œè¿™ä¸ªæ¦‚å¿µä¹Ÿå­˜åœ¨äº Windows æˆ–è€…å…¶ä»–çš„æ“ä½œç³»ç»Ÿä¸­ã€‚ä¸€æ—¦ä½ è¿è¡Œäº† apt-get æˆ–è€… apt å‘½ä»¤ï¼Œé”å®šæ–‡ä»¶å°†ä¼šåˆ›å»ºäºä»¥ä¸‹ä½ç½®:

    /var/lib/apt/lists/lock
    /var/lib/dpkg/lock
    /var/lib/dpkg/lock-frontend
    /var/cache/apt/archives/lock

è¿™æœ‰åŠ©äºè¿è¡Œä¸­çš„ apt-get æˆ–è€… apt è¿›ç¨‹èƒ½å¤Ÿé¿å…è¢«å…¶å®ƒéœ€è¦ä½¿ç”¨ç›¸åŒæ–‡ä»¶çš„ç”¨æˆ·æˆ–è€…ç³»ç»Ÿè¿›ç¨‹æ‰€æ‰“æ–­ã€‚å½“è¯¥è¿›ç¨‹æ‰§è¡Œå®Œæ¯•åï¼Œé”å®šæ–‡ä»¶å°†ä¼šåˆ é™¤ã€‚

å½“ä½ æ²¡æœ‰çœ‹åˆ° apt-get æˆ–è€… apt è¿›ç¨‹çš„æƒ…å†µä¸‹åœ¨ä¸Šé¢ä¸¤ä¸ªä¸åŒçš„æ–‡ä»¶å¤¹ä¸­çœ‹åˆ°äº†é”å®šæ–‡ä»¶ï¼Œè¿™æ˜¯å› ä¸ºè¿›ç¨‹ç”±äºæŸä¸ªåŸå› è¢«æ€æ‰äº†ï¼Œå› æ­¤ä½ éœ€è¦åˆ é™¤é”å®šæ–‡ä»¶æ¥é¿å…è¯¥é”™è¯¯ã€‚

é¦–å…ˆè¿è¡Œä¸‹é¢çš„å‘½ä»¤æ¥ç§»é™¤æ–‡ä»¶é”ï¼š

    sudo rm /var/lib/apt/lists/lock
    sudo rm /var/lib/dpkg/lock
    sudo rm /var/lib/dpkg/lock-frontend
    sudo rm /var/cache/apt/archives/lock

ä¹‹ååƒä¸‹é¢è¿™æ ·å¼ºåˆ¶é‡æ–°é…ç½®è½¯ä»¶åŒ…ï¼š

    sudo dpkg --configure -a

æ¥ä¸‹æ¥ï¼Œæ›´æ–°ä½ çš„è½¯ä»¶åŒ…æºåˆ—è¡¨ï¼š

    sudo apt update
    sudo apt-get update

æ€»ç»“ä¸€ä¸‹ï¼Œå¯¹äº Ubuntuï¼ˆä»¥åŠå®ƒçš„è¡ç”Ÿç‰ˆï¼‰ç”¨æˆ·åœ¨ä½¿ç”¨ apt-get æˆ–è€… apt ä¹Ÿå«Â aptitude å‘½ä»¤æ—¶é‡åˆ°çš„é—®é¢˜ï¼Œæˆ‘ä»¬å·²ç»ç”¨ä¸¤ç§æ–¹æ³•æ¥è§£å†³äº†ã€‚



## Debian 10 "buster" æ­£å¼å‘å¸ƒ

åœ¨æ›´æ–°æ—¥å¿—ä¸­ï¼Œå›¢é˜Ÿé¦–å…ˆæåˆ°äº† Debian 10 æ”¯æŒçš„æ¶æ„ã€‚æ®ä»‹ç»ï¼ŒDebian 10 "buster" å®˜æ–¹æ”¯æŒçš„æ¶æ„å¦‚ä¸‹ï¼š

- 32 ä½ PCï¼ˆi386ï¼‰å’Œ 64 ä½ PCï¼ˆamd64ï¼‰
- 64 ä½ ARMï¼ˆarm64ï¼‰
- ARM EABIï¼ˆarmelï¼‰ ARMv7ï¼ˆEABI ç¡¬æµ®ç‚¹ ABIï¼Œarmhfï¼‰
- MIPSï¼ˆmipsï¼ˆå¤§ç«¯åºï¼‰å’Œ mipselï¼ˆå°ç«¯åºï¼‰ï¼‰
- 64 ä½å°ç«¯åº MIPSï¼ˆmips64elï¼‰
- 64 ä½å°ç«¯åº PowerPCï¼ˆppc64elï¼‰
- IBM System zï¼ˆs390xï¼‰

æ®å›¢é˜Ÿä»‹ç»ï¼ŒDebian 10 "buster" æä¾›äº†å¤šä¸ªæ¡Œé¢ç¨‹åºå’Œç¯å¢ƒï¼Œå¹¶åŒ…å«ä»¥ä¸‹è¿™äº›æ¡Œé¢ç¯å¢ƒï¼šCinnamon 3.8ã€GNOME 3.30ã€KDE Plasma 5.14ã€LXDE 0.99.2ã€LXQt 0.14ã€MATE 1.20 å’Œ Xfce 4.12ã€‚

å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œåœ¨ Debian 10 ä¸­ï¼Œæ¡Œé¢ç¯å¢ƒ GNOME é»˜è®¤ä½¿ç”¨ Wayland è€Œä¸æ˜¯ Xorg ä½œä¸ºæ˜¾ç¤ºæœåŠ¡å™¨ã€‚å› ä¸º Debian å›¢é˜Ÿè®¤ä¸º Wayland æ‹¥æœ‰æ›´ç®€å•å’Œæ›´ç°ä»£çš„è®¾è®¡ï¼Œåœ¨å®‰å…¨æ€§æ–¹é¢ä¹Ÿæ›´å…·ä¼˜åŠ¿ã€‚ä¸è¿‡å³ä¾¿å¦‚æ­¤ï¼ŒDebian 10 è¿˜æ˜¯é»˜è®¤å®‰è£…äº† Xorg æ˜¾ç¤ºæœåŠ¡å™¨ï¼Œå¹¶ä¸”å¯ä»¥åœ¨å¯åŠ¨ä¼šè¯ä¹‹å‰é€‰æ‹©æ‰€ä½¿ç”¨çš„æ˜¾ç¤ºæœåŠ¡å™¨ â€”â€” é€‰æ‹©ä¸åŒçš„æ˜¾ç¤ºæœåŠ¡å™¨å¯¹äºä½¿ç”¨ç‰¹å®šçš„åº”ç”¨ç¨‹åºä¼šæœ‰å¸®åŠ©ã€‚

åœ¨å‘å¸ƒå…¬å‘Šä¸­ï¼Œå›¢é˜ŸèŠ±äº†å¾ˆå¤§çš„ç¯‡å¹…æ¥ä»‹ç» Debian 10 åœ¨å®‰å…¨æ–¹é¢çš„æ”¹è¿›ã€‚ä»–ä»¬è¡¨ç¤ºï¼Œé€šè¿‡ä½¿ç”¨ Reproducible Builds é¡¹ç›®ï¼ŒDebian 10 åŒ…å«çš„ 91ï¼… ä»¥ä¸Šçš„æºä»£ç åŒ…å°†æ„å»ºæˆâ€œä½å¯¹ä½ä¸€è‡´â€(bit-for-bit identical)çš„äºŒè¿›åˆ¶åŒ…ã€‚è¿™æ˜¯ä¸€é¡¹é‡è¦çš„éªŒè¯åŠŸèƒ½ï¼Œå¯ä¿æŠ¤ç”¨æˆ·å…é­ä¼å›¾æ¶æ„ç¯¡æ”¹ç¼–è¯‘å™¨å’Œæ„å»ºç½‘ç»œçš„æ”»å‡»ã€‚

æ­¤å¤–ï¼Œå›¢é˜Ÿè¿˜è¡¨ç¤ºæœªæ¥ Debian å‘å¸ƒçš„æ–°ç‰ˆæœ¬å°†åŒ…å«å·¥å…·å’Œå…ƒæ•°æ®ï¼Œä»¥ä¾¿ç»ˆç«¯ç”¨æˆ·ä¹Ÿèƒ½éªŒè¯å­˜æ¡£ä¸­åŒ…çš„æ¥æºã€‚

ä¸ºäº†ç…§é¡¾é‚£äº›å¯¹å®‰å…¨ç¯å¢ƒæœ‰æ›´é«˜è¦æ±‚çš„ç”¨æˆ·ï¼ŒDebian 10 é¦–æ¬¡é»˜è®¤å®‰è£…å¹¶å¯ç”¨äº† AppArmor å®‰å…¨æ¨¡å—ï¼Œè¿™æ˜¯ä¸€ä¸ªç”¨äºé™åˆ¶ç¨‹åºè®¿é—®æƒé™çš„æ§åˆ¶æ¡†æ¶ï¼Œé€šè¿‡ç»™æ¯ä¸ªç¨‹åºå®šä¹‰ä¸åŒçš„é…ç½®æ–‡ä»¶ï¼Œæ¥é™åˆ¶ç¨‹åºçš„è®¿é—®æƒé™ï¼ˆä¾‹å¦‚ mountï¼Œptrace å’Œ signal æƒé™ï¼Œæˆ–è€…æ–‡ä»¶çš„è¯»ã€å†™å’Œæ‰§è¡Œæƒé™ï¼‰ã€‚

åœ¨ Debian 7 "wheezy" é¦–æ¬¡å¼•å…¥çš„ UEFI å¯åŠ¨åœ¨æ­¤ç‰ˆæœ¬ä¸­ä¹Ÿæœ‰äº†æ˜æ˜¾çš„æ”¹è¿›ã€‚Debian 10 é¢å‘ amd64, i386 å’Œ arm64 æ¶æ„çš„æœºå™¨æä¾›äº†å®‰å…¨å¼•å¯¼(Secure Boot)çš„æ”¯æŒï¼Œå¹¶ä¸”åœ¨å¤§å¤šæ•°æœºå™¨ä¸Šå¼€ç®±å³ç”¨ã€‚è¿™æ„å‘³ç€ç”¨æˆ·ä¸å†éœ€è¦é€šè¿‡å›ºä»¶é…ç½®æ¥ç¦ç”¨å®‰å…¨å¯åŠ¨ï¼Œå¯ä»¥åœ¨ Debian Wiki çš„ Secure Boot é¡µé¢ä¸Šäº†è§£æ›´å¤šç›¸å…³ä¿¡æ¯ã€‚

å¦å¤–ï¼ŒDebian 10 "buster" ä¹Ÿæ˜¯ Debian é¦–ä¸ªæä¾›åŸºäº Rust çš„ç¨‹åºçš„å‘è¡Œç‰ˆï¼Œç›¸å…³çš„åº”ç”¨ç¨‹åºåŒ…æ‹¬ Firefoxã€ripgrepã€fdã€exa å’Œå¤§é‡åŸºäº Rust çš„è½¯ä»¶åº“ï¼ˆæ•°é‡è¶…è¿‡ 450 ä¸ªï¼‰ã€‚buster æä¾› rustc 1.34 ç‰ˆæœ¬ã€‚

Debian å›¢é˜Ÿè¿˜ä¸ºè®¸å¤šè½¯ä»¶åŒ…è¿›è¡Œäº†æ›´æ–°ï¼Œå¹¶è¡¨ç¤ºæ­¤æ¬¡æ›´æ–°å¸¦æ¥äº†æ¯”ä¸Šä¸€ç‰ˆæœ¬ stretch æ›´å¤šçš„è½¯ä»¶ï¼›buster åŒ…æ‹¬ 13370 ä¸ªæ–°è½¯ä»¶åŒ…ï¼Œè½¯ä»¶åŒ…çš„æ€»æ•°è¾¾åˆ°äº† 57703 ä¸ªã€‚

åœ¨ Debian 10 ä¸­ï¼Œå¤šæ•°è½¯ä»¶åŒ…ä¹Ÿå¾—åˆ°äº†æ›´æ–°ï¼Œå›¢é˜Ÿå®£ç§°æ›´æ–°äº† 35532 ä¸ªè½¯ä»¶åŒ…ï¼ˆå  stretch è½¯ä»¶åŒ…æ€»æ•°çš„ 62%ï¼‰ã€‚ä¸è¿‡ç”±äºå„ç§åŸå› ï¼Œæœ‰ç›¸å½“æ•°é‡çš„è½¯ä»¶åŒ…ï¼ˆ7278 ä¸ªï¼Œå  stretch è½¯ä»¶åŒ…æ€»æ•°çš„ 13%ï¼‰åœ¨è¿™æ¬¡æ›´æ–°ä¸­è¢«åˆ é™¤äº†ã€‚æˆ‘ä»¬å°†ä¸ä¼šçœ‹åˆ°è¿™äº›åŒ…æœ‰ä»»ä½•æ›´æ–°ï¼Œè€Œä¸”åœ¨åŒ…ç®¡ç†è½¯ä»¶ä¸­å®ƒä»¬ä¼šè¢«æ ‡è®°ä¸ºâ€œè¿‡æ—¶çš„â€ã€‚

Debian Live CD å¯ç›´æ¥ç”¨å…‰é©±è¿›å…¥ç³»ç»Ÿï¼Œè‡ªå¸¦æ¡Œé¢ï¼Œæœ‰ INSTALL åŠŸèƒ½ç›´æ¥å®‰è£…çš„ç³»ç»Ÿã€‚ç™»é™†ç”¨æˆ·:Debian Live user å¯†ç :liveã€‚


å›½å†…çš„ä¸‹è½½é•œåƒæºæœ‰ï¼š

å®˜æ–¹åˆ—è¡¨: https://www.debian.org/mirror/list
é˜¿é‡Œäº‘é•œåƒç«™ç‚¹: https://mirrors.aliyun.com/debian-cd/
ä¸­å›½ç§‘æŠ€å¤§å­¦: http://mirrors.ustc.edu.cn/debian-cd/
åä¸­ç§‘æŠ€å¤§å­¦: http://mirrors.hust.edu.cn/debian-cd/
æ¸…åå¤§å­¦: https://mirrors.tuna.tsinghua.edu.cn/debian-cd/
ç½‘æ˜“å¼€æºé•œåƒç«™: http://mirrors.163.com/debian-cd/
åä¸ºå¼€æºé•œåƒç«™: https://mirrors.huaweicloud.com/debian-cd/

ä¸‹è½½åŒ…ä¸­ mips è¡¨ç¤ºæ˜¯ big-endian çš„ mips æ¶æ„ï¼Œmipsel æ˜¯ little-endian çš„mipsæ¶æ„ã€‚ä»–ä»¬ä¹‹é—´çš„åŒºåˆ«å°±æ˜¯å†…å­˜ä¸­å­˜æ”¾çš„æ•°æ®çš„å­—èŠ‚é¡ºåºç›¸åï¼Œä¹Ÿå°±æ˜¯æŠŠä½ä½æ”¾åœ¨ä½åœ°å€è¿˜æ˜¯é«˜åœ°å€ã€‚

a) Little-Endianå°±æ˜¯ä½ä½å­—èŠ‚æ’æ”¾åœ¨å†…å­˜çš„ä½åœ°å€ç«¯ï¼Œé«˜ä½å­—èŠ‚æ’æ”¾åœ¨å†…å­˜çš„é«˜åœ°å€ç«¯ã€‚
b) Big-Endianå°±æ˜¯é«˜ä½å­—èŠ‚æ’æ”¾åœ¨å†…å­˜çš„ä½åœ°å€ç«¯ï¼Œä½ä½å­—èŠ‚æ’æ”¾åœ¨å†…å­˜çš„é«˜åœ°å€ç«¯ã€‚
c) ç½‘ç»œå­—èŠ‚åºï¼šTCP/IPå„å±‚åè®®å°†å­—èŠ‚åºå®šä¹‰ä¸ºBig-Endianï¼Œå› æ­¤TCP/IPåè®®ä¸­ä½¿ç”¨çš„å­—èŠ‚åºé€šå¸¸ç§°ä¹‹ä¸ºç½‘ç»œå­—èŠ‚åºã€‚

å‡è®¾ä»åœ°å€ 0x00000000 å¼€å§‹çš„ä¸€ä¸ªå­—ä¸­ä¿å­˜æ•°æ® 0x1234abcdï¼Œé‚£ä¹ˆ little endian åœ¨å†…å­˜ä¸­çš„å­˜æ”¾çš„ç¬¬ä¸€ä¸ªå­—èŠ‚å°±æ˜¯ 0x12ã€‚ 


# ğŸš© shell è„šæœ¬ç¼–ç¨‹
- [Bash Reference Manual](https://www.gnu.org/software/bash/manual/bash.html)
- [Shell Command Language](https://pubs.opengroup.org/onlinepubs/007908799/xcu/shellix.html)
- [GNU Bash Project](https://www.gnu.org/software/bash/)
- [GNU Bash manual - HTML](https://www.gnu.org/software/bash/manual/bash.html.gz)
- [GNU Bash manual - PDF](https://www.gnu.org/software/bash/manual/bash.pdf)
- [bash-5.2-beta.tar.gz](https://ftp.gnu.org/gnu/bash/bash-5.2-beta.tar.gz)
- [bash-doc-3.2.tar.gz](https://ftp.gnu.org/gnu/bash/bash-doc-3.2.tar.gz)
- [Vim ä¸­æ–‡æ‰‹å†Œ](https://github.com/yianwillis/vimcdoc)
- [/proc æ–‡ä»¶ç³»ç»Ÿ](https://www.kernel.org/doc/Documentation/filesystems/proc.txt)
- [Mapping](https://vimguide.readthedocs.io/en/latest/vim.html#mapping)
- [Vim Documentation](https://www.vim.org/docs.php)
- [Vim documentation](https://vimguide.readthedocs.io/en/latest/vim.html)
- [Vim: autocmd.txt](http://vimdoc.sourceforge.net/htmldoc/autocmd.html)
- Linux Command Line and Shell Scripting Bible 3td Edition

ç²¾ç¡®çš„è§£é‡Šå‚è§ bash æ‰‹å†Œï¼Œä¸€èˆ¬ shell ç¯å¢ƒç¼–ç¨‹é™¤äº†åŸºæœ¬è¯­æ³•å¤–ï¼Œç¦»ä¸å¼€åŸºæœ¬çš„å‘½ä»¤å·¥å…·é…åˆã€‚

Linux æœ‰å¾ˆå¤š shell å¯ä»¥ä½¿ç”¨ï¼Œé€šè¿‡ `chsh` å‘½ä»¤ï¼Œå¯ä»¥ä¸ºç”¨æˆ·æŒ‡å®šä¸€ä¸ªé»˜è®¤çš„ shell è§£é‡Šç¨‹åºï¼š

- Bourne Shellï¼ˆ/usr/bin/sh, /bin/shï¼‰
- Bourne Again Shellï¼ˆ/bin/bashï¼‰
- C Shellï¼ˆ/usr/bin/cshï¼‰
- K Shellï¼ˆ/usr/bin/kshï¼‰
- Shell for Rootï¼ˆ/sbin/shï¼‰

è¦ç¡®å®š Shell ç±»å‹ï¼Œæœ‰å¤šç§æ–¹æ³•ï¼š

- echo $SHELL è¿™ä¸ªå†…ç½®å˜é‡ä¿å­˜ç›¸å…³ä¿¡æ¯ï¼›
- echo $0 è¿™ä¹Ÿæ˜¯å†…ç½®å˜é‡ï¼Œä½†ä¸æ˜¯æ‰€æœ‰ Shell éƒ½æ”¯æŒï¼›
- ä½¿ç”¨ ps è¿›ç¨‹æŸ¥çœ‹å‘½ä»¤ï¼ŒæŸ¥çœ‹å½“å‰è¿è¡Œä»€ä¹ˆ Shellï¼›
- è¾“å…¥é”™è¯¯å‘½ä»¤ï¼Œæ£€æŸ¥é”™è¯¯ä¿¡æ¯çœ‹æœ‰æ²¡æœ‰ Shell ç±»å‹ä¿¡æ¯ï¼›
- æŸ¥çœ‹è´¦æˆ·ä¿¡æ¯æ–‡ä»¶ cat /etc/passwd é‡Œé¢ç™»è®°äº†ç”¨æˆ·ä½¿ç”¨ä»€ä¹ˆ Shellï¼›

Ken Thompson çš„ sh æ˜¯ç¬¬ä¸€ç§ Unix Shellï¼Œåœ¨ Ubuntu ç³»ç»Ÿä¸Šï¼Œé»˜è®¤ä¸º bash è§£é‡Šç¨‹åºï¼Œä¹Ÿå°±æ˜¯ Bourne Again Shellï¼Œç”±äºæ˜“ç”¨å’Œå…è´¹ï¼ŒBash åœ¨æ—¥å¸¸å·¥ä½œä¸­è¢«å¹¿æ³›ä½¿ç”¨ã€‚åœ¨ä¸€èˆ¬æƒ…å†µä¸‹ï¼ŒBourne Shell å’Œ Bourne Again Shell è„šæœ¬é€šç”¨ï¼Œæ‰€ä»¥ #!/bin/sh ä¹Ÿå¯ä»¥æ”¹ä¸º #!/bin/bashã€‚

Shell å¸¸ç”¨å‘½ä»¤å…³é”®å­—å¦‚ä¸‹ï¼š

1. echoï¼šæ‰“å°æ–‡å­—åˆ°å±å¹•
2. execï¼šæ‰§è¡Œå¦ä¸€ä¸ª Shell è„šæœ¬
3. readï¼šè¯»æ ‡å‡†è¾“å…¥
4. exprï¼šå¯¹æ•´æ•°å‹å˜é‡è¿›è¡Œç®—æœ¯è¿ç®—
5. testï¼šç”¨äºæµ‹è¯•å˜é‡æ˜¯å¦ç›¸ç­‰ã€ æ˜¯å¦ä¸ºç©ºã€æ–‡ä»¶ç±»å‹ç­‰
6. exitï¼šé€€å‡º

Linux ä½œä¸ºæ–‡å­—ä¸ºä¸»è¦äº¤äº’ç•Œé¢çš„ç³»ç»Ÿï¼ŒæŒæ¡ä¸€ä¸ªæ–‡å­—ç¼–ç¼–è¾‘å™¨å‘½ä»¤å·¥å…·çš„ä½¿ç”¨éå¸¸é‡è¦ï¼š

- *nano* - ç®€å•æ˜“ç”¨çš„ç¼–è¾‘å™¨ï¼Œæ¨¡ä»¿ UW Pico text editorã€‚
- *vi*   - VIsual editor æ˜¯ç»å…¸çš„ Linux/UNIX ç¼–è¾‘å™¨ï¼Œé€šè¿‡é”®ç›˜åœ¨ *Command* å’Œ *Text* ä¸¤ç§æ¨¡å¼ä¸‹å·¥ä½œã€‚
- *vim*  - VIM - Vi IMproved æ˜¯ vi çš„åŠ å¼ºç‰ˆæœ¬ï¼Œå­¦ä¹ æœ‰ä¸€å®šéš¾åº¦ï¼Œä½†æ›´å¼ºå¤§ã€‚
- Visual Studio Code å›¾å½¢åŒ–å¼€å‘å·¥å…·
- Sublime Text å›¾å½¢åŒ–å¼€å‘å·¥å…·

å¦å¤–ï¼Œè¿˜æœ‰èµ„æ·±ç”¨æˆ·ä¸“ç”¨å·¥å…· Atom å’Œ GNU Emacsï¼Œæ¯”è¾ƒå¤æ‚ï¼Œå› ä¸ºåŠŸèƒ½å¼ºå¤§ã€‚

*Atom* is a popular open-source code/text editor that works across several platforms such as Windows, Mac, or Linux. Atom is also considered to be one of the best Python code editors.

   Pros: Atom has color-coded syntax, a smart autocomplete feature, multiple panes, and a search-and-replace feature. It also has its own package manager for plugins, so you can easily expand its functionality. You can also customize the appearance manually by using themes. A new plugin â€“ called teletype â€“ allows you to share workspaces with other Atom users.

   Cons: Most users will have to tweak the default configuration. Low-spec computers will struggle to run Atom, especially if you load multiple projects.

*GNU Emacs* is a text/code editor for Linux professionals created by Richard Stallman, the founder of the GNU project. Emacs allows you to write code, display a manual, or draft an email from the same interface.

   Pros: It has content-aware editing modes, extensive documentation and a tutorial, incredible language support, and a package manager for extensions. It also offers cross-compatibility with other GNU apps, including an organizer, mail app, calendar, and debugger.

   Cons: Itâ€™s not for everyone. You might choose Emacs if you have multiple different tasks and want a standard interface. Itâ€™s designed for the Linux power user, so if thatâ€™s you, itâ€™s worth a try.

Linux å­—ç¬¦äº¤äº’ç•Œé¢çš„å¤šä»»åŠ¡åŸºæœ¬æ“ä½œï¼Œå‚è€ƒæ‰‹å†Œ 7.1 Job Control Basicsï¼š

- ä½¿ç”¨ Ctrl-Z å°†å½“å‰ä»»åŠ¡åˆ‡æ¢åˆ°åå°ï¼›
- ä½¿ç”¨ *jobs* å‘½ä»¤æŸ¥è¯¢ç°æœ‰æ‰‹å°ä»»åŠ¡ï¼›
- ä½¿ç”¨ *fg* Foreground å‘½ä»¤å°†åå°ä»»åŠ¡è°ƒåˆ°å‰å°ï¼Œå¯ä»¥æŒ‡å®š jobs åºå·ï¼›


ä½œä¸ºè„šæœ¬å¼€å‘ï¼Œä½¿ç”¨ Vim æ˜¯éå¸¸æ–¹ä¾¿ï¼Œå…ˆæŒæ¡æœ€åŸºæœ¬çš„æ¦‚å¿µä¸ä½¿ç”¨ï¼š

- VIM æœ‰å¤šç§ä¸åŒçš„å·¥ä½œæ¨¡å¼ï¼Œå…¶ä¸­ 7 ç§åŸºæœ¬æ¨¡å¼ï¼Œä½†å…¥é—¨åªéœ€è¦å­¦ä¹ ä¸‰ç§å¿…è¦æ¨¡å¼ï¼š
    - *Normal mode*: When typing commands.
    - *Insert mode*:  These are also used in Replace mode.
    - *Command-line mode*: When entering a ":" or "/" command.
- æŒ‰ Esc é”®è¿›å…¥ Normal modeï¼Œè¿™ç§æ¨¡å¼ä¸‹å¯ä»¥æ¥æ”¶å‘½ä»¤ï¼Œæ‰“å¼€ vim æ—¶å°±å¤„äºè¿™ç§æ¨¡å¼ï¼›
    - ä¾‹å¦‚ï¼ŒæŒ‰ä¸‹ 5gg<Enter> è¡¨ç¤ºè·³è½¬åˆ°ç¬¬ 5 è¡Œï¼Œgg è¡¨ç¤ºè·³è½¬å‘½ä»¤ï¼Œè¡Œå·æå‰æŒ‡å®šï¼Œç›¸å½“äºè°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼›
    - *hjkl* å››ä¸ªæŒ‰é”®æ§åˆ¶å…‰æ ‡ç§»åŠ¨ä½ç½®ï¼Œå¯¹åº” Leftã€Downã€Upã€Right å››ä¸ªæ–¹å‘ï¼›
    - *dd* å‰ªåˆ‡å½“å‰è¡Œ
    - *y* å¤åˆ¶å½“å‰è¡Œ
    - *p* ç²˜è´´å†…å®¹
- æŒ‰ i é”®è¿›å…¥ Insert modeï¼Œè¿™ç§æ¨¡å¼ä¸‹å¯ä»¥å¾€æ–‡ä»¶ä¸­è¾“å…¥å­—ç¬¦ä¸²ï¼›
- æŒ‰ : æˆ– / è¿›å…¥å‘½ä»¤è¡Œæ¨¡å¼ï¼Œå¯ä»¥è¾“å…¥å„ç§å‘½ä»¤ï¼š
    - `:q` è¡¨ç¤º quit å‘½ä»¤ï¼ŒæŒ‰å›è½¦æ‰§è¡Œä»¥é€€å‡º vim ç¨‹åºï¼›
    - æ‰€æœ‰å‘½ä»¤åŠ  ! åç¼€è¡¨ç¤ºå¼ºåˆ¶æ‰§è¡Œï¼Œä¾‹å¦‚ `:q!` ä¸ä¿å­˜æ–‡ä»¶ç›´æ¥é€€å‡ºï¼›
    - `:w` ä¿å­˜æ–‡ä»¶ï¼Œå†™å…¥æ•°æ®åˆ°ç£ç›˜ï¼›
    - æŒ‰ä¸‹ / è¿›å…¥æœç´¢å‘½ä»¤ï¼Œæƒ³è¦å®šä½åˆ°ä»€ä¹ˆä½ç½®ï¼Œå°±è¾“å…¥å¯¹åº”ä½ç½®çš„å†…å®¹ï¼›

ä½¿ç”¨ Tab æ ‡ç­¾æ–¹å¼æ‰“å¼€å¤šä¸ªæ–‡ä»¶ï¼š

    vim -p some.sh more.sh

è®¾ç½®å¿«æ·é”®æå‡å‘½ä»¤æ‰§è¡Œæ•ˆç‡ï¼Œä¿®æ”¹é…ç½®æ–‡ä»¶ `vim ~/.vimrc` å¢åŠ ç›¸åº”çš„æ˜ å°„é…ç½®é¡¹ç›®ã€‚ä¾‹å¦‚ï¼ŒTab åˆ‡æ¢å¿«æ·é”® Ctrl+L Ctrl+H è¿™æ ·è®¾ç½®ï¼Œ<Esc> <CR> åˆ†åˆ«è¡¨ç¤ºæŒ‰ä¸‹ Esc å’Œå›è½¦é”®ï¼Œå®ƒä»¬ä¹‹é—´å°±æ˜¯è¦æ‰§è¡Œçš„å‘½ä»¤:

    noremap <Tab> :tabnext<CR>
    noremap <C-L> <Esc>:tabnext<CR>
    noremap <C-H> <Esc>:tabprevious<CR>

è®¾ç½®æ ¹æ®æ–‡ä»¶ç±»å‹æ‰§è¡Œçš„å‘½ä»¤ï¼Œæ¯”å¦‚æ­£å¸¸æ¨¡å¼ä¸‹ Python ä»£ç æ‰§è¡Œæˆ– C++ ä»£ç ç¼–è¯‘ï¼Œä½¿ç”¨ % å¼•ç”¨å½“å‰æ–‡ä»¶ã€‚è¦åœ¨ç¼–è¾‘æ¨¡å¼ä¸‹ä½¿ç”¨å¿«æ·é”®ï¼Œå¯ä»¥ä½¿ç”¨ :imap æˆ– :lmap æ›¿ä»£ :nmap ã€‚

ä»¥ä¸‹è®¾ç½®ï¼Œå¦‚æœå½“å‰æ–‡ä»¶æ˜¯ sh è„šæœ¬ï¼Œåœ¨ Normal mode æŒ‰ä¸‹ F9 å°†è§¦å‘ä»¥ä¸‹è¡Œä¸ºï¼š

- :w <CR>  æ‰§è¡Œæ–‡ä»¶ä¿å­˜å‘½ä»¤ï¼›
- :! clear <CR> æ‰§è¡Œæ§åˆ¶å°æ¸…å±å‘½ä»¤ï¼›
- :! echo Execute bash: %; bash % <Enter> æ‰§è¡Œæ§åˆ¶å° echo å‘½ä»¤è¾“å‡ºä¿¡æ¯ï¼Œå¹¶å†æ‰§è¡Œ bash è°ƒç”¨è„šæœ¬ï¼›

```sh
" Bash script
"  Execute : F9 (Below code is used in .vimrc file)
:autocmd FileType sh :nmap <F9> :w <CR> :! clear <CR> :! echo Execute bash: %; bash % <Enter>

" python commands
"  Execute : F9 (Below code is used in .vimrc file)
:autocmd FileType python :nmap <F9> :! clear <CR> :! python % <Enter>

" C/C++ commands
" Compile : F9 (Below code is used in .vimrc file)
:autocmd FileType c,cpp :nmap <F9> :! rm -r out <CR> :! clear <CR> :! g++ % -o out <Enter>
" Run : Ctrl+F9 (Below code is used in .vimrc file)
:autocmd FileType c,cpp :nmap <C-F9> :! clear <CR> :! ./out <CR>
```

Bash åŸºæœ¬èƒ½åŠ›å±•ç¤ºï¼š

```sh
# A variable may be assigned to by a statement of the form
name=[value]

# 3.5.3 Shell Parameter Expansion
echo Variable with default value: ${var:-80}

# Shell Expansions - brace expansion
# output: ade ace abe
echo a{d,c,b}e

## 3.5.7 Word Splitting
strings="what is bad apple"
printf "%s\n" "$strings"
# what is bad apple
printf "%s\n" $strings
# what
# is
# bad
# apple

## 6.5 Shell Arithmetic
let no++
echo $((no++)) && echo No. is $no
echo $((no++)) > /dev/null

# Variables and Variable Expansion
# Math expression
$ a=2; b=3; echo $((a + b));
$ a=2; b=3; echo $(a + b);
5
# Tilde Expansion
# echo home path
echo ~

# for loop - Single line
for (( i=0 ; i<10 ; i++ )) ; do echo $i ; done

# for loop - Multi lines
for (( i=0 ; i<10 ; i++ ))
do 
    echo $i
done

# if-then-fi
if x=$(ls *.sh); then echo $x; fi

# Funtion definition
hello() { echo hello 1; echo hello 2; }
hello
# hello 1
# hello 2

# Coprocesses
# A coprocess is a shell command preceded by the coproc reserved word. 
# A coprocess is executed asynchronously in a subshell, as if the command had 
# been terminated with the â€˜&â€™ control operator, with a two-way pipe established 
# between the executing shell and the coprocess.
coproc [NAME] command [redirections]

# GNU Parallel
# There are ways to run commands in parallel that are not built into Bash.
# GNU Parallel is a tool to do just that.
# 
# For example, it is easy to replace xargs to gzip all html files in the 
# current directory and its subdirectories:
find . -type f -name '*.html' -print | parallel gzip
```

Bourne shell è™½ç„¶å¯ä»¥å¤„ç†æ•°å­¦è¡¨è¾¾å¼ï¼Œexpr å‘½ä»¤ï¼Œä½†æ˜¯ç‰¹åˆ«ç¬¨æ‹™ï¼Œæ¯”å¦‚ä¹˜æ³•ï¼Œæ˜Ÿå·å¯èƒ½è¢«è§£é‡Šæˆé€šé…ç¬¦å·ï¼Œéœ€è¦è½¬ä¹‰ï¼Œè¿˜æœ‰å°æ•°è¿ç®—éœ€è¦å€ŸåŠ© bc è¿™æ ·çš„å·¥å…·ï¼š

    expr 1 \* 5

    echo "0.3 * 0.6"|bc


ä»¥ä¸‹è„šæœ¬å±•ç¤ºäº†å˜é‡èµ‹å€¼å¦‚ä½•ä¸å‘½ä»¤å½“å‰è¿è¡Œç¯å¢ƒå…³è”ï¼š

- å˜é‡å‘½åä¸èƒ½ä½¿ç”¨ $ï¼Œèµ‹å€¼ä½¿ç”¨ç­‰å·ï¼Œå¹¶ä¸”ä¸èƒ½æœ‰ç©ºæ ¼ï¼›
- å¼•ç”¨å˜é‡ä½¿ç”¨ $ å‰ç¼€åœ¨å˜é‡åä¹‹å‰ï¼›
- å•å¼•å·å­—ç¬¦ä¸²å†…çš„å˜é‡ä¸ä¼šåœ¨å½“å‰è¿è¡Œç¯å¢ƒä¸­æ’å€¼ï¼›
- å˜é‡èµ‹å€¼ä¸å‘½ä»¤åŒè¡Œï¼Œä¸ä¼šä¿®æ”¹å½“å‰è¿è¡Œç¯å¢ƒï¼Œåªä¿®æ”¹ç›¸å…³å‘½ä»¤çš„ current execution environment

```sh
x=red
echo $x

export x
sh -c 'echo $x'

x=blue sh -c "echo red $x"
x=blue sh -c 'echo blue $x'

echo $x
```

ç¼–å†™è„šæœ¬æ–‡ä»¶ï¼Œä»¥ä¸‹è„šæœ¬æ–‡ä»¶æ¼”ç¤ºäº†ï¼š

- åç¨‹çš„ä½¿ç”¨ï¼Œå¼‚æ­¥å¤šä»»åŠ¡ä½¿ç”¨ & åç¼€åœ¨å‘½ä»¤ã€å‘½ä»¤ç»„åï¼›
- ä½¿ç”¨ wait ç­‰å¾…ä»»åŠ¡å®Œæˆï¼›
- å‚… RANDOM éšæœºå˜é‡ï¼Œå®ƒçš„å€¼ä¸º [0, 32767]ï¼›
- ä½¿ç”¨ Command Substitution ä¸ºå…¶å®ƒå‘½ä»¤æä¾›å‚æ•°ï¼Œå¹¶å†™åœ¨å…¶å‚æ•°å‡ºç°çš„ä½ç½®ä¸­ï¼š

```sh
#!/bin/bash

echo Start `date +%X`

for((i=0; i<5; i++));
do
  {
    sleep `expr $RANDOM / 8192`
    echo "Step $i"
  }& # corproces
done
wait # wait until corproces done

echo "Done (bell\a) `date +%X`"
```

å‘½ä»¤æ›¿æ¢æœ‰ä¸¤ç§å½¢å¼ï¼ŒCommand substitutionï¼š

    $(command)

    or

    `command`

ç±»ä¼¼çš„è¿˜æœ‰è¿›è¡Œæ•´æ•°è¿ç®—çš„ Arithmetic Expansion

    $(( expression ))

```sh
# You can use od to get numbers out of /dev/random and /dev/urandom.
tr -cs '[:digit:]' '[\n*]' </dev/urandom
# 2 byte unsigned decimal integers,
$ od -vAn -N2 -tu2 < /dev/urandom
24352
# 1 byte signed decimal integer,
$ od -vAn -N1 -td1 < /dev/urandom
-78
# 4 byte unsigned decimal integers,
$ od -vAn -N4 -tu4 < /dev/urandom
3394619386
# man od for more information on od.

dd if=/dev/urandom of=~/urandom_test count=4 bs=1024
# Creates a file containing 4K of random bytes.

head -30 /dev/urandom > ~/urandom_test3
# Will write 30 lines of random bytes

head -c 30 /dev/urandom > random.bin
# to read 30 random bytes into a file random.bin
```

åœ¨è„šæœ¬ä¸­åµŒå…¥äºŒè¿›åˆ¶æ•°æ®ï¼Œå‚è€ƒ Clojue-lsp çš„æ“ä½œï¼š

```sh
#!/usr/bin/env bash
# https://github.com/clojure-lsp/clojure-lsp/releases/#clojure-lsp.bat
exec java -Xmx2g -server -jar $0 "$@"
@echo off
java -Xmx2g -server -jar "%~f0" %*
goto :eof
PK^C^D^T^@^H^H^H^@^Fk<B7>T ...
```

äºŒè¿›åˆ¶æ•°æ®è½¬æ¢ï¼Œä½¿ç”¨ xxdã€awk å’Œ bc ç­‰ç­‰å·¥å…·ï¼š

```sh
# https://www.linux-magazine.com/Online/Features/Binary-Data-in-Bash
echo -n "hello" | xxd -p
68656c6c6f0d0a
echo -n "6162" | xxd -p -r
ab

pack() {
  echo -n "$1" | xxd -p -r
}
unpack() {
  echo -n "$1" | xxd -p
}

tobin() {
  echo -n "$1" | xxd -b -g0 | awk '{ printf("%s",$2) }'
}

hexadd() {
  echo "obase=16;ibase=A;$((16#$1))+$2" | bc
}
```


## ==âš¡ bash & Yacc grammar
- [parse.y - Yacc grammar for bash](bash-5.1\parse.y)
- [Shell Command Language](https://pubs.opengroup.org/onlinepubs/007908799/xcu/chap2.html)

è¿™éƒ¨åˆ†å†…å®¹éœ€è¦ç¼–è¯‘åŸç†åŸºç¡€ï¼Œä½†æŒæ¡ bash çš„è¯­æ³•å®šä¹‰ä¸è§£æå™¨çš„å®ç°ï¼Œè¿™ä¼šè®©äººæœ‰ä¸€ç§åº–ä¸è§£ç‰›çš„å¿«æ„ã€‚

ä½œä¸ºè„šæœ¬ç¼–ç¨‹å·¥å…·ï¼Œbash ä¹Ÿéœ€è¦å®ç°è§£å™¨å™¨ï¼Œåœ¨å®ç°ä¸Šä½¿ç”¨äº† Lex/Yacc è¯­æ³•è§£å™¨ç”Ÿæˆå·¥å…·ï¼Œè¯­æ³•å®šä¹‰æ–‡ä»¶åœ¨äº *parse.y*ã€‚

Bash æ–‡æ¡£æœ¬èº«ä¸ä¼šè®²è§£è¿™éƒ¨åˆ†å†…å®¹ï¼Œä½†æä¾›çš„æºä»£ç å¯ä»¥è§£æä¸€åˆ‡ï¼ŒTalk is cheep, show the code!

åœ¨å‘½ä»¤è¡Œè¾“å…¥çš„å†…å®¹æ—¶ï¼Œbash ä¼šè¿›è¡Œè§£é‡Šï¼Œé¦–å…ˆæ˜¯å¯¹è¾“å…¥å­—ç¬¦ä¸²è¿›è¡Œåˆ†è¯ï¼ŒTokenizingï¼Œæ¯”å¦‚è¾“å…¥çš„æ˜¯ä¸€ä¸ª *for*ï¼Œè§£æåå°±çŸ¥é“è¿™æ˜¯è¦è¿›è¡Œå¾ªç¯æ“ä½œï¼Œè¿™ä¸ªè¿‡ç¨‹å«åš Token Recognitionã€‚

åƒ *for* è¿™æ ·çš„ä¿ç•™å…³é”®å­—è¿˜æœ‰ä»¥ä¸‹è¿™äº› Reserved Wordsï¼š

    if      then    elif    else    fi      time
    for     in      until   while   do      done
    case    esac    coproc  select  function
    {       }       [[      ]]      !

ä¸€ä¸ª bash å‘½ä»¤å¯ä»¥æ˜¯ä»¥ä¸‹å†…å®¹ä¹‹ä¸€ï¼š

   â€¢ Simple Commands       The most common type of command.
   â€¢ Pipelines             Connecting the input and output of several commands.
   â€¢ Lists                 How to execute commands sequentially.
   â€¢ Compound Commands     Shell commands for control flow.
     - Looping Constructs       Shell commands for iterative action.
     - Conditional Constructs   Shell commands for conditional execution.
     - Command Grouping         Ways to group commands.


```sh
# Simple Commands
[time [-p]] [!] command1 [ | or |& command2 ] â€¦

# Lists of Commands
# operators â€˜;â€™, â€˜&â€™, â€˜&&â€™, or â€˜||â€™, and optionally terminated by one of â€˜;â€™, â€˜&â€™, or a newline.
command1 && command2

# Grouping Commands
( list )
{ list; }
```

Shell Expansions å¯ä»¥å¯¹è„šæœ¬è¡¨è¾¾å¼è¿›è¡Œæ‰©å±•å¤„ç†ï¼Œè¿™é‡Œå‘½ä»¤è¡Œç»è¿‡è§£æå™¨å¤„ç†å¾—åˆ° Tokens åè¿›è¡Œçš„å¤„ç†ï¼š

   â€¢ Brace Expansion       Expansion of expressions within braces.
   â€¢ Tilde Expansion       Expansion of the ~ character.
   â€¢ Shell Parameter Expansion     How Bash expands variables to their values.
   â€¢ Command Substitution      Using the output of a command as an argument.
   â€¢ Arithmetic Expansion      How to use arithmetic in shell expansions.
   â€¢ Process Substitution      A way to write and read to and from a command.
   â€¢ Word Splitting        How the results of expansion are split into separate arguments.
   â€¢ Filename Expansion        A shorthand for specifying filenames matching patterns.
   â€¢ Quote Removal     How and when quote characters are removed from words.


ğŸ¥  Lists of Commands

Of these list operators, `&&` and `||` have equal precedence, followed by  `;` an`&`, which have equal precedence.

A sequence of one or more newlines may appear in a list to delimit commands, equivalent to a semicolon.

If a command is terminated by the control operator `&`, the shell executes the command asynchronously in a subshell. This is known as executing the command in the background, and these are referred to as asynchronous commands. The shell does not wait for the command to finish, and the return status is 0 (true). When job control is not active (see Job Control), the standard input for asynchronous commands, in the absence of any explicit redirections, is redirected from /dev/null.

Commands separated by a â€˜;â€™ are executed sequentially; the shell waits for each command to terminate in turn. The return status is the exit status of the last command executed.

AND and OR lists are sequences of one or more pipelines separated by the control operators `&&` and `||`, respectively. AND and OR lists are executed with left associativity.

An AND list has the form

    command1 && command2

*command2* is executed if, and only if, *command1* returns an exit status of zero (success).

An OR list has the form

    command1 || command2

*command2* is executed if, and only if, *command1* returns a non-zero exit status.

The return status of AND and OR lists is the exit status of the last command executed in the list.

ğŸ¥  Grouping Commands

Bash provides two ways to group a list of commands to be executed as a unit. When commands are grouped, redirections may be applied to the entire command list.

For example, the output of all the commands in the list may be redirected to a single stream.

    ( list )

Placing a list of commands between parentheses causes a subshell environment to be created (see Command Execution Environment), and each of the commands in list to be executed in that subshell. Since the list is executed in a subshell, variable assignments do not remain in effect after the subshell completes.

    { list; }

Placing a list of commands between curly braces causes the list to be executed in the current shell context. No subshell is created. The semicolon (or newline) following list is required.

In addition to the creation of a subshell, there is a subtle difference between these two constructs due to historical reasons. The braces are reserved words, so they must be separated from the list by blanks or other shell metacharacters. The parentheses are operators, and are recognized as separate tokens by the shell even if they are not separated from the list by whitespace.

The exit status of both of these constructs is the exit status of list.


ä»¥ä¸‹æ˜¯æ‘˜è‡ª Shell Command Language - Shell Grammar éƒ¨åˆ†çš„å†…å®¹ï¼Œæ˜¯ç»è¿‡å¤„ç†åçš„ bash è¯­æ³•å®šä¹‰ã€‚

```sh
/* -------------------------------------------------------
   The grammar symbols
   ------------------------------------------------------- */

%token  WORD
%token  ASSIGNMENT_WORD
%token  NAME
%token  NEWLINE
%token  IO_NUMBER

/* The following are the operators mentioned above. */

%token  AND_IF    OR_IF    DSEMI
/*      '&&'      '||'     ';;'    */

%token  DLESS  DGREAT  LESSAND  GREATAND  LESSGREAT  DLESSDASH
/*      '<<'   '>>'    '<&'     '>&'      '<>'       '<<-'   */

%token  CLOBBER
/*      '>|'   */

/* The following are the reserved words. */

%token  If    Then    Else    Elif    Fi    Do    Done
/*      'if'  'then'  'else'  'elif'  'fi'  'do'  'done'   */

%token  Case    Esac    While    Until    For
/*      'case'  'esac'  'while'  'until'  'for'   */

/* These are reserved words, not operator tokens, and are
   recognised when reserved words are recognised. */

%token  Lbrace    Rbrace    Bang
/*      '{'       '}'       '!'   */

%token  In
/*      'in'   */

/* -------------------------------------------------------
   The Grammar
   ------------------------------------------------------- */

%start  complete_command
%%
complete_command : list separator
                 | list
                 ;
list             : list separator_op and_or
                 |                   and_or
                 ;
and_or           :                         pipeline
                 | and_or AND_IF linebreak pipeline
                 | and_or OR_IF  linebreak pipeline
                 ;
pipeline         :      pipe_sequence
                 | Bang pipe_sequence
                 ;
pipe_sequence    :                             command
                 | pipe_sequence '|' linebreak command
                 ;
command          : simple_command
                 | compound_command
                 | compound_command redirect_list
                 | function_definition
                 ;
compound_command : brace_group
                 | subshell
                 | for_clause
                 | case_clause
                 | if_clause
                 | while_clause
                 | until_clause
                 ;
subshell         : '(' compound_list ')'
                 ;
compound_list    :              term
                 | newline_list term
                 |              term separator
                 | newline_list term separator
                 ;
term             : term separator and_or
                 |                and_or
                 ;
for_clause       : For name linebreak                            do_group
                 | For name linebreak in wordlist sequential_sep do_group
                 ;
name             : NAME                     /* Apply rule 5 */
                 ;
in               : In                       /* Apply rule 6 */
                 ;
wordlist         : wordlist WORD
                 |          WORD
                 ;
case_clause      : Case WORD linebreak in linebreak case_list Esac
                 | Case WORD linebreak in linebreak           Esac
                 ;
case_list        : case_list case_item
                 |              case_item
                 ;
case_item        :     pattern ')' linebreak     DSEMI linebreak
                 |     pattern ')' compound_list DSEMI linebreak
                 | '(' pattern ')' linebreak     DSEMI linebreak
                 | '(' pattern ')' compound_list DSEMI linebreak
                 ;
pattern          :             WORD         /* Apply rule 4 */
                 | pattern '|' WORD     /* Do not apply rule (4) */
                 ;
if_clause        : If compound_list Then compound_list else_part Fi
                 | If compound_list Then compound_list           Fi
                 ;
else_part        : Elif compound_list Then else_part
                 | Else compound_list
                 ;
while_clause     : While compound_list do_group
                 ;
until_clause     : Until compound_list do_group
                 ;
function_definition : fname '(' ')' linebreak function_body
                 ;
function_body    : compound_command                /* Apply rule 9 */
                 | compound_command redirect_list  /* Apply rule 9 */
                 ;
fname            : NAME                            /* Apply rule 8 */
                 ;
brace_group      : Lbrace compound_list Rbrace
                 ;
do_group         : Do compound_list Done
                 ;
simple_command   : cmd_prefix cmd_word cmd_suffix
                 | cmd_prefix cmd_word
                 | cmd_prefix
                 | cmd_name cmd_suffix
                 | cmd_name
                 ;
cmd_name         : WORD                   /* Apply rule 7a */
                 ;
cmd_word         : WORD                   /* Apply rule 7b */
                 ;
cmd_prefix       :            io_redirect
                 | cmd_prefix io_redirect
                 |            ASSIGNMENT_WORD
                 | cmd_prefix ASSIGNMENT_WORD
                 ;
cmd_suffix       :            io_redirect
                 | cmd_suffix io_redirect
                 |            WORD
                 | cmd_suffix WORD
                 ;
redirect_list    :               io_redirect
                 | redirect_list io_redirect
                 ;
io_redirect      :           io_file
                 | IO_NUMBER io_file
                 |           io_here
                 | IO_NUMBER io_here
                 ;
io_file          : '<'       filename
                 | LESSAND   filename
                 | '>'       filename
                 | GREATAND  filename
                 | DGREAT    filename
                 | LESSGREAT filename
                 | CLOBBER   filename
                 ;
filename         : WORD                      /* Apply rule 2 */
                 ;
io_here          :    DLESS     here_end
                 |    DLESSDASH here_end
                 ;
here_end         : WORD                      /* Apply rule 3 */
                 ;
newline_list     :              NEWLINE
                 | newline_list NEWLINE
                 ;
linebreak        : newline_list
                 | /* empty */
                 ;
separator_op     : '&'
                 | ';'
                 ;
separator        : separator_op linebreak
                 | newline_list
                 ;
sequential_sep   : ';' linebreak
                 | newline_list
```


## ==âš¡ Folders Structures
- Linux Command Line and Shell Scripting Bible - ch3 Basic bash Shell Commands

Table 3.3 Common Linux Directory Names

| Directory |  Usage
| --------- | ---------------------------------------------------------------
| /     |  root of the virtual directory, where normally, no files are placed
| /bin  |  binary directory, where many GNU user-level utilities are stored
| /boot |  boot directory, where boot files are stored
| /dev  |  device directory, where Linux creates device nodes
| /etc  |  system configuration files directory
| /home |  home directory, where Linux creates user directories
| /lib  |  library directory, where system and application library files are stored
| /media|  media directory, a common place for mount points used for removable media
| /mnt  |  mount directory, another common place for mount points used for removable media
| /opt  |  optional directory, often used to store third-party software packages and data files
| /proc |  process directory, where current hardware and process information is stored
| /root |  root home directory
| /sbin |  system binary directory, where many GNU admin-level utilities are stored
| /run  |  run directory, where runtime data is held during system operation
| /srv  |  service directory, where local services store their files
| /sys  |  system directory, where system hardware information files are stored
| /tmp  |  temporary directory, where temporary work files can be created and destroyed
| /usr  |  user binary directory, where the bulk of GNU user-level utilities and data files are stored
| /var  |  variable directory, for files that change frequently, such as log files

The common Linux directory names are based upon the Filesystem Hierarchy Standard
(FHS). Many Linux distributions maintain compliance with FHS. Therefore, you should
be able to easily find files on any FHS-compliant Linux systems.


## ==âš¡ Basic commands

ç›®å½•åˆ—è¡¨ list å‘½ä»¤ lsï¼Œå‚æ•° -l è¡¨ç¤ºå•è¡Œæ˜¾å¼ä¸€æ¡è®°å½•ï¼Œ-R è¡¨ç¤ºé€’å½’å­ç›®å½•ï¼š

    ls -lR
    .:
    total 44
    -rw-r--r-- 1 root   root   1763 Oct 18 08:00 demo.go
    drwxr-xr-x 2 jeango jeango 4096 Oct 11 14:50 Desktop
    drwxr-xr-x 2 jeango jeango 4096 Oct 11 14:50 Documents
    drwxr-xr-x 2 jeango jeango 4096 Oct 11 14:50 Downloads
    drwxr-xr-x 4 jeango jeango 4096 Oct 18 08:13 go

åˆå¦‚æŸ¥æ‰¾å‘½ä»¤ find å®ƒä¼šå°†ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶åˆ—è¡¨ï¼Œé€šè¿‡ç®¡é“ `|` å°†åˆ—è¡¨ä¼ å…¥ grep è¿›è¡Œè¿‡æ»¤ï¼Œå’Œæ­£åˆ™è§„åˆ™ `demo.go$` é…åˆ°çš„å°±è¾“å‡ºï¼š

    find /home/jeango | grep demo.go$
    /home/jeango/demo.go

å‘½ä»¤ç”¨æ³•å¸®åŠ©ä¿¡æ¯ï¼Œä¸€èˆ¬é€šè¿‡ä¼ å…¥ --help æˆ– -h å‚æ•°æ¥è·å–ã€‚


å¸¸ç”¨å‘½ä»¤å‚è€ƒ

    pwd                   æ˜¾ç¤ºå½“å‰/å·¥ä½œç›®å½•çš„åç§°
    whoami                æ˜¾ç¤ºå½“å‰çš„ç”¨æˆ·å
    id                    æ˜¾ç¤ºå½“å‰ç”¨æˆ·çš„èº«ä»½ï¼ˆåç§°ã€uidã€gid å’Œç›¸å…³ç»„ï¼‰
    file <foo>            æ˜¾ç¤º <foo> æ–‡ä»¶çš„æ–‡ä»¶ç±»å‹
    type -p <commandname> æ˜¾ç¤º <commandname> å‘½ä»¤çš„æ–‡ä»¶æ‰€å¤„ä½ç½®
    which <commandname>   åŒä¸Š
    type <commandname>    æ˜¾ç¤º <commandname> å‘½ä»¤çš„ç›¸å…³ä¿¡æ¯
    apropos <key-word>    æŸ¥æ‰¾ä¸ <key-word> æœ‰å…³çš„å‘½ä»¤
    man -k <key-word>     åŒä¸Š
    whatis <commandname>  ç”¨ä¸€è¡Œè§£é‡Š <commandname> å‘½ä»¤
    man -a <commandname>  æ˜¾ç¤º <commandname> å‘½ä»¤çš„è§£é‡Šï¼ˆUnix é£æ ¼ï¼‰
    info <commandname>    æ˜¾ç¤º <commandname> å‘½ä»¤ç›¸å½“é•¿çš„è§£é‡Šï¼ˆGNU é£æ ¼ï¼‰
    ls                    æ˜¾ç¤ºç›®å½•å†…å®¹ï¼ˆä¸åŒ…å«ä»¥. ç‚¹å·å¼€å¤´çš„æ–‡ä»¶å’Œç›®å½•ï¼‰
    ls -a                 æ˜¾ç¤ºç›®å½•å†…å®¹ï¼ˆåŒ…å«æ‰€æœ‰æ–‡ä»¶å’Œç›®å½•ï¼‰
    ls -A                 æ˜¾ç¤ºç›®å½•å†…å®¹ï¼ˆåŒ…å«å‡ ä¹æ‰€æœ‰æ–‡ä»¶å’Œç›®å½•ï¼Œé™¤äº† .. å’Œ . ï¼‰
    ls -la                æ˜¾ç¤ºæ‰€æœ‰çš„ç›®å½•å†…å®¹ï¼Œå¹¶åŒ…å«è¯¦ç»†çš„ä¿¡æ¯
    ls -lai               æ˜¾ç¤ºæ‰€æœ‰çš„ç›®å½•å†…å®¹ï¼Œå¹¶åŒ…å« inode å’Œè¯¦ç»†çš„ä¿¡æ¯
    ls -d                 æ˜¾ç¤ºå½“å‰ç›®å½•ä¸‹çš„æ‰€æœ‰ç›®å½•
    tree                  ä½¿ç”¨æ ‘çŠ¶å›¾æ˜¾ç¤ºç›®å½•å†…å®¹
    lsof <foo>            åˆ—å‡ºå¤„äºæ‰“å¼€çŠ¶æ€çš„æ–‡ä»¶ <foo> 
    lsof -p <pid>         åˆ—å‡ºè¢«æŸè¿›ç¨‹æ‰“å¼€çš„æ–‡ä»¶:  <pid> 
    mkdir <foo>           åœ¨å½“å‰ç›®å½•ä¸­å»ºç«‹æ–°ç›®å½• <foo> 
    rmdir <foo>           åˆ é™¤å½“å‰ç›®å½•ä¸­çš„ <foo> ç›®å½•
    cd <foo>              åˆ‡æ¢åˆ°å½“å‰ç›®å½•ä¸‹æˆ–å˜é‡ $CDPATH ä¸­çš„ <foo> ç›®å½•
    cd /                  åˆ‡æ¢åˆ°æ ¹ç›®å½•
    cd                    åˆ‡æ¢åˆ°å½“å‰ç”¨æˆ·çš„å®¶ç›®å½•
    cd /<foo>             åˆ‡æ¢åˆ°ç»å¯¹è·¯å¾„ä¸º /<foo> çš„ç›®å½•
    cd ..                 åˆ‡æ¢åˆ°ä¸Šä¸€çº§ç›®å½•
    cd ~<foo>             åˆ‡æ¢åˆ°ç”¨æˆ· <foo> çš„å®¶ç›®å½•
    cd -                  åˆ‡æ¢åˆ°ä¹‹å‰çš„ç›®å½•
    </etc/motd pager      å³ç®­å¤´è¡¨ç¤ºè¯»å…¥ï¼Œä½¿ç”¨é»˜è®¤çš„åˆ†é¡µç¨‹åºæ¥æ˜¾ç¤º /etc/motd çš„å†…å®¹
    </etc/motd grep GO    åœ¨æ–‡ä»¶ä¸­æŸ¥æ‰¾åŒ…å« GO çš„è¡Œ
    touch <junkfile>      å»ºç«‹ä¸€ä¸ªç©ºæ–‡ä»¶ <junkfile> 
    cp <foo> <bar>        å°†ä¸€ä¸ªç°æœ‰æ–‡ä»¶ <foo> å¤åˆ¶åˆ°ä¸€ä¸ªæ–°æ–‡ä»¶ <bar> 
    rm <junkfile>         åˆ é™¤æ–‡ä»¶ <junkfile> 
    mv <foo> <bar>        å°†ä¸€ä¸ªç°æœ‰æ–‡ä»¶ <foo> é‡å‘½åæˆ <bar>
    mv <foo> <bar>        å°†ä¸€ä¸ªç°æœ‰æ–‡ä»¶ <foo> ç§»åŠ¨åˆ°æ–°çš„ä½ç½® <bar>/<foo>
    mv <foo> <bar>/<baz>  ç§»åŠ¨ä¸€ä¸ªç°æœ‰æ–‡ä»¶ <foo> åˆ°æ–°ä½ç½®å¹¶é‡å‘½åä¸º <bar>/<baz>
    find . -name <pattern>       ä½¿ç”¨ shell  <pattern> æŸ¥æ‰¾åŒ¹é…çš„æ–‡ä»¶åï¼ˆé€Ÿåº¦è¾ƒæ…¢ï¼‰
    locate -d . <pattern>        ä½¿ç”¨ shell <pattern> æŸ¥æ‰¾åŒ¹é…çš„æ–‡ä»¶åï¼ˆé€Ÿåº¦è¾ƒå¿«ï¼Œä½¿ç”¨å®šæœŸç”Ÿæˆçš„æ•°æ®åº“ï¼‰
    grep -e  <pattern>  *.html   åœ¨å½“å‰ç›®å½•ä¸‹ä»¥ .html ç»“å°¾çš„æ‰€æœ‰æ–‡ä»¶ä¸­ï¼ŒæŸ¥æ‰¾åŒ¹é… <pattern> çš„æ–‡ä»¶å¹¶æ˜¾ç¤º
    top                          å…¨å±æ˜¾ç¤ºè¿›ç¨‹ä¿¡æ¯ï¼Œè¾“å…¥ q é€€å‡º
    ps aux | pager               æ˜¾ç¤ºæ‰€æœ‰æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹çš„ä¿¡æ¯ï¼ˆBSD é£æ ¼ï¼‰
    ps -ef | pager               æ˜¾ç¤ºæ‰€æœ‰æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹çš„ä¿¡æ¯ï¼ˆUnix system-V é£æ ¼ï¼‰
    ps aux | grep -e  [e]xim4*   æ˜¾ç¤ºæ‰€æœ‰æ­£åœ¨è¿è¡Œ exim å’Œ exim4 çš„è¿›ç¨‹
    ps axf | pager               æ˜¾ç¤ºæ‰€æœ‰æ­£åœ¨è¿è¡Œçš„è¿›ç¨‹çš„ä¿¡æ¯ï¼ˆASCII é£æ ¼ï¼‰
    kill <1234>                  æ€æ­» ID ä¸º <1234> çš„è¿›ç¨‹
    gzip <foo>                   ä½¿ç”¨ Lempel-Ziv ç¼–ç ï¼ˆLZ77ï¼‰å°† <foo> å‹ç¼©ä¸º <foo>.gz 
    gunzip <foo>.gz              å°† <foo>.gz è§£å‹ä¸º <foo> 
    bzip2 <foo>                  ä½¿ç”¨ Burrows-Wheeter å—æ’åºå‹ç¼©ç®—æ³•å’Œ Huffman ç¼–ç å°† <foo> å‹ç¼©ä¸º <foo>.bz2 ï¼ˆå‹ç¼©æ•ˆæœæ¯” gzip æ›´å¥½ï¼‰
    bunzip2 <foo>.bz2            å°† <foo>.bz2 è§£å‹ä¸º <foo> 

å‘½ä»¤å¸¸è§ç®¡é“ç”¨æ³•

    cmd &             åœ¨å­ shell çš„åå° ä¸­æ‰§è¡Œ cmdï¼Œå¯ä»¥é…åˆ jobsã€fgã€bg å’Œ kill å‘½ä»¤ä½¿ç”¨
    cmd1 | cmd2       é€šè¿‡ç®¡é“å°† cmd1 çš„æ ‡å‡†è¾“å‡ºä½œä¸º cmd2 çš„æ ‡å‡†è¾“å…¥ï¼ˆå¹¶è¡Œæ‰§è¡Œï¼‰
    cmd1 2>&1 | cmd2  é€šè¿‡ç®¡é“å°† cmd1 çš„æ ‡å‡†è¾“å‡ºå’Œæ ‡å‡†é”™è¯¯ä½œä¸º cmd2 çš„æ ‡å‡†è¾“å…¥ï¼ˆå¹¶è¡Œæ‰§è¡Œï¼‰
    cmd1 ; cmd2       æŒ‰é¡ºåºæ‰§è¡Œ cmd1 å’Œ cmd2
    cmd1 && cmd2      æ‰§è¡Œ cmd1ï¼›å¦‚æœæˆåŠŸï¼ŒæŒ‰é¡ºåºæ‰§è¡Œ cmd2ï¼ˆå¦‚æœ cmd1 å’Œ cmd2 éƒ½æ‰§è¡ŒæˆåŠŸäº†ï¼Œè¿”å› success ï¼‰
    cmd1 || cmd2      æ‰§è¡Œ cmd1ï¼›å¦‚æœä¸æˆåŠŸï¼ŒæŒ‰é¡ºåºæ‰§è¡Œ cmd2ï¼ˆå¦‚æœ cmd1 æˆ– cmd2 æ‰§è¡ŒæˆåŠŸï¼Œè¿”å› success ï¼‰
    cmd > foo         å°† cmd çš„æ ‡å‡†è¾“å‡ºé‡å®šå‘åˆ°æ–‡ä»¶ fooï¼ˆè¦†ç›–ï¼‰
    cmd 2> foo        å°† cmd çš„æ ‡å‡†é”™è¯¯é‡å®šå‘åˆ°æ–‡ä»¶ fooï¼ˆè¦†ç›–ï¼‰
    cmd >> foo        å°† cmd çš„æ ‡å‡†è¾“å‡ºé‡å®šå‘åˆ°æ–‡ä»¶ fooï¼ˆé™„åŠ ï¼‰
    cmd 2>> foo       å°† cmd çš„æ ‡å‡†é”™è¯¯é‡å®šå‘åˆ°æ–‡ä»¶ fooï¼ˆé™„åŠ ï¼‰
    cmd > foo 2>&1    å°† cmd çš„æ ‡å‡†è¾“å‡ºå’Œæ ‡å‡†é”™è¯¯é‡å®šå‘åˆ°æ–‡ä»¶ foo
    cmd < foo         å°† cmd çš„æ ‡å‡†è¾“å…¥é‡å®šå‘åˆ°æ–‡ä»¶ foo å³è¯»å…¥æ–‡ä»¶
    cmd << delimiter  å°† cmd çš„æ ‡å‡†è¾“å…¥é‡å®šå‘åˆ°ä¸‹é¢çš„å‘½ä»¤è¡Œï¼Œç›´åˆ°é‡åˆ° delimiterï¼ˆhere documentï¼‰
    cmd <<- delimiter å°† cmd çš„æ ‡å‡†è¾“å…¥é‡å®šå‘åˆ°ä¸‹é¢çš„å‘½ä»¤è¡Œï¼Œç›´åˆ°é‡åˆ° delimiterï¼ˆhere documentï¼Œå‘½ä»¤è¡Œä¸­å¼€å¤´çš„åˆ¶è¡¨ç¬¦ä¼šè¢«å¿½ç•¥ï¼‰

ä¸Šé¢å‡ºç°çš„ 1/2 æ˜¯é¢„å®šä¹‰çš„æ–‡ä»¶æè¿°ç¬¦:

    è®¾å¤‡    è¯´æ˜      æ–‡ä»¶æè¿°ç¬¦
    stdin   æ ‡å‡†è¾“å…¥  0 ï¼ˆ0u)
    stdout  æ ‡å‡†è¾“å‡º  1 ï¼ˆ1u)
    stderr  æ ‡å‡†é”™è¯¯  2 ï¼ˆ2u)

Cat å‘½ä»¤æ„æ€æ˜¯ Concatenateï¼Œç”¨äºè¯»å–æ–‡ä»¶è¾“å‡ºåˆ°å±å¹•ï¼Œä½†è¿™ä¸ªå¸¸ç”¨å·¥å…·è¿˜ç»å¸¸ç»“åˆ << here document é‡å®šå‘æŠ€æœ¯ç”¨æ¥ç¼–å†™æ–‡ä»¶ï¼Œåœ¨ä¸æŒ‡å®šè¾“å…¥æ–‡ä»¶æ—¶ï¼Œå› ä¸º cat é»˜è®¤ä½¿ç”¨ stdin ä½œä¸ºæ•°æ®è¾“å…¥ã€‚

ç¤ºèŒƒï¼Œä½¿ç”¨ cat å‘½ä»¤åˆ›å»º shell è„šæœ¬ï¼Œæ³¨æ„æ ‡è®° EOF éœ€è¦ç”¨å®ƒæ¥ç»“æŸè¾“å…¥ï¼š

    cat >> demo.sh <<EOF
    > #!/bin/bash 
    > echo $HOME
    > EOF

Linux Heredoc ä¸­çš„ç»ˆç»“ç¬¦å·ä¹Ÿå¯ä»¥ä½¿ç”¨é”®ç›˜ Ctrl-D è¾“å…¥ï¼Œåœ¨ Windows ä¸Šä½¿ç”¨ Ctrl-Zã€‚

ä¸€èˆ¬ï¼Œåˆ›å»ºçš„æ–°æ–‡ä»¶æ˜¯æ²¡æœ‰æ‰§è¡Œæƒé™çš„ï¼Œéœ€è¦ä½¿ç”¨ chmod æ·»åŠ å¯æ‰§è¡Œæƒï¼Œ777 è¡¨ç¤ºç»™æ‰€æœ‰è´¦æˆ·éƒ½è®¾ç½® Read/Write/Execute æƒé™ï¼š

    $ ls -l
    total 0
    -rw-r--r-- 1 jeango jeango   31 May  4 07:56 demo.sh

    $ chmod +777 demo.sh
    $ ./demo.sh
    /home/jeango

è„šæœ¬ä½¿ç”¨äº†å›æ˜¾å‘½ä»¤è¾“å‡ºç”¨æˆ·çš„ HOME ç›®å½•ï¼Œæ³¨æ„åŒºåˆ†å¤§å°å†™ã€‚å¦å¤–ï¼Œæ‰©å±•åå¯ä»¥çœç•¥ï¼Œåªè¦æ˜¯å¯ä»¥æ‰§è¡Œçš„æ–‡ä»¶ï¼Œå°±å¯ä»¥æŒ‰ç¬¬ä¸€è¡ŒæŒ‡ç¤ºå†…å®¹å½“ä½œè„šæœ¬æ‰§è¡Œã€‚

ä½¿ç”¨ type å‘½ä»¤æ¥æŸ¥è¯¢å‘½ä»¤ä¿¡æ¯ï¼š

    $ type -a ls
    ls is aliased to `ls --color=auto'
    ls is /usr/bin/ls
    ls is /bin/ls

    $ type -a test
    test is a shell builtin
    test is /usr/bin/test
    test is /bin/test

åœ¨ Shell è„šæœ¬å¯ä»¥è¿›è¡Œæ•°å€¼è®¡ç®—ï¼Œä»¥ä¸‹ç¤ºèŒƒç®—å¼çš„ 4 ç§è¡¨è¾¾ï¼š

    #!/bin/bash 

    if [ $# -eq 2 ]
    then
      echo "Please offer a number."
    else
      m=$[ $1 + 1]
      echo add one: $m

      m=`expr $m + 1`
      echo add one: $m

      # æ³¨æ„ï¼š+ å·å·¦å³ä¸è¦åŠ ç©ºæ ¼
      let m=m+1
      echo add one: $m

      m=$(( m + 1 ))
      echo add one: $m
    fi

## ==âš¡ Shell Parameters
                                                                        *Shell Parameters*
- [bash manual - 3.4 Shell-Parameters](file:///C:/download/bash/bash.html#Shell-Parameters)


Shell Parameters

â€¢ Positional Parameters     The shellâ€™s command-line arguments.
â€¢ Special Parameters        Parameters denoted by special characters.


                                                                        *Positional Parameters*
Positional Parameters

A positional parameter is a parameter denoted by one or more digits, other than the single digit 0. Positional parameters are assigned from the shellâ€™s arguments when it is invoked, and may be reassigned using the set builtin command. Positional parameter `N` may be referenced as `${N}`, or as `$N` when `N` consists of a single digit. Positional parameters may not be assigned to with assignment statements. The set and shift builtins are used to set and unset them (see Shell Builtin Commands). The positional parameters are temporarily replaced when a shell function is executed (see Shell Functions).

When a positional parameter consisting of more than a single digit is expanded, it must be enclosed in braces.

                                                                        *Special Parameters*
Special Parameters

The shell treats several parameters specially. These parameters may only be referenced; assignment to them is not allowed.

*
(`$*`) Expands to the positional parameters, starting from one. When the expansion is not within double quotes, each positional parameter expands to a separate word. In contexts where it is performed, those words are subject to further word splitting and filename expansion. When the expansion occurs within double quotes, it expands to a single word with the value of each parameter separated by the first character of the IFS special variable. That is, `$*` is equivalent to `$1c$2câ€¦`, where c is the first character of the value of the IFS variable. If IFS is unset, the parameters are separated by spaces. If IFS is null, the parameters are joined without intervening separators.

@
(`$@`) Expands to the positional parameters, starting from one. In contexts where word splitting is performed, this expands each positional parameter to a separate word; if not within double quotes, these words are subject to word splitting. In contexts where word splitting is not performed, this expands to a single word with each positional parameter separated by a space. When the expansion occurs within double quotes, and word splitting is performed, each parameter expands to a separate word. That is, `"$@"` is equivalent to `"$1" "$2" â€¦`. If the double-quoted expansion occurs within a word, the expansion of the first parameter is joined with the beginning part of the original word, and the expansion of the last parameter is joined with the last part of the original word. When there are no positional parameters, `"$@"` and `$@` expand to nothing (i.e., they are removed).

#
(`$#`) Expands to the number of positional parameters in decimal.

?
(`$?`) Expands to the exit status of the most recently executed foreground pipeline.

-
(`$-`, a hyphen.) Expands to the current option flags as specified upon invocation, by the set builtin command, or those set by the shell itself (such as the -i option).

$
(`$$`) Expands to the process ID of the shell. In a () subshell, it expands to the process ID of the invoking shell, not the subshell.

!
(`$!`) Expands to the process ID of the job most recently placed into the background, whether executed as an asynchronous command or using the bg builtin (see Job Control Builtins).

0
(`$0`) Expands to the name of the shell or shell script. This is set at shell initialization. If Bash is invoked with a file of commands (see Shell Scripts), $0 is set to the name of that file. If Bash is started with the -c option (see Invoking Bash), then $0 is set to the first argument after the string to be executed, if one is present. Otherwise, it is set to the filename used to invoke Bash, as given by argument zero.

ä¸¤ä¸ªç±»ä¼¼çš„ç‰¹æ®Šå˜é‡åŒºåˆ«åœ¨äºä½¿ç”¨åŒå¼•å·ï¼š

- `"$*"` ä¼šå°†æ‰€æœ‰çš„å‚æ•°ä½œä¸ºä¸€ä¸ªæ•´ä½“ï¼Œä»¥"$1 $2 â€¦ $n"çš„å½¢å¼è¾“å‡ºæ‰€æœ‰å‚æ•°ï¼›
- `"$@"` ä¼šå°†å„ä¸ªå‚æ•°åˆ†å¼€ï¼Œä»¥"$1" "$2" â€¦ "$n" çš„å½¢å¼è¾“å‡ºæ‰€æœ‰å‚æ•°ã€‚ 

```sh
#!/bin/bash

echo Positional Parameters
echo ===============================================================
echo \$1 = $1
echo ...
echo \$9 = $9

echo Special Parameters
echo ===============================================================
echo \$* ==\> Expands to the positional parameters, starting from one.
echo "$*"
echo \$@ ==\> Expands to the positional parameters, starting from one.
echo "$@"
echo \$# ==\> Expands to the number of positional parameters in decimal.
echo $#
echo \$? ==\> Expands to the exit status of the most recently executed foreground pipeline.
echo $?
echo \$- ==\> Expands to the current option flags as specified upon invocation
echo $-
echo \$$ ==\> Expands to the process ID of the shell, it is Parent PID in subshell.
echo $$
echo \$! ==\> Expands to the process ID of the job most recently placed into the background
echo $!
echo \$ ==\> Expands to the name of the shell or shell script. 
echo $0

if
echo Try this: 
$0 1a 2 3 4 5 6 7 8 9i -hyphened "bad apple"
```


## ==âš¡ bash å˜é‡
- Bash Reference Manual https://www.gnu.org/software/bash/manual/bash.html#Quoting

æ‰“å° $HOME ç¯å¢ƒå˜é‡ï¼š

    echo $HOME

Shell å˜é‡åˆ†ä¸º 3 ç§ï¼š

1. ç”¨æˆ·è‡ªå®šä¹‰å˜é‡ï¼Œåªæ”¯æŒå­—ç¬¦ä¸²ç±»å‹ï¼Œä¸æ”¯æŒæµ®ç‚¹ç­‰ç±»å‹ï¼Œèµ‹å€¼å·ä¸èƒ½æœ‰ç©ºæ ¼ã€‚
2. é¢„å®šä¹‰å˜é‡
3. ç¯å¢ƒå˜é‡

å®šä¹‰å˜é‡éœ€è¦æ³¨æ„ï¼Œä¸€èˆ¬å˜é‡åç”¨å¤§å†™ï¼Œèµ‹å€¼ç­‰å·å‰åä¸è¦æœ‰ç©ºæ ¼ï¼Œå¦‚ `NUM=10`,

ç”¨æˆ·å˜é‡å¸¸è§æœ‰ 3 ä¸ªå‰ç¼€ï¼š

1. unsetï¼šåˆ é™¤å˜é‡
2. readonlyï¼šæ ‡è®°åªè¯»å˜é‡
3. exportï¼šæŒ‡å®šå…¨å±€å˜é‡

ä¾‹å­ç¤ºèŒƒï¼Œæ³¨æ„å­—ç¬¦ä¸²å¸¦ç©ºæ ¼ï¼Œä½¿ç”¨åŒå¼•å·åŒ…æ‹¬ï¼š

    #!/bin/bash 

    # å®šä¹‰å…¨å±€å˜é‡
    export NAME="shell script"

    # æ‰“å°å˜é‡çš„å€¼
    echo $NAME

Shell ç¼–ç¨‹ç¯å¢ƒæä¾›äº†ä¸€ç³»åˆ—é¢„å®šä¹‰å˜é‡ï¼Œæ¥è·å–å‘½ä»¤è¡Œçš„è¾“å…¥ï¼š

    #!/bin/bash 

    echo "\$0 = $0" \<== script name
    echo "\$1 = $1" \<== 1st argument
    echo "\$2 = $2" \<== 2nd argument
    echo "\$9 = $9" \<== 9th argument
    echo "\$# = $#" \<== numbers of arguments
    echo "\$@ = $@" \<== all arguments
    echo "\$* = $*" \<== all arguments
    echo "\$$ = $$" \<== Process ID
    echo "\$? = $?" \<== pre-process status

ä¸ºäº†å¤„ç†è¶…å‡º $9 ä»¥åçš„å‚æ•°ï¼Œå¯ä»¥ä½¿ç”¨ shift å‘½ä»¤ç”¨äºå‘å‰ç§»åŠ¨å‚æ•°ï¼Œæ¯æ‰§è¡Œä¸€æ¬¡ï¼Œ$1-$9 çš„å‚æ•°å¾€å‰ç§»åŠ¨ä¸€æ¬¡ï¼Œä¸ä¼šå½±å“ $0ã€‚


ç¯å¢ƒå˜é‡æ ¹æ®é…ç½®æœ‰æ‰€ä¸åŒï¼Œé»˜è®¤æœ‰ä¸‹é¢è¿™å‡ ä¸ªï¼š

1. HOMEï¼šç”¨æˆ·ä¸»ç›®å½•
2. PATHï¼šç³»ç»Ÿç¯å¢ƒå˜é‡ PATH
3. TERMï¼šå½“å‰ç»ˆç«¯
4. UIDï¼šå½“å‰ç”¨æˆ· ID
5. PWDï¼šå½“å‰å·¥ä½œç›®å½•ï¼Œç»å¯¹è·¯å¾„

ä¸€äº›ç¯å¢ƒå˜é‡çš„å€¼ä¼šæ”¹å˜éƒ¨åˆ† Unix å‘½ä»¤çš„è¡Œä¸ºã€‚ç¯å¢ƒå˜é‡çš„é»˜è®¤å€¼ç”± PAM ç³»ç»Ÿåˆå§‹åŒ–ï¼Œå…¶ä¸­ä¸€äº›ä¼šè¢«æŸäº›åº”ç”¨ç¨‹åºé‡æ–°è®¾å®šã€‚

- æ˜¾ç¤ºç®¡ç†å™¨ï¼ˆä¾‹å¦‚ gdm3ï¼‰ä¼šé‡æ–°è®¾å®šç¯å¢ƒå˜é‡ã€‚
- Shell è„šæœ¬å¯åŠ¨çš„æ—¶å€™ä¼šé‡ç½® `~/.bash_profile` å’Œ `~/.bashrc` ä¸­çš„ç¯å¢ƒå˜é‡ã€‚

è¯­è¨€ç¯å¢ƒå€¼ $LANG å˜é‡ä¼šå½±å“å†…å®¹çš„è¾“å‡ºå¦‚ date å‘½ä»¤è¾“å‡ºçš„æ—¥æœŸæ ¼å¼ï¼Œå®Œæ•´çš„è¯­è¨€ç¯å¢ƒå€¼ç”±å°å†™è¯­è¨€ä»£ç ã€å¤§å†™å›½å®¶ä»£ç å’Œç¼–ç  3 éƒ¨åˆ†ç»„æˆï¼Œå¦‚ en_US.UTF-8ã€‚

é…ç½®æ–‡ä»¶ /etc/default/locale è®¾ç½®ç³»ç»Ÿé»˜è®¤çš„è¯­è¨€ç¯å¢ƒå€¼ç»™ PAM ä½¿ç”¨ï¼Œå¦‚æœå®‰è£…ç³»ç»Ÿé€‰æ‹©äº†ä¸­æ–‡ï¼Œé‚£ä¹ˆå®ƒçš„å†…å®¹å¯èƒ½æ˜¯è¿™æ ·çš„ï¼Œå¯ä»¥ä½¿ç”¨ echo $LANG æ˜¾å¼å½“å‰çš„è®¾ç½®ï¼š

    LANGUAGE="en_US:en"
    LANG="zh_CN.UTF-8"

å¦‚ï¼š

    > LANG=en_US.UTF-8 date
    Fri 18 Oct 2019 12:56:45 PM EDT
    > LANG=zh_CN.UTF-8 date
    Fri Oct 18 12:59:12 EDT 2019

å½“ä½ åœ¨ Shell é‡Œè¾“å…¥å‘½ä»¤çš„æ—¶å€™ï¼ŒShell ä¼šåœ¨ $PATH å˜é‡æ‰€åŒ…å«çš„ç›®å½•åˆ—è¡¨é‡Œè¿›è¡Œæœç´¢ï¼Œ$PATH å˜é‡çš„å€¼ä¹Ÿå«ä½œ Shell çš„æœç´¢è·¯å¾„ã€‚

åœ¨é»˜è®¤çš„ Debian å®‰è£…è¿‡ç¨‹ä¸­ï¼Œæ‰€ä½¿ç”¨çš„ç”¨æˆ·è´¦å·çš„ $PATH ç¯å¢ƒå˜é‡å¯èƒ½ä¸åŒ…æ‹¬ /sbin å’Œ /usr/sbin ç›®å½•ã€‚ä¾‹å¦‚ï¼Œifconfig å‘½ä»¤å°±éœ€è¦æŒ‡å®šå®Œæ•´çš„è·¯å¾„ /sbin/ifconfigã€‚ç±»ä¼¼åœ°ï¼Œip å‘½ä»¤æ˜¯åœ¨ /bin ç›®å½•ä¸‹ã€‚ å¯ä»¥åœ¨ Bash è„šæœ¬æ–‡ä»¶ `~/.bash_profile` æˆ– `~/.bashrc` ä¸­æ”¹å˜ $PATH ç¯å¢ƒå˜é‡çš„å€¼ï¼Œå¦‚ï¼š

    export PATH=$PATH:/home/go/bin:/bin:/sbin:/usr/bin:/usr/sbin:/usr/local/go/bin

ä¿®æ”¹ç¯å¢ƒå˜é‡åä¸€èˆ¬éœ€è¦é‡å¯ç»ˆç«¯æˆ–æœºå™¨ä½¿å…¶ç”Ÿæ•ˆï¼Œæˆ–æ‰§è¡Œ source å‘½ä»¤ä½¿é…ç½®ç«‹å³åœ¨å½“å‰ shell ä¸­ç”Ÿæ•ˆã€‚

    source $HOME/.bash_profile.

source åœ¨å½“å‰ bash ç¯å¢ƒä¸‹æ‰§è¡Œå‘½ä»¤ï¼Œè€Œ scripts æ˜¯å¯åŠ¨ä¸€ä¸ªå­ shell æ¥æ‰§è¡Œå‘½ä»¤ã€‚è¿™æ ·å¦‚æœæŠŠè®¾ç½®ç¯å¢ƒå˜é‡çš„å‘½ä»¤å†™è¿› scripts ä¸­ï¼Œå°±åªä¼šå½±å“å­ shell æ— æ³•æ”¹å˜å½“å‰çš„ BASH>é€šè¿‡æ–‡ä»¶è®¾ç½®ç¯å¢ƒå˜é‡æ—¶ï¼Œè¦ç”¨ source å‘½ä»¤ã€‚

$HOME å˜é‡ï¼Œå¾ˆå¤šå‘½ä»¤åœ¨ç”¨æˆ·ç›®å½•ä¸­éƒ½å­˜æ”¾äº†ç”¨æˆ·æŒ‡å®šçš„é…ç½®ï¼Œç„¶åé€šè¿‡é…ç½®çš„å†…å®¹æ¥æ”¹å˜å®ƒçš„æ‰§è¡Œæ–¹å¼ï¼Œç”¨æˆ·ç›®å½•é€šå¸¸ç”¨ $HOME æ¥æŒ‡å®šã€‚Shell æ‰©å±• `~/` ä¸ºè½¬å…¥å½“å‰ç”¨æˆ·çš„ä¸»ç›®å½•ï¼Œä¹Ÿå°±æ˜¯ `$HOME/`ã€‚Shell æ‰©å±• `~foo/` ä¸º foo çš„ç›®å½•ï¼Œä¹Ÿå°±æ˜¯ `/home/foo/`ã€‚

æœ‰ä¸ªç‰¹æ®Šçš„ç¯å¢ƒå˜é‡ IFS - internal field separatorï¼Œé»˜è®¤å®šä¹‰æ˜¯ä¸€ä¸ªç©ºæ ¼ï¼Œåœ¨åˆ†å‰²æ•°æ®æ—¶éœ€è¦ä½¿ç”¨å®ƒã€‚

å¦‚ï¼Œä»¥ä¸‹æ‰“åŒ… $PATH ä¸­æ‰€æœ‰ç›®å½•ä¸‹çš„æ–‡ä»¶ï¼Œå› ä¸ºæ•°æ®ä¸­ä½¿ç”¨çš„åˆ†éš”ç¬¦å·æ˜¯å†’å·ï¼šå¦‚æœè®¾ç½®ä¸å¯¹ï¼Œfor å¾ªç¯å°±ä¸èƒ½è·å–åˆ°æ­£ç¡®çš„æ•°æ®ï¼š

    #!/bin/bash
    # finding files in the PATH
    IFS=:

    for folder in $PATH
    do
      echo â€œ$folder:â€
      for file in $folder/*
      do
        if [ -x $file ]
        then
          echo â€œ $fileâ€
        fi
      done
    done

    # \ n ä¸¤ä¸ªå­—ç¬¦ä½œä¸ºåˆ†éš”ç¬¦ã€‚
    IFS='\n'

    # æ¢è¡Œç¬¦åšä¸ºå­—æ®µåˆ†éš”ç¬¦ï¼Œ$ è¡¨ç¤ºè¿›è¡Œè½¬ä¹‰ã€‚
    IFS=$'\n'

    # \ n : éƒ½ä½œä¸ºå­—æ®µåˆ†éš”ç¬¦ã€‚
    IFS='\n':;

å…¶ä¸­ `$'...'` è¿™ç§è¡¨è¾¾ç§°ä¸º ANSI C-quoted stringsã€‚


## ==âš¡ bash array
- The Ultimate Bash Array Tutorial with 15 Examples

Linux å‘½ä»¤è¾“å‡ºå†…å®¹åªæ˜¯å­—ç¬¦ä¸²ï¼Œä¸åƒ PowerShell é‚£æ ·å¤„ç†æˆå¯¹è±¡ï¼Œå¯ä»¥æ˜¯æ•°ç»„æ•°æ®ã€‚
è¦å°†å­—ç¬¦ä¸²åƒæ•°ç»„ä¸€æ ·æ“ä½œï¼Œéœ€è¦ head tail ä¸¤ä¸ªå‘½ä»¤çš„é…åˆï¼Œä¸€ä¸ªè·å–å‰é¢çš„éƒ¨åˆ†ï¼Œå†
ç”¨ tail è·å–åé¢çš„éƒ¨åˆ†ï¼Œå¯ä»¥æŒ‰å­—èŠ‚ -c å¤„ç†ï¼Œä¹Ÿå¯ä»¥æŒ‰è¡Œ -n å¤„ç†ã€‚è¿™æ ·å°±å¯ä»¥è·å–
æŒ‡å®šè¡Œçš„æ•°æ®ï¼Œå¦å¤– awk è¿™æ ·çš„æ ¼å¼åŒ–å·¥å…·ä¹Ÿå¯ä»¥å®ç°åŒæ ·çš„åŠŸèƒ½ï¼š

```sh
    lines=$(printf "line %s\n" {1..5})
    lines=$(printf "line %s\n" $(seq 5))
    echo "$lines" | head -n 3 | tail -n 1 # line 3
    echo "$lines" | head -n-3 | tail -n+1 # line 1 & 2
    echo "$lines" | sed -n '2,3p'         # line 2 & 3
    echo "$lines" | sed = | sed 'N;s/\n/\t/' | sed -n '2,3p'
    echo "$lines" | awk -F " " '($2>=2 && $2<=3){ print $0 }'
```

å¯ä»¥ç»™é¦–å°¾å‘½ä»¤çš„æ•°å€¼åŠ  + - å‰ç¼€ï¼Œä»¥åŠ awk sed å‘½ä»¤çš„è¯´æ˜å¦‚ä¸‹ï¼š

  + head -n -num è¡¨ç¤ºè·å–é™¤æœ«å°¾ num è¡Œä¹‹å‰çš„å†…å®¹
  + tail -n +num è¡¨ç¤ºè·å– num è¡Œå¼€å§‹çš„å†…å®¹
  + awk æ ¼å¼åŒ–å·¥å…·ä½¿ç”¨ -F " " æŒ‡å®šç©ºæ ¼ä¸ºè¡Œå†…å­—æ®µåˆ†éš”ç¬¦ï¼Œé»˜è®¤ä¸º -F:
  + awk ä¸­ä½¿ç”¨ $0 è¡¨ç¤ºå½“å‰è¡Œå†…å®¹ï¼Œ$1 - $9 è¿™æ ·çš„å˜é‡è¡¨ç¤ºå¯¹åº”åˆ—å†…å®¹
  + sed = ç»™æ•°æ®å¢åŠ æ‰“å°è¡Œå·ï¼Œä½¿ç”¨ N; è¯»å–ä¸‹ä¸€è¡Œ
  + s/\n/\t/ æ›¿æ¢å½“å‰è¡Œçš„æ¢è¡Œç¬¦ï¼Œå°†å†…å®¹ä¸è¡Œå·æ‹¼æˆä¸€è¡Œæ˜¾ç¤º

å¤šè¡Œå†…å®¹ä¿å­˜åˆ°å˜é‡ï¼Œä½¿ç”¨ echo è¾“å‡ºæ—¶ï¼Œç»™å˜é‡åŠ åŒå¼•å·è¾“å‡ºæ‰æœ‰å®Œæ•´çš„æ¢è¡Œç¬¦å·ã€‚

Use declare command can define two types of array:

    declare: declare [-aAfFgilnrtux] [-p] [name[=value] ...]
          -a        to make NAMEs indexed arrays (if supported)
          -A        to make NAMEs associative arrays (if supported)

Bash provides one-dimensional indexed and associative array variables.

Indexed array is created automatically.

```sh
#! /bin/bash

# Declaring an Array and Assigning values:
# name[subscript]=value
# declare -a name = (values ...)
# declare -a name
# declare -a name[subscript]
# declare -A name

Unix[0]='Debian'
Unix[1]='Red hat'
Unix[2]='Ubuntu'
Unix[3]='Suse'

declare -a Unix=('Debian' 'Red hat' 'Ubuntu' 'Suse')

echo = # the length of array should be "4": 
echo ${#Unix[@]} or ${#Unix[*]}

echo = # all elements of array: 
echo ${Unix[@]} or ${Unix[*]}

echo = # the length of the 1st element should be "6": 
echo ${#Unix}

echo = # the 1st element should be "Debina": 
echo ${Unix[0]} or ${Unix}

echo = # assign value to a arbitrary position
Unix[6]="it is ok"

echo = # Extraction by offset and length for an element
echo Substring "ok" of 6th array element: ${Unix[6]:6:2}

echo = # Extraction by offset and length for an array
echo Sub array should be \(Ubuntu\): ${Unix[@]:6:1}
echo Sub array from 3th to end: ${Unix[@]:3}

echo = # Search and Replace in an array elements
echo Replace and return new array: ${Unix[@]/Ubuntu/SCO Unix}
echo Origin unchange: ${Unix[@]}

echo = # Add and update an element to an Bash Array
Unix=("${Unix[@]}" "AIX" "HP-UX" 'Fedora' 'UTS' 'OpenLinux');
echo After elements append: ${Unix[@]}

echo = # Remove an Element from an Array
echo = # the 4th element is "it is ok" after update 
unset Unix[4]
echo Unseted element should be null "": ${Unix[4]}
echo Origin array has changed: ${Unix[@]}

echo = # Another way to composite an new array
pos=3
Unix=(${Unix[@]:0:$pos} ${Unix[@]:$(($pos + 1))})
echo 3th element "Suse" was completely removed: ${Unix[@]}

echo = # Remove Bash Array Elements using Patterns
echo It does not work to search "Red*": ${Union[@]/Red*/}
declare -a patter=( ${Unix[@]/Red*/} )
echo ${patter[@]}

echo = # Copying an Array
Linux=("${Unix[@]}")
echo Array copy: ${Linux[@]}

echo = # Concatenation of two Bash Arrays
Shell=('bash' 'csh' 'jsh' 'rsh' 'ksh' 'rc' 'tcsh');
UnixShell=("${Unix[@]}" "${Shell[@]}")
echo Elements concated array: ${UnixShell[@]}
echo Length of concated array: ${#UnixShell[@]}

echo = # Use unset to delete an Entire Array
unset UnixShell
echo UnixShell is null after unseted and length is 0: ${#UnixShell[@]}

echo = # Load Content of a File into an Array
echo Concating input to an example file ...
cat > logfile <<EOF
Welcome to
bash
script programming
on Linux or Unix
EOF
echo "Reading file content ..."
content=( `cat "logfile" `)

for t in "${content[@]}"
do
    echo Line \#$((No++)): $t
done
```


## ==âš¡ flow control if/for/while/case

Shell æœ‰æµç¨‹æ§åˆ¶è¯­å¥ï¼Œè·Ÿé«˜çº§è¯­è¨€ç±»ä¼¼ï¼ŒåŒ…æ‹¬åˆ†æ”¯ï¼Œè·³è½¬ï¼Œå¾ªç¯ã€‚

if - else - fi æ¡ä»¶æ§åˆ¶ï¼š

- æ–¹æ‹¬å·ç­‰ä»· test å‘½ä»¤ï¼Œæ³¨æ„ä¿ç•™å†…éƒ¨çš„ç©ºæ ¼ã€‚
- å¦‚æœ if then è¦åŒè¡Œï¼Œthen å‰é¢è¦ä½¿ç”¨ ; å·è¿æ¥ã€‚

```sh
#!/bin/bash 

read VAR

#if test $VAR -eq 10; then
if [ $VAR -eq 10 ]
then
    echo "true"
else
    echo "false"
fi

v=$RANDOM
if [ $v -gt $((32768/4)) ]; then
    echo -n "$v bad "
    echo -n "apple"
fi
```

æ³¨æ„ then çš„ä½¿ç”¨ï¼Œç¬¬ä¸€ä¸ªæ¡ä»¶åˆ†æ”¯éƒ½éœ€è¦ï¼Œé™¤äº† elseã€‚

```sh
#!/bin/bash 

# if [ $1 == $2 ]
if (( $1>0 && $2>0 && $1==$2)); then 
  echo "both $1 and $2 greater than 0, and they are equal."
elif (( $1 == $2 )); then
  echo "$1 and $2 are equal."
else
  echo "not equal."
fi
```

case åˆ†æ”¯è¯­å¥ï¼Œæ³¨æ„åˆ†æ”¯ç»“æŸä½¿ç”¨ä¸¤ä¸ªåˆ†å·ï¼Œåˆ†æ”¯å¼€å§‹ç”¨ä¸€ä¸ªå³åœ†æ‹¬å·ï¼Œé»˜è®¤åˆ†æ”¯ç”¨ `*)`ï¼š

    #!/bin/bash 

    read NAME
    case $NAME in
        "Linux")
            echo "Linux is open source"
            ;;
        "Windows")
            echo "There was blue screens!"
            ;;
        *)
            echo "other"
            ;;
    esac

for å¾ªç¯ï¼Œæ¼”ç¤ºä¸‰ç§å½¢å¼ï¼Œå¾ªç¯ä½“ä½¿ç”¨ do-dnoe åŒ…æ‹¬ï¼š

    #!/bin/bash 

    for ((i = 1; i <= 3; i++))
    do
        echo $i
    done

    for VAR in 1 2 3
    do
        echo $VAR
    done

    for VAR in $*
    do
        echo $VAR
    done

while å¾ªç¯ï¼Œä½¿ç”¨æ–¹æ‹¬å·ï¼Œæ³¨æ„ä¸ for å¾ªç¯çš„åŒºåˆ«ï¼š

    #!/bin/bash 

    echo Please offer initial number
    read VAR

    while [ $VAR -lt 10 ]
    do
        echo $VAR
        VAR=$[ $VAR + 1 ]
    done

until å¾ªç¯ï¼Œä½¿ç”¨åŒå±‚æ–¹æ‹¬å·ï¼Œå®ƒçš„ç»“æŸæ¡ä»¶ä¸º trueï¼š

    #!/bin/bash 

    i=0

    until [[ "$i" -gt 5 ]]     
    do  
        echo $i
        i=$[ $i + 1 ]
    done

åœ¨å¾ªç¯ä½“ä¸­ï¼Œå¯ä»¥ä½¿ç”¨ break æ‰“æ–­å¾ªç¯ï¼Œä½¿ç”¨ continue è·³è¿‡æœ¬æ¬¡å¾ªç¯ï¼Œè¿›å…¥ä¸‹ä¸€æ¬¡å¾ªç¯ï¼Œè¿™äº›åŠŸèƒ½å¾ˆåƒé«˜çº§è¯­è¨€ã€‚

ç¤ºèŒƒï¼Œæ‰“å°ç›®å½•ä¸‹çš„æ‰€æœ‰æ–‡ä»¶ï¼š

    for VAR in `ls .`
    do
        echo $VAR
    done


## ==âš¡ bash function

ä¸‹é¢ä»‹ç» Shell ç¼–ç¨‹ä¸­æ¯”è¾ƒé‡è¦çš„å‡½æ•°ï¼Œè¿™è®©è„šæœ¬å…·æœ‰å‡½æ•°å¼ç¼–ç¨‹çš„åŠŸèƒ½ã€‚

    #!/bin/bash 

    function hello()
    {
        echo -n "hello $1, "
        return 1
    }

    world()
    {
        local MSG="script world."
        echo "welcome to $MSG"
    }
    hello "guy"
    `echo world`

å®šä¹‰å‡½æ•°ï¼Œå¯ä»¥çœç•¥ function å…³é”®å­—ã€‚

å‡½æ•°è°ƒç”¨æ–¹å¼æœ‰ä¸¤ç§ï¼Œé™¤äº†ç›´æ¥å†™å‡½æ•°åï¼Œä¸ä½¿ç”¨æ‹¬å·ï¼Œå¦‚æœæœ‰å‚æ•°ï¼Œå°±ä¾æ¬¡ä¼ å…¥ï¼Œåœ¨å‡½æ•°å†…éƒ¨ä½¿ç”¨ $1-$9 æ¥æ¥æ”¶ã€‚

å¦ä¸€ç§è°ƒç”¨æ–¹å¼ï¼Œæ˜¯ä½¿ç”¨è¿”å¼•å·ï¼Œè¿™ç§è¡¨è¾¾å¼å¯ä»¥å½“ä½œ exec å‘½ä»¤ä½¿ç”¨ï¼Œç”¨æ¥æ‰§è¡Œå¤–éƒ¨å‘½ä»¤ï¼Œæˆ–è€…è°ƒç”¨å‡½æ•°ã€‚

å‡½æ•°ä¸­ï¼Œè¿˜å¯ä»¥å®šä¹‰å±€éƒ¨å˜é‡ã€‚

å‡½æ•°é€šè¿‡ return è¯­å¥è¿”å›çš„å€¼ï¼Œå¯ä»¥é€šè¿‡ `$?` è·å–ï¼Œå¦‚æœè„šæœ¬éœ€è¦è¿”å›ä¸€ä¸ªå€¼ï¼Œä½¿ç”¨ exit å‘½ä»¤æŒ‡å®šã€‚


## ==âš¡ Test file comparisons
- Linux Command Line and Shell Scripting Bible

Table 12.3 The test File Comparisons

| Comparison  | Description
| ----------- | --------------------------------------------
| -d file     | Checks if file exists and is a directory
| -e file     | Checks if file exists
| -f file     | Checks if file exists and is a file
| -r file     | Checks if file exists and is readable
| -s file     | Checks if file exists and is not empty
| -w file     | Checks if file exists and is writable
| -x file     | Checks if file exists and is executable
| -O file     | Checks if file exists and is owned by the current user
| -G file     | Checks if file exists and the default group is the same as the current user
| file1 -nt file2 | Checks if file1 is newer than file2
| file1 -ot file2 | Checks if file1 is older than file2

These conditions give you the ability to check filesystem files within shell scripts. They
are often used in scripts that access files. Because theyâ€™re used so often, letâ€™s look at each
of these individually.

```sh
$ cat test11.sh
#!/bin/bash
# Look before you leap
#
jump_directory=/home/arthur
#
if [ -d $jump_directory ]
then
echo â€œThe $jump_directory directory existsâ€
cd $jump_directory
ls
else
echo â€œThe $jump_directory directory does not existâ€
fi
#
```

## ==âš¡ bash å‘½ä»¤è¡Œæç¤ºç¬¦

Bash ä¼šæ£€æŸ¥è®¾ç½®åœ¨ PROMPT_COMMAND ä¸Šæ•°ç»„å†…å®¹ï¼Œæ ¹æ®å ä½ç¬¦ä¾æ¬¡æ›¿æ¢ç›¸åº”çš„å†…å®¹æ˜¾ç¤ºåœ¨å‘½ä»¤è¡Œæç¤ºç¬¦ä¹‹å‰ã€‚

å¦å¤–ï¼Œä»¥ä¸‹è¿™äº›å ä½ç¬¦è¿˜å¯ç”¨äºæç¤ºç¬¦å˜é‡ PS0, PS1, PS2, PS4:

- `\a` A bell character.
- `\d` The date, in "Weekday Month Date" format (e.g., "Tue May 26").
- `\D{format}` ä¼ å…¥ strftime(3) å‡½æ•°çš„æ ¼å¼å­—ç¬¦ï¼Œç©ºå­—ç¬¦æ ¼å¼è¡¨ç¤ºæœ¬åœ°åŒ–æ—¶é—´æ ¼å¼ã€‚
- `\e` An escape character.
- `\h` The hostname, up to the first â€˜.â€™.
- `\H` The hostname.
- `\j` The number of jobs currently managed by the shell.
- `\l` The basename of the shellâ€™s terminal device name.
- `\n` A newline.
- `\r` A carriage return.
- `\s` è„šæœ¬åç§°ï¼Œå³å‚æ•°å˜é‡ $0 çš„åŸºæœ¬æ–‡ä»¶åç§°éƒ¨åˆ†ã€‚
- `\t` The time, in 24-hour HH:MM:SS format.
- `\T` The time, in 12-hour HH:MM:SS format.
- `\@` The time, in 12-hour am/pm format.
- `\A` The time, in 24-hour HH:MM format.
- `\u` The username of the current user.
- `\v` The version of Bash (e.g., 2.00)
- `\V` The release of Bash, version + patchlevel (e.g., 2.00.0)
- `\w` å½“å‰å·¥ä½œç›®å½•ï¼Œ$HOME ç”¨æ³¢æµªå·è¡¨ç¤ºï¼Œé€šè¿‡ $PROMPT_DIRTRIM å˜é‡ã€‚
- `\W` The basename of $PWD, with $HOME abbreviated with a tilde.
- `\!` The history number of this command.
- `\#` The command number of this command.
- `\$` If the effective uid is 0, #, otherwise $.
- `\nnn` The character whose ASCII code is the octal value nnn.
- `\\` A backslash.
- `\[` éæ‰“å°å­—ç¬¦å¼€å§‹ï¼Œå¯ä»¥æ§åˆ¶å°æ§åˆ¶å­—ç¬¦åˆ°æç¤ºç¬¦ã€‚
- `\]` End a sequence of non-printing characters.


æŸ¥çœ‹é»˜è®¤è®¾ç½®ï¼Œæ³¨æ„åµŒå…¥çš„éæ‰“å°å­—ç¬¦ç”¨æ¥æ§åˆ¶å­—ç¬¦é¢œè‰²ï¼š

    $ echo $PS1
    \[\e]0;\u@\h: \w\a\]${debian_chroot:+($debian_chroot)}\[\033[01;32m\]\u@\h\[\033[00m\]:\[\033[01;34m\]\w\[\033[00m\]\$
    $ echo $PS2
    >
    $ echo $PS3

    $ echo $PS4
    +

è®¾ç½®æç¤ºç¬¦ç¤ºèŒƒï¼š

    export PROMPT_COMMAND="pwd"
    export PS1="\[\033[01;32m\]\s@\u$ \[\033[00m\]"


## ==âš¡ bash å‘½ä»¤çš„è¿”å›å€¼

è¡¨æ ¼ D-1.Â "ä¿ç•™çš„"é€€å‡ºç 

| é€€å‡ºç çš„å€¼ |                   å«ä¹‰                   |       ä¾‹å­       |
|------------|------------------------------------------|------------------|
| 1          | é€šç”¨é”™è¯¯ï¼Œæ¯”å¦‚"é™¤0é”™è¯¯"                  | let "var1 = 1/0" |
| 2          | shellå†…å»ºå‘½ä»¤ä½¿ç”¨é”™è¯¯                    |                  |
| 126        | å‘½ä»¤ä¸èƒ½æ‰§è¡Œï¼Œå¦‚æƒé™é—®é¢˜                 |                  |
| 127        | æ‰¾ä¸åˆ°å‘½ä»¤ï¼Œå¯èƒ½æ˜¯ $PATH æˆ–æ‹¼å†™é”™è¯¯      |                  |
| 128        | exit çš„å‚æ•°é”™è¯¯ï¼Œåªèƒ½æ˜¯ 0 - 255          | exit 3.14159     |
| 128+n      | ä¿¡å· "n" çš„è‡´å‘½é”™è¯¯ï¼Œ$?Â è¿”å›(128 + n)    | kill -9 pid      |
| 130        | ç”¨ Ctrl-C æ¥è§¦å‘ SIGINTï¼Œè¿”å›ç (128 + 2) |                  |
| 255*       | è¶…å‡ºèŒƒå›´çš„é€€å‡ºçŠ¶æ€ï¼Œåªèƒ½æ˜¯ 0 - 255       | exitÂ -1          |

å„ç§ä¿¡æ¯å¯ä»¥é€šè¿‡ `kill -l` å‘½ä»¤æŸ¥çœ‹ã€‚

shell è¿”å›ç å³ exit è¿”å›ç ï¼Œæ ‡è¯†æ•´ä¸ªè„šæœ¬çš„æ‰§è¡Œç»“æœçŠ¶æ€ã€‚

å‡½æ•°è¿”å›ç å³ return è¿”å›ç ï¼Œæ ‡è¯†ä¸€ä¸ªå‡½æ•°çš„æ‰§è¡Œç»“æœçŠ¶æ€ã€‚

å‘½ä»¤è¿”å›ç ï¼Œæ ‡è¯†ä¸€ä¸ªå‘½ä»¤çš„æ‰§è¡Œç»“æœçŠ¶æ€ï¼Œåœ¨å‘½ä»¤æ‰§è¡Œåï¼Œç´§è·Ÿç€è·å–è¿”å›ç ï¼Œç”¨ $? è·å–ã€‚

æ¯ä¸ªå‘½ä»¤éƒ½ä¼šè¿”å›å®ƒçš„é€€å‡ºçŠ¶æ€ï¼Œé€šè¿‡å˜é‡ $? ä½œä¸ºè¿”å›å€¼ï¼Œæ¯” Windows CMD ä¸‹çš„ ERRORLEVEL å¥½ç”¨å¤šäº†ã€‚

    | å‘½ä»¤çš„é€€å‡ºçŠ¶æ€ |  æ•°å­—è¿”å›å€¼  | é€»è¾‘è¿”å›å€¼ |
    |----------------|--------------|------------|
    | success        | zero, 0      | TRUE       |
    | error          | non-zero, -1 | FALSE      |

åˆ—å¦‚ echo æ˜¾å¼æœ€åçš„å‘½ä»¤è¿”å›å€¼ã€‚

è¯·æ³¨æ„ï¼Œsuccess æ˜¯é€»è¾‘ TRUE ï¼Œ0ï¼ˆzeroï¼‰åˆ™æ˜¯å®ƒçš„å€¼ã€‚è¿™æœ‰äº›ä¸ç›´è§‚ï¼Œéœ€è¦åœ¨è¿™é‡Œæä¸€ä¸‹

    > [ 2 = 3 ]; echo $?
    1
    > [ a3 = a3 ]; echo $?
    0


## ==âš¡ bash æ¨¡ç³ŠåŒ¹é…

ç»å¸¸æœ‰è¿™ç§æƒ…å†µä½ æœŸæœ›å‘½ä»¤æˆä¸²è‡ªåŠ¨æ‰§è¡Œè€Œä¸éœ€è¦æŒ¨ä¸ªè¾“å…¥ï¼Œå°†æ–‡ä»¶åæ‰©å±•ä¸º globï¼Œ(æœ‰æ—¶å€™è¢«ç§°ä¸º é€šé…ç¬¦)ï¼Œä»¥æ­¤æ¥
æ»¡è¶³è¿™æ–¹é¢çš„éœ€æ±‚ã€‚

    shell glob æ¨¡å¼    åŒ¹é…è§„åˆ™æè¿°
    *                 ä¸ä»¥ . å¼€å¤´çš„æ–‡ä»¶å (æ®µ)
    .*                ä»¥ . å¼€å¤´çš„æ–‡ä»¶å (æ®µ)
    ?                 ç²¾ç¡®å­—ç¬¦
    [â€¦]               åŒ…å«åœ¨æ‹¬å·ä¸­çš„ä»»æ„å­—ç¬¦éƒ½å¯ä»¥ä½œä¸ºç²¾ç¡®å­—ç¬¦
    [a-z]             a åˆ° z ä¹‹é—´çš„ä»»æ„ä¸€ä¸ªå­—ç¬¦éƒ½å¯ä»¥ä½œä¸ºç²¾ç¡®å­—ç¬¦
    [^â€¦]              é™¤äº†åŒ…å«åœ¨æ‹¬å·ä¸­çš„ä»»æ„å­—ç¬¦ï¼Œå…¶å®ƒå­—ç¬¦éƒ½å¯ä»¥ä½œä¸ºç²¾ç¡®å­—ç¬¦


## ==âš¡ alias å‘½ä»¤åˆ«å

ä½ å¯ä»¥ä¸ºç»å¸¸ä½¿ç”¨çš„å‘½ä»¤è®¾ç½®ä¸€ä¸ªåˆ«åã€‚å°è¯•ä¸‹åˆ—ä¾‹å­

    $ alias la=â€™ls -laâ€™

ç°åœ¨ la æ˜¯ ls -al çš„ç®€å†™å½¢å¼ï¼Œå¹¶åŒæ ·ä¼šä»¥é•¿åˆ—è¡¨å½¢å¼åˆ—å‡ºæ‰€æœ‰çš„æ–‡ä»¶ã€‚

ä½ å¯ä»¥ä½¿ç”¨ alias æ¥åˆ—å‡ºæ‰€æœ‰çš„åˆ«åã€‚

    $ alias
    ...
    alias la=â€™ls -laâ€™

ä½ å¯ä»¥ä½¿ç”¨ type æ¥ç¡®è®¤å‘½ä»¤çš„å‡†ç¡®è·¯å¾„æˆ–ç±»å‹ã€‚

    $ type ls
    ls is hashed (/bin/ls)
    $ type la
    la is aliased to ls -la
    $ type echo
    echo is a shell builtin
    $ type file
    file is /usr/bin/file

ls åœ¨æœ€è¿‘è¢«ä½¿ç”¨è¿‡ï¼Œè€Œ file æ²¡æœ‰ï¼Œå› æ­¤ ls æ ‡è®°ä¸º hashed ï¼ˆè¢«å½•å…¥å“ˆå¸Œè¡¨ï¼‰ï¼Œå³ shell æœ‰ä¸€ä¸ªå†…éƒ¨çš„è®°å½•ç”¨æ¥å¿«é€Ÿè®¿é—® ls æ‰€å¤„çš„ä½ç½®ã€‚


## ==âš¡ symbolic link

è½¯è¿æ¥æ˜¯ Linux ä¸­ä¸€ä¸ªå¸¸ç”¨å‘½ä»¤ï¼Œå®ƒçš„åŠŸèƒ½æ˜¯ä¸ºæŸä¸€ä¸ªæ–‡ä»¶åœ¨å¦å¤–ä¸€ä¸ªä½ç½®å»ºç«‹ä¸€ä¸ªåŒä¸çš„é“¾æ¥ã€‚

å…·ä½“ç”¨æ³•æ˜¯ï¼š

    ln -s æºæ–‡ä»¶ ç›®æ ‡æ–‡ä»¶ã€‚ 

å½“ æˆ‘ä»¬éœ€è¦åœ¨ä¸åŒçš„ç›®å½•ï¼Œç”¨åˆ°ç›¸åŒçš„æ–‡ä»¶æ—¶ï¼Œæˆ‘ä»¬ä¸éœ€è¦åœ¨æ¯ä¸€ä¸ªéœ€è¦çš„ç›®å½•ä¸‹éƒ½æ”¾ä¸€ä¸ªå¿…é¡»ç›¸åŒçš„æ–‡ä»¶ï¼Œæˆ‘ä»¬åªè¦åœ¨å…¶å®ƒçš„ ç›®å½•ä¸‹ç”¨lnå‘½ä»¤é“¾æ¥ï¼ˆlinkï¼‰å°±å¯ä»¥ï¼Œä¸å¿…é‡å¤çš„å ç”¨ç£ç›˜ç©ºé—´ã€‚

ä¾‹å¦‚ï¼š

    ln -s /usr/local/mysql/bin/mysql /usr/bin

è¿™æ ·æˆ‘ä»¬å°±å¯¹/usr/binç›®å½•ä¸‹çš„mysqlå‘½ä»¤åˆ›å»ºäº†è½¯è¿æ¥ 

ã€ç¡¬è¿æ¥ã€‘

ç¡¬è¿æ¥æŒ‡é€šè¿‡ç´¢å¼•èŠ‚ç‚¹æ¥è¿›è¡Œè¿æ¥ã€‚åœ¨ Linux æ–‡ä»¶ç³»ç»Ÿä¸­ï¼Œä¿å­˜åœ¨ç£ç›˜åˆ†åŒºä¸­çš„æ–‡ä»¶ä¸ç®¡æ˜¯ä»€ä¹ˆç±»å‹éƒ½ç»™å®ƒåˆ†é…ä¸€ä¸ªç¼–å·ï¼Œç§°ä¸ºç´¢å¼•èŠ‚ç‚¹å·(Inode Index)ã€‚åœ¨Linuxä¸­ï¼Œå¤šä¸ªæ–‡ä»¶åæŒ‡å‘åŒä¸€ç´¢å¼•èŠ‚ç‚¹æ˜¯å­˜åœ¨çš„ã€‚ä¸€èˆ¬è¿™ç§è¿æ¥å°±æ˜¯ç¡¬è¿æ¥ã€‚ç¡¬è¿æ¥çš„ä½œç”¨æ˜¯å…è®¸ä¸€ä¸ªæ–‡ä»¶æ‹¥æœ‰å¤šä¸ªæœ‰æ•ˆè·¯å¾„åï¼Œè¿™æ ·ç”¨æˆ·å°±å¯ä»¥å»ºç«‹ç¡¬è¿æ¥åˆ°é‡è¦æ–‡ä»¶ï¼Œä»¥é˜²æ­¢â€œè¯¯åˆ â€çš„åŠŸèƒ½ã€‚å…¶åŸå› å¦‚ä¸Šæ‰€è¿°ï¼Œå› ä¸ºå¯¹åº”è¯¥ç›®å½•çš„ç´¢å¼•èŠ‚ç‚¹æœ‰ä¸€ä¸ªä»¥ä¸Šçš„è¿æ¥ã€‚åªåˆ é™¤ä¸€ä¸ªè¿æ¥å¹¶ä¸å½±å“ç´¢å¼•èŠ‚ç‚¹æœ¬èº«å’Œå…¶å®ƒçš„è¿æ¥ï¼Œåªæœ‰å½“æœ€åä¸€ä¸ªè¿æ¥è¢«åˆ é™¤åï¼Œæ–‡ä»¶çš„æ•°æ®å—åŠç›®å½•çš„è¿æ¥æ‰ä¼šè¢«é‡Šæ”¾ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œæ–‡ä»¶çœŸæ­£åˆ é™¤çš„æ¡ä»¶æ˜¯ä¸ä¹‹ç›¸å…³çš„æ‰€æœ‰ç¡¬è¿æ¥æ–‡ä»¶å‡è¢«åˆ é™¤ã€‚

ã€è½¯è¿æ¥ã€‘

å¦å¤–ä¸€ç§è¿æ¥ç§°ä¹‹ä¸ºç¬¦å·è¿æ¥ï¼ˆSymbolic Linkï¼‰ï¼Œä¹Ÿå«è½¯è¿æ¥ã€‚è½¯é“¾æ¥æ–‡ä»¶æœ‰ç±»ä¼¼äº Windows çš„å¿«æ·æ–¹å¼ã€‚å®ƒå®é™…ä¸Šæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æ–‡ä»¶ã€‚åœ¨ç¬¦å·è¿æ¥ä¸­ï¼Œæ–‡ä»¶å®é™…ä¸Šæ˜¯ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ï¼Œå…¶ä¸­åŒ…å«çš„æœ‰å¦ä¸€æ–‡ä»¶çš„ä½ç½®ä¿¡æ¯ã€‚

ä½¿ç”¨æ–¹å¼

åˆ›å»ºè½¯é“¾æ¥

    ln  -s  [æºæ–‡ä»¶æˆ–ç›®å½•]  [ç›®æ ‡æ–‡ä»¶æˆ–ç›®å½•]

ä¾‹ï¼š

å½“å‰è·¯å¾„åˆ›å»º test å¼•å‘ /var/www/test æ–‡ä»¶å¤¹ 

    ln â€“s  /var/www/test  test

åˆ›å»º/var/test å¼•å‘/var/www/test æ–‡ä»¶å¤¹ 

    ln â€“s  /var/www/test   /var/test

åˆ é™¤è½¯é“¾æ¥

å’Œåˆ é™¤æ™®é€šçš„æ–‡ä»¶æ˜¯ä¸€æ ·çš„ï¼Œåˆ é™¤éƒ½æ˜¯ä½¿ç”¨ rm æ¥è¿›è¡Œæ“ä½œ

ä¾‹ï¼š

åˆ é™¤test

    rm â€“rf test

ä¿®æ”¹è½¯é“¾æ¥

    ln â€“snf  [æ–°çš„æºæ–‡ä»¶æˆ–ç›®å½•]  [ç›®æ ‡æ–‡ä»¶æˆ–ç›®å½•]

è¿™å°†ä¼šä¿®æ”¹åŸæœ‰çš„é“¾æ¥åœ°å€ä¸ºæ–°çš„åœ°å€

ä¾‹å¦‚ï¼š

åˆ›å»ºä¸€ä¸ªè½¯é“¾æ¥

    ln â€“s  /var/www/test   /var/test

ä¿®æ”¹æŒ‡å‘çš„æ–°è·¯å¾„

    ln â€“snf  /var/www/test1   /var/test

å¸¸ç”¨å‚æ•°ï¼š

ã€€ã€€-f : é“¾ç»“æ—¶å…ˆå°†ä¸ dist åŒæ¡£åçš„æ¡£æ¡ˆåˆ é™¤
ã€€ã€€-d : å…è®¸ç³»ç»Ÿç®¡ç†è€…ç¡¬é“¾ç»“è‡ªå·±çš„ç›®å½•
ã€€ã€€-i : åœ¨åˆ é™¤ä¸ dist åŒæ¡£åçš„æ¡£æ¡ˆæ—¶å…ˆè¿›è¡Œè¯¢é—®
ã€€ã€€-n : åœ¨è¿›è¡Œè½¯è¿ç»“æ—¶ï¼Œå°† dist è§†ä¸ºä¸€èˆ¬çš„æ¡£æ¡ˆ
ã€€ã€€-s : è¿›è¡Œè½¯é“¾ç»“(symbolic link)
ã€€ã€€-v : åœ¨è¿ç»“ä¹‹å‰æ˜¾ç¤ºå…¶æ¡£å
ã€€ã€€-b : å°†åœ¨é“¾ç»“æ—¶ä¼šè¢«è¦†å†™æˆ–åˆ é™¤çš„æ¡£æ¡ˆè¿›è¡Œå¤‡ä»½
ã€€ã€€-S SUFFIX : å°†å¤‡ä»½çš„æ¡£æ¡ˆéƒ½åŠ ä¸Š SUFFIX çš„å­—å°¾
ã€€ã€€-V METHOD : æŒ‡å®šå¤‡ä»½çš„æ–¹å¼
ã€€ã€€--help : æ˜¾ç¤ºè¾…åŠ©è¯´æ˜
ã€€ã€€--version : æ˜¾ç¤ºç‰ˆæœ¬

## ==âš¡ bash & text æ–‡æœ¬å¤„ç†

åœ¨ç±» Unix çš„å·¥ä½œç¯å¢ƒä¸­ï¼Œæ–‡æœ¬å¤„ç†æ˜¯é€šè¿‡ä½¿ç”¨ç®¡é“ç»„æˆçš„æ ‡å‡†æ–‡æœ¬å¤„ç†å·¥å…·é“¾å®Œæˆçš„ã€‚è¿™æ˜¯å¦ä¸€ä¸ªé‡è¦çš„ Unix åˆ›æ–°ã€‚

- æ²¡æœ‰ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼ï¼š
    â€“ cat   è¿æ¥æ–‡ä»¶å¹¶è¾“å‡ºå…¨éƒ¨çš„å†…å®¹ã€‚
    â€“ tac   è¿æ¥æ–‡ä»¶å¹¶åå‘è¾“å‡ºã€‚
    â€“ cut   é€‰æ‹©è¡Œçš„ä¸€éƒ¨åˆ†å¹¶è¾“å‡ºã€‚
    â€“ head  è¾“å‡ºæ–‡ä»¶çš„å¼€å¤´ã€‚
    â€“ tail  è¾“å‡ºæ–‡ä»¶çš„æœ«å°¾ã€‚
    â€“ sort  å¯¹æ–‡æœ¬æ–‡ä»¶çš„è¡Œè¿›è¡Œæ’åºã€‚
    â€“ uniq  ä»å·²æ’åºçš„æ–‡ä»¶ä¸­ç§»é™¤ç›¸åŒçš„è¡Œã€‚
    â€“ tr    è½¬æ¢æˆ–åˆ é™¤å­—ç¬¦ã€‚
    â€“ diff  å¯¹æ–‡ä»¶çš„è¡Œè¿›è¡Œå¯¹æ¯”ã€‚
- ä½¿ç”¨åŸºç¡€çš„æ­£åˆ™è¡¨è¾¾å¼ï¼ˆBRE ï¼‰ï¼š
    â€“ grep  åŒ¹é…æ»¡è¶³æ­£åˆ™è§„åˆ™æ¨¡æ¿ pattern çš„æ–‡æœ¬ã€‚
    â€“ ed    æ˜¯ä¸€ä¸ªåŸå§‹è¡Œç¼–è¾‘å™¨ã€‚
    â€“ sed   æ˜¯ä¸€ä¸ªæµç¼–è¾‘å™¨ã€‚
    â€“ vim   æ˜¯ä¸€ä¸ªå±å¹•ç¼–è¾‘å™¨ã€‚
    â€“ emacs æ˜¯ä¸€ä¸ªå±å¹•ç¼–è¾‘å™¨ã€‚ï¼ˆæœ‰äº›æ‰©å±•çš„ BRE ï¼‰
- ä½¿ç”¨æ‰©å±•çš„æ­£åˆ™è¡¨è¾¾å¼ï¼ˆERE ï¼‰ï¼š
    â€“ egrep åŒ¹é…æ»¡è¶³å¤šä¸ª pattern çš„æ–‡æœ¬ã€‚
    â€“ awk   è¿›è¡Œç®€å•çš„æ–‡æœ¬å¤„ç†ã€‚
    â€“ tcl(3tcl) å¯ä»¥è¿›è¡Œä»»ä½•ä½ æƒ³å¾—åˆ°çš„æ–‡æœ¬å¤„ç†ï¼šå‚è§ re_syntax(3) ã€‚ç»å¸¸ä¸ tk(3tk) ä¸€èµ·ä½¿ç”¨ã€‚
    â€“ perl  å¯ä»¥è¿›è¡Œä»»ä½•ä½ æƒ³å¾—åˆ°çš„æ–‡æœ¬å¤„ç†ã€‚å‚è§ perlre  ã€‚
    â€“ pcregrep è½¯ä»¶åŒ…ä¸­çš„ pcregrep  å¯ä»¥åŒ¹é…æ»¡è¶³ Perl å…¼å®¹æ­£åˆ™è¡¨è¾¾å¼ï¼ˆPCREï¼‰ æ¨¡å¼çš„æ–‡æœ¬ã€‚
    â€“ å¸¦æœ‰ re æ¨¡å—çš„ python å¯ä»¥è¿›è¡Œä»»ä½•ä½ æƒ³å¾—åˆ°çš„æ–‡æœ¬å¤„ç†ã€‚å‚è§â€œ/usr/share/doc/python/html/index.htmlâ€ã€‚

å¦‚æœä½ ä¸ç¡®å®šè¿™äº›å‘½ä»¤ç©¶ç«Ÿåšäº†ä»€ä¹ˆï¼Œè¯·ä½¿ç”¨ man command æ¥è‡ªå·±æŠŠå®ƒææ¸…æ¥šå§ã€‚

æ³¨æ„:
æ’åºçš„é¡ºåºå’Œè¡¨è¾¾å¼çš„èŒƒå›´å–å†³äºè¯­è¨€ç¯å¢ƒã€‚å¦‚æœä½ æƒ³è¦è·å¾—ä¸€ä¸ªå‘½ä»¤çš„ä¼ ç»Ÿè¡Œä¸ºï¼Œå¯ä»¥åœ¨å‘½ä»¤ä¹‹å‰ä½¿ç”¨â€œLANG=Câ€
è®© C è¯­è¨€ç¯å¢ƒä»£æ›¿ UTF-8ã€‚


æ­£åˆ™è¡¨è¾¾å¼è¢«ä½¿ç”¨åœ¨è®¸å¤šæ–‡æœ¬å¤„ç†å·¥å…·ä¸­ã€‚å®ƒä»¬ç±»ä¼¼ shell çš„é€šé…ç¬¦ï¼Œä½†æ›´åŠ å¤æ‚å’Œå¼ºå¤§ã€‚æ­£åˆ™è¡¨è¾¾å¼æè¿°è¦åŒ¹é…çš„æ¨¡å¼ï¼Œå®ƒæ˜¯ç”±æ–‡æœ¬å­—ç¬¦å’Œå…ƒå­—ç¬¦æ„æˆçš„ã€‚ å…ƒå­—ç¬¦ä»…ä»…æ˜¯å¸¦æœ‰ç‰¹æ®Šå«ä¹‰çš„å­—ç¬¦ã€‚å®ƒä»¬æœ‰ä¸¤ç§ä¸»è¦çš„å½¢å¼ï¼ŒBRE å’Œ ERE ï¼Œä½¿ç”¨å“ªç§å–å†³äºä¸Šè¿°çš„æ–‡æœ¬å·¥å…·ã€‚

emacs ä¸­çš„æ­£åˆ™è¡¨è¾¾å¼åŸºæœ¬ä¸Šæ˜¯ BRE ä½†å«æœ‰ ERE ä¸­çš„å…ƒå­—ç¬¦ + å’Œ ?ã€‚å› æ­¤ï¼Œåœ¨ emacs ä¸­æ²¡å¿…è¦ä½¿ç”¨ \ æ¥è½¬ä¹‰å®ƒä»¬ã€‚

grep å¯ä»¥ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ¥è¿›è¡Œæ–‡æœ¬æœç´¢ã€‚

    BRE                     ERE                æ­£åˆ™è¡¨è¾¾å¼çš„æè¿°
    \ . [ ] ^ $ *           \ . [ ] ^ $ *      é€šç”¨çš„å…ƒå­—ç¬¦
    \+ \? \( \) \{ \} \|                       BRE ç‹¬æœ‰çš„ \ è½¬ä¹‰å…ƒå­—ç¬¦
                            + ? ( ) { } |      ERE ç‹¬æœ‰çš„ä¸éœ€è¦ \ è½¬ä¹‰çš„å…ƒå­—ç¬¦
    c                       c                  åŒ¹é…éå…ƒå­—ç¬¦ c 
    \c                      \c                 åŒ¹é…ä¸€ä¸ªå­—é¢æ„ä¹‰ä¸Šçš„å­—ç¬¦ c ï¼Œå³ä½¿ c æœ¬èº«æ˜¯å…ƒå­—ç¬¦
    .                       .                  åŒ¹é…ä»»æ„å­—ç¬¦ï¼ŒåŒ…æ‹¬æ¢è¡Œç¬¦
    ^                       ^                  å­—ç¬¦ä¸²çš„å¼€å§‹ä½ç½®
    $                       $                  å­—ç¬¦ä¸²çš„ç»“æŸä½ç½®
    \<                      \<                 å•è¯çš„å¼€å§‹ä½ç½®
    \>                      \>                 å•è¯çš„ç»“æŸä½ç½®
    [abcâ€¦]                  [abcâ€¦]             åŒ¹é…åœ¨ abc... ä¸­çš„ä»»æ„å­—ç¬¦
    [^abcâ€¦]                 [^abcâ€¦]            åŒ¹é…é™¤äº† abc... ä¸­çš„ä»»æ„å­—ç¬¦
    r*                      r*                 åŒ¹é…é›¶ä¸ªæˆ–å¤šä¸ª r 
    r\+                     r+                 åŒ¹é…ä¸€ä¸ªæˆ–å¤šä¸ª r 
    r\?                     r?                 åŒ¹é…é›¶ä¸ªæˆ–ä¸€ä¸ª r 
    r1\|r2                  r1|r2              åŒ¹é…ä¸€ä¸ª r1 æˆ– r2 
    \(r1\|r2\)              (r1|r2)            åŒ¹é…ä¸€ä¸ª r1 æˆ– r2 ï¼Œå¹¶ä½œä¸ºæ‹¬å·å†…çš„æ­£åˆ™è¡¨è¾¾å¼

    Table 1.24: BRE å’Œ ERE ä¸­çš„å…ƒå­—ç¬¦

ç¤ºä¾‹ï¼Œä» GPL åè®®æ–‡ä»¶ä¸­æŸ¥æ‰¾å†…å®¹ï¼š

    $ egrep â€™GNU.*LICENSE|Yoyodyneâ€™ /usr/share/common-licenses/GPL
    GNU GENERAL PUBLIC LICENSE
    GNU GENERAL PUBLIC LICENSE
    Yoyodyne, Inc., hereby disclaims all copyright interest in the program


å¯¹äºæ›¿æ¢è¡¨è¾¾å¼ï¼Œä¸€äº›å­—ç¬¦æœ‰ç‰¹æ®Šçš„å«ä¹‰ã€‚

    æ›¿æ¢è¡¨è¾¾å¼    æ›¿æ¢è¡¨è¾¾å¼æ›¿æ¢çš„æ–‡æœ¬
    &            æ­£åˆ™è¡¨è¾¾å¼æ‰€åŒ¹é…çš„å†…å®¹ï¼ˆåœ¨ emacs ä¸­ä½¿ç”¨ \& ï¼‰
    \n           å‰ n ä¸ªæ‹¬å·çš„æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…çš„å†…å®¹ï¼ˆâ€œnâ€æ˜¯æ•°å­—ï¼‰
    Table 1.25: æ›¿æ¢è¡¨è¾¾å¼

å¯¹ Perl æ›¿æ¢å­—ç¬¦ä¸²æ¥è¯´ï¼Œåº”ä½¿ç”¨ $& è€Œé &ï¼Œåº”ä½¿ç”¨ $n è€Œé \nã€‚

    $ echo zzz1abc2efg3hij4 | 
    sed -e â€™s/\(1[a-z]*\)[0-9]*\(.*\)$/=&=/â€™
    zzz=1abc2efg3hij4=

    $ echo zzz1abc2efg3hij4 | \
    sed -e â€™s/\(1[a-z]*\)[0-9]*\(.*\)$/\2===\1/â€™
    zzzefg3hij4===1abc
    
    $ echo zzz1abc2efg3hij4 | \
    perl -pe â€™s/(1[a-z]*)[0-9]*(.*)$/$2===$1/â€™
    zzzefg3hij4===1abc
    
    $ echo zzz1abc2efg3hij4 | \
    perl -pe â€™s/(1[a-z]*)[0-9]*(.*)$/=$&=/â€™
    zzz=1abc2efg3hij4=

ed å‘½ä»¤å¯ä»¥åœ¨â€œfileâ€ä¸­å°†æ‰€æœ‰çš„â€œFROM_REGEXâ€æ›¿æ¢æˆâ€œTO_TEXTâ€ã€‚

    $ ed file <<EOF
    ,s/FROM_REGEX/TO_TEXT/g
    w
    q
    EOF

sed å‘½ä»¤å¯ä»¥åœ¨ file ä¸­å°†æ‰€æœ‰çš„ FROM_REGEX æ›¿æ¢æˆ TO_TEXT ã€‚

    $ sed -i -e â€™s/FROM_REGEX/TO_TEXT/gâ€™ file

vim å‘½ä»¤å¯ä»¥é€šè¿‡ä½¿ç”¨ ex å‘½ä»¤åœ¨ file ä¸­å°†æ‰€æœ‰çš„ FROM_REGEX æ›¿æ¢æˆ TO_TEXT ã€‚

    $ vim â€™+%s/FROM_REGEX/TO_TEXT/gcâ€™ â€™+wâ€™ â€™+qâ€™ file

æç¤º ä¸Šé¢çš„ c æ ‡å¿—å¯ä»¥ç¡®ä¿åœ¨æ¯æ¬¡æ›¿æ¢æ—¶éƒ½è¿›è¡Œäº¤äº’å¼çš„ç¡®è®¤ã€‚

å¤šä¸ªæ–‡ä»¶ï¼ˆ file1 ï¼Œ file2 å’Œ file3 ï¼‰å¯ä»¥ä½¿ç”¨ vim æˆ– perl é€šè¿‡æ­£åˆ™è¡¨è¾¾å¼è¿›è¡Œç±»ä¼¼çš„å¤„ç†ã€‚

    $ vim â€™+argdo %s/FROM_REGEX/TO_TEXT/ge|updateâ€™ â€™+qâ€™ file1 file2 file3

æç¤º ä¸Šé¢çš„ e æ ‡å¿—æ˜¯ä¸ºäº†é˜²æ­¢ No match é”™è¯¯ä¸­æ–­æ›¿æ¢ã€‚

    $ perl -i -p -e â€™s/FROM_REGEX/TO_TEXT/g;â€™ file1 file2 file3

åœ¨ perl ä¾‹å­ä¸­,  -i  æ˜¯åœ¨æ¯ä¸€ä¸ªç›®æ ‡æ–‡ä»¶çš„åŸå¤„ç¼–è¾‘ï¼Œ -p  æ˜¯è¡¨ç¤ºå¾ªç¯æ‰€æœ‰ç»™å®šçš„æ–‡ä»¶ã€‚

æç¤º ä½¿ç”¨å‚æ•°â€œ-i.bakâ€ä»£æ›¿â€œ-iâ€ï¼Œå¯ä»¥åœ¨æ–‡ä»¶ååæ·»åŠ â€œ.bakâ€å†ä¿å­˜ã€‚å¯¹äºå¤æ‚çš„æ›¿æ¢ï¼Œè¿™ä½¿å¾—ä»é”™è¯¯ä¸­æ¢å¤å˜å¾—å®¹æ˜“ã€‚


Awk ç»å¸¸è¢«ç”¨æ¥ä»è¿™ç§ç±»å‹çš„æ–‡ä»¶ä¸­æå–æ•°æ®ã€‚ä¸‹é¢æœ‰ä¸€ä¸ªæ–‡æœ¬æ–‡ä»¶ DPLï¼Œé‡Œé¢å«æœ‰ 2004 å¹´ä»¥å‰ Debian é¡¹ç›®çš„é¢†å¯¼è€…åå­—å’Œèµ·å§‹æ—¥æœŸï¼Œå¹¶ä»¥ç©ºæ ¼åˆ†éš”ã€‚

    Ian Murdock August 1993
    Bruce Perens April 1996
    Ian Jackson January 1998
    Wichert Akkerman January 1999
    Ben Collins April 2001
    Bdale Garbee April 2002
    Martin Michlmayr March 2003

æç¤º å‚è§ Debian ç®€å²è·å–æœ€æ–°çš„ Debian é¢†å¯¼é˜¶å±‚å†å²ã€‚

    $ awk â€™{ print $3 }â€™ <DPL # month started
    August
    April
    January
    January
    April
    April
    March

    $ awk â€™($1==â€Ianâ€) { print }â€™ <DPL # DPL called Ian
    Ian Murdock August 1993
    Ian Jackson January 1998

    $ awk â€™($2==â€Perensâ€) { print $3,$4 }â€™ <DPL # When Perens started
    April 1996


Shell ä¾‹å¦‚ Bash ä¹Ÿå¯ä»¥ç”¨æ¥åˆ†æè¿™ç§æ–‡ä»¶ã€‚

    $ while read first last month year; do
    echo $month
    done <DPL
    ... ç¬¬ä¸€ä¸ª AWK ä¾‹å­çš„ä¸€äº›è¾“å‡º


å†…å»ºå‘½ä»¤ read ä½¿ç”¨ $IFS ï¼ˆå†…éƒ¨åŸŸåˆ†éš”ç¬¦ï¼‰ä¸­çš„å­—ç¬¦æ¥å°†è¡Œåˆ†éš”æˆå¤šä¸ªå•è¯ã€‚å¦‚æœä½ å°† $IFS æ”¹å˜ä¸º : ï¼Œä½ å¯ä»¥å¾ˆå¥½åœ°ä½¿ç”¨ shell æ¥åˆ†æ /etc/passwdã€‚

    $ oldIFS=â€$IFSâ€ # save old value
    $ IFS=â€™:â€™
    $ while read user password uid gid rest_of_line; do
    if [ â€$userâ€ = â€bozoâ€ ]; then
    echo â€$userâ€™s ID is $uidâ€
    fi
    done < /etc/passwd
    bozoâ€™s ID is 1000

    $ IFS=â€$oldIFSâ€ # restore old value

å¦‚æœè¦ç”¨ Awk åšåˆ°ç›¸åŒçš„äº‹ï¼Œä½¿ç”¨ FS=â€™:â€™ æ¥è®¾ç½®åŸŸåˆ†éš”ç¬¦ã€‚IFS ä¹Ÿè¢« shell ç”¨æ¥åˆ†å‰²å‚æ•°æ‰©å±•ã€å‘½ä»¤æ›¿æ¢å’Œç®—æœ¯æ‰©å±•çš„ç»“æœã€‚è¿™ä¸ä¼šå‡ºç°åœ¨åŒå¼•å·æˆ–å•å¼•å·ä¸­ã€‚IFS çš„é»˜è®¤å€¼ä¸º < ç©ºæ ¼ >ã€`<tab>` å’Œ < æ¢è¡Œç¬¦ >ã€‚è¯·è°¨æ…ä½¿ç”¨ shell çš„ IFS æŠ€å·§ã€‚å½“ shell å°†è„šæœ¬çš„ä¸€éƒ¨åˆ†è§£é‡Šä¸ºå¯¹å®ƒçš„è¾“å…¥æ—¶ï¼Œä¼šå‘ç”Ÿä¸€äº›å¥‡æ€ªçš„äº‹ã€‚

    $ IFS=â€:,â€ # use â€:â€ and â€,â€ as IFS
    $ echo IFS=$IFS, IFS=â€$IFSâ€ # echo is a Bash builtin
    IFS= , IFS=:,
    $ date -R # just a command output
    Sat, 23 Aug 2003 08:30:15 +0200
    $ echo $(date -R) # sub shell --> input to main shell
    Sat 23 Aug 2003 08 30 36 +0200
    $ unset IFS # reset IFS to the default
    $ echo $(date -R)
    Sat, 23 Aug 2003 08:30:50 +0200


## ==âš¡ bash nohup jobs &

Linux ä»»åŠ¡å‰åå°çš„åˆ‡æ¢ï¼Œå‚è€ƒ bash Manual - 7.2 Job Control Builtins

Shell æ”¯æŒä½œç”¨æ§åˆ¶ï¼Œæœ‰ä»¥ä¸‹å‘½ä»¤å®ç°å‰åå°åˆ‡æ¢ï¼š

1. command& è®©å‘½ä»¤è¿›ç¨‹åœ¨åå°è¿è¡Œï¼Œå’Œ && è¿è¡Œå¤šæ¡å‘½ä»¤ä¸åŒ
2. jobs æŸ¥çœ‹åå°è¿è¡Œçš„è¿›ç¨‹
3. fg %n åˆ‡æ¢åå°è¿è¡Œçš„è¿›ç¨‹ n åˆ°å‰å°æ¥
4. bg %n åˆ‡æ¢è¿›ç¨‹ n åˆ°åå°å»
5. kill %n æ€æ­» n ç¼–å·çš„ job ä»»åŠ¡

PS: "n" ä¸º jobs å‘½ä»¤æŸ¥çœ‹åˆ°çš„çº¿ç¨‹ IDï¼Œä¸æ˜¯è¿›ç¨‹ç¼–å·ã€‚

| Ops       | Note
|-----------|--------------------------------------------
| &         | ç”¨åœ¨ä¸€ä¸ªå‘½ä»¤çš„æœ€åï¼Œå¯ä»¥æŠŠè¿™ä¸ªå‘½ä»¤æ”¾åˆ°åå°æ‰§è¡Œ
| Ctrl-Z    | æ­£åœ¨å‰å°æ‰§è¡Œçš„å‘½ä»¤æ—¶æŒ‰ä¸‹ï¼Œå°†å…¶è½¬ç§»ä¸ºåå°æš‚åœæ‰§è¡Œ
| jobs      | æŸ¥çœ‹å½“å‰æœ‰å¤šå°‘åœ¨åå°è¿è¡Œçš„å‘½ä»¤
| fg        | å°†åå°ä¸­çš„å‘½ä»¤è°ƒè‡³å‰å°ç»§ç»­è¿è¡Œï¼Œå¯ä»¥æŒ‡å®š job ID
| bg        | ç»§ç»­æ‰§è¡Œåå°æš‚åœçš„å‘½ä»¤ï¼Œå¯ä»¥æŒ‡å®š job ID
 
å‡è®¾ä½ å‘ç°å‰å°è¿è¡Œçš„ä¸€ä¸ªç¨‹åºéœ€è¦å¾ˆé•¿çš„æ—¶é—´ï¼Œä½†æ˜¯éœ€è¦å¹²å…¶ä»–çš„äº‹æƒ…ï¼Œå°±å¯ä»¥ç”¨ Ctrl-Z ï¼Œè½¬åˆ°åå°æ‰§è¡Œï¼Œå¯ä»¥çœ‹åˆ°ç³»ç»Ÿæç¤ºï¼š

    [1]+ Stopped /root/bin/rsync.sh

æ–¹æ‹¬å·ä¸­çš„æ•°å­—ä¸º job IDï¼Œç”¨ jobs å‘½ä»¤æŸ¥çœ‹ä»»åŠ¡ã€‚å¯ä»¥ä½¿ç”¨ bg å°†ä»»åŠ¡ç¨‹åºè°ƒåº¦åˆ°åå°æ‰§è¡Œã€‚
è¿™æ ·ï¼Œä½ åœ¨æ§åˆ¶å°ä¸Šå°±åªèƒ½ç­‰å¾…è¿™ä¸ªä»»åŠ¡å®Œæˆäº†ã€‚ 


ä½¿ç”¨ **&** è¡¨ç¤ºåå°è¿è¡Œç¨‹åºï¼Œç­‰æ•ˆ Ctrl-Zã€‚ä½¿ç”¨ **ps** æˆ– **jobs** å‘½ä»¤æŸ¥çœ‹åå°ç¨‹åºï¼Œ**fg** å‘½ä»¤å¯ä»¥å°†ä¸Šä¸€ä¸ªåå°ç¨‹åºå‘¼å”¤åˆ°å‰å°ã€‚

    $ ./my-shell-script.sh &
    $ nohup ./my-shell-script.sh &

Shell æ”¯æŒä½œç”¨æ§åˆ¶ï¼š 

- command& è®©è¿›ç¨‹åœ¨åå°è¿è¡Œï¼›
- jobs æŸ¥çœ‹åå°è¿è¡Œçš„è¿›ç¨‹ï¼›
- fg %n è®©åå°è¿è¡Œçš„è¿›ç¨‹ n å·è¿›ç¨‹åˆ°å‰å°æ¥ï¼›
- bg %n è®©è¿›ç¨‹ n åˆ°åå°è¿è¡Œï¼› 

å¦‚æœï¼ŒæœåŠ¡ç¨‹åºåå°è¿è¡Œæ ‡è®°ä¸º **Stopped**ï¼Œé‚£ä¹ˆå°±éœ€è¦ä½¿ç”¨å…¶å®ƒæ–¹å¼è¿è¡Œã€‚

åœ¨ã€ŠUnix ç¯å¢ƒé«˜çº§ç¼–ç¨‹ã€‹ç¬¬ 9.8 èŠ‚ä½œä¸šæ§åˆ¶ä¸­è®²åˆ°ï¼Œâ€œå¦‚æœåå°ç¨‹åºè¯•å›¾è¯»å–ç»ˆç«¯ï¼Œè¿™å¹¶ä¸æ˜¯ä¸€ä¸ªé”™è¯¯ï¼Œä½†æ˜¯ç»ˆç«¯é©±åŠ¨ç¨‹åºå°†æ£€æµ‹è¿™ç§æƒ…å†µï¼Œå¹¶å‘åå°ä½œä¸šå‘é€ä¸€ä¸ªç‰¹å®šä¿¡å· SIGTTINï¼Œè¯¥ä¿¡å·ä¼šåœæ­¢æ­¤åå°ç¨‹åºï¼Œå¹¶å‘ç”¨æˆ·å‘é€é€šçŸ¥â€ã€‚

è§£å†³æ–¹æ¡ˆ

- åœ¨ç¨‹åºä¸­å»é™¤è¯»ç»ˆç«¯çš„ç›¸å…³ä»£ç ï¼›
- ä½¿ç”¨é‡å®šå‘ **./test_server < /dev/null &**ï¼›
- ä½¿ç”¨ nohupï¼Œ**nohup ./test_server &**, å¿½ç•¥è¯¥ç¨‹åºçš„è¾“å…¥ï¼Œå¹¶å°†è¾“å‡ºè¿½åŠ åˆ° nohup.outã€‚


è¯¦æƒ…è¯·å‚è€ƒè¿™ç¯‡æ–‡ç«  Bg, Fg, &, Ctrl-Z â€“ 5 Examples to Manage Unix Background Jobs
https://www.thegeekstuff.com/2010/05/unix-background-job/

é€šè¿‡ nohup å’Œ & ç¬¦å·åœ¨åå°æ‰§è¡Œå‘½ä»¤åï¼Œå³ä½¿ä½ é€€å‡ºç™»å½•ï¼Œè¿™ä¸ªå‘½ä»¤ä¹Ÿä¼šä¸€ç›´æ‰§è¡Œã€‚ä½†æ˜¯ï¼Œä½ æ— æ³•é‡æ–°è¿æ¥åˆ°è¿™ä¸ªä¼šè¯ï¼Œè¦æƒ³é‡æ–°è¿æ¥åˆ°è¿™ä¸ªä¼šè¯ï¼Œä½ å¯ä»¥ä½¿ç”¨ screen å‘½ä»¤ã€‚

Linux çš„ screen å‘½ä»¤æä¾›äº†åˆ†ç¦»å’Œé‡æ–°è¿æ¥ä¸€ä¸ªä¼šè¯çš„åŠŸèƒ½ã€‚å½“ä½ é‡æ–°è¿æ¥è¿™ä¸ªä¼šè¯çš„æ—¶å€™ï¼Œä½ çš„ç»ˆç«¯å’Œä½ åˆ†ç¦»çš„æ—¶å€™ä¸€æ¨¡ä¸€æ ·ã€‚

è¯¦æƒ…è¯·å‚è€ƒè¿™ç¯‡æ–‡ç«  Screen Command Examples: Get Control of Linux / Unix Terminal
http://www.thegeekstuff.com/2010/07/screen-command-examples/


ä½¿ç”¨ at å‘½ä»¤ï¼Œä½ å¯ä»¥è®©ä¸€ä¸ªå‘½ä»¤åœ¨æŒ‡å®šçš„æ—¥æœŸå’Œæ—¶é—´è¿è¡Œï¼Œä¾‹å¦‚è¦åœ¨æ˜å¤©ä¸Šåˆ10ç‚¹åœ¨åå°æ‰§è¡Œå¤‡ä»½è„šæœ¬ï¼Œæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š

    $ at -f backup.sh 10 am tomorrow

è¯¦æƒ…è¯·å‚è€ƒè¿™ç¯‡æ–‡ç«  Understand at, atq, atrm, batch Commands using 9 Examples
http://www.thegeekstuff.com/2010/06/at-atq-atrm-batch-command-examples/

åœ¨æ‰¹å¤„ç†æ¨¡å¼ä¸‹æ‰§è¡ŒæŸäº›ä»»åŠ¡éœ€è¦å¯ç”¨ä¸€äº›é€‰é¡¹ã€‚ä¸‹é¢çš„æ–‡ç« ä¼šç»™å‡ºè¯¦ç»†è§£é‡Šï¼š.

How To Capture Unix Top Command Output to a File in Readable Format
Unix bc Command Line Calculator in Batch Mode
How To Execute SSH and SCP in Batch Mode (Only when Passwordless login is enabled)


ä½¿ç”¨ watch è¿ç»­åœ°æ‰§è¡Œä¸€ä¸ªå‘½ä»¤

è¦æƒ³æŒ‰ä¸€ä¸ªå›ºå®šçš„é—´éš”ä¸åœåœ°æ‰§è¡Œä¸€ä¸ªå‘½ä»¤ï¼Œå¯ä»¥ä½¿ç”¨watchå‘½ä»¤ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š

    $ watch df -h

æœ¬æ–‡å›ºå®šé“¾æ¥: http://www.cnmiss.cn/?p=441



## ==âš¡ pipe ç®¡é“å‘½ä»¤ç¤ºèŒƒ
- [Shell Mistakes](http://www.greenend.org.uk/rjk/2001/04/shell.html)

ä½¿ç”¨ç®¡é“å‘½ä»¤å¯ä»¥è¿æ¥å¤šä¸ªå…¶å®ƒå‘½ä»¤ï¼Œç¼–å†™å•è¡Œ shell è„šæœ¬ï¼Œå¯ä»¥æ‰§è¡Œç›¸å½“å¤æ‚çš„ä»»åŠ¡ã€‚

å½“ä½¿ç”¨ shell äº¤äº’æ¨¡å¼å˜å¾—å¤ªéº»çƒ¦çš„æ—¶å€™ï¼Œè¯·è€ƒè™‘å†™ä¸€ä¸ª shell è„šæœ¬ï¼Œè„šæœ¬æ–‡ä»¶æ˜¯æŒ‡ç¬¬ä¸€
è¡Œå†…å®¹åŒ…å«æœ‰ä¸‹é¢æ ¼å¼çš„å¯æ‰§è¡Œçš„æ–‡æœ¬æ–‡ä»¶ã€‚

    #!/bin/sh

ç¬¬ä¸€è¡ŒæŒ‡æ˜äº†è¯»å–å¹¶æ‰§è¡Œè¿™ä¸ªæ–‡ä»¶çš„ shell è§£é‡Šå™¨ã€‚è¯»æ‡‚ shell è„šæœ¬çš„æœ€å¥½åŠæ³•æ˜¯å…ˆç†è§£
UNIX ç³»ç»Ÿå¦‚ä½•å·¥ä½œã€‚ä¸åƒ shell äº¤äº’æ¨¡å¼ï¼Œshell è„šæœ¬ä¼šé¢‘ç¹ä½¿ç”¨å‚æ•°ã€æ¡ä»¶å’Œå¾ªç¯ç­‰ã€‚

```sh
#!/bin/sh

find /usr -print             # æ‰¾å‡º /usr ä¸‹çš„æ‰€æœ‰æ–‡ä»¶
seq 1 100                    # æ˜¾ç¤º 1 åˆ° 100
| xargs -n 1 <cmd>           # æŠŠä»ç®¡é“è¿‡æ¥çš„æ¯ä¸€é¡¹ä½œä¸ºå‚æ•°ï¼Œé‡å¤æ‰§è¡Œ cmd å‘½ä»¤
| xargs -n 1 echo            # æŠŠä»ç®¡é“è¿‡æ¥çš„ï¼Œç”¨ç©ºæ ¼éš”å¼€çš„é¡¹ï¼Œåˆ†éš”æˆå¤šè¡Œ
| xargs echo                 # æŠŠä»ç®¡é“è¿‡æ¥çš„æ‰€æœ‰è¡Œåˆå¹¶ä¸ºä¸€è¡Œ
| grep -e <regex_pattern>    # ä»ç®¡é“è¿‡æ¥ï¼ŒåŒ…å«æœ‰ <regex_pattern> çš„è¡Œï¼Œæå–å‡ºæ¥
| grep -v -e <regex_pattern> # æŠŠä»ç®¡é“è¿‡æ¥ï¼Œä¸åŒ…å«æœ‰ <regex_pattern> çš„è¡Œï¼Œæå–å‡ºæ¥
| cut -d: -f3 -              # æŠŠä»ç®¡é“è¿‡æ¥ï¼Œç”¨â€:â€ åˆ†éš”çš„ç¬¬ä¸‰åˆ—æå–å‡ºæ¥ (passwd æ–‡ä»¶ç­‰ã€‚)
| awk â€™{ print $3 }â€™         # æŠŠç”¨ç©ºæ ¼éš”å¼€çš„ç¬¬ä¸‰åˆ—æå–å‡ºæ¥
| awk -Fâ€™\tâ€™ â€™{ print $3 }â€™  # æŠŠç”¨ tab é”®éš”å¼€çš„ç¬¬ä¸‰åˆ—æå–å‡ºæ¥
| col -bx               # åˆ é™¤é€€æ ¼é”®ï¼Œæ‰©å±• tab é”®ä¸ºç©ºæ ¼é”®
| expand -              # æ‰©å±• tab é”®åˆ°ç©ºæ ¼é”®
| sort| uniq            # æ’åºå¹¶åˆ é™¤é‡å¤è¡Œ
| tr â€™A-Zâ€™ â€™a-zâ€™        # å°†å¤§å°å­—æ¯è½¬æ¢ä¸ºå°å†™å­—æ¯
| tr -d â€™\nâ€™            # å°†å¤šè¡Œè¿æ¥ä¸ºä¸€è¡Œ
| tr -d â€™\râ€™            # åˆ é™¤æ¢è¡Œå›è½¦ç¬¦
| sed â€™s/^/# /â€™         # åœ¨æ¯è¡Œè¡Œé¦–å¢åŠ ä¸€ä¸ªâ€#â€ ç¬¦
| sed â€™s/\.ext//gâ€™      # åˆ é™¤â€.extâ€
| sed -n -e 2p          # æ˜¾ç¤ºç¬¬äºŒè¡Œ
| head -n 2 -           # æ˜¾ç¤ºæœ€å‰é¢ä¸¤è¡Œ
| tail -n 2 -           # æ˜¾ç¤ºæœ€åä¸¤è¡Œ
```


## ==âš¡ lsof - List open file

lsof æ˜¯ç³»ç»Ÿç®¡ç†/å®‰å…¨å·¥å…·ï¼Œç”¨æ¥åˆ—å‡ºæ‰“å¼€çš„æ–‡ä»¶ã€‚

Unix ç³»ç»Ÿä¸€åˆ‡çš†æ–‡ä»¶ï¼ŒåŒ…æ‹¬ç½‘ç»œå¥—æ¥å£éƒ½æ˜¯æ–‡ä»¶ï¼Œå¯è§ lsof æœ‰å¤šé‡è¦ã€‚

lsof æ˜¯æœ‰ç€æœ€å¤šå¼€å…³çš„ Linux/Unix å‘½ä»¤ä¹‹ä¸€ï¼Œè®¸å¤šé€‰é¡¹æ”¯æŒä½¿ç”¨ - + å‰ç¼€ã€‚

é€‰é¡¹ä½¿ç”¨ï¼š

  + é»˜è®¤ : æ²¡æœ‰é€‰é¡¹ï¼Œlsof åˆ—å‡ºæ´»è·ƒè¿›ç¨‹çš„æ‰€æœ‰æ‰“å¼€æ–‡ä»¶
  + ç»„åˆ : å°†é€‰é¡¹ç»„åˆåˆ°ä¸€èµ·ï¼Œå¦‚ -abcï¼Œå½“å¿ƒæŸäº›é€‰é¡¹éœ€è¦å‚æ•°
  + -a : ç»“æœè¿›è¡Œâ€œä¸â€è¿ç®—è€Œä¸æ˜¯â€œæˆ–â€
  + -l : åœ¨è¾“å‡ºæ˜¾ç¤ºç”¨æˆ· ID è€Œä¸æ˜¯ç”¨æˆ·å
  + -h : è·å¾—å¸®åŠ©
  + -t : ä»…è·å–è¿›ç¨‹ ID
  + -U : è·å– UNIX å¥—æ¥å£åœ°å€
  + -F : æ ¼å¼åŒ–è¾“å‡ºç»“æœï¼Œå¦‚ -F pcfn æ‰“å° pidã€å‘½ä»¤åã€æ–‡ä»¶æè¿°ç¬¦ã€æ–‡ä»¶å

```sh
# lsof -i[46] [protocol][@hostname|hostaddr][:service|port]
$ sudo lsof -i
$ sudo lsof -i :22
$ sudo lsof -i @localhost:80
$ sudo lsof -i -sTCP:LISTEN

# list user opening files
$ awk -F: '{ print $1, " - ", $5 }' /etc/passwd
$ sudo lsof -u root  # that root user open
$ sudo lsof -u ^root # that other user open

# list files that 1st process opend
lsof -p $(ps | head -n2 | tail -n1 | awk -F " " '{ print $1 }')
```



## ==âš¡ tmux - Terminal Multiplexer
+ https://danielmiessler.com/study/tmux/
+ https://cloud.tencent.com/developer/article/1526675
+ https://www.man7.org/linux/man-pages/man1/tmux.1.html

Tmux æ˜¯ä¸€ä¸ªç»ˆç«¯å¤ç”¨å™¨ï¼ˆterminal multiplexerï¼‰ï¼Œå®ƒç±»ä¼¼ GNU Screen å¯ä»¥ç®¡ç†ç»ˆç«¯ä¼šè¯ã€‚

å‘½ä»¤è¡Œçš„å…¸å‹ä½¿ç”¨æ–¹å¼æ˜¯ï¼Œæ‰“å¼€ä¸€ä¸ªç»ˆç«¯çª—å£ï¼Œæ‰§è¡Œå‘½ä»¤ï¼Œå®Œæˆå·¥ä½œåå…³é—­çª—å£ç»“æŸä¸è®¡ç®—æœº
çš„äº¤äº’ï¼Œè¿™ç§ä¸´æ—¶çš„äº¤äº’ç§°ä¸º"ä¼šè¯"ï¼ˆsessionï¼‰ã€‚

ä¼šè¯å¼€å§‹åˆ°ç»“æŸè¿™ä¸ªè¿‡ç¨‹çš„ä¸€ä¸ªé‡è¦ç‰¹ç‚¹æ˜¯ï¼Œå®¢æˆ·ç«¯çª—å£ä¸æœåŠ¡ç«¯ç»ˆç«¯æœåŠ¡è¿›ç¨‹è¿æ¥åœ¨ä¸€èµ·ã€‚
æ‰“å¼€çª—å£ï¼Œä¼šè¯å¼€å§‹ï¼Œç”¨æˆ·è¾“å…¥æ•°æ®ï¼ŒæœåŠ¡ç«¯å“åº”ç”¨æˆ·ï¼›å…³é—­çª—å£ï¼Œä¼šè¯ç»“æŸï¼ŒæœåŠ¡è¿›ç¨‹
éšä¹‹ç»ˆæ­¢ï¼Œä¸ç®¡æœ‰æ²¡æœ‰è¿è¡Œå®Œã€‚

å…¸å‹ä¾‹å­å°±æ˜¯ SSH ç™»å½•è¿œç¨‹è®¡ç®—æœºï¼Œæ‰“å¼€ä¸€ä¸ªè¿œç¨‹çª—å£æ‰§è¡Œå‘½ä»¤ã€‚å¦‚æœæ­¤æ—¶ç½‘ç»œçªç„¶æ–­çº¿ï¼Œ
å†æ¬¡ç™»å½•å°±ä¸æ˜¯ä¸Šä¸€æ¬¡æ‰§è¡Œçš„å‘½ä»¤ï¼Œå› ä¸ºä¸Šä¸€æ¬¡ SSH ä¼šè¯å·²ç»ç»ˆæ­¢ï¼Œç›¸å…³è¿›ç¨‹ä¹Ÿéšä¹‹ç»ˆæ­¢ã€‚

ä¸ºç»ˆç«¯åŠ å…¥ä¼šè¯ç®¡ç†å¯ä»¥æ–¹ä¾¿æ—¶é—´ç¢ç‰‡åŒ–çš„å·¥ä½œï¼Œé€€å‡ºå®¢æˆ·ç«¯è€Œä¸ç”¨å…³é—­æœåŠ¡ç«¯ï¼Œä¼šè¯ä¸
å®¢æˆ·çª—å£å¯ä»¥"è§£ç»‘"ï¼šçª—å£å…³é—­æ—¶ï¼Œä¼šè¯å¹¶ä¸ç»ˆæ­¢ï¼Œè€Œæ˜¯ç»§ç»­è¿è¡Œï¼Œç­‰åˆ°ä»¥åéœ€è¦çš„æ—¶å€™ï¼Œ
å†è®©ä¼šè¯é‡æ–°"ç»‘å®š"ä¸€ä¸ªæ–°çš„å®¢æˆ·ç«¯çª—å£ã€‚


Tmux æä¾›ä¸°å¯Œçš„å¿«æ·é”®æ“ä½œï¼Œæ¯ä¸ª Tmux ç¨‹åºç•Œé¢åŒ…å«å¤šä¸ª Windowï¼Œå­å±‚çº§å«å¤šä¸ª Panelï¼Œ
å’Œ Vim ä¸­çš„ä¸€ä¸ª Panel åŒ…å«å¤šä¸ª Window ç»“æ„ä¸€æ ·ï¼Œåªæ˜¯å«æ³•ä¸åŒã€‚

ï¼ˆ1ï¼‰å®ƒå…è®¸åœ¨å•ä¸ªè¿›ç¨‹ç•Œé¢åŒæ—¶è®¿é—®å¤šä¸ªä¼šè¯ã€‚åŒæ—¶è¿è¡Œå¤šä¸ªç»ˆç«¯ç¨‹åºã€‚
ï¼ˆ2ï¼‰å®ƒå¯ä»¥ä¸´æ—¶è„±ç¦»ä¼šè¯ï¼Œç„¶åå†è®©æ–°çª—å£"æ¥å…¥"å·²ç»å­˜åœ¨çš„ä¼šè¯ã€‚
ï¼ˆ3ï¼‰å®ƒå…è®¸æ¯ä¸ªä¼šè¯æœ‰å¤šä¸ªè¿æ¥çª—å£ï¼Œå› æ­¤å¯ä»¥å¤šäººå®æ—¶å…±äº«ä¼šè¯ã€‚
ï¼ˆ4ï¼‰å®ƒè¿˜æ”¯æŒçª—å£ä»»æ„çš„å‚ç›´å’Œæ°´å¹³æ‹†åˆ†ã€‚

ç±»ä¼¼çš„ç»ˆç«¯å¤ç”¨å™¨è¿˜æœ‰ GNU Screenã€‚Tmux ä¸å®ƒåŠŸèƒ½ç›¸ä¼¼ï¼Œä½†æ˜¯æ›´æ˜“ç”¨ï¼Œä¹Ÿæ›´å¼ºå¤§ã€‚ä½†æ˜¯
ä¸æ”¯æŒæ»šå±å†…å®¹å›çœ‹ï¼Œå¤åˆ¶ç²˜è´´æ“ä½œæ¯”è¾ƒå¤æ‚ï¼Œè¿™å¤šå°‘æœ‰ç‚¹ä¸ä¾¿ã€‚

Basically, tmux sessions have windows, and windows have panes. Hereâ€™s how I 
conceptualize the structure.

  + `Sessions` are for an overall theme, such as work, or experimentation, or sysadmin.
  + `Windows` are for projects within that theme.
    So perhaps within your experimentation session you have a window titled noderestapi, 
    and one titled lua sample.
  + `Panes` are for views within your current project. So within your sysadmin session, 
    which has a logs window, you may have a few panes for access logs, error logs, and system logs.

æ¯å¯åŠ¨ä¸€ä¸ª Tmux çª—å£ï¼Œéƒ½æœ‰ç›¸åº”çš„ä¼šè¯ ID ç¼–å·ï¼Œä» 0 å¼€å§‹ï¼Œç„¶åæ˜¯ 1ï¼Œä»¥æ­¤ç±»æ¨ã€‚
ä½¿ç”¨ tmux ls å‘½ä»¤å¯ä»¥æŸ¥çœ‹ IDï¼Œå‘½ä»¤å¯ä»¥ä½¿ç”¨ç¼–å·åŒºåˆ†ä¼šè¯ï¼Œå¯ä»¥ç»™ä¼šè¯èµ·åï¼Œæ›´ç›´è§‚ã€‚

ä¼šè¯ç®¡ç†åŒ…æ‹¬ä»¥ä¸‹æ“ä½œï¼š

```sh
  # + æ–°å»ºä¼šè¯
  tmux         # or tmux new -s session-name
  tmux ls      # or tmux list-session

  # + åˆ†ç¦»ä¼šè¯
  tmux detach  # or Ctrl-b d

  # + æ¥å…¥ä¼šè¯
  tmux attach -t id
  # or tmux attach -t <session-name>

  # + ç»“æŸä¼šè¯
  tmux kill-session -t id
  # or tmux kill-session -t <session-name>

  # + åˆ‡æ¢ä¼šè¯
  tmux switch-session -t id
  # or tmux switch -t <session-name>

  # + é‡å‘½åä¼šè¯
  tmux rename-session -t id <new-name>
```

å¿«æ·é”®ä½¿ç”¨ç»Ÿä¸€çš„å‰å¯¼é”®ï¼ŒCtrl-bï¼Œä»¥ä¸‹æ‰€ä»¥å¿«æ·æ“ä½œéƒ½éœ€è¦å…ˆæŒ‰å‰å¯¼é”®ï¼š

  + Basics
    + ?  List all key bindings.

  + Session management
    + s  Select a new session for the attached client interactively
    + (  Switch the attached client to the previous session.
    + )  Switch the attached client to the next session.
    + $  rename the current session
    + d  detach from the current session

  + Windows
    + c  create a new window
    + '  Prompt for a window index to select.
    + ,  rename the current window
    + w  list windows
    + %  split panel horizontally
    + "  split panel vertically
    + n  change to the next window
    + p  change to the previous window
    + 0  to 9 select windows 0 through 9
    + .  Prompt for an index to move the current window.

  + Panes
    + h  move to the left pane. *
    + j  move to the pane below *
    + l  move to the right pane *
    + k  move to the pane above *
    + q  show pane numbers
    + o  toggle between panes
    + }  swap with next pane
    + {  swap with previous pane
    + !  break the pane out of the window
    + x  kill the current pane
    + [  Enter copy mode to copy text or view the history.
    + ]  Paste the most recently copied buffer of text.
    + Space  Arrange the current window in the next preset layout.
    + Up, Down Left, Right  Change to the panel siting on to the current pane.
    + C-Up, C-Down C-Left, C-Right  Resize the current pane in steps of one cell.
    + M-Up, M-Down M-Left, M-Right  Resize the current pane in steps of five cells.

å¤åˆ¶ç²˜è´´æ“ä½œ

    + Enter â€˜copy modeâ€™ by pressing CTRL+b, [.
    + Use the arrow keys to go to the position from where you want to start copying. 
    + Press CTRL+SPACE to start copying.
    + Use arrow keys to go to the end of text you want to copy. 
    + Press ALT+w or CTRL+w to copy into Tmux buffer.
    + Press CTRL+b, ] to paste in a possibly different Tmux pane/window.

ç›‘è§†æ´»åŠ¨å‘½ä»¤çª—å£

```sh
#!/usr/bin/env zsh
# https://github.com/ChengranAA/dynamic_tmux_sidebar/blob/main/tree_active_pane.sh

function pwdx {
  lsof -a -d cwd -p $1 -n -Fn | awk '/^n/ {print substr($0,2)}'
}

function tree_active_pane () {
  #get the pid and wd
  active_pane_pid=$(tmux list-panes -F '#{pane_active} #{pane_pid}' | grep -o '^1[[:space:]][0-9]\+$' | grep -o '\w[0-9]\+')
  active_wd=$(pwdx $active_pane_pid)
  #list file tree with color and 2 layer
  tree -LC 1 $active_wd
}

# allow subprocess to access the function 
export -f pwdx
export -f tree_active_pane

watch -tcn 1 tree_active_pane
```


## ==âš¡ tr - stdin translate

SYNOPSIS

       tr [OPTION]... SET1 [SET2]

Options

    -c : complements the set of characters in string.i.e., operations apply to characters not in the given set
    -d : delete characters in the first set from the output.
    -s : replaces repeated characters listed in the set1 with single occurrence
    -t : truncates set1

tr å‘½ä»¤ç”¨æ¥å¯¹ stdin æ•°æ®è¿›è¡Œè½¬æ¢å¤„ç†ï¼ŒåŒ…æ‹¬æ›¿æ¢ï¼Œå¤šå­—ç¬¦ç¼©å‡ï¼Œå¤§å°å†™è½¬æ¢ï¼Œåˆ é™¤ï¼Œæˆ– -c å–è¡¥é›†ã€‚
ä½¿ç”¨ -t ä¼šæ ¹æ® SET2 é•¿åº¦æˆªæ–­ SET1ã€‚æ›¿æ¢æ“ä½œæ˜¯å­—ç¬¦å¯¹åº”æ›¿æ¢ï¼ŒSET1 å¯¹åº” SET2 ç›¸åº”ä½ç½®çš„å­—ç¬¦ï¼š

```sh
$ echo gnu | tr -s [:lower:] [:upper:]
$ echo cmd | tr -t [a-z] [A-Z]            # cmd ==> CMD
$ echo Bad  apple | tr -s [:space:] ' '   # Bad  apple ==> "Bad apple"
$ echo "GNU is not Unix" | tr  -d i       # ==> GNU s not Unx
$ echo "GNU is not Unix" | tr -cd i       # ==> ii
$ echo "GNU is not Unix" | tr -t "is" "I" # replace i ==> I
```

## ==âš¡ su - switch user

é€€å‡ºç”¨æˆ·ç™»å½•ï¼Œç›´æ¥ logout å›è½¦å³å¯;

åˆ‡æ¢ç”¨æˆ·ç™»å½•ä½¿ç”¨ su name å‘½ä»¤ï¼Œswitch user å‘½ä»¤åˆ‡æ¢ç”¨æˆ·ï¼Œå¦‚æœæ˜¯æ™®é€šç”¨æˆ·åˆ‡æ¢åˆ° rootï¼Œåˆ™ç›´æ¥ su å›è½¦æŠŠ root å˜é‡éƒ½ä¼ é€’äº†è¿‡æ¥;

è®¾ç½®æ–°è´¦æˆ·ï¼Œå‡è®¾è´¦æˆ·åä¸º lanpï¼š

- adduser lanp å‘½ä»¤åˆ›å»ºç”¨æˆ·ï¼›
- passwd lanp å‘½ä»¤è®¾ç½®ç”¨æˆ·å¯†ç ï¼›

æç¤ºä½ è¾“å…¥æ–°çš„å¯†ç ï¼Œä»¥åŠå¯†ç è¾“å…¥åçš„ç¡®è®¤å¯†ç ï¼Œå‡ºç°èº«ä»½éªŒè¯ä»¤ç‰Œå·²ç»æˆåŠŸæ›´æ–°ï¼Œè¡¨ç¤ºç”¨æˆ·ä»¥åŠåˆ›å»ºæˆåŠŸã€‚

su fails with an authentication problem since the root account is blocked by default in Ubuntu, and there is no root password.

    su: Authentication failure

WSL ç³»ç»Ÿå¯èƒ½å› ä¸ºé»˜è®¤ root è´¦æˆ·æ²¡æœ‰å¯†ç è€Œä¸èƒ½é€šè¿‡ su åˆ‡æ¢è·å¾—æˆæƒï¼Œä½¿ç”¨ sudo -i ç™»å½•è¶…çº§è´¦æˆ·ï¼Œè¿™ä¸ªå‘½ä»¤è¿˜å¯ä»¥ -u æŒ‡å®šè´¦æˆ·ã€‚


# ğŸš© Debian root ç™»å½•
https://wiki.debian.org/sudo/

Debian ç³»ç»Ÿçš„æ™®é€šç”¨æˆ·éœ€è¦å®‰è£…è½¯ä»¶æ—¶ï¼Œå¾€å¾€ä¼šæ”¶åˆ° Permission denied çš„æç¤ºï¼Œè¿™æ—¶å€™éœ€è¦rootæƒé™ã€‚å¯¹äºå¤§å¤šæ•°Linuxç³»ç»Ÿæ¥è¯´ï¼Œåœ¨ä¸ç™»é™†è¶…çº§ç®¡ç†å‘˜è´¦æˆ·çš„å‰æä¸‹å¯ä»¥é€šè¿‡ sudo å‘½ä»¤æ¥è·å– root æƒé™ï¼Œæˆ–è€…é€šè¿‡ su ç™»é™†è¶…çº§ç®¡ç†å‘˜è´¦æˆ·ã€‚

ç³»ç»Ÿæ²¡æœ‰å®‰è£… sudoï¼Œå°±éœ€è¦å®‰è£… sudo åŠé…ç½®å…¶ sudoers æ–‡ä»¶

é¦–å…ˆä½¿ç”¨ su ç™»é™†è¶…çº§ç®¡ç†å‘˜è´¦æˆ·ï¼Œåœ¨ Terminal å‘½ä»¤è¡Œå†…è¾“å…¥ su ,Enter é”®åï¼Œè¾“å…¥è¶…çº§ç®¡ç†å‘˜å¯†ç ï¼Œå³è¿›å…¥ root è´¦æˆ·ã€‚

    apt-get install sudo

è¾“å…¥å‘½ä»¤ adduser yl sudo,  Enter é”®
æ„æ€æ˜¯ï¼šå°†æˆ‘çš„ç”¨æˆ·å yl æ·»åŠ åˆ°sudoç»„å†…ï¼Œå¤§å®¶æ ¹æ®å®é™…å°†è‡ªå·±çš„ç”¨æˆ·åæ·»åŠ è¿›sudoç»„å†…
æ¥ä¸‹æ¥æ˜¯é…ç½®sudoersæ–‡ä»¶ï¼Œè¿™é‡Œé€šè¿‡viç¼–è¾‘å™¨æ¥å†™
-è¾“å…¥å‘½ä»¤ vi /etc/sudoers è¿›å…¥sudoersæ–‡ä»¶ï¼›
-åœ¨viå‘½ä»¤æ¨¡å¼ä¸­ï¼Œè¾“å…¥ /%sudo æœç´¢å®šä½åˆ° %sudo ALL = (ALL:ALL) ALLï¼Œæˆ–è€…æ‰‹åŠ¨å®šä½
-åœ¨viæ’å…¥æ¨¡å¼ä¸­ï¼ˆæŒ‰ä¸€ä¸‹ i é”®ï¼‰ï¼Œåœ¨  %sudo ALL = (ALL:ALL) ALL ä¸‹é¢é”®å…¥ yl ALL = (ALL:ALL) ALL  ï¼ˆåŒæ ·ï¼Œè¿™é‡Œ yl ä»£è¡¨æˆ‘çš„æ™®é€šç”¨æˆ·åï¼Œå¤§å®¶æ ¹æ®å®é™…ä¿®æ”¹ï¼‰
-åœ¨viå‘½ä»¤æ¨¡å¼ä¸­ï¼Œè¾“å…¥ :x ,å³å¯é€€å‡ºviå¹¶ä¿å­˜æ–‡ä»¶

éªŒè¯sudoæ˜¯å¦å®‰è£…æˆåŠŸ
é‡å¯ä¸‹Terminal ï¼Œè¾“å…¥å‘½ä»¤ sudo ls ï¼Œå†è¾“å…¥ç”¨æˆ·å¯†ç ï¼Œå¦‚æœæ˜¾ç¤ºå¦‚ä¸‹å­—æ ·ï¼Œåˆ™å¯èƒ½sudoå®‰è£…æˆ–é…ç½®å‡ºç°äº†é—®é¢˜ï¼Œéœ€è¦é‡å¤ä¸Šè¿°æ­¥éª¤ï¼›
yl is not in the sudoers file.  This incident will be reported.
å¦‚æœæ˜¾ç¤ºå¦‚ä¸‹å­—æ ·ï¼Œåˆ™è¯´æ˜sudoå®‰è£…ä¸é…ç½®æˆåŠŸ
Desktop  Documents  Downloads  Music  Pictures  Public  Templates  Videos


Debian é»˜è®¤ä¸å…è®¸ root ç™»å½•ï¼Œå¯ä»¥ä¿®æ”¹é…ç½®ã€‚

1ï¼‰ã€é¦–å…ˆä¿®æ”¹gdm3çš„è®¾å®šæ–‡ä»¶ï¼ˆ/etc/gdm3/deamon.confï¼‰ï¼Œåœ¨[security]å­—æ®µåé¢è¿½åŠ å¦‚ä¸‹ä¸€è¡Œï¼š

    AllowRoot =ture

2ï¼‰ã€æœ€åä¿®æ”¹gdm3çš„ç™»å½•pamæ–‡ä»¶

    #vi/etc/pam.d/gdm3

è®©Debianä»¥rootè‡ªåŠ¨ç™»å½•ã€‚

1ï¼‰ã€é¦–å…ˆä¿®æ”¹gdm3çš„è®¾å®šæ–‡ä»¶ï¼ˆ/etc/gdm3/deamon.confï¼‰ï¼Œåœ¨[daemon]å­—æ®µåé¢è¿½åŠ å¦‚ä¸‹ä¸¤è¡Œï¼š

    AutomaticLogin= false //æ”¹ä¸ºtrue
    AutomaticLogin= root //ä»¥rootè‡ªåŠ¨ç™»å½•

å¦‚æœæƒ³ç­‰å‡ ç§’å†ç™»å½•ï¼Œå¯ä»¥åœ¨[daemon]å­—æ®µåé¢è¿½åŠ å¦‚ä¸‹å†…å®¹ï¼š

    TimedLoginEnable =true
    TimedLogin =root
    TimedLoginDelay = 5//å»¶è¿Ÿ5ç§’ç™»å½•ï¼Œå¯ä¿®æ”¹

2ï¼‰ã€æœ€åä¿®æ”¹gdm3çš„è‡ªåŠ¨ç™»å½•pamæ–‡ä»¶

    #vi/etc/pam.d/gdm3-autologin

å°† auth requiredpam_succeed_if.so user != root quiet_success æ³¨é‡Šæ‰ã€‚å³åœ¨æœ¬è¡Œå‰åŠ  #ï¼Œå¯ä»¥å–æ¶ˆ Debian ä¸è®© root ç™»å½•çš„é™åˆ¶ã€‚

é‡å¯å³å¯ã€‚


# ğŸš© Language è¯­è¨€é…ç½®
https://wiki.debian.org/ChangeLanguage

å¯ä»¥é€šè¿‡è®¾ç½®ç¯å¢ƒå˜é‡æ¯”å¦‚ LANG, LANGUAGE, LC_CTYPE, LC_MESSAGES æˆä½ çš„å½“åœ°è¯­è¨€ã€‚é€šå¸¸è®¾ç½® LANG (æˆ–è€… LC_ALL) å°±è¶³å¤Ÿäº†ã€‚ä½¿ç”¨ä»¥ä¸‹å‘½ä»¤æŸ¥çœ‹ä½ å½“å‰æ‰€ä½¿ç”¨çš„è¯­è¨€ç¯å¢ƒï¼š

    env | grep LANG

è¦æ”¯æŒåŒºåŸŸè®¾ç½®ï¼Œé¦–å…ˆè¦å®‰è£… locales è½¯ä»¶åŒ…ï¼Œï¼š

    aptitude install locales
    dpkg-reconfigure locales

åœ¨å¯¹è¯æ¡†ä¸­é€‰æ‹©è¯­è¨€

    less /etc/environment

é…ç½®å‘½ä»¤åœ¨ /usr/sbin ç›®å½•ä¸‹ï¼Œå¦‚æœåœ¨ç¯å¢ƒå˜é‡ä¸­æ²¡æœ‰å®šä½åˆ°å®ƒï¼Œå°±æ‰‹åŠ¨æŒ‡å®šç›®å½•æˆ–ä¿®æ”¹ç¯å¢ƒå˜é‡é…ç½®ã€‚

å¦‚æœåœ¨å®‰è£… debian åŸºæœ¬ç³»ç»Ÿçš„æ—¶å€™é€‰æ‹©äº†è‹±æ–‡çš„è¯­è¨€ç¯å¢ƒï¼Œä¹‹ååˆå¸Œæœ›å°†å®ƒæ”¹ä¸ºä¸­æ–‡ï¼Œéœ€è¦å®Œæˆä¸‹é¢å‡ æ–¹é¢çš„å·¥ä½œã€‚è®¾ç½® locale å¦‚æœæ²¡æœ‰å®‰è£… locale å·¥å…·ï¼Œåˆ™é¦–å…ˆè¦å®‰è£…å®ƒï¼Œç„¶åæ‰§è¡Œ dpkg-reconfigure locales é€‰æ‹©è¯­è¨€åŒ…ã€‚éœ€è¦æ·»åŠ ä¸Š zh_CN å¼€å¤´çš„å‡ ä¸ªé€‰é¡¹ï¼Œå½“ç„¶ä¹Ÿå¯ä»¥åªæ·»åŠ ä¸€ä¸ªï¼Œç„¶åï¼Œé€‰æ‹©å…¶ä¸­çš„ä¸€ä¸ªä½œä¸ºé»˜è®¤ã€‚è®¾ç½®å®Œæˆåï¼Œæ‰§è¡Œ locale å‘½ä»¤æ£€æŸ¥ä¸€ä¸‹å½“å‰çš„ locale è®¾ç½®æ˜¯å¦ä¸ºä¸­æ–‡äº†ã€‚



è¿è¡Œ dpkg-reconfigure localesï¼Œé€‰æ‹©ä¸Šä»¥ä¸‹é€‰é¡¹ï¼š

    en_US ISO-8859-1
    zh_CN GB2312
    zh_CN.GBK GBK
    zh_CN.UTF-8 UTF-8
    zh_TW BIG5
    zh_TW.UTF-8 UTF-8

ä¸­æ–‡ç¯å¢ƒå½“ç„¶éœ€è¦ä¸­æ–‡å­—ä½“çš„æ”¯æŒï¼Œæ‰‹å·¥æ·»åŠ ä¸­æ–‡çš„xftå­—åº“ã€‚

- ttf-arphic-gbsn00lp (AR PL SungtiL GB)
- ttf-arphic-gkai00mp (AR PL KaitiM GB)
- ttf-arphic-bsmi00lp (AR PL Mingti2L Big5)
- ttf-arphic-bkai00mp (AR PL KaitiM Big5)

å‰é¢ä¸¤ä¸ªæ˜¯ç®€ä½“çš„ï¼Œåé¢ä¸¤ä¸ªæ˜¯ç¹ä½“çš„ï¼Œä½†æ˜¯æœ€å¥½éƒ½è£…ä¸Šï¼Œå¦åˆ™åˆ°æ—¶å€™å¾ˆå¯èƒ½ä¹±ç ã€‚è¿™äº›åªæ˜¯åŸºæœ¬å­—ä½“ï¼Œåªèƒ½ä¿è¯ä¸­æ–‡æ­£å¸¸æ˜¾ç¤ºï¼Œå¦‚æœè¦å¥½çœ‹ä¸€ç‚¹çš„è¯ï¼Œå¯ä»¥åœ¨è½¯ä»¶ä¸­å¿ƒæœç´¢å®‰è£…xfontsã€‚

    apt-get update

    apt-get install ttf-arphic-gbsn00lp ttf-arphic-gkai00mp
    apt-get install ttf-arphic-bsmi00lp ttf-arphic-bkai00mp

    apt-get install ttf-microsoft-simsun ttf-microsoft-simhei
    apt-get install ttf-microsoft-simyou ttf-microsoft-simli


å¦‚æœé‡å¯Xåï¼Œå‘ç°æ•´ä¸ªç³»ç»Ÿçš„ç•Œé¢æ˜¾ç¤ºçš„è¿˜æ˜¯è‹±æ–‡ï¼Œè€Œä½¿ç”¨ locale å‘½ä»¤æ£€æŸ¥ ç³»ç»Ÿçš„ locale è®¾ç½®åˆå·²ç»æ­£ç¡®çš„é…ç½®ä¸ºä¸­æ–‡ã€‚å½“æ—¶é‡åˆ°çš„æƒ…å†µå°±æ˜¯æŸäº›åº”ç”¨çš„æ ‡é¢˜ç­‰æ˜¾ç¤ºä¸ºä¸­æ–‡ï¼Œä½†æ˜¯å·¥å…·èœå•ç­‰æ˜¾ç¤ºå’Œæ–‡ä»¶ç®¡ç†å™¨ç­‰éƒ½æ˜¾ç¤ºæˆäº†è‹±æ–‡ã€‚è¿™ç§æƒ…å†µå¾ˆæœ‰å¯èƒ½æ˜¯å› ä¸º /etc/enviroment æ–‡ä»¶é‡Œæœ‰å…³è¯­è¨€çš„ç¯å¢ƒå˜é‡çš„è®¾ç½®ä¸å¯¹å¦‚è‹±æ–‡ç¯å¢ƒï¼š

    LANGUAGE="en_US:en"
    LANG="zh_CN"

åœ¨LANGUAGEå­—æ®µæ·»åŠ ä¸­æ–‡çš„è®¾ç½®ï¼Œæ¯”å¦‚ï¼š

    LANGUAGE="zh_CN:zh:en_US:en"

é‡å¯Xï¼Œç³»ç»Ÿçš„è¯­è¨€ç¯å¢ƒåº”è¯¥å°±å˜ä¸ºä¸­æ–‡çš„äº†ã€‚

ä¸»è¦æ­¥éª¤ï¼š

    #é‡æ–°é…ç½®locales
    1ã€dpkg-reconfigure locales
    2ã€åœ¨å¯¹è¯æ¡†ä¸­é€‰æ‹©è¯­è¨€
    3ã€less /etc/environment

æ”¹ä¸ºä»¥ä¸‹å‡ è¡Œ

    LC_ALL="zh_CN.UTF-8"
    LANG="zh_CN.UTF-8"
    LANGUAGE="zh_CN.UTF-8:zh:en_US:en"

é‡å¯ç”µè„‘ locale charmap è¾“å‡ºï¼šUTF-8 å³å¯ä»¥äº†ã€‚


æ¥ä¸‹æ¥å°±æ˜¯å®‰è£…ä¸­æ–‡è¾“å…¥æ³•ï¼Œä¸ªäººæ¨èä½¿ç”¨ibusï¼Œæ¯”è¾ƒå¥½ç”¨è€Œä¸”å…¼å®¹æ€§ä¹Ÿè¿˜è¡Œï¼Œå¯ä»¥å‚è€ƒ
http://www.cnblogs.com/pengdonglin137/p/3280520.html

å½“ç„¶ï¼Œåœ¨Xç¯å¢ƒä¸‹è¿˜è¦è®¾ç½®localeå˜é‡ï¼š

å¯ä»¥åœ¨/etc/X11/Xsession.d/95xinputè¿™ä¸ªæ–‡ä»¶é‡Œå†™ä¸Šå¦‚ä¸‹è¯­å¥ï¼š

    export LANG=zh_CN.gb2312

PSï¼šå¦‚æœä½ åœ¨å¯åŠ¨ä¹‹åæ‰§è¡Œè¿™æ¡å‘½ä»¤ä¸ä¼šæœ‰æ•ˆï¼Œåªèƒ½é‡å¯å¹¶åœ¨åŠ è½½X windowä¹‹å‰æ‰§è¡Œæ‰æœ‰æ•ˆï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆæŠŠå®ƒå†™å…¥æ–‡ä»¶çš„åŸå› ï¼ˆè¿™ä¸ªæ–‡ä»¶åœ¨X windowå¯åŠ¨å‰è¢«åŠ è½½ã€‚ï¼‰

è¿™æ ·ä¸€æ¥ï¼Œä½ çš„ç³»ç»Ÿèœå•ç­‰ä¹Ÿä¼šå˜æˆä¸­æ–‡ï¼Œå¦‚æœä½ è¿˜æ˜¯æƒ³è¦è‹±æ–‡èœå•ï¼Œä½†æ˜¯åªè¦èƒ½æ˜¾ç¤ºä¸­æ–‡ï¼Œé‚£ä¹ˆå°±è¦å¤šè®¾ç½®å‡ ä¸ªå˜é‡ï¼š

    ENCODING="en_US"
    #export LC_ALL=$ENCODING
    export LC_MESSAGES=$ENCODING
    #export LC_COLLATE=$ENCODING
    #export LC_CTYPE=$ENCODING
    export LC_TIME=$ENCODING
    export LC_NUMERIC=$ENCODING
    #export LC_MONETARY=$ENCODING
    #export LC_PAPER=$ENCODING
    #export LC_NAME=$ENCODING
    export LC_ADDRESS=$ENCODING
    export LC_TELEPHONE=$ENCODING
    export LC_MEASUREMENT=$ENCODING
    export LC_IDENTIFICATION=$ENCODING

åŒæ ·æŠŠè¿™äº›å†™å…¥/etc/X11/Xsession.d/95xinputæ–‡ä»¶ï¼Œé‡å¯å°±è¡Œäº†ã€‚


ç»ˆç«¯å¯¹ä¸­æ–‡çš„æ”¯æŒ

KDEé»˜è®¤çš„ç»ˆç«¯æ˜¯konsole, é»˜è®¤å°±æ”¯æŒä¸­æ–‡ï¼Œè€Œä¸”è¿˜æ”¯æŒå¾—ä¸é”™ï¼Œgnome é»˜è®¤çš„ç»ˆç«¯æ˜¯ gnome-terminal, è¦æ”¯æŒä¸­æ–‡çš„è¯åªè¦åœ¨èœå•é‡Œé€‰ä¸Šä¸­æ–‡ç›¸åº”çš„ç¼–ç å°±è¡Œäº†ã€‚

é…ç½®ç¼–ç è¿›å…¥é€‰æ‹©ï¼š(ç©ºæ ¼é”®æ˜¯é€‰æ‹©ï¼Œä¸æ˜¯ENTERï¼Œé€‰æ‹©å®Œäº†åå†ENTERï¼‰

    en_US.UTF8
    zh_CN GB2312
    zh_CN GBK GBK
    zh_CN UTF-8 UTF-8

    vi /etc/default/locale
    LANG=en_US.UTF-8

å¦‚æœè¿˜æœ‰æ–¹å—éœ€è¦è£…å­—ä½“ï¼š

    apt-get install ttf-arphic-uming
    apt-get install ttf-wqy-zenhei


# ğŸš© Anaconda å®‰è£…

For Python3:

    wget https://repo.anaconda.com/archive/Anaconda3-5.3.1-Linux-x86.sh
    bash Anaconda-5.3.1-Linux-x86.sh

    wget https://repo.anaconda.com/archive/Anaconda3-5.3.1-Linux-x86_64.sh
    bash Anaconda3-5.3.1-Linux-x86_64.sh


For Python2:

    wget https://repo.anaconda.com/archive/Anaconda2-5.3.1-Linux-x86.sh
    bash Anaconda-5.3.1-Linux-x86.sh

    wget https://repo.anaconda.com/archive/Anaconda2-5.3.1-Linux-x86_64.sh
    bash Anaconda2-5.3.1-Linux-x86_64.sh



# ğŸš© Virtualbox è™šæ‹Ÿæœºå¢å¼ºåŒ…å®‰è£…

1. ç‚¹å‡»èœå•æ  è®¾å¤‡ â€“> åˆ†é…å…‰é©± â€“> é€‰æ‹©ä¸€ä¸ªè™šæ‹Ÿå…‰ç›˜ï¼Œæ‰¾åˆ° VirtualBox å®‰è£…ç›®å½•ä¸‹çš„ VBoxGuestAdditions.isoï¼ŒåŠ è½½æ­¤é•œåƒã€‚
2. å¯åŠ¨Linuxç³»ç»Ÿå¹¶ç”¨rootèº«ä»½ç™»å…¥ç³»ç»Ÿ
3. æ‰§è¡ŒæŒ‚è½½å‘½ä»¤ï¼Œå°†è™šæ‹Ÿå…‰ç›˜æŒ‚åœ¨åˆ° /mnt/cdromï¼Œå¦‚æœæ²¡æœ‰cdromç›®å½•ï¼Œåˆ™å…ˆåˆ›å»ºä¹‹ã€‚

    mkdir /mnt/cdrom
    mount -t auto -r ro /dev/cdrom /mnt/cdrom

4. å¤åˆ¶è„šæœ¬åˆ°/tmpç›®å½•ä¸‹

    cd /mnt/cdrom
    cp VBoxLinuxAdditions.run /tmp
    cd /tmp
    chmod a+x VBoxLinuxAdditions.run

5. ä¸Šè¿°è„šæœ¬éœ€è¦å®‰è£… gcc,make,kernel-develç­‰å·¥å…·å’Œå¼€å‘åŒ…ï¼Œå¯æ‰§è¡Œï¼ˆæ­¤å¤„è¯·æ ¹æ®å®é™…ç³»ç»Ÿé€‰æ‹©å®‰è£…å·¥å…·ï¼ŒCentOSç”¨yumï¼Œå…¶å®ƒè¯·å¦è¡Œé€‰æ‹©ï¼‰

    yum install -y gcc gcc-devel gcc-c++ gcc-c++-devel make kernel-devel

6. æ‰§è¡Œå®‰è£…ï¼ˆæ­¤å¤„æœªå®‰è£…æ¡Œé¢æ”¯æŒï¼‰

    sh ./VBoxLinuxAdditions.run --noexec --nox11

7. é‡å¯ç³»ç»Ÿ

    shutdown -r now

8. æ·»åŠ å…±äº«ç›®å½•

    èœå• è®¾ç½® â€“> å…±äº«æ–‡ä»¶å¤¹ â€“> æ·»åŠ æ–‡ä»¶å¤¹ï¼Œå¹¶è®¾ç½®ç›¸å…³è·¯å¾„å’Œæƒé™

    ç‚¹å‡» è®¾å¤‡(Devices) -> å…±äº«æ–‡æ¡£å¤¹(Shared Folders)èœå•ï¼Œæ·»åŠ ä¸€ä¸ªå…±äº«æ–‡æ¡£å¤¹ï¼Œé€‰é¡¹å›ºå®šå’Œä¸´æ—¶æ˜¯æŒ‡è¯¥æ–‡æ¡£å¤¹æ˜¯å¦æ˜¯æŒä¹…çš„ã€‚å…±äº«åèƒ½å¤Ÿä»»å–ä¸€ä¸ªè‡ªå·±å–œæ¬¢çš„ï¼Œæ¯”å¦‚ shared_win å°½é‡ä½¿ç”¨è‹±æ–‡åç§°ã€‚

9. æŒ‚è½½å…±äº«æ–‡ä»¶å¤¹

    å¦‚æœé€‰æ‹©äº†è‡ªåŠ¨æŒ‚è½½çš„è¯ï¼Œä¸éœ€è¦æ‰§è¡Œä¸€ä¸‹æ­¥éª¤ã€‚å…±äº«æ–‡ä»¶å¤¹ä¼šè‡ªåŠ¨æŒ‚åœ¨åˆ° /media/sf_share

        mkdir /mnt/shared_linux
        mount -t vboxsf shared_win /mnt/shared_linux

    é€šè¿‡ mount å‘½ä»¤å¯ä»¥æŸ¥çœ‹æŒ‚è½½åˆ—è¡¨ï¼Œä½ ä¼šçœ‹åˆ°å¦‚ä¸‹å†…å®¹ï¼š

        share on /media/sf_share type vboxsf (gid=500,rw)

    è¯´æ˜è‡ªåŠ¨æŒ‚è½½æˆåŠŸäº†


    å‡å¦‚æ‚¨ä¸æƒ³æ¯ä¸€æ¬¡éƒ½æ‰‹åŠ¨æŒ‚è½½ï¼Œèƒ½å¤Ÿåœ¨ /etc/fstab ä¸­æ·»åŠ ä¸€é¡¹

    shared_win  /mnt/shared_linux  vboxsf  rw,gid=[username],uid=[username],auto  0  0

    ä»¥ä¸Šçš„ vboxsf æ˜¯ç¾¤ç»„åç§°ï¼Œ[username] æ˜¯ä½ çš„ç”¨æˆ·åï¼Œæ–‡ä»¶å¤¹ /mnt/shared_linux æ˜¯æŒ‚è½½ç›®å½•ï¼Œè¿™æ ·å°±èƒ½å¤Ÿè‡ªåŠ¨æŒ‚è½½äº†ã€‚

    å¸è½½çš„è¯ä½¿ç”¨ä¸‹é¢çš„å‘½ä»¤ï¼š

        sudo umount -f /mnt/shared_linux


Debian ç³»ç»Ÿå®‰è£… Virtualbox é¦–å…ˆå¢åŠ æºï¼š

echo "deb http://download.virtualbox.org/virtualbox/debian stretch contrib" > /etc/apt/sources.list.d/virtualbox.list

ç„¶åå°±å¯ä»¥å®‰è£…ï¼š

    apt-get install virutalbox-*


# ğŸš© echo å›å“å‘½ä»¤

å‘½ä»¤ç”¨æ³•å‚è€ƒï¼š

    $ help echo
    echo: echo [-neE] [arg ...]
        Write arguments to the standard output.
        
        Display the ARGs, separated by a single space character and followed by a
        newline, on the standard output.
        
        Options:
          -n        do not append a newline
          -e        enable interpretation of the following backslash escapes
          -E        explicitly suppress interpretation of backslash escapes
        
        `echo' interprets the following backslash-escaped characters:
          \a        alert (bell)
          \b        backspace
          \c        suppress further output
          \e        escape character
          \E        escape character
          \f        form feed
          \n        new line
          \r        carriage return
          \t        horizontal tab
          \v        vertical tab
          \\        backslash
          \0nnn     the character whose ASCII code is NNN (octal).  NNN can be
                    0 to 3 octal digits
          \xHH      the eight-bit character whose value is HH (hexadecimal).  HH
                    can be one or two hex digits
          \uHHHH    the Unicode character whose value is the hexadecimal value HHHH.
                    HHHH can be one to four hex digits.
          \UHHHHHHHH the Unicode character whose value is the hexadecimal value
                    HHHHHHHH. HHHHHHHH can be one to eight hex digits.
        
        Exit Status:
        Returns success unless a write error occurs

ä¸æ¢è¡Œè¾“å‡ºï¼š

    echo -n "abc..."
    echo -e "abc...\c"

ä½¿ç”¨ -e è§£æè½¬ä¹‰å­—ç¬¦ï¼Œå¦‚æ‰“å°ä¿¡æ¯åï¼Œå…‰æ ‡ç›´æ¥å›åˆ°è¡Œé¦–ï¼Œä¸”ä¸æ¢è¡Œï¼š

    echo -e "to be covered...\r\c"
    echo -ne "to be covered...\r"



# ğŸš© File Permissions: chmod chown chgrp æ–‡ä»¶å±æ€§ä¿®æ”¹

https://www.kernel.org/doc/html/latest/filesystems/index.html

æ¯ä¸ªæ–‡ä»¶éƒ½æœ‰ä¸€ç»„æƒé™ä¿¡æ¯ï¼Œå¯ä»¥ä½¿ç”¨ `ls -l` å‘½ä»¤æŸ¥çœ‹ï¼š

    -rw-r--r-- 1 jeango jeango   31 May  4 07:56 demo.sh
    ---------- - ------ ------ ---- ------------ -------
    ^          ^ ^      ^      ^    ^            ^
    |          | |      |      |    |            ç¬¬ä¸ƒåˆ—ï¼šFilename æ–‡ä»¶å
    |          | |      |      |    ç¬¬å…­åˆ—ï¼šModification time æ–‡ä»¶æœ€åæ›´æ–°ï¼ˆä¿®æ”¹ï¼‰æ—¶é—´
    |          | |      |      ç¬¬äº”åˆ—ï¼šFile size æ–‡ä»¶é•¿åº¦ï¼ˆå¤§å°ï¼‰
    |          | |      ç¬¬å››åˆ—ï¼šGroup æ–‡ä»¶çš„æ‰€å±ç”¨æˆ·ç»„ 
    |          | ç¬¬ä¸‰åˆ—ï¼šUser æ–‡ä»¶çš„æ‰€æœ‰è€… 
    |          ç¬¬äºŒåˆ—ï¼šHard link count ä¸€ä¸ªæ•°å­—è¡¨ç¤ºæ–‡ä»¶ inode é“¾æ¥ä¸ªæ•°
    ç¬¬ä¸€åˆ—ï¼šFile type & Permissions æ–‡ä»¶ç±»å‹ã€å’Œæ–‡ä»¶æƒé™ï¼Œå¯¹åº” owner/owner group/others

æ–‡ä»¶ç±»å‹ï¼Œå¤§ä½“åˆ†ä¸ºå¦‚ä¸‹å‡ ç±»ï¼š

- `d` ï¼šç›®å½• 
- `-` ï¼šæ–‡ä»¶ 
- `l` ï¼šé“¾æ¥ 
- `s` ï¼šsocket 
- `p` ï¼šnamed pipe 
- `b` ï¼šblock device 
- `c` ï¼šcharacter device

æ–‡ä»¶æƒé™åˆ†ä¸ºä¸‰æ®µï¼Œå¯¹åº”æ–‡ä»¶æ‰€æœ‰è€…çš„æƒé™ã€æ–‡ä»¶æ‰€å±ç»„çš„æƒé™ã€å…¶ä»–ç”¨æˆ·å¯¹æ–‡ä»¶çš„æƒé™ï¼Œæ¯ç»„æœ‰ 3 ä¸ªå­—ç¬¦è¡¨ç¤ºä¸åŒçš„æƒé™ï¼š

- `r` : Readable å¯è¯»ï¼Œç”¨æ•°å­— 4 è¡¨ç¤º
- `w` : Writable å¯å†™ï¼Œç”¨æ•°å­— 2 è¡¨ç¤º
- `x` : Executable å¯æ‰§è¡Œï¼Œç”¨æ•°å­— 1 è¡¨ç¤º
- `-` : æ— æƒé™ï¼Œç”¨æ•°å­— 0 è¡¨ç¤º

ä½¿ç”¨ chmod å‘½ä»¤ä¿®æ”¹æ–‡ä»¶æƒé™ï¼š

    Usage: chmod [OPTION]... MODE[,MODE]... FILE...
      or:  chmod [OPTION]... OCTAL-MODE FILE...
      or:  chmod [OPTION]... --reference=RFILE FILE...
    Change the mode of each FILE to MODE.

ä¸ºæ‰€æœ‰ç”¨æˆ·æˆ–ç”¨æˆ·ç»„å¢åŠ æˆ–æ¸…é™¤æ‰€æœ‰æƒé™ï¼Œæ‰€æœ‰æƒå€¼ç›¸åŠ ä¸º 7ã€‚

æƒé™å¯ä»¥ä½¿ç”¨ agou ç®€å†™ç¬¦å·è¡¨ç¤ºï¼Œæƒé™å‰çš„ + å·è¡¨ç¤ºå¢åŠ æƒé™ï¼Œ- è¡¨ç¤ºç§»é™¤æƒé™ï¼Œæ—  +- ç¬¦å·è¡¨ç¤ºæ›¿æ¢æƒé™ï¼š

```sh
# Use the octal CHMOD Command:
chmod -R 007 folder_name

# OR use the symbolic CHMOD Command:
chmod -R a+rwx,u-rwx,g-rwx folder_name

chmod -wrx demo.sh
chmod 000 demo.sh

chmod +wrx demo.sh
chmod 777 demo.sh

chmod -R 777 /upload
```

How do I use symbolic mode?
Symbolic mode uses more symbols, but the symbols are simpler to understand. 
That's attractive to sysadmins that are new to standard Linux permissions.

    Each access level has a symbol:

    Access level                Symbol
    Read                        r
    Write                       w
    Execute                     x
    setuid/setgid               s
    sticky                      t

    Each identity has a symbol:

    Identity                    Symbol
    User                        u
    Group                       g
    Others                      o
    All (user + group + other)  a

    There are also operators to manipulate the permissions:

    Task                        Operator
    Grant a level of access     +
    Remove a level of access    -
    Set a level of access       =

åœ¨ Android ç³»ç»Ÿä¸­ä½¿ç”¨ Termux ç­‰å·¥å…·ä¿®æ”¹æ–‡ä»¶æƒé™æ—¶ï¼Œä¼šæœ‰ä¸€ä¸ªå°´å°¬çš„æƒ…å†µï¼Œé‚£å°±æ˜¯å°†æƒé™æ”¹æˆ 007 è¿™
ç§ï¼Œæ‰€æœ‰æƒä¸¢å¤±ï¼Œå¯¼è‡´ä¸èƒ½è®¿é—®æ–‡ä»¶ã€‚ä¸å°å¿ƒå°† 070 æƒé™å†™æˆ 07 å°±ä¼šå¯¼è‡´ç»“æœä¸º 007 æƒé™ï¼Œä»è€Œä½¿ user
å’Œ group å¤±å»æƒé™ã€‚å°½ç®¡ä»–ä»¬å¯ä»¥åˆ›å»ºæ–‡ä»¶ï¼Œä½†å´ä¸èƒ½åˆ é™¤æ–‡ä»¶ï¼Œè¿™ç§æƒé™ç”¨æ³•ä¹Ÿæ˜¯æœ‰éœ€æ±‚çš„ã€‚åœ¨ä¸è§£é” root
æƒé™çš„å‰æä¸‹ï¼Œåªèƒ½é€šè¿‡åº”ç”¨æ•°æ®æ¸…é™¤ï¼Œæ‰€æœ‰ app ä½¿ç”¨è¿‡ç¨‹äº§ç”Ÿçš„æ•°æ®å°†ä¸¢å¤±ã€‚

ç”¨æˆ·ç»„ä¿®æ”¹åŠæ‰€æœ‰è€…

    Examples:
      chgrp staff /u      Change the group of /u to "staff".
      chgrp -hR staff /u  Change the group of /u and subfiles to "staff".

    Examples:
      chown root /u        Change the owner of /u to "root".
      chown root:staff /u  Likewise, but also change its group to "staff".
      chown -hR root /u    Change the owner of /u and subfiles to "root".


æŸ¥çœ‹ç”¨æˆ·ä¿¡æ¯ï¼š

    Usage: id [OPTION]... [USER]

åˆ›å»ºç”¨æˆ·ï¼š

    useradd [é€‰é¡¹] ç”¨æˆ·å

ä¿®æ”¹ç”¨æˆ·ä¿¡æ¯ï¼š

    usermod [é€‰é¡¹] ç”¨æˆ·å

ä¿®æ”¹ç”¨æˆ·å¯†ç ï¼š

    passwd [é€‰é¡¹] ç”¨æˆ·å

åˆ é™¤ç”¨æˆ·ï¼Œ-r é€‰é¡¹è¡¨ç¤ºåœ¨åˆ é™¤ç”¨æˆ·çš„åŒæ—¶åˆ é™¤ç”¨æˆ· HOME ç›®å½•ã€‚

    userdel -r ç”¨æˆ·å

æ·»åŠ ç”¨æˆ·ç»„ï¼š

    groupadd [é€‰é¡¹] ç»„å

æ·»åŠ ç”¨æˆ·åˆ°ä¸€ä¸ªç”¨æˆ·ç»„ï¼š

    usermod -aG ç»„å ç”¨æˆ·å


Linux æ–‡ä»¶æƒé™ä¸­è¿˜æœ‰ SetUID, SetGID, Sticky ä¸‰ç§ç‰¹åˆ«çš„æ ‡å¿—æ¯”ç‰¹ï¼Œå¸¸ç”¨äºæå‡æƒé™ã€‚SetUID å…è®¸
ç”¨æˆ·ä»¥å¯æ‰§è¡Œç¨‹åºæ–‡ä»¶çš„æ‰€æœ‰è€…æƒé™è¿è¡Œã€‚SetGID åˆ™å…è®¸ç›®å½•ä¸­çš„åˆ›å»ºçš„æ–‡ä»¶ç»§æ‰¿ç›®å½•çš„ group IDã€‚
æ³¨æ„ï¼Œè®¾ç½® setuid/setgid æ ‡å¿—åï¼Œ`ls -l` å‘½ä»¤å¯ä»¥çœ‹åˆ° s ç¬¦å·å–ä»£æ‰§è¡Œç¬¦å·ï¼ˆxï¼‰ã€‚

    sudo chmod u+s /path/to/file
    sudo chmod g+s /path/to/directory
    sudo chmod +t /path/to/directory

SetUID (Set User ID) and SetGID (Set Group ID) are special permissions in 
Unix-like operating systems. SetUID allows users to run an executable with 
the permissions of the executableâ€™s owner, typically granting elevated 
privileges. SetGID, on the other hand, affects group access. For directories, 
it ensures that files created within the directory inherit the directoryâ€™s 
group ID, rather than the creating userâ€™s primary group ID. For executable 
files, it allows the file to run with the group permissions of the fileâ€™s group.

The Sticky Bit is a permission setting used primarily on directories. It 
restricts file deletion within the directory such that only the fileâ€™s owner, 
the directoryâ€™s owner, or the superuser can delete or rename files. Commonly 
used on directories like /tmp.

Unix ç¬¬äº”ç‰ˆï¼ˆ1974 å¹´ï¼‰ä¸­ï¼Œå¼•å…¥äº†ç²˜æ€§ä½ä»¥ç”¨äºçº¯å¯æ‰§è¡Œæ–‡ä»¶ã€‚å®ƒå‘Šè¯‰æ“ä½œç³»ç»Ÿåœ¨æ“ä½œå®Œæˆåå°†ç¨‹åºçš„ Text
ä»£ç æ®µä¿ç•™åœ¨äº¤æ¢ç©ºé—´ä¸­ã€‚é€šè¿‡å…è®¸å†…æ ¸åœ¨å•ä¸ªæ“ä½œä¸­å°†åº”ç”¨ç¨‹åºä»äº¤æ¢å†…å­˜ç§»åŠ¨åˆ°å®é™…å†…å­˜æ¥åŠ é€Ÿåç»­æ‰§è¡Œã€‚
å› æ­¤ï¼Œä½¿ç”¨ç²˜ç²˜ä½å¯ä»¥è®©å¸¸ç”¨ç¨‹åºï¼ˆä¾‹å¦‚ç¼–è¾‘å™¨ï¼‰çš„åŠ è½½é€Ÿåº¦å¤§å¤§æé«˜ã€‚æ›´æ”¹ stickied ç¨‹åºä¸­çš„å¯æ‰§è¡Œæ–‡ä»¶
éœ€è¦ä»å¯æ‰§è¡Œæ–‡ä»¶ä¸­åˆ é™¤ç²˜æ€§ä½ï¼Œè¿è¡Œç¨‹åºå¹¶é€€å‡ºä»¥æ¸…é™¤ç¼“å­˜ï¼Œæ›¿æ¢äºŒè¿›åˆ¶å¯æ‰§è¡Œæ–‡ä»¶å¹¶æ¢å¤ç²˜æ€§ä½ã€‚

ç›®å½•è®¾ç½®ç²˜æ€§ä½æ—¶ï¼Œæ–‡ä»¶ç³»ç»Ÿä¼šä»¥ä¸åŒçš„æ–¹å¼å¤„ç†è¯¥ç›®å½•ä¸­çš„æ–‡ä»¶ï¼Œåªå…è®¸æ–‡ä»¶çš„æ‰€æœ‰è€…ã€ç›®å½•çš„æ‰€æœ‰è€…æˆ–
root ç”¨æˆ·é‡å‘½åæˆ–åˆ é™¤æ–‡ä»¶ã€‚å¦‚æœæ²¡æœ‰è®¾ç½®ç²˜æ€§ä½ï¼Œä»»ä½•ç”¨æˆ·å†™å…¥å’Œæ‰§è¡Œå¯¹ç›®å½•çš„è®¿é—®éƒ½å¯ä»¥é‡å‘½åæˆ–åˆ é™¤
å…¶å†…å®¹ï¼Œè€Œä¸ç®¡æ–‡ä»¶çš„æ‰€æœ‰è€…å¦‚ä½•ã€‚è¿™é€šè®¾ç½®åœ¨ /tmp ç›®å½•ä¸­ï¼Œä»¥é˜²æ­¢æ™®é€šç”¨æˆ·åˆ é™¤æˆ–ä¼ è¾“å±äºå…¶ä»–ç”¨æˆ·çš„æ–‡ä»¶ã€‚


# ğŸš© dd: Convert and copy a file

dd - device driver å‘½ä»¤ç§°å¾—ä¸Šæ˜¯ Linux ä¸–ç•Œä¸­çš„æ¬è¿å·¥ï¼Œå®ƒç”¨æ¥è¯»å–è®¾å¤‡ã€æ–‡ä»¶ä¸­çš„å†…å®¹ï¼Œå¹¶åŸå°ä¸åŠ¨åœ°å¤åˆ¶åˆ°æŒ‡å®šä½ç½®ã€‚

è¯»å– /dev/null æˆ– /dev/zero æ–‡ä»¶æ—¶ï¼Œå°±å¯ä»¥åˆ›é€ å‡ºç©ºå€¼æ–‡ä»¶ã€‚è¿˜å¯ä»¥åˆ©ç”¨ /dev/urandom éšæœºçš„æ•°æ®å¡«å……ç¡¬ç›˜ï¼Œåœ¨æŸäº›å¿…è¦çš„åœºåˆå¯ä»¥ç”¨æ¥é”€æ¯æ•°æ®ã€‚

è¯»å– hdaã€hdb è¿™ç§ IDE æ¥å£çš„ç¡¬ç›˜ï¼Œæˆ–è€…ä¸»æµ SATA æ¥å£çš„ç¡¬ç›˜ï¼Œè¿˜æœ‰å°† ISO é•œåƒæ–‡ä»¶å†™å…¥ USB ç§»åŠ¨ç›˜ï¼š

    dd if=/dev/hda of=/root/hda.img
    dd if=/dev/sda of=/root/sda.img

    sudo dd if=/path/to/linux.iso of=/dev/sda4 bs=4M

    dd if=/dev/urandom of=/dev/hda1 count=2

ç¤ºèŒƒï¼Œç”ŸæˆåŸå§‹äºŒè¿›åˆ¶ç£ç›˜æ‰‡åŒºæ˜ åƒï¼Œå‚è€ƒ MIT 6.828 è¯¾ç¨‹å®éªŒï¼š

    dd if=/dev/zero of=obj/kern/kernel.img~ count=10000 2>/dev/null
    dd if=obj/boot/boot of=obj/kern/kernel.img~ conv=notrunc 2>/dev/null
    dd if=obj/kern/kernel of=obj/kern/kernel.img~ seek=1 conv=notrunc 2>/dev/null

å…ˆè¿›è¡Œé›¶å€¼å¡«å……ï¼Œæ•°æ®å—é‡å¤ count æŒ‡å®š 10000 æ¬¡ï¼Œé»˜è®¤æ•°æ®å—ä¸º 512 å­—èŠ‚ï¼Œå³ 5.12MBï¼Œ4.9MiBã€‚

ç„¶åå†å°† boot å’Œ kernel æ–‡ä»¶å†™æ˜ åƒæ–‡ä»¶ï¼Œç¬¬äºŒä¸ªæ–‡ä»¶ seek=1 è¡¨ç¤ºè·³è¿‡ä¸€ä¸ª obs å³é»˜è®¤çš„ 512 å­—èŠ‚ã€‚

å¯ä»¥å•ç‹¬è®¾ç½®è¾“å…¥ã€è¾“å‡ºå—çš„å¤§å°ï¼Œæˆ–è€… skipã€seek è·³è¿‡è¾“å…¥ã€è¾“å‡ºå—æ•°é‡ã€‚

è½¬æ¢æ–¹å¼ conv æœ‰ 16 ç§ï¼Œå¦‚å‰é¢æŒ‡å®šçš„ notrunc è¡¨ç¤ºä¸å¯¹è¾“å‡ºå†…å®¹è¿›è¡Œæˆªæ–­ã€‚

å‘½ä»¤å‚è€ƒï¼š

    Usage: dd [OPERAND]...
      or:  dd OPTION
    Copy a file, converting and formatting according to the operands.

      bs=BYTES        read and write up to BYTES bytes at a time (default: 512);
                      overrides ibs and obs
      cbs=BYTES       convert BYTES bytes at a time
      conv=CONVS      convert the file as per the comma separated symbol list
      count=N         copy only N input blocks
      ibs=BYTES       read up to BYTES bytes at a time (default: 512)
      if=FILE         read from FILE instead of stdin
      iflag=FLAGS     read as per the comma separated symbol list
      obs=BYTES       write BYTES bytes at a time (default: 512)
      of=FILE         write to FILE instead of stdout
      oflag=FLAGS     write as per the comma separated symbol list
      seek=N          skip N obs-sized blocks at start of output
      skip=N          skip N ibs-sized blocks at start of input
      status=LEVEL    The LEVEL of information to print to stderr;
                      'none' suppresses everything but error messages,
                      'noxfer' suppresses the final transfer statistics,
                      'progress' shows periodic transfer statistics

    N and BYTES may be followed by the following multiplicative suffixes:
    c =1, w =2, b =512, kB =1000, K =1024, MB =1000*1000, M =1024*1024, xM =M,
    GB =1000*1000*1000, G =1024*1024*1024, and so on for T, P, E, Z, Y.

    Each CONV symbol may be:

      ascii     from EBCDIC to ASCII
      ebcdic    from ASCII to EBCDIC
      ibm       from ASCII to alternate EBCDIC
      block     pad newline-terminated records with spaces to cbs-size
      unblock   replace trailing spaces in cbs-size records with newline
      lcase     change upper case to lower case
      ucase     change lower case to upper case
      sparse    try to seek rather than write the output for NUL input blocks
      swab      swap every pair of input bytes
      sync      pad every input block with NULs to ibs-size; when used
                with block or unblock, pad with spaces rather than NULs
      excl      fail if the output file already exists
      nocreat   do not create the output file
      notrunc   do not truncate the output file
      noerror   continue after read errors
      fdatasync  physically write output file data before finishing
      fsync     likewise, but also write metadata

    Each FLAG symbol may be:

      append    append mode (makes sense only for output; conv=notrunc suggested)
      direct    use direct I/O for data
      directory  fail unless a directory
      dsync     use synchronized I/O for data
      sync      likewise, but also for metadata
      fullblock  accumulate full blocks of input (iflag only)
      nonblock  use non-blocking I/O
      noatime   do not update access time
      nocache   Request to drop cache.  See also oflag=sync
      noctty    do not assign controlling terminal from file
      nofollow  do not follow symlinks
      count_bytes  treat 'count=N' as a byte count (iflag only)
      skip_bytes  treat 'skip=N' as a byte count (iflag only)
      seek_bytes  treat 'seek=N' as a byte count (oflag only)

    Sending a USR1 signal to a running 'dd' process makes it
    print I/O statistics to standard error and then resume copying.

    Options are:

          --help     display this help and exit
          --version  output version information and exit

    GNU coreutils online help: <https://www.gnu.org/software/coreutils/>
    Report dd translation bugs to <https://translationproject.org/team/>
    Full documentation at: <https://www.gnu.org/software/coreutils/dd>
    or available locally via: info '(coreutils) dd invocation'


# ğŸš© zipã€unzip å‹ç¼©ä¸è§£å‹ç¼©

    ## å‹ç¼©ç›®å½•æˆ–æ–‡ä»¶
    zip -r doc.zip doc 
    zip -r doc.zip doc readme.md

    ## è§£å‹
    unzip doc.zip -d doc
    unzip doc.zip
    unzip doc\*.zip
    unzip -j doc.zip #å¿½ç•¥å‹ç¼©åŒ…ç›®å½•ç»“æ„

    ## å…¶ä»–
    unzip -v doc.zip #æŸ¥çœ‹å‹ç¼©åŒ…
    unzip -t doc.zip #éªŒè¯å‹ç¼©åŒ…


## å‘½ä»¤å‚è€ƒ

Copyright (c) 1990-2008 Info-ZIP - Type 'zip "-L"' for software license.
Zip 3.0 (July 5th 2008). Usage:

    zip [-options] [-b path] [-t mmddyyyy] [-n suffixes] [zipfile list] [-xi list]

      The default action is to add or replace zipfile entries from list, which
      can include the special name - to compress standard input.
      If zipfile and list are omitted, zip compresses stdin to stdout.
      -f   freshen: only changed files  -u   update: only changed or new files
      -d   delete entries in zipfile    -m   move into zipfile (delete OS files)
      -r   recurse into directories     -j   junk (don't record) directory names
      -0   store only                   -l   convert LF to CR LF (-ll CR LF to LF)
      -1   compress faster              -9   compress better
      -q   quiet operation              -v   verbose operation/print version info
      -c   add one-line comments        -z   add zipfile comment
      -@   read names from stdin        -o   make zipfile as old as latest entry
      -x   exclude the following names  -i   include only the following names
      -F   fix zipfile (-FF try harder) -D   do not add directory entries
      -A   adjust self-extracting exe   -J   junk zipfile prefix (unzipsfx)
      -T   test zipfile integrity       -X   eXclude eXtra file attributes
      -y   store symbolic links as the link instead of the referenced file
      -e   encrypt                      -n   don't compress these suffixes
      -h2  show more help

UnZip 6.00 of 20 April 2009, by Info-ZIP.  Maintained by C. Spieler.  Send
bug reports using http://www.info-zip.org/zip-bug.html; see README for details.

    Usage: unzip [-Z] [-opts[modifiers]] file[.zip] [list] [-x xlist] [-d exdir]
      Default action is to extract files in list, except those in xlist, to exdir;
      file[.zip] may be a wildcard.  -Z => ZipInfo mode ("unzip -Z" for usage).

      -p  extract files to pipe, no messages     -l  list files (short format)
      -f  freshen existing files, create none    -t  test compressed archive data
      -u  update files, create if necessary      -z  display archive comment only
      -v  list verbosely/show version info       -T  timestamp archive to latest
      -x  exclude files that follow (in xlist)   -d  extract files into exdir
    modifiers:
      -n  never overwrite existing files         -q  quiet mode (-qq => quieter)
      -o  overwrite files WITHOUT prompting      -a  auto-convert any text files
      -j  junk paths (do not make directories)   -aa treat ALL files as text
      -U  use escapes for all non-ASCII Unicode  -UU ignore any Unicode fields
      -C  match filenames case-insensitively     -L  make (some) names lowercase
      -X  restore UID/GID info                   -V  retain VMS version numbers
      -K  keep setuid/setgid/tacky permissions   -M  pipe through "more" pager
      -O CHARSET  specify a character encoding for DOS, Windows and OS/2 archives
      -I CHARSET  specify a character encoding for UNIX and other archives


# ğŸš© Signal Concepts - ps top kill ä»»åŠ¡ç®¡ç†
- [Linux System Programming, 2nd - ch10 Signal Concepts](http://igm.univ-mlv.fr/~yahya/progsys/linux.pdf)
- [Ctrl-C and Ctrl-Break Signals](https://github.com/Microsoft/Console-Docs/blob/main/docs/ctrl-c-and-ctrl-break-signals.md)

Windows ä½¿ç”¨ tasklist åˆ—è¡¨è¿›ç¨‹ï¼ŒLinux ä½¿ç”¨ psï¼Œå¦å¤–ï¼ŒLinux çš„ kill å’Œ top å‘½ä»¤ç›¸å½“ä»»åŠ¡ç®¡ç†å™¨ã€‚

Linux ç³»ç»Ÿæœ‰ä¸°å¯Œçš„ç³»ç»Ÿä¿¡å·æœºåˆ¶ï¼Œæ¯”å¦‚ç»™ PID ä¸º 8466 çš„è¿›ç¨‹å‘é€ç»“æŸä¿¡å·ä½¿ä½¿å…¶å…³é—­ï¼š

    kill -s SIGINT 8466

kill å‘½ä»¤å‚è€ƒï¼š

    kill: usage: kill [-s sigspec | -n signum | -sigspec] pid | jobspec ... or kill -l [sigspec]

ä¿¡å·æœ‰å‡ åç§ï¼Œæœ€å¸¸ç”¨çš„æœ‰ SIGHUP é‡æ–°åŠ è½½è¿›ç¨‹ï¼ŒSIGKILL æ€æ­»ä¸€ä¸ªè¿›ç¨‹ï¼ŒSIGTERM å¸¸åœæ­¢ä¸€ä¸ªè¿›ç¨‹ã€‚

    kill -l
     1) SIGHUP       2) SIGINT       3) SIGQUIT      4) SIGILL       5) SIGTRAP
     6) SIGABRT      7) SIGBUS       8) SIGFPE       9) SIGKILL     10) SIGUSR1
    11) SIGSEGV     12) SIGUSR2     13) SIGPIPE     14) SIGALRM     15) SIGTERM
    16) SIGSTKFLT   17) SIGCHLD     18) SIGCONT     19) SIGSTOP     20) SIGTSTP
    21) SIGTTIN     22) SIGTTOU     23) SIGURG      24) SIGXCPU     25) SIGXFSZ
    26) SIGVTALRM   27) SIGPROF     28) SIGWINCH    29) SIGIO       30) SIGPWR
    31) SIGSYS      34) SIGRTMIN    35) SIGRTMIN+1  36) SIGRTMIN+2  37) SIGRTMIN+3
    38) SIGRTMIN+4  39) SIGRTMIN+5  40) SIGRTMIN+6  41) SIGRTMIN+7  42) SIGRTMIN+8
    43) SIGRTMIN+9  44) SIGRTMIN+10 45) SIGRTMIN+11 46) SIGRTMIN+12 47) SIGRTMIN+13
    48) SIGRTMIN+14 49) SIGRTMIN+15 50) SIGRTMAX-14 51) SIGRTMAX-13 52) SIGRTMAX-12
    53) SIGRTMAX-11 54) SIGRTMAX-10 55) SIGRTMAX-9  56) SIGRTMAX-8  57) SIGRTMAX-7
    58) SIGRTMAX-6  59) SIGRTMAX-5  60) SIGRTMAX-4  61) SIGRTMAX-3  62) SIGRTMAX-2
    63) SIGRTMAX-1  64) SIGRTMAX

Table 10-1. Signals

|   Signal  |             Description Default action            |                          |
|-----------|---------------------------------------------------|--------------------------|
| SIGABRT   | Sent by abort()                                   | Terminate with core dump |
| SIGALRM   | Sent by alarm()                                   | Terminate                |
| SIGBUS    | Hardware or alignment error                       | Terminate with core dump |
| SIGCHLD   | Child has terminated                              | Ignored                  |
| SIGCONT   | Process has continued after being stopped         | Ignored                  |
| SIGFPE    | Arithmetic exception                              | Terminate with core dump |
| SIGHUP    | Processâ€™s controlling terminal was closed         |                          |
|           | (most frequently, the user logged out)            | Terminate                |
| SIGILL    | Process tried to execute an illegal instruction   | Terminate with core dump |
| SIGINT    | User generated the interrupt character (Ctrl-C)   | Terminate                |
| SIGIO     | Asynchronous I/O event                            | Terminate ğŸ˜áµƒ             |
| SIGKILL   | Uncatchable process termination                   | Terminate                |
| SIGPIPE   | Process wrote to a pipe but there are no readers  | Terminate                |
| SIGPROF   | Profiling timer expired                           | Terminate                |
| SIGPWR    | Power failure                                     | Terminate                |
| SIGQUIT   | User generated the quit character (Ctrl-\)        | Terminate with core dump |
| SIGSEGV   | Memory access violation                           | Terminate with core dump |
| SIGSTKFLT | Coprocessor stack fault                           | Terminate ğŸ™áµ‡             |
| SIGSTOP   | Suspends execution of the process                 | Stop                     |
| SIGSYS    | Process tried to execute an invalid system call   | Terminate with core dump |
| SIGTERM   | Catchable process termination                     | Terminate                |
| SIGTRAP   | Break point encountered                           | Terminate with core dump |
| SIGTSTP   | User generated the suspend character (Ctrl-Z)     | Stop                     |
| SIGTTIN   | Background process read from controlling terminal | Stop                     |
| SIGTTOU   | Background process wrote to controlling terminal  | Stop                     |
| SIGURG    | Urgent I/O pending                                | Ignored                  |
| SIGUSR1   | Process-defined signal                            | Terminate                |
| SIGUSR2   | Process-defined signal                            | Terminate                |
| SIGVTALRM | Generated by setitimer() when called              |                          |
|           | with the ITIMER_VIRTUAL flag                      | Terminate                |
| SIGWINCH  | Size of controlling terminal window changed       | Ignored                  |
| SIGXCPU   | Processor resource limits were exceeded           | Terminate with core dump |
| SIGXFSZ   | File resource limits were exceeded                | Terminate with core dump |

ğŸ˜áµƒ The behavior on other Unix systems, such as BSD, is to ignore this signal.
ğŸ™áµ‡ The Linux kernel no longer generates this signal; it remains only for 
    backward compatibility.

Examples

Letâ€™s look at a couple of simple examples. This first one registers a signal handler for
SIGINT that simply prints a message and then terminates the program (as SIGINT would
do anyway):

```cpp
#include <stdlib.h>
#include <stdio.h>
#include <unistd.h>
#include <signal.h>
/* handler for SIGINT */
static void sigint_handler (int signo)
{
    /*
    * Technically, you shouldn't use printf() in a
    * signal handler, but it isn't the end of the
    * world. I'll discuss why in the section
    * "Reentrancy."
    */
    if (signo == SIGINT) printf ("Caught SIGINT!\n");
    exit (EXIT_SUCCESS);
}

int main (void)
{
    /*
    * Register sigint_handler as our signal handler
    * for SIGINT.
    */
    if (signal (SIGINT, sigint_handler) == SIG_ERR) {
        fprintf (stderr, "Cannot handle SIGINT!\n");
        exit (EXIT_FAILURE);
    }
    for (;;) 
        pause ();
    return 0;
}
```

Sending a Signal
The kill() system call, the basis of the common kill utility, sends a signal from one
process to another:

```cpp
#include <sys/types.h>
#include <signal.h>
int kill (pid_t pid, int signo);
```

In its normal use (i.e., if pid is greater than 0 ), kill() sends the signal signo to the
process identified by pid .

If pid is 0 , signo is sent to every process in the invoking processâ€™s process group.

If pid is âˆ’1 , signo is sent to every process for which the invoking process has permission
to send a signal, except itself and init. We will discuss the permissions regulating signal
delivery in the next subsection.

If pid is less than âˆ’1 , signo is sent to the process group -pid .

On success, kill() returns 0 . The call is considered a success so long as a single signal
was sent. On failure (no signals sent), the call returns âˆ’1 and sets errno to one of the
following:

- *EINVAL*
The signal specified by signo is invalid.

- *EPERM*
The invoking process lacks sufficient permissions to send a signal to any of the
requested processes.

- *ESRCH*
The process or process group denoted by pid does not exist or, in the case of a
process, is a zombie.


top å®æ—¶ç›‘è§†è¿›ç¨‹ï¼š

    Usage:
      top -hv | -bcEHiOSs1 -d secs -n max -u|U user -p pid(s) -o field -w [cols]

å‚æ•°è¯´æ˜ï¼š

- d : æ”¹å˜æ˜¾ç¤ºçš„æ›´æ–°é€Ÿåº¦ï¼Œæˆ–æ˜¯åœ¨äº¤è°ˆå¼æŒ‡ä»¤åˆ—( interactive command)æŒ‰ s
- q : æ²¡æœ‰ä»»ä½•å»¶è¿Ÿçš„æ˜¾ç¤ºé€Ÿåº¦ï¼Œå¦‚æœä½¿ç”¨è€…æ˜¯æœ‰ superuser çš„æƒé™ï¼Œåˆ™ top å°†ä¼šä»¥æœ€é«˜çš„ä¼˜å…ˆåºæ‰§è¡Œ
- c : åˆ‡æ¢æ˜¾ç¤ºæ¨¡å¼ï¼Œå…±æœ‰ä¸¤ç§æ¨¡å¼ï¼Œä¸€æ˜¯åªæ˜¾ç¤ºæ‰§è¡Œæ¡£çš„åç§°ï¼Œå¦ä¸€ç§æ˜¯æ˜¾ç¤ºå®Œæ•´çš„è·¯å¾„ä¸åç§°
- S : ç´¯ç§¯æ¨¡å¼ï¼Œä¼šå°†å·±å®Œæˆæˆ–æ¶ˆå¤±çš„å­è¡Œç¨‹ ( dead child process ) çš„ CPU time ç´¯ç§¯èµ·æ¥
- s : å®‰å…¨æ¨¡å¼ï¼Œå°†äº¤è°ˆå¼æŒ‡ä»¤å–æ¶ˆ, é¿å…æ½œåœ¨çš„å±æœº
- i : ä¸æ˜¾ç¤ºä»»ä½•é—²ç½® (idle) æˆ–æ— ç”¨ (zombie) çš„è¡Œç¨‹
- n : æ›´æ–°çš„æ¬¡æ•°ï¼Œå®Œæˆåå°†ä¼šé€€å‡º top
- b : æ‰¹æ¬¡æ¡£æ¨¡å¼ï¼Œæ­é… "n" å‚æ•°ä¸€èµ·ä½¿ç”¨ï¼Œå¯ä»¥ç”¨æ¥å°† top çš„ç»“æœè¾“å‡ºåˆ°æ¡£æ¡ˆå†…

ç¤ºèŒƒï¼Œ-p ç›‘è§†æŒ‡å®šè¿›ç¨‹ï¼Œ-i ä¸ç›‘è§†ç©ºé—²è¿›ç¨‹ï¼š

    top -n 3 -p 8466
    top -n 3 -i

ps è¿›ç¨‹ç»Ÿè®¡å‘½ä»¤ï¼Œé€‰é¡¹åˆ†ä¸º 5 ç±»ï¼Œå¯ä»¥é€šè¿‡å¸®åŠ©å‘½ä»¤æŸ¥çœ‹ï¼Œ`ps --help a` æŸ¥çœ‹æ‰€æœ‰é€‰é¡¹ï¼š

    ps --help <simple|list|output|threads|misc|all>

å¯ä»¥æ¯”è¾ƒï¼Œä¸åŒçš„é€‰é¡¹å¯¹è¾“å‡ºçš„å½±å“ï¼š

    # åˆ—è¡¨ç”¨æˆ·è¿›ç¨‹
    ps

    # -e åˆ—è¡¨æ‰€æœ‰è¿›ç¨‹ï¼Œå¤–åŠ  -l é•¿æ ¼å¼è¾“å‡ºã€-f å¸¦å‘½ä»¤è¡Œçš„å…¨æ ¼å¼è¾“å‡º
    ps -e
    ps -el
    ps -elf

é€‰é¡¹å‚è€ƒï¼š

    Usage:
     ps [options]

    Basic options:
     -A, -e               all processes
     -a                   all with tty, except session leaders
      a                   all with tty, including other users
     -d                   all except session leaders
     -N, --deselect       negate selection
      r                   only running processes
      T                   all processes on this terminal
      x                   processes without controlling ttys

    Selection by list:
     -C <command>         command name
     -G, --Group <GID>    real group id or name
     -g, --group <group>  session or effective group name
     -p, p, --pid <PID>   process id
            --ppid <PID>  parent process id
     -q, q, --quick-pid <PID>
                          process id (quick mode)
     -s, --sid <session>  session id
     -t, t, --tty <tty>   terminal
     -u, U, --user <UID>  effective user id or name
     -U, --User <UID>     real user id or name

      The selection options take as their argument either:
        a comma-separated list e.g. '-u root,nobody' or
        a blank-separated list e.g. '-p 123 4567'

    Output formats:
     -F                   extra full
     -f                   full-format, including command lines
      f, --forest         ascii art process tree
     -H                   show process hierarchy
     -j                   jobs format
      j                   BSD job control format
     -l                   long format
      l                   BSD long format
     -M, Z                add security data (for SELinux)
     -O <format>          preloaded with default columns
      O <format>          as -O, with BSD personality
     -o, o, --format <format>
                          user-defined format
      s                   signal format
      u                   user-oriented format
      v                   virtual memory format
      X                   register format
     -y                   do not show flags, show rss vs. addr (used with -l)
         --context        display security context (for SELinux)
         --headers        repeat header lines, one per page
         --no-headers     do not print header at all
         --cols, --columns, --width <num>
                          set screen width
         --rows, --lines <num>
                          set screen height

    Show threads:
      H                   as if they were processes
     -L                   possibly with LWP and NLWP columns
     -m, m                after processes
     -T                   possibly with SPID column

    Miscellaneous options:
     -c                   show scheduling class with -l option
      c                   show true command name
      e                   show the environment after command
      k,    --sort        specify sort order as: [+|-]key[,[+|-]key[,...]]
      L                   show format specifiers
      n                   display numeric uid and wchan
      S,    --cumulative  include some dead child process data
     -y                   do not show flags, show rss (only with -l)
     -V, V, --version     display version information and exit
     -w, w                unlimited output width

            --help <simple|list|output|threads|misc|all>
                          display help and exit


# ğŸš© grepã€sed åŠ awk æ–‡æœ¬å¤„ç†å·¥å…·
https://github.com/wuzhouhui/awk
https://www.cnblogs.com/quincyhu/p/5884390.html
https://www.cnblogs.com/wangqiguo/p/6718512.html
https://www.cnblogs.com/emanlee/p/3327576.html

è¿™äº›å·¥å…·åŠŸèƒ½éå¸¸ä¸‹ç»†ï¼Œä»¥è‡³äºä¸‹æ˜¾å¾—ç´¯èµ˜éš¾ä»¥æŒæ¡ï¼Œå®ƒä»¬å…·æœ‰ä¸€å®šçš„ç¨‹åºåŒ–èƒ½åŠ›ï¼Œå‡ ä¹
å¯ä»¥çœ‹ä½œå®ç° ï¼Œå®ƒä»¬å¯ä»¥çœ‹åšé¢†åŸŸä¸“ç”¨è¯­è¨€ DSL æ¥çœ‹å¾…ã€‚

  + find æ ¹æ® expression æŒ‡å®šçš„æµ‹è¯•æ¡ä»¶æ¥æŸ¥æ–‡ä»¶ï¼Œæ–‡ä»¶åã€è·¯å¾„ã€æ—¶é—´ã€inode ä¿¡æ¯ç­‰ç­‰ï¼›
	+ sed - Stream EDitor æµç¼–è¾‘å™¨ä»¥è¡Œä¸ºå•ä½çš„æ–‡æœ¬ç¼–è¾‘å·¥å…·ï¼Œå¯ä»¥ç›´æ¥ä¿®æ”¹æ¡£æ¡ˆï¼›
	+ awk æŠ¥å‘Šç”Ÿæˆå™¨ï¼Œä¾‹å¦‚å°† csv æ ¼å¼åŒ–ä»¥åæ˜¾ç¤ºã€‚AWK å–åè‡ªä¸‰ä½åˆ›å§‹äººå§“æ° Alfred Aho - Peter Weinberger - Brian Kernighanã€‚

ä½¿ç”¨ find & grep æŸ¥æ‰¾æ–‡ä»¶åæˆ–å†…å®¹åŒ¹é…çš„æ–‡ä»¶ï¼Œfind è¿˜å¯ä»¥å¯¹åŒ¹é…çš„æ–‡ä»¶è°ƒç”¨å‘½ä»¤ç»§ç»­å¤„ç†:

		find path -name justname
		find path -regex ".*fullpathtest"
    grep -r sometext path

		find venv/bin -ctime 2 -exec ls -la "{}" \;
		find venv/bin -cmin 0 -exec ls -la {} \;

ä»¥ä¸Šä¸¤è¡Œ find åˆ†åˆ«ä¼šå°† 2 å¤©å‰ 3 å†…æˆ–è€… 1 å†…ä¿®æ”¹è¿‡çš„æ–‡ä»¶åˆ—è¡¨å‡ºæ¥ã€‚æ—¶é—´æŒ‡å®šå¯ä»¥ä¸‹ä½¿ç”¨ amin atime cmin ctime mmin mtime ç­‰ç­‰ã€‚

find

		Usage: find [-H] [-L] [-P] [-Olevel] [-D debugopts] [path...] [expression]

grep ä¸»è¦å‚æ•°:

-c : åªè¾“å‡ºåŒ¹é…çš„è¡Œ
-I : ä¸åŒºåˆ†å¤§å°å†™
-h : æŸ¥è¯¢å¤šæ–‡ä»¶æ—¶ä¸æ˜¾ç¤ºæ–‡ä»¶å
-l : æŸ¥è¯¢å¤šæ–‡ä»¶æ—¶, åªè¾“å‡ºåŒ…å«åŒ¹é…å­—ç¬¦çš„æ–‡ä»¶å
-n : æ˜¾ç¤ºåŒ¹é…çš„è¡Œå·åŠè¡Œ
-v : æ˜¾ç¤ºä¸åŒ…å«åŒ¹é…æ–‡æœ¬çš„æ‰€æœ‰è¡Œ(æˆ‘ç»å¸¸ç”¨é™¤å»grepæœ¬èº«)

    grep "è¦åŒ¹é…çš„å†…å®¹" æ–‡ä»¶å
    grep 'test' d* æ˜¾ç¤ºæ‰€æœ‰ä»¥då¼€å¤´çš„æ–‡ä»¶ä¸­åŒ…å«testçš„è¡Œ
    grep 'test' aa bb cc æ˜¾ç¤ºåœ¨ aa bb cc æ–‡ä»¶ä¸­åŒ…å«testçš„è¡Œ
    grep '[a-z]\{5}\' aa æ˜¾ç¤ºæ‰€æœ‰åŒ…å«å­—ç¬¦ä¸²è‡³å°‘æœ‰5ä¸ªè¿ç»­å°å†™å­—æ¯çš„ä¸²

sed å‘½ä»¤æ”¯æŒæ­£åˆ™ï¼Œå’Œ Vim ä¸­ä½¿ç”¨çš„è¡Œå·åŒºé—´è¡¨è¾¾ç›¸ä¼¼ï¼Œå‚è€ƒ man sed å…³äº address éƒ¨åˆ†ã€‚

sed è¯­æ³•å‚è€ƒ: 

    sed [OPTION]... {script-only-if-no-other-script} [input-file]...
    sed [options] 'command' file(s)
    sed [options] -f scriptfile file(s)

é€‰é¡¹å‚æ•°ä½¿ç”¨ï¼š

    -n ï¼šä½¿ç”¨å®‰é™(silent)æ¨¡å¼ï¼Œåªè¾“å‡ºç»è¿‡ç‰¹æ®Šå¤„ç†çš„å†…å®¹æ‰ä¼šè¢«åˆ—å‡ºæ¥ã€‚
    -e ï¼šç›´æ¥åœ¨å‘½ä»¤åˆ—æ¨¡å¼ä¸Šè¿›è¡Œ sed çš„åŠ¨ä½œç¼–è¾‘ï¼›
    -f ï¼šè„šæœ¬æ‰§è¡Œ -f filename è¿è¡Œ filename å†…çš„ sed åŠ¨ä½œï¼›
    -r ï¼šsed çš„åŠ¨ä½œæ”¯æŒçš„æ˜¯å»¶ä¼¸å‹æ­£è§„è¡¨ç¤ºæ³•çš„è¯­æ³•ã€‚(é»˜è®¤æ˜¯åŸºç¡€æ­£è§„è¡¨ç¤ºæ³•è¯­æ³•)
    -i ï¼šç›´æ¥ä¿®æ”¹è¯»å–çš„æ–‡ä»¶å†…å®¹ï¼Œè€Œä¸æ˜¯è¾“å‡ºåˆ°ç»ˆç«¯ã€‚

Zero-address commands

       : label   - Label for b and t commands.
       #comment  - The comment extends until the next newline 
                   or the end of a -e script fragment.
       }         - The closing bracket of a { } block.

Zero- or One- address commands

       =         Print the current line number.
       a \text   Append text, which has each embedded newline preceded by a backslash.
       i \text   Insert text, which has each embedded newline preceded by a backslash.
       
       q [exit-code]
              Immediately  quit  the sed script without processing any more input, 
              except that if auto-print is not disabled the current pattern space 
              will be printed.
              The exit code argument is a GNU extension.

       Q [exit-code]
              Immediately quit the sed script without processing any more input.
              This is a GNU extension.

       r filename
              Append text read from filename.

       R filename
              Append a line read from filename.  
              Each invocation of the command reads a line from the file.  
              This is a GNU extension.

å…¶å®ƒå‘½ä»¤å‚è€ƒæ–‡æ¡£ Commands which accept address ranges

å‘½ä»¤ä½¿ç”¨å‚è€ƒï¼š

   + d  Delete å†…å®¹åˆ é™¤å‘½ä»¤
   + c  Change å†…å®¹å˜æ›´å‘½ä»¤
   + s  Substitute æ›¿æ¢ï¼Œæ­£åˆ™è¡¨è¾¾å¼æ ¼å¼ 's/pat/sub/flags'ï¼Œç´§è·Ÿç€ s çš„å­—ç¬¦ä¸ºåˆ†éš”ç¬¦
     + g flag - Global, whold line process, not only the first one match.
     + i flag - Insenstive
     + p flag - Print that line has changed

```sh
  lines=$(printf "line %s\n" $(seq 5))

  # Delete line content
  echo "$lines" | sed '2d'    # delete line 2
  echo "$lines" | sed '2,4d'  # delete line 2 to 4
  echo "$lines" | sed '2,$d'  # delete line 2 to end
  echo "$lines" | sed '$d'    # delete last line
  echo "$lines" | sed '/li/d' # delete all line that contains li
  echo "$lines" | sed '/3$/d' # delete all line that endswith 3

  # Change line content
  echo "$lines" | sed '2c new content'     # line 2 ==> new content
  echo "$lines" | sed '/pat/c new content' # all match line change to new content

  # Substitute
  lines=$(printf "line ID %s\n" $(seq 5));
  echo "$lines" | sed 's/id/id/gi'         # ID ==> id
  echo "$lines" | sed 's/^l/L/gi'          # head l ==> L
  echo "$lines" | sed -n 's/3/3rd/p'       # only print that modified 3 ==> 3rd
  echo "$lines" | sed -n 's/3/&rd/p'       # same to above, 3 => 3rd
  echo "$lines" | sed -n 's/l\(..\)e/\1/p' # line => in
```

å†…å®¹å®šä½ Addressing åœ¨ sed å‘½ä»¤ä¸­åº”ç”¨éå¸¸å¹¿æ³›ï¼š

   + æä¾›ä¸€ä¸ªå®šä½ï¼Œå•ä¸ªæ•°å­—è¡¨ç¤ºå…·ä½“è¡Œå·ï¼Œä¹Ÿå¯ä»¥æä¾›æ­£åˆ™æ¨¡å¼åŒ¹é…
   + æä¾›ä¸¤ä¸ªå®šä½ï¼Œè¡¨ç¤ºä¸€ä¸ªåŒºé—´ï¼Œå¯ä»¥æ˜¯é€—å·åˆ†éš”çš„ä¸¤ä¸ªæ•°å­—ï¼Œæˆ–æ˜¯æ­£åˆ™æ¨¡å¼æ··åˆ

The following address types are supported:

       number Match only the specified line number.

       first~step
              Match  every  step'th  line  starting with line first.
              For example, ``sed -n 1~2p'' will print all the odd-numbered lines, 
              and the address 2~5 will match every fifth line, starting with the second.
              first can be zero; in this case, sed operates as if it were equal to step.
              (This is an extension.)

       $      Match the last line.

       /regexp/
              Match lines matching the regular expression regexp.  
              Matching is performed on the current pattern space, 
              which can be modified with commands such as ``s///''.

       \cregexpc
              Match lines matching the regular expression regexp.  The c may be any character.

       GNU sed also supports some special 2-address forms:

       0,addr2
              Start out in "matched first address" state, until addr2 is found. 
              This is similar to 1,addr2, except that if addr2 matches 
              the very first line  of  input  the  0,addr2 form will be at 
              the end of its range, whereas the 1,addr2 form will still be 
              at the beginning of its range.  
              This works only when addr2 is a regular expression.

       addr1,+N
              Will match addr1 and the N lines following addr1.

       addr1,~N
              Will match addr1 and the lines following addr1 until the next line 
              whose input line number is a multiple of N.


```sh
    # è¾“å‡ºé€‰å®šè¡ŒåŒºé—´å†…å®¹ï¼Œ/a/ åˆ° /b/ åŒ¹é…è¡ŒèŒƒå›´å†…å®¹éƒ½æ‰“å°å‡ºæ¥
    $ sed -n '/a/,/b/p' example

    # æ‰“å°ç¬¬ 5 è¡Œåˆ°ç¬¬ä¸€ä¸ªåŒ…å«ä»¥ test å¼€å¤´çš„è¡Œä¹‹é—´çš„å†…å®¹ã€‚
    $ sed -n '5,/^test/p' example

    # å¯¹äº /a/ å’Œ /b/ åŒ¹é…ä¹‹é—´çš„è¡Œï¼Œç»™æ¯è¡Œæœ«å°¾æ·»åŠ å­—ç¬¦ä¸² sed testã€‚
    $ sed '/a/,/b/s/$/sed test/' example
```

å…¶å®ƒå‘½ä»¤ä½¿ç”¨å‚è€ƒå¦‚ä¸‹ï¼Œå¤šä¸ªå‘½ä»¤ä½¿ç”¨ {} åŒ…æ‹¬ï¼Œå¹¶ä½¿ç”¨ ; åˆ†éš”ï¼š

```sh
    # e - expression script
    $ sed -e '1,5d' -e 's/test/check/' example
    # å¤šç‚¹ç¼–è¾‘ (-eï¼‰ç”¨æ¥æ‰§è¡Œå¤šæ¡è„šæœ¬å‘½ä»¤ï¼Œæ•°æ®å†…å®¹å˜åŠ¨ä¾æ¬¡ä¼ é€’ã€‚

    # r - Read from file
    $ sed '/test/r file' example
    # è¯»å– file æ–‡ä»¶å†…å®¹æ˜¾ç¤ºåœ¨ test åŒ¹é…çš„è¡Œåé¢ï¼Œå°±æ˜¯å°† file å†…å®¹ç»„åˆåˆ°åŒ¹é…çš„è¡Œå†…å®¹åã€‚

    # w - Write to file
    $ sed -n '/test/w file' example
    # å°† example æ–‡ä»¶ä¸­æ‰€æœ‰åŒ…å« test çš„è¡Œå†…å®¹å†™å…¥ file æŒ‡å®šçš„æ–‡ä»¶ã€‚

    # a - Append text
    $ sed '/^test/a\something' example
    # è¿½åŠ æ–‡æœ¬ something åˆ° test åŒ¹é…è¡Œçš„åé¢ã€‚

    # i - Insert text
    $ sed '3i Hi' example # åœ¨ç¬¬ä¸‰è¡Œå‰æ’å…¥ Hi 
    $ sed '/test/i\new line' example 
    # å¦‚æœåŒ¹é…åˆ° testï¼Œåˆ™æ’å…¥åæ–œæ åé¢çš„æ–‡æœ¬åˆ°å½“å‰è¡Œå‰é¢ã€‚

    # n - Next line
    $ sed '/test/{ n; s/aa/bb/; }' example
    # å¦‚æœåŒ¹é…åˆ° test åˆ™è¯»å–ä¸‹ä¸€è¡Œï¼Œå¹¶æ‰§è¡Œ s/ss/bb/ æ›¿æ¢å½“å‰è¡Œå†…å®¹ï¼Œæ‰“å°è¯¥è¡Œã€‚

    # y/source/dest/  - Transliterate
    $ sed '1,10y/abcde/ABCDE/' example
    # æŠŠ 1 - 10 è¡Œæ‰€æœ‰ abcde è½¬å˜ä¸ºå¤§å†™ï¼Œæ³¨æ„ï¼Œæ­£åˆ™è¡¨è¾¾å¼å…ƒå­—ç¬¦ä¸èƒ½ä½¿ç”¨è¿™ä¸ªå‘½ä»¤ã€‚

    # q - Quit sed
    $ sed '10q' example # æ‰“å°å®Œç¬¬ 10 è¡Œåé€€å‡º sedã€‚
```

Pattern space & hold space çš„ä¿æŒã€è·å–ã€äº¤æ¢æ“ä½œï¼š

   + h H    Copy/append pattern space to hold space.
   + g G    Copy/append hold space to pattern space.
   + x      Exchange the contents of the hold and pattern spaces.

```sh
  lines=$(printf "line %s\n" {1..5});
  echo "$lines" | sed -e '/line/h' -e 's/line/L/' -e '/$/G'
```

å¤„ç†çš„æ•°æ®æ¯ä¸€è¡Œéƒ½ä¼šè¢« sed ä¿å­˜åœ¨ä¸€ä¸ª pattern space ä¸´æ—¶ç¼“å†²åŒºä¸­ï¼Œé™¤éè¡Œè¢«åˆ é™¤
æˆ–è€…è¾“å‡ºè¢«å–æ¶ˆï¼Œå¦åˆ™æ‰€æœ‰è¢«å¤„ç†çš„è¡Œéƒ½å°†æ‰“å°åœ¨å±å¹•ä¸Šã€‚æ¥ç€æ¸…ç©ºç¼“å†²ç©ºé—´ï¼Œå¹¶å­˜å…¥æ–°
ä¸€è¡Œæ•°æ®ç­‰å¾…å¤„ç†ã€‚

ä¸Šé¢ä¾‹å­é‡Œï¼Œæ‰¾åˆ°åŒ¹é… line çš„è¡Œï¼Œh å‘½ä»¤å°†å…¶å¤åˆ¶å¹¶å­˜å…¥ä¸€ä¸ªç§°ä¸º hold space çš„ç‰¹æ®Š
ç¼“å†²åŒºå†…ã€‚åé¢ä¸€æ¡è¯­å¥ä¸­çš„ /$/ è¡¨ç¤ºåˆ°è¾¾æ‰€æœ‰æ•°æ®ç»“å°¾ï¼Œæœ€åä¸€è¡Œåï¼ŒG å‘½ä»¤å–å‡ºç¼“å†²
åŒºçš„è¡Œæ•°æ® append å›æ¨¡å¼ç©ºé—´ä¸­ã€‚

ç®€å•æ¥è¯´ï¼Œä»»ä½•åŒ…å« line çš„è¡Œéƒ½è¢«å¤åˆ¶å¹¶è¿½åŠ åˆ°æ¯ä¸€è¡Œçš„åé¢ã€‚å¦‚æœæ²¡æœ‰åŒ¹é…åˆ° line åˆ™
ç¼“å†²åŒºçš„æ—§æ•°æ®ä¸ä¼šè¢«æ›´æ–°ï¼Œè¯»å–å¹¶è¾“å‡ºæ—¶å¾—åˆ°çš„æ˜¯æ—§æ•°æ®ã€‚

äº’æ¢æ¨¡å¼ç©ºé—´å’Œä¿æŒç¼“å†²åŒºçš„å†…å®¹ï¼Œå¦‚ä¸‹ï¼Œä¹Ÿå°±æ˜¯æŠŠ test ä¸ check ç›¸åº”åŒ¹é…çš„è¡Œäº’æ¢ã€‚

    $ sed -e '/test/h' -e '/check/x' example


æ­£åˆ™è¡¨è¾¾æ³¨æ„è¦ä½¿ç”¨æ–œæ è½¬ä¹‰ï¼Œä»¥ä¸‹ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼æ¥è¿‡æ»¤ç£ç›˜ä¸Š MB GB å¤§å°çš„æ–‡ä»¶é¡¹ç›®ï¼š

    df -h | sed -n '/[5-9][0-9]%/p'
    du -hd 10 /data | sed -n '/^[0-9]\+G/p'
    du -hd 10 /data | sed -n '/^[0-9]\{3\}M/p'



awk è¯­æ³•æ ¼å¼

    awk [options] 'script' var=value file(s) 
    awk [options] -f scriptfile var=value file(s) 

å¸¸ç”¨å‘½ä»¤é€‰é¡¹

    -F fs fs æŒ‡å®šè¾“å…¥åˆ†éš”ç¬¦ï¼Œfså¯ä»¥æ—¶å­—ç¬¦ä¸²æˆ–æ­£åˆ™è¡¨è¾¾å¼
    -v var=value èµ‹å€¼ä¸€ä¸ªç”¨æˆ·å®šä¹‰å˜é‡ï¼Œå°†å¤–éƒ¨å˜é‡ä¼ é€’ç»™awk
    -f scriptfile ä»è„šæœ¬æ–‡ä»¶ä¸­è¯»å–awkå‘½ä»¤


awk å®é™…ä¸Šæ˜¯ä¸€é—¨å¾ˆå¤æ‚çš„è„šæœ¬è¯­è¨€ï¼Œè¿˜æœ‰åƒ C è¯­è¨€ä¸€æ ·çš„åˆ†æ”¯å’Œå¾ªç¯ç»“æ„ï¼Œä½†æ˜¯åŸºæœ¬è¯­æ³•å’Œ sed ç±»ä¼¼ã€‚

awk åˆ†éš”ç¬¦å’Œåˆ—åˆ†éš”ç¬¦éƒ½å¯ä»¥è‡ªå®šä¹‰ï¼Œæ¯”å¦‚ /etc/passwd æ–‡ä»¶çš„æ¯ä¸€è¡Œæœ‰å¹²ä¸ªå­—æ®µï¼Œå­—æ®µä¹‹é—´ä»¥ : åˆ†éš”ã€‚å¯ä»¥é‡æ–°å®šä¹‰ awk çš„åˆ—åˆ†éš”ç¬¦ä¸º : å¹¶ä»¥åˆ—ä¸ºå•ä½å¤„ç†è¿™ä¸ªæ–‡ä»¶ã€‚

å’Œ sed ä¸€æ ·ï¼Œawk å¤„ç†çš„æ–‡ä»¶æ—¢å¯ä»¥ç”±æ ‡å‡†è¾“å…¥é‡å®šå‘å¾—åˆ°ï¼Œä¹Ÿå¯ä»¥å½“å‘½ä»¤è¡Œå‚æ•°ä¼ å…¥ï¼Œç¼–è¾‘å‘½ä»¤å¯ä»¥ç›´æ¥å½“å‘½ä»¤è¡Œå‚æ•°ä¼ å…¥ï¼Œä¹Ÿå¯ä»¥ç”¨ -f å‚æ•°æŒ‡å®šä¸€ä¸ªè„šæœ¬æ–‡ä»¶ã€‚

å’Œ sed ç±»ä¼¼ï¼Œpattern æ˜¯æ­£åˆ™è¡¨è¾¾å¼ï¼Œactions æ˜¯ä¸€ç³»åˆ—æ“ä½œï¼Œç¼–è¾‘å‘½ä»¤çš„æ ¼å¼ä¸ºï¼š

    /pattern/{actions}

    ls -l|awk '!(i=!i)'  æ‰“å°å¥‡æ•°è¡Œï¼Œçœç•¥é»˜è®¤æ‰“å°è¡¨è¾¾
    ls -l|awk 'i=!i' æ‰“å°å¶æ•°è¡Œï¼Œçœç•¥é»˜è®¤æ‰“å°è¡¨è¾¾
    ls -l|awk 'i=!i{print $0}' ä¸Šä¸€è¡Œå®Œæ•´çš„è¡¨è¾¾
    ls -l|awk '!(i=!i){print $1}' æ‰“å°ç¬¬ä¸€åˆ—

æ‰“å°æ–‡ä»¶åˆ—è¡¨ä¸­çš„åç§°å­—æ®µï¼š

    ls -l |awk '{print $NF}'
    ls -l |awk '{print $9}'

awk è¿ç®—ï¼Œæ‰€æœ‰ç”¨ä½œç®—æœ¯è¿ç®—ç¬¦è¿›è¡Œæ“ä½œæ—¶ï¼Œæ“ä½œæ•°è‡ªåŠ¨è½¬ä¸ºæ•°å€¼ï¼Œæ‰€æœ‰éæ•°å€¼éƒ½å˜ä¸º0

    ç®—æœ¯è¿ç®—ï¼šï¼ˆ+ï¼Œ-ï¼Œ*ï¼Œ/ï¼Œ&ï¼Œï¼ï¼Œâ€¦â€¦ï¼Œ++ï¼Œ--ï¼‰
    èµ‹å€¼è¿ç®—ï¼šï¼ˆ=ï¼Œ +=ï¼Œ -=ï¼Œ*=ï¼Œ/=ï¼Œ%=ï¼Œâ€¦â€¦=ï¼Œ**=ï¼‰
    é€»è¾‘è¿ç®—ç¬¦: (||, &&)
    å…³ç³»è¿ç®—ç¬¦ï¼šï¼ˆ<, <=, >,>=,!=, ==ï¼‰
    æ­£åˆ™è¿ç®—ç¬¦ï¼šï¼ˆï½ï¼Œï½!ï¼‰(åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼ï¼Œä¸ä¸åŒ¹é…æ­£åˆ™è¡¨è¾¾å¼)

    awk 'BEGIN{a="100testa";if(a ~ /^100*/){print "ok";}}'

awk æ•°å€¼å’Œå­—ç¬¦ä¸²æ¯”è¾ƒé—®é¢˜

    å¾—åˆ°çš„è¾“å‡ºæ˜¯ï¼š
    echo "10025350462330387914 10025350462330388480" | awk '{if ($1 == $2) print $1 " = " $2; else print "NO"}'
 
    awk è‡ªåŠ¨å°† $1,$2è½¬åŒ–æˆäº†æ•°å€¼å‹ï¼Œå·²ç»è¶Šç•Œï¼Œæ‰€ä»¥ç›¸ç­‰äº†ã€‚ä¿®æ­£æ–¹æ³•ï¼š
    echo "10025350462330387914 10025350462330388480" | awk '{if ($1"" == $2"") print $1 " = " $2; else print "NO"}'

    du -hd 10 /data | awk 'int($1)>100'
    du -d 10 /data  | awk -n '{if (int($1) > 1000000) print $0}'
    du -hd 10 /data | awk -n '($1 ~ /^[0-9]+G/)'

AWKå†…ç½®å˜é‡

    $n          å½“å‰è®°å½•çš„ç¬¬nä¸ªå­—æ®µï¼Œæ¯”å¦‚nä¸º1è¡¨ç¤ºç¬¬ä¸€ä¸ªå­—æ®µï¼Œnä¸º2è¡¨ç¤ºç¬¬äºŒä¸ªå­—æ®µã€‚
    $0          è¿™ä¸ªå˜é‡åŒ…å«æ‰§è¡Œè¿‡ç¨‹ä¸­å½“å‰è¡Œçš„æ–‡æœ¬å†…å®¹ã€‚
    ARGC        å‘½ä»¤è¡Œå‚æ•°çš„æ•°ç›®ã€‚
    ARGIND      å‘½ä»¤è¡Œä¸­å½“å‰æ–‡ä»¶çš„ä½ç½®ï¼ˆä»0å¼€å§‹ç®—ï¼‰ã€‚
    ARGV        åŒ…å«å‘½ä»¤è¡Œå‚æ•°çš„æ•°ç»„ã€‚
    CONVFMT     æ•°å­—è½¬æ¢æ ¼å¼ï¼ˆé»˜è®¤å€¼ä¸º%.6gï¼‰ã€‚
    ENVIRON     ç¯å¢ƒå˜é‡å…³è”æ•°ç»„ã€‚
    ERRNO       æœ€åä¸€ä¸ªç³»ç»Ÿé”™è¯¯çš„æè¿°ã€‚
    FIELDWIDTHS å­—æ®µå®½åº¦åˆ—è¡¨ï¼ˆç”¨ç©ºæ ¼é”®åˆ†éš”ï¼‰ã€‚
    FILENAME    å½“å‰è¾“å…¥æ–‡ä»¶çš„åã€‚
    NR          è¡¨ç¤ºè®°å½•æ•°ï¼Œåœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­å¯¹åº”äºå½“å‰çš„è¡Œå·
    FNR         åŒNR ï¼Œä½†ç›¸å¯¹äºå½“å‰æ–‡ä»¶ã€‚
    FS          å­—æ®µåˆ†éš”ç¬¦ï¼ˆé»˜è®¤æ˜¯ä»»ä½•ç©ºæ ¼ï¼‰ã€‚
    IGNORECASE  å¦‚æœä¸ºçœŸï¼Œåˆ™è¿›è¡Œå¿½ç•¥å¤§å°å†™çš„åŒ¹é…ã€‚
    NF          å¯¹åº”äºå½“å‰çš„å­—æ®µæ•°ã€‚ print $NF è¡Œä¸­æœ€åä¸€ä¸ªå­—æ®µ
    OFMT        æ•°å­—çš„è¾“å‡ºæ ¼å¼ï¼ˆé»˜è®¤å€¼æ˜¯%.6gï¼‰ã€‚
    OFS         è¾“å‡ºå­—æ®µåˆ†éš”ç¬¦ï¼ˆé»˜è®¤å€¼æ˜¯ä¸€ä¸ªç©ºæ ¼ï¼‰ã€‚
    ORS         è¾“å‡ºè®°å½•åˆ†éš”ç¬¦ï¼ˆé»˜è®¤å€¼æ˜¯ä¸€ä¸ªæ¢è¡Œç¬¦ï¼‰ã€‚
    RS          è®°å½•åˆ†éš”ç¬¦ï¼ˆé»˜è®¤æ˜¯ä¸€ä¸ªæ¢è¡Œç¬¦ï¼‰ã€‚
    RSTART      ç”±matchå‡½æ•°æ‰€åŒ¹é…çš„å­—ç¬¦ä¸²çš„ç¬¬ä¸€ä¸ªä½ç½®ã€‚
    RLENGTH     ç”±matchå‡½æ•°æ‰€åŒ¹é…çš„å­—ç¬¦ä¸²çš„é•¿åº¦ã€‚
    SUBSEP      æ•°ç»„ä¸‹æ ‡åˆ†éš”ç¬¦ï¼ˆé»˜è®¤å€¼æ˜¯34ï¼‰ã€‚


å†…ç½®å‡½æ•°

    atan2( y, x )   è¿”å› y/x çš„åæ­£åˆ‡ã€‚
    cos( x )    è¿”å› x çš„ä½™å¼¦ï¼›x æ˜¯å¼§åº¦ã€‚
    sin( x )    è¿”å› x çš„æ­£å¼¦ï¼›x æ˜¯å¼§åº¦ã€‚
    exp( x )    è¿”å› x å¹‚å‡½æ•°ã€‚
    log( x )    è¿”å› x çš„è‡ªç„¶å¯¹æ•°ã€‚
    sqrt( x )   è¿”å› x å¹³æ–¹æ ¹ã€‚
    int( x )    è¿”å› x çš„æˆªæ–­è‡³æ•´æ•°çš„å€¼ã€‚
    rand( ) è¿”å›ä»»æ„æ•°å­— nï¼Œå…¶ä¸­ 0 <= n < 1ã€‚
    srand( [expr] ) å°† rand å‡½æ•°çš„ç§å­å€¼è®¾ç½®ä¸º Expr å‚æ•°çš„å€¼ï¼Œæˆ–å¦‚æœçœç•¥ Expr å‚æ•°åˆ™ä½¿ç”¨æŸå¤©çš„æ—¶é—´ã€‚è¿”å›å…ˆå‰çš„ç§å­å€¼ã€‚

    mktime( YYYY MM dd HH MM ss[ DST])  ç”Ÿæˆæ—¶é—´æ ¼å¼

    strftime([format [, timestamp]])    æ ¼å¼åŒ–æ—¶é—´è¾“å‡ºï¼Œå°†æ—¶é—´æˆ³è½¬ä¸ºæ—¶é—´å­—ç¬¦ä¸² å…·ä½“æ ¼å¼ï¼Œè§ä¸‹è¡¨.

    systime()   å¾—åˆ°æ—¶é—´æˆ³,è¿”å›ä»1970å¹´1æœˆ1æ—¥å¼€å§‹åˆ°å½“å‰æ—¶é—´(ä¸è®¡é—°å¹´)çš„æ•´ç§’æ•°


    gsub( Ere, Repl, [ In ] )   é™¤äº†æ­£åˆ™è¡¨è¾¾å¼æ‰€æœ‰å…·ä½“å€¼è¢«æ›¿ä»£è¿™ç‚¹ï¼Œå®ƒå’Œ sub å‡½æ•°å®Œå…¨ä¸€æ ·åœ°æ‰§è¡Œã€‚
    sub( Ere, Repl, [ In ] )    ç”¨ Repl æ›¿æ¢ In ä¸­çš„å­—ç¬¦ä¸²ï¼Œç”± Ere å‚æ•°æŒ‡å®šçš„æ‰©å±•æ­£åˆ™è¡¨è¾¾å¼è¿›è¡ŒåŒ¹é…ã€‚sub å‡½æ•°è¿”å›æ›¿æ¢çš„æ•°é‡ã€‚å‡ºç°åœ¨ Repl çš„ & å­—ç¬¦ç”±åŒ¹é…çš„å­—ç¬¦ä¸²æ›¿æ¢ã€‚å¦‚æœæœªæŒ‡å®š In å‚æ•°ï¼Œç¼ºçœå€¼æ˜¯æ•´ä¸ªè®°å½•ï¼ˆ$0 è®°å½•å˜é‡ï¼‰ã€‚
    index( String1, String2 )   åœ¨ç”± String1 å‚æ•°æŒ‡å®šçš„å­—ç¬¦ä¸²ï¼ˆå…¶ä¸­æœ‰å‡ºç° String2 æŒ‡å®šçš„å‚æ•°ï¼‰ä¸­ï¼Œè¿”å›ä½ç½®ï¼Œä» 1 å¼€å§‹ç¼–å·ã€‚å¦‚æœ String2 å‚æ•°ä¸åœ¨ String1 å‚æ•°ä¸­å‡ºç°ï¼Œåˆ™è¿”å› 0ï¼ˆé›¶ï¼‰ã€‚
    length [(String)]   è¿”å› String å‚æ•°æŒ‡å®šçš„å­—ç¬¦ä¸²çš„é•¿åº¦ï¼ˆå­—ç¬¦å½¢å¼ï¼‰ã€‚å¦‚æœæœªç»™å‡º String å‚æ•°ï¼Œåˆ™è¿”å›æ•´ä¸ªè®°å½•çš„é•¿åº¦ï¼ˆ$0 è®°å½•å˜é‡ï¼‰ã€‚
    blength [(String)]  è¿”å› String å‚æ•°æŒ‡å®šçš„å­—ç¬¦ä¸²çš„é•¿åº¦ï¼ˆä»¥å­—èŠ‚ä¸ºå•ä½ï¼‰ã€‚å¦‚æœæœªç»™å‡º String å‚æ•°ï¼Œåˆ™è¿”å›æ•´ä¸ªè®°å½•çš„é•¿åº¦ï¼ˆ$0 è®°å½•å˜é‡ï¼‰ã€‚
    substr( String, M, [ N ] )  è¿”å›å…·æœ‰ N å‚æ•°æŒ‡å®šçš„å­—ç¬¦æ•°é‡å­ä¸²ã€‚å­ä¸²ä» String å‚æ•°æŒ‡å®šçš„å­—ç¬¦ä¸²å–å¾—ï¼Œå…¶å­—ç¬¦ä»¥ M å‚æ•°æŒ‡å®šçš„ä½ç½®å¼€å§‹ã€‚M å‚æ•°æŒ‡å®šä¸ºå°† String å‚æ•°ä¸­çš„ç¬¬ä¸€ä¸ªå­—ç¬¦ä½œä¸ºç¼–å· 1ã€‚å¦‚æœæœªæŒ‡å®š N å‚æ•°ï¼Œåˆ™å­ä¸²çš„é•¿åº¦å°†æ˜¯ M å‚æ•°æŒ‡å®šçš„ä½ç½®åˆ° String å‚æ•°çš„æœ«å°¾ çš„é•¿åº¦ã€‚
    match( String, Ere )    åœ¨ String å‚æ•°æŒ‡å®šçš„å­—ç¬¦ä¸²ï¼ˆEre å‚æ•°æŒ‡å®šçš„æ‰©å±•æ­£åˆ™è¡¨è¾¾å¼å‡ºç°åœ¨å…¶ä¸­ï¼‰ä¸­è¿”å›ä½ç½®ï¼ˆå­—ç¬¦å½¢å¼ï¼‰ï¼Œä» 1 å¼€å§‹ç¼–å·ï¼Œæˆ–å¦‚æœ Ere å‚æ•°ä¸å‡ºç°ï¼Œåˆ™è¿”å› 0ï¼ˆé›¶ï¼‰ã€‚RSTART ç‰¹æ®Šå˜é‡è®¾ç½®ä¸ºè¿”å›å€¼ã€‚RLENGTH ç‰¹æ®Šå˜é‡è®¾ç½®ä¸ºåŒ¹é…çš„å­—ç¬¦ä¸²çš„é•¿åº¦ï¼Œæˆ–å¦‚æœæœªæ‰¾åˆ°ä»»ä½•åŒ¹é…ï¼Œåˆ™è®¾ç½®ä¸º -1ï¼ˆè´Ÿä¸€ï¼‰ã€‚
    tolower( String )   è¿”å› String å‚æ•°æŒ‡å®šçš„å­—ç¬¦ä¸²ï¼Œå­—ç¬¦ä¸²ä¸­æ¯ä¸ªå¤§å†™å­—ç¬¦å°†æ›´æ”¹ä¸ºå°å†™ã€‚å¤§å†™å’Œå°å†™çš„æ˜ å°„ç”±å½“å‰è¯­è¨€ç¯å¢ƒçš„ LC_CTYPE èŒƒç•´å®šä¹‰ã€‚
    toupper( String )   è¿”å› String å‚æ•°æŒ‡å®šçš„å­—ç¬¦ä¸²ï¼Œå­—ç¬¦ä¸²ä¸­æ¯ä¸ªå°å†™å­—ç¬¦å°†æ›´æ”¹ä¸ºå¤§å†™ã€‚å¤§å†™å’Œå°å†™çš„æ˜ å°„ç”±å½“å‰è¯­è¨€ç¯å¢ƒçš„ LC_CTYPE èŒƒç•´å®šä¹‰ã€‚
    sprintf(Format, Expr, Expr, . . . ) æ ¹æ® Format å‚æ•°æŒ‡å®šçš„ printf å­ä¾‹ç¨‹æ ¼å¼å­—ç¬¦ä¸²æ¥æ ¼å¼åŒ– Expr å‚æ•°æŒ‡å®šçš„è¡¨è¾¾å¼å¹¶è¿”å›æœ€åç”Ÿæˆçš„å­—ç¬¦ä¸²ã€‚

ç»“åˆå†…ç½®å‡½æ•°åŠå¾ªç¯è´¯æ ‡ç¼–ç¨‹

åœ¨awkä¸­æ•°ç»„å«åšå…³è”æ•°ç»„(associative arrays)ã€‚awk ä¸­çš„æ•°ç»„ä¸å¿…æå‰å£°æ˜ï¼Œä¹Ÿä¸å¿…å£°æ˜å¤§å°ã€‚æ•°ç»„å…ƒç´ ç”¨0æˆ–ç©ºå­—ç¬¦ä¸²æ¥åˆå§‹åŒ–ï¼Œè¿™æ ¹æ®ä¸Šä¸‹æ–‡è€Œå®šã€‚

awkçš„å¤šç»´æ•°ç»„åœ¨æœ¬è´¨ä¸Šæ˜¯ä¸€ç»´æ•°ç»„ï¼Œæ›´ç¡®åˆ‡ä¸€ç‚¹ï¼Œawkåœ¨å­˜å‚¨ä¸Šå¹¶ä¸æ”¯æŒå¤šç»´æ•°ç»„ã€‚awkæä¾›äº†é€»è¾‘ä¸Šæ¨¡æ‹ŸäºŒç»´æ•°ç»„çš„è®¿é—®æ–¹å¼ã€‚ä¾‹å¦‚ï¼Œarray[2,4]=1è¿™æ ·çš„è®¿é—®æ˜¯å…è®¸çš„ã€‚awkä½¿ç”¨ä¸€ä¸ªç‰¹æ®Šçš„å­—ç¬¦ä¸²SUBSEPä½œä¸ºåˆ†å‰²å­—æ®µã€‚ ç±»ä¼¼ä¸€ç»´æ•°ç»„çš„æˆå‘˜æµ‹è¯•ï¼Œå¤šç»´æ•°ç»„å¯ä»¥ä½¿ç”¨if ( (i,j) in array)è¿™æ ·çš„è¯­æ³•ï¼Œä½†æ˜¯ä¸‹æ ‡å¿…é¡»æ”¾ç½®åœ¨åœ†æ‹¬å·ä¸­ã€‚ç±»ä¼¼ä¸€ç»´æ•°ç»„çš„å¾ªç¯è®¿é—®ï¼Œå¤šç»´æ•°ç»„ä½¿ç”¨for ( item in array )è¿™æ ·çš„è¯­æ³•éå†æ•°ç»„ã€‚ä¸ä¸€ç»´æ•°ç»„ä¸åŒçš„æ˜¯ï¼Œå¤šç»´æ•°ç»„å¿…é¡»ä½¿ç”¨split()å‡½æ•°æ¥è®¿é—®å•ç‹¬çš„ä¸‹æ ‡åˆ†é‡ã€‚å› ä¸ºæ•°ç»„æ—¶å…³è”æ•°ç»„ï¼Œé»˜è®¤æ˜¯æ— åºçš„.

    awk 'BEGIN{
        str = "a b c d e f g";
        split(str, s, " ");
        for(p in s){
            print s[p];
        }
    }'
    awk 'BEGIN{
        for(i=1;i<=3;i++){
            for(j=1;j<=3;j++){
                array[i,j]=i*j; 
            }
        }
        for(m in array){
            split(m,subs,SUBSEP);
            print subs[1],"*",subs[2],"=",array[m];
        }
    }'



# ğŸš© ip ç½‘ç»œé…ç½®å‘½ä»¤
[linux ipå‘½ä»¤å’Œifconfigå‘½ä»¤](https://blog.csdn.net/freeking101/article/details/68939059)
[Use ip Command in Linux](https://linoxide.com/linux-command/use-ip-command-linux)
[iprote2 suite utility](http://www.linuxgrill.com/anonymous/iproute2/NEW-OSDL/)

ifconfigã€routeã€arp å’Œ netstat ç­‰å‘½ä»¤è¡Œå·¥å…·ç»Ÿç§°ä¸º net-tools æ˜¯ç”¨æ¥é…ç½®ç½‘ç»œï¼Œè§£å†³ç½‘ç»œæ•…éšœçš„ä¼ ç»Ÿå·¥å…·é›†ã€‚net-tools èµ·æºäº BSD çš„ TCP/IP å·¥å…·ç®±ï¼Œåæ¥æˆä¸ºè€ç‰ˆæœ¬ Linux å†…æ ¸ä¸­é…ç½®ç½‘ç»œåŠŸèƒ½çš„å·¥å…·ã€‚ä½†è‡ª 2001 å¹´èµ·ï¼ŒLinux ç¤¾åŒºå·²ç»å¯¹å…¶åœæ­¢ç»´æŠ¤ã€‚åŒæ—¶ï¼Œä¸€äº› Linux å‘è¡Œç‰ˆæ¯”å¦‚ Arch Linux å’Œ CentOS/RHEL 7 åˆ™å·²ç»å®Œå…¨æŠ›å¼ƒäº†net-toolsï¼Œåªæ”¯æŒ iproute2ã€‚

ä½œä¸ºç½‘ç»œé…ç½®å·¥å…·çš„ä¸€ä»½å­ï¼Œiproute2 æ˜¯ Linux ä¸‹ç®¡ç†æ§åˆ¶ TCP/IP ç½‘ç»œå’Œæµé‡æ§åˆ¶çš„æ–°ä¸€ä»£å·¥å…·åŒ…ï¼Œæ—¨åœ¨æ›¿ä»£è€æ´¾çš„å·¥å…·é“¾ net-toolsï¼Œå³å¤§å®¶æ¯”è¾ƒç†Ÿæ‚‰çš„ ifconfigï¼Œarpï¼Œrouteï¼Œnetstat ç­‰å‘½ä»¤ã€‚net-tools é€šè¿‡ procfs(/proc) å’Œ ioctl ç³»ç»Ÿè°ƒç”¨å»è®¿é—®å’Œæ”¹å˜å†…æ ¸ç½‘ç»œé…ç½®ï¼Œè€Œ iproute2 åˆ™é€šè¿‡ netlink å¥—æ¥å­—æ¥å£ä¸å†…æ ¸é€šè®¯ã€‚æŠ›å¼€æ€§èƒ½è€Œè¨€ï¼Œnet-tools çš„ç”¨æ³•ç»™äººçš„æ„Ÿè§‰æ˜¯æ¯”è¾ƒä¹±ï¼Œè€Œ iproute2 çš„ç”¨æˆ·æ¥å£ç›¸å¯¹ net-tools æ¥è¯´ç›¸å¯¹æ¥è¯´ï¼Œæ›´åŠ ç›´è§‚ã€‚æ¯”å¦‚ï¼Œå„ç§ç½‘ç»œèµ„æºå¦‚ linkã€IP åœ°å€ã€è·¯ç”±å’Œéš§é“ç­‰å‡ä½¿ç”¨åˆé€‚çš„å¯¹è±¡æŠ½è±¡å»å®šä¹‰ï¼Œä½¿å¾—ç”¨æˆ·å¯ä½¿ç”¨ä¸€è‡´çš„è¯­æ³•å»ç®¡ç†ä¸åŒçš„å¯¹è±¡ã€‚æ›´é‡è¦çš„æ˜¯ï¼Œåˆ°ç›®å‰ä¸ºæ­¢ï¼Œiproute2ä»å¤„åœ¨æŒç»­å¼€å‘ä¸­ã€‚iproute2 å¥—ä»¶é‡Œæä¾›äº†è®¸å¤šå¢å¼ºåŠŸèƒ½çš„å‘½ä»¤ï¼Œipå‘½ä»¤å³æ˜¯å…¶ä¸­ä¹‹ä¸€ã€‚

Linux çš„ ip å‘½ä»¤å’Œ ifconfig ç±»ä¼¼ï¼Œä½†å‰è€…åŠŸèƒ½æ›´å¼ºå¤§ï¼Œå¹¶æ—¨åœ¨å–ä»£åè€…ã€‚åªéœ€ä¸€ä¸ª ip å‘½ä»¤ï¼Œä½ å°±èƒ½å¾ˆè½»æ¾åœ°æ‰§è¡Œä¸€äº›ç½‘ç»œç®¡ç†ä»»åŠ¡ã€‚ifconfig æ˜¯ net-tools ä¸­å·²è¢«åºŸå¼ƒä½¿ç”¨çš„ä¸€ä¸ªå‘½ä»¤ï¼Œè®¸å¤šå¹´å‰å°±å·²ç»æ²¡æœ‰ç»´æŠ¤äº†ã€‚æ‰€ä»¥ï¼Œnet-tools å’Œ iproute2 éƒ½éœ€è¦å»å­¦ä¹ æŒæ¡äº†ã€‚

å¦‚æœä½ ä»åœ¨ä½¿ç”¨ net-toolsï¼Œè€Œä¸”å°¤å…¶éœ€è¦è·Ÿä¸Šæ–°ç‰ˆ Linux å†…æ ¸ä¸­çš„æœ€æ–°æœ€é‡è¦çš„ç½‘ç»œç‰¹æ€§çš„è¯ï¼Œé‚£ä¹ˆæ˜¯æ—¶å€™è½¬åˆ° iproute2 çš„é˜µè¥äº†ã€‚åŸå› å°±åœ¨äºä½¿ç”¨ iproute2 å¯ä»¥åšå¾ˆå¤š net-tools æ— æ³•åšåˆ°çš„äº‹æƒ…ã€‚å¯¹äºé‚£äº›æƒ³è¦è½¬åˆ°ä½¿ç”¨iproute2çš„ç”¨æˆ·ï¼Œæœ‰å¿…è¦äº†è§£ä¸‹é¢æœ‰å…³net-toolså’Œiproute2çš„ä¼—å¤šå¯¹æ¯”ã€‚

Linux Net-Tools versus IPRoute2

| net-tools         | iproute2            |
|  --:--            | --:--               |
| arp -na           | ip neigh            |
| ifconfig          | ip link             |
| ifconfig -a       | ip addr show        |
| ifconfig --help   | ip help             |
| ifconfig -s       | ip -s link          |
| ifconfig eth0 up  | ip link set eth0 up |
| ipmaddr           | ip maddr            |
| iptunnel          | ip tunnel           |
| netstat           | ss                  |
| netstat -i        | ip -s link          |
| netstat -g        | ip maddr            |
| netstat -l        | ss -l               |
| netstat -r        | ip route            |
| route add         | ip route add        |
| route del         | ip route del        |
| route -n          | ip route show       |
| vconfig           | ip link             |


iproute2 çš„æ ¸å¿ƒå‘½ä»¤æ˜¯ ip æä¾›çš„åŠŸèƒ½ show, manipulate routing, devices, policy routing and tunnels

    Usage: ip [ OPTIONS ] OBJECT { COMMAND | help }
           ip [ -force ] -batch filename
    where  OBJECT := { link | address | addrlabel | route | rule | neighbor | ntable |
                       tunnel | tuntap | maddress | mroute | mrule | monitor | xfrm |
                       netns | l2tp | fou | tcp_metrics | token | netconf }
           OPTIONS := { -V[ersion] | -s[tatistics] | -d[etails] | -r[esolve] |
                        -h[uman-readable] | -iec |
                        -f[amily] { inet | inet6 | ipx | dnet | mpls | bridge | link } |
                        -4 | -6 | -I | -D | -B | -0 |
                        -l[oops] { maximum-addr-flush-attempts } | -br[ief] |
                        -o[neline] | -t[imestamp] | -ts[hort] | -b[atch] [filename] |
                        -rc[vbuf] [size] | -n[etns] name | -a[ll] |Â -c[olor]}

ip æ˜¯ iproute2 è½¯ä»¶åŒ…é‡Œé¢çš„ä¸€ä¸ªå¼ºå¤§çš„ç½‘ç»œé…ç½®å·¥å…·ï¼Œç”¨æ¥æ˜¾ç¤ºæˆ–æ“ä½œè·¯ç”±ã€ç½‘ç»œè®¾å¤‡ã€ç­–ç•¥è·¯ç”±å’Œéš§é“ï¼Œå®ƒèƒ½å¤Ÿæ›¿ä»£ä¸€äº›ä¼ ç»Ÿçš„ç½‘ç»œç®¡ç†å·¥å…·ï¼Œä¾‹å¦‚ ifconfigã€routeç­‰ã€‚

ç”¨ ip é…ç½®çš„è®¾å¤‡ä¿¡æ¯ï¼Œå¤§éƒ¨åˆ†ä¼šåœ¨è®¾å¤‡é‡å¯åè¿˜åŸï¼Œå¦‚æœæƒ³æ°¸ä¹…éœ€è¦åœ¨é…ç½®æ–‡ä»¶ä¿®æ”¹ã€‚

(1).å¯¹è±¡

    ip link         ç½‘ç»œè®¾å¤‡ç®¡ç†ï¼Œå¯ç”¨/ç¦ç”¨ï¼Œä¿®æ”¹MTU/MACåœ°å€
    ip address      è®¾å¤‡ä¸Šçš„åè®®ï¼ˆIPæˆ–IPv6ï¼‰åœ°å€ç®¡ç†
    ip addrlabel    åè®®åœ°å€é€‰æ‹©çš„æ ‡ç­¾é…ç½®ï¼ŒRFC3484ä»‹ç»äº†IPV6æºåœ°å€/ç›®çš„åœ°å€é€‰æ‹©ç­–ç•¥
    ip route        è·¯ç”±è¡¨æ¡ç›®ç®¡ç†
    ip rule         è·¯ç”±ç­–ç•¥æ•°æ®åº“ä¸­çš„è§„åˆ™
    ip neighbor     neighbor/ARPæˆ–NDISCç¼“å­˜æ¡ç›®ç®¡ç†
    ip ntable       
    ip tunnel       IPéš§é“é…ç½®ï¼Œéš§é“çš„ä½œç”¨æ˜¯å°†æ•°æ®å°è£…æˆIPåŒ…å‘å¸ƒåˆ°ç½‘ç»œ
    ip tuntap       
    ip maddress     ç»„æ’­åœ°å€ç®¡ç†
    ip mroute       ç»„æ’­è·¯ç”±ç¼“å­˜æ¡ç›®ç®¡ç†
    ip mrule        
    ip monitor      IPåœ°å€/è·¯ç”±çŠ¶æ€ç­‰ç›‘æ§
    ip xfrm         xfmæ˜¯ä¸€ä¸ªIPSecåè®®æ¡†æ¶ï¼Œå¯è½¬æ¢æ•°æ®æŠ¥æ ¼å¼

æ‰€æœ‰å¯¹è±¡çš„åç§°å¯ä»¥ç”¨å®Œæ•´æˆ–ç¼©å†™å½¢å¼ä¹¦å†™ï¼Œä¾‹å¦‚addresså¯ä»¥ç¼©å†™æˆaddræˆ–åªæ˜¯aã€‚

(2).é€‰é¡¹

    -Vï¼Œ-Version æ˜¾ç¤ºæŒ‡ä»¤ç‰ˆæœ¬ä¿¡æ¯
    -s,-stats,statistics è¾“å‡ºè¯¦ç»†ä¿¡æ¯
    -h,-human,-human-readable è¾“å‡ºäººç±»å¯è¯»çš„ç»Ÿè®¡ä¿¡æ¯å’Œåç¼€
    -iec ä»¥IECæ ‡å‡†å•ä½æ‰“å°äººç±»å¯è¯»é€Ÿç‡ï¼ˆä¾‹å¦‚1K=1024ï¼‰
    -f,-family <FAMILY> æŒ‡å®šè¦ä½¿ç”¨çš„åè®®æ—ã€‚åè®®æ—æ ‡è¯†å¯ä»¥æ˜¯inetã€inet6ã€ipxã€dnetæˆ–linkä¹‹ä¸€ã€‚å¦‚æœæ­¤é€‰é¡¹ä¸å­˜åœ¨ï¼Œåˆ™ä»å…¶ä»–å‚æ•°ä¸­æ¨æµ‹åè®®æ—ã€‚å¦‚æœå‘½ä»¤è¡Œçš„å…¶ä½™éƒ¨åˆ†æ²¡æœ‰æä¾›è¶³å¤Ÿçš„ä¿¡æ¯æ¥æ¨æµ‹è¯¥æ—ï¼Œåˆ™ipä¼šé€€å›åˆ°é»˜è®¤å€¼ï¼Œé€šå¸¸æ˜¯inetæˆ–anyã€‚linkæ˜¯ä¸€ä¸ªç‰¹æ®Šçš„ç³»åˆ—æ ‡è¯†ç¬¦ï¼Œè¡¨ç¤ºä¸æ¶‰åŠç½‘ç»œåè®®ã€‚
    -4 â€“family inetçš„å¿«æ·æ–¹å¼
    -6 â€“family inet6çš„å¿«æ·æ–¹å¼
    -0 â€“family linkçš„å¿«æ·æ–¹å¼
    -o,-oneline å°†æ¯æ¡è®°å½•è¾“å‡ºåˆ°ä¸€è¡Œï¼Œç”¨â€™\â€™å­—ç¬¦æ›¿æ¢æ¢è¡Œç¬¦ã€‚
    -r,-resolve ä½¿ç”¨ç³»ç»Ÿåç§°è§£æç¨‹åºæ¥æ‰“å°DNSåç§°è€Œä¸æ˜¯ä¸»æœºåœ°å€ã€‚

(3).å®ä¾‹

    ipåœ°å€ç®¡ç†
        1.æ˜¾ç¤ºipåœ°å€
            ip a
            ip address show
            ip addr show dev eth0
            ip a sh eth0
        2.å¢åŠ åˆ é™¤åœ°å€
            ip address add 192.0.2.1/24 dev eth0
            ip addr del 192.0.2.2/24 dev eth0
        3.æ˜¾ç¤ºæ¥å£ç»Ÿè®¡
            ip -s link ls eth0
    ç½‘å¡å’Œé“¾è·¯é…ç½®
        4.æ˜¾ç¤ºé“¾è·¯
            ip link show
            ip link sh eth0
        4.ä¿®æ”¹æ¥å£çŠ¶æ€
            ip link set eth0 up
            ip link s gre01 down
    è·¯ç”±è¡¨ç®¡ç†
        5.æ˜¾ç¤ºè·¯ç”±è¡¨
            ip route
            ip ro show dev gre01
        6.å¢åŠ æ–°è·¯ç”±
            ip route add 10.2.2.128/27 dev gre01
        7.å¢åŠ é»˜è®¤è·¯ç”±
            ip route add default via 192.168.1.1
        8.ä¿®æ”¹é»˜è®¤è·¯ç”±
            ip route chg default via 192.168.1.2
        9.åˆ é™¤é»˜è®¤è·¯ç”±
            ip route del default
    éš§é“é…ç½®
        10.å¢åŠ åˆ é™¤GREéš§é“
            ip tunnel add gre01 mode gre local 10.1.1.1 remote 20.2.2.1 ttl 255
            ip tunnel del gre01
        11.IPIPéš§é“
            ip tunl a ipip01 mode ipip local 10.1.1.1 remote 20.2.2.1 ttl 255
        12.æ˜¾ç¤ºéš§é“
            ip tunnel show
        13.æ˜¾ç¤ºéš§é“ç»Ÿè®¡
            ip -s tunl ls gre01
    é‚»å±…å’Œarpè¡¨ç®¡ç†
        13.æŸ¥çœ‹arpè¡¨
            ip neigh show
        14.æ‰‹å·¥å¢åŠ åˆ é™¤arpé¡¹
            ip neighbor add 10.2.2.2 dev eth0
            ip neigh del 10.2.2.1 dev eth0
    socketç»Ÿè®¡
        15.æ˜¾ç¤ºå½“å‰ç›‘å¬
            ss -l
        15.æ˜¾ç¤ºå½“å‰ç›‘å¬çš„è¿›ç¨‹
            ss -p
     
    #å¸¸ç”¨å‘½ä»¤
        ip link show                             #æ˜¾ç¤ºé“¾è·¯
        ip addr show                             #æ˜¾ç¤ºåœ°å€(æˆ–ifconfig)
        ip route show                            #æ˜¾ç¤ºè·¯ç”±(route -n)
        ip neigh show                            #æ˜¾ç¤ºarpè¡¨(ping 192.168.95.50ï¼Œå¦‚æœä¸»æœºåœ¨åŒä¸€å±€åŸŸç½‘å†…ï¼Œç›´æ¥åŠ åˆ°arpè¡¨)
        ip neigh delete 192.168.95.50 dev eth0   #åˆ é™¤arpæ¡ç›®ï¼Œæ¡ç›®ä»ç„¶å­˜åœ¨çŠ¶æ€ä¸ºstaleï¼Œä¸‹æ¬¡é€šä¿¡éœ€è¦ç¡®è®¤
        ip rule show                             #æ˜¾ç¤ºç¼ºçœè§„åˆ™
        ip route del default dev eth0            #åˆ é™¤æ¥å£è·¯ç”±
        ip route show table local                #æŸ¥çœ‹æœ¬åœ°é™æ€è·¯ç”±
        ip route show table main                 #æŸ¥çœ‹ç›´è¿è·¯ç”±
     
    #æ·»åŠ é™æ€è·¯ç”±
        ip route add 10.0.0.0/24 via 192.168.92.129
        ip route add 10.10.10.10 via 192.168.92.129
        
        ip route add 172.31.100.0/24 dev eno16777736
        ip route add 172.32.0.2 dev eno16777736
     
    #æŸ¥çœ‹è·¯ç”±è¡¨
        [root@localhost ~]# ip route show table main
     
    #åˆ é™¤
        ip route del 10.0.0.0/24
        ip route del 10.10.10.10
        
        ip route del 172.31.100.0/24
        ip route del 172.32.0.2
     
    #å†æ¬¡æŸ¥çœ‹è·¯ç”±è¡¨
        [root@localhost ~]# ip route show table main
        [root@localhost ~]# ip route show table local
     
    #æ·»åŠ ç½‘å¡åˆ«å
        ip addr add 192.168.0.11/24 dev eno16777736
     
    #æŸ¥çœ‹ä¸‹ç½‘å¡ï¼Œåˆ«åæ²¡æœ‰äº§ç”Ÿï¼Œè€Œæ˜¯ç›´æ¥ç»§æ‰¿
        [root@localhost ~]# ip addr show eno16777736
           
    #æ·»åŠ ç½‘å¡åˆ«åå¹¶æ·»åŠ æ ‡è®°    label
        ip addr add 192.168.1.2 label eno16777736:0 dev eno16777736
     
    #æŸ¥çœ‹ä¸‹ï¼Œå¤šäº†eno16777736:0
        ip addr show eno16777736


æ³¨æ„ï¼šä»¥ä¸‹ä»‹ç»çš„ipå‘½ä»¤éƒ½æ˜¯ä¸´æ—¶é…ç½®ï¼Œä¸€ä½†é‡å¯å°±ä¼šè¿˜åŸï¼Œå¦‚"service network restart"

æŸ¥çœ‹IPåœ°å€

    adb shell ip a/addr/address
    adb shell ip a/addr/address sh/show

    adb shell ip a/addr/address sh/show dev eth1
    adb shell ip a/addr/address sh/show eth1

æŸ¥çœ‹WiFiè¿æ¥

    adb shell ip -f inet addr show wlan0 # show WiFi IP Address

å¢åŠ æˆ–åˆ é™¤IPåœ°å€

    adb shell ip a/addr/address add 192.168.78.130/24 dev eth1
    adb shell ip a/addr/address del/delete 192.168.78.130/24 dev eth1
    adb shell ip a flush dev eth1     # åˆ é™¤eth1æ‰€æœ‰IPåœ°å€
    adb shell ip -4 a flush dev eth1  # åˆ é™¤eth1çš„æ‰€æœ‰IPv4çš„IPåœ°å€

æŸ¥çœ‹ç½‘ç»œè®¾å¤‡ä¿¡æ¯

    adb shell ip link sh/show/l/list/ls
    adb shell ip link sh/show/l/ls/lsit eth1
    adb shell ip link sh/show/l/ls/list dev eth1

åœæ­¢ä¸æ¿€æ´»ç½‘ç»œè®¾å¤‡

    adb shell ip link set dev eth1 down
    adb shell ip link set dev eth1 up

æŸ¥çœ‹è·¯ç”±è¡¨

    adb shell ip r/ro/route
    adb shell ip r/ro/route sh/show
    adb shell ip r/ro/route sh/show dev eth1

æ·»åŠ æˆ–åˆ é™¤è·¯ç”±

    adb shell ip r/ro/route add 192.168.79.0/24 dev eth1
    adb shell ip r/ro/route d/del/delete 192.168.79.0/24
    adb shell ip r/ro/route d/del/delete 192.168.79.0/24 dev eth1

é»˜è®¤è·¯ç”±çš„åˆ é™¤ã€æ·»åŠ ä¸ä¿®æ”¹

    adb shell ip r/ro/route d/del/delete default
    adb shell ip r/ro/route add default via 192.168.78.1
    adb shell ip r/ro/route chg/change default via 192.168.78.2

æŸ¥çœ‹ARPè¡¨

    adb shell ip n/neigh/neighbuor sh/show




# ğŸš© hosts æœ¬åœ° DNS é…ç½®

æ ¼å¼å¦‚ä¸‹ï¼š

    <IP> <HOSTNAME>.<DOMAIN> <ALIAS>

è§£å†³ Github DNS æ±¡æŸ“

    #github related website
    140.82.112.4 github.com
    151.101.185.194 github.global.ssl.fastly.net
    203.98.7.65 gist.github.com
    13.229.189.0 codeload.github.com
    185.199.109.153 desktop.github.com
    185.199.108.153 guides.github.com
    185.199.108.153 blog.github.com
    18.204.240.114 status.github.com
    185.199.108.153 developer.github.com
    185.199.108.153 services.github.com
    192.30.253.175 enterprise.github.com
    34.195.49.195 education.github.com
    185.199.108.153 pages.github.com
    34.196.237.103 classroom.github.com
    # GitHub End

ç¼–è¾‘ hosts æ–‡ä»¶ï¼š

    vim gedit /etc/hosts

ç¼–è¾‘åï¼Œä½ éœ€è¦é‡æ–°å¯åŠ¨ç½‘ç»œã€‚

    /etc/init.d/networking restart
    sudo /etc/init.d/networking restart



# ğŸš© samba æœåŠ¡ä»‹ç»åŠé…ç½®è¯¦è§£

smbæœåŠ¡æ˜¯å¾®è½¯çš„ç½‘ç»œé€šè®¯åè®®ï¼Œåæ¥åº”ç”¨åˆ°äº†linuxç³»ç»Ÿä¸Šã€‚è¿™æ¬¾æ–‡ä»¶å…±äº«åè®®å¯ä»¥ä½¿å¾—Linuxä¸windowsç³»ç»Ÿä¹‹é—´è¿›è¡Œæ–‡ä»¶å…±äº«ä¸æ‰“å°åŠŸèƒ½ï¼Œç”±äºNFSå¯ä»¥å®Œæˆlinuxä¸linuxä¹‹é—´çš„æ–‡ä»¶å…±äº«ï¼Œæ‰€ä»¥smbæœåŠ¡æœ€é€‚ç”¨ çš„åœºåˆè¿˜æ˜¯linuxä¸windowsç³»ç»Ÿé—´çš„æ–‡ä»¶å…±äº«ã€‚

samba çš„æ ¸å¿ƒæ˜¯ smbd å’Œ nmbd ä¸¤ä¸ªå®ˆæŠ¤è¿›ç¨‹ï¼Œå‰è€…ç®¡ç†sambaæœåŠ¡å™¨ä¸Šçš„å…±äº«ç›®å½•ï¼Œåè€…è¿›è¡Œ NetBIOS åè§£æï¼Œä½¿å®¢æˆ·ç«¯èƒ½æµè§ˆæœåŠ¡å™¨çš„å…±äº«èµ„æºã€‚

åè®®ç«¯å£ï¼š

smbdï¼štcp 445å’Œtcp139
nmbdï¼šudp 137/138

sambæœåŠ¡åŸºç¡€

ã€€ã€€è½¯ä»¶åŒ…ï¼šsamba
ã€€ã€€åè®®ï¼šSMPï¼ˆTCP139ï¼‰CIFSï¼ˆ445ï¼‰
ã€€ã€€é…ç½®æ–‡ä»¶è·¯å¾„ï¼š/etc/samba/smb.conf
ã€€ã€€æ‰€éœ€æœåŠ¡å™¨ï¼šsvr7ï¼ˆip192.168.4.7ï¼‰å’Œmyhost2

å…³äºsmbpasswdå‘½ä»¤é€‰é¡¹ï¼š

    -hï¼šæ˜¾ç¤ºsmbpasswdçš„å‘½ä»¤æ ¼å¼å¸®åŠ©
    -aï¼šæ·»åŠ æŒ‡å®šçš„ç”¨æˆ·å¸å·
    -dï¼šç¦ç”¨æŒ‡å®šçš„ç”¨æˆ·å¸å·
    -eï¼šå¯ç”¨æŒ‡å®šçš„ç”¨æˆ·å¸å·
    -xï¼šåˆ é™¤æŒ‡å®šçš„ç”¨æˆ·å¸å·
    æ²¡æœ‰æ·»åŠ ä»»ä½•é€‰é¡¹æ—¶å€™å°†æ”¹å˜ç”¨æˆ·å¯†ç ã€‚

è®¤è¯†sambaæœåŠ¡å™¨ä¸»é…æ–‡ä»¶ï¼šsmb.conf

    [global] éƒ¨åˆ†æ˜¯sambaæœåŠ¡å™¨çš„å…¨å±€è®¾ç½®ï¼Œå¯¹æ•´ä¸ªæœåŠ¡å™¨æœ‰æ•ˆã€‚
    [homes] éƒ¨åˆ†æ˜¯è®¾ç½®ç”¨æˆ·å…±äº«ç›®å½•å±æ€§ã€‚
    [printers] éƒ¨åˆ†è®¾ç½®äº†sambaæœåŠ¡å™¨ä¸­æ‰“å°å…±äº«èµ„æºçš„å±æ€§ï¼ŒsambæœåŠ¡å™¨é™¤äº†å¯ä»¥æä¾›æ–‡ä»¶å…±äº«ï¼Œè¿˜å¯ä»¥æä¾›æ‰“å°å…±äº«ã€‚

[global]éƒ¨åˆ†è¯¦è§£ï¼š

    workgroup è®¾ç½®sambaæœåŠ¡å™¨æ‰€åœ¨çš„å·¥ä½œç»„ï¼Œé»˜è®¤æ˜¯ï¼šMYGROUP
    server string è®¾ç½®sambaæœåŠ¡å™¨çš„è¯´æ˜ï¼Œç”¨äºæè¿°æœåŠ¡å™¨ã€‚
    log file è®¾ç½®sambaæœåŠ¡å™¨çš„æ—¥å¿—æ–‡ä»¶ï¼Œé»˜è®¤æ˜¯ï¼š/var/log/samba/log.%m
    max log size è®¾ç½®æ—¥å¿—æ–‡ä»¶çš„æœ€å¤§å®¹é‡ï¼Œé»˜è®¤æ˜¯50ï¼Œå•ä½KBã€‚
    security è®¾ç½®sambaæœåŠ¡å™¨å’Œå®¢æˆ·ç«¯çš„è®¤è¯æ–¹å¼ï¼Œé»˜è®¤æ˜¯userã€‚ä¸€å…±æœ‰4ç§æ–¹å¼ï¼š
    share è¡¨ç¤ºç”¨æˆ·ä¸éœ€è¦è´¦æˆ·åŠå¯†ç å³å¯ç™»å½•æœåŠ¡å™¨ã€‚
    user è¡¨ç¤ºç™»å½•sambaæœåŠ¡å™¨éœ€è¦ç”¨æˆ·å’Œå¯†ç ã€‚
    server è¡¨ç¤ºæ£€æŸ¥è´¦æˆ·åŠå¯†ç çš„å·¥ä½œæŒ‡å®šç”±å¦ä¸€å°WindowsæœåŠ¡å™¨æˆ–è€…sambaæœåŠ¡å™¨è´Ÿè´£ã€‚
    domain æŒ‡å®šWindowsåŸŸæ§åˆ¶å™¨æ¥éªŒè¯ç”¨æˆ·å’Œå¯†ç ã€‚

[homes]éƒ¨åˆ†è¯¦è§£ï¼š

    comment è®¾ç½®å…±äº«çš„è¯´æ˜ä¿¡æ¯
    browseable è®¾ç½®ä¸ºnoè¡¨ç¤ºæ‰€æœ‰sambaç”¨æˆ·çš„å®¿ä¸»ç›®å½•éƒ½ä¸èƒ½è¢«çœ‹åˆ°ï¼Œåªæœ‰ç™»å½•ç”¨æˆ·æ‰èƒ½çœ‹è§è‡ªå·±çš„å®¿ä¸»ç›®å½•ã€‚
    writable è®¾ç½®ä¸ºyesè¡¨ç¤ºç”¨æˆ·å¯ä»¥å¯¹è¯¥å…±äº«ç›®å½•å†™å…¥ã€‚

æ›´å¤šäº«ç›®å½•å¸¸è§è®¾ç½®é¡¹ï¼š

    path ç”¨æˆ·è®¾ç½®å…±äº«ç›®å½•å¯¹åº”çš„linuxç³»ç»Ÿç›®å½•è·¯å¾„ã€‚
    public è®¾ç½®ä¸ºyesè¡¨ç¤ºè¯¥å…±äº«ç›®å½•å¯¹äºæ‰€æœ‰sambaç”¨æˆ·æ˜¯å¯è§çš„ã€‚
    only guest è®¾ç½®ä¸ºyesè¡¨ç¤ºæ‰€æœ‰ç”¨æˆ·åœ¨ä½¿ç”¨è¯¥å…±äº«ç›®å½•æ—¶çš„ç”¨æˆ·èº«ä»½æ˜¯guestï¼Œå°±æ˜¯ç³»ç»Ÿç”¨æˆ·nobodyã€‚
    writable è®¾ç½®ä¸ºyesè¡¨ç¤ºè¯¥å…±äº«ç›®å½•å¯¹äºç”¨æˆ·å¯å†™ã€‚
    valid users å…è®¸æŒ‡å®šç”¨æˆ·è®¿é—®å…±äº«ç›®å½•ã€‚

é…ç½®ç”¨æˆ·å…±äº«ç”¨æˆ·ï¼Œåœ¨æœåŠ¡ç«¯æ“ä½œå¦‚ä¸‹

1.ç¯å¢ƒå‡†å¤‡
å…³é—­é˜²ç«å¢™å’Œselinux

    [root@linfan ~]systemctl disable firewalld
    [root@linfan ~]systemctl stop firewalld
    [root@linfan ~]sed -i"s/^SELINUX\=enforcing/SELINUX\=disabled/g" /etc/selinux/config
    [root@linfan ~]setenforce 0

2.å®‰è£…sambaæœåŠ¡å™¨ï¼š

    yum -y install samba-*

3.å…±äº«ç”¨æˆ·é…ç½®å¹¶ä¸ºç”¨æˆ·linåˆ›å»ºsmbå…±äº«å¯†ç 

    useradd -M lin
    smbpasswd -a lin

å°†linç”¨æˆ·æ˜ å°„ä¸ºshareç”¨æˆ·ï¼š

    echo 'lin = share' > /etc/samba/smbusers

åœ¨å…¨å±€å˜é‡ä¸­æ·»åŠ å¦‚ä¸‹å†…å®¹ï¼š

    [root@linfan ~]# vi /etc/samba/smb.conf
    # See smb.conf.example for a more detailed config file or
    # read the smb.conf manpage.
    # Run 'testparm' to verify the config is correct after
    # you modified it.

    [global]
            workgroup = SAMBA
            security = user
            username map = /etc/samba/smbusers  //åœ¨æ­¤æ·»åŠ 

4. åˆ›å»ºä¸€ä¸ªå…±äº«ç›®å½•lin
    
    [root@linfan ~]# mkdir -p /opt/lin/
    [root@linfan ~]# chown -R lin.lin /opt/lin/
    
5.é…ç½®å…±äº«

    [root@linfan ~]# cat >> /etc/samba/smb.conf <<EOF
    > [lin]       //å…±äº«ç›®å½•åç§°
    > comment = lin   //æè¿°
    > path = /opt/lin   //å…±äº«ç›®å½•çš„è·¯å¾„
    > browseable = yes   //è®¾ç½®ä¸ºå¯è§
    > guest ok = yes   //è®¾ç½®å…è®¸åŒ¿åè®¿é—®
    > writable = yes   //è®¾ç½®å¯å†™
    > write list = share   //åªæœ‰shareç”¨æˆ·æ‹¥æœ‰è¯»æƒé™
    > public = yes  //è®¾ç½®åŒ¿åå¯è®¿é—®
    > EOF
    [root@linfan ~]# testparm   //æµ‹è¯•æ˜¯å¦æ­£ç¡®
    [root@linfan ~]# tail -8 /etc/samba/smb.conf
    [lin]
    comment = lin
    path = /opt/lin
    browseable = yes
    guest ok = yes
    writable = yes
    write list = share 
    public = yes
    
6.smbæœåŠ¡é…ç½®

smbæœåŠ¡å¯åŠ¨ã€é‡å¯

    [root@linfan ~]# systemctl start smb
    [root@linfan ~]# systemctl restart smb
    [root@linfan ~]# systemctl reload smb

è®¾ç½®smbå¼€æœºè‡ªå¯åŠ¨

    [root@linfan ~]# systemctl enable smb

åœ¨å®¢æˆ·ç«¯æ“ä½œ

1.æŸ¥çœ‹smbæœåŠ¡å™¨å…±äº«äº†å“ªäº›èµ„æº

    [root@linfan ~]# smbclient -L 192.168.24.248 -U share

2.åˆ›å»ºæŒ‚è½½ç›®å½•

    [root@linfan ~]# mkdir -p /opt/smb/

3.å°†smbæœåŠ¡å™¨ä¸Šçš„linæŒ‚è½½åˆ°æœ¬åœ°

    [root@linfan ~]# mount -t cifs //192.168.24.248/lin /opt/smb -o username=share,password=1
    [root@linfan ~]# df -h
    Filesystem               Size  Used Avail Use% Mounted on
    /dev/mapper/centos-root   17G  6.0G   12G  35% /
    devtmpfs                 478M     0  478M   0% /dev
    tmpfs                    489M     0  489M   0% /dev/shm
    tmpfs                    489M  6.9M  482M   2% /run
    tmpfs                    489M     0  489M   0% /sys/fs/cgroup
    /dev/sda1               1014M  125M  890M  13% /boot
    tmpfs                     98M     0   98M   0% /run/user/0
    /dev/sr0                 4.3G  4.3G     0 100% /mnt
    //192.168.24.248/lin      17G  6.0G   12G  36% /opt/smb

4.è¿›å…¥å®¢æˆ·ç«¯å…±äº«ç›®å½•åˆ›å»ºæ–°æ–‡ä»¶

    [root@linfan opt]# cd /opt/smb

    [root@linfan smb]# mkdir l
    [root@linfan smb]# touch k
    [root@linfan smb]# ls
    k  l

5.åœ¨æœåŠ¡ç«¯éªŒè¯

    [root@linfan ~]# cd /opt/lin
    [root@linfan lin]# ls
    k  l

åŒ¿åç”¨æˆ·å…±äº«

åœ¨æœåŠ¡ç«¯æ“ä½œå¦‚ä¸‹

1.ç¯å¢ƒå‡†å¤‡

å…³é—­é˜²ç«å¢™å’Œselinux

    [root@linfan ~]systemctl disable firewalld
    [root@linfan ~]systemctl stop firewalld
    [root@linfan ~]sed -i"s/^SELINUX\=enforcing/SELINUX\=disabled/g" /etc/selinux/config
    [root@linfan ~]setenforce 0

2.å®‰è£…smbæœåŠ¡

    [root@linfan ~]# yum -y install samba-*  

3.ç¼–è¾‘é…ç½®æ–‡ä»¶

    [root@linfan ~]# vi /etc/samba/smb.conf
     #See smb.conf.example for a more detailed config file or
     #read the smb.conf manpage.
     #Run 'testparm' to verify the config is correct after
     #you modified it.

    [global]
    workgroup = SAMBA
    security = user
    map to guest = Bad User     //åœ¨æ­¤æ·»åŠ 

4.åˆ›å»ºå…±äº«ç›®å½•

    [root@linfan ~]# mkdir /opt/doudou
    [root@linfan ~]# chmod 777 /opt/doudou
    [root@linfan ~]# ll /opt/
    total 0
    drwxrwxrwx. 2 root root   6 Aug  6 19:08 doudou
    drwxr-xr-x. 8 root root 220 Jul 18 17:09 lin.d

5.ç¼–è¾‘å…±äº«æ–‡ä»¶

    [root@linfan ~]# cat >> /etc/samba/smb.conf <<EOF
    > [doudou]
    > comment = doudou
    > path = /opt/doudou
    > browseable = yes
    > guest ok = yes
    > writable = yes
    > public = yes
    > EOF
    [root@linfan ~]# tail -7 /etc/samba/smb.conf
    [doudou]
    comment = doudou
    path = /opt/doudou
    browseable = yes
    guest ok = yes
    writable = yes
    public = yes

6.å¯åŠ¨smbæœåŠ¡

    [root@linfan ~]# systemctl start smb 

7.åœ¨å®¢æˆ·ç«¯æŸ¥çœ‹smbæœåŠ¡å…±äº« æ— éœ€è¾“å…¥å¯†ç  ç›´æ¥å›è½¦å³å¯

    [root@linfan ~]# smbclient -L 192.168.24.248 -U'Bad User' 

8.åˆ›å»ºæŒ‚è½½ç›®å½•

    [root@linfan ~]# mkdir -p /opt/smb

9.å°†smbæœåŠ¡å™¨çš„å…±äº«æ–‡ä»¶doudou æŒ‚è½½åˆ°æœ¬åœ°å®¢æˆ·ç«¯

    [root@linfan ~]# mount -t cifs //192.168.24.248/doudou /opt/smb -o username='Bad User'
    [root@linfan ~]# df -h  

10.åˆ‡æ¢åˆ°æ–°çš„å…±äº«ç›®å½•åˆ›å»ºæ–‡ä»¶

    [root@linfan ~]# cd /opt/smb
    [root@linfan smb]# mkdir lin
    [root@linfan smb]# touch wu
    [root@linfan smb]# ls
    lin  wu    

11.åœ¨æœåŠ¡ç«¯éªŒè¯

    [root@linfan doudou]# ls
    lin  wu


# ğŸš© Linux Software Installation è½¯ä»¶å®‰è£…æ–¹å¼

## rpm åŒ…çš„å½¢å¼å®‰è£…è½¯ä»¶

è¿™ç§æ–¹å¼å…¶å®å’Œyumå®‰è£…æ²¡æœ‰å¤šå¤§åŒºåˆ«ï¼Œä½†æ˜¯è¿™ç§å®‰è£…æ–¹å¼é€‚åˆæ²¡æœ‰ç½‘ç»œçš„æœºå™¨ï¼Œæ¯”å¦‚æˆ‘ä»¬åœ¨å·¥ä½œä¸­ä¼šé‡åˆ°ä¸€äº›ä¸èƒ½è”ç½‘çš„æœåŠ¡å™¨ï¼Œè¿™ä¸ªæ—¶å€™å°±éœ€è¦é€šè¿‡rpmåŒ…çš„æ–¹å¼æ¥å®‰è£…è½¯ä»¶äº†ã€‚ä»¥æˆ‘ä»¬å®‰è£…httpdä¸ºä¾‹ï¼Œå‘½ä»¤æ˜¯ï¼š

    rpm -ivh  httpd-2.4.6-67.el7.centos.x86_64.rpm # install
    rpm -Uvh  httpd-2.4.6-67.el7.centos.x86_64.rpm # upgrade
    rpm -e    httpd-2.4.6-67.el7.centos.x86_64.rpm # uninstall
    rpm -qa | grep httpd # æŸ¥çœ‹æŸä¸ªæœåŠ¡å®‰è£…æ²¡æœ‰

ç¬¬ä¸€ä¸ªå‘½ä»¤æ˜¯ç›´æ¥å®‰è£…ï¼Œç¬¬äºŒä¸ªå‘½ä»¤æ˜¯åœ¨ç³»ç»Ÿä¸Šä»¥åçš„æƒ…å†µä¸‹å‡çº§å®‰è£…ï¼Œç›®å‰ä½¿ç”¨çš„æœ€å¤šçš„å°±æ˜¯è¿™ä¸¤ç§æ ¼å¼ã€‚è¿™ç§å®‰è£…æ–¹å¼çš„å¼Šç«¯ï¼Œå°±æ˜¯è¿™ç§å®‰è£…æ–¹å¼æ— æ³•è§£å†³ä¾èµ–çš„é—®é¢˜ï¼Œå› æ­¤ç¼ºå°‘ä¾èµ–ä¼šå¯¼è‡´å®‰è£…å¤±è´¥ã€‚


## yum æºå®‰è£…è½¯ä»¶

Yumï¼ˆå…¨ç§°ä¸º Yellow dog Updater, Modifiedï¼‰æ˜¯ä¸€ä¸ªåœ¨Fedoraå’ŒRedHatä»¥åŠSUSEä¸­çš„Shellå‰ç«¯è½¯ä»¶åŒ…ç®¡ç†å™¨ã€‚åŸºæ–¼RPMåŒ…ç®¡ç†ï¼Œèƒ½å¤Ÿä»æŒ‡å®šçš„æœåŠ¡å™¨è‡ªåŠ¨ä¸‹è½½RPMåŒ…å¹¶ä¸”å®‰è£…ï¼Œå¯ä»¥è‡ªåŠ¨å¤„ç†ä¾èµ–æ€§å…³ç³»ï¼Œå¹¶ä¸”ä¸€æ¬¡å®‰è£…æ‰€æœ‰ä¾èµ–çš„è½¯ä½“åŒ…ï¼Œæ— é¡»ç¹çåœ°ä¸€æ¬¡æ¬¡ä¸‹è½½ã€å®‰è£…ã€‚

CentOS/RHELç³»åˆ—ä¼˜å…ˆä½¿ç”¨è¿™ç§æ–¹å¼ï¼Œå³yumæºçš„æ–¹å¼æ¥å®‰è£…è½¯ä»¶ã€‚è¿™ç§æ–¹å¼å°±ç›¸å½“äºæ˜¯æŠŠå„ç§è½¯ä»¶éƒ½æ”¾åœ¨ä¸€ä¸ªæœ¬åœ°ä»“åº“æˆ–è€…è¿œæ–¹çš„ä»“åº“é‡Œã€‚éœ€è¦çš„æ—¶å€™æ ¹æ®é…ç½®å¥½çš„åœ°å€å»å–å›æ¥ã€‚åŒæ—¶è¿˜èƒ½è‡ªåŠ¨è§£å†³å„ç§è½¯ä»¶ä¹‹é—´çš„ä¾èµ–å…³ç³»ã€‚æˆ‘ä»¬é¦–å…ˆæ¥é…ç½®ä¸€ä¸ªå›½å†…çš„yumæºã€‚é…ç½®æ˜¯ï¼š

    [163]
    name=163 repo
    baseurl=http://mirrors.163.com/centos/7.4.1708/os/$basearch
    enabled=1
    gpgcheck=1
    gpgkey=http://mirrors.163.com/centos/7.4.1708/os/$basearch/RPM-GPG-KEY-CentOS-7

æŠŠè¿™ä¸ªæ–‡ä»¶ä¿å­˜ä¸º163.repoï¼Œæ”¾åœ¨/etc/yum.repos.d/ç›®å½•ä¸‹ã€‚yumæºé…ç½®å¥½ä»¥åï¼Œæˆ‘ä»¬ä½¿ç”¨è¿™ä¸ªyumæºæ¥å®‰è£…ä¸€ä¸ªapache httpdæœåŠ¡å™¨ã€‚å‘½ä»¤æ˜¯ï¼š

    yum install httpd -y 

ç„¶åç­‰å¾…è½¯ä»¶å®‰è£…å®Œæ¯•ã€‚å¯ä»¥çœ‹åˆ°ï¼Œyumæºä¼šè‡ªåŠ¨å®‰è£…httpdè½¯ä»¶ï¼ŒåŒæ—¶è¿˜ä¼šè‡ªåŠ¨å®‰è£…ç¼ºå°‘çš„ä¾èµ–æ–‡ä»¶ã€‚ yum å‘½ä»¤å‚è€ƒï¼š

    yum repolist all                  åˆ—å‡ºæ‰€æœ‰ä»“åº“ã€‚
    yum list all                      åˆ—å‡ºä»“åº“ä¸­æ‰€æœ‰è½¯ä»¶åŒ…
    yum info {package_name}           æŸ¥çœ‹è½¯ä»¶åŒ…ä¿¡æ¯
    yum install {package_name}        å®‰è£…è½¯ä»¶åŒ…
    yum reinstall {package_name}      é‡æ–°å®‰è£…è½¯ä»¶åŒ…
    yum update {package_name}         å‡çº§è½¯ä»¶åŒ…
    yum remove {package_name}         ç§»é™¤è½¯ä»¶åŒ…
    yum clean all                     æ¸…é™¤æ‰€æœ‰ä»“åº“ç¼“å­˜
    yum check-update                  æ£€æŸ¥å¯æ›´æ–°çš„è½¯ä»¶åŒ…
    yum grouplist                     æŸ¥çœ‹ç³»ç»Ÿä¸­å·²ç»å®‰è£…çš„è½¯ä»¶åŒ…ç»„
    yum groupinstall {package_group}  å®‰è£…æŒ‡å®šçš„è½¯ä»¶åŒ…ç»„
    yum groupremove {package_group}   ç§»é™¤æŒ‡å®šçš„è½¯ä»¶åŒ…ç»„
    yum groupinfo {package_group}     æŸ¥è¯¢æŒ‡å®šçš„è½¯ä»¶åŒ…ç»„ä¿¡æ¯

ä¸¾ä¾‹ï¼Œåœ¨é˜¿é‡Œäº‘Ubuntuç³»ç»Ÿå®‰è£… Pythond 3.6 å’Œ uWSGI

    yum search python3 | grep python36
    yum list | grep python36
    yum -y install python36
    python3.6 --version
    whereis python3

    yum search python-dev # æŸ¥è¯¢Pythonå¼€å‘åŒ…
    yum -y install python-devel
    pip install uwsgi


## apt-get å®‰è£…æ–¹å¼

åœ¨ubuntuå½“ä¸­ï¼Œå®‰è£…åº”ç”¨ç¨‹åºæˆ‘æ‰€çŸ¥é“çš„æœ‰ä¸‰ç§æ–¹æ³•ï¼Œåˆ†åˆ«æ˜¯apt-getï¼Œdpkgå®‰è£…debå’Œmake installå®‰è£…æºç åŒ…ä¸‰ç§ã€‚ä¸‹é¢é’ˆå¯¹æ¯ä¸€ç§æ–¹æ³•å„ä¸¾ä¾‹æ¥è¯´æ˜ã€‚ä½¿ç”¨apt-get installæ¥å®‰è£…åº”ç”¨ç¨‹åºç®—æ˜¯æœ€å¸¸è§çš„ä¸€ç§å®‰è£…æ–¹æ³•äº†ï¼Œæ¯”å¦‚æˆ‘è¦å®‰è£…build-essentialè¿™ä¸ªè½¯ä»¶ï¼Œä½¿ç”¨ä»¥ä¸‹ï¼Œä»–ä¼šå¸®æˆ‘æŠŠæ‰€æœ‰çš„ä¾èµ–åŒ…éƒ½ä¸€èµ·å®‰è£…äº†ã€‚

    sudo apt-get install build-essential
    apt-get install xxx å®‰è£…xxxã€‚å¯ä»¥å¸¦æœ‰å‚æ•°ï¼Œ-d è¡¨ç¤ºä»…ä¸‹è½½ ï¼Œ-f è¡¨ç¤ºå¼ºåˆ¶å®‰è£…  
    apt-get remove xxx  å¸è½½xxx  
    apt-get update      æ›´æ–°è½¯ä»¶ä¿¡æ¯æ•°æ®åº“  
    apt-get upgrade     è¿›è¡Œç³»ç»Ÿå‡çº§  
    apt-cache search    æœç´¢è½¯ä»¶åŒ…  


## dpkg deb åŒ…å®‰è£…

Ubuntu è½¯ä»¶åŒ…æ ¼å¼ä¸º debï¼Œå®‰è£…æ–¹æ³•å¦‚ä¸‹ï¼š

    sudo  dpkg  -i  package.deb

dpkg çš„è¯¦ç»†ä½¿ç”¨æ–¹æ³•å‚è€ƒï¼š

    dpkg -i package.deb        å®‰è£…åŒ…
    dpkg -r package            åˆ é™¤åŒ…
    dpkg -P package            åˆ é™¤åŒ…ï¼ˆåŒ…æ‹¬é…ç½®æ–‡ä»¶ï¼‰
    dpkg -L package            åˆ—å‡ºä¸è¯¥åŒ…å…³è”çš„æ–‡ä»¶
    dpkg -l package            æ˜¾ç¤ºè¯¥åŒ…çš„ç‰ˆæœ¬
    dpkg â€“unpack package.deb   è§£å¼€ deb åŒ…çš„å†…å®¹
    dpkg -S keyword            æœç´¢æ‰€å±çš„åŒ…å†…å®¹
    dpkg -l                    åˆ—å‡ºå½“å‰å·²å®‰è£…çš„åŒ…
    dpkg -c package.deb        åˆ—å‡º deb åŒ…çš„å†…å®¹
    dpkg â€“configure package    é…ç½®åŒ…

æ ¹æ®Ubuntuä¸­æ–‡è®ºå›ä¸Šä»‹ç»ï¼Œä½¿ç”¨apt-getæ–¹æ³•å®‰è£…çš„è½¯ä»¶ï¼Œæ‰€æœ‰ä¸‹è½½çš„debåŒ…éƒ½ç¼“å­˜åˆ°äº†/var/cache/apt /archivesç›®å½•ä¸‹äº†ï¼Œæ‰€ä»¥å¯ä»¥æŠŠå¸¸ç”¨çš„debåŒ…å¤‡ä»½å‡ºæ¥ï¼Œç”šè‡³åšæˆISOå·¥å…·åŒ…ã€åˆ»ç›˜ï¼Œä»¥åå®‰è£…Ubuntuæ—¶å°±å¯ä»¥åœ¨æ²¡æœ‰ç½‘ç»œç¯å¢ƒçš„æƒ…å†µä¸‹è¿›è¡Œ äº†ã€‚


## make install æºä»£ç ç¼–è¯‘å®‰è£…

å¦‚æœè¦ä½¿ç”¨makeå®‰è£…çš„è¯ï¼Œé‚£ä¹ˆå¿…é¡»å¾—å®‰è£…ç¼–è¯‘å·¥å…· build-essential è¿™ä¸ªä¾èµ–åŒ…ã€‚åœ¨å®‰è£…å®Œæ¯•ä»¥åï¼Œæˆ‘ä»¬å°±å¯ä»¥è¿›è¡Œæºç å®‰è£…ã€‚æºç å®‰è£…å¤§è‡´å¯ä»¥åˆ†ä¸ºä¸‰æ­¥éª¤ï¼š 

    é…ç½® ./configure
    ç¼–è¯‘ sudo make
    å®‰è£… sudo make install

é…ç½®ï¼šè¿™æ˜¯ç¼–è¯‘æºä»£ç çš„ç¬¬ä¸€æ­¥ï¼Œé€šè¿‡ ./configure å‘½ä»¤å®Œæˆã€‚æ‰§è¡Œæ­¤æ­¥ä»¥ä¾¿ä¸ºç¼–è¯‘æºä»£ç ä½œå‡†å¤‡ã€‚å¸¸ç”¨çš„é€‰é¡¹æœ‰ --prefix=PREFIXï¼Œç”¨ä»¥æŒ‡å®šç¨‹åºçš„å®‰è£…ä½ç½®ã€‚æ›´å¤šçš„é€‰é¡¹å¯é€šè¿‡ --help 

ç¼–è¯‘ï¼šä¸€æ—¦é…ç½®é€šè¿‡ï¼Œå¯å³åˆ»ä½¿ç”¨ make æŒ‡ä»¤æ¥æ‰§è¡Œæºä»£ç çš„ç¼–è¯‘è¿‡ç¨‹ã€‚è§†è½¯ä»¶çš„å…·ä½“æƒ…å†µè€Œå®šï¼Œç¼–è¯‘æ‰€éœ€çš„æ—¶é—´ä¹Ÿå„ æœ‰å·®å¼‚ï¼Œæˆ‘ä»¬æ‰€è¦åšçš„å°±æ˜¯è€å¿ƒç­‰å€™å’Œé™è§‚å…¶å˜ã€‚æ­¤æ­¥è™½ç„¶ä»…ä¸‹ç®€å•çš„æŒ‡ä»¤ï¼Œä½†æœ‰æ—¶å€™æ‰€é‡åˆ°çš„é—®é¢˜å´ååˆ†å¤æ‚ã€‚è¾ƒå¸¸ç¢°åˆ°çš„æƒ…å½¢æ˜¯ç¨‹åºç¼–è¯‘åˆ°ä¸­é€”å´æ— æ³•åœ†æ»¡ç»“ æŸã€‚æ­¤æ—¶ï¼Œéœ€è¦æ ¹æ®å‡ºé”™æç¤ºåˆ†æä»¥ä¾¿æ‰¾åˆ°åº”å¯¹ä¹‹ç­–ã€‚

å®‰è£…ï¼šå¦‚æœç¼–è¯‘æ²¡æœ‰é—®é¢˜ï¼Œé‚£ä¹ˆæ‰§è¡Œ sudo make install å°±å¯ä»¥å°†ç¨‹åºå®‰è£…åˆ°ç³»ç»Ÿä¸­äº†ã€‚ 

Nagiosæ˜¯ä¸€æ¬¾å¼€æºçš„å…è´¹ç½‘ç»œç›‘è§†å·¥å…·ï¼Œèƒ½æœ‰æ•ˆç›‘æ§Windowsã€Linuxå’ŒUnixçš„ä¸»æœºçŠ¶æ€ï¼Œäº¤æ¢æœºè·¯ç”±å™¨ç­‰ç½‘ç»œè®¾å¤‡ï¼Œæ‰“å°æœºç­‰ã€‚ä¸‹é¢ä»¥å®‰è£…nagiosä¸ºä¾‹è¿›è¡Œè¯´æ˜ï¼Œå…ˆä½¿ç”¨ tar å‘½ä»¤è§£åŒ…ä¸‹è½½åˆ°çš„æºä»£ç å½’æ¡£æ–‡ä»¶ tar.gzã€‚

    tar -zxf nagios-4.0.2.tar.gz  
    cd nagios-4.0.2
    ./configure --prefix=/usr/local/nagios     
    make all
    make install && make install-init && make install-commandmode && make install-config

makeæ˜¯gccçš„ç¼–è¯‘å™¨

    yum -y install gcc automake autoconf libtool make
    yum install gcc gcc-c++


## bash å®‰è£…è„šæœ¬

å¦‚æœè½¯ä»¶æä¾›äº†å®‰è£…è„šæœ¬ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨è„šæœ¬æ¥å®‰è£…ï¼Œå¦‚ uWSGI, curl é€šè¿‡ç½‘ç»œè·å–è„šæœ¬ï¼Œä¸‹è½½åˆ°æœ¬åœ°åå†é€šè¿‡ bash æ‰§è¡Œå®‰è£…è„šæœ¬:

    curl http://uwsgi.it/install | bash -s default /tmp/uwsgi

## wget curl tar unzip æ‰‹åŠ¨ä¸‹è½½è§£å‹å®‰è£…

    wget http://www.javadecompilers.com/jad/Jad%201.5.8e%20for%20Linux%20on%20Intel%20platform.zip
    curl -O "http://www.javadecompilers.com/jad/Jad%201.5.8e%20for%20Linux%20(statically%20linked).zip"

    unzip "Jad 1.5.8e for Linux on Intel platform.zip" -d jad
    rm Jad\ 1.5.8e\ for\ Linux\ on\ Intel\ platform.zip

    tar -jxvf demo.tar.gz




# =ğŸš© Multiplexed I/O 
- Linux System Programming, 2nd - ch02 File I/O
- Linux System Programming, 2nd - ch04 Advanced File I/O
- https://linux.die.net/man/2/epoll_create1

I/O å¤šè·¯å¤ç”¨ï¼ˆmultiplexingï¼‰çš„æœ¬è´¨æ˜¯é€šè¿‡ä¸€ç§æœºåˆ¶ï¼ˆç³»ç»Ÿå†…æ ¸ç¼“å†²I/Oæ•°æ®ï¼‰ï¼Œè®©å•ä¸ªè¿›ç¨‹å¯ä»¥ç›‘è§†å¤šä¸ªæ–‡ä»¶æè¿°ç¬¦ï¼Œä¸€æ—¦æŸä¸ªæè¿°ç¬¦å°±ç»ªï¼ˆä¸€èˆ¬æ˜¯è¯»å°±ç»ªæˆ–å†™å°±ç»ªï¼‰ï¼Œèƒ½å¤Ÿé€šçŸ¥ç¨‹åºè¿›è¡Œç›¸åº”çš„è¯»å†™æ“ä½œ

Linux 2.6 å†…æ ¸å¼•å…¥ä¸€ä¸ªæ–°çš„ç³»ç»Ÿè°ƒç”¨ï¼ŒEvent Pollï¼Œåœ¨è®¾è®¡ä¹‹åˆï¼Œå®ƒå°±æ˜¯ä¸ºäº†æ›¿ä»£ select, poll çº¿æ€§å¤æ‚åº¦çš„æ¨¡å‹ï¼Œepoll çš„æ—¶é—´å¤æ‚åº¦ä¸º O(1), ä¹Ÿå°±æ„å‘³ç€ï¼Œepoll åœ¨é«˜å¹¶å‘åœºæ™¯ï¼Œéšç€æ–‡ä»¶æè¿°ç¬¦çš„å¢é•¿ï¼Œæœ‰è‰¯å¥½çš„å¯æ‰©å±•æ€§ã€‚

selectã€poll å’Œ epoll éƒ½æ˜¯ Linux API æä¾›çš„ IO å¤ç”¨æ–¹å¼ã€‚

Unix ç³»ç»Ÿäº”ç§ I/O æ¨¡å‹å¦‚ä¸‹ï¼š

1. blocking I/O - é˜»å¡ I/O
2. nonblocking I/O - éé˜»å¡ I/O
3. I/O multiplexing - I/O å¤šè·¯å¤ç”¨
4. signal driven I/O - ä¿¡å·é©±åŠ¨ I/O
5. asynchronous I/O - å¼‚æ­¥ I/O

å‰é¢å››ç§æ˜¯åŒæ­¥ I/Oï¼Œä¹Ÿå°±æ˜¯åœ¨æ•°æ®æœªå‡†å¤‡å¥½æ—¶è¯»å–æ“ä½œä¼šé˜»å¡ã€‚

è€Œ selectï¼Œpollï¼Œepoll éƒ½æ˜¯I/Oå¤šè·¯å¤ç”¨çš„å…·ä½“çš„å®ç°ï¼Œä»–ä»¬ä¹Ÿæ˜¯ä¸åŒå†å²æ—¶æœŸçš„äº§ç‰©ï¼š

- 1984 å¹´ BSD å¼•å…¥ select å¤šè·¯å¤ç”¨ï¼Œéå†æ“ä½œï¼Œä½¿ç”¨æ•°ç»„å®ç° O(n) æ—¶é—´å¤æ‚åº¦ï¼›
- 1997 å¹´ System V å¼•å…¥ poll å¤šè·¯å¤ç”¨ï¼Œéå†æ“ä½œï¼Œä½¿ç”¨é“¾è¡¨æ•°æ®ç»“æ„ï¼ŒO(n) æ—¶é—´å¤æ‚åº¦ï¼›
- 2002 å¹´ Davide Libenzi å®ç° epoll å¤šè·¯å¤ç”¨ï¼Œä½¿ç”¨å†…æ ¸æ–‡ä»¶çº§åˆ«çš„å›è°ƒæœºåˆ¶ï¼Œé€šè¿‡çº¢é»‘æ ‘ RB-Tree å®ç° O(1)ï¼›

ä» select åˆ° pool é—´éš”è¿™ä¹ˆå¤šå¹´ï¼Œæ˜¯å› ä¸ºé‚£ä¸ªæ—¶ä»£çš„ç¡¬ä»¶å®åœ¨å¤ªå¼±ï¼Œä¸€å°æœåŠ¡å™¨å¤„ç† 1 åƒå¤šä¸ªé“¾æ¥ç®€ç›´å°±æ˜¯ç¥ä¸€æ ·çš„å­˜åœ¨ï¼Œselect å¾ˆé•¿æ®µæ—¶é—´å·²ç»æ»¡è¶³éœ€æ±‚ã€‚

è°ƒç”¨ epoll_create æ—¶ï¼Œå†…æ ¸é™¤äº†å¸®æˆ‘ä»¬åœ¨ epoll æ–‡ä»¶ç³»ç»Ÿé‡Œå»ºç«‹ file ç»“ç‚¹ï¼Œåœ¨å†…æ ¸ cache é‡Œå»ºç«‹çº¢é»‘æ ‘ ç”¨äºå­˜å‚¨  epoll_ctl ä¼ æ¥çš„ socketå¤–ï¼Œè¿˜ä¼šå†å»ºç«‹ä¸€ä¸ª list é“¾è¡¨ï¼Œç”¨äºå­˜å‚¨å‡†å¤‡å°±ç»ªçš„äº‹ä»¶ã€‚

- *epoll_create1*: åˆ›å»ºä¸€ä¸ªepollå®ä¾‹ï¼Œæ–‡ä»¶æè¿°ç¬¦
- *epoll_ctl*: å°†ç›‘å¬çš„æ–‡ä»¶æè¿°ç¬¦æ·»åŠ åˆ°epollå®ä¾‹ä¸­ï¼Œå®ä¾‹ä»£ç ä¸ºå°†æ ‡å‡†è¾“å…¥æ–‡ä»¶æè¿°ç¬¦æ·»åŠ åˆ°epollä¸­
- *epoll_wait*: ç­‰å¾…epolläº‹ä»¶ä»epollå®ä¾‹ä¸­å‘ç”Ÿï¼Œ å¹¶è¿”å›äº‹ä»¶ä»¥åŠå¯¹åº”æ–‡ä»¶æè¿°ç¬¦l

ä¸ºä¸€ä¸ªè¿æ¥æä¾›ä¸€ä¸ªçº¿ç¨‹å¤„ç† TCP è¯·æ±‚ï¼Œåœ¨é«˜å¹¶å‘çš„åœºæ™¯ï¼Œè¿™ç§å¤šçº¿ç¨‹æ¨¡å‹å¹¶ä¸æ˜¯æœ€é«˜æ•ˆçš„ï¼Œä¸ Epoll ç›¸æ¯”å°±æ˜¾å¾—ç›¸å½¢è§ç»Œã€‚

epoll é«˜æ•ˆçš„æœ¬è´¨åœ¨äºï¼š

- å‡å°‘äº†ç”¨æˆ·æ€å’Œå†…æ ¸æ€çš„æ–‡ä»¶å¥æŸ„æ‹·è´
- å‡å°‘äº†å¯¹å¯è¯»å¯å†™æ–‡ä»¶å¥æŸ„çš„éå†
- mmap åŠ é€Ÿäº†å†…æ ¸ä¸ç”¨æˆ·ç©ºé—´çš„ä¿¡æ¯ä¼ é€’ï¼Œepoll æ˜¯é€šè¿‡å†…æ ¸ä¸ç”¨æˆ· mmap åŒä¸€å—å†…å­˜ï¼Œé¿å…æ— è°“çš„å†…å­˜æ‹·è´
- I/O æ€§èƒ½ä¸ä¼šéšç€ç›‘å¬çš„æ–‡ä»¶æè¿°çš„æ•°é‡å¢é•¿è€Œä¸‹é™
- ä½¿ç”¨çº¢é»‘æ ‘å­˜å‚¨ fdï¼Œä»¥åŠå¯¹åº”çš„å›è°ƒå‡½æ•°ï¼Œå…¶æ’å…¥ï¼ŒæŸ¥æ‰¾ï¼Œåˆ é™¤çš„æ€§èƒ½ä¸é”™ï¼Œç›¸æ¯”äº hashï¼Œä¸å¿…é¢„å…ˆåˆ†é…å¾ˆå¤šçš„ç©ºé—´

Letâ€™s look at an example program that uses `poll()` to simultaneously check whether a
read from stdin and a write to stdout will block:

```cpp
#include <stdio.h>
#include <unistd.h>
#include <poll.h>

#define TIMEOUT 5 /* poll timeout, in seconds */

int main(void) 
{
    struct pollfd fds[2];
    int ret;

    /* watch stdin for input */
    fds[0].fd = STDIN_FILENO;
    fds[0].events = POLLIN;

    /* watch stdout for ability to write (almost always true) */
    fds[1].fd = STDOUT_FILENO;
    fds[1].events = POLLOUT;

    /* All set, block! */
    ret = poll(fds, 2, TIMEOUT * 1000);
    if (ret == -1) {
        perror("poll");
        return 1;
    }
    if (!ret) {
        printf("%d seconds elapsed.\n", TIMEOUT);
        return 0;
    }
    if (fds[0].revents & POLLIN)
        printf("stdin is readable\n");
    if (fds[1].revents & POLLOUT)
        printf("stdout is writable\n");
    return 0;
}
```

æµ‹è¯•ï¼š

    $  ./poll < some.txt
    $ echo ABCD | ./poll
    stdin is readable
    stdout is writable

