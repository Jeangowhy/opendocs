:source-highlighter: highlight.js
:stem: latexmath
:icons: font
:table-caption!:

== Gnuplot in Action

[.text-center]
image::https://drek4537l1klr.cloudfront.net/janert2/Figures/cover.jpg[cover]
[.text-center]
*Gnuplot in Action, 2nd ed* +
Understanding data with graphs +
Covers gnuplot version 5 +
Philipp K. Janert +
March 2016  ISBN 9781633430181  400 pages +
printed in black & white  includes free previous edition eBook +
https://www.manning.com/books/gnuplot-in-action-second-edition[Reading online] |
https://www.manning.com/downloads/1332[Source Code] |
https://gitlab.com/emmix/utils/-/blob/01feaa1f013cae79640ce3a70e89a7c28944666b/Gnuplot%20in%20Action,%202nd%20Edition.pdf[PDF] |
https://itbook.store/books/9781633430181[ITbook.store]


Gnuplot in Action, Second Edition is a major revision of this popular and 
authoritative guide for developers, engineers, and scientists who want to 
learn and use gnuplot effectively. Fully updated for gnuplot version 5, the 
book includes four pages of color illustrations and four bonus appendixes 
available in the eBook.


*about the technology*

Gnuplot is an open-source graphics program that helps you analyze, interpret,
and present numerical data. Available for Unix, Mac, and Windows, it is 
well-maintained, mature, and totally free.

*about the book*

Gnuplot in Action, Second Edition is a major revision of this authoritative 
guide for developers, engineers, and scientists. The book starts with a 
tutorial introduction, followed by a systematic overview of gnuplot's core 
features and full coverage of gnuplot's advanced capabilities. Experienced 
readers will appreciate the discussion of gnuplot 5?s features, including 
new plot types, improved text and color handling, and support for 
interactive, web-based display formats. The book concludes with chapters on 
graphical effects and general techniques for understanding data with graphs. 
It includes four pages of color illustrations. 3D graphics, false-color 
plots, heatmaps, and multivariate visualizations are covered in 
chapter-length appendixes available in the eBook.

*what's inside*

- Creating different types of graphs in detail
- Animations, scripting, batch operations
- Extensive discussion of terminals
- Updated to cover gnuplot version 5

*about the reader*

No prior experience with gnuplot is required. This book concentrates 
on practical applications of gnuplot relevant to users of all levels.

*about the author*

*Philipp K. Janert*, Ph.D, is a programmer and scientist. He is the author 
of several books on data analysis and applied math and has been a gnuplot 
power user and developer for over 20 years.


== brief contents

• <<part1, PART 1 GETTING STARTED>> ................................1
• <<ch01, 1 ■ Prelude: understanding data with gnuplot>> 3
• <<ch02, 2 ■ Tutorial: essential gnuplot>> 16
• <<ch03, 3 ■ The heart of the matter: the plot command>> 31

• <<part2, PART 2 CREATING GRAPHS>> .................................53
• <<ch04, 4 ■ Managing data sets and files>> 55
• <<ch05, 5 ■ Practical matters: strings, loops, and history>> 78
• <<ch06, 6 ■ A catalog of styles>> 100
• <<ch07, 7 ■ Decorations: labels, arrows, and explanations>> 125
• <<ch08, 8 ■ All about axes>> 146

• <<part3, PART 3 MASTERING TECHNICALITIES>> ....................... 179
• <<ch09, 9 ■ Color, style, and appearance>> 181
• <<ch10, 10 ■ Terminals and output formats>> 209
• <<ch11, 11 ■ Automation, scripting, and animation>> 236
• <<ch12, 12 ■ Beyond the defaults: workflow and styles>> 262

• <<part4, PART 4 UNDERSTANDING DATA>> ............................. 287
• <<ch13, 13 ■ Basic techniques of graphical analysis>> 289
• <<ch14, 14 ■ Topics in graphical analysis>> 314
• <<ch15, 15 ■ Coda: understanding data with graphs>> 344

== table of contents

You can see this entire book for free. Click anywhere in the table of 
contents to start reading

- preface
- acknowledgments
- about this book
- about the authors
- author online
- about the cover illustration

- Part 1 Getting started

- https://livebook.manning.com/book/gnuplot-in-action-second-edition/chapter-1[1. Prelude: Understanding data with gnuplot]
• <<section-1-1,    1.1. A busy weekend>>
• <<section-1-1-1,  1.1.1. Planning a marathon>>
• <<section-1-1-2,  1.1.2. Determining the future>>
• <<section-1-2,    1.2. What is graphical analysis?>>
• <<section-1-2-1,  1.2.1. Why graphical analysis?>>
• <<section-1-2-2,  1.2.2. Limitations of graphical analysis>>
• <<section-1-3,    1.3. What is gnuplot?>>
• <<section-1-3-1,  1.3.1. Gnuplot isn’t GNU>>
• <<section-1-3-2,  1.3.2. Why gnuplot?>>
• <<section-1-3-3,  1.3.3. Limitations>>
• <<section-1-3-4,  1.3.4. Gnuplot 5: the best gnuplot there ever was!>>
• <<section-1-4,    1.4. Summary>>

- https://livebook.manning.com/book/gnuplot-in-action-second-edition/chapter-2[2. Tutorial: Essential gnuplot]
• <<section-2-1,    2.1. Simple plots>>
• <<section-2-1-1,  2.1.1. Invoking gnuplot and first plots>>
• <<section-2-1-2,  2.1.2. Plotting data from a file>>
• <<section-2-1-3,  2.1.3. Abbreviations and defaults>>
• <<section-2-2,    2.2. Saving commands and exporting graphics>>
• <<section-2-2-1,  2.2.1. Saving and loading commands>>
• <<section-2-2-2,  2.2.2. Exporting graphs>>
• <<section-2-2-3,  2.2.3. One-step export script>>
• <<section-2-3,    2.3. Managing options with set and show>>
• <<section-2-4,    2.4. Getting help>>
• <<section-2-5,    2.5. Summary>>

- https://livebook.manning.com/book/gnuplot-in-action-second-edition/chapter-3[3. The heart of the matter: the plot command]
• <<section-3-1,    3.1. Plotting functions and data>>
• <<section-3-1-1,  3.1.1. Plotting functions>>
• <<section-3-1-2,  3.1.2. Plotting data>>
• <<section-3-2,    3.2. Math with gnuplot>>
• <<section-3-2-1,  3.2.1. Mathematical expressions>>
• <<section-3-2-2,  3.2.2. Built-in functions>>
• <<section-3-2-3,  3.2.3. User-defined variables and functions>>
• <<section-3-2-4,  3.2.4. functions>>
• <<section-3-2-5,  3.2.5. Mathematically undefined values and NaN (Not-a-Number)>>
• <<section-3-3,    3.3. Data transformations>>
• <<section-3-3-1,  3.3.1. Simple data transformations>>
• <<section-3-4,    3.4. Logarithmic plots>>
• <<section-3-4-1,  3.4.1. Digression: How do logarithmic plots work?>>
• <<section-3-5,    3.5. Smooth interpolation and approximation>>
• <<section-3-5-1,  3.5.1. Interpolation curves>>
• <<section-3-5-2,  3.5.2. Point distributions>>
• <<section-3-5-3,  3.5.3. Deduping repeated entries>>
• <<section-3-6,    3.6. Summary>>

- Part 2 Creating graphs

- https://livebook.manning.com/book/gnuplot-in-action-second-edition/chapter-4[4. Managing data sets and files]
• <<section-4-1,    4.1. Quickstart: The standard data file format>>
• <<section-4-1-1,  4.1.1. Comments and header lines>>
• <<section-4-1-2,  4.1.2. Selecting columns>>
• <<section-4-2,    4.2. Managing structured data sets>>
• <<section-4-2-1,  4.2.1. Multiple data sets per file: index>>
• <<section-4-2-2,  4.2.2. Records spanning multiple lines: every>>
• <<section-4-3,    4.3. File format options in detail>>
• <<section-4-3-1,  4.3.1. Number formats>>
• <<section-4-3-2,  4.3.2. Comments>>
• <<section-4-3-3,  4.3.3. Field separator>>
• <<section-4-3-4,  4.3.4. Missing values>>
• <<section-4-3-5,  4.3.5. Strings in data files>>
• <<section-4-4,    4.4. Accessing columns and pseudocolumns>>
• <<section-4-4-1,  4.4.1. Accessing columns by position or name>>
• <<section-4-4-2,  4.4.2. Pseudocolumns>>
• <<section-4-4-3,  4.4.3. Column access functions>>
• <<section-4-5,    4.5. Pseudofiles>>
• <<section-4-5-1,  4.5.1. Reading data from standard input>>
• <<section-4-5-2,  4.5.2. Heredocs>>
• <<section-4-5-3,  4.5.3. Reading data from a subprocess>>
• <<section-4-5-4,  4.5.4. Writing to a pipe>>
• <<section-4-5-5,  4.5.5. Generating data>>
• <<section-4-6,    4.6. Metadata in data files>>
• <<section-4-7,    4.7. Other file formats>>
• <<section-4-8,    4.8. Summary>>

- https://livebook.manning.com/book/gnuplot-in-action-second-edition/chapter-5[5. Practical matters: strings, loops, history]
• <<section-5-1,    5.1. Strings>>
• <<section-5-1-1,  5.1.1. Quotes>>
• <<section-5-1-2,  5.1.2. String operations>>
• <<section-5-1-3,  5.1.3. String applications>>
• <<section-5-1-4,  5.1.4. Crazy example: plotting the Unix password file>>
• <<section-5-1-5,  5.1.5. Digression: Unicode and UTF-8>>
• <<section-5-2,    5.2. String macros>>
• <<section-5-3,    5.3. Generating textual output>>
• <<section-5-3-1,  5.3.1. The print command>>
• <<section-5-3-2,  5.3.2. The set table option>>
• <<section-5-4,    5.4. Simplifying work with inline loops>>
• <<section-5-4-1,  5.4.1. Loops over numbers>>
• <<section-5-4-2,  5.4.2. Loops over strings>>
• <<section-5-4-3,  5.4.3. Summary of inline loops>>
• <<section-5-5,    5.5. Gnuplot’s internal variables>>
• <<section-5-6,    5.6. Inspecting compile-time options>>
• <<section-5-7,    5.7. Command history>>
• <<section-5-7-1,  5.7.1. Redrawing a graph>>
• <<section-5-7-2,  5.7.2. The general history feature>>
• <<section-5-7-3,  5.7.3. Restoring session defaults>>
• <<section-5-8,    5.8. Summary>>

- https://livebook.manning.com/book/gnuplot-in-action-second-edition/chapter-6[6. A catalog of styles]
• <<section-6-1,    6.1. Why use different plot styles?>>
• <<section-6-2,    6.2. Styles and aspects>>
• <<section-6-2-1,  6.2.1. Choosing styles inline through with>>
• <<section-6-2-2,  6.2.2. The default sequence>>
• <<section-6-2-3,  6.2.3. Customizing graph elements>>
• <<section-6-3,    6.3. A catalog of plotting styles>>
• <<section-6-3-1,  6.3.1. Core styles: lines and points>>
• <<section-6-3-2,  6.3.2. Indicating uncertainty: styles with errorbars or ranges>>
• <<section-6-3-3,  6.3.3. Styles with steps and boxes>>
• <<section-6-3-4,  6.3.4. Filled styles>>
• <<section-6-3-5,  6.3.5. Beyond lines and points: multivariate visualization>>
• <<section-6-4,    6.4. Putting it together>>
• <<section-6-5,    6.5. Other styles>>
• <<section-6-6,    6.6. Summary>>

- https://livebook.manning.com/book/gnuplot-in-action-second-edition/chapter-7[7. Decorations]
• <<section-7-1,    7.1. Quick start: minimal context for data>>
• <<section-7-2,    7.2. Digression: layers and locations>>
• <<section-7-2-1,  7.2.1. Locations>>
• <<section-7-2-2,  7.2.2. Layers>>
• <<section-7-3,    7.3. Additional graph elements: decorations>>
• <<section-7-3-1,  7.3.1. Common conventions>>
• <<section-7-3-2,  7.3.2. Arrows>>
• <<section-7-3-3,  7.3.3. Text labels>>
• <<section-7-3-4,  7.3.4. Shapes or "Objects">>
• <<section-7-4,    7.4. The graph’s legend or key>>
• <<section-7-4-1,  7.4.1. Turning the key on and off>>
• <<section-7-4-2,  7.4.2. Placement>>
• <<section-7-4-3,  7.4.3. Layout>>
• <<section-7-4-4,  7.4.4. Appearance>>
• <<section-7-4-5,  7.4.5. Explanations>>
• <<section-7-4-6,  7.4.6. Default settings>>
• <<section-7-5,    7.5. Worked example: features of a spectrum>>
• <<section-7-6,    7.6. Summary>>

- https://livebook.manning.com/book/gnuplot-in-action-second-edition/chapter-8[8. All about axes]
• <<section-8-1,    8.1. Multiple axes>>
• <<section-8-1-1,  8.1.1. Terminology>>
• <<section-8-1-2,  8.1.2. Plotting with two coordinate systems>>
• <<section-8-1-3,  8.1.3. Sidebar: Should you do it?>>
• <<section-8-1-4,  8.1.4. Linking axes>>
• <<section-8-2,    8.2. Selecting plot ranges>>
• <<section-8-2-1,  8.2.1. What you need to know for interactive work>>
• <<section-8-2-2,  8.2.2. What you might want to know for batch processing>>
• <<section-8-3,    8.3. Tic marks>>
• <<section-8-3-1,  8.3.1. Overview and common conventions>>
• <<section-8-3-2,  8.3.2. Tic mark appearance and placement>>
• <<section-8-3-3,  8.3.3. Tic labels>>
• <<section-8-3-4,  8.3.4. Tic mark location and frequency>>
• <<section-8-3-5,  8.3.5. Reading tic labels from file>>
• <<section-8-3-6,  8.3.6. Grid and zero axis>>
• <<section-8-4,    8.4. Special case: Time series>>
• <<section-8-4-1,  8.4.1. Digression: Locales>>
• <<section-8-4-2,  8.4.2. Turning numbers into names: months and weekdays>>
• <<section-8-4-3,  8.4.3. General time series: the gory details>>
• <<section-8-4-4,  8.4.4. Beyond tic labels: processing date/time information>>
• <<section-8-5,    8.5. Summary>>

- Part 3 Mastering technicalities

- https://livebook.manning.com/book/gnuplot-in-action-second-edition/chapter-9[9. Color, style, and appearance]
• <<section-9-1,    9.1. Color>>
• <<section-9-1-1,  9.1.1. Explicit colors>>
• <<section-9-1-2,  9.1.2. Alpha shading and transparency>>
• <<section-9-1-3,  9.1.3. Selecting a color through indexed lookup>>
• <<section-9-1-4,  9.1.4. Mapping a value into a continuous gradient>>
• <<section-9-1-5,  9.1.5. Using data-dependent colors>>
• <<section-9-1-6,  9.1.6. The built-in color sequences>>
• <<section-9-1-7,  9.1.7. Tips and tricks>>
• <<section-9-2,    9.2. Lines and points>>
• <<section-9-2-1,  9.2.1. Point types and shapes>>
• <<section-9-2-2,  9.2.2. Dash pattern>>
• <<section-9-3,    9.3. Customizing color, dash, and point sequences>>
• <<section-9-3-1,  9.3.1. Customizing line types>>
• <<section-9-3-2,  9.3.2. Special line types>>
• <<section-9-4,    9.4. Global styles>>
• <<section-9-4-1,  9.4.1. Data and function styles>>
• <<section-9-4-2,  9.4.2. Line styles>>
• <<section-9-4-3,  9.4.3. Arrow styles>>
• <<section-9-4-4,  9.4.4. Fill styles>>
• <<section-9-4-5,  9.4.5. Other global styles>>
• <<section-9-5,    9.5. Overall appearance: aspect ratio and borders>>
• <<section-9-5-1,  9.5.1. Size and aspect ratio>>
• <<section-9-5-2,  9.5.2. Borders>>
• <<section-9-5-3,  9.5.3. Margins>>
• <<section-9-5-4,  9.5.4. Internal variables>>
• <<section-9-6,    9.6. Summary>>

- https://livebook.manning.com/book/gnuplot-in-action-second-edition/chapter-10[10. Terminals in depth]
• <<section-10-1,   10.1. The terminal abstraction>>
• <<section-10-1-1, 10.1.1. Historical digression>>
• <<section-10-1-2, 10.1.2. The terminal workflow>>
• <<section-10-1-3, 10.1.3. Terminal capabilities and the test command>>
• <<section-10-1-4, 10.1.4. Gnuplot terminals today>>
• <<section-10-2,   10.2. Font selection and enhanced text mode>>
• <<section-10-2-1, 10.2.1. Font selection>>
• <<section-10-2-2, 10.2.2. Font resolution>>
• <<section-10-2-3, 10.2.3. Enhanced text mode>>
• <<section-10-3,   10.3. Generating PNG and PDF with Cairo-based terminals>>
• <<section-10-3-1, 10.3.1. Scaling a complete plot up or down>>
• <<section-10-4,   10.4. Using gnuplot with LaTeX>>
• <<section-10-4-1, 10.4.1. Including a graph in a LaTeX document>>
• <<section-10-4-2, 10.4.2. Using the cairolatex terminal>>
• <<section-10-4-3, 10.4.3. Letting LaTeX generate the graph>>
• <<section-10-5,   10.5. Scalable graphics for the Web with SVG and HTML5>>
• <<section-10-5-1, 10.5.1. The svg terminal>>
• <<section-10-5-2, 10.5.2. The canvas terminal>>
• <<section-10-6,   10.6. Interactive terminals>>
• <<section-10-6-1, 10.6.1. Common options>>
• <<section-10-6-2, 10.6.2. The wxt and qt terminals>>
• <<section-10-6-3, 10.6.3. Aqua>>
• <<section-10-6-4, 10.6.4. Windows>>
• <<section-10-7,   10.7. Other terminals>>
• <<section-10-8,   10.8. Summary>>

- https://livebook.manning.com/book/gnuplot-in-action-second-edition/chapter-11[11. Automation, scripting, and animation]
• <<section-11-1,   11.1. Loops and conditionals>>
• <<section-11-1-1, 11.1.1. Worked example: making graph paper>>
• <<section-11-1-2, 11.1.2. Worked examples: iterating over files>>
• <<section-11-1-3, 11.1.3. Worked examples: Taylor series and Newton’s method>>
• <<section-11-2,   11.2. Command files>>
• <<section-11-2-1, 11.2.1. Scripts as subroutines>>
• <<section-11-2-2, 11.2.2. Worked example: export script>>
• <<section-11-3,   11.3. Batch processing>>
• <<section-11-3-1, 11.3.1. Using gnuplot in shell pipelines>>
• <<section-11-4,   11.4. Calling gnuplot from other programs>>
• <<section-11-4-1, 11.4.1. Worked example: calling gnuplot from Perl>>
• <<section-11-4-2, 11.4.2. Worked example: calling gnuplot from Python>>
• <<section-11-4-3, 11.4.3. Helpful hints>>
• <<section-11-5,   11.5. Animations>>
• <<section-11-5-1, 11.5.1. Introducing a delay>>
• <<section-11-5-2, 11.5.2. Waiting for a user event>>
• <<section-11-5-3, 11.5.3. Further examples>>
• <<section-11-6,   11.6. Case study: continuously monitoring a live data stream>>
• <<section-11-6-1, 11.6.1. Using gnuplot to monitor a file>>
• <<section-11-6-2, 11.6.2. Using a driver to monitor arbitrary data sources>>
• <<section-11-7,   11.7. Summary>>

- https://livebook.manning.com/book/gnuplot-in-action-second-edition/chapter-12[12. Beyond the defaults: workflow and styles]
• <<section-12-1,   12.1. The standard interactive workflow>>
• <<section-12-1-1, 12.1.1. Extracting specifics from command files>>
• <<section-12-1-2, 12.1.2. Extending the command set>>
• <<section-12-1-3, 12.1.3. Session variables, loops, and macros>>
• <<section-12-2,   12.2. Using external editors and viewers>>
• <<section-12-3,   12.3. Invoking shell commands from gnuplot>>
• <<section-12-3-1, 12.3.1. Worked example: plotting each file in a directory>>
• <<section-12-4,   12.4. Hot keys and mousing>>
• <<section-12-4-1, 12.4.1. Default hot keys>>
• <<section-12-4-2, 12.4.2. Mousing>>
• <<section-12-4-3, 12.4.3. Custom hot keys>>
• <<section-12-4-4, 12.4.4. Capturing mouse events>>
• <<section-12-4-5, 12.4.5. Case study: placing arrows and labels with the mouse>>
• <<section-12-5,   12.5. Startup configurations and initialization>>
• <<section-12-5-1, 12.5.1. Startup and initialization files>>
• <<section-12-5-2, 12.5.2. Environment variables>>
• <<section-12-5-3, 12.5.3. Gnuplot command-line flags>>
• <<section-12-6,   12.6. Stylesheets>>
• <<section-12-6-1, 12.6.1. Worked example: stylesheets>>
• <<section-12-7,   12.7. Summary>>

- Part 4 Understanding data

- https://livebook.manning.com/book/gnuplot-in-action-second-edition/chapter-13[13. Basic techniques of graphical analysis]
• <<section-13-1,   13.1. Representing relationships>>
• <<section-13-1-1, 13.1.1. Scatter plots>>
• <<section-13-1-2, 13.1.2. Highlighting trends>>
• <<section-13-2,   13.2. Logarithmic plots>>
• <<section-13-2-1, 13.2.1. Large variations in data>>
• <<section-13-2-2, 13.2.2. Power-law behavior>>
• <<section-13-3,   13.3. Point distributions>>
• <<section-13-3-1, 13.3.1. Summary statistics and box plot>>
• <<section-13-3-2, 13.3.2. Jitter plots and histograms>>
• <<section-13-3-3, 13.3.3. Kernel density estimates and rug plots>>
• <<section-13-3-4, 13.3.4. Cumulative distribution functions>>
• <<section-13-4,   13.4. Ranked data>>
• <<section-13-5,   13.5. Pie charts>>
• <<section-13-6,   13.6. Organizational issues>>
• <<section-13-6-1, 13.6.1. The lifecycle of a graph>>
• <<section-13-6-2, 13.6.2. Input data files>>
• <<section-13-6-3, 13.6.3. Output files>>
• <<section-13-7,   13.7. Presentation graphics>>
• <<section-13-8,   13.8. Summary>>

- https://livebook.manning.com/book/gnuplot-in-action-second-edition/chapter-14[14. Topics in graphical analysis]
• <<section-14-1,   14.1. Techniques for time-series plots>>
• <<section-14-1-1, 14.1.1. Plotting an Apache webserver log>>
• <<section-14-1-2, 14.1.2. Smoothing and differencing>>
• <<section-14-1-3, 14.1.3. Monitoring and control charts>>
• <<section-14-1-4, 14.1.4. Changing composition and stacked curves>>
• <<section-14-2,   14.2. Graphical techniques for multivariate data sets>>
• <<section-14-2-1, 14.2.1. Introduction>>
• <<section-14-2-2, 14.2.2. Distribution of values by attribute>>
• <<section-14-2-3, 14.2.3. Distribution by level>>
• <<section-14-2-4, 14.2.4. Scatter plot matrix>>
• <<section-14-2-5, 14.2.5. Parallel-coordinates plot>>
• <<section-14-3,   14.3. Visual Perception>>
• <<section-14-3-1, 14.3.1. Banking>>
• <<section-14-3-2, 14.3.2. Judging lengths and distances>>
• <<section-14-3-3, 14.3.3. Plot ranges and whether to always include zero>>
• <<section-14-4,   14.4. Summary>>

- https://livebook.manning.com/book/gnuplot-in-action-second-edition/chapter-15[15. Coda: Understanding data with graphs]
- Appendixes
- https://livebook.manning.com/book/gnuplot-in-action-second-edition/appendix-a[Appendix A: Obtaining, building, and installing gnuplot]
- https://livebook.manning.com/book/gnuplot-in-action-second-edition/appendix-b[Appendix B: Resources]
//The following bonus appendixes are available in the eBook
- Appendix C: Surface and contour plots
- Appendix D: Paletes and false-color plots
- Appendix E: Special plots
- Appendix F: Higher math


[[toc]]
== contents

• <<xvii, preface>>
• <<xix, acknowledgments>>
• <<xx, about this book>>

• <<part1, PART 1 GETTING STARTED>> 

• <<ch01, 1 Prelude: understanding data with gnuplot>>
• <<P004, 1.1 A busy weekend>>
• <<P004, Planning a marathon>>
• <<P006, Determining the future>>
• <<P009, 1.2 What is graphical analysis?>>
• <<P011, Why graphical analysis?>>
• <<P011, Limitations of graphical analysis>>
• <<P011, 1.3 What is gnuplot?>>
• <<P012, Gnuplot isn’t GNU>>
• <<P012, Why gnuplot?>>
• <<P013, Limitations>>
• <<P013, Gnuplot 5: the best gnuplot there ever was!>>
• <<P015, 1.4 Summary>>

• <<ch02, 2 Tutorial: essential gnuplot>>
• <<P017, 2.1 Simple plots>>
• <<P017, Invoking gnuplot and first plots>>
• <<P020, Plotting data from a file>>
• <<P024, Abbreviations and defaults>>
• <<P025, 2.2 Saving commands and exporting graphics>>
• <<P025, Saving and loading commands>>
• <<P026, Exporting graphs>>
• <<P029, 2.3 Managing options with set and show>>
• <<P030, 2.4 Getting help>>
• <<P030, 2.5 Summary>>

• <<ch03, 3 The heart of the matter: the plot command>>
• <<P032, 3.1 Plotting functions and data>>
• <<P032, Plotting functions>>
• <<P033, Plotting data>>
• <<P034, 3.2 Math with gnuplot>>
• <<P034, Mathematical expressions>>
• <<P036, Built-in functions>>
• <<P037, User-defined variables and functions>>
• <<P039, Mathematically undefined values and NaN (not a number)>>
• <<P039, 3.3 Data transformations>>
• <<P040, Simple data transformations>>
• <<P042, 3.4 Logarithmic plots>>
• <<P045, 3.5 Smooth interpolation and approximation>>
• <<P046, Interpolation curves>>
• <<P049, Point distributions>>
• <<P051, Deduping repeated entries>>
• <<P051, 3.6 Summary>>

• <<part2, PART 2 CREATING GRAPHS>> 

• <<ch04, 4 Managing data sets and files>>
• <<P056, 4.1 Quickstart: the standard data-file format>>
• <<P058, Comments and header lines>>
• <<P058, Selecting columns>>
• <<P059, 4.2 Managing structured data sets>>
• <<P059, Multiple data sets per file: index>>
• <<P062, Records spanning multiple lines: the every directive>>
• <<P063, 4.3 File format options in detail>>
• <<P063, Number formats>>
• <<P063, Comments>>
• <<P064, Field separator>>
• <<P065, Missing values>>
• <<P066, Strings in data files>>
• <<P067, 4.4 Accessing columns and pseudocolumns>>
• <<P068, Accessing columns by position or name>>
• <<P069, Pseudocolumns>>
• <<P069, Column-access functions>>
• <<P070, 4.5 Pseudofiles>>
• <<P071, Reading data from standard input>>
• <<P072, Heredocs>>
• <<P074, Reading data from a subprocess>>
• <<P074, Writing to a pipe>>
• <<P075, Generating data>>
• <<P075, 4.6 Metadata in data files>>
• <<P076, 4.7 Other file formats>>
• <<P077, 4.8 Summary>>

• <<ch05, 5 Practical matters: strings, loops, and history>>
• <<P079, 5.1 Strings>>
• <<P080, Quotes>>
• <<P080, String operations>>
• <<P082, Worked example: plotting the Unix password file>>
• <<P085, 5.2 String expressions and string macros>>
• <<P086, String expressions in commands>>
• <<P086, Executing a string with eval>>
• <<P087, String macros inside commands>>
• <<P088, 5.3 Generating textual output>>
• <<P088, The print and set print commands>>
• <<P089, The set table command and the with table style>>
• <<P090, Reading and writing heredocs>>
• <<P090, 5.4 Simplifying work with inline loops>>
• <<P090, Loops over numbers>>
• <<P091, Loops over strings>>
• <<P092, Summary of inline loops>>
• <<P093, 5.5 Gnuplot’s internal variables>>
• <<P094, 5.6 Inspecting file contents with the stats command>>
• <<P095, The stats command and internal variables>>
• <<P096, Further options for the stats command>>
• <<P096, 5.7 Command history>>
• <<P097, Redrawing a graph>>
• <<P097, The general history feature>>
• <<P098, Restoring session defaults>>
• <<P099, 5.8 Summary>>

• <<ch06, 6 A catalog of styles>>
• <<P101, 6.1 Why use different plot styles?>>
• <<P101, 6.2 Styles and aspects>>
• <<P101, Choosing styles inline through with>>
• <<P102, The default sequence>>
• <<P103, Customizing graph elements>>
• <<P105, 6.3 A catalog of plotting styles>>
• <<P106, Core styles: lines and points>>
• <<P108, Indicating uncertainty: styles with error bars or ranges>>
• <<P112, Styles with steps and boxes>>
• <<P114, Filled styles>>
• <<P115, Beyond lines and points: multivariate visualization>>
• <<P120, 6.4 Putting it together>>
• <<P123, 6.5 Other styles>>
• <<P123, 6.6 Summary>>

• <<ch07, 7 Decorations: labels, arrows, and explanations>>
• <<P126, 7.1 Quick start: minimal context for data>>
• <<P128, 7.2 Understanding layers and locations>>
• <<P128, Locations>>
• <<P129, Layers>>
• <<P130, 7.3 Additional graph elements: decorations>>
• <<P130, Common conventions>>
• <<P131, Arrows>>
• <<P134, Text labels>>
• <<P136, Shapes or objects>>
• <<P137, 7.4 The graph’s legend or key>>
• <<P138, Turning the key on and off>>
• <<P138, Placement>>
• <<P139, Layout>>
• <<P139, Appearance>>
• <<P140, Explanations>>
• <<P143, Default settings>>
• <<P144, 7.5 Worked example: features of a spectrum>>
• <<P145, 7.6 Summary>>

• <<ch08, 8 All about axes>>
• <<P147, 8.1 Multiple axes>>
• <<P147, Terminology>>
• <<P148, Plotting with two coordinate systems>>
• <<P150, Linking axes>>
• <<P153, 8.2 Selecting plot ranges>>
• <<P154, What you need to know for interactive work>>
• <<P155, What you might want to know for batch processing>>
• <<P156, 8.3 Tic marks>>
• <<P156, Overview and common conventions>>
• <<P157, Tic mark appearance and placement>>
• <<P159, Tic labels>>
• <<P163, Tic mark location and frequency>>
• <<P165, Reading tic labels from file>>
• <<P166, Grid and zero axis>>
• <<P168, 8.4 Special case: time series>>
• <<P169, Turning numbers into names: months and weekdays>>
• <<P170, General time series: the gory details>>
• <<P176, Beyond tic labels: processing date/time information>>
• <<P178, 8.5 Summary>>

• <<part3, PART 3 MASTERING TECHNICALITIES>> 
• <<ch09, 9 Color, style, and appearance>>
• <<P181, 9.1 Color>>
• <<P182, Explicit colors>>
• <<P185, Alpha shading and transparency>>
• <<P187, Selecting a color through indexed lookup>>
• <<P188, Mapping a value into a continuous gradient>>
• <<P189, Using data-dependent colors>>
• <<P193, The built-in color sequences>>
• <<P194, Tips and tricks>>
• <<P195, 9.2 Lines and points>>
• <<P195, Point types and shapes>>
• <<P196, Dash pattern>>
• <<P198, 9.3 Customizing color, dash, and point sequences>>
• <<P199, Customizing line types>>
• <<P200, Special line types>>
• <<P200, 9.4 Global styles>>
• <<P200, Data and function styles>>
• <<P201, Line styles>>
• <<P202, Arrow styles>>
• <<P202, Fill styles>>
• <<P203, Other global styles>>
• <<P203, 9.5 Overall appearance: aspect ratio and borders>>
• <<P204, Size and aspect ratio>>
• <<P205, Borders>>
• <<P207, Margins>>
• <<P207, Internal variables>>
• <<P208, 9.6 Summary>>

• <<ch10, 10 Terminals and output formats>>
• <<P210, 10.1 The terminal abstraction>>
• <<P210, Historical digression>>
• <<P210, The terminal workflow>>
• <<P212, Terminal capabilities and the test command>>
• <<P214, 10.2 Font selection and enhanced text mode>>
• <<P214, Font selection>>
• <<P215, Font resolution>>
• <<P217, Enhanced text mode>>
• <<P219, Worked example>>
• <<P220, 10.3 Generating PNG and PDF with cairo-based terminals>>
• <<P221, 10.4 Using gnuplot with LaTeX>>
• <<P222, Including a graph in a LaTeX document>>
• <<P224, Using the cairolatex terminal>>
• <<P228, Letting LaTeX generate the graph>>
• <<P229, 10.5 Scalable graphics for the Web with SVG and HTML5>>
• <<P229, The svg terminal>>
• <<P230, The canvas terminal>>
• <<P232, 10.6 Interactive terminals>>
• <<P232, Common options>>
• <<P233, The wxt and qt terminals>>
• <<P233, The aqua terminal>>
• <<P233, The windows terminal>>
• <<P233, 10.7 Other terminals>>
• <<P234, 10.8 Summary>>

• <<ch11, 11 Automation, scripting, and animation>>
• <<P237, 11.1 Loops and conditionals>>
• <<P239, Worked example: making graph paper>>
• <<P240, Worked examples: iterating over files>>
• <<P241, Worked examples: Taylor series and Newton’s method>>
• <<P243, 11.2 Command files>>
• <<P244, Scripts as subroutines>>
• <<P246, Worked example: export script>>
• <<P247, 11.3 Batch processing>>
• <<P249, Using gnuplot in shell pipelines>>
• <<P250, 11.4 Calling gnuplot from other programs>>
• <<P250, Worked example: calling gnuplot from Perl>>
• <<P251, Worked example: calling gnuplot from Python>>
• <<P252, Helpful hints>>
• <<P254, 11.5 Animations>>
• <<P254, Introducing a delay>>
• <<P255, Waiting for a user event>>
• <<P255, Further examples>>
• <<P256, 11.6 Case study: continuously monitoring a live data stream>>
• <<P256, Using gnuplot to monitor a file>>
• <<P259, Using a driver to monitor arbitrary data sources>>
• <<P261, 11.7 Summary>>

• <<ch12, 12 Beyond the defaults: workflow and styles>>
• <<P263, 12.1 The standard interactive workflow>>
• <<P263, Extracting specifics from command files>>
• <<P264, Extending the command set>>
• <<P266, Session variables, loops, and macros>>
• <<P267, 12.2 Using external editors and viewers>>
• <<P268, 12.3 Invoking shell commands from gnuplot>>
• <<P269, Worked example: plotting each file in a directory>>
• <<P269, 12.4 Hotkeys and mousing>>
• <<P270, Default hotkeys>>
• <<P270, Mousing>>
• <<P271, Custom hotkeys>>
• <<P273, Capturing mouse events>>
• <<P274, Case study: placing arrows and labels with the mouse>>
• <<P275, 12.5 Startup configurations and initialization>>
• <<P276, Startup and initialization files>>
• <<P277, Environment variables>>
• <<P278, Gnuplot command-line flags>>
• <<P279, 12.6 Stylesheets>>
• <<P279, Worked example: stylesheets>>
• <<P285, 12.7 Summary>>

• <<part4, PART 4 UNDERSTANDING DATA>> 

• <<ch13, 13 Basic techniques of graphical analysis>>
• <<P290, 13.1 Representing relationships>>
• <<P290, Scatter plots>>
• <<P292, Highlighting trends>>
• <<P295, 13.2 Logarithmic plots>>
• <<P295, Large variations in data>>
• <<P298, Power-law behavior>>
• <<P299, 13.3 Point distributions>>
• <<P300, Summary statistics and box plots>>
• <<P300, Jitter plots and histograms>>
• <<P302, Kernel density estimates and rug plots>>
• <<P303, Cumulative distribution functions>>
• <<P304, 13.4 Ranked data>>
• <<P307, 13.5 Pie charts>>
• <<P308, 13.6 Organizational issues>>
• <<P308, The lifecycle of a graph>>
• <<P309, Input data files>>
• <<P310, Output files>>
• <<P311, 13.7 Presentation graphics>>
• <<P313, 13.8 Summary>>

• <<ch14, 14 Topics in graphical analysis>>
• <<P315, 14.1 Techniques for time-series plots>>
• <<P315, Plotting an Apache web server log>>
• <<P316, Smoothing and differencing>>
• <<P319, Monitoring and control charts>>
• <<P325, Changing composition and stacked curves>>
• <<P328, 14.2 Graphical techniques for multivariate data sets>>
• <<P329, Introduction>>
• <<P329, Distribution of values by attribute>>
• <<P331, Distribution by level>>
• <<P333, Scatter-plot matrix>>
• <<P335, Parallel-coordinates plot>>
• <<P338, 14.3 Visual perception>>
• <<P338, Banking>>
• <<P340, Judging lengths and distances>>
• <<P342, Plot ranges and whether to always include zero>>
• <<P343, 14.4 Summary>>

• <<ch15, 15 Coda: understanding data with graphs>>
• <<P346, appendix A Obtaining, building, and installing gnuplot>>
• <<P352, appendix B Resources>>
• appendix C Surface and contour plots available in the e-book only
• appendix D Palettes and false-color plots available in the e-book only
• appendix E Special plots available in the e-book only
• appendix F Higher math available in the e-book only
• <<P355, index>>



[[copyrightp1g]]
== Copyright

For online information and ordering of this and other Manning books,
please visit http://www.manning.com[www.manning.com]. The publisher
offers discounts on this book when ordered in quantity. For more
information, please contact

[source]
----
     Special Sales Department
     Manning Publications Co.
     20 Baldwin Road
     PO Box 761
     Shelter Island, NY 11964
     Email: orders@manning.com
----

©2016 by Manning Publications Co. All rights reserved.

No part of this publication may be reproduced, stored in a retrieval
system, or transmitted, in any form or by means electronic, mechanical,
photocopying, or otherwise, without prior written permission of the
publisher.

Many of the designations used by manufacturers and sellers to
distinguish their products are claimed as trademarks. Where those
designations appear in the book, and Manning Publications was aware of a
trademark claim, the designations have been printed in initial caps or
all caps.

image:https://drek4537l1klr.cloudfront.net/janert2/Figures/common02.jpg[common02]
Recognizing the importance of preserving what has been written, it is
Manning’s policy to have the books we publish printed on acid-free
paper, and we exert our best efforts to that end. Recognizing also our
responsibility to conserve the resources of our planet, Manning books
are printed on paper that is at least 15 percent recycled and processed
without the use of elemental chlorine.

[%autowidth,cols=",~,~",frame=none]
|===
|image:https://drek4537l1klr.cloudfront.net/janert2/Figures/common01.jpg[common01]
a|
....
Manning Publications Co.
20 Baldwin Road
PO Box 761
Shelter Island, NY 11964
....

a|
....
Development editors: Marina Michaels
Technical development editor: Ravishankar Rajagopalan
Copyeditor: Tiffany Taylor
Proofreader: Toma Mulligan
Technical proofreader: Clark Gaylord
Typesetter: Dottie Marsico
Cover designer: Marija Tudor
....

|===

ISBN 9781633430181

Printed in the United States of America

1 2 3 4 5 6 7 8 9 10 – EBM – 21 20 19 18 17 16


[[ded01]]
=== Dedication

_The purpose of computing is insight, not numbers._

__R. W. Hamming__

_The purpose of computing is insight, not pictures._

__L. N. Trefethen__

Get Gnuplot in Action

buy ebook for  [.line-through]#$35.99# $23.39


== Praise for the First Edition

____
Knee-deep in data? This is your guidebook to exploring it with gnuplot.
 —Austin King
Mozilla
____

____
Sparkles with insight about visualization, image perception, and data
exploration.
 —Richard B. Kreckel
GiNaC.de
____

____
Incredibly useful for beginners—indispensable for advanced users.
 —Mark Pruett
Dominion
____

____
Bridges the gap between gnuplot’s reference manual and real-world problems.
 —Mitchell Johnson
Border Stylo
____

____
A Swiss Army knife for plotting data.
 —Nishanth Sastry
University of Cambridge / IBM
____

____
Plain and simple: if you use Gnuplot and would like to understand it better,
this book is for you. If you are looking for an excellent plotting tool—one that is
highly configurable and can easily handle millions of data points, then download Gnuplot and get this book.
 —Amazon reviewer
____




[[xvii]]
== preface

On New Year’s Day, 2015, the gnuplot development team released version 5.0—the
first major new gnuplot release in over 10 years! I decided to take this opportunity to
bring Gnuplot in Action up to date and to cover all the new features gnuplot has
acquired since the first edition of this book was written (in 2007).

It quickly became apparent it wouldn’t be sufficient to just add a couple of chap-
ters explaining the new features. In fact, the book you’re reading now has been almost
entirely rewritten from scratch. Most of the material from the first edition has been
retained, but it’s been heavily rearranged to accommodate the addition of new topics
and to reflect the changes in my own understanding and priorities.

Gnuplot 5 is largely backward compatible with previous versions, and hence most
of the first edition remains valid. At the same time, new features have been added to
all parts of gnuplot, either to add new functionality or to streamline and improve the
existing usage. Although many of the new features are small by themselves, when
taken together, their cumulative effect leads to a significantly different, more sophisti-
cated user experience.

In the process, the book’s page count has increased substantially from the first edi-
tion. To keep the physical dimensions of the printed book in check without having to
sacrifice important and useful material, some topics of a more specialized nature have
been relegated to the electronic (e-book) version. Access to the e-book is included in
the purchase of a print copy of the book.

Today, gnuplot is still going strong. Despite increased competition, gnuplot’s two
most attractive features are still largely unmet by other tools:

• The ability to explore data graphically, with an absolute minimum of effort, pro-
tocol, overhead, or boilerplate

• The ability to create immaculate, very high-quality graphs, with text labels and
other decorations, for presentation purposes

[[xviii]]
What’s new is that gnuplot has arrived in the 21st century. Color is now the standard,
font handling is up to date, and the graphing backend makes use of all contemporary
technologies to create the best-looking graphs possible.

In the first edition, I wrote that gnuplot was “an indispensable part of my toolbox:
one of the handful of programs I can’t do without.” Several years on, this is still true.

[[xix]]
== acknowledgments

During the preparation of this book, I enjoyed conversations and correspondence
with Austin King, Richard Kreckel, Ethan Merritt, Dawid Weiss, Bastian Märkisch,
Daniel Sebald, Petr Mikulik, Chris Mague, Luis Moux-Dominguez, and Lee Phillips.
Christoph Bersch, Zoltán Vörös, and Clark Gaylord read drafts of this book and pro-
vided many detailed suggestions; Mojca Miklavec answered several specific questions
with meticulous care. Others who read the draft manuscript include Ryan Balfanz,
Martin Beer, Andrew Bovill, Vitaly Bragilevsky, Anthony Cramp, Wolfgang Ecker-Lala,
Wesley R. Elsberry, Nitin Gode, David Kerns, Pavol Kral, Mathew Peet, Ravishankar
Rajagopalan, Karl-Friedrich Ratzsch, Jonathan Rioux, Mike Shepard, and Arthur
Zubarev.

I would also like to acknowledge the tremendous impact that Wikipedia has had
on the way I work. When I prepared the first edition, obtaining even basic information
on topics such as color spaces, Bézier curves, and the Mandelbrot set was a real chal-
lenge—difficult, time consuming, and not always successful. For all its faults and defi-
ciencies, Wikipedia has made it tremendously much easier to obtain at least an initial
introduction (and often quite a bit more) to an incredibly wide range of topics. It is a
stunning achievement.

Finally, I want to thank the people at Manning who made this book possible: pub-
lisher Marjan Bace and everyone on the editorial and production teams, including
Mary Piergies, Marina Michaels, Kevin Sullivan, Tiffany Taylor, Dottie Marsico, and
many others who worked behind the scenes.


[[xx]]
== about this book

This book is intended to be a comprehensive introduction to gnuplot: from the basics
to the power features and beyond. In addition to providing a tutorial on gnuplot itself,
it demonstrates how to apply and use gnuplot to extract insight from data.
The gnuplot program has always had complete and detailed reference documenta-
tion, but what was often missing was a continuous presentation that tied all the differ-
ent bits and pieces of gnuplot together and demonstrated how to use them to achieve
certain tasks. This book attempts to fill that gap. It should also serve as a handy refer-
ence for more advanced gnuplot users and as an introduction to graphical ways of
knowledge discovery.

And finally, this book tries to show you how to use gnuplot to achieve some surpris-
ingly nifty effects that will make everyone say, “How did you do that?”

=== Contents of this book

This book is divided into four parts. Part 1 consists of chapters 1 through 3 and is
intended as a tutorial introduction to get you started with gnuplot. These three 
chapters cover all the truly essential material so that by the end of chapter 3, you 
should be able to handle most basic plotting tasks in gnuplot.

Whereas part 1 only skims the surface, part 2 goes into depth. First, chapters 4 and
5 lay more groundwork by talking about the ins and outs of file formats, string han-
dling, and other practical matters. Then, chapters 6 through 8 discuss the various ways
to change the appearance of a plot: using different plotting styles; adding labels,
arrows, or other decorations; and changing the axes and their subdivisions. These
chapters cover the tactical aspects of working with gnuplot in detail.


[[xxi]]
Part 3 turns its attention away from individual graphs and addresses a variety of
more technical aspects. First, in chapter 9, you’ll learn more about color specification,
point and line types, and other relatively low-level graph elements. Chapter 10
explains how to export plots to common graphics file formats. Finally, chapters 11 and
12 address ways to improve the overall workflow through scripting and configuration
changes.

In the last part, I’ll mostly take gnuplot’s features for granted and concentrate on
the things you can do with them. Chapter 13 presents various fundamental types of
graphs and explains when and how to use them. Chapter 14 is more advanced and
offers solutions to some recurring topics in graphical analysis, before we end the book
with a reminder of what it’s all about in chapter 15.

The book has several appendixes. Appendix A explains how to obtain, build, and
install gnuplot. Appendix B provides pointers to some relevant resources.
Finally, some topics of a more specialized character have been relegated to a set of
supplemental appendixes: appendixes C and D discuss three-dimensional surface
plots and false-color plots (heatmaps), appendix E treats some special types of graphs,
and appendix F covers more mathematical topics. To reduce the physical dimensions
of the print book, these four appendixes are only available in the electronic (e-book)
version of this book. The purchase of a hard copy includes access to the e-book as
well—you can find instructions in the front of the print book.

TIP: Appendixes C through F are only available in the e-book version of this
book, which is included with the purchase of the hard-copy version. Check
the front of the print book for instructions on how to obtain the e-book.

=== How to read this book

This book was written as if readers were going to read it sequentially, cover to cover.
New material is presented in order, with later chapters relying only on topics intro-
duced earlier and avoiding forward references as much as possible. I realize that this is
not a realistic picture and that the need for technical information tends to arise in a
much more disjointed manner. In this spirit, I offer a few different “trail maps” to the
material presented here:

•  If you’re new to gnuplot, begin with chapters 2 and 3 and then dive into 
chapters 4–8 as required to pick up the skills you need to complete whatever task
you want to accomplish.

•  If you’re comfortable creating day-to-day graphs with gnuplot, then the 
material in chapters 9–12 should help you achieve greater efficiency in your work
and fine-tune the results.

•  If you’ve been using gnuplot for a long time already, then make sure you read
up on the new features in gnuplot 5. Chapters 5, 9, and 10, as well as parts of
chapters 11 and 12 will probably be of the most immediate interest to you.

[[xxii]]
•  If you’re new to graphical analysis, you may want to begin with chapter 13 to
learn some of the basic methods and concepts.

Finally, keep in mind that some interesting and useful material is only available in the
e-book. Three-dimensional surface and contour plots are discussed in appendix C.
False-color plots (heatmaps) are treated in appendix D, together with guidelines for
how to construct effective color gradients for data visualization. Appendix E explains
how to combine individual graphs into composites and also discusses some other 
specialized types of graphs. Appendix F treats topics of a more mathematical nature.

=== Whom this book is for

This book is intended for anyone who wants to plot and visualize data, either to
explore data sets graphically, or to create attractive, high-quality graphs for 
presentation and publication purposes. I had two kinds of people in mind when writing 
this book—those who already know gnuplot, and those who don’t:

•  If you already know gnuplot, I hope you’ll still find it a useful reference, in 
particular in regard to some of the more advanced topics later in the book. I’ve
tried to provide exactly the big-picture explanations and examples that have
always been missing from the standard gnuplot reference documentation.

•  If you’re new to gnuplot, I think you’ll find it easy enough to pick up—in fact,
I can promise you that by the end of chapter 2, you’ll be productive with gnuplot;
and by the end of chapter 3, you’ll be well equipped for most day-to-day data
graphing tasks that may come your way.

This book doesn’t require a strong background in mathematical methods or any in
statistics, but I occasionally do expect you to have at least a fleeting familiarity 
with simple programming concepts. A few sections naturally require some special 
preliminaries (for instance, some of the discussions in chapter 10 require knowledge of
LaTeX, and some sections in chapter 11 use Perl or Python code), but you can safely
skip those sections if their material doesn’t apply to you.

=== Conventions

I spell the name of the program in all lowercase (gnuplot), except at the beginning of
a sentence, when I capitalize it normally. This is in accordance with the usage recom-
mended in the gnuplot FAQ .

The gnuplot documentation is extensive, and I refer to it occasionally for additional 
details on topics covered only briefly or not at all here. Traditionally, the gnuplot
documentation has been called the online help or online documentation, owing to the
fact that it’s available online during a gnuplot session. But since the advent of the inter-
net, the word online seems to suggest network connectivity—falsely, in this context. To
avoid confusion, I’ll always refer to it as the standard gnuplot reference documentation.

[[xxiii]]
=== Code examples

Gnuplot commands are shown using a monospace font, like this: plot sin(x) . Gnu-
plot commands can be entered at the gnuplot command prompt as shown in the text;
the prompt itself has been suppressed to save space.

Single command lines can be long; to make them fit on a page, I occasionally had
to break them across multiple lines. If so, a gray arrow ( ➥ ) has been placed at the
beginning of the next line, to indicate that it is the continuation of the previous one:

[source]
----
plot "data" using 1:2 smooth csplines title "data" with lines,
➥ sin(x) title "model"
----

The break in the original line isn’t indicated separately. When using gnuplot in an
interactive session, your terminal program should automatically wrap a line that’s too
long. Alternatively, you can break lines by escaping the newline with a backslash as
usual. This is useful in command files for batch processing (and you’ll see some exam-
ples in chapter 12 in the context of string macros).

Some code snippets are only intended to demonstrate the syntax and don’t have a
graph associated with them. In this case, I use the generic name “data” as a place-
holder for the actual filename. No file named data exists in the downloads (in the
same way that no key named any can be found on a computer keyboard). It’s just a
generic placeholder.

Occasionally, I show Unix commands that need to be entered in a Unix shell; to
emphasize that these aren’t gnuplot commands, I prefix them with a generic shell
prompt, like this: shell> . Similarly, Python commands to be entered in a Python ses-
sion are prefixed with python>>> .

=== Downloads

The code for all numbered listings is available for download from www.manning.com/
books/gnuplot-in-action-second-edition, and so are the data sets. The only exception
to this are publicly available data sets: for these, I provide the URL where they can be
found.

Gnuplot searches for data files in the current directory, so the easiest way to run
the supplied command files is as follows:

*1*. Change into the data directory of the downloaded bundle.

*2*. Start gnuplot.

*3*. Issue plot commands at the gnuplot prompt the way they’re shown in the text
(for example, plot "marathon" using 1:2 ), or give the full pathname to the
gnuplot command file that you wish to run (for example, load "../gnuplot/
shapes.gp" ).


[[xxiv]]
=== Command synopses

Gnuplot has a large number of options, and keeping all of them and their sub-
options and optional parameters straight is a major theme running through this
book. Frequently, I’ll display all available options to a command in a command syn-
opsis before discussing the options in detail. To distinguish a synopsis of available
options from actual gnuplot code, a synopsis uses an italic font, like so:

[source]
----
set datafile commentschar ["{str:chars}"]
----

Within these summaries, I use a few syntactic conventions. My intent here is to stay
close to the usage familiar from the standard gnuplot reference documentation, but
also to follow more general conventions (such as those used for Unix man pages):

.{image}[Figures 01]
:image: https://drek4537l1klr.cloudfront.net/janert2/Figures/xxivfig01.jpg
[source]
[ ... ]     Square brackets for optional parts
[  |  ]     Vertical bars to separate alternatives
{ ... }     Curly braces for user-supplied input


For parameters supplied by the user, it’s often not clear from the context what kind of
information the command expects: is it a string or a number? If it’s a number, is it a
value selected from a fixed range of integers or a numerical factor? And so on. I’ve tried
to clarify this situation by prefixing each user-supplied input parameter with a type indi-
cator, terminated by a colon. I summarize the prefixes and their meanings in table 1.

[[table01]]
.Table 1. Type indicators for user-supplied parameters
[cols=",",options="header,autowidth",frame=none,grid=rows]
|===
|Prefix |Description
|str:   |A string
|int:   |An integer number
|flt:   |A floating-point number
|idx:   |An integer number, which is interpreted as a selection from a
         fixed range of values
|clr:   |A color specification—for example, rgbcolor "red" or rgb "#FFFF00"
|pos:   |A pair of comma-separated coordinates, optionally containing
         coordinate system specifiers—for example, 0,0 or first 1.1, screen 0.9
|enum:  |A gnuplot keyword as unquoted string
|===

=== Abbreviations

Many gnuplot commands have abbreviated forms, which I use frequently. The essen-
tial plot command, in particular, takes a large number of keyword directives, which I
usually abbreviate to save space and keystrokes. I strongly recommend that you quickly
become familiar with these shorthands and use them yourself. Table 2 lists both the
abbreviated and the full forms. The plot command also understands a large number
of appearance options (controlling aspects such as line width, style, and color), which
are generally also abbreviated. A comprehensive summary of appearance options,
together with their shorthands, can be found in table 6.1.


[[xxv]]
Table 3 lists three frequently occurring commands that are also usually abbreviated.

=== The figures in this book

The graphs in this book were generated with gnuplot; some special cases were han-
dled using pic. All graphs were originally prepared in color, using my own set of pre-
ferred colors instead of one of gnuplot’s default color schemes. The color versions of
the graphs are used in the electronic (e-book) version of this book. For the print
book, I prepared black-and-white versions through the application of an appropriate
stylesheet (see chapter 12). A handful of graphs required manual touch-ups in addi-
tion to the monochrome stylesheet to yield an optimal appearance.

You’ll find the line-type definitions of both the color and the black-and-white
stylesheets in table 4. The same colors and dash patterns are discussed in listings 12.7
and 12.9.

In particular in the latter part of the book, I frequently use point types (point
shapes) that aren’t the default, because the visual appearance of the graphs can often
be improved greatly this way. If so, the point type is usually chosen explicitly in the
appropriate code examples and listings.

[[table02]]
.Table 2. Abbreviations for frequently used directives to the `plot` command
[cols=",",options="header,autowidth",frame=none,grid=rows]
|===
|Abbreviation       |Full
|i                  |index
|ev                 |every
|u                  |using
|s                  |smooth
|s acs              |smooth acsplines
|s f                |smooth frequency
|s kdens            |smooth kdensity
|t                  |title
|w                  |with
|w l                |with lines
|w linesp or w lp   |with linespoints
|w p                |with points
|w vec              |with vectors
|===

<<table03, Table 3>> lists three frequently occurring commands that 
are also usually abbreviated.

[[table03]]
.Table 3. Abbreviations for frequently occurring commands
[cols=",",options="header,autowidth",frame=none,grid=rows]
|===
|Abbreviation |Full
|set t        |set terminal
|set o        |set output
|set logsc    |set logscale
|===


[[xxvi]]
The final version of each figure was generated using the pdfcairo terminal, using
a (non-default) aspect ratio of √2 to 1 and Helvetica as the requested font.

.Table 4 Colors and dash patterns used for the color and monochrome figures in this book
[cols=",",options="header,autowidth",frame=none,grid=rows]
|===
|Color                            | Monochrome
|set linetype 1 lc rgb '0xee0000' | set linetype 1 lc black dt solid
|set linetype 2 lc rgb '0x008b00' | set linetype 2 lc black dt (8,6)
|set linetype 3 lc rgb '0x0000cd' | set linetype 3 lc black dt (4,3)
|set linetype 4 lc rgb '0xff3fb3' | set linetype 4 lc black dt (3,6)
|set linetype 5 lc rgb '0x00cdcd' | set linetype 5 lc black dt (12,5,2,5,2,5)
|set linetype 6 lc rgb '0xcd9b1d' | set linetype 6 lc black dt (16,8)
|set linetype 7 lc rgb '0x8968cd' | set linetype 7 lc black dt (20,6,2,6)
|set linetype 8 lc rgb '0x8b8b83' | set linetype 8 lc black dt (30,10)
|===

=== Hardware and software requirements

This book describes gnuplot version 5.0 or higher, which was initially released in early
2015. Not all examples in this book will work with earlier gnuplot versions. If you have
an earlier version of gnuplot, you should upgrade to a more current version—appen-
dix A tells you how.

I assume you have access to a reasonably modern computer running any flavor of
Unix/Linux, a recent release of MS Windows, or Mac OS X . Gnuplot has been ported
to many other platforms but is actively supported primarily on the three operating sys-
tems just mentioned, and so I concentrate on them in this book.

=== Reference materials
Command and option references are distributed throughout the book, wherever the
material is first introduced. The following pointers are intended to help you find
these summaries more easily.

.Graphical styles and specifications
[cols=",,",options="header,autowidth",frame=none,grid=rows]
|===
|Appearance specifiers and line options
                 |<<ch06table01, Table 6.1>> |<<ch06table01, page 104>>
|Graph locations |<<ch07fig02, Figure 7.2>>  |<<ch07fig02, page 128>>
|Graph layers    |<<ch07fig03, Figure 7.3>>  |<<ch07fig03, page 129>>
|Explicit color-specification formats
                 |<<ch09table01, Table 9.1>> |<<ch09table01, page 184>>
|Point types     |<<ch09fig07, Figure 9.7>>  |<<ch09fig07, page 196>>
|Dash patterns   |<<ch09table02, Table 9.2>> |<<ch09table02, page 197>>
|===

[[xxvii]]

[[pref04lev2sec2]]
.File access
[cols=",,",options="header,autowidth",frame=none,grid=rows]
|===
|Column-access methods and functions
    |<<ch04table02, Tablel 4.2>> |<<ch04table02, page 67>>
|Pseudofiles
    |<<ch04table03, Tablel 4.3>> |<<ch04table03, page 71>>
|Metadata in data files
    |<<ch04table04, Tablel 4.4>> |<<ch04table04, page 76>>
|===


[[pref04lev2sec3]]
.String handling and formatting
[cols=",,",options="header,autowidth",frame=none,grid=rows]
|===
|String functions
    |<<ch05table01, Tablel 5.1>>  |<<ch05table01, page 81>>
|General conversion specifiers
    |<<ch08table02, Tablel 8.2>>  |<<ch08table02, page 160>>
|Accuracy specifiers
    |<<ch08table03, Tablel 8.3>>  |<<ch08table03, page 160>>
|Time-series conversions, sorted alphabetically
    |<<ch08table04, Tablel 8.4>>  |<<ch08table04, page 172>>
|Time-series conversions, sorted by topic
    |<<ch08table05, Tablel 8.5>>  |<<ch08table05, page 173>>
|Time functions
    |<<ch08table06, Tablel 8.6>>  |<<ch08table06, page 176>>
|Enhanced text mode
    |<<ch10table01, Tablel 10.1>> |<<ch10table01, page 218>>
|===


[[pref04lev2sec4]]
.Operators and mathematical functions
[cols=",,",options="header,autowidth",frame=none,grid=rows]
|===
|Unary operators
    |<<ch03table01, Tablel 3.1>>  |<<ch03table01, page 35>>
|Binary operators
    |<<ch03table02, Tablel 3.2>>  |<<ch03table02, page 35>>
|Mathematical functions
    |<<app06table01f, Table F.1>> |<<app06table01f, page F11>>
|Complex numbers
    |<<app06table02f, Table F.2>> |<<app06table02f, page F13>>
|===


[[pref04lev2sec5]]
.Programming constructs
[cols=",,",options="header,autowidth",frame=none,grid=rows]
|===
|Inline loops 
    |<<ch05ex03, Listing 5.3>>    |<<ch05ex03, page 92>>
|General loops and conditionals
    |<<ch11table01, Tablel 11.1>> |<<ch11table01, page 238>>
|===

=== About the author

*PHILIPP K. JANERT* was born and raised in Germany. He obtained a Ph.D. in theoretical
physics from the University of Washington in 1997 and has been working in the
tech industry ever since, including four years at Amazon.com, where he initiated and
led several projects to improve Amazon’s order-fulfillment process. He’s the
author of several books on data analysis and applied math, including the best-selling
Data Analysis with Open Source Tools (O’Reilly, 2010). He has contributed to CPAN and
is an occasional committer on the gnuplot project. Visit his company website at
www.principal-value.com.

=== Author Online

Purchase of Gnuplot in Action, Second Edition includes free access to a private 
web forum run by Manning Publications where you can make comments about the book, 
ask technical questions, and receive help from the lead author and from other users. 
To access


[[xxviii]]
the forum and subscribe to it, point your web browser to www.manning.com/books/
gnuplot-in-action-second-edition. This page provides information on how to get on the
forum once you are registered, what kind of help is available, and the rules of conduct
on the forum.

Manning’s commitment to our readers is to provide a venue where a meaningful
dialog between individual readers and between readers and the author can take place.
It is not a commitment to any specific amount of participation on the part of the
author, whose contribution to Author Online remains voluntary (and unpaid). We
suggest you try asking the author some challenging questions lest his interest stray!
The Author Online forum and the archives of previous discussions will be accessible
from the publisher’s website as long as the book is in print.

=== About the cover

The figure on the cover of Gnuplot in Action, Second Edition is captioned “A peer of
France.” The title of Peer in France was held by the highest-ranking members of the
French nobility. It was an extraordinary honor granted only to a few dukes, counts,
and princes of the church. The illustration is taken from a 19th-century edition of Syl-
vain Maréchal’s four-volume compendium of regional dress customs published in
France. Each illustration is finely drawn and colored by hand.

The rich variety of Maréchal’s collection reminds us vividly of how culturally apart
the world’s towns and regions were just 200 years ago. Isolated from each other, people
spoke different dialects and languages. In the streets or in the countryside, it was easy
to identify where they lived and what their trade or station in life was just by their dress.

Dress codes have changed since then, and the diversity by region, so rich at the time,
has faded away. It’s now hard to tell apart the inhabitants of different continents, let
along different towns or regions. Perhaps we have traded cultural diversity for a more
varied personal life—certainly for a more varied and fast-paced technological life.

At a time when it’s hard to tell one computer book from another, Manning celebrates 
the inventiveness and initiative of the computer business with book covers based 
on the rich diversity of regional life of two centuries ago, brought back to life by
Maréchal’s pictures.


[[part1]]
== Part 1 Getting started

Gnuplot is a tool for visualizing data and mathematical functions. The
chapters in this first part will give a first introduction to gnuplot and its most
important features. <<ch01, Chapter 1>> introduces gnuplot and describes the kinds of
problems it’s designed to solve. <<ch02, Chapter 2>> provides a quick tutorial to gnuplot.
By the end of this chapter, you’ll be able to prepare simple plots with gnuplot
and to save and export your work. <<ch03, Chapter 3>> takes a detailed look at the all-
important plot command, which is used to generate most graphs in gnuplot.
You’ll also learn about inline transformations and built-in smoothing methods.

[[P003]][[ch01]]

== Chaper 1 Prelude: understanding data with gnuplot

NOTE: *TO PRINT BOOK READERS* Some material of a more specialized nature
is only available in the e-book version of this book. The e-book also shows
all the graphs in color. To get your free e-book in PDF , ePub, or Kindle 
format, go to www.manning.com/books/gnuplot-in-action-second-edition to
register your print book.

Gnuplot has long been one of the most popular open source programs for plotting
and visualizing data. In this book, I want to show you how to use gnuplot to make
plots and graphs of your data: both quick and easy graphs for your own use and
highly polished graphs for presentations and publications.

But I also want to show you something else: how to solve data-analysis problems
using graphical methods. The art of discovering relationships in data and extract-
ing information from it by visual means is called graphical analysis, and I believe
gnuplot to be an excellent tool for it.

This chapter covers

•  Warmup examples
•  What is graphical analysis?
•  What is gnuplot?

[[P004]]
As a teaser, let’s look at some problems and how you might be able to approach
them using graphical methods. The graphs here and in the rest of the book (with very
few exceptions) have been, of course, generated with gnuplot.


=== 1.1 A busy weekend

To get a feeling for the kinds of problems you may be dealing with and for the kinds
of solutions gnuplot can help you find, let’s look at two examples. Both take place dur-
ing a long, busy weekend.


==== 1.1.1 Planning a marathon

Imagine you’re in charge of organizing the local city marathon. There will be more
than 2,000 starters, traffic closed around the city, plenty of spectators—and a major
Finish Line Festival to celebrate the victors. The big question is: when should the Fin-
ish Line crew be ready to deal with the majority of runners? At what point do you
expect the big influx of the masses?

You have the results from last year’s event. Assuming that the starters haven’t
improved dramatically over the last year (probably a safe assumption), you do a quick
average of the completion times and find that last year’s average was 282 minutes. To
be on the safe side, you calculate the standard deviation as well, which comes out to
about 50 minutes. So you tell your crew to be ready for the big rush starting three and
a half hours (210 minutes) after the start, and you feel reasonably well prepared for
the event.

So it comes as a surprise when on the big day, plenty of runners start showing up at
the finish line after only two hours—a good 90 minutes earlier than the expected onset
of the rush. In terms of event management, the number of runners who show up early
isn’t overwhelming, but it’s a bit strange. The next day you wonder: what went wrong?
Let’s look at the data to see what you can learn about it. So far, all you know are the
mean and the standard deviation.

The mean is convenient: it’s easy to calculate, and it summarizes the entire data set
in a single number. But in forming the mean, you lost a lot of information. To under-
stand the entire data set, you have to look at it. And because you can’t understand data
by looking at more than 2,000 individual finish times, this means you have to plot it.
It will be convenient to group the runners by completion time and to count the
number of participants who finished during each five-minute interval. The resulting
file might start like this:


[source]
----
# Minutes Runners
135      1
140      2
145      4
150      7
155      11
160      13
165      35
170      29
...
----

[[ch01fig01]]
.Figure 1.1. Number of finishers vs. time to complete (in minutes)
image:https://drek4537l1klr.cloudfront.net/janert2/Figures/01fig01.jpg[01fig01]

[[P005]]
Now you plot the number of runners against the completion time (see figure 1.1). It’s
immediately obvious where you went wrong: the data is bimodal, meaning it has two peaks.
There is an early peak at around 180 minutes and a later main peak at 300 minutes.

Actually, this makes sense: a major sporting event such as a city marathon attracts
two very different groups of people: athletes, who train and compete throughout the
year and are in it to win, and a much larger group of amateurs, who come out once a
year for a big event and are mostly there to participate. The problem is that for such
data, the mean and standard deviation are obviously bad representations—so much
so. that at the time when you expected the big rush (200 minutes), there’s a lull at the
finish line!

The take-home message here is that it’s usually not a good idea to rely on summary
statistics (such as the mean) for unknown data sets. You always should investigate what
the data looks like. Once you’ve confirmed the basic shape, you can choose how to
summarize your findings best.

And of course, there is always more to learn. In this example, for instance, you see
that after about 400 minutes, almost everybody has made it, and you can start winding
down the operation. The actual “tail” of the distribution is quite small—surprisingly
so. (I would’ve expected to see a greater number of stragglers, but possibly many run-
ners who are really slow drop out of the race when they realize they’ll place badly.)


USING GNUPLOT
*****
*****
Let’s look at the gnuplot command that was used to generate figure 1.1. Gnuplot is
command-line oriented: after you start gnuplot, it drops you into an interactive com-
mand session, and all commands are typed at the interactive gnuplot prompt.


[[P006]]
Gnuplot reads data from simple text files, with the data arranged in columns as
shown previously. To plot a data file takes only a single command, plot , like this:
<<ch01fn01, ^[1]^>>

^[#ch01fn01]#1#^ Depending on your gnuplot setup and initialization, your graphs may look 
slightly different from the figures shown in this chapter. We’ll discuss 
user-defined appearance options starting with chapter 6.

[source]
----
plot "marathon" using 1:2 with boxes
----

The plot command requires the name of the data file as argument in quotes. By
default, gnuplot looks for the data file in the current working directory—normally the
directory from which you started gnuplot. The filename provided to the plot com-
mand may contain path information to refer to a file that doesn’t reside in the current
directory.

The rest of the command line specifies which columns to use for the plot and in
which way to represent the data. The using 1:2 declaration tells gnuplot to use the
first and second columns in the file called marathon. The final part of the command,
with boxes , selects a box style, which is often suitable to display counts of events.
Gnuplot handles most everything else by itself: it sizes the graph and selects the
most interesting plot range, it draws the border, and it draws the tic marks and their
labels. All these details can be customized, but gnuplot typically does a good job at
anticipating what the user wants.

NOTE The little markers along the edge that define the scale of the corre-
sponding axis are called tick marks (or tic marks). The gnuplot standard refer-
ence documentation uses the spelling tic mark; the relevant commands are
called set xtics , set ytics , and so on. In order to avoid confusion, I use the
same spelling (tic) throughout this book.


==== 1.1.2 Determining the future

The same weekend when 2,000 runners are running through the city, a diligent grad-
uate student is working on his research topic. He studies diffusion limited aggregation
( DLA ), a process wherein a particle performs a random walk until it comes into con-
tact with a growing cluster of particles. At the moment of contact, the particle sticks to
the cluster at the location where the contact occurred and becomes part of the cluster.
Then a new random walker is released to perform a random walk, until it sticks to the
cluster. And so on. Clusters grown through this process have a remarkably open, tenu-
ous structure (as shown in figure 1.2): they’re fractals. <<ch01fn02, ^[2]^>>

^[#ch01fn02]#2#^The original paper on DLA was “Diffusion Limited
Aggregation, A Kinetic Critical Phenomenon” by T. A. Witten and L. M.
Sander, _Physical Review Letters_ 41 (1981): 1400. It’s one of the
most-quoted papers from that journal of all time. If you want to learn
more about DLA and similar processes, check out _Fractals, Scaling, and
Growth Far From Equilibrium_ by Paul Meakin (Cambridge University Press,
1998).

[[ch01fig02]]
.Figure 1.2. A DLA cluster of __N__=50,000 particles, drawn with gnuplot
image:https://drek4537l1klr.cloudfront.net/janert2/Figures/01fig02.jpg[01fig02]

The DLA process is simple, so it seems straightforward to write a program to grow
such clusters in a computer, and this is what the busy graduate student has done. Ini-
tially, all seems well; but as the simulation progresses, the cluster appears to grow
more and more slowly—excruciatingly slowly, in fact. The goal was to grow a DLA clus-
ter in excess of 100,000 particles. Will the program ever finish?

[[P007]]
Luckily, the simulation program periodically writes information about its progress to a
log file: for each new particle added to the cluster, the time (in seconds) since the
start of the simulation is recorded. The grad student should be able to predict the
completion time from this data, but an initial plot (figure 1.3) isn’t helpful; there are
too many ways this curve can be extrapolated to larger cluster sizes.


[[ch01fig03]]
.Figure 1.3. Time required to grow a DLA cluster
image:https://drek4537l1klr.cloudfront.net/janert2/Figures/01fig03_alt.jpg[01fig03_alt]


[[P008]]
The time consumed by many computer algorithms grows as a simple power of the
size of the problem. In this case, this would be the number N of particles in the clus-
ter T ~ N k , for some value of k. The research student therefore plots the running
time of his simulation program on a double-logarithmic plot versus the cluster size
(see figure 1.4). The data points fall on a straight line, indicating a power law. (I’ll
explain later how and why this works.) Through a little trial and error, he also finds
an equation that approximates the data quite well. The equation can be extended to
any cluster size desired and will give the time required. For N=100,000 (which was the
original goal), he can read off almost T=100,000 seconds (or more), corresponding
to more than 24 hours, so there is no point in your friend spending the weekend in
the lab—he should go out (maybe run a marathon) and come back on Monday, or
perhaps work on a better algorithm. (For simulations of DLA cluster growth, dramatic
speedups over the naive implementation are possible. Try it if you like.)

[[ch01fig04]]
.Figure 1.4. Time required to grow a DLA cluster in a double-logarithmic plot, 
together with an approximate mathematical model
image:https://drek4537l1klr.cloudfront.net/janert2/Figures/01fig04_alt.jpg[01fig04_alt]


USING GNUPLOT
*****
*****
Again, let’s see how the graphs in this section were created. The easiest to understand
is figure 1.3. Given a file containing two columns, one listing the cluster size and the
other listing the completion time, the command is just

[source]
plot "runtime" using 1:2 with lines

[[P009]]
The only difference compared to figure 1.1 is the style: rather than boxes, I use line
segments to connect consecutive data points: with lines .

Did you notice that figure 1.3 and figure 1.4 contain more than just data? Both
axes are now labelled! Details such as labels and other helpful decorations often make
the difference between a mediocre and a high-quality graph, because they provide the
observer with the necessary context to fully understand the graph.

In gnuplot, all details of a graph’s appearance are handled by setting the appropri-
ate options. To place the labels on the x and y axes in figure 1.3, I used

[source]
set xlabel "Cluster size"
set ylabel "Run time [sec]"

Figure 1.4 is drawn using double-logarithmic axes. This is another option, which is set
as follows:

[source]
set logscale

Figure 1.4 shows two curves: the data together with a best “fit.” Plotting several data
sets or mathematical functions together in one plot is easy—you list them one after
another on the command line for the plot command:

[source]
plot "runtime" using 1:2 title "Data" with lines,
➥ (x/2500)**3 title "Model"

This command introduces a further gnuplot feature: the title directive. It takes a
string as argument, which is displayed together with a line sample in the plot’s key or
legend (visible at upper left in figure 1.4).

Finally, we come to figure 1.2. It’s a somewhat different beast. Notice that the bor-
der and the tic marks are missing. The aspect ratio (the ratio of the graph’s width to
its height) has been constrained to 1, and a single dot has been placed at the position
of each particle in the cluster. Here are the most important commands that I used:

[source]
----
unset border
unset xtics
unset ytics

set size square

plot "cluster" using 1:2 with dots
----

You can see that gnuplot is simple to use. In the next section, I talk more about using
graphical methods to understand a data set, before coming back to gnuplot and dis-
cussing why it’s my favorite tool for this kind of activity.


=== 1.2 What is graphical analysis?

The previous two examples should have given you an idea of what graphical analysis is
and how it works. The basic steps are always the same:

[[P010]]
*1*.  Plot the data.

*2*.  Inspect it, trying to find some recognizable behavior.

*3*.  Compare the actual data to data that represents the hypothesis
from the previous step (as in the second example earlier, when our grad
student plotted the running time of the simulation program together with
a power-law function).

*4*.  Repeat.

You may try more sophisticated things, but this is the basic idea. If the hypothesis in
the second step seems reasonably justified, you can try to remove its effect—for
instance, by subtracting a formula from the data—to see whether there is any recog-
nizable pattern in the residual. And so on.

Iteration is a crucial aspect of graphical analysis: plotting the data this way and that
way; comparing it to mathematical functions or to other data sets; zooming in on
interesting regions or zooming out to detect the overall trend; applying logarithms or
other data transformations to change its shape; using a smoothing algorithm to tame
a noisy data set; and so on. During an intense analysis session using a new but promis-
ing data set, it’s not uncommon to produce literally dozens of graphs.

None of these graphs will be around for long. They’re transient, persisting just
long enough for you to form a new hypothesis, which you’ll try to justify in the next
graph you draw. This also means these graphs aren’t polished in any way, because
they’re the graphical equivalent of scratch paper: notes of work in progress, not
intended for anyone but ourselves.

This isn’t to say that polishing doesn’t have its place. But it comes later in the pro-
cess: once you know the results of your analysis, you need to communicate them to
others. At this point, you’ll create permanent graphs, which will be around for a long
time—maybe until the next departmental presentation, or (if the graph will be part of
a scientific publication, for instance) possibly forever!

Such permanent graphs have different requirements: other people must be able
to understand them, possibly years later, and most likely without you there to explain
them. Therefore, graph elements such as labels, captions, and other contextual
information become very important. Presentation graphs must be able to stand by
themselves.

Presentation graphs also should make their point clearly. Now that you know the
results of your analysis, you should find the clearest and most easily understood way
of presenting your findings. A presentation graph should make one point and make
it well.

Finally, some would argue that a presentation graph should look good. Maybe. If it
makes its point well, there is no reason it shouldn’t be visually pleasing, too. But that’s
an afterthought. Even a presentation graph is about the content, not the packaging.

[[P011]]

==== 1.2.1 Why graphical analysis?

Graphical analysis is a discovery tool. You can use it to reveal as-yet-unknown informa-
tion in data. In comparison to statistical methods, it helps you discover new and possi-
bly unexpected behavior.

Moreover, it helps you develop an intuitive understanding of the data and the
information it contains. Because it doesn’t require particular math skills, it’s accessible
to anyone with an interest and a certain amount of intuition.

Even if rigorous model building is your ultimate goal, graphical methods still need
to be the first step so that you can develop a sense for the data, its behavior, and its
quality. Knowing this, you can then select the most appropriate formal methods.

==== 1.2.2 Limitations of graphical analysis

Of course, graphical analysis has limitations and its own share of problems:

•  Graphical analysis doesn’t scale. It’s a manual process that can’t easily be auto-
mated. Each data set is treated as a separate special case, which isn’t feasible if
there are thousands of data sets.

But this problem is sometimes more apparent than real. It can be remarkably
effective to generate a large number of graphs and browse them without study-
ing each one in great depth. It’s totally possible to scan a few hundred graphs
visually, and doing so may already lead to a high-level hypothesis regarding the
classification of the graphs into a few subgroups, which can then be investigated
in detail. (Thank goodness gnuplot is scriptable, so preparing a few hundred
graphs poses no problem.)

•  Graphical analysis yields qualitative—not quantitative—results. Whether you regard
this as a strength or a weakness depends on your situation. If you’re looking for
new behavior, graphical analysis is your friend. But if you’re trying to determine
the percentage by which a new fertilizer treatment increases crop production,
quantitative methods are the way to go.

•  It takes skill and experience. Graphical analysis is a creative process, using induc-
tive logic to move from observations to hypothesis. There is no prescribed set of
steps to move from a data set to conclusions about the underlying phenomena,
and not much can be taught in a conventional classroom format.

But by the same token, it doesn’t require formal training, either. Ingenuity,
intuition, and curiosity are the most important character traits. Everyone can
play this game, if they’re interested in finding out what the data tries to tell
them.


=== 1.3 What is gnuplot?

Gnuplot is a program for exploring data graphically. Its purpose is to generate plots
and graphs from data or functions. It can produce highly polished graphs, suitable for
publication, or simple throw-away graphs when you’re merely playing with an idea.

[[P012]]
Gnuplot is command-line–driven: you issue commands at a prompt, and gnuplot
redraws the current plot in response. Gnuplot is also interactive: the output is gener-
ated and displayed immediately in an output window. Although gnuplot can be used
as a background process in batch mode, typical use is highly interactive. On the other
hand, its primary user interaction is through a command language, not through a
point-and-click GUI interface.

Don’t let the notion of a command language throw you: gnuplot is easy to use—
really easy to use! It takes only one line to read and plot a data file, and most of the
command syntax is straightforward and intuitive. Gnuplot doesn’t require program-
ming or any deeper understanding of its command syntax to get started.

This is the fundamental workflow of all work with gnuplot: plot, examine, repeat—
until you have found out whatever you wanted to learn from the data. Gnuplot per-
fectly supports the iterative process model required for exploratory work.

==== 1.3.1 Gnuplot isn’t GNU

To dispel one common point of confusion right away, gnuplot isn’t GNU software, has
nothing to do with the GNU project, and isn’t released under the GNU Public License
( GPL ). Gnuplot is released under a permissive open source license.

Gnuplot has been around a long time—a very long time! It was started by Thomas
Williams and Colin Kelley in 1986. On the gnuplot FAQ , Thomas has this to say about
how gnuplot was started and why it’s named the way it is:

I was taking a differential equation class and Colin was taking Electromagnet-
    ics, we both thought it’d be helpful to visualize the mathematics behind
    them. We were both working as sys admin for an EE VLSI lab, so we had the
    graphics terminals and the time to do some coding. The posting was better
    received than we expected, and prompted us to add some, albeit lame, sup-
    port for file data. Any reference to GNU plot is incorrect. The real name of
    the program is “gnuplot.” You see people use “Gnuplot” quite a bit because
    many of us have an aversion to starting a sentence with a lower case letter,
    even in the case of proper nouns and titles. gnuplot isn’t related to the GNU
    project or the FSF in any but the most peripheral sense. Our software was
    designed completely independently and the name “gnuplot” was actually a
    compromise. I wanted to call it “llamaplot” and Colin wanted to call it
    “nplot.” We agreed that “newplot” was acceptable but, we then discovered
    that there was an absolutely ghastly pascal program of that name that the
    Computer Science Dept. occasionally used. I decided that “gnuplot” would
    make a nice pun and after a fashion Colin agreed.


==== 1.3.2 Why gnuplot?

I have already indicated why I like gnuplot, but three primary reasons stand out to me:

•  Gnuplot lends itself to ad hoc, iterative work with a minimum of effort or over-
head. Plotting a data file involves only a single command, without the need (for
example) to load the file into an internal data structure first. Common tasks
can be accomplished simply. The absence of most programming features helps
to keep the workflow focused on creating and analyzing graphs and figures.

[[P013]]
•  Gnuplot is mature and robust. Edge cases are generally detected and handled
properly. Gnuplot isn’t picky about input formats and is tolerant of messy or
poorly formatted data sets.

•  Gnuplot makes it easy to produce polished, high-quality figures, using good col-
ors, fonts, and symbols. The default appearance of most graph elements is gen-
erally well-chosen or can be customized easily. Manipulating low-level graph
elements, although possible, is rarely necessary.

In addition, gnuplot is scriptable and can handle large data sets. Its reliance on plain
text files for data sets makes it easy to use gnuplot in combination with other tools or
programs. Finally, gnuplot is free and open source, actively supported, and available
for all major platforms (Linux, Windows, and Mac OS X ).


==== 1.3.3 Limitations

It’s important to remember that gnuplot is a data-plotting tool, nothing more, noth-
ing less. In particular, it’s neither a numeric nor a symbolic workbench, nor a statistics
package. It can therefore only perform simple calculations on the data. On the other
hand, it has a flat learning curve, requiring no programming knowledge and only the
most basic math skills.

Gnuplot is also not a drawing tool. All of its graphs are depictions of some data set
or mathematical function. It has only very limited support for arbitrary box-and-line
diagrams, and none at all for freehand graphics.

Finally, gnuplot isn’t a tool to create dashboards, infographics, or virtual-reality
visualizations. It’s a tool for quantitative analysis, and therefore its bread and butter
are dot and line plots. It has only rudimentary support for three-dimensional solid-
body imaging and none whatsoever for ray-tracing, fisheye functionality, and similar
techniques.

Overall, I regard these limitations more as strengths in disguise: in the Unix tradi-
tion, gnuplot is a simple tool, doing (mostly) one thing, and doing it very, very well.

==== 1.3.4 Gnuplot 5: the best gnuplot there ever was!

On New Year’s Day, 2015, the gnuplot development team released gnuplot 5.0—the
first major new release in over 10 years! It goes without saying that gnuplot 5 is the
best, most modern, and most complete gnuplot there ever was.

Most of the new features and changes to previous versions are relatively small and
incremental, but in aggregate their effect is pronounced. A few major themes stand
out that make gnuplot 5 distinct from the previous major release:

•  Color—The greatest change that I perceive is the universal use of color through-
out. Gnuplot assumes that you’re working on a color terminal and are produc-
ing graphs for a color device. Producing black-and-white graphs is now the
exception case.


[[P014]]
If you’re familiar with previous gnuplot versions, the most visible change is
probably gnuplot’s new default color sequence, which replaces the familiar
red/green/blue sequence of colors. (Hint: you can restore the previous behav-
ior through the command set colorsequence classic . More on that topic in
chapter 9.)

Support for color has been enhanced in various ways. Most styles and facili-
ties support partial transparency (alpha shading). You can generally choose
the color of a plot element based on the numerical value of the data (data-
dependent coloring).

•  Terminals—Handling of terminals and output file formats has been greatly
improved and unified. A major breakthrough is the development of a family of
terminals that are all based on a single set of contemporary libraries for graph-
ics and text rendering. Because these terminals all share the same back end,
you can now create bitmaps ( PNG ), vector images ( PDF ), and graphs for inter-
active viewing (wxWidgets) with consistent appearance across all formats.

Gnuplot takes advantage of the contemporary features of the underlying librar-
ies to produce high-quality graphs through the use of over-sampling, anti-alias-
ing, and so on.

•  Fonts—Another huge improvement compared to previous gnuplot versions is
the unified font handling. Current terminals all rely on the same system libraries
for font handling, which means generally all locally available fonts can be used
for text labels in gnuplot graphs with a minimum of fuss. By default, enhanced
text mode, which allows the inclusion of sub- and superscripts, is now enabled in
all current terminals. Enhanced text mode has also been extended to include
support for characters in boldface and italics.

In the past, gnuplot’s support for PDF was relatively weak, particularly in
comparison to the very full-featured PostScript terminal. This situation has now
been reversed, and the Cairo-based PDF terminal is probably to be preferred
over the classic PostScript terminal.

•  Styles for points and lines—You have a greater deal of control over the appearance
of points and lines than ever before. In addition to line color, line width, point
size, and point shape, you can now control and customize the dash pattern of
lines. The syntax has been unified, and the appearance of points and lines can
be customized locally wherever lines and points are used. Moreover, there is
now a universal set of (at least) eight standard point and line styles, which are
consistent across all contemporary terminals.

•  Unicode—Strings and string expressions in gnuplot support Unicode. This is a
big deal, because it makes the entire universe of Unicode characters and sym-
bols seamlessly available within gnuplot. Greek letters, mathematical symbols,
and dingbats are now as easy to use as ASCII characters. (You still need a font
that provides glyphs for all these characters, but several freely available fonts
exist that provide extensive coverage of Unicode characters.)

[[P015]]
•  Loops and programming constructs—Gnuplot has acquired support for some pro-
gramming constructs, most notably for loops. This promises to simplify certain
repetitive tasks significantly; but because gnuplot doesn’t (yet) include an iter-
able data type (that is, an array type), the use of loops often leads to somewhat
haphazard constructs and ad hoc data manipulations. ^1^

In addition, there of course are many smaller improvements and enhancements, such
as an improved multiplot mode, more consistent commands to control tic marks on
coordinate axes, additional plotting styles, and more.


=== 1.4 Summary

In this chapter, I showed you a couple of examples that demonstrate the power of
graphical methods for understanding data. I also suggested a suitable method for
dealing with data-analysis problems. Start with a plot of the data, and use it to identify
the essential features of the data set. Then iterate the process to bring out the behav-
ior you’re most interested in. And finally (not always, but often), develop a mathemat-
ical description for the data, which can then be used to make predictions (which, by
their nature, go beyond the information contained in the actual data set).

Your tool in doing this kind of analysis will be gnuplot. And it’s gnuplot, and how
to use it, that we’ll turn to next. Once you’ve developed the skills to use gnuplot well,
we’ll return to graphical analysis and discuss useful techniques for extracting the most
information possible from a data set, using graphs.

^1^
This may be changing. Merely days before this book went to the printer, Ethan Merritt published an experi-
mental patch that adds an array-type to gnuplot. Check it out: http://sourceforge.net/p/gnuplot/
patches/724/.


[[P016]][[ch02]]

== Chaper 2 Tutorial: essential gnuplot

This chapter introduces gnuplot’s most important features: generating plots, saving
them to a file, and exporting graphs to common graphics file formats. I’ll also
explain briefly how to set options and how to access gnuplot’s built-in documenta-
tion. This chapter covers those commands that you’ll find yourself using almost
every time you start up gnuplot. In the next couple of chapters, you’ll learn about
further features for graphical analysis and how to manage data sets and files. By the
end of chapter 4, you’ll know most of the commands you’ll use on a day-to-day basis.
Are you surprised that just a few chapters are sufficient to get you this far? Con-
gratulations! You just discovered why gnuplot is cool: it makes easy things easy, and
hard things possible. This chapter and the next two cover the easy parts. As to the
hard parts … well, that’s what the rest of this book is about.

This chapter covers

•  Invoking gnuplot
•  Plotting functions and data
•  Saving and exporting
•  Managing options
•  Getting help

[[P017]]

=== 2.1 Simple plots

Because gnuplot is a plotting program, it should come as no surprise that the most
important gnuplot command is plot . It can be used to plot both functions (such as
sin(x)) and data (typically from a file). The plot command has a variety of options
and subcommands, through which you can control the appearance of the graph as
well as the interpretation of the data in the file. The plot command can even perform
arbitrary transformations on the data as you plot it.


==== 2.1.1 Invoking gnuplot and first plots

Gnuplot is a text-based plotting program: you interact with it through command-line-
like syntax, as opposed to manipulating graphs using the mouse in a WYSIWYG fash-
ion. ^2^ Gnuplot is also interactive: it provides a prompt at which you type commands.
When you enter a complete command, the resulting graph immediately pops up in a
separate window. This is in contrast to a graphics programming language (such as PIC ),
where writing the command, generating the graph, and viewing the result are sepa-
rate activities, requiring separate tools. Gnuplot has a history feature, making it easy to
recall, modify, and reissue previous commands. The entire setup encourages you to
play with the data: making a simple plot, changing some parameters to hone in on the
interesting sections, eventually adding decorations and labels for final presentation,
and in the end exporting the finished graph in a standard graphics format.

If gnuplot is installed on your system, it can usually be invoked by issuing the
command

[source]
shell> gnuplot

at the shell prompt. (Check appendix A for instructions on obtaining and installing
gnuplot, if your system doesn’t have it already.) Once launched, gnuplot displays a
welcome message and then replaces the shell prompt with a gnuplot> prompt. Any-
thing entered at this prompt is interpreted as gnuplot commands until you issue an
exit or quit command, or type an end-of-file ( EOF ) character, usually by pressing
Ctrl-D on Unix.

Probably the simplest plotting command you can issue is

[source]
plot sin(x)

(Here and in the following, the gnuplot> prompt is suppressed to save space. Any
code shown should be understood as having been entered at the gnuplot> prompt,
unless otherwise stated.)

On Unix running a GUI (an arbitrary window manager running on top of X11 ), this
command opens a new window showing the resulting graph, something like figure 2.1.
Note how gnuplot has selected a “reasonable” range for the x values automatically (by
default, from -10 to +10) and adjusted the y range according to the values of the function.

[[ch02fig01]]
.Figure 2.1. Your first plot: *`plot sin(x)`*
image:https://drek4537l1klr.cloudfront.net/janert2/Figures/02fig01_alt.jpg[02fig01_alt]

^2^
The Windows version of gnuplot contains a menu you can use to build up command strings using the mouse.

[[P018]]
Let’s say you want to add more functions to plot together with the sine. You recall the
last command (using the up-arrow key or Ctrl-P for “previous”) and edit it to give

[source]
plot sin(x), x, x-(x**3)/6

This will plot the sine together with the linear function x and the third-order polynomial
x - ⅙ x 3 , which are the first few terms in the Taylor expansion of the sine. ^3^
(Gnuplot’s syntax for mathematical expressions is straightforward and similar to that found
in almost any other programming language. Note the ** exponentiation operator,
familiar from Fortran or Perl. Section 3.2 contains tables of all available operators
and their precedences.) The resulting plot (see figure 2.2) is probably not what you
expected.

The range of y values is far too large, compared to the previous graph. You can’t
even see the wiggles of the original function (the sine wave) anymore. Gnuplot adjusts
the y range to fit in all function values, but for this plot, you’re only interested in
points with small y values. So, you recall the last command again (using the up-arrow
key) and define the plot range you’re interested in:

[source]
plot [][-2:2] sin(x), x, x-(x**3)/6

^3^
A Taylor expansion is a local approximation of an arbitrary, possibly complicated, function in terms of powers
of x. You won’t need this concept in the rest of this book. Check your favorite calculus book if you want to
know more.

[[P019]]
The range is given in square brackets immediately after the plot command. The first
pair of brackets defines the range of x values (leave it empty, because you’re happy
with the defaults in this case); the second restricts the range of y values shown. This
results in the graph shown in figure 2.3.

[[ch02fig02]]
.Figure 2.2. An unsuitable default plot range: *`plot sin(x), x, x-(x**3)/6`*
image:https://drek4537l1klr.cloudfront.net/janert2/Figures/02fig02_alt.jpg[02fig02_alt]

[[ch02fig03]]
.Figure 2.3. Using explicit plot ranges: `plot [][-2:2] sin(x), x, x-(x**3)/6`
image:https://drek4537l1klr.cloudfront.net/janert2/Figures/02fig03_alt.jpg[02fig03_alt]

[[P020]]
You can play much longer with function plots, zoning in on different regions of inter-
est and trying different functions (section F.4 contains a table of all built-in mathemat-
ical functions). But let’s move on and discuss what gnuplot is most useful for: plotting
data from a file.


==== 2.1.2 Plotting data from a file

Gnuplot reads data from text files. The data is expected to be numerical and to be
stored in the file in whitespace-separated columns. Lines beginning with a hash mark ( # )
are considered to be comment lines and are ignored. The following listing shows a typ-
ical data file containing the share prices of two fictitious companies, with the equally
fictitious ticker symbols PQR and XYZ , over a number of years.


[[ch02ex01]]
.Listing 2.1. A typical data file: stock prices over time (file: prices)
[source]
----
# Average PQR and XYZ stock price (in dollars per share) per calendar year
1975     49    162
1976     52    144
1977     67    140
1978     53    122
1979     67    125
1980     46    117
1981     60    116
1982     50    113
1983     66     96
1984     70    101
1985     91     93
1986    133     92
1987    127     95
1988    136     79
1989    154     78
1990    127     85
1991    147     71
1992    146     54
1993    133     51
1994    144     49
1995    158     43
----


The canonical way to think about this is that the x value is in column 1 and the y value
is in column 2. If there are additional y values corresponding to each x value, they’re
listed in subsequent columns. (You’ll see later that there’s nothing special about the
first column. In fact, any column can be plotted along either the x or the y axis.)

This format, simple as it is, has proven to be extremely useful—so much so that
long-time gnuplot users usually generate data this way to begin with. In particular, the
ability to keep related data sets in the same file is a big help (so you don’t need to
keep PQR ’s stock price in a separate file from XYZ ’s—although you could if you
wanted to).

Although whitespace-separated numerical data is what gnuplot expects natively,
gnuplot can parse and interpret significant deviations from this norm, including text
Listing 2.1 A typical data file: stock prices over time (file: prices)
columns (with embedded whitespace if enclosed in double quotes), missing data, and
a variety of textual representations for calendar dates, as well as binary data. (See
chapter 4 for a more detailed discussion of input file formats, chapter 5 for strings,
and chapter 8 for the special case when one of the columns represents date/time
information.)

[[P021]]
Plotting data from a file is simple. Assuming that the file shown in listing 2.1 is
called prices and is in the current working directory (typically, the directory from
which gnuplot was started), you can type

[source]
plot "prices"

Because data files typically contain many different data sets, you’ll usually want to select
the columns to be used as x and y values. This is done through the using directive to the
plot command:

[source]
plot "prices" using 1:2

This plots the price of PQR shares as a function of time: the first argument to the
using directive specifies the column in the input file to be plotted along the horizon-
tal (x) axis, and the second argument specifies the column for the vertical (y) axis. If
you want to plot the price of XYZ shares in the same plot, you can do so easily (as
shown in figure 2.4):

[source]
plot "prices" using 1:2, "prices" using 1:3

[[ch02fig04]]
.Figure 2.4. Plotting from a file: `plot "prices" using 1:2, "prices" using 1:3`
image:https://drek4537l1klr.cloudfront.net/janert2/Figures/02fig04_alt.jpg[02fig04_alt]

[[P022]]

TIP: The using directive tells the plot command which columns to use. plot
"data" using 1:2 selects the first column for the x axis and the second col-
umn for the y axis.

By default, data points from a file are plotted using unconnected symbols. Often this
isn’t what you want, so you need to tell gnuplot what style to use for the data. You do so
using the with directive. Many different styles are available. Among the most useful
are with linespoints , which plots each data point as a symbol and also connects sub-
sequent points, and with lines , which just plots the connecting lines, omitting the
individual symbols:

[source]
plot "prices" using 1:2 with lines,
➥ "prices" using 1:3 with linespoints

TIP: The with directive to the plot command selects the plotting style. The
most frequently used styles include with points , with lines , and with
linespoints .

This looks good, but it’s not clear from the graph which line is which. Gnuplot auto-
matically provides a key, which shows a sample of the line or symbol type used for each
data set together with a text description, but the default description isn’t very mean-
ingful in this case. You can do much better by including a title for each data set as
part of the plot command:

[source]
plot "prices" using 1:2 title "PQR" with lines,
➥ "prices" using 1:3 title "XYZ" with linespoints

This changes the text in the key to the string given as the title (see figure 2.5). The
title has to come after the using directive in the plot command. A good way to
memorize this order is to remember that you must specify the data set to plot first and
provide the description second: define it first, then describe what you defined.

TIP: You can use the title directive to place a descriptive string in the
graph’s legend.

Want to see how PQR ’s price correlates with XYZ ’s? No problem; plot one against the
other, using PQR ’s share price for x values and XYZ ’s for y values, like so:

[source]
plot "prices" using 2:3 with points

You see here that there’s nothing special about the first column. Any column can be
plotted against either the x or the y axis; you pick whichever combination you need
through the using directive. Because it makes no sense to connect the data points in
the last plot, I chose the style with points , which plots a symbol for each data point
but no connecting lines (see figure 2.6).

A graph like figure 2.6 is known as a scatter plot and can show correlations between
two data sets. In this graph, you can see a clear negative correlation: as the stock price
of PQR is going up, the price of XYZ is going down. We’ll revisit scatter plots and their
uses in chapter 13.


[[P023]]

[[ch02fig05]]
.Figure 2.5. Introducing styles and the `title` keyword: `plot "prices" using 1:2 title "PQR" with lines, "prices" using 1:3 title "XYZ" with linespoints`
image:https://drek4537l1klr.cloudfront.net/janert2/Figures/02fig05_alt.jpg[02fig05_alt]


[[ch02fig06]]
.Figure 2.6. Any column can be used for either the x or y axis: `plot "prices" using 2:3 with points`.
image:https://drek4537l1klr.cloudfront.net/janert2/Figures/02fig06_alt.jpg[02fig06_alt]



[[P024]]
Now that you’ve seen the most important basic commands, let’s step back for a
moment and quickly introduce some creature comforts that gnuplot provides to the
more experienced user.


==== 2.1.3 Abbreviations and defaults

Gnuplot is good at encouraging iterative, exploratory data analysis. Whenever you
complete a command, the resulting graph is shown immediately, and all changes take
effect at once. Writing commands isn’t a different activity from generating graphs,
and there’s no need for a separate viewer program. (Graphs are also created almost
instantaneously; only for data sets including millions of points is there any noticeable
delay.) Previous commands can be recalled, modified, and reissued, making it easy to
keep playing with the data.

Gnuplot offers two more features to the more proficient user: abbreviations and sen-
sible defaults. Any command and subcommand or option can be abbreviated to the
shortest, non-ambiguous form. So the command

[source]
plot "prices" using 1:2 with lines,
➥ "prices" using 1:3 with linespoints

is more likely to be issued as

[source]
plot "prices" u 1:2 w l, "prices" u 1:3 w linesp

You can shorten the linespoints style description even further to lp , so the com-
mand becomes

[source]
plot "prices" u 1:2 w l, "prices" u 1:3 w lp

This compact style is useful when you’re doing interactive work, and you should mas-
ter it. From here on, I’ll increasingly use it. (You can find a table with the most fre-
quently used abbreviations at the beginning of this book in the “About this book”
section.)

But this is still not the most compact form possible. Whenever part of a command
isn’t given explicitly, gnuplot first tries to interpolate the missing values with values the
user has provided; failing that, it falls back to sensible defaults. You’ve already seen
how gnuplot defaults the range of x values to [-10:10] but adjusts the y range to
include all data points.

TIP: Abbreviations for common keywords facilitate quick, interactive, itera-
tive work. You can find a table of common abbreviations in the “About this
book” section at the start of the book.

Whenever a filename is missing, the most recent filename is interpolated. You can use
this to abbreviate the previous command even further:

[source]
plot "prices" u 1:2 w l, "" u 1:3 w lp

[[P025]]
Note that the second set of quotation marks must be there.

In general, any user input (or part of user input) remains unaffected until explic-
itly overridden by subsequent input. The way the filename is interpolated in the pre-
ceding example is a good example of this behavior. In later chapters, you’ll see how
options can be built up step by step, by subsequently providing values for different
suboptions. Gnuplot helps to keep commands short by remembering previous com-
mands as much as possible.

One last example concerns the using directive. If it’s missing entirely and the data
file contains multiple columns, gnuplot plots the second column versus the first (this
is equivalent to using 1:2 ). If a using directive is given but lists only a single column,
gnuplot uses this column for y values and provides x values as integers starting at zero.
This is also what happens when no using is given and the data file contains only a sin-
gle column.


=== 2.2 Saving commands and exporting graphics

There are two ways to save your work in gnuplot: you can save the gnuplot commands
used to generate a plot, so that you can regenerate the plot at a later time. Or you can
export the graph to a file in a standard graphics file format, so that you can print it or
include it in web pages, documents, or presentations.

TIP: Saving a graph is the act of storing the gnuplot commands used to create
the graph. Exporting a graph means creating a version of the graph in a com-
monly used graphics file format (such as PNG , PDF , or SVG ).


==== 2.2.1 Saving and loading commands

If you save to a file the commands you used to generate a plot, you can later load them
again and regenerate the plot where you left off. Gnuplot commands can be saved to
a file using the save command:

[source]
save "graph.gp"

This saves the current values of all options, as well as the most recent plot command,
to the specified file. This file can later be loaded again using the load command:

[source]
load "graph.gp"

The effect of loading a file is the same as issuing all the contained commands (includ-
ing the plot command) at the gnuplot prompt.

TIP: Never forget to save your commands using save so that you can re-create
your graph later using load .

An alternative to load is the call command, which is similar to load but takes up to
nine additional parameters after the filename to load. The parameters are available in
the loaded file in the variables ARG1 through ARG9 . The special variable ARG0 is set to
the filename, and the variable ARGC holds the number of parameters supplied to
call . ^4^ You can use call to write simple scripts for gnuplot.

[[P026]]

Command files are plain text files, usually containing exactly one command per
line. Several commands can be combined on a single line by separating them with a
semicolon ( ; )—this also works at the interactive command line. The hash mark ( # ) is
interpreted as a comment character: the rest of the line following a hash mark is
ignored. The hash mark isn’t interpreted as a comment character when it appears
inside quoted strings.

The recommended file extension for gnuplot command files is .gp, but you may
also find people using .plt instead. Because command files are plain text files, they can
be edited using a regular text editor. It’s sometimes useful to author them manually
and load them into gnuplot (see section 12.2 for further discussion of that point), and
they’re also used for batch operations (chapter 11) and configurations (chapter 12).

==== 2.2.2 Exporting graphs

The save command I just introduced saves the commands required to generate (or
regenerate) the graph into a text file, but it doesn’t save the graph itself. How do you
get the graph that you see in the plot window into a file? It turns out there are three
ways to do it: easy, roundabout, and complicated.


USING THE GUI BUTTON
*****
*****
In recent gnuplot versions, most contemporary terminals (including the wxt and qt
terminals) include a GUI button you can use to export a graph to a file. The button
opens a standard file-selection dialog where you select the desired name of the target
file and the file format ( PNG , PDF , or SVG ). Easy.


USING THE CLIPBOARD
*****
*****
A roundabout way to save the graph to a file is to take a screenshot of the graph, using
your favorite screenshot utility, and save the result as a GIF or PNG file. After all, the
graphics window on the screen is nothing more than a bitmap image, and a screen-
shot saves it to a file.

Gnuplot facilitates this process by offering a GUI button that copies the current
content of the plot window to the window manager’s clipboard, from which the graph
can be pasted into a paint program (such as the Gimp or Microsoft Paint) or saved
directly to a file. Only the canvas is copied, without the tool and title bars, and without
any of the decorations put on the window by the window manager. Don’t be disturbed
if nothing appears to be happening if you click the GUI button: there is no visual feed-
back, but the window’s content is copied to the clipboard, from which it can be pasted
into other applications. (The details of how to do that depend on your choice of win-
dow manager and the way the clipboard is configured on your local computer.) This
method may appear a bit unsophisticated, but it has two significant advantages: the
workflow is simple, and the resulting graph corresponds exactly to the graph that was
on the screen.

^4^
Earlier versions of gnuplot used the special tokens $0 through $9 . That syntax is now deprecated.

[[P027]]


USING TERMINALS
*****
*****
Both the GUI button and the clipboard are relatively new methods for exporting a
graph. They’re easy to use but don’t allow for much flexibility in the appearance of
the generated graph. To get full control over the export process, you need to become
familiar with gnuplot’s terminal facility.

In gnuplot parlance, a terminal is a graphics-capable output device. Traditionally,
this may have been a specific piece of hardware (such as a pen-and-ink plotter), but
today a gnuplot terminal is merely a reference to the underlying graphics library.

TIP: A terminal is gnuplot’s abstraction for a graphics-capable end point.
Terminals can be interactive (screen oriented) or file-based. All graphics out-
put must be directed to a terminal.

Contemporary terminals come in two flavors: interactive and file-based. Interactive
terminals create the graphs that you see on the screen. On Linux, you have a choice
among three interactive terminals, each built using a different widget set: the qt ter-
minal uses Qt, the wxt terminal uses wxWidgets, and the old x11 terminal is a pure
Xlib application. (Both the qt and the wxt terminals also exist on Windows and Mac
OS X , together with platform-specific terminals.)

But to export a graph to a file, you need to employ a file-based terminal that can
generate output in the desired output format ( PNG , PDF , SVG , and so on). Most file-
based terminals accept a large number of options through which you can control vari-
ous aspects (such as the size) of the resulting graph. These options are covered in
detail in chapter 10.

All of this is straightforward. But there is one stumbling block: exporting a graph
via a file-based terminal requires multiple steps. In order to export a graph with a gnuplot
terminal, several commands must be executed in proper sequence. This may come as a
surprise, because “exporting to a file” is a single, atomic operation in most other appli-
cations these days. Gnuplot is different.

The full sequence of steps is shown in listing 2.2. Let’s step through it:

1. Begin with an arbitrary plot command.
2. Select the desired file-based terminal, using the set terminal command.
3. Specify the name of the output file, using the set output command.
4. Regenerate the last plot, this time sending it to the file-based terminal and the named file.
5. Restore the interactive terminal again, using both set terminal and the set output command.


[[P028]]

.Listing 2.2 Complete workflow to export to file
[source]
plot exp(-x**2)        # ➊
set terminal pngcairo  # ➋
set output "graph.png" # ➌
replot                 # ➍
set terminal wxt       # ➎
set output             # ➏

➊ A plot command

➋ Selects the file format

➌ Specifies the output filename

➍ Repeats the most recent plot command, with
the output now going to the specified file

➎ Restores the terminal settings

➏ Sends output to the screen again by
using an empty filename

This is the first time you’ve encountered gnuplot’s set command—I’ll talk about it in
more detail in the next section (and subsequently in almost every chapter of this
book!). For now, it’s enough to understand that it sets a parameter (such as terminal )
to a value. But—and this is often forgotten—it does not generate a plot! The only com-
mands that do so are plot , splot (which is used for three-dimensional graphs, dis-
cussed in appendix C), and replot and refresh (both of which repeat the most
recent plot or splot command).

I’d like to emphasize three things about listing 2.2:

•  The file format and the output filename must be specified separately, using set
terminal and set output , respectively.

•  The graph must be sent to the newly created file in a separate command, using
plot , replot , or an equivalent command.

•  Afterward, the interactive terminal must be restored explicitly. (This is easy to
forget.)

As long as you keep these three items in mind, creating files via terminals won’t pose
any difficulties. (In chapter 11, you’ll see how to use scripts and macros to facilitate
this process.)

TIP: Be sure to complete all the required steps, and in the proper order. Typ-
ical mistakes are forgetting to issue a replot command (resulting in an empty
file) and forgetting to restore the original terminal at the end.

Before leaving this section, one last word of advice: always save the commands used to
generate a plot to a command file before exporting to a printable format. Always. It’s
almost guaranteed that you’ll want to regenerate the plot to make a minor modification
later (such as fixing a typo in a label, adding one more data set, or adjusting the plot
range slightly). This can only be done from the commands saved to file using save , not
from plots exported to a graphics file. We’ll come back to this topic several times.

TIP: Don’t just store the finished graph. Always save the commands required
to generate it as well, so you can come back and modify it later.


[[P029]]

=== 2.3 Managing options with set and show

Gnuplot has relatively few commands (such as the plot , save , and load commands
you’ve already encountered) but a large number of options. These options are used to
control everything from the format of the decimal point to the name of the output
file. More than 100 such options are available, along with countless sub-options for
each. Check the entries for set and show in the gnuplot standard reference manual
for the complete list.

TIP: Many aspects of gnuplot’s behavior can be controlled through options.
Use the set command to change their value; use show to see their current
value.

The three commands used to manipulate individual options are as follows:

•  show —Displays the current value of an option
•  set —Changes the value of an option
•  unset —Disables a specific option or returns it to its default value

There’s also a fourth command, reset , which returns all options to their default val-
ues. The only options not affected by reset are those directly influencing output gen-
eration: terminal and output .

The syntax of all three commands is straightforward. To assign a new value to an
option, use the set keyword followed by the name of the option and the new value.
The show command takes only a single argument: the name of the option you want to
inspect.

The show command is also used more generally to display all kinds of information
about gnuplot’s internal state, not just options that can be changed using set . For
example, show variables displays all variables that are defined in the current session
together with their values, and show functions lists all user-defined functions.

Another useful command is

[source]
show version long

This prints the current version of gnuplot, together with a copyright notice and point-
ers to the online documentation. More important, it also shows the compile-time flags
that gnuplot was compiled with. This is particularly relevant because some features have
only recently been added to gnuplot and may not be enabled on all platforms. You can
use show version long to see which flags your version of gnuplot was built with.
Finally, you can use show all to see a listing of all possible options and their val-
ues. Be prepared for a long listing!

TIP: You can use the show command to learn about your gnuplot installation
and to inspect the current state of a gnuplot session.


[[P030]]

=== 2.4 Getting help

Gnuplot has an extensive built-in, online help system (online in the sense that it’s
accessible from within the gnuplot session; it has nothing to do with network connec-
tivity to the internet). To get started, enter help at the gnuplot prompt. Alternatively,
you can go directly to the reference page for a specific command or option by enter-
ing the name of the command or option as an argument to the help command. For
example, to learn about the plot command, you’d use

[source]
help plot

The online help is detailed and comprehensive, so you should become familiar with
it. But keep in mind that it’s a reference, not a tutorial. If you know the name of the
command or option you’re looking for, it’s great. But if you want to find all relevant
options for a specific task, navigating the online help can be frustrating.

TIP: Type help , followed by a command or option name, to access gnuplot’s
built-in reference documentation.


=== 2.5 Summary

In this chapter, you learned how to do the most important things with gnuplot: plot-
ting, saving, and exporting. You also learned how to set and inspect options and how
to access the built-in reference documentation.

This means you can already do the three most important things for day-to-day
work: generate a plot, save it to file, and export it. In the next chapter, you’ll begin to
learn how to use gnuplot to analyze data and understand what it’s telling you.


[[P031]][[ch03]]

== Chaper 3 The heart of the matter: the plot command

This chapter covers

•  Plotting functions and data
•  Math with gnuplot
•  Inline transformations
•  Logarithmic plots
•  Smoothing data

In gnuplot, you use the plot command to create plots of functions and data. It is,
hands down, the most frequently used and most important of all gnuplot com-
mands. In this chapter, we’ll take a systematic look at the plot command and the
ways it can be used.

You’ll begin by making simple plots of functions and data. Then I’ll introduce
inline transformations: gnuplot can apply arbitrary transformations to the data as it’s
being plotted. You’ll learn how to use this useful feature after we take a quick
detour to describe how to do math with gnuplot. Logarithmic plots are another
indispensable technique in graphical analysis, and I’ll show you how and when to
use them. (If you’ve never seen them before, you’ll find a sidebar giving you more
background on them.) Finally, we’ll be ready to discuss gnuplot’s built-in features to
simplify, smooth, and summarize data.

[[P032]]


=== 3.1 Plotting functions and data

You use the plot command to plot both functions and data. Let’s look at plotting
functions first and then move on to plotting data.


==== 3.1.1 Plotting functions

To plot a function, you use the plot command followed by the function to plot and
(optionally) any style directives you wish to use (see chapters 6 and 9 to learn about
available styles and how to specify them):

[source]
plot sin(x)                     # Plots in the default style
plot cos(x) with linespoints    # Plots with lines and points

Including two or more functions in the same graph is easy. You simply list them all
after the initial plot command, separated by commas:

[source]
plot sin(x), cos(x) w lp

If you don’t specify a style, gnuplot chooses a different line color or dash pattern for
each new function in the plot. If you include more functions than there are currently
defined styles, gnuplot cycles through them again from the beginning. (This is
explained in more detail in chapters 6 and 9.)

Gnuplot comes with a large number of built-in functions, and it’s also possible to
define your own. I’ll talk about this in section 3.2 later in this chapter.

.THE SAMPLING RATE FOR FUNCTIONS
*****
The set samples option controls the number of points at which a function is evalu-
ated to generate a plot. It defaults to 100 points, but this isn’t sufficient for curves
including cusps or singularities. A value of 1,000–3,000 works well—the sampling rate
should be slightly higher than the horizontal number of pixels of the output device
(which is usually around 600 for interactive and bitmap terminals). This option has no
effect when plotting data, unless you use one of the smoothing algorithms (see sec-
tion 3.5 later in this chapter); the smooth curve is sampled according to the value of
the set samples option.
*****


Changing the number of sampling points is easy. Give an integer argument to set
samples :

[source]
set samples 1000    # Now uses 1,000 points

You may want to include that line in your personal gnuplot initialization file, overrid-
ing gnuplot’s (ridiculously) small default value (see chapter 12 to learn how to set up
a gnuplot initialization file).


[[P033]]

TIP: Choose an appropriate value (such as 1,000 or even 3,000) for the num-
ber of points gnuplot uses to plot a function. The default value of 100 is
unreasonably low given the capabilities of today’s computers and displays.

==== 3.1.2 Plotting data

To plot data, you again use the plot command, but in place of the function to plot,
you specify the name of the file containing the data set. There is one additional wrin-
kle: you also need to specify which columns from the file to select. And finally, you can
again choose which style gnuplot should use for your plot.

I’ll talk about data files and their permissible formats in more detail in chapter 4.
For now, suffice to say that gnuplot expects data files to be whitespace-separated, col-
umn-oriented text files, with one line per record. Listing 3.1 shows an example: the
world records (as of late 2014) for both men and women running events at a variety of
distances. (Distances are in meters, and times are in seconds—the last two entries with
the “odd” distances are for half-marathon and full-marathon races.)

[source]
----
# Distance     Men   Women  Men        Women
100           9.58   10.49  2009-08-16 1988-07-16
200          19.19   21.34  2009-08-20 1988-09-29
400          43.18   47.60  1999-08-26 1985-10-06
800         100.91  113.28  2012-08-09 1983-07-26
1000        131.96  148.98  1999-09-05 1996-08-23
1500        206.00  230.46  1998-07-14 1993-09-11
3000        440.67  486.11  1996-09-01 1993-09-13
5000        757.35  851.15  2005-05-31 2008-06-06
10000      1577.53 1771.78  2005-08-26 1993-09-08
21098      3503.00 3912.00  2010-03-21 2014-02-16   <=== Half marathon
42195      7377.00 8262.00  2014-09-28 2003-04-13   <=== Full marathon
----

Figure 3.1 displays a plot of the finishing times for events up to 10,000 meters as a
function of the distance, together with two function plots for comparison (the using ,
title , and w p directives were introduced in section 2.1.2):

[source]
plot [:12000] "records" u 1:2 title "Men" w p, "" u 1:3 title "Women" w p,
➥0.14*x, 0.16*x

Not surprisingly, the time required increases roughly in proportion to the distance,
but not precisely so. A comparison with the straight lines included in the graph shows
that for longer distances, the required time is greater than you’d expect given the
short-distance results. Again, that’s no surprise: as the distance gets longer, the run-
ners slow down. (We’ll come back to this point later.)

This example plots two (simple) functions together with the data, so that you can
compare the data against a known behavior (as expressed by the function). This kind
of comparison constitutes an important part of graphical analysis, and gnuplot makes
it particularly easy to combine multiple data sets and functions in a single graph.
Listing 3.1 Data for figure 3.1 (file: records)


[[ch03fig01]]
.Figure 3.1. Current athletic world-record running times as a function of the competition distance, for both men and women. The data is shown in <<ch03ex01, listing 3.1>>.
image:https://drek4537l1klr.cloudfront.net/janert2/Figures/03fig01_alt.jpg[]

[source,bash]
----
cat >stdin <<EOF
# Distance     Men   Women  Men        Women
100           9.58   10.49  2009-08-16 1988-07-16
200          19.19   21.34  2009-08-20 1988-09-29
400          43.18   47.60  1999-08-26 1985-10-06
800         100.91  113.28  2012-08-09 1983-07-26
1000        131.96  148.98  1999-09-05 1996-08-23
1500        206.00  230.46  1998-07-14 1993-09-11
3000        440.67  486.11  1996-09-01 1993-09-13
5000        757.35  851.15  2005-05-31 2008-06-06
10000      1577.53 1771.78  2005-08-26 1993-09-08
21098      3503.00 3912.00  2010-03-21 2014-02-16
42195      7377.00 8262.00  2014-09-28 2003-04-13
EOF
script='
    set term windows;
    plot [:12000] "stdin" 
        using 1:2 title "Men" w p, "" 
        using 1:3 title "Women" w p, 0.14*x, 0.16*x;
    pause mouse keypress
'
gnuplot -e "$script"

  2000 +-------------------------------------------------------------------+   
       |          +           +          +          +           +        %%|   
  1800 |-+                                                     MBn    %%%+-|   
       |                                                     Wome%%%%%B   $|   
  1600 |-+                                                  0.%%%% $$$$$$$$|   
       |                                                   %%%16*x$%%%%%%% |   
  1400 |-+                                             %%%%   $$$$       +-|   
       |                                            %%%%  $$$$             |   
  1200 |-+                                      %%%%  $$$$               +-|   
       |                                    %%%%  $$$$                     |   
  1000 |-+                               %%%% $$$$                       +-|   
       |                           B  %%% $$$$                             |   
   800 |-+                        %%%%$$$$                               +-|   
       |                      %%%%$$$$                                     |   
   600 |-+                 %%%$$$$                                       +-|   
       |               %%%%$$$                                             |   
   400 |-+          %%%%$$                                               +-|   
       |        %%%%$$                                                     |   
   200 |-+  %%%%%$                                                       +-|   
       | %%%%$    +           +          +          +           +          |   
     0 +-------------------------------------------------------------------+   
       0         2000        4000       6000       8000       10000      12000 
----

Figure 3.1 Current athletic world-record running times as a function of the competition
distance, for both men and women. The data is shown in listing 3.1.

[[P034]]

TIP: Comparing data against a known function can tell you a lot about the
data set. Including one or several suitable functions in the graph brings out
the behavior of the data.


=== 3.2 Math with gnuplot

Not surprisingly, gnuplot can evaluate mathematical expressions and includes support
for many mathematical functions. Gnuplot’s syntax for mathematical expressions is
straightforward and similar to the conventions found in other programming lan-
guages.

Gnuplot ships with its own math library, which these days is used only when the sys-
tem math library is found to be insufficient. (The most notable extension that gnu-
plot’s math library provides is support for complex numbers: see appendix F.)

==== 3.2.1 Mathematical expressions

Gnuplot uses standard infix syntax for mathematical expressions, including the nor-
mal operators for the four basic arithmetical operations, as in most C-like languages.
Parentheses can be used to change the order of evaluation. Gnuplot has the exponen-
tiation operator ( ** ) found in Fortran and Perl. All of these operate either on float-
ing-point values or on integers.

It’s important to understand that integer division truncates, so 3/2 yields 1 . Integers
are promoted to floating-point values in mixed expressions, but in some situations
truncation occurs in expressions involving variables. If you want nontruncating divi-
sion, it’s always safer to force the use of floating-point arithmetic by writing x/2 . or
x/2.0. You can also force a mixed expression by adding a floating-point zero: x + 0.0.


[[P035]]

TIP: Keep in mind that integer division truncates. Hence an expression like
3/2 evaluates to 1 , not to 1.5 . To force floating-point division, include a deci-
mal point: 3/2. evaluates to 1.5 .

Gnuplot also offers a range of operators for integer arithmetic, such as the familiar
modulo operator % , and a unary factorial operator: n! = 1 * 2 * ... * (n-1) * n . You
can also find bit-shift and bitwise logical operators.

All the usual relational and logical operators are available as well, including the
ternary conditional operator ( ?: ). A recent addition is the comma operator, which can
be used to evaluate several statements as part of a single expression. (This is a rela-
tively advanced feature; you’ll see an application in section 14.1.2.) Tables 3.1 and 3.2
list all the unary and binary operators in order of their precedence.

[[ch03table01]]
.Table 3.1. Unary operators in order of decreasing precedence
[cols=",,,",options="header,autowidth",]
|===
|Operator |Example |Argument type |Description
| !       | !a     |Integer       |Logical NOT
| ~       | ~a     |Integer       |One’s complement
| !       | a!     |Integer       |Factorial
| -       | -a     |Any numerical |Unary minus
| +       | +a     |Any numerical |Unary plus
|===

[[ch03table02]]
.Table 3.2. Binary operators in order of decreasing precedence
[cols=",,,",options="header,autowidth",]
|===
|Operator |Example |Argument type |Description
| **      |a**b    |Any numerical |Exponentiation
| *       |a*b     |Any numerical |Multiplication
| /       |a/b     |Any numerical |Division
| %       |a%b     |Integer       |Modulo
| +       |a+b     |Any numerical |Addition
| -       |a-b     |Any numerical |Subtraction
| .       |a.b     |String        |String concatenation
| <<      |a<<b    |Integer       |Unsigned bitwise left shift
| >>      |a>>b    |Integer       |Unsigned bitwise right shift
| <       |a<b     |Any numerical |Less than
| <=      |a<=b    |Any numerical |Less than or equal to
| >       |a>b     |Any numerical |Greater than
| >=      |a>=b    |Any numerical |Greater than or equal to
| ==      |a==b    |Any numerical |Numerical equality
| !=      |a!=b    |Any numerical |Numerical inequality
| eq      |a eq b  |String        |String equality
| ne      |a ne b  |String        |String inequality
| &       |a&b     |Integer       |Bitwise AND
| ^       |a^b     |Integer       |Bitwise XOR
| \|      |a\|b    |Integer       |Bitwise OR
| &&      |a&&b    |Integer       |Logical AND
| \|\|    |a\|\|b  |Integer       |Logical OR
| =       |a=b     |Any (numerical or string)   |Assignment
| (,)     |(a,b)   |Any (numerical or string)   |Sequential evaluation
|===


[[P036]]

==== 3.2.2 Built-in functions

Gnuplot provides all the mathematical functions you’ve come to expect on any scien-
tific calculator: square root, exponential function and logarithms, and trigonometric
and hyperbolic functions. It also supports some less-standard functions that are rele-
vant in physics, applied math, and statistics (such as Bessel functions, the error inte-
gral, and the gamma function). You can execute help expressions functions from
within gnuplot or check table F.1 in appendix F for the full list. ^1^

Gnuplot also includes a built-in random number generator, which can be quite use-
ful at times. You access it through the function rand(x) . If called with an argument that
is equal to zero, the function returns a pseudo-random number between zero and one.

The algorithm used to generate the pseudo-random numbers requires two seeds
to be set; given the same values for the seeds, exactly the same sequence of numbers is
returned. Gnuplot doesn’t have a separate function to set the seeds; instead, this is
accomplished by providing special values as arguments to rand(x) . Check table 3.3
for details. Keep in mind that rand(x) is a function and therefore must be called as an
expression, even if you’re only setting the seeds. The command print rand(-1) , for
example, can be used to reset the seeds to their default values.

^1^
A summary of built-in functions for string and time handling can be found in tables 5.1 and 8.6, respectively.
Table 3.2 Binary operators in order of decreasing precedence (continued)
Operator Example Argument type Description

[[P037]]

[[ch03table03]]
.Table 3.3. The `rand(x)` function is used both to access the random number generator and to set its seeds, depending on the value of the argument.
[cols=",",options="header,autowidth",]
|===
|Invocation   |Description
|rand(0)      |Returns the next pseudo-random number, using the current
               values of both seeds
|rand(-1)     |Resets both seeds to a standard value
|rand(x)      |For x>0, sets both seeds to a value based on the value of x
|rand(\{x,y}) |For x,y>0, sets the first seed to x and the other seed to y
|===

The standard gnuplot distribution contains a file called stat.inc in the demo/ folder
that defines many additional functions, most of them related to various probability
distributions. You can load this file into your current gnuplot session using load and
then use these functions the same way you would use built-ins.

TIP: Check the file stat.inc in gnuplot’s demo/ folder for many useful func-
tions related to probability distributions.


==== 3.2.3 User-defined variables and functions

It’s easy to define new variables by assigning an expression to a name. For instance,
you might want to define some useful mathematical constants. (You don’t need to
define pi , because it’s already defined by gnuplot.) The following listing shows several
useful constants you may want to define.


.Listing 3.2 Examples of user-defined variables and constants
[source]
e     = 2.71828182845905  <=== The base of the natural logarithm
sqrt2 = sqrt(2.0)         <=== The square root of 2
euler = 0.57721566490153  <=== The Euler-Mascheroni constant


Here, euler is the Euler-Mascheroni constant (usually represented using the Greek
letter gamma), which is “the most important number that you’ve never heard of
before” (J. Stopple). ^2^

Functions can be defined in a similar fashion, as shown next.


.Listing 3.3 Examples of user-defined functions
[source]
f(x) = -x * log(x)
gauss( x, m, s ) = exp( -0.5*( (x-m)/s )**2 )/sqrt(2*pi*s**2)
binom( n, k ) = n!/(k!*(n-k)!)    # ➊
min( a, b ) = ( a < b ) ? a : b   # ➋
step( x ) = ( x < 0 ) ? 0 : 1     # ➌

• ➊ Uses the factorial operator to generate binomial coefficients
• ➋ Uses the ternary ? operator
• ➌ A piece-wise defined function

^2^
Read his wonderful A Primer of Analytic Number Theory (Cambridge University Press, 2003) to find out why you
should care. The quote can be found on page 49.


[[P038]]
Functions can have up to 12 variables and can contain other functions and operators.
You use them as you would use any other function. Assuming you had issued the defi-
nitions in listing 3.3, you could then write plot sin(x), f(x) .

By default, gnuplot assumes that the independent dummy variable, which is auto-
matically replaced by a range of x values when plotting a function, is labeled x (as in:
plot sin(x) ), but you can change this using the set dummy command. For example,
set dummy t makes t the independent variable, so now you would say plot sin(t) .
All other variables occurring in a function definition (parameters) must have been
assigned values before you can plot (that is, evaluate) the function. For convenience,
you can assign values to parameters as part of the plot command. For example, you
could do the following (notice that no comma is required between the variable assign-
ment and the function):

[source]
g(x) = exp(-0.5*(x/s)**2)/s
plot s=1 g(x), s=2 g(x), s=3 g(x)

But in general, I think it’s better to make all parameters explicit arguments in the func-
tion definition. The previous example could (and probably should) be written as fol-
lows (except for the entries in the graph’s legend or key, the resulting figures are
identical—see figure 3.2):

[source]
g(x, s) = exp(-0.5*(x/s)**2)/s
plot g(x,1), g(x,2), g(x,3)

[source]
gnuplot -e 'g(x, s) = exp(-0.5*(x/s)**2)/s; plot g(x,1), g(x,2), g(x,3); pause mouse keypress'


[[ch03fig02]]
.Figure 3.2. Plotting a function for different values of a parameter: `plot g(x,1), g(x,2), g(x,3)` where `g(x, s) = exp(-0.5*(x/s)**2)/s`
image:https://drek4537l1klr.cloudfront.net/janert2/Figures/03fig02_alt.jpg[]

[[P039]]
All functions and variables have global scope. There’s no such thing as a private vari-
able or local scope!

You can obtain lists of all user-defined variables and functions using the following two
commands (remember to use help expressions functions to list built-in functions):

[source]
show variables
show functions

==== 3.2.4 Mathematically undefined values and NaN (not a number)

Gnuplot tends to be pretty tolerant when encountering undefined values: rather than
failing, it doesn’t produce any graphical output for data points with undefined values.
For instance, you may safely plot the square root (which is only defined for positive
values) over any plot range: if the argument is negative, gnuplot won’t fail—it just
won’t show anything on the graph for x < 0. Similarly, you never have to worry whether
the denominator of a function might equal zero for any value in the plot range: if it
does, gnuplot will silently skip those points.

This behavior can be used to suppress data points or define piecewise functions,
usually in conjunction with the ternary conditional operator. For example, consider
the following function:

[source]
f(x) = abs(x) < 1 ? 1 : NaN

It’s only defined on the interval [-1:1] . For values with an absolute value equal to 1 or
greater, it returns NaN , which stands for not a number and indicates a mathematically
undefined value. ^3^ A plot of this function shows data points only on the interval [-1:1]
and is empty otherwise. This NaN technique is a good trick that’s frequently useful, in
particular in conjunction with the ternary operator, as in these examples.

TIP: Gnuplot doesn’t fail when it encounters a mathematically undefined
value during a plot; it just doesn’t generate graphical output for such points.
You can use this effect to exclude intervals or data points from plots.


=== 3.3 Data transformations

As stated before, gnuplot is first and foremost a plotting tool: a program to generate
straightforward plots of raw data in a simple and efficient manner. Specifically, it’s not
a statistics package or a workbench for numerical analysis. Large-scale data transfor-
mations aren’t what gnuplot is designed for. Properly understood, this is one of gnu-
plot’s main strengths: it does a simple task and does it well, and it doesn’t require
learning an entire toolset or programming language.

Nevertheless, gnuplot has the ability to perform arbitrary data transformations on
the fly as part of the plot command. Thus you can apply filters to the data from within
gnuplot without having to take recourse in external tools or programming languages.

^3^
Using the NaN special value from the IEEE 754 standard for floating-point computations is new with gnuplot
5; in previous releases, it was customary to achieve the same effect using the expression 1/0 .

[[P040]]

==== 3.3.1 Simple data transformations

An arbitrary function can be applied to each data point as part of the using directive
in the plot command. If an argument to using is enclosed in parentheses, it’s treated
not as a column number, but as an expression to be evaluated. Inside the parentheses,
you can access the column values for the current record by preceding the column
number with a dollar sign ( $ ) (as in shell or awk programming). Some examples will
help to clarify:

•  To plot the square root of the values found in the second column versus the val-
ues in the first column, use

[source]
plot "data" using 1:( sqrt($2) ) with lines

•  To plot the average of the second and third columns, use

[source]
plot "data" using 1:( ($2+$3)/2 ) with lines

•  To generate a log/log plot, you can use the following command (although the
logscale style, discussed in section 3.4, is the preferred way to achieve the same
effect):

[source]
plot "data" using ( log($1) ):( log($2) ) with lines

TIP: Inline transformations allow you to apply an arbitrary transformation to
each point as it’s being plotted.

A fundamental limitation to all these transforms is that they can only be applied to a
single record at a time. If you need aggregate functions over several records (sums or
averages, for example), or across different data sets, you’ll usually have to perform
them externally to gnuplot. Nevertheless, the ability to apply an arbitrary filter to each
data point and to combine different data points for the same x value is often tremen-
dously useful.

.A WORKED EXAMPLE
*****
Remember the running records from listing 3.1? Based on the basic plot of time ver-
sus distance, you were led to suspect that athletes run more slowly over longer dis-
tances. The best way to confirm this would be a plot of the average speed for the
different events. The data set doesn’t contain the speed, but you can calculate it easily
as distance (column 1) divided by time (in column 2 or 3, respectively). This is pre-
cisely the kind of simple combination of column values that inline transformations are
intended for (remember that an empty filename is a placeholder for the most
recently accessed file):

[source]
plot [9:][5:11] "records" u 2:($1/$2) t "Men" w lp,
➥"" u 3:($1/$3) t "Women" w lp
*****

Figure 3.3 shows the speed as a function of the time (not distance), in a semi-logarith-
mic plot (in the horizontal axis: set logsc x ). The figure confirms the expectation that
average speed decreases for longer distances, but it shows you more: the rate of
decrease isn’t constant. We can distinguish three regimes: a sprint regime (up to 20
seconds); a long-duration regime (longer than about 2 minutes); and a transition
regime in between, where the decrease in speed is particularly drastic.

[[ch03fig03]]
.Figure 3.3. The average speed of the current world record holder, as a function of the distance. The speed has been calculated from the distance and the finishing time as part of the `plot` command, using an inline transformation: `plot "records" u 2:($1/$2) w lp`. (See <<ch03ex01, listing 3.1>> for the data.)
image:https://drek4537l1klr.cloudfront.net/janert2/Figures/03fig03_alt.jpg[]

[[P041]]

.MORE IDEAS FOR INLINE TRANSFORMATIONS
*****
Here are some more creative uses for inline transformations. To plot two data sets of
different magnitudes on a similar scale, use this (assuming that the data in column 3 is
typically greater by a factor of 100 than the data in column 2):
plot "data" using 1:2 with lines, "" using 1:( $3/100.0 ) with lines
If the data file contains the x value in the first column, the mean in the second, and
the variance in the third, you can plot the band in which to expect 68% of all data to
fall:

[source]
plot "data" using 1:( $2+sqrt($3) ) with lines,
➥ "" using 1:( $2-sqrt($3) ) with lines

All expressions involving operators or functions can be part of using expressions,
including the conditional operator:

[source]
plot "data" using 1:( $2 > 0 ? log($2) : 0 ) with lines
*****

[[P042]]
You can use a similar method to exclude certain data points when plotting data from a
file. For example, the following command only plots data points for which the y value
is less than 10:
plot "data" using 1:( $2 < 10 ? $2 : NaN ) with points
Finally, keep in mind that the expression supplied in parentheses can be a constant.
You’ll see some examples for this usage in section 3.5 later in this chapter.

=== 3.4 Logarithmic plots

Let’s see how you can generate logarithmic plots. Logarithmic plots are a crucial tech-
nique in graphical analysis. In gnuplot, it’s easy to switch to and from logarithmic
plots:

[source]
set   logscale    # <== Turns on double logarithmic plotting
set   logscale x  # <== Turns on logarithmic plotting for the x axis only …
set   logscale y  # <== … for the y axis only
unset logscale    # <== Turns off logarithmic plotting for all axes
unset logscale x  # <== … for the x axis only
unset logscale y  # <== … for the y axis only

You can provide a base as a second argument: set logscale y 2 turns on binary loga-
rithms for the y axis. (The default is to use base 10.) We’ll talk more about uses for set
logscale in chapter 13.


.How do logarithmic plots work?
*****
Logarithmic plots are a truly indispensable tool in graphical analysis. It’s possible to
understand what they do even without detailed understanding of the mathematics
behind them, but the math isn’t all that hard; therefore, I’ll explain in this sidebar
how logarithmic plots work and how they’re used.

Let’s quickly recapitulate the most relevant properties of logarithms. The defining
relation for the log function is

stem:[n = \log_{b}{b^n}]

There isn’t a single log function, but infinitely many; you always need to specify the
base b with respect to which the logarithm needs to be taken.

Logarithms with respect to different bases are related to one another in a simple way:

stem:[\log_{a}{x} = \log_{a}{b} \log_{b}{x}]

Logarithms to two specific bases are used most often: the logarithm to base 10 (typ-
ically abbreviated log) and the so-called natural logarithm to base e=2.7818...
(abbreviated ln). Be aware that the notation just introduced (log(x) and ln(x)) is com-
mon in mathematical contexts, but when you’re using gnuplot’s built-in functions,
log(x) refers to the natural logarithm; you must use log10(x) for the logarithm to
base 10.


[[P043]]

Logarithms have many interesting properties, two of which are of fundamental
importance:

stem:[\log(xy) = \log(x) + \log(y)]

and

stem:[\log(x^k) = k\log(x)]

You can see that the logarithm of a product equals the sum of the logarithms, so
these two relations can be summarized by saying that logarithms turn products into
sums and powers into products. You’ll see how these relationships are at the core
of logarithmic plots.

In a logarithmic plot, you don’t plot the actual values; instead, you plot their loga-
rithms. But tic marks on the axes are usually labeled with the actual values (not their
logarithms). Here’s an example: suppose you want to plot the values 1, 10, 100, and
1,000. Their logarithms (to base 10) are 0, 1, 2, and 3, respectively (because stem:[10^3] =
1,000, and so on). In a logarithmic plot, you place tic marks at equal distances from
each other (at the locations 0, 1, 2, and 3) but label them 1, 10, 100, and 1,000.

The following figure illustrates these aspects. The y axis on the left is scaled logarith-
mically. Comparing the values on the left vertical axis to the units of the vertical axis
on the right shows how a logarithmic axis is linear in the exponent to which the base
must be raised to obtain the actual value (that is, it’s linear in the logarithm). Also
note how the same relative change results in the same visual length when using log-
arithmic scales: both scale arrows are the same length and represent a 100% change,
although the absolute change is different for both arrows (1 to 2 on the left, 100 to
200 on the right).

image:https://drek4537l1klr.cloudfront.net/janert2/Figures/043fig01_alt.jpg[]

A semi-log plot. See the text for details. (Labels for some of the minor tic marks on the left
axis are provided.)

[[P044]]


You can switch on logarithmic plotting either on a single axis (usually the y axis) or
on both, yielding a single- or double-logarithmic plot, respectively. Single-logarithmic
plots are sometimes referred to as semi-log plots, and double-logarithmic plots are
also known as log-log plots. Both plots are used for different purposes.

There are two uses for single-logarithmic plots. First, if you have data with exponential
behavior, showing it on a single-logarithmic plot lets the data fall onto a straight line:

stem:[y(x) = e^{ax} \Rightarrow \log(y(x)) = ax]

In other words, if y(x) is an exponential function of x, then log( y(x) ) is a linear func-
tion (straight line) of x. You can use single-logarithmic plots in this way to determine,
for instance, the half-life of a radioactive substance from measured decays.

The other use for single-logarithmic plots is common in finance: on a single-logarithmic
plot, all relative changes have the same size, no matter how large the underlying
absolute changes. Here’s an example: if a stock you own falls by $10 in a single day,
your reaction will be different depending on whether you paid $20 or $100 initially.
In the first case, you lost 50% of your money; but in the second, you lost only 10%.
You care about relative changes, not absolute ones. Therefore you want a plot in
which all changes of the same relative magnitude result in the same distance on the
graph. That’s what semi-log plots do for you. If the value before the change is y 1 and
the value after the change is y 2 = g y 1 , where g equals 1.1 (corresponding to a 10%
gain), then the change in absolute terms is

stem:[y_1 - y_2 = y_1 - gy_1 – (1 - g)y_1]

which depends on the overall size of the value y 1 . But if you consider logarithms, you
find

stem:[\log(y_1) - \log(y_2) = \log(y_1) – log(gy_1) = \log(y_1) - \log(g) - \log(y_1) = -\log(g)]

which is independent of the overall value and depends only on the relative size of the
change, g. This is why long-term charts of, for example, the Dow Jones index are usu-
ally shown as semi-log plots: a 10% drop today or in 1929 results in the same dis-
tance covered on the graph, despite the fact that the Dow Jones is around 17,000
today but stood at about 300 then.

Double-logarithmic plots serve a different purpose. They help you identify power-law
behavior—that is, data that follows an equation such as the following (C is a constant):

stem:[y(x) = Cx^k]

The analysis goes through as before, but you end up with logarithms now on both
sides of the equation:

stem:[\log(y(x)) = k\log(x) + \log(C)]

The resulting graph is a straight line with a slope that depends on the exponent k.
You saw an example of this in chapter 1, when estimating the completion time of a
long-running computer program.

Double-logarithmic plots are very important. Power laws occur in many different con-
texts in the real world but aren’t always easy to spot. Go back to figure 1.3 in chapter
1: many different curves will seem to fit the data about equally well. But once plotted
on a double-log plot (see figure 1.4), the linear shape of the data stands out and pro-
vides a strong and easily recognizable indicator of the underlying power-law behavior.
*****

[[P045]]

TIP: Log and log-log plots are part of the standard toolset. They reveal expo-
nential and power-law behavior, and they’re generally useful when dealing
with data that changes over many orders of magnitude. Learn how to use
them!

=== 3.5 Smooth interpolation and approximation

Gnuplot can construct a variety of smooth curves as representations of a data set. You
can invoke this feature using the smooth directive to the plot command, followed by
an additional keyword that selects the specific interpolation method. Table 3.4 lists
the available smoothing methods, together with brief descriptions.


.Table 3.4 Smoothing methods available for plot ... smooth ...
[cols=",,",options="header,autowidth",]
|===
|   |Keyword      |Description
|1  |*csplines*   |Cubic spline interpolation
|2  |*mcsplines*  |Monotone cubic spline interpolation
|3  |*acsplines*  |Approximate cubic spline
|4  |*bezier*     |Bézier curve
|5  |*sbezier*    |Sorted Bézier curve 
     (constructed after sorting the data points on their x values)
|6  |*kdensity*   |Kernel density estimate
|7  |*cumulative* |Cumulative distribution function
     (constructed after sorting the data points on the x values)
|8  |*cnormal*    |Normalized cumulative distribution function
     (independent of the number of data points—see the text for details)
|9  |*unique*     |Sorts data points on their x values, dedupes repeated entries,
     and replaces the y value for repeated x values with the average of the y values
|10 |*frequency*  |Sorts data points on their x values, dedupes repeated entries,
     and replaces the y value for repeated x values with the sum of the y values
|===

[[P046]]
Although all of these smoothing methods are invoked using the smooth keyword,
they fall into three broad groups that do different things and apply to different situa-
tions. Methods 1–5 construct a smooth curve through a set of (x,y) coordinate pairs.
Methods 6–8 treat the data set as a one-dimensional (or univariate) point distribution
and generate visual representations of this distribution. Methods 9 and 10 remove
multiple entries from a data set. As it turns out, method 10 ( frequency ) can also be
used to count data points in order to construct a histogram.

The remainder of this chapter describes each group of options. In chapter 13, I’ll
show you how these methods can be applied to solve common problems in the graph-
ical analysis of data sets.


==== 3.5.1 Interpolation curves

Gnuplot provides two sets of methods to draw a smooth curve through a set of (x,y)
points: those based on cubic splines, and those based on Bézier curves.

.SPLINE INTERPOLATIONS
*****
Splines ^4^ are smooth curves constructed from piecewise-polynomial functions that are
smoothly joined together. If the polynomials used are third order, then the resulting
spline is called a cubic spline. Splines can be used to give a smooth approximation to a
set of points; interpolating splines pass through each of the points exactly, whereas
approximating splines only pass the vicinity of each point.
*****

Both csplines and mcsplines construct interpolating cubic splines, meaning
the resulting curve passes through every point in the data set. The second form
( mcsplines ) ^5^ also guarantees that the curve has the same monotonicity and convex-
ity properties as the original data. Look at figure 3.4: the curve drawn using csplines
occasionally “overshoots” near locations of greatest curvature, whereas the line drawn
using mcsplines doesn’t. The second curve therefore may give a better, more faithful
representation of the data.

The third keyword ( acsplines ) creates an approximating spline, meaning the
curve doesn’t pass exactly through the data points. To control how close the curve
passes to each point, you need a new parameter (in addition to the x and y coordi-
nates of each point), which is supplied to gnuplot using a third “column” in the using
directive, like so:

[source]
plot "data" u 1:2:(0.01) smooth acsplines

This third parameter is a measure for the weight with which each point contributes to
the spline: the greater it is, the more the point influences the curve, and the closer the
curve passes to each point; the smaller it is, the less each point influences the curve.
The two extreme cases are instructive: as the weight parameter approaches infinity,
the curve approaches the interpolating spline (which passes through every point
exactly); but as the weight parameter approaches zero, the resulting spline
approaches the linear least-squares fit to the data. (See figure 3.5.)

^4^
I’ll have more to say about splines in section 13.1.2.

^5^
F. N. Fritsch and R. E. Carlson, “Monotone Piecewise Cubic Interpolation,” SIAM Journal on Numerical Analysis
17 (1980): 238–246.


[[P047]]
I’d like to draw attention to the way I handled the third column specifier in the
using directive: I supplied an expression in parentheses, which means it was inter-
preted (because of the parentheses) as a transformation to be applied to the data. The
expression itself, however, is a constant, so the value of this third column is the value
of that constant. Because the third column gives the weight with which the point
should contribute to the spline approximation, every point received the same weight.
Instead of supplying a numerical constant, you could specify an actual column from
which to take the weights, like so: plot "data" u 1:2:3 smooth acsplines (note the
missing parentheses, which means the 3 is interpreted as a column number, not as a
numerical constant). If the third column in the data file contains some measure of the
reliability or accuracy with which each point is known, you can have each point con-
tribute with a different weight, according to the certainty with which it’s known.

TIP: It’s frequently useful to supply a constant expression in inline transfor-
mations. For example, to have every point contribute equally to a spline
approximation, you can use plot "data" u 1:2:(0.1) smooth acsplines .

.Figure 3.4
image:https://drek4537l1klr.cloudfront.net/janert2/Figures/03fig04_alt.jpg[]

Figure 3.4 Interpolating splines: both csplines and mcsplines interpolate the data points
smoothly, but mcsplines doesn’t “overshoot” the data. In contrast to splines, which are locally
defined, the Bézier curve constitutes a global approximation. plot "splines" u 1:2 w p pt 6, "" u
1:2 smooth csplines, "" u 1:2 smooth mcsplines,"" u 1:2 smooth bezier . (The directive
pt 6 selects the shape of point symbols—see section 9.2.1.)

[[P048]]
Approximating splines are an important tool for graphical analysis. In chapter 13, I’ll
show you how to use them to visualize trends and features in noisy data sets.

.BÉZIER APPROXIMATIONS
*****
Bézier curves 6 are constructed as the path that would be traced by a particle that, start-
ing at one point, steers toward each of the subsequent points in turn. By construction,
Bézier curves pass through the first and last point exactly but in general don’t pass
through any of the internal points. Whereas splines are defined locally (between neigh-
boring points), Bézier curves are defined for the entire data set. As a result, Bézier
curves usually appear particularly smooth—which is also why they’re used so frequently
in computer graphics and design.

Gnuplot creates a Bézier curve of order n (where n is the number of data points)
using smooth bezier . (See figure 3.4.)

Because Bézier curves are traced out by a particle heading toward a set of way-
points in turn, not only the positions of the waypoints matter, but also the order in
which they’re traversed. When you use smooth sbezier , the data points are first sorted
by their x coordinates, and a Bézier curve is constructed for the resulting data set.
*****

^6^
The Wikipedia entry on Bézier curves is a good place to start.

.Figure 3.5
image:https://drek4537l1klr.cloudfront.net/janert2/Figures/03fig05_alt.jpg[]

Figure 3.5 Influence of the weight parameter on approximate splines. As the weight increases, the
curve approximates an interpolating spline; as the weight goes to zero, the curve approaches a
straight line: plot "splines" u 1:2 w p pt 6, "" u 1:2:(10e6) s acs, "" u 1:2:(10) s
acs, "" u 1:2:(1./10) s acs, "" u 1:2:(10e-6) s acs .


[[P049]]

==== 3.5.2 Point distributions

Gnuplot includes a few different ways to visualize univariate point distributions, some
involving the smooth facility, and some not. Here we’re primarily interested in the
technicalities of using the smooth feature—consult chapter 13 for additional informa-
tion about the math involved and to learn about the kinds of questions these methods
can help you answer.

.KERNEL DENSITY ESTIMATES
*****
Assume that you have a number of measurements of a single quantity, like the ones in
the following listing. These numbers may be weights of different shipments, or the
time it took a bunch of queries to finish, or the temperatures in various parts of the
house. It doesn’t matter: in every case, you want to know how the values are distrib-
uted, and that means how much the points scatter about.
*****

Listing 3.4 Data for figure 3.6 (file: measurements)

    2.14
    1.25
    1.10
    1.00
    1.60
    1.31
    0.95
    0.90
    4.01
    1.95
    2.53
    0.65

You can just plot all the points along a horizontal line (see figure 3.6) and take a look,
but if the number of points becomes large, it can be difficult to recognize the details
of the distribution. In a kernel density estimate, you replace each point with a strongly
peaked but smooth curve (the kernel) centered at the location of each point. You then
sum the contributions from all these curves and plot the result.

Gnuplot’s smooth kdens feature uses Gaussian curves as kernels and takes two col-
umns in the using specifier: the first column gives the position of each point, the sec-
ond the weight of each point. If you want to weight all points equally, you may again
supply a constant. To obtain a normalized density estimate, the weight of each point
should be 1/n, where n is the number of points in the data set.

With a third parameter, you control the width of each kernel. If you choose a large
value for this parameter, each point will appear more smeared out, and the resulting
curve will show few details; if you choose a small bandwidth, more features will show, but
the resulting curve may be noisy. (This is explained in greater detail in section 13.3.3.)
The bandwidth parameter isn’t passed as a pseudo-column; instead, it follows the
bandwidth keyword:

[source]
plot "data" u 1:(1) s kdens, "" u 1:(1) s kdens bandwidth 1

[source,bash]
----
cat > measurements <<EOF
    2.14
    1.25
    1.10
    1.00
    1.60
    1.31
    0.95
    0.90
    4.01
    1.95
    2.53
    0.65
EOF
script='
    plot "measurements" u 1:(-0.1) w p pt 7, "" u 1:(1/12.) s kdens
    bandwidth .1, "" u 1:(1/12.) s kdens bandwidth 0.2, "" u 1:(1/12.) s cumul ;
    pause mouse keypress
    '
gnuplot -e "$script"
----

.Figure 3.6
image:https://drek4537l1klr.cloudfront.net/janert2/Figures/03fig06_alt.jpg[]

Figure 3.6 Visualizing point distributions using kernel density estimates and the cumulative
distribution function: plot "measurements" u 1:(-0.1) w p pt 7, "" u 1:(1/12.) s kdens
bandwidth .1, "" u 1:(1/12.) s kdens bandwidth 0.2, "" u 1:(1/12.) s cumul . The
calculated default bandwidth is 0.58. See listing 3.4 for the data.

[[P050]]
If you don’t supply a bandwidth explicitly, gnuplot calculates one based on the stan-
dard deviation of the data set and stores it in a variable called GPVAL_KDENSITY_
BANDWIDTH . In practice, this default bandwidth often appears too broad. You can
inspect its value using print GPVAL_KDENSITY_BANDWIDTH . (I’ll formally introduce
gnuplot’s internal variables in section 5.5.)

.CUMULATIVE DISTRIBUTION FUNCTIONS
*****
Another way to visualize a point distribution is to count the fraction of points that lie
to the left of the current position: this is the cumulative distribution function of the data
set. By construction, the cumulative distribution function is monotonically increasing:
it’s 0 to the left of the point with the smallest value, and it’s 1 to the right of the point
with the greatest value. (See figure 3.6.)
*****

In gnuplot, you use smooth cumul to create a cumulative distribution function. It
takes two columns in the using specifier: the first holds the position of each measure-
ment, the second the associated weight. (It isn’t necessary for the data set to be sorted:
gnuplot takes care of that.) If you supply a weight of 1, then the value of the resulting
curve at any position is equal to the number of data points to the left of the current
position; if you supply a weight of 1/n to cumul , where n is the number of points in the
data set, then the curve is equal to the fraction of data points to the left.


[[P051]]
Gnuplot offers a second way to draw a cumulative distribution function, which
doesn’t explicitly depend on the number of data points: smooth cnormal . Like smooth
cumul , you need to supply two columns in the using directive: the first for the position
of each measurement, the second for the weight of each point. With smooth cnormal ,
gnuplot sums the weights and then divides the sum by the total number of data points
in the current data set. The following two commands are therefore equivalent (assum-
ing that the variable n holds the number of records):

[sorce]
plot "data" u 1:(1.0/n) smooth cumul
plot "data" u 1:(1.0) smooth cnormal

The advantage of smooth cnormal is that you don’t need to know and supply the num-
ber of data points explicitly. Nevertheless, the second parameter in the using directive
must be there!

==== 3.5.3 Deduping repeated entries

The last two smoothing methods available are less sophisticated. When using smooth
unique on a data set consisting of (x,y) coordinate pairs, gnuplot first sorts the points
in ascending order on their x coordinates. It then replaces all points that have the
same x coordinate with a single point that has the same x coordinate, but whose y
coordinate is the average over all the y coordinates of such points.

The smooth frequency method works the same way, except that it replaces the y
coordinate with the sum of the y coordinates of all the affected points. This isn’t very
useful by itself, but it can be used to construct histograms of point distributions—I’ll
show you how to do that when we revisit this topic in chapter 13.


=== 3.6 Summary

The plot command is the most important gnuplot command. Not only does it gener-
ate plots of functions and data, but it also can apply arbitrary transformations to the
data as it’s being plotted, and it can perform a variety of operations to interpolate or
approximate the data. We also looked at the way gnuplot handles mathematical
expressions and at its built-in functions.

Next, we’ll take a closer look at data files and data file formats. You’ll see how gnu-
plot reads data from files and learn more about accessing column values in conjunc-
tion with inline transformations.


[[part2]]
== Part 2 Creating graphs

This part explains in detail gnuplot’s various options and features that 
you’ll use all the time when preparing graphs and figures. 

<<ch04, Chapter 4>> discusses file formats of data files and the different 
pieces of information that gnuplot can extract from them. 

<<ch05, Chapter 5>> covers a number of supplemental topics. Very important 
is an introduction to gnuplot’s string data type, which not only is essential 
when you want to add labels and explanations to a graph, but also is used in 
gnuplot’s macro facility and as gnuplot’s only complex data type. This 
chapter also explains how you can facilitate repetitive tasks through inline 
loops. 

<<ch06, Chapter 6>> provides an overview and catalog of all the different 
styles that are available to represent data. 

<<ch07, Chapter 7>> introduces all kinds of decorations that can make a 
graph more informative. You’ll learn about arrows, text labels, and ways 
to customize a graph’s legend. 

<<ch08, Chapter 8>> describes how to control the way axes and tic marks are 
drawn. The chapter also explains how to handle time-series data and how to 
use calendar dates as tic labels.


[[P055]][[ch04]]

== Chaper 4 Managing data sets and files

This chapter covers

•  Data-file formats and options
•  Managing structured data sets
•  Accessing columns and pseudocolumns
•  Pseudofiles and input/output redirection
•  Metadata in data files

Working with data is what gnuplot is all about. Data is usually presented to gnuplot
as files, and in this chapter you’ll learn a range of useful tricks that can make you
more productive when working with gnuplot.

We’ll begin with a review of gnuplot’s standard file format and discuss options
to modify its defaults. We’ll then look at some special gnuplot syntax to pick out
only parts from larger files. This is required when dealing with data sets that are
larger or more complicated than the straightforward ones you’ve encountered so
far, and it’s often useful.


[[P056]]
Next, we’ll systematically consider all the ways you can access columns—in par-
ticular, in conjunction with inline transformations. In the process, you’ll also
encounter pseudocolumns, which are synthetic columns that gnuplot automatically pro-
vides when reading a file. Pseudocolumns hold useful information (such as line num-
bers) and often come in handy when you’re constructing inline transformations.
Then we’ll turn to files that aren’t: pseudofiles are data sources that don’t live on the
disk but that you can treat almost as if they were regular files.

But data files often contain information beyond the actual data that goes onto a
plot. Such metadata typically consists of textual information that you may want to place
onto a plot in the form of text labels. In this chapter, where we talk about data files in
general, we’ll merely summarize the kind of metadata that gnuplot can take from a
file and use in a plot. The details will follow in their proper context when we discuss
how to handle text labels and similar auxiliary information in a plot in chapters 6
through 8.


=== 4.1 Quickstart: the standard data-file format

Data is usually fed to gnuplot as plain text in a simple, whitespace-separated format:
gnuplot neither uses nor requires special proprietary binary formats or weird markup.
Nor do you need to use special tools or libraries to generate data that constitutes suit-
able input for gnuplot.

Input files may also contain comments, text strings, and other information, in
addition to the data. Furthermore, many aspects of this format can be changed
through options. We’ll consider each of these topics in turn.

By default, gnuplot data files are text files that contain data in whitespace-
separated columns, with one line per record. This is a natural tabular format—basi-
cally, the way you would lay out information in a spreadsheet or the way it would result
from a database query. Listing 4.1 shows the beginning of a data set with information
on customer orders as received by an online retailer. There’s a lot of information in
such a file; in particular, the relationships between different columns are often inter-
esting. Figure 4.1 shows four different plots, using different plot types, based on this
file. It includes a time-series plot of the number of orders received per day, a histo-
gram of the number of items per order, and a scatter plot investigating the relation-
ship between the weight of an order and its value. The last panel in figure 4.1 consists
of a parallel-coordinates plot: a special graphical technique to identify relationships in
multivariate data sets. (For the sake of completeness, the commands to generate fig-
ure 4.1 are given in listing 4.2. Don’t worry if you don’t understand all this yet; we’ll
cover these commands in the chapters to come.)


.Listing 4.1 Incomplete generic data file—see figure 4.1 (file: orders)
[source]
    # ID Date CustomerID ItemCount Weight Value ShipMethod
    oid0012 2014-12-01 cid59 2 2.13 11.39 1-Regular
    oid0014 2014-12-01 cid61 4 7.11 15.44 0-Ground
    oid0015 2014-12-01 cid30 2 2.33 11.11 0-Ground
    oid0025 2014-12-01 cid87 4 4.48 16.55 2-Express
    oid0034 2014-12-01 cid08 4 4.35 16.95 1-Regular
    ...


[[P057]]

.Figure 4.1
image:https://drek4537l1klr.cloudfront.net/janert2/Figures/04fig01_alt.jpg[]

Figure 4.1 Different types of graphs, all based on a single data file. Clockwise from top left: a
time-series plot of the number of orders per day, a histogram showing the distribution of the number
of items per order, a parallel-coordinates plot of several order attributes (with ground-shipping
orders highlighted), and a scatter plot of order value versus order weight.

.Listing 4.2 Commands for figure 4.1 (file: orders.gp)
[source]
    unset key
    set multiplot layout 2,2 margins 0.06,0.95,0.085,0.95 spacing 0.075,0.1
    # --------------------
    set xtics 2,2
    set mxtics 2
    set label 1 "Orders per Day" at 8,3
    plot [1:14] "orders" u (strcol(2)[9:10]+0):(1) s f w lp pt 7
    set xtics 1
    unset mxtics
    # --------------------
    set label 1 "Histogram:\nItems per Order" at 3.5,50
    plot [0:7] "orders" u 4:(1) s f w boxes
    # --------------------
    set label 1 "Value vs Weight" at 4,7
    plot "orders" u 5:6 w p pt 6
    # --------------------
    set xtics ( "Date" 1, "Items" 2, "Weight" 3, "Value" 4, "Ship" 5 )
    unset ytics
    set style parallel lw 1
    set linetype 1000 lc "0xff000000"
    ship(c) = 0+strcol(c)[1:1]  #<== Returns the shipping method as an integer
    unset label 1
    plot [1:5] "orders" u (strcol(2)[9:10]+0):4:5:6:(ship(7)) w parallel lt 10,
    ➥    "" u (strcol(2)[9:10]+0):4:5:6:(ship(7)):(ship(7)==0?1:1000)
    ➥    w parallel lc var
    unset multi


[[P058]]

==== 4.1.1 Comments and header lines

Lines beginning with a # are considered comment lines and are ignored. You can also
instruct gnuplot to ignore the first n lines of a file by using the skip directive in the
plot command:

[source]
plot "data" skip 2 using 1:2

Now gnuplot will discard the first two lines of the file, regardless of whether they’re com-
mented out. This is a convenient way to get rid of header lines without having to com-
ment them out explicitly.

TIP: You can use the new skip keyword to discard the first n lines of a file as
it’s being plotted.


==== 4.1.2 Selecting columns

You can pick out any column and plot its values against any other column by means of
the using directive. If no using directive is found, gnuplot plots the first column
against the line number; if only a single column is specified, gnuplot plots that col-
umn against the line number.

For the most part, input-file parsing with gnuplot is very robust and works without
much tinkering. One good piece of advice is to always specify all required columns
explicitly via the using directive. If this is done, gnuplot silently skips any garbage
(fields it can’t parse) in the file, treating them as missing values. If you rely on the
default columns (without the using directive), gnuplot will instead silently bail when
it encounters an unparsable field. This is most likely to happen when you’re doing
casual work with small files containing only two columns, and it can sometimes lead to
mysterious failures. My advice: make it a habit always to specify all columns with using .

TIP: If you specify all columns to plot explicitly in the using directive, gnu-
plot will correctly parse even files that are partially garbled or that contain
garbage.



[[P059]]
Time and date information in a data file constitutes a special case. Gnuplot provides
special facilities to parse timestamps, which we’ll discuss in detail in section 8.4.2. Do
not attempt to parse time and date information yourself—use the appropriate
options! ^1^

=== 4.2 Managing structured data sets

Sometimes data sets have more internal structure than the simple one-record-per-line
model you’ve seen so far. Two cases in particular are reasonably common and must be
dealt with: files containing data blocks—that is, different data sets one after another in
a single file—and files containing records that span several lines each. Let’s look at
how to handle each case in turn.


==== 4.2.1 Multiple data sets per file: index

Here’s a common scenario: monitoring web traffic across multiple hosts. A script logs
in to each host, pulls the log files for the last few days, summarizes the hits per day,
and writes the results to an output file before moving on to the next host. You want to
use gnuplot to look at the contents of the resulting file.

^1^
In listing 4.2, I chose to manipulate the date value explicitly using string functions, but only because in the
crowded multipanel figure, I needed to exert finer control over the appearance of the tic marks.

.Plain text as data format
*****
Using text files as primary data stores has a number of advantages: you don’t need
special tools to generate or read them, and it’s easy to write scripts to pre- or 
post-process them. If they’re large, it’s simple to compress them. And if necessary,
you can even load them into any text editor (or a spreadsheet!) and manipulate them
by hand.

Furthermore, text files are largely portable across most current computer architec-
tures (so that files generated on Unix, say, can be opened and read on Windows)—
except for the choice of the linebreak indicator (newline character). Gnuplot expects
lines in input files to be terminated by whatever the local operating system (or rather,
the local C library) considers the “native” newline character. If you encounter prob-
lems reading files generated on a different platform, try converting newlines to the
local format. (The same argument applies to the files gnuplot writes: lines are termi-
nated with the native newline character on the given system.)

Gnuplot string handling is based around Unicode and UTF-8. We’ll have more to say
about both topics in the sidebar in section 5.1 in the next chapter.

Gnuplot currently does not have built-in support for data files in a hierarchical or
markup format, such as XML, JSON, or HDF5. If you want to plot such data sets, you’ll
have to extract them to plain, column-oriented text files first.
*****


[[P060]]
The important issue here is that the resulting file doesn’t contain individual data
points, but entire data sets: one for each host. Each data set spans several rows: one for
each day. The file might look something like the one shown in the following listing. 2

Listing 4.3 Data file containing several sets (file: traffic1)

    # Day   Hits
    0       101    | host=main
    1       100    |
    2       102    |
    3       103    |

    0       25     | host=staging
    1       26     |
    2       27     |
    3       28     |

    0       5      | host=test
    1       4      |
    2       3      |
    3       2      |

This data file looks as if several distinct data files (for different hosts) had been
appended to one another. Because this situation is sufficiently common, gnuplot pro-
vides a way to handle it. But first, we need to look at the meaning of blank lines in a
data file.

For gnuplot, blank lines in a data file are significant. A single blank line indicates a
discontinuity in the data. The data above and below the blank line is treated as belong-
ing to the same data set (and is shown using the same line color and line style), but no
connecting line is drawn between the records before and after the blank.
In contrast, double blank lines are used to distinguish data sets in the file. Each set
can be addressed in the plot command as if it were in a separate file using the index
directive to plot . Table 4.1 summarizes these differences.

^2^
The data in this data set is dorky. This is intentional. I want to make sure you can distinguish data from each
of the three hosts by looking at the data (the number of hits) itself. This will be important when we compare
this data set with the one in listing 4.4.

Table 4.1 Meaning of blank lines in data files
[opts="header,autowidth",frame=ends,grid=rows]
|===
|                   |Meaning
|Single blank line  |Indicates a discontinuity in the data. No connecting line is drawn between
points separated by a single blank line.

|Double blank line  |Indicates different data set (or data blocks) in the same file. Different data
blocks can be selected using the index keyword with the plot command.
|===


[[P061]]
The index directive follows immediately after the filename in the plot syntax and
takes at least one argument specifying which data set to select from the file. The argu-
ment can be either numeric or a string.

.SELECTING DATA SETS BY POSITION
*****
*****
A numeric argument is treated as an index into an array, following the C language
convention of counting from 0 (zero). Therefore, to plot only the traffic for the stag-
ing site, you can use

[source]
plot "traffic1" index 1 using 1:2 w linespoints

This picks out only the data set with index 1 and shows it with linespoints .

The index directive can be abbreviated as i . It can take up to three arguments,
separated by colons (similar to the syntax familiar from using ):

[source]
index {int:start}[:{int:end}][:{int:step}]

If only a single argument is given, only the corresponding data set is plotted. If two
arguments are present, they’re treated as the index of the first and last data set (inclu-
sive) to be shown: plot "data" index 2:5 plots four data sets total. A third argument
is interpreted as a step size. Accordingly, plot "data" index 2:5:2 plots only the data
in sets 2 and 4. Only the first argument is mandatory.

.SELECTING DATA SETS BY NAME
*****
*****
Gnuplot 5 offers a new way to pick out a single data set from a file: if the data set is
preceded by a comment line that includes the ID or name of the data set, you can use
this identifier in the index directive. The comment character and any leading
whitespace are removed; the following characters are treated as the “name” of the
data set that follows the comment line in the file.

Referring again to the file shown in listing 4.3, the following two commands are
equivalent:

[source]
plot "traffic1" index 1 using 1:2 w linespoints
plot "traffic1" index "host=staging" using 1:2 w linespoints

Only a single data set can be selected this way. If the “name” given is ambiguous, then
gnuplot plots the first data set in the file that matches. (Matching is case-sensitive.)
Referring again to listing 4.3, the following three commands are both unambiguous
and will result in an identical plot:

[source]
plot "traffic1" index 2 using 1:2 w linespoints
plot "traffic1" index "host=t" using 1:2 w linespoints
plot "traffic1" index "host=test" using 1:2 w linespoints

In contrast, plot "traffic1" index "host" u 1:2 w lp is ambiguous, and gnuplot will
plot the first matching data set in the file (which happens to be the one for the main
host): that is, the first data set in the file.


[[P062]]

==== 4.2.2 Records spanning multiple lines: the every directive

Whereas the index directive lets you select consecutive sets of data from a file, the
every option, which we discuss now, solves a different problem. Consider the same
arrangement of hosts as in the previous section, together with an auxiliary script that
gathers traffic data from all hosts and dumps it into a single file. But in contrast to the
previous scenario, the script now retrieves only a single day’s worth of traffic and
appends it to the output file before moving on to the next host. After a few days, the
output file might look like the one shown next.

Listing 4.4 Data file containing interleaved data sets (file: traffic2)

    # Day   Hits
    0       101       <== host=main
    0        25       <== host=staging
    0         5       <== host=test
    1       100
    1        26
    1         4
    2       102
    2        27
    2         3
    3       103
    3        28
    3         2

Here, each record for a single day spans three lines: one for each host. (Compare this
file against the one in listing 4.3: the data in both is exactly the same!) If you want to
plot the traffic for each host separately, you can use the every directive to pick up only
the relevant subset of all lines. The following command, for instance, plots only the
traffic for the staging host:

[source]
plot "traffic2" every 3::1 using 1:2 with lp

Using the every directive, you can control how you step through individual lines. The
syntax looks similar to the syntax used for index , except that individual arguments are
separated by two colons. Unfortunately, this similarity is somewhat deceiving, because
the order of the arguments isn’t the same for every as it is for index :

[source]
every {int:step}[::{int:start}[::{int:end}]]

The first argument is the increment, followed (optionally) by the first and last line
numbers. Line numbers are counted from zero. Don’t forget to use double colons
with the every directive: single colons won’t generate an error message but will lead
to strange and hard-to-predict behavior. ^3^


^3^
I’m simplifying here. Gnuplot recognizes an additional concept known as a data block in a file: a set of consec-
utive lines delimited from each other using single blank lines. Data blocks are functionally redundant with data
sets (delimited by double blank lines). Data blocks can be selected through additional arguments to the every
directive, which are placed between the double colons. This is why it’s not illegal to use single colons in this
context. If you want to know more about data blocks, check the standard gnuplot reference documentation.

[[P063]]
You can play other tricks with the every feature. For instance, the following com-
mand skips the first two lines of every data set in the file:

[source]
plot "data" every ::2 using 1:2

This is similar to, but not quite the same as, the skip facility: skip only discards lines
at the beginning of the file, not at the beginning of every data set in the file. More-
over, every only applies to data lines, whereas skip also skips comments. Feel free to
devise other creative uses for the every keyword!

TIP: I recommend that you use a file format suitable for the index facility
when you need to combine several data sets in a single file. The every key-
word is a bit of a legacy feature, and data handling based on index is more
robust and transparent.


=== 4.3 File format options in detail

You can control several aspects of the file format using options. For instance, you can
choose additional characters to indicate comment lines in data files. In this section,
we look at the fine points of input-file formats: numbers, missing values, comments,
and strings.


==== 4.3.1 Number formats

Gnuplot can read both integers and floating-point numbers, as well as numbers in sci-
entific notation (strictly speaking, scientific E notation): a floating-point number, followed
by an uppercase or lowercase character e , followed by an integer, which is interpreted
as a power of 10. The numeric value of such a field is obtained by multiplying the
floating-point part by 10 raised to the appropriate power. A couple of examples will
make this clear: in scientific notation, the value 35,100 is encoded 3.51e4 ; the value
-0.0001 is written -1e-4 .

You can also allow the letters d and q (both uppercase and lowercase) instead of e
or E for Fortran D and Q constants, by setting

[source]
set datafile fortran

This option is off by default, because it requires additional parsing; it should be
enabled only if needed.


==== 4.3.2 Comments

You can include comments in a data file on lines starting with the comment character
( # ). The line must start with the comment character and is ignored entirely. If gnuplot
encounters a # in any location other than the first one in the line, it isn’t interpreted
as a comment character, and any text following it is interpreted as additional data.
This isn’t a problem as long as only columns preceding it are specified in the using
declaration of the plot command.


[[P064]]
You can make gnuplot interpret additional characters as comment characters by
using the set datafile commentschars command:

[source]
set datafile commentschars ["{str:chars}"]

For example, to tell gnuplot that the exclamation point indicates a comment line in a
data file, you can say

[source]
set datafile commentschars "!"

The string can contain any number of characters, each of which is interpreted as a
comment character if found at the beginning of a line. Resetting this option to a new
value overrides all previous settings.


==== 4.3.3 Field separator

By default, fields (columns) are separated from one another by whitespace, which
means any number of space or tab characters. You can change the field separator
using the set datafile separator command:

[source]
set datafile separator [ "{str:char}" | whitespace | tab | comma ]

You can use the symbolic names whitespace , tab , and comma , or specify a string of
characters. If you provide an explicit string, then each character in the string will be
treated as a separator character.

For example, to make both the colon and the pipe character individually be field
separators, you’d use

[source]
set datafile separator ":|"

To let gnuplot parse comma-separated ( CSV ) files, either of the following two com-
mands will work:

[source]
set datafile separator ","
set datafile separator comma

Separator characters aren’t interpreted as separators when inside quoted strings:
quoted strings are always interpreted as the entry of a single column.

You can specify several characters, each of which by itself is interpreted as a field
separator. It isn’t possible to specify a multicharacter pattern as a field separator. (This
isn’t true when using whitespace .) To reset to gnuplot’s default behavior, you can
issue set datafile separator whitespace or set datafile separator so that col-
umns are split on whitespace again.


[[P065]]

==== 4.3.4 Missing values

You can use the set datafile missing command to specify a string to be used in a
data file to denote missing data:

[source]
set datafile missing ["{str:str}"]

An example is set datafile missing "NaN" , which interprets the IEEE floating-point
indicator NaN (“not a number”) as a missing value. There’s no default value for this
parameter.

Having an indicator for missing values is important when you’re using a
whitespace-separated file format: if the missing value were left blank, gnuplot
wouldn’t recognize it as a column value and would use the value from the next column
instead.

TIP: In a whitespace-separated format, you must use an explicit missing-value
indicator. It isn’t permissible to leave a missing value blank.

The interpretation of missing values in a data set depends on the precise syntax of the
using directive. Let’s look at two examples. The following listing shows a file contain-
ing a missing value.

Listing 4.5 Data file containing a missing value (file: missing)

    1   10
    2   10
    3   11
    4   12
    5   NaN
    6   11
    7   11
    8   10
    9   10

First, let’s assume that datafile missing has been set to "NaN" . If you now plot this
file using

[source]
plot "missing" using 1:2 with linespoints

then the fifth record (the one containing the missing value) is ignored and the data is
plotted with one continuous, unbroken line. In contrast, if you use the command

[source]
plot "missing" using 1:($2) with linespoints

or if the datafile missing option doesn’t equal "NaN" (either because this option is
undefined or because it’s been set to a different value), then gnuplot also ignores the
fifth record but treats it as a blank line and therefore doesn’t draw a connecting line
across the gap (see figure 4.2).


[[P066]]

==== 4.3.5 Strings in data files

Gnuplot can read and process text fields found in input files. A valid text field can be
any string of printable characters that doesn’t include blank spaces. If the string con-
tains blanks, it must be enclosed in double quotes to prevent gnuplot from interpreting
the blanks as column separators. (Single quotes don’t work!) The enclosing double
quotes are stripped off and aren’t part of the field’s value. If a field contains whitespace
and is protected by enclosing double quotes, it must not contain double quotes as part
of the string value. If you need to use quotation marks and blanks in the same string,
you must use single quotes inside the string and double quotes to enclose the entire
field. If you’ve designated a non-whitespace character as a column separator using set
datafile separator (see the previous section), the same considerations apply: strings
containing the separator must be protected with double quotes. Listing 4.6 shows some
ways you can use strings in a data file.

TIP: You can include strings in data files. If the strings contain whitespace,
they must be enclosed in double quotes. Single quotes won’t work.

    # Year Title
    1965 Yesterday                   #<== Bare string without blanks
    1966 "Yellow Submarine"          #<== Blanks require double quotes.
    1969 "Maxwell's Silver Hammer"   #<== Single quote inside double quotes

For more information on string handling, check section 5.1 in the next chapter.
Listing 4.6 Strings in data files need quotes only if they contain whitespace.

.Figure 4.2
image:https://drek4537l1klr.cloudfront.net/janert2/Figures/04fig02_alt.jpg[]

Figure 4.2 Gnuplot treats missing values differently, depending on the value of the
datafile missing option and the plot syntax. The data file is shown in listing 4.5.


[[P067]]

=== 4.4 Accessing columns and pseudocolumns

In chapters 2 and 3, you saw how to access columns in using directives. Here, you’ll
review what you know already and learn some new features. Table 4.2 summarizes all
methods of accessing columns in gnuplot.

Table 4.2 Column-access methods, pseudocolumns, and column-access functions. (An entry in the first column
in italics is a placeholder for any matching value. Non-italic entries must be used verbatim.)

[opts="header,autowidth",frame=ends,grid=rows]
|===
|Specifier            |Example   |Description
|number               |*using 1:2*|
Accesses a column by its horizontal position in the file.

|string               |*using "Height":"Weight"*|
Accesses a column by its name as given in
the first non-comment line in the file.

|0                    |*using 0:2*|
Pseudocolumn, containing the record
number (starting from zero) in the current
data set.

|-1                   |*using -1:2*|
Pseudocolumn, containing the line number
(starting from zero). Reset by a single blank
line.

|-2                   |*using -2:2*|
Pseudocolumn, containing the index (start-
ing from zero) of the current data set. Reset
by a double blank line.

|(expression)         |*using 1:($2+$3)*|
Inline transformation. The expression in
parentheses is evaluated, and the value of
the expression is plotted. The column val-
ues for the current record are available
through the shorthands $1, $2, and so on.

|(constant)           |*using 1:(1)*|
Same as the previous, but the expression is
a constant, independent of the values in the
data file.

|(column(expression)) |*using 1:(column($3+1))*|
The argument to the column() function
should be an expression that evaluates to
an integer. The value of this expression is
interpreted as a column number, and the
column() function returns the value of the
current record for the desired column as a
numeric value. (For example, column(3)
returns the current value of the third column
as a numeric value.)

|(column(string))     |*using 1:(column("Weight"))*|
If the argument to the column() function is
a string, it’s interpreted as the name of a
column (as given in the first non-comment
line in the data file). The column() func-
tion returns the value of the current record
for the desired column as a numeric value.

|(stringcolumn(expression))
or (strcol(expression)) |*using 1:(stringcolumn( $3+1))*|
The argument to the stringcolumn()
function should be an expression that evalu-
ates to an integer. The stringcolumn()
function returns the value of the current
record for the desired column as a string
value.

|(stringcolumn(string))
or (strcol(string)) |*using 1:(stringcolumn( "ID"))*|
If the argument to the stringcolumn()
function is a string, it’s interpreted as the
name of a column (as given in the first non-
comment line in the data file). The
stringcolumn() function returns the
value of the current record for the desired
column as a string value.

|(timecolumn(expression,
formatstring)) |*using 1:(timecolumn(3, "%Y-%m-%d"))*|
Parses a column entry as a timestamp and
returns the corresponding Unix epoch sec-
ond as numeric value. The first argument
must evaluate to an integer, identifying a
column. The second argument specifies a
time format, according to table 8.4 or 8.5.

|(valid(expression)) |*using 1:(valid(2)?$2:$3)*|
The argument to the valid() function
must be an expression that evaluates to
an integer (not a string). The valid() func-
tion returns 1 if the current record for the
identified column is a valid number or zero
otherwise.
|===


[[P068]]

==== 4.4.1 Accessing columns by position or name

Columns are usually accessed by their position in the file (counting left to right, start-
ing at one):

[source]
plot "data" using 1:2

This is convenient for files with only a few columns, but it can also work well for truly
large files, because it’s easy to iterate over numeric column specifiers with gnuplot’s
new inline looping feature. The following command plots columns 2 through 24
against the first column in a single plot (more on this kind of looping construct in sec-
tion 5.4; we’ll treat loops in greater detail in chapter 11):

[source]
plot for [j=2:24] "data" u 1:j

You can also specify a column by name if the data file contains a set of column labels in
the first row of the file (or the data set, if the file contains multiple data sets addressed


[[P069]]
using index ). For example, for the file shown in listing 4.7, the following commands
are equivalent:

[source]
plot "grains" skip 1 using 1:2
plot "grains" using 1:"Wheat"
plot "grains" using "Year":"Wheat"

Listing 4.7 Column names in a data file (file: grains)

    Year    Wheat   Barley  Rye     <== Not a comment line!
    1990    8       6       14
    1991    10      5       12
    1992    10      7       15
    1993    11      5       13
    1994    9       6       12

Observe that the line containing the labels must not be a comment line. Furthermore, if
any of the entries in the using phrase are strings, the entire first line is interpreted as
labels and isn’t included in the plot.


==== 4.4.2 Pseudocolumns

Gnuplot supplies three pseudocolumns for each file it reads. They’re numbered 0 , -1 ,
and -2 .

The pseudocolumn 0 contains the line number in the current file (or data set),
starting at zero, without counting any comment, label, or skipped lines. You can also
access this column in inline transformations using $0 . (This counter is reset to zero
when it encounters the double blank line that separates data sets.)

The pseudocolumn -1 contains the line number, starting at zero, and is reset by a
single blank line. (This is relevant if the data file is in grid format—see appendix C for
details.)

The pseudocolumn -2 contains the index of the current data set within the data file.
When a double blank line is encountered in the file, the line number (corresponding
to the value of pseudocolumn 0 ) resets to zero, and the index is incremented.
You can use these pseudocolumns, for instance, like this:

[source]
plot "data" using 0:1   #<== Plots the first column against the line number
plot "data" using 1:-2  #<== Plots the data set index against the first column

==== 4.4.3 Column-access functions

You can use the column() function whenever an expression has become too compli-
cated for the using syntax, or in contexts where the $ shorthand isn’t available. The
function evaluates its argument to a column identifier and returns the value of the
identified column as a numeric value. (There is also a stringcolumn() [or strcol() ]
function that returns the column value as a string. See the next chapter for more
information on strings.)


[[P070]]
The argument to column() (or stringcolumn() ) can be either numeric or a
string. A numeric argument is evaluated into a column number. A string argument is
only suitable if the file contains a non-comment header line with column identifiers
(as in listing 4.7): if that’s the case, the argument should evaluate into one of the col-
umn names. An error results if no column with the supplied identifier can be found.

The column() function and pseudocolumns work well together. For instance, this
example plots all values from a file but adds a constant vertical offset of 1.5 to values
from different data sets (to separate curves from different data sets from each other,
so that you can distinguish them more easily):

[source]
plot "data" using 1:($2 + 1.5*column(-2)) with lines

The following example (found in the standard reference documentation) plots each
data set in a different color (see chapter 9 to learn more about linecolor variable ):

[source]
plot "data" u 1:2:(column(-2)) linecolor variable

.FURTHER COLUMN - ACCESS FUNCTIONS
*****
*****
If a column contains date and time values, then the timecolumn() function may be
useful. It takes two arguments: the first must be an integer identifying a column (it
can’t be a string!), and the second must be a string specifying the format of the time-
stamp in the data file. The function returns the Unix epoch seconds corresponding to
the parsed value as a number. This value may, for example, be formatted into a text
label using the strftime() function.

The format specifiers are based on those used by the strftime() and strptime()
functions from the C standard library. We’ll discuss the handling of date and time
information in section 8.4.2 in the context of time-series plotting; here we present
only a brief preview. Imagine a file containing dates and values like this:

    2014-12-01 3
    2014-12-02 5
    2014-12-05 1

The following command converts the dates in the first column to their corresponding
epoch seconds and uses them as horizontal positions:

[source]
plot "data" u (timecolumn(1, "%Y-%m-%d")):2 w lp

One other function can be useful for inspecting column values: valid() . It returns
true only if the value of the column with column number x is a valid number. You can
use this function to test values from messy files and only plot those that are valid.

=== 4.5 Pseudofiles

Typically, the data rendered by the plot command is read from a file, but in some sit-
uations it makes sense to accept data from a different source. Gnuplot includes a
number of special filenames that you can read from as if they were proper files,
although they don’t exist on any disk.

[[P071]]

As of gnuplot 5, data can be embedded in command files and accessed through a
variable-like identifier called a heredoc. Data can also be read from the command line
interactively and stored in a heredoc—this can be useful when you want to add a few
data points to an existing graph.

On platforms that support pipes, gnuplot can read data from standard input—this
is particularly useful when you’re scripting gnuplot to run in batch mode. When
they’re available, you can also send output to another process via pipes.
Finally, two special filenames let you apply the full flexibility of the using facility to
function plots. Table 4.3 lists all these special filenames and describes their meaning.

Table 4.3 Pseudofiles
[opts="header,autowidth",frame=ends,grid=rows]
|===
|Pseudofile |Description
|"" (empty filename) |Reuses the most recently encountered filename.

|"-"      |Reads from standard input. In an interactive session, reads from 
the command window. (Terminate input with the EOF character or e.)
"+" Generates samples equally spaced x values covering the entire current plot
range.

|"++"     |Generates spaced x and y values covering the entire current plot range. 
(This is the two-dimensional equivalent to "+".) The number of points in the x direc-
tion is controlled by set samples, and the number of points in the y direc-
tion is controlled by set isosamples.

|"< name" |Reads from a subprocess via pipe. ^a^
|"| name" |Writes to a subprocess via pipe. ^a^
|$heredoc |Reads from a heredoc (no quotes around the name).
|===

^a^ Only available on Unix-like platforms.

==== 4.5.1 Reading data from standard input

When given the special filename - (as in: plot "-" u 1:2 ), gnuplot attempts to read
data from standard input, which in an interactive session is the command window.
After you run this plot command, gnuplot shows a prompt at which you can type
data. Finish each line by pressing Enter. Gnuplot will keep prompting for data until
either an end-of-file ( EOF ) character (typically Ctrl-d) is encountered or the character
e is entered on a line by itself.

You can even read data from standard input multiple times within the same plot
command: plot '-', '-' reads data until an EOF character is encountered and then
expects to read more data (for the second “file”) until it finds a second EOF character.
Of course, the data entered at a prompt this way can have multiple columns, from
which you can select some with using ; all the other features of the plot command can
be used as well.


[[P072]]

Although this feature can be used interactively, it’s mostly intended for situations
where gnuplot is used in batch mode as part of larger scripts (we’ll talk more about
that in chapter 11). When used interactively, this feature quickly becomes inconve-
nient, because (as explained earlier) gnuplot doesn’t maintain data sets in memory
and therefore all data has to be manually reentered every single time you want to plot
or replot the graph.


==== 4.5.2 Heredocs

Gnuplot 5 contains a new feature that makes it possible to embed data in a command
file (as opposed to a data file) or to enter data in the command window and store the
data in a variable for the duration of the gnuplot session. This is somewhat of a radical
departure, because traditionally gnuplot never maintained data in memory—data was
read from file every time the plot command was executed. This new feature is
referred to as heredocs because its syntax is modeled after the eponymous feature in
Perl and in Unix shells. (The gnuplot standard reference also calls them data blocks,
but this term is already used in other contexts. I therefore use the unambiguous here-
doc terminology for this feature, which seems justified given that these data structures
are intended to be populated through a corresponding facility.)

.DEFINING AND USING HEREDOCS
*****
*****
You define a heredoc by preceding a variable identifier with a $ (dollar sign), followed
by the << redirection operator and an arbitrary sequence of characters that will mark
the end of the data section:

[source]
$d << EOD

Now follows the actual data section, just as if it was a data file. The data is terminated
by the end-of-data indicator (on a line by itself—the indicator must match exactly).
The entire affair may look like the following listing.

[source]
$d << EOD
1 0.5
2 0.75
3 0.99
EOD

You can now use the heredoc as you’d use a file. In particular, you can plot its contents
(note that there are no quotes around the heredoc identifier):

[source]
plot $d using 1:2

Listing 4.8 could be part of a command file; in this case, it could be loaded (with
load ). Alternatively, it could be entered interactively during a gnuplot session.
Listing 4.8 Defining a heredoc

[[P073]]
Several gnuplot commands that usually write to a file can write to a heredoc,
instead; both set print and set table accept a heredoc identifier (see section 5.3).
This makes it possible to have gnuplot commands “write” to a heredoc from within a
gnuplot session.

No specific commands exist to populate a heredoc from a generic data file or to
persist the contents of a heredoc to disk. In contrast to other information that exists in
the session (such as gnuplot variables), the contents of a heredoc are not saved by the
save command. Using set print and set table , you can circumvent these hurdles
(we’ll come back to this in section 5.3).

A heredoc, once defined, occupies memory. To release these resources, use
the undefine command: undefine $d . Using undefine $* drops all currently existing
heredocs.

.Understanding heredocs
*****
Heredocs are a new and somewhat controversial feature, and some of their aspects
may have changed by the time you read this. Heredocs break with several of gnu-
plot’s longstanding and fundamental design principles. It’s important to understand
how they came about.

Heredocs arose from a desire to embed data in command files, in order to enable
command files that are self-contained and don’t require a separate data file. But
because traditionally the contents of gnuplot command files can be issued without
change at the gnuplot command prompt, the syntax chosen for gnuplot’s heredocs
can be issued interactively, as well. This gives the impression that heredocs are akin
to session variables, but that isn’t how they’re meant to be used.

The result is strangely halfhearted and contradictory. Heredocs live in the session
and occupy memory, just like gnuplot variables—yet they aren’t persisted with save .
Heredocs can stand in for files in the plot and splot commands, in set print and
set table —yet they aren’t intended to be populated from generic data files.

Heredocs break with the tradition that gnuplot doesn’t maintain any memory of the
data: data had to be read from file every time it was used so that gnuplot was state-
less (with regard to data). With heredocs, data lives in the gnuplot session, giving the
impression of a data set or data frame—yet there exist no operations to manipulate
heredocs (in addition to the inability to populate them from a generic data file).

Heredocs are intended to be defined in command files, where they require a special
(albeit simple) syntax, thus breaking with the principle that gnuplot data files are
plain, unstructured, and generic text files.

Ultimately, the problem is that the heredoc design is too flexible and feature-rich for
the intended purpose. What was intended was a static (read-only) data block as part
of a command file—similar to the DATA filehandle in Perl. But the ability to define
heredocs at runtime and to maintain them in the session, independent of file access,
gives the appearance of a general-purpose data structure and invites to be used as
such. But because heredocs were never intended as general-purpose data sets,
some of the functionality you might expect is missing.
*****


[[P074]]

==== 4.5.3 Reading data from a subprocess

On platforms that support input/output redirection, gnuplot can read from a subpro-
cess via a pipe. Let’s say that a.out is a program that prints data suitable for gnuplot to
standard output. The following command runs a.out and captures and plots its output
without accessing the file system:

[source]
plot "< a.out" using 1:2

[source]
gnuplot -e 'plot "< cat measurements" using 1:1; pause mouse keypress'
gnuplot -e 'plot "< cat /dev/stdin" using 1:1; pause mouse keypress'


The < character must always be the first character of the filename, even when reading
from an entire pipeline. For instance, if the output of the first program a.out is piped
through a second program b.out, the gnuplot command is plot "< a.out | b.out" .

You need to watch out for several things when reading from a subprocess like this.
First, keep in mind data might be buffered by the operating system, so that gnuplot
doesn’t plot anything until the buffer is flushed or the process has finished (which is
guaranteed to flush the buffer), at which point gnuplot plots all the data received at
once. If you want to monitor a live stream with data trickling in over time, you need to
use one of the methods from section 11.6. Furthermore, if you attempt to read from
the same subprocess twice—for instance, plot "< a.out" u 1:2, "" u 1:3 —gnuplot
runs the program twice (and you’ll have to wait until both instances complete). Repeat-
ing a plot command (or using the replot command) starts the subprocesses anew.

For these reasons, it’s usually a better idea to write the process output to a file,
which can then be plotted at leisure and as often as necessary. Alternatively, you might
consider running gnuplot itself as a subprocess and piping data to it—we’ll come back
to this idea in chapter 11.


==== 4.5.4 Writing to a pipe

If pipes are available, gnuplot can also write to them. Because gnuplot’s output con-
sists primarily of graphs, this feature is mostly of interest for post-processing image
files. A single example will suffice.

Among gnuplot’s terminals based on the cairo library (see section 10.3), there isn’t
one that can generate files in GIF format. The following sequence of commands uses
gnuplot’s pngcairo terminal to create a graph in the PNG format, which is then piped
through the convert utility from ImageMagick (www.imagemagick.org) to create the
desired GIF :

[source]
set terminal pngcairo
set output "| convert - graph.gif"
plot sin(x)
set output

The pipe character sends gnuplot’s output to a pipe; the dash instructs convert to
read from standard input. The final set output is necessary to flush gnuplot’s output
channel. (See chapter 10 for additional information.)

[[P075]]

==== 4.5.5 Generating data

When gnuplot plots a function (as in plot sin(x) ), gnuplot evaluates the function on
a set of equally spaced points, which are evenly distributed over the entire plot range.
The number of points is controlled by the set samples option (see section 3.1), and
the plot range is either given (in square brackets) as part of the plot command (see
chapter 2) or specified using set xrange (see chapter 8).

Reading from the special filename "+" is like reading from a file that contains
exactly those x positions at which the function would be evaluated, in a single column.
In other words, the following two commands are equivalent:

[source]
plot sin(x)
plot "+" using 1:(sin($1)) w l

In the second command, you must specify the with lines style explicitly, because—as
far as gnuplot is concerned—you’re plotting data (not a function), and hence the
default data style applies (see chapter 9).

The special file "++" is the two-dimensional equivalent of "+" . It generates regu-
larly spaced positions on a two-dimensional grid as used by the splot command. (See
appendix C for more information about splot .)

You probably won’t need the "+" and "++" pseudofiles often—they’re special-
purpose tools for handling certain edge cases. Sections 6.3.4, 8.2.2, 9.1.5, and F.5.1 dis-
cuss potential applications.


=== 4.6 Metadata in data files

Gnuplot can read a variety of (mostly textual) information from a data file in addition
to the data points being plotted. We haven’t discussed gnuplot’s string-handling facili-
ties in detail yet (we’ll do so in the next chapter), nor have we introduced the context
in which the need for metadata arises (we’ll do so in chapters 7, on decorations that
can be placed on a plot, and 8, on axes), so this section is mostly a teaser.

Strings can be read from a data file and placed directly onto a plot using the with
labels style (see section 5.1.3 in the next chapter). With the ticslabels() family of
functions (see chapter 8), you can use strings read from a file as labels on the axes of a
plot (see section 8.3.5 and the examples in section 13.4). Special rules apply if the data
in the file represents calendar dates and times (see the section on time series in 8.4.2).
Finally, you can use the values of the first line in an input file (the column labels) as
entries in the legend or key of a plot (see section 7.4.5). Table 4.4 summarizes all the
metadata that can be found in a data file.


[[P076]]


=== 4.7 Other file formats

In passing, let’s mention some other file formats used by gnuplot that you haven’t
seen. It’s possible to parse more complicated record formats than the ones we’ve dis-
cussed so far by passing a format string, which describes the format of each record, to
using . The format string must be compatible with the scanf() family of functions,
familiar from the standard C library. Check the standard gnuplot reference documen-
tation if you believe this is relevant to you; but given the well-known fussiness of
scanf() , this is rarely the best path forward. If a file has a format that can’t be parsed
normally by gnuplot, it’s usually a better idea to convert it to a gnuplot-compatible for-
mat using a small conversion program in Perl, awk, or a similar tool.

Date and time strings are handled in a special way: don’t attempt to parse them
using a scanf() -like format string. Use the timecolumn() function (see table 4.2) or
the special commands described in section 8.4, instead, to parse and process such
data.

TIP: Time and date information constitutes a special case. Use gnuplot’s ded-
icated facilities for handling such data (see section 8.4.2).

In addition to the regular, column-oriented, tabular file format you’ve seen up to this
point, gnuplot can also handle data on a two-dimensional grid. There are two formats
to choose from: one that contains the data values together with the coordinates of the
grid points, and a packed “matrix” format. We’ll discuss them in appendix C on multi-
dimensional plots.

Table 4.4 Metadata in data files
[opts="header,autowidth",frame=ends,grid=rows]
|===
|                       |Section |Description
|#                      |4.3.2 |If found at the beginning of a line, treats the entire line as a comment.
|plot skip n            |4.1.1 | Skips the first n lines.
|index name             |4.2.1 | Identifies a data set in a file by a unique identifier in the comment line immediately preceding the data block.
|Named column           |4.4.1 | Identifies a column by a name, which is found in the first non-comment line of the file.
|Key entry explanations |7.4.5 | Reads explanations to be used in the graph’s key from the first non-comment line of the file.
|with labels            |6.3.5 | Reads text labels from the data file and places them on the graph.
|xtics(col)             |8.3.5 | Reads tic labels from column col in the data file.
|set xdata time         |8.4.2 | In time-series mode, reads and parses appropriately formatted strings as timestamps.
|===

[[P077]]
Finally, gnuplot can read certain binary packed file formats. Again, if this is rele-
vant to you, I suggest the standard gnuplot reference documentation. Unless you have
particular needs, I recommend that you stick with text files.


=== 4.8 Summary

Gnuplot is all about graphing data, and in this chapter we covered how to get data
into gnuplot. You learned about data files and formats. Gnuplot reads data from text
files, which are portable, easy to generate, and easy to modify.

You learned how to keep multiple data sets in a single data file and select from
them with index , and how to select a subset of records with every . You also learned
different ways to identify and access individual columns in a data file.

We discussed pseudofiles, which are data sources that don’t live on the disk, and we
also mentioned that gnuplot can read data from another process (if it’s installed on a
platform that permits it). Finally, we took a brief look at other information you can
find in a data file and mentioned alternative file formats in addition to the whitespace-
separated columns we’ve concerned ourselves with exclusively until now.

This concludes what you need to know to get started doing data analysis using gnu-
plot. In the next chapter, we’ll turn away from gnuplot’s core functionality of dealing
with data and generating plots, and instead talk about a host of useful features that
make your work with gnuplot easier.


[[P078]][[ch05]]

== Chaper 5 Practical matters: strings, loops, and history

This chapter covers

•  Strings and textual data
•  String operations and macros
•  Inline loops
•  Internal variables and the stats command
•  Command history

In the previous chapters, we looked at ways to manipulate and visualize data using
gnuplot, which is the core task that gnuplot was designed for. In this chapter, we’ll
sidestep the presentation of gnuplot’s graphic capabilities and introduce some
foundational features that will be useful later.

First you’ll learn about strings and textual information. Although gnuplot is pri-
marily a tool for creating graphics, textual labels are nevertheless very important: it’s
only through information expressed in a human language, which tells the user
what is displayed, that a graph receives meaning and semantics. In addition, strings
are used in and by gnuplot as a general-purpose data structure—that’s another rea-
son to pay attention to them.


[[P079]]
We’ll then introduce some facilities that make it easier to work with gnuplot: inter-
nal variables allow you to inspect gnuplot’s internal state and use this information to
adjust options accordingly; and inline loops can help significantly reduce the number
of keystrokes required when your commands contain repeated operations (for
instance, when dealing with a large number of files). As a last topic, we’ll introduce
gnuplot’s command history.

Although they don’t produce graphs themselves, the features introduced in this
chapter all help you be more productive with gnuplot. The effort to learn them will
pay off!

=== 5.1 Strings

In this section, we’ll first look at the way strings are defined and then introduce opera-
tions that gnuplot can perform on strings, before moving on to some example appli-
cations that demonstrate what you just learned. This section concludes with a lengthy
digression on Unicode and UTF-8 : this may sound boring, but it is, in fact, extremely
good news, because it greatly simplifies the handling of mathematical symbols and
other special characters.

Although it may not be apparent yet, strings are tremendously important in gnu-
plot, because they serve three different purposes:

•  Strings as descriptions—Strings have an obvious use as textual descriptions. This
is no small matter. Only through textual description can you convey semantic
information: what the data means that’s shown in the graph. A graph without
labels is mute.

•  Strings as data structures—Strings are gnuplot’s only complex data structure and
are therefore used (or abused) as a general-purpose container type.

Whitespace-separated strings of tokens frequently stand in for proper arrays,
and functions exist to extract an individual token by its index (mimicking the
access of an array element). In the absence of proper alternatives, strings are
the only iterable data structure required by loops.

•  Strings as macros and functions—Strings containing gnuplot commands can be
executed at runtime. In the absence of subroutines, strings are one way to bun-
dle several commands into a single callable unit. Moreover, because strings can
be built up at runtime, it’s possible to use them in a fashion resembling closures
in certain dynamic programming languages.

We’ll pursue some of the more creative uses for strings further in chapters 11 and 12.
In this chapter, we’ll lay the foundations by treating strings as holders of textual infor-
mation. We’ll also give a preview of their array-like application when we introduce
inline loops in section 5.4.


[[P080]]

==== 5.1.1 Quotes

You can assign a string constant to a gnuplot variable. String constants must be
enclosed in quotes—either single or double. The difference is that escaped control
characters (such as \n ) are interpreted as control characters within double-quoted
strings but are treated literally (that is, not interpreted) inside single-quoted strings
(reminiscent of the behavior of Perl strings, for instance).

A double-quoted string can contain single quotes; to obtain a double quote inside
a double-quoted string, it must be escaped with a preceding backslash. Within single-
quoted strings (which don’t recognize the backslash as an escape operator), you can
get a single quote by doubling it:

[source]
a = 'This is a string.'
b = "First Line\nSecond Line."
c = "Double quote\" escaped."
d = 'Single quote'' escaped.'

TIP: Backslash-escaped control characters are interpreted as control charac-
ters inside double-quoted strings but are treated literally inside single-quoted
strings.


==== 5.1.2 String operations

Strings can be assigned to variables just as numbers can. Strings are converted to num-
bers silently, if possible. But only integers (not floating-point numbers) are promoted
to strings:

[source]
x = '3.14'      #<=== String
y = 2 + x       #<=== Promotes to number: now y = 5.14
a = 4           #<=== Number (integer!)
b = 'foo' . a   #<=== Promotes to string: now b = 'foo4'
z = 0.0 + x     #<=== Forces evaluation as number
c = '' . z      #<=== Forces evaluation as string

TIP: Depending on the context, gnuplot automatically interprets the value of
a parameter as number or as string. If necessary, you can coerce evaluation as
number by adding 0.0 or as string by concatenating an empty string.

Three operators and a handful of functions act on strings. The first operator is the
concatenation or dot operator:

[source]
a = 'baz'
b = "foo" . 'bar'
c = b . a       #<=== c is now "foobarbaz".

The other two operators are comparison operators for use in conditionals: eq (equal)
and ne (not equal). The first returns true if both of its arguments are equal, and the
second returns true if they differ:


[[P081]]

[source]
a = 'foo'
b = 'bar'
c = a eq 'foo' ? 'equal' : 'different'

Strings can be indexed like arrays, using a syntax similar to the syntax used to indicate
plot ranges:

[source]
a = "Gnuplot"
b = a[2:4]            #<=== b is now "nup".
c = a[4:]             #<=== c is now "plot".

The first character in the string has index 1 (not 0!). Also notice that both limits are
inclusive. If you leave either the beginning or the end of the substring empty, it will
default to the beginning or the end of the entire string, as shown.

TIP: The first character in a string has index 1 (not 0). Index ranges for sub-
strings are interpreted inclusively at both ends.

A small set of functions is available to analyze and parse strings (see table 5.1). You can
also define your own string functions, in the same way you define functions that oper-
ate on numbers:

[source]
head( s ) = s[1:3]
a = head( "January" ) #<=== a is now "Jan".

Table 5.1 String functions

[opts="header,autowidth",frame=ends,grid=rows]
|===
|Function  |Description

|*strlen( "str" )*|
Takes a string and returns the number of characters in the string.

|*substr( "str", i, j )*|
Takes a string and two integers. Returns the substring beginning at
i and ending at j, inclusive. Equivalent to str[i:j].

|*strstrt( "str", "key" )*|
Takes two strings. Returns the index of the first character of the
string key in the string str, or zero if not found.

|*words( "str" )*|
Takes a string. Strips the leading and trailing whitespace and then
breaks the string into tokens on whitespace. Returns the number
of tokens found. Newlines and tabs are interpreted as whitespace
only if the string was double-quoted.

|*word( "str", n )*|
Takes a string and an integer. Strips the leading and trailing
whitespace and then breaks the string into tokens on whitespace.

Returns the nth token found. (Tokens are counted starting at 1,
not at 0.) Newlines and tabs are interpreted as whitespace only if
the string was double-quoted.

|*sprintf( "format", ... )*|
Takes a format string and an arbitrary number of arguments.
Returns a formatted string. Equivalent to the sprintf() function
in the C standard library.

|*value( "string" )*|
Takes the name of a gnuplot variable as a string and returns the
current value of that variable. (This is useful if the name of the vari-
able is determined or constructed at runtime. See the examples in
section 11.1.2.)

|*system( "string" )*|
Takes a shell command as string and executes it in a subshell.
Returns the output of the shell command. (You can find more
details in chapter 11.)

|===

[[P082]]

==== 5.1.3 Worked example: plotting the Unix password file

As a crazy example of what’s possible, let’s plot a typical Unix password file with gnu-
plot! Listing 5.1 shows the file. (For non-Unix users: each line in the file describes a
user. Each line consists of several fields, separated by colons. The first field is the user-
name, the third field is a numeric user ID , and the fifth field is a textual description of
the user. The other fields are of no relevance here.)

[source]
at:x:25:25:Batch jobs daemon:/var/spool/atjobs:/bin/bash
daemon:x:2:2:Daemon:/sbin:/bin/bash
ftp:x:40:49:FTP account:/srv/ftp:/bin/bash
games:x:12:100:Games account:/var/games:/bin/bash
ldap:x:76:70:User for OpenLDAP:/var/lib/ldap:/bin/bash
lp:x:4:7:Printing daemon:/var/spool/lpd:/bin/bash
mail:x:8:12:Mailer daemon:/var/spool/clientmqueue:/bin/false
man:x:13:62:Manual pages viewer:/var/cache/man:/bin/bash
mysql:x:60:108:MySQL database admin:/var/lib/mysql:/bin/false
news:x:9:13:News system:/etc/news:/bin/bash
ntp:x:74:103:NTP daemon:/var/lib/ntp:/bin/false
postfix:x:51:51:Postfix Daemon:/var/spool/postfix:/bin/false
sshd:x:71:65:SSH daemon:/var/lib/sshd:/bin/false
uucp:x:10:14:Unix-to-Unix CoPy system:/etc/uucp:/bin/bash
wwwrun:x:30:8:WWW daemon apache:/var/lib/wwwrun:/bin/false

To plot this file, you need to set the field separator to be the colon ( : ); you can then
plot the file using the with labels style (see chapter 7). Just for fun, I’ll also make the
letter 'm' the comment character. Verify how records starting with an 'm' don’t
appear in the graph. (See section 4.3 for details of the file-format specifications.)

In the plot (see listing 5.2; the resulting graph is shown in figure 5.1), the numeric
user ID is used as the x coordinate and the line number in the file as the y coordinate.
The label, printed at the resulting position, consists of each user’s login name, stacked
(by virtue of a newline character) on top of the textual description of the user.
gprintf( "format", ... ) Takes a format string and a single argument to format. Returns a
formatted string. Similar to sprintf() but uses gnuplot’s format
specifiers (compare table 8.2).


[[P083]]

[source]
set datafile separator ':'
set datafile commentschar "m"
plot [-10:90][0:15] "passwd"
➥ u 3:($0+2):( stringcolumn(1) . "\n" . stringcolumn(5) ) w labels


[source]
script='
set term windows;
set datafile separator ":";
set datafile commentschar "m";
plot [-10:90][0:15] "passwd.gp" u 3:($0+2):( stringcolumn(1) . "\n" . stringcolumn(5) ) w labels;
pause mouse
'
gnuplot -e "$script"

Listing 5.2 Commands for figure 5.1 using data from listing 5.1 (file: passwd.gp)

.Listing 5.2
image:https://drek4537l1klr.cloudfront.net/janert2/Figures/05fig01_alt.jpg[]

Figure 5.1 Demonstrating string functions and the with labels plot style: plotting the
Unix password file with gnuplot. See listing 5.1 for the data and listing 5.2 for the commands.

.Unicode and UTF-8
******
Gnuplot 5 can handle Unicode strings that are encoded using UTF-8. Although this
may sound like the typical configuration and localization nightmare, it’s actually really
good news—once you understand why.

*Unicode*

Unicode is based on the concept of a character. A character is a logical abstraction,
such as “the first capital letter in the Latin alphabet” (that is: the letter A), or the
“question mark” character (?). In Unicode, every character is identified by a unique
integer value, known as that character’s code point. Unicode defines over 1 million
code points, which are usually specified as U+xxxx , where each x stands for a hexa-
decimal digit. The capital letter A, for instance, can be found at code point U+0041 . ^a^
Separate from the notion of the character is the concept of the glyph. A glyph is the
geometric shape or symbol used to represent a character visually. The same (logical)
character can be represented by a different glyph, depending on the typeface or font. ^b^

^a^
You can find tables of Unicode characters and their code points on the Unicode website:
www.unicode.org/charts.


[[P084]]

Here comes the first possible stumble: not every font provides a glyph for every pos-
sible code point—in fact, most fonts map only a small subset of characters. That
shouldn’t be surprising: a calligraphic font designed to print wedding invitations (in
English!) need not include glyphs for mathematical symbols or for characters from
Asian languages. Hence it’s essential to use a font that provides glyphs for all the
characters you want to display. Fortunately, several open source fonts exist that pro-
vide a wide variety of glyphs that may be useful in scientific or technical contexts. I
recommend Nimbus Sans L, which is designed to be similar to Helvetica. A good font
manager is helpful for browsing available fonts and glyphs—if you don’t have a pref-
erence yet, you might want to check out Fontmatrix. c (I’ll have more to say about font
name resolution in gnuplot in chapter 10.)

It’s important to remember that a Unicode code point uniquely identifies a character
and that the only remaining task is to find a font that provides a glyph for that char-
acter. All this is very different from the old way of doing things, where the number of
characters was limited to 255 and different encodings were used to map these 255
characters to different glyphs, depending on the language or symbols you wanted to
use. In the first edition of this book, I explained how to switch from the main text font
(such as Helvetica) to the Symbol font to get access to Greek letters and a (limited)
choice of mathematical symbols. Although changing fonts is still possible, there is
much less need for it today, because a single font can provide not only Latin letters
but also a wide range of mathematical and geometric symbols, as well as letters from
non-Latin alphabets.

*UTF-8*

I haven’t yet explained how a Unicode string is represented internally. Fortunately,
you (for the most part) don’t need to know.

Clearly, one byte per character isn’t enough to represent all the 1.1 million possible
Unicode characters, and several encoding schemes have been developed to map Uni-
code characters to “bits and bytes.” The good news is that one encoding came out
as the clear winner: UTF-8. d It isn’t necessary to know anything about the (very clever)
details of UTF-8, as long as you stick with UTF-8 always and exclusively.

^b^
Technically, the typeface is the abstract design, whereas the font is an implementation of
that design. In the times of hot-lead typesetting, that distinction was a lot more important
than it is today: you had to be in physical possession of the metal pieces that made up a
“font” to be able to print something.

^c^
Although its development seems to have been stagnant for several years, the currently avail-
able version works well and is available for a large number of Linux distributions.

^d^
It’s amusing to note that UTF-8 was designed, quite literally, on the back of a napkin: see
Rob Pike’s “UTF-8 History” at http://mng.bz/TuD3.


If you present your strings to gnuplot in UTF-8 (and use a font that provides glyphs for
all characters in your strings), things will “just work.”

This brings us to the second possible stumble: how to generate arbitrary strings
encoded in UTF-8. The most common case (in my experience) is that I know the code
point for a character I want to use (like the “white smiling face” character found at
code point U+263A )—but gnuplot isn’t prepared to handle code points directly. I must
translate the code point to a UTF-8 encoded string first.

There are several ways to do that. Some combination of keys on your keyboard may
generate the desired character in the interactive terminal already. Your favorite editor
may allow input of characters by code point or Unicode name: ^e^ you can then save the
string to file and let gnuplot read it, or cut-and-paste the string from the editor window
to the gnuplot session (yes, this works). Finally, current programming languages gen-
erally can handle both Unicode and UTF-8. In Python, for example, the following
works:

[source]
python>>> print u'\u263a'.encode( 'utf-8' )         #<=== Unicode literal
python>>> print unichr( 0x263a ).encode( 'utf-8' )  #<=== Function call

*Choosing an encoding*

To take full advantage of Unicode, the encoding must be set to UTF-8:

[source]
set encoding utf8

This isn’t necessarily selected by default, so you probably want to include this com-
mand in your gnuplot initialization file (see section 12.5.1). Not all terminals support
all encodings, but contemporary terminals will usually work with both Unicode and
UTF-8.

^e^
In Emacs, for instance, typing C-x 8 RET , followed by the code point in hex or the Unicode
name, will work—note that tab-completion of the name is available. You may also want to
check out the TeX input method: you enable it using C-x RET C-\ , followed by TeX . You can
now input Greek letters and other symbols as in LaTeX: for instance, typing \lambda will pro-
duce the corresponding Greek letter.
******


[[P085]]

TIP: All strings in gnuplot (and the libraries it uses) can handle Unicode
that’s encoded using UTF-8 . Together with an appropriate font, this should
take much fear out of handling special characters in gnuplot. For best results,
make sure to set the encoding explicitly to UTF-8 using set encoding utf8 .

=== 5.2 String expressions and string macros

The string-handling capabilities just introduced make it possible to construct com-
mand lines programmatically. Specifically,

•  Wherever a command expects a string, a string expression can be substituted.
•  The eval command takes a fixed string and executes it as if its contents were
entered at the command line.
•  By prefixing a variable containing a string with the @ character, you can create
macros that can be used even in places where gnuplot doesn’t expect to find a
string expression.

Let’s look at these options in a bit more detail.


[[P086]]


==== 5.2.1 String expressions in commands

As just pointed out, anywhere a command expects a string, you can substitute a string
expression. For instance, this will work just fine:

[source]
file = "data.txt"         #<== Assigns the string "data.txt" to a variable
desc = "My Data"          #<== Assigns the description to a variable
plot file title desc      #<== Equivalent to “plot "data.txt" title "My Data"”

You can also use functions that return a string. Here, a function provides the file
extension for you:

[source]
f( x ) = x . '.txt'
plot f( 'data' )          #<== Plots the contents of "data.txt"

The example is whimsical, of course, but it’s easy to come up with more useful applica-
tions. The string functions (see table 5.1) are often helpful in this context.

==== 5.2.2 Executing a string with eval

The eval command takes a string (or string expression) and executes it as if its con-
tents had been issued at the command prompt. This is occasionally useful when you
want to use string functions to build up a command line dynamically at runtime. 1

Here’s an example. Exporting a graph to a file requires several steps (choosing the
terminal and filename, regenerating the graph, and restoring the original state). You
can facilitate this process by using a function that builds up a string containing all
required steps:

[source]
export( file, terminal ) = sprintf(
➥ "set t push; set t %s; set o '%s'; replot; set o; set t pop",
➥ terminal, file )

When supplied with the desired filename and terminal type, this function returns a
string consisting of all the required gnuplot commands to export the most recent
graph. This string can be executed using eval . In fact, the function can be invoked
simultaneously with the eval command:

[source]
eval export( "graph.pdf", "pdfcairo" )

^1^
At a deeper level, this reflects a fundamental limitation of gnuplot’s functions. Gnuplot functions must be
defined in terms of expressions. It isn’t possible to define a function as a sequence of commands. Building up
a complicated string and executing it is a way to group several commands together.


[[P087]]
This works and is probably the most elegant way to export a graph to file. (The export()
function as defined here uses the pseudoterminals push to store the most recently used
terminal settings and pop to restore the original terminal. See section 10.1.2 for details.)
It isn’t necessary for the string to be built up dynamically; you can use the same
process to create convenient shorthands. For example, in appendix D, you’ll learn to
define color gradients. The definition of palettes is a bit wordy, so it may be conve-
nient to define appropriately named string variables (possibly in your gnuplot config-
uration file—see chapter 12) and then execute them:

[source]
redblue = "set palette defined( 0 'blue', 1 'white', 2 'red' )" #<== Define
eval redblue    #<== Execute

==== 5.2.3 String macros inside commands

When you want to replace part of a command line where gnuplot doesn’t expect a
string, you can’t use a string variable (or string expression) directly. Instead, you must
resort to a string macro. ^2^ String macros let you insert the contents of string variables at
arbitrary positions in a gnuplot command. Here’s an example:

[source]
cols = "using 1:3"          #<== Assigns a string variable
style = "with lines"        #<== Assigns another one
plot "data" @cols @style    #<== Equivalent to “plot "data" using 1:3 w lines”

The symbol @ in front of a variable name indicates that the value of the variable
should be interpolated into the command line at the current location. The command
line is evaluated after all string macros have been expanded.

Macros aren’t evaluated within quotes (either single or double), but you can usu-
ally achieve the desired effect through simple string manipulations. This example
shows both situations:

[source]
tool = "(made with gnuplot)"    #<== String variable
set title "My plot @tool"       #<== Macro expansion doesn’t work …
set title "My plot " . tool     #<== … but string concatenation is fine!

Only string variables are evaluated when prefixed with an @ —more general string
expressions aren’t. The return value from a string function must therefore always be
assigned to a variable before it can be evaluated. Also keep in mind that string macros
are evaluated only once: when the command line containing the macro is parsed. You
also can’t define and use a macro in the same command line.

^2^
At the time of this writing, the future of string macros in gnuplot is a bit uncertain. You can run show
version long and look for an entry of the form +MACROS to see whether macros are enabled in your gnuplot
installation. In previous gnuplot versions, macro processing had to be explicitly enabled using set macro ;
this is now the default.



[[P088]]

=== 5.3 Generating textual output

Gnuplot creates graphs—after all, that’s the whole point! Nevertheless, sometimes it’s
useful to have gnuplot create textual output. For example, you may want to export the
results from gnuplot’s spline-interpolation algorithm to a file so you can use them in
another application. Or you may have applied an inline data transformation and want
to get your hands on the resulting data.

Gnuplot has two facilities for generating text: the print command and the set
table option. Although they may seem similar, they’re intended for different uses:

•  The print command evaluates expressions and displays their results as text.
•  The table facility generates a textual description of the output of the plot or
splot command. Instead of a graph of the data, the table style produces a rep-
resentation of the data in textual format. In this way, it’s akin to the set terminal
command, which is used to choose the output format for the plot or splot com-
mand. (In previous versions of gnuplot, what is now the set table facility was
exposed as a terminal.)

==== 5.3.1 The print and set print commands

The print command evaluates one or more expressions (separated by commas) and
prints them to the currently active printing channel—usually the screen:

[source]
print sin(1.5*pi)
print "The value of pi is: ", pi

This example demonstrates the two typical uses for the print command:

•  Evaluating expressions (effectively, using gnuplot as a calculator)
•  Inspecting the current value of variables and heredocs

.THE SET PRINT OPTION
*****
*****

You can change the device to which print sends its output by using the set print
option:

[source]
set print                               #<== Prints to standard error
set print "-"                           #<== Prints to standard output
set print "{str:filename}" [ append ]   #<== Prints to file
set print $heredoc [append]             #<== Prints to heredoc

By default, print sends its output to standard error (usually the current terminal if gnu-
plot is run interactively). But output can be redirected either to standard output (using
the special filename - ) or to a regular file (by giving the filename as argument to set
print ). Each invocation of set print creates a new file (clobbering any existing file of
the same name), unless you specify the additional keyword append . The destination file
may be a pseudofile (see section 4.5.1): on systems that support input/output redirec-
tion, you can specify a shell command as recipient of the output from print by starting
the filename with the pipe symbol ( | ). You can also send the output from print to a
heredoc so it can be used subsequently in the same gnuplot session.



[[P089]]
Some gnuplot commands that generate textual output use the set print option
internally to determine where to send their output. (An example is the show palette
palette command; see section D.2.4.)

==== 5.3.2 The set table command and the with table style

The set table facility gives you access to the data that makes up a graph as text. In
other words, using set table , you can obtain the values of all points shown in a plot
as numeric expressions.

The command to generate output as numbers, as opposed to graphics, is set
table :

[source]
set table [ "{str:filename}" | $heredoc ]

As long as set table is active, all output is directed to the specified file (or to the cur-
rent value of set output if no file was named). To return gnuplot to creating graph-
ics, use unset table . (Don’t forget!) You can also use a heredoc as the destination.

It’s important to remember that set table doesn’t generate output: it merely
selects a channel to which the output is sent. Only the plot , splot , replot , and
refresh commands generate output. One of them must be issued after set table ;
otherwise, the resulting file will be empty. You can use the with table style to sup-
press any graphics-related processing when doing so:

[source]
set table "output.txt"
plot "data" u 1:2 with table
unset table

Both x and y values are printed to the file as two separate columns. If the plot contains
several curves, they’re written to the file one after another, as separate data blocks.
The data format for each column is equal to the format used for the tic labels of the
corresponding axis (see section 8.3.3). The third column contains a marker indicat-
ing whether this data point was within the plot range or outside of it: i for “inside,”
o for “outside,” or u if the point is undefined.

For data from a file, only the data points read from the input file are written to the
output file. For functions, including Bézier and spline approximations, the number of
data points depends on the value of the set samples option (see section 3.1).

You can also redirect the output to a heredoc using the set table facility. For
example, if you want to use the results of one of gnuplot’s smoothing algorithms (see
section 3.5) in subsequent calculations, a heredoc is a convenient way to do so. In sec-
tion F.6, I’ll first use plot ... smooth cumul to calculate the cumulative distribution
function, store the result in a heredoc, and later apply an inline transformation to
generate a probability plot.


[[P090]]

==== 5.3.3 Reading and writing heredocs

No explicit commands exist to save the contents of a heredoc to a file or to populate a
heredoc from a general data file, but both tasks can be accomplished through creative
use of the techniques just discussed. Remember that the contents of a heredoc aren’t
included in the information persisted with save . Instead, you have to use print .
Assuming that a heredoc called $d exists in the current session, these commands will
persist its contents to a file called data:

[source]
set print "data"
print $d
unset print

To populate a heredoc from a data file, use set table :

[source]
set table $d
plot "data" with table
unset table

Writing heredocs with print isn’t a problem, but reading heredocs from file using set
table is subject to some limitations. First, no more than 14 columns can be read at a
time. More important, the with table style is only suitable for numeric data. If
you want to read strings into a heredoc, you must use the with labels style. But the
with labels style requires exactly three columns in the using specification (typically
x-position, y-position, and the string itself—see section 6.3.5). This means, among
other things, that you can only read in a single string column per heredoc instance.

=== 5.4 Simplifying work with inline loops

Recently, gnuplot has acquired features commonly associated with programming lan-
guages: loops and conditionals. We’ll investigate them in detail in chapter 11. But the
looping facility also has a shorthand version that is so simple and useful that I’ll intro-
duce it here.

This shorthand is a form of for loop that is used to simplify plot and set com-
mands that contain a repeated element. The loop is embedded in the plot or set
command, which is why I call them inline loops. (This terminology isn’t used in the
standard gnuplot reference documentation.) A few examples will clarify.


==== 5.4.1 Loops over numbers

Let’s assume that you wish to plot the second, third, and fourth columns of a file
against the first. You’ve learned how to do this:

[source]
plot "data" u 1:2 w l, "" u 1:3 w l, "" u 1:4 w l

For three columns, it isn’t a big deal to type this out explicitly, but you can see how quickly
it will become tedious if you include more columns. This is where the looping construct
comes in handy. You can obtain the same plot as in the previous command as follows:

[source]
plot for [j=2:4] "data" u 1:j

[[P091]]
The variable j is set to the values 2, 3, and 4, successively; and the data from all three
columns is included in the graph. Notice that there are no parentheses around the
second column specifier.

The body of the loop extends to the first comma, and multiple loops can be com-
bined in the same plot command:

[source]
plot for [j=2:4] "data1" u 1:j, "data2" u 1:2
plot for [j=2:4] "data1" u 1:j, for [j=2:4] "data2" u 1:j

The first of these commands plots three columns from data1 and a single column
from data2. The second command plots three columns from data1 together with
three columns from data2.

The loop condition is specified in square brackets

[source]
for [ variable = start : end : increment ]

where the increment defaults to 1 if it isn’t included explicitly. A negative increment is
possible and will lead to a descending loop. An increment value that isn’t an integer
will be truncated to the next integer. (Gnuplot truncates the same way C does: (int)1.5 =
1 , but (int)-1.5=-1 .)

Both the start and end points of the loop are inclusive. In other words, gnuplot’s
for loop is equivalent to the following construct in a C-like language:

[source]
for( var = start; var <= end; var += increment ) {...}

All the examples so far have used the plot command, but the same operations are
also available for set . For instance, the following command places a text label at three
positions on the graph (I haven’t formally introduced the set label option yet; we’ll
remedy that in chapter 7):

[source]
set for [j=1:3] label "Here!" at j,0

==== 5.4.2 Loops over strings

In the previous examples, the loop extended over a range of numbers. This is conve-
nient if you want to select columns from a file. But what if you want to loop over a
bunch of files? To do that, you need to loop over strings. As it turns out, you can do
this, too.

To make this concrete, let’s say that you want to plot the daily temperatures as mea-
sured in three cities. The observations are contained in files named according to the
locations. The following two commands are equivalent:

[source]
plot "newyork" u 1:2, "chicago" u 1:2, "sanfranciso" u 1:2
plot for [name in "newyork chicago sanfranciso"] name u 1:2

The loop condition in this case is

[source]
for [ variable in tokenstring ]

where tokenstring is a string of whitespace-separated tokens.


[[P092]]
String operations are available when using loops. For instance, you can use string
concatenation with the . (dot) operator to build up more complicated filenames:

[source]
plot for [name in "newyork chicago sanfranciso"] name . ".txt" u 1:2

The word() and words() functions (see table 5.1) may come in handy. Remember:
words(s) returns the number of tokens found in the string s ; word(s,k) returns the
kth token found. For example, the following command iterates over all files. For each
file, it plots the second against the first column, but it also adds a vertical offset:

[source]
files = "newyork chicago sanfranciso"
plot for [j=1:words(files)] word(files,j) using 1:($2+5*j)

==== 5.4.3 Summary of inline loops

Inline loops are a new addition and have the potential to change the way you interact
with gnuplot. For this reason, I want to summarize their most relevant features.

TIP: Become familiar with inline loops. They can help a lot, in particular if
you work with many files or with files containing a large number of columns.
Inline loops are available for the plot and set commands. In both cases, they follow
directly after the command keyword. The loop’s body extends to the next comma (for
plot ) or to the end of the command line. Loops can extend over numeric ranges or
over the tokens found in a string. (See the following listing.)

Listing 5.3 Inline loop syntax for the plot and set commands

[source]
plot for [ variable = start : end : increment ] ...
plot for [ variable in tokenstring ] ...
set for [ variable = start : end : increment ] ...
set for [ variable in tokenstring ] ...

For numeric ranges, the loop includes both start and end points. The increment
should be an integer; it’s truncated to an integer otherwise. For iteration over strings,
the loop condition consists of a string of whitespace-separated tokens.

Finally, I’d like to point out that inline loops nest. The following is legal and works
as expected:

[source]
set for [j=1:3] for [k=1:3] label sprintf( "%d-%d", j, k) at j,k

Inline loop expressions are evaluated statically when the command is first parsed.
This means you can’t use the value of the first loop variable to control the range of
the second loop dynamically: set for [j=1:3] for [k=1:j] ... does not work as
expected. You must use one of the general looping constructs for such applications
(see chapter 11).

[[P093]]

=== 5.5 Gnuplot’s internal variables

The frequent use of internal variables is a relatively recent trend in gnuplot develop-
ment. I use the term internal variable to refer to variables that are set by gnuplot itself
and that can be read out by the user to investigate various aspects of gnuplot’s internal
state. The purpose of these internal variables is twofold:

•  To make information about gnuplot’s internal state available to user-defined
functions and expressions
•  To report the result of an internal calculation back to the user

If you know the name of a specific variable, then you can inspect its value using print ,
and you can use it in expressions just like a user-defined variable (as introduced in sec-
tion 3.2.3). If you don’t know the variable name, you can list all currently defined vari-
ables using

[source]
show variables all

To avoid conflicts with user-defined variables, the names of internal variables are pre-
fixed by strings in capital letters (see table 5.2). You can restrict the show command to
variables beginning with a certain prefix. For example,

[source]
show variables GPVAL

only shows internal variables with names beginning with GPVAL . (Note that there are
no quotes around the prefix in the argument to the show command.)

Table 5.2 Prefixes used for internal variables

[opts="header,autowidth",frame=ends,grid=rows]
|===
|Prefix     |Description
|GPVAL_     |For general-purpose variables, most of which refer to the most recent plot and graph
(see section 9.5.4).

|GPFUN_     |For every user-defined function (see section 3.2.3), the function definition—as a
string—is stored in an internal variable prefixed with GPFUN_, followed by the name of
the user-defined function.

|MOUSE_     |For variables containing information about mouse events (see section 12.4.3).
STATS_ For variables set by the stats command (see section 5.6).

|FIT_       |For variables used by the fit command (see section F.7).
|===

An example will help to clarify. In section 3.5.2, you learned that the smooth kdens
algorithm can calculate a default bandwidth. Upon completion of the plot ...
smooth kdens command, the internal variable GPVAL_KDENSITY_BANDWIDTH contains
the numerical value of the default bandwidth. I also mentioned that this default
bandwidth often appears too broad to reveal all the details in the data. You may
therefore want to redraw the graph with a bandwidth that is (for instance) half the
default bandwidth. You can achieve this effect through the sequence of the following
two commands:

[[P094]]

[source]
plot "data" u 1:(1) s kdens
plot "data" u 1:(1) s kdens bandw 0.5*GPVAL_KDENSITY_BANDWIDTH

You first need to run the plot command without specifying a bandwidth, because this
operation creates and populates the internal variable. This leads us to two important
properties of internal variables:

•  Internal variables are only created when needed. Before the first plot command (in a
newly started gnuplot session), most internal variables aren’t just empty—they
aren’t even defined (as show variables all will tell).

•  Internal variables are read-only. Internal variables inform the user of gnuplot’s
internal state, but not the other way around: assigning a new value to such a
variable does not change gnuplot’s behavior (even if gnuplot allows the assign-
ment, the new value is silently ignored). Assigning to internal variables isn’t a
way to modify options: you must use the set command to do that.

Not all option values can be inspected through internal variables at the moment, but
it’s relatively easy to add a new internal variable to the gnuplot implementation (if
you’re a gnuplot developer, that is). You should therefore expect that the information
available through internal variables will grow over time. Use show variables all to
see what’s been included by the time you read this.


=== 5.6 Inspecting file contents with the stats command

With gnuplot’s stats command, you can examine the contents of a file and obtain
information about the number of valid and invalid records, as well as find summary
statistics (such as mean and standard deviation) for each column. The results are
made available through internal variables (see section 5.5) and can therefore be used
in subsequent calculations.

The syntax of the stats command is similar to that of plot . To examine the men’s
results from listing 3.1, you can use

[source]
stats "records" u 1:2

The complete output is shown in listing 5.4. The first part gives some information
about the data file itself, such as the number of records, the number of blank lines,
and the number of data blocks (that is, blocks of consecutive records separated by
double blank lines). The entry labelled Out of range indicates the number of records
disregarded because they’re eliminated by the application of ranges (using ranges
with stats is discussed in a moment). The subsequent parts of the output give the
value for several typical summary statistics, such as mean and standard deviation. ^3^

^3^
In general, the definitions for the various quantities are taken from their respective entries in Wolfram Math-
World (http://mathworld.wolfram.com). The abbreviation Avg Dev stands for the mean absolute deviation
from the mean. The standard gnuplot reference documentation provides some additional details.

[[P095]]
The second-to-last block in the output shows extremal values and percentile statis-
tics. For the minimum and maximum, the number of the record where the extremal
value is reached is displayed in square brackets. To find the median and quartiles, the
data is sorted first. If the number of records N is odd, then the value of the record at
position (N+1)/2 is reported as the median; if the number of records is even, then the
mean of the two points at positions N/2 and 1+N/2 is reported. Equivalent treatment is
used for the quartile values. The final section shows the result of a linear regression
calculation, when treating the first column as a predictor for the second.

Listing 5.4 Typical output from the stats command

    * FILE:
      Records:          11
      Out of range:     0
      Invalid:          0
      Blank:            0
      Data Blocks:      1

    * COLUMNS:
      Mean:             7753.9091 1287.8518
      Std Dev:         12439.9995 2169.5345
      Sample StdDev:   13047.1815 2275.4270
      Skewness:            1.9336 2.0063
      Kurtosis:            5.5228 5.7949
      Avg Dev:          9095.9091 1562.0000
      Sum:             85293.0000 14166.3700
      Sum Sq.:        2.36364e+09 7.00199e+07

      Mean Err.:        3750.8010 654.1393
      Std Dev Err.:     2652.2168 462.5463
      Skewness Err.:       0.7385 0.7385
      Kurtosis Err.:       1.4771 1.4771

      Minimum:           100.0000 [ 0]         9.5800 [ 0]
      Maximum:         42195.0000 [10]      7377.0000 [10]
      Quartile:          400.0000             43.1800
      Median:           1500.0000            206.0000
      Quartile:        10000.0000           1577.5300

      Linear Model:    y = 0.1743 x - 63.9
      Slope:           0.1743 +- 0.001633
      Intercept:       -63.9 +- 23.94
      Correlation:     r = 0.9996
      Sum xy:          4.066e+08

==== 5.6.1 The stats command and internal variables

The stats command makes all of its results available through internal variables. To
prevent clobbering existing variables, the prefix STATS_ is prepended to all variable
names. Furthermore, the suffix _x or _y , respectively, is appended to the variable
name to indicate the first or second column; if only a single column is identified in
the using specification, no suffix is appended. (Use the show variables command to
list all the variables, their names, and their values.)

[[P096]]
Let’s look at an example. The following code snippet prints the mean of the first
and second columns to screen:

[source]
stats "records" u 1:2
print STATS_mean_x, STATS_mean_y

You can change the prefix with the name keyword. (You can’t leave the prefix blank or
empty.) For example, to use the string "REC" as a prefix, you use this command:

[source]
stats "records" u 1:2 name "REC"

Custom prefixes can be useful if you’re working with multiple files. By prefixing each
set of variables with its own identifier, you can compare summary statistics across sev-
eral data sets.

.A WORKED EXAMPLE
*****
Because stats assigns all of its results to internal variables, they can be used seamlessly
in subsequent operations. Here’s an example. Back in section 3.5.2, you learned about
gnuplot’s smooth kdensity feature. I also pointed out that to obtain a normalized esti-
mate, it is necessary to give each data point a weight equal to 1/n, where n is the num-
ber of points in the data set. Back in chapter 3, I supplied the number of points
manually and explicitly. Now, using stats , I can do better:

[source]
stats "measurements" u 1
plot "measurements" u 1:(1.0/STATS_records) smooth kdensity

Running the stats command first populates all the variables, including
STATS_records : the number of records in the file. You now don’t need to know the
value of this quantity—instead, you refer to it by its symbolic name in the plot com-
mand. This same technique is widely applicable; you’ll see examples in later chapters
(see, for example, sections 11.1.2, 11.6, and F.6).
*****



==== 5.6.2 Further options for the stats command

To apply the stats command to a single column, you include only one column identi-
fier in the using specifier. Of course, it doesn’t make sense to perform the calculation
for the linear model in this case.

You can limit the application of stats by using ranges. Ranges can be included in
the command line (as for plot ): stats [0:2000] "records" u 1:2 . The stats com-
mand also honors ranges set using the set _range family of functions (see section 8.2).
To send the output to a file, specify a filename using set print (see section 5.3.1).
You can suppress all output by appending the nooutput keyword to the command line.

=== 5.7 Command history

Gnuplot has a history feature, making it possible to recall the most recent commands.
The history feature is bound to the up- and down-arrow keys, as well as to the Ctrl-p
and Ctrl-n key combinations. The easiest way to modify an existing plot is to recall the
command (using the up-arrow) and make whatever change is desired to the com-
mand line. ^4^

[[P097]]
The most common application is to regenerate the current graph. In the next
section, we’ll discuss some special commands to do that. In section 5.7.2, we’ll exam-
ine gnuplot’s history command, which gives you greater control over the command
history.


==== 5.7.1 Redrawing a graph

You’ve already (in listing 2.2) encountered the replot command. It runs the most
recent plot command again. You usually use it after making changes to options using
set .

You can add new data or functions to replot :

[source]
plot sin(x)     #<== Plots a sine wave
replot cos(x)   #<== Plots both a sine wave and a cosine wave

The refresh command is like replot , except that it does not read the data again. This is
convenient if data was read from standard input (using the special filename "-" ) or
when the file may have changed on disk. It is not possible to add further data or func-
tions using refresh .

TIP: The refresh command reruns the most recent plot command (just like
replot does), but without having to reread the data from disk.

It’s fairly common to load a script using load and then want to edit the plot com-
mand. Unfortunately, load doesn’t enter the contents of the file into the command
history, so the plot command from the file isn’t available using the up-arrow key. A
new option to the show command can help:

[source]
show plot add2history

This not only prints the command line containing the plot command to screen, but
also enters it as the most recent entry in the command history.

TIP: You can enter plot commands read from a file into the command his-
tory using the (optional) add2history argument to show plot .


==== 5.7.2 The general history feature

If you want more control over the command history, you can use history . The history
command can be used three ways: to print all or parts of the command history, to
search the command history, or to reexecute a command:

^4^
Gnuplot supports various key bindings for editing the command line. The exact selection depends on the spe-
cific version of the readline library that was used to compile the local gnuplot executable. See appendix A and
the gnuplot standard reference documentation for details.



[[P098]]

[source]
history [quiet] [{int:max}] ["{str:filename}" [append]] #<== Shows the command history
history ?"{str:cmd}"                    #<== Searches the history
history ![ {int:pos} | "{str:cmd}" ]    #<== Executes a command

The first line shows how to print the command history to the screen or (if a filename
is given) to a file. Optionally, history clobbers any existing file of the same name,
unless you use the append keyword. By default, the command history is shown
together with line numbers, but they can be suppressed with the quiet option. Finally,
you can restrict the output to the last max entries by providing a numerical argument.
For example, the command history quiet 5 plots the last five commands preceding
the current one to screen, suppressing line numbers. On my system, this command
currently produces the following output:

[source]
plot cos(x)
plot sin(x)
plot [-2:2] sin(x)
plot [-2:2] sin(x), x
plot [-2:2][-1:1] sin(x), x
history quiet 5

Alternatively, you can give a command, or just its beginning, as an argument to history ,
prefixed by either a question mark ( ? ) or an exclamation point ( ! ). If the question
mark is used, gnuplot searches the command history and shows only entries that start
with the string provided. If the exclamation point is used, the most recent matching
entry in the command history is executed again. For example, history ?"set term"
shows all commands that changed the terminal setting. Finally, the exclamation mark,
together with a number, executes the command at the specified history position.
There is also a history option that can modify the behavior of the history
command:

[source]
set history [ size {int:max} ] [quiet|numbers] [full|trim] [default]

The size keyword takes an integer argument that specifies how many entries in the
history should be saved to file when a gnuplot session is ended. A value of -1 allows an
unlimited number of entries to be written to file.

Specifying set history quiet suppresses numbers generally when using the
history command. The trim option removes duplicate entries in the command his-
tory, retaining only the most recent one. The default keyword restores the default
settings, which are set history size 500 numbers trim .


==== 5.7.3 Restoring session defaults

At times you may want to remove all user-defined variables and options and restore
your gnuplot session to a defined state. You can do this using reset . The reset com-
mand does not affect options having to do with terminal settings ( set terminal and
set output ), with locale settings ( set locale , set encoding , and set decimalsign ),
and with search paths ( set loadpath , set fontpath , and set psdir ).


[[P099]]
The reset command restores gnuplot to its default settings, period. If you also
want to reload your personal initialization file (see chapter 12), then you must use
reset session .

TIP: Use reset session to restore gnuplot’s default state and to load your
personal initialization file.

Finally, there are two special forms of this command: reset errors clears only the
two internal variables GPVAL_ERRNO and GPVAL_ERRMSG . The command reset bind
restores all hotkey bindings (see chapter 12) to their default values.


=== 5.8 Summary

This chapter was something of a grab bag of useful features that make life easier. Such
material often appears dry, so let’s highlight what was important and why.

Strings and string operations are important whenever you want to include textual
information on a graph. That’s usually not a concern for initial and exploratory work,
but it’s crucial to provide semantics to finished graphs intended for public presenta-
tion. Feel free to come back to this topic whenever the need arises!

String macros and inline loops can simplify repetitive tasks. Inline loops (which are a
relatively new gnuplot feature) can be a major convenience; you should at least be
aware of this feature.

Internal variables, compile-time options, and the command history are all methods to
inspect gnuplot’s internal state. The need for these features usually arises only when
you’re trying to tackle more complex tasks—for now, it should suffice to know that
these possibilities exist.

This concludes the introduction to gnuplot fundamentals. You have all the fea-
tures and commands at your disposal to work efficiently with gnuplot. Now we’ll take
the basics for granted and talk in detail about the different ways you can affect the
appearance of a graph: the “looks.” Stay tuned.


[[P100]][[ch06]]

== Chaper 6 A catalog of styles

This chapter covers

•  Directives for choosing styles
•  Gallery of plotting styles
•  Pointers to additional styles

The next few chapters describe the different ways you can control the appearance
of a plot: how to make it look just right. In this chapter we’ll discuss the various
ways to display data, and in the next chapter we’ll talk about all the other stuff that
goes onto a plot, such as labels, borders, arrows, and similar decorations. Because
axes and their labels can provide so much relevant information about a plot,
they’re given their own chapter (chapter 8). And finally, in chapter 9, we’ll discuss
how you can customize the appearance of all plot elements, in case you don’t like
the defaults.

Most of this chapter is taken up by a comprehensive gallery of available plotting
styles. Feel free to treat it as a catalog: look at the pictures to see whether there’s any-
thing you like and might want to use right away. As your needs change, you can
always come back and check out what other styles are available.

In any case, be sure to read section 6.2, because it explains the mechanics of
how to choose plot styles in gnuplot. The remainder of the chapter is optional (at
this point).

[[P101]]

=== 6.1 Why use different plot styles?

Different types of data call for different display styles. For instance, it makes sense to
plot a smooth function with one continuous line but use separate symbols for a sparse
data set in which each individual point counts. Experimental data often requires error
bars together with the data, whereas counts of discrete events call for histograms.
Choosing an appropriate style for the data leads to graphs that are both informative
and aesthetically pleasing.

But the choice of plot style isn’t just an aesthetic issue: different graphical repre-
sentations give a data set context and may even imply specific semantics:

•  Continuous lines indicate a function or a dense data set with little noise.
•  Explicit point symbols emphasize the discrete nature of a sparse data set and
make individual data points stand out.

•  Boxes are mostly used for histograms and so imply counts of discrete events.
•  Error bars make the uncertainty in a data set explicit.

TIP: Remember: the style you choose determines not only what people are
seeing, but also how they will interpret it!

=== 6.2 Styles and aspects

Gnuplot can create graphs using different overall styles: you’ve already encountered
with lines , with points , and with linespoints . In this chapter, you’ll learn about
additional styles for drawing boxes, error bars, circles and arrows, and so on. The style
determines the overall appearance of the plot. Styles are usually specified using the
familiar with keyword.

All graphs are constructed from lines and point symbols. In addition to the overall
choice of style, you can also customize many aspects of lines and points: things like the
width, color, and dash pattern of lines; and the shape, size, and color of points. These
aspects can be set globally or locally for each data set individually.

Unless you specify aspects explicitly, gnuplot will choose a different set of aspects
for each new data set you include in a graph. For example, if you create a graph from
four data sets, by default each data set will be drawn using a different color (or dash
pattern) and point shape. You can override this default sequence locally (as part of
the plot command) or redefine the overall sequence globally.

In this section, we’ll first review how to use inline customizations to modify the
appearance of graph elements as part of the plot command. Then I’ll give you an
overview of the aspects that can be changed this way.


==== 6.2.1 Choosing styles inline through with

Generally, plot styles are chosen inline, as part of the plot command. (There are also
ways to set global style preferences—we’ll come back to this in chapter 9.) You already
saw inline styles in chapter 2; by giving the with keyword as part of the plot com-
mand, you can specify which style to use:

[[P102]]

[source]
plot "data" u 1:2 with lines, "" u 1:3 with linespoints,
➥　"" u 1:4 with points

As usual, keywords can be abbreviated to the shortest unambiguous form, so it’s more
convenient to write w l , w linesp (or even: w lp ), and so on.


==== 6.2.2 The default sequence

In graphical analysis, you often want to plot several similar data sets, possibly together
with functions, all on the same plot—usually so that they can be compared directly to
one another:

[source]
plot [0:4][-0.25:1.5] "sequence" u 1:2 w lp, "" u 1:3 w lp, "" u 1:4 w lp,
➥　-log(x)+(x-1) w l

All data sets are plotted using the same overall style ( with linespoints ), but gnuplot
makes sure to change the color (or dash pattern) of the lines used. Gnuplot also uses
a different point symbol for each data set (see figure 6.1).

By default, lines and points are chosen automatically from a sequence of available pat-
terns. If there are more data sets in the plot than there are patterns in the sequence,
the selection starts again at the beginning.

You can override the automatic selection by explicitly specifying the index of one
particular element from the default sequence. For example, if in the previous exam-
ple you wanted to draw the second data set in the same style as the first, you could say

.Figure 6.1
image:https://drek4537l1klr.cloudfront.net/janert2/Figures/06fig01_alt.jpg[]

Figure 6.1 Gnuplot automatically chooses a different line style for each curve.

[[P103]]
[source]
plot [0:4][-0.25:1.5] "sequence" u 1:2 w lp, "" u 1:3 w lp lt 1,
➥ "" u 1:4 w lp, -log(x)+(x-1) w l

Here, lt is short for linetype (which refers to elements of the default sequence), and
lt 1 asks for the first element from the sequence. Fixing a specific line like this
doesn’t affect the way the internal counter is incremented, so the ways the fourth col-
umn of the data and the function are displayed don’t change.

So far, I’ve only shown you how to select a specific entry from the default sequence.
Instead of making such a local change, you can also customize the default sequence
globally—or even use different default sequences for different purposes. We’ll discuss
how to do that in chapters 9 and 12, but it’s pretty advanced stuff. Most of the time,
you’ll find that gnuplot cycles through the default sequence in a way that just works.

==== 6.2.3 Customizing graph elements

You can exercise detailed control over various aspects of graph elements. Table 6.1
lists all commonly used properties. Many are reasonably self-explanatory, but some
may not be. In particular, color specifications and customized dash patterns require
more detail—we’ll come back to them in chapter 9.

There are several contexts in which the properties from table 6.1 can be specified:

•  Some properties can be set globally. For example, you can use the set pointsize
option to adjust the size of point symbols globally. Other properties can be con-
figured globally using set style (see chapter 9).

•  Several terminals allow you to modify the line widths and point size used for the
selected terminal (see chapter 10).

•  By far the most common way to specify appearance aspects is inline as part of
the plot command. It’s straightforward to do this, as I’ll show next.

.INLINE CUSTOMIZATIONS
*****
*****
To change any appearance property, you tack the desired specifiers onto the function
or data set in the plot command:

[source]
plot sin(x) w l lw 3        #<== Uses line width 3
plot "data" u 1:2 w lp lt 2 #<== Inherits all properties from line type 2

If there are multiple curves in a plot, attach the specifiers to the desired curve:

[source]
plot "data" u 1:2 w lp lt 3, sin(x) w l lt 1

This plots the data set using the properties of line type 3 and the sine function with
the properties of line type 1.

You can include more than one modifier (but gnuplot will prevent you from
including the same modifier multiple times):

[source]
plot "data" u 1:2 w lp pt 6 ps 2    #<== Point type 6, at point size 2
plot cos(x) w l lw 3 lc rgb "red"   #<== Triple line width, in red

[[P104]]
Table 6.1 Modifiers for the appearance of lines, points, and other graph elements

[opts="header,autowidth",frame=ends,grid=rows]
|===
|Keyword    |Abbreviation   |Description
|linetype   |lt |A line type is a combination of all aspects of both lines and
            points: line width, color, and dash type, as well as point type,
            point size, and point interval. If not instructed otherwise, gnu-
            plot will cycle through a predefined sequence of line types for
            each new curve in a plot.
|linestyle  |ls| User-defined combination of appearance aspects. Similar to
            linetype but not eligible for automatic assignment to
            curves. (See section 9.4.)
|linewidth  |lw| Numerical multiplier, multiplying the default line width.

|linecolor  |lc| Color used to draw graphical elements (lines and points).

            (See section 9.1 for the syntax of color specifications.)
|dashtype   dt |Pattern| of dots and dashes used to draw the line. (See sec-
            tion 9.2.2 for the syntax of dash-pattern customizations.)
|pointtype  |pt| Shape or symbol used to display a data point. Chosen from a
|selection  |of| available symbols. (See section 9.2.1.)
|pointsize  |ps| Numerical multiplier, multiplying the default point size.

|pointinterval |pi| Controls whether only a subset of records is displayed with an
            explicit symbol when using the linespoints style. (See
            section 6.3.1.)
|textcolor  |tc| Color used for textual labels. (See section 9.1 for the syntax
            of color specifications.)
|fillstyle  |fs| Closed shapes (boxes, circles, ellipses,
            candlesticks) can be filled with a color or a pattern. The
            keyword solid, followed by a density between 0.0 and 1.0,
            fills the shape with the current color at the specified density;
            pattern uses the current pattern from the range of available
            patterns; and empty leaves the shape unfilled. (See section
            9.4.4 for more information on fill styles.)
|fillcolor  |fc| Color used to fill closed shapes. (See section 9.1 for the syn-
            tax of color specifications.)
|border     |bo| Describes the border used for filled areas. Expects any combi-
|nation     |of| line options as argument. (See the tip at the end of
            this section for the lineoptions shorthand.)
|arrowstyle |as| Selects a separately defined arrow style when using with
            vectors. (See section 7.3.2 for more information on arrows
            and section 9.4.3 for information on arrow styles.)
|===


[[P105]]
Line types and line styles are special: they’re containers for all available properties.
Each line type (or line style) indicates a line width, color, and dash pattern, as well as a
point shape and size. By specifying either a line type or a line style, you choose values
for all properties at once. Gnuplot allows you to override individual aspects, and
doing so is common:

[source]
plot sin(x) w l lt 3 lw 2          # ➊
plot "data" u 1:2 w p lt 4 pt 3    # ➋

➊ Uses line type 3, but doubles the width

➋ Uses color and point size of line type 4, but overrides the shape of the points

As you can see, if a line type (or line style) is given, the curve inherits the applicable
properties, unless they’re explicitly overridden. In the previous example, the data set
was plotted with points (that is, without connecting lines), so the graph inherited
point shape, size, and color from the indicated lt 4 . But because the point type was
selected explicitly, the resulting graph used color and point size from lt 4 but the
point shape corresponding to pt 3 .

.SHORTHAND : LINE OPTIONS
*****
*****
Most styles and decorations introduced in this and the next few chapters are con-
structed from lines, and the appearance of these lines is usually subject to the appro-
priate modifiers from table 6.1. In particular, linetype , linestyle , linewidth ,
linecolor , and dashtype are generally recognized.

To condense the presentation, I won’t list these modifiers individually going for-
ward but will instead refer to them as line options. In command summaries, the string
lineoptions is henceforth used as a placeholder for any combination of the aforemen-
tioned explicit appearance modifiers. Of course, lineoptions is not a legal gnuplot
keyword—it’s just a notational shorthand. ^1^

TIP: In command summaries, the placeholder lineoptions stands for any
combination of the explicit line-appearance modifiers listed earlier. This is
just a convenient shorthand; lineoptions is not a legal gnuplot keyword!

=== 6.3 A catalog of plotting styles

Well over two dozen styles are available in gnuplot. Here we look at those most useful
for ordinary, two-dimensional data. I’ll provide pointers to additional styles (for more
complicated data sets) in section 6.5, toward the end of this chapter.

^1^
That being said, as a symbolic placeholder for all available line modifiers, the lineoptions shorthand is
more robust and often more accurate than an explicit list that becomes incomplete whenever gnuplot’s selec-
tion of line modifiers grows. The standard gnuplot reference documentation contains many instances where
explicit lists of line modifiers haven’t kept up with gnuplot’s increased capabilities and are now incomplete.

[[P106]]

==== 6.3.1 Core styles: lines and points

There are four styles I consider core styles, because they’re so generally useful: with
points , with lines , with linespoints , and with dots . These styles represent data
with simple symbols or lines on the plot (see figure 6.2).

.POINTS
*****
*****
The points style plots a small symbol for each data point. The symbols aren’t con-
nected to each other. This is the default style for data (see figure 6.2).
The size of the symbol can be changed globally using the set pointsize com-
mand. The parameter is a multiplier, defaulting to 1.0:

[source]
set pointsize {flt:mult}

You can also change pointsize (abbreviated ps ) inline:

[source]
plot "data" u 1:2 w points pointsize 3

The point type (or point shape) can be selected using pointtype (or pt ). Remember
that ps stands for pointsize , not for point style (there is no such thing)! Figure 9.7
shows all commonly available point shapes.

.Figure 6.2
image:https://drek4537l1klr.cloudfront.net/janert2/Figures/06fig02_alt.jpg[]

Figure 6.2 The four core styles: with points , with lines , with linespoints ,
and with dots

[[P107]]
In addition to the selection of available point types, you can also specify a single letter
as argument to pointtype . The selection of symbols available depends, of course, on
the fonts installed on your system. Modern fonts that provide glyphs for a large num-
ber of Unicode code points may offer some interesting possibilities (see figure 6.3)!
Note that when you use a character as a symbol, you must change its color using text-
color instead of using linecolor . (See the sidebar in section 5.1 for information on
Unicode and how to access characters from extended sets.)

.Figure 6.3
image:https://drek4537l1klr.cloudfront.net/janert2/Figures/06fig03_alt.jpg[]

Figure 6.3 Variants of the with linespoints style. Top to bottom: default behavior, using a
(regular) character as symbol, omitting every second symbol, and using a character from an extended
range of glyphs while omitting two out of every three points. Note that in the last case, the lines have
been erased to make room for the characters by giving a negative argument to the pi keyword.

.LINES
*****
*****
The lines style doesn’t plot individual data points, only straight lines connecting adja-
cent points. This is the default style for functions and the preferred style for dense
data sets without too much noise.

Many aspects of lines, including their width, color, and dash pattern, can be cus-
tomized. For instance, to double the width of a single line in a plot, you can use the
following inline directive:

[source]
plot "data" u 1:2 w l linewidth 2

.LINESPOINTS
*****
*****
The linespoints (abbreviated lp ) style is a combination of the previous two: each
data point is marked with a symbol, and adjacent points are connected with straight
lines. This style is mostly useful for sparse data sets.


[[P108]]
What has been said about the with points and with lines styles generally applies
to with linespoints : the default size of the symbol is controlled by the set pointsize
option but can be overruled inline, as can the line type and the point type.

A property that is only available for linespoints is pointinterval (short: pi ). ^2^ If
this property is set to a positive integer n, then gnuplot plots a symbol only for every
nth data point; all other points are drawn with lines only (see figure 6.3). This can
be extremely useful for dense data sets.

If pointinterval is negative, then it has the same effect as just explained, but in
addition, a circular region centered at the location of the point is cleared, using the
special bgnd color before the symbol is drawn (see figure 6.3). (The background
color bgnd is a property of the terminal; use set terminal ... background ... to
set it. See chapter 10.) The size of the cleared region is controlled using the set
pointintervalbox option:

[source]
set pointintervalbox {flt:mult}

The value of pointintervalbox multiplies the point size to find the radius of the
region to be cleared. All this is demonstrated in figure 6.3.

.DOTS
*****
*****
The dots style prints a minimal dot (a single pixel for bitmap terminals) for each data
point. This style is occasionally useful for very large, unsorted data sets (such as large
scatter plots). Figure 1.2 was drawn using dots.


==== 6.3.2 Indicating uncertainty: styles with error bars or ranges

Sometimes you don’t just want to show a single data point; you also want to indicate a
range with it. This may be the experimental uncertainty (the error bar), or it may be
the range over which some quantity has changed during the observation interval (this
is typical of financial charts). Gnuplot offers several styles that place an indicator for
such a range onto the plot. First we’ll look at styles that draw regular error bars (both
in vertical and in horizontal directions). Then we’ll go on to discuss styles that let you
indicate several ranges at once (but only in the vertical direction).

.STYLES WITH ERROR BARS
*****
*****
There are two basic styles to show data with error bars in gnuplot: errorbars and
errorlines (see figure 6.4). The errorlines style is similar to the linespoints style
(a symbol for each data point, adjacent points connected by straight lines), whereas
the errorbars style is similar to the points style (unconnected symbols).

These styles draw error bars in addition to the data. Error bars can be drawn in
either the x or y direction or both. To select a direction, prefix the style with x , y , or
xy , respectively, as in plot "data" with xyerrorlines . Table 6.2 summarizes all avail-
able combinations.

^2^
This feature is a relatively recent addition to gnuplot.


[[P109]]

The appearance of both the errorlines and errorbars styles is determined by the
current line style. Both styles draw a symbol at the location of the data point—which is
unnecessary, because the intersection of the error bars already indicates this position!
You can suppress the symbol by specifying pointtype 0 , like so: plot "data" u 1:2:3
with yerrorlines pt 0 .

The error bars themselves are drawn in the current line style. A tic mark is placed
at the ends of each error bar (see figure 6.4). You can control the size of the tic mark
using the set bars option:

[source]
set bars [ small | large | fullwidth | {flt:mult} ]

The parameter is a multiplier, defaulting to 1.0. The symbolic names small and large
stand for the values 0.0 and 1.0, respectively. The value fullwidth is only relevant to

Table 6.2 All possible combinations of errorbars and errorlines styles
[opts="header,autowidth",frame=ends,grid=rows]
|==
|           |Error bars in 
             x direction   |Error bars in
                            y direction    |Error bars in both
                                            directions
|Unconnected symbols | xerrorbars   | yerrorbars   |xyerrorbars
|Connected symbols   | xerrorlines  | yerrorlines  |xyerrorlines
|==

.Figure 6.4
image:https://drek4537l1klr.cloudfront.net/janert2/Figures/06fig04_alt.jpg[]

Figure 6.4 Different plot styles showing uncertainty in the data. From top to bottom: connected
symbols using errorlines , unconnected symbols using errorbars , ranges indicated as boxes
using boxxyerrorbars , and errors on top of a histogram using boxerrorbars .
histogram styles (more on that in a minute). Finally, you can turn off the tic marks
using unset bars .

[[P110]]

Error bars require additional information. Just the x and y coordinates aren’t
enough: you must also provide data about the size of the uncertainties. Usually, this
data comes from the data file, in the form of one or two additional columns. If one
additional column is given, it’s interpreted as a range dy to be added to and subtracted
from the corresponding data value, so the error bar is drawn from (x, y − dy) to (x, y+dy).
If two additional columns are supplied, they’re interpreted as the absolute coordinates
of the lower and upper ends of the error bar (not the ranges), so error bars are drawn
from (x, ylow) to (x, yhigh). Corresponding logic applies to error bars drawn in the x
direction.

As usual, the columns to use are indicated with the using directive to plot :

[source]
plot "data" using 1:2:3 w yerrorbars        #<== ( x, y, dy )
plot "data" using 1:2:3:4:5:6 w xyerrorbars #<== ( x, y, xlow, xhigh, ylow, yhigh )

Data transformations (see section 3.3) are often useful in this context. Here are some
examples:

•  If the input file contains only the variance (instead of the standard deviation,
which is usually plotted as error) together with the data, you can apply the nec-
essary square root inline: plot "data" u 1:2:(sqrt($3)) w yerrorb .

•  If you know that the uncertainty in the data is a fixed number (such as 0.1), you
can supply it directly: plot "data" u 1:2:(0.1) w yerrorl .

•  If the data supplied in the file is of the unsupported form (x, y, ylow, yhigh, dx),
you can build up the required plot command manually: plot "data" u
1:2:($2-$5):($2+$5):3:4 w xyerrorl .

As a final style to visualize data with uncertainty in both directions, there’s boxxyerror-
bars . It’s similar to the xyerrorbars style, except that the range of uncertainty is shown
as a rectangular box centered at the data point, rather than as a cross of error bars. (If
you prefer to use circles or ellipses instead of boxes to indicate a confidence range, you
may want to peek ahead at section 6.3.5.)

The last style that uses error bars is boxerrorbars (not to be confused with
boxxyerrorbars ), which is a combination of the boxes and yerrorbars styles. It’s dis-
played as a box with a vertical error bar centered at its top. It might be used, for
instance, for histograms that have some uncertainty in their counting statistics. The
additional values required for the error bar are supplied as the third (or third and
fourth) arguments to the using directive. The box width is provided as the last argu-
ment to using .

The styles discussed in this section are mostly used to plot data stemming from sci-
entific experiments or calculations, where you want to show the uncertainty in the
data clearly. But there are other situations where you may want to indicate a range (or
even several ranges) together with the data. Those are the topic of the next section.


[[P111]]
.TIME - SERIES STYLES
*****
*****
Gnuplot offers two styles that are mostly useful for time-series data, although they can
be used for other purposes as well: candlesticks (also known as a bar-and-whiskers
plot) and financebars (see figure 6.5). Both can show two ranges in a single (vertical)
direction: for instance, the typical band of variation and the highest and lowest values
ever. Both are frequently used for financial data (such as stock prices), and I’ll discuss
them in those terms. The candlesticks style in particular is quite versatile and can be
used to good effect in a variety of situations.

Both styles require five columns of data: the x value followed (in order) by the open-
ing, low, high, and closing prices. As usual, the appropriate columns are selected with
the using directive to the plot command. Additional columns may optionally be spec-
ified to indicate the box width or the color.

Both styles represent the maximum range (low to high) with a vertical line. They
differ in the way the secondary (opening to closing) range is displayed: in the candle-
sticks style, a box of finite width is overlaid on the vertical line; in the financebars
style, tic marks indicate the opening and closing values. The size of the tic marks is
controlled by the set bars option familiar from errorbars styles (see figure 6.5).
You can control the details of the candlesticks style using some additional
options. If the current fill style is empty and the closing value is less than the opening
one, the box is filled with the current color; otherwise, the box is left empty. (If you
choose a particular fill style using set style fill , then this style is used to fill the box,
independent of the opening and closing values. See section 9.4.4 for more informa-
tion on set style fill .)

.Figure 6.5
image:https://drek4537l1klr.cloudfront.net/janert2/Figures/06fig05_alt.jpg[]

Figure 6.5 Styles for time series: financebars and candlesticks . Filled bars
indicate that the closing value is less than the opening value for the current record.

[[P112]]
You can change the width of the box either by using the set boxwidth option or
by supplying a value in a sixth column. If the width is read from a column, it’s assumed
to be given in the same units as the x coordinate. (If boxwidth is unset, the value of
set bars is used instead, but this usage is deprecated for candlesticks . For finance-
bars , the set bars option is the only way to change the size of the opening and clos-
ing markers.)

To place tic marks at the ends of the vertical line, append the keyword whisker-
bars (or whisker ) to the plot command. You can control the size of these tic marks
independently from the box width by appending a numerical value to the whisker-
bars keyword. This value is interpreted as a multiplier giving the length of the tic
mark relative to the box width.

A few examples will make this clearer:

[source]
plot "data" u 1:2:3:4:5 w candlesticks      #<== Plain
plot "data" u 1:2:3:4:5 w cand whiskerbars  #<== Tic marks the same length as boxwidth
plot "data" u 1:2:3:4:5 w cand whisker 0.1  #<== Tic marks one tenth the length of boxwidth

Neither the financebar style nor the candlesticks style connects consecutive
entries. If that’s what you want, you’ll have to do so explicitly. Keep in mind that it’s
not clear what should be connected in these styles—they don’t have a concept of a
“middle” value. You must supply this information separately.


==== 6.3.3 Styles with steps and boxes

Box styles, which draw a box of finite width, are sometimes useful for counting statis-
tics or for other data sets where the x coordinates have only discrete values.

.STEPS
*****
*****
Gnuplot offers three styles to generate steplike graphs consisting only of vertical and
horizontal lines (see figure 6.6). The only difference between the three styles is the
location of the vertical step:

•  histeps centers each bin around the supplied x value.
•  steps places the vertical step at the end of the bin.
•  fsteps places the vertical step at the front of the bin.

If in doubt, the histeps style is probably the most useful.

.BOXES AND IMPULSES
*****
*****
In contrast to the step styles from the previous section, the boxes style plots a box cen-
tered at the given x coordinate from the x axis (not from the graph border) to the y
coordinate (see figure 6.7). The width of the box can be set three ways:

•  Supplied as the third parameter to using .
•  Set globally through the set boxwidth option.
•  Otherwise, boxes are sized automatically to touch adjacent boxes.



[[P113]]

.Figure 6.6
image:https://drek4537l1klr.cloudfront.net/janert2/Figures/06fig06_alt.jpg[]

Figure 6.6 The three step styles. The same data set is shown three times (vertically
shifted). Individual data points are represented by symbols; the three steps styles are
shown with continuous lines. Note how different the same data set can appear,
depending on the exact location of the vertical steps.


// plot u 1:2 w boxes - default width
// plot u 1:2:(0.75) w boxes - fixed width
// plot u 1:2:3 w boxes - variable width
// plot u 1:2 w impulses

.Figure 6.7
image:https://drek4537l1klr.cloudfront.net/janert2/Figures/06fig07_alt.jpg[]

Figure 6.7 Box and impulse styles. The widths of boxes can be set globally or for each
box individually. The second data set uses a fixed width (enclosed in parentheses in the
using directive); the third one reads values for variable box widths from file.

[[P114]]
If you supply a third column in the using directive, it’s interpreted as the total width
of the box in the same coordinates that are used for the x axis. The set boxwidth
option has the following syntax:

[source]
set boxwidth [ {flt:size} ] [ absolute | relative ]

The size parameter can either be a measure of the absolute size of the box in x axis
coordinates or denote a fraction of the default box size, which is the width of the box
if it touches adjacent boxes. If absolute mode isn’t stated explicitly, relative sizing is
assumed. You can use a boxwidth of -2 to force automatic sizing of boxes (with adja-
cent boxes touching each other). The impulses style is similar to the boxes style with
boxwidth set to zero. The examples in figure 6.7 clarify this.

Boxes can be filled or shaded, according to the global set style fill option (see
section 9.4.4) or the inline fillstyle specification. The fillsteps style is a filled
equivalent of the steps style.


==== 6.3.4 Filled styles

You can fill the area between two curves in two-dimensional plots with color or pat-
terns using the filledcurves style. The appearance of the filled regions is deter-
mined by the settings of the fill style, which is controlled by the set style fill option
(see section 9.4.4) or given inline.

Filling the area between two curves requires a data set with at least three columns:
for the x coordinate and the y coordinates of the two curves. The two curves constitute
the boundaries of the filled area. If the two lines cross each other, you can distinguish
the enclosed areas depending on whether the first or the second line is greater than
(that is, above) the other. By default, all enclosed areas are shaded, but you can
restrict shading to only one of the two kinds of areas by appending the keyword above
or below .

This style is only available when plotting data from a file, but you can “fake” it
using the "+" pseudofile (see section 4.5). That’s what’s done in the following code
snippet (see figure 6.8):

[source]
plot [0:3*pi][-1.1:2.1] "+" u 1:(sin($1)):(0.5*sin($1)) w filledc,
➥                       "" u 1:(1+sin($1)):(1+0.5*sin($1)) w filledc above,
➥                       "" u 1:(2+sin($1)):(2+0.5*sin($1)) w filledc below

All three versions are shown: the default (with all enclosed areas filled) and—verti-
cally shifted—the same curves with only the areas above and below filled.
In addition to filling the areas between two explicitly given curves, gnuplot can
also handle other boundaries:

•  Fill the area between one curve and one straight line (which may be one of the
coordinate axes or a plot boundary).

•  Treat a single curve as a closed polygon, and fill its interior.

•  Specify an additional point that will be included in the construction of the polygon.

[[P115]]
I suggest you consult the standard gnuplot reference documentation for the pertinent
details.


==== 6.3.5 Beyond lines and points: multivariate visualization

Several styles allow you to encode information by other means than the position on
the graph: with labels reads a text string from the input file and places it on the plot.
Using pointsize variable , you can change the symbol size according to the values in
the data set. Finally, you can place arrows or entire geometric shapes on the plot using
the with arrows , with circles , and with ellipses styles.

All these styles have in common that they consist of graphical elements that aren’t
simple but that instead have internal degrees of freedom—that’s what enables them to
encode additional information beyond their position on the graph. (We’ll come back
to multivariate visualization in section 14.2.) At the same time, because they’re more
than “lines and points,” the distinction between these styles and some of the decora-
tions discussed in the next chapter is a bit fuzzy—in fact, these styles share many imple-
mentation details with the corresponding decorations. Frequently, what applies to one
applies to the other, even if it doesn’t say so explicitly in the text!

TIP: The with labels , with arrows , with circles , and with ellipses
styles share many properties with the set label , set arrow , and set object
decorations.

.Figure 6.8
image:https://drek4537l1klr.cloudfront.net/janert2/Figures/06fig08_alt.jpg[]

Figure 6.8 Shading the area between two curves in a single data set: plot
"data" u 1:2:3 w filledcurves . You can select only those areas where one
of the curves is above or below the other curve. (See the text for details.)

[[P116]]
.LABELS AND POINT SIZE
*****
*****
Let’s look at an example that demonstrates both the with labels style and the point-
size variable facility. Listing 6.1 shows a short data file containing the additional
information required for labels and symbol sizes as additional columns. Given this file,
you can generate the plot in figure 6.9 using the following commands:

[source]
plot [0:6][0:3.5] "labels" u 1:2:3 w p pt 6 ps var,
➥ "" u ($1+0.25):($2-.25):4 w labels

Both styles require a third column as part of the using declaration, the contents of
which are interpreted as labels or desired symbol sizes, respectively. Variable symbol
sizes are most easily recognized if the symbols are circles, which are chosen by point-
type 6 ( pt 6 for short). Then follows the pointsize variable (abbreviated ps var )
specification. Labels are chosen using with labels , and all the labels are offset a little
down and to the right so they don’t overlap with any of the circles.

Listing 6.1 Data for figures 6.9 and 6.10 (file: labels)

    # x y       size    label
    1   2.6     3       ABC
    2   2.1     6       EFG
    3   1.0     2       PQR
    4   1.2     1       UVW
    5   1.6     4       XYZ

.Figure 6.9
image:https://drek4537l1klr.cloudfront.net/janert2/Figures/06fig09_alt.jpg[]

Figure 6.9 Encoding additional information through symbol size or textual labels: pointsize
variable and with labels . The corresponding data file is shown in listing 6.1.

[[P117]]
You should exercise some caution when using pointsize variable : it’s often difficult
for the observer to judge the size of symbols accurately. Moreover, it’s not necessarily
clear to the observer whether the radius or the area of the symbol is proportional to
the encoded quantity. I’ll have more to say about visual perception in chapter 14.
In contrast, the with labels style is frequently useful and very versatile. As men-
tioned earlier, many of the options of set label carry over to with labels ; see sec-
tion 7.3.3 for details. Here are only a few remarks:

•  You can rotate the label using rotate by .
•  You can change the text font and its size using font "..." .

•  You can select the text color with textcolor ( tc ). Data-dependent text coloring
is available through tc var (see section 9.1.5 for more on data-dependent color
selection).

•  You can draw a point symbol using point and shift the text label relative to it
using offset .

•  If the hypertext directive is included, the text label is usually hidden and is dis-
played only when you hover with the mouse near the point’s location. (Obvi-
ously, this is relevant only for interactive terminals.)

.Figure 6.10
image:https://drek4537l1klr.cloudfront.net/janert2/Figures/06fig10_alt.jpg[]

Figure 6.10 shows some of these options in action—the data is again that shown in list-
ing 6.1. The plot command is as follows:

[source]
plot [0:6][0:3.5] "labels"
➥ u 1:2:(sprintf("{/=%d %s}",5*column(3), strcol(4))):1
➥ w labels rotate by 30 point pt 5 offset 1,-1 tc var

Figure 6.10 Further capabilities of the with labels style: plotting a point symbol
together with the text label, and changing the color, size, and orientation of the label

[[P118]]
Mind you, I’m not saying this is an example of a successful visualization! But it does
demonstrate many of the concepts just introduced. (The variable text size uses
enhanced text mode—I’ll formally introduce this concept in section 10.2.3.)

A final word of warning: in contrast to what’s customary elsewhere, the with
labels style directive can’t be abbreviated. Neither with lab nor with label will work!

.SHAPES AND ARROWS
*****
*****
Gnuplot defines three shapes that can be used as plotting symbols: arrows, circles, and
ellipses. What’s different about these plot elements is that they have a nontrivial inter-
nal structure that can be used to encode information: the arrow has not only a position
(as does any other point symbol) but also a direction and a length. An ellipse has a
variable shape and orientation; and circles are interesting, because gnuplot lets you
draw arc segments in addition to full circles. (As I pointed out earlier, these styles
share many properties with set arrow and set object —see sections 7.3.2 and 7.3.4
for additional details.)

As an example, consider the short data file shown in listing 6.2. In listing 6.3, I use
the first two columns as x and y coordinates and display the data in the third and
fourth columns as size and angle, respectively. (Compare figure 6.11.)

    # x  y     size   angle
    1    1     0.1    0
    2    1.2   0.2    15
    3    1.8   0.3    45
    4    1.7   0.2    90
    5    1.6   0.15   160
    6    1.5   0.2    250
    7    1.4   0.3    300

Arrows are drawn using the with vectors style. They require four columns in the
using directive: x and y position, followed by the offset of the arrow’s tip from its start-
ing position. You can control the way the arrow is drawn either by giving explicit style
details inline (see section 7.3.2 to learn how to control an arrow’s appearance) or by
referencing a separately defined arrow style (see section 9.4.3 for globally defined
styles). With arrowstyle variable , you can also read the index of a predefined arrow
style from an additional column:

[source]
plot ... using 1:2:3:4 with vectors nohead      #<== Inline
plot ... using 1:2:3:4 with vectors arrowstyle 3        #<== Global style
plot ... using 1:2:3:4:5 with vectors arrowstyle variable       #<== From file

Circles require only two columns, for the x and y positions. If you specify a third col-
umn, it’s used for the radius; otherwise the radius is taken from the global set style
circle setting. (The radius is always measured in x coordinates.) The fourth and
fifth columns, if present, measure the beginning and ending angle of the drawn arc
segment (the “pie slice”). Both are measured in degrees, counterclockwise, against
Listing 6.2 Data for figure 6.11 and listing 6.3 (file: shapes)

[[P119]]
the positive x axis. The circle (or circle segment) can be filled using either an inline
fillstyle specification or the global set style fill setting. Finally, the color of the
entire shape may be read from an additional column, using linecolor variable .
Keep in mind that the resulting shape is always a circle, independent of the selected
y range. If you want to control the ratio of the horizontal to the vertical axis, you must
use with ellipses .

Ellipses require four columns, for the x and y coordinates of the center and for the
length of the major and minor diameters. You can use a fifth column to give the angle
of the ellipse with the positive x axis. Fill and color properties are the same as for cir-
cles. (There are some fineries about the units in which the diameters of an ellipse are
measured. Check the standard gnuplot reference manual for details.)

Let’s now discuss the commands used to create figure 6.11, as shown in listing 6.3.
This listing is worth studying in detail, because it demonstrates how you can adapt plot
styles to a given purpose through judicious application of inline transformations.

Because the various shape styles expect angles in degrees (not radians), you first
need to make sure trigonometric functions will interpret their arguments accordingly
by using the set angle option (for more information, see appendix F). The data set is
then plotted several times, shifted vertically. Basic trigonometric relations are used to
calculate the offsets of the arrow’s tip from the angle and the radius. In the first row of
complete circles, the command ignores the angle argument in the fourth column. For
both the incomplete circles and the ellipses, the y coordinate is ignored instead, and
all shapes are plotted at the same vertical elevation.

// using x:y:dx:dy with vectors
// using x:y:radius with circles
// using x:y:radius:start:end w circles
// using x:y:bigaxis:smlaxis:angle w ellipses

.Figure 6.11
image:https://drek4537l1klr.cloudfront.net/janert2/Figures/06fig11_alt.jpg[]

Figure 6.11 The data from listing 6.2, plotted using with vectors , with circles ,
and with ellipses . See listing 6.3 for details of the plot command.


[[P120]]

Listing 6.3 Commands for figure 6.11 using data from listing 6.2 (file: shapes.gp)

[source]
set angle degrees
plot "shapes" u 1:($2+2):(2*$3*cos($4)):(2*$3*sin($4)) w vectors,
➥ "" u 1:($2+1):($3) w circles,
➥ "" u 1:(1):($3):(0):4 w circles,
➥ "" u 1:(0):(0.5):($3):4 w ellipses

=== 6.4 Putting it together

This section combines everything you’ve learned in this chapter to create figure 6.12.
Imagine that you’ve been given a set of daily weather observations (the beginning of
the file is shown in listing 6.4). It includes the day of the month followed by the tem-
perature (in Celsius), the dew point, ^3^ the cloud cover (in percent), and visibility (in
miles, where 10 miles means unrestricted visibility). The last four columns give the
wind speed (in knots), wind direction, air pressure (in millibars), and the pressure’s
short-term trend (up or down). That’s a lot of data, and we’d like to present it both
compactly and intuitively.

^3^
The dew point is the temperature at which water vapor in the air begins to condense. The dew point is always
lower than or equal to the actual temperature, and the closeness of those two temperatures is a measure of
the humidity in the air.

.Figure 6.12
image:https://drek4537l1klr.cloudfront.net/janert2/Figures/06fig12_alt.jpg[]

Figure 6.12 All-in-one visualization of the data set in listing 6.4: temperature and
dew point as solid lines, atmospheric pressure and its trend with symbols, visibility
with grey bars; wind speed and direction across the top, cloud cover along the
bottom. See listing 6.5 for the commands.


[[P121]]
Listing 6.4 Incomplete data for figure 6.12 with commands in listing 6.5 (file: weather)

[source]
    # Day  Temp  Dew  Cloud Visib Wind Direct Press   Trend
    1      14.3  14    20   7     0    0      1007.6  dn
    2      14.3  14    80   2.5   7    0      1006.4  up
    3      13.8  13.5  70   10    6    150    1006.4  dn
    4      14.3  13.9  50   10    8    190    1009.6  --
    5      14.3  13.9  10   10    6    170    1012    dn
    6      12.4  11.8  80   1.75  6    210    1008.2  up
    7      12.4  11.5  90   2.5   3    190    1005.8  dn
    ...


In figure 6.12, temperature and dew point are shown using continuous lines, pressure
is shown using unconnected symbols (in millibars above 1,000), and the symbols indi-
cate the most recently observed tendency: light triangles pointing upward for rising
tendency; and dark, downward triangles for falling tendency. Visibility (or, rather,
restrictions to visibility) are shown as grey bars in the background—the shorter the
remaining white area at the bottom of the graph, the shorter the visible range. Finally,
wind is shown with vectors along the top, and cloud cover is shown using circles along
the bottom. The complete commands are given in the following listing.

Listing 6.5 Commands for figure 6.12 using data from listing 6.4 (file: weather.gp)

[source]
set angle degrees
unset key
set bar 0          #<== Disables whiskers on the error bars
set boxwidth .7    #<== Fixes the width of the candlesticks
sym(s) = s eq 'up' ? " △ " : (s eq 'dn' ? " ▼ " : " ◎ ")
plot [0:32][0:18]
"weather" u 1:($5+2):($5+2):(10+2):(10+2) w cand lc rgb "grey" fs solid,  #➊
➥ "" u 1:2:3:2 w yerrorlines pt 0 lt 1,                                  #➋
➥ "" u 1:(1):(0.4):(90-0.01*$4*359):(90) w circ lc rgb "blue" fs solid,  #➌
➥ "" u 1:(1):(0.4) w circ lc rgb "black",
➥ 2 lc rgb 'dark-grey', 10+2 lc rgb 'dark-grey',                         #➍
➥ "" u 1:(16) w p lt 2 pt 7 ps .75,                                      #➎
➥ "" u 1:(16):(.05*$6*cos(90-$7)):(.05*$6*sin(90-$7))
➥ w vectors lw 2 lt 2 nohead,
➥ "" u 1:($8-1000):(sym(stringcolumn(9))) w labels                       #➏

• ➊ Visibility
• ➋ Temperature and dew point
• ➌ Cloud cover
• ➍ Horizontal dividers
• ➎ Wind speed and direction
• ➏ Symbols for trend

This set of commands uses many of the concepts introduced previously. The plot
command in this example is unusually complicated (including nine rather different
quantities!). Here are a few pointers as you step through it.

This example uses the candlestick style to draw the grey bars that indicate the vis-
ible range ➊. This style is convenient because it draws a box, all dimensions of which
you can control explicitly. The whiskers have zero length.


[[P122]]
Gnuplot draws items onto the graph in the order in which they appear in the plot
command. For this reason, it’s important that the visibility comes first: the grey bars
should be in the background and not obscure any of the other plot elements.
The yerrorlines style comes in handy to draw the temperature and the dew
point ➋.

Next come the circle segments for the cloud cover ➌. There is a little math to
account for the fact that gnuplot measures angles counterclockwise from the horizon-
tal axis, but angles should increase clockwise from the 12 o’clock position in this
graph. The filled pie slices are drawn first; the empty black circles that provide a rim
for each symbol are drawn afterward, so they’re visually in front.

Two horizontal lines are included to divide the graph visually ➍. This part of the
plot command could also have come earlier or later.

Now the wind speed and direction indicators are added ➎. First a circular symbol
( pointtype 7 ) is drawn to indicate the origin of each vector—this is important if the
wind speed is so low that the vector has zero length. Next comes the vector, again
adjusting the angles to be measured clockwise from the top rather than counterclock-
wise from the right. The arrow head is suppressed using nohead : the origin of each
arrow is already clearly marked, so there’s no need to clutter the graph by drawing
explicit heads.

Finally, the symbols are drawn for the pressure tendency ➏. This part of the com-
mand exploits gnuplot’s ability to use a single character as plotting symbol. The sym-
bols can be found in the “Geometric Shapes” section of the Unicode standard: the
light upward triangle has code point U+25b3, the filled downward triangle corre-
sponds to U+25bc, and the bullseye character has code point U+25cd. The latter was
chosen to be as neutral as possible compared to the other two symbols (no angles and
of intermediate visual weight, due to the inner circle on an unfilled background).

The sym(s) function consists of two nested conditional operators and converts the
strings used in the data file to the characters used in the plot. You need to use the
stringcolumn(i) function here—the $9 shortcut doesn’t work in this evaluation con-
text. Also remember that stringcolumn(i) takes a numeric argument: the position of
the column from which a value should be taken. (See section 4.4 for more informa-
tion about stringcolumn(i) and the sidebar in section 5.1 for more information
about Unicode.)

Figure 6.12 is certainly impressive, and so are the details of listing 6.5—but remem-
ber that most graphs (and commands) are much, much simpler! More important is
the question of whether figure 6.12 succeeds in its visualization task. Here are some
things to think about:

•  The graph packs a lot of information into a relatively compact space. The mid-
dle section is shared by three totally different quantities, but because they’re
represented using different visual cues (lines, symbols, and filled regions), their
interference is reduced. The amount of information encoded in the different
symbols used to represent pressure readings seems too high: I find it difficult to
get an intuitive sense of the behavior of the air pressure from this graph.

[[P123]]
•  The dew point is represented particularly well, I think. The absolute value of
the dew point is less relevant than its distance from the temperature, and it’s
precisely this distance that is emphasized by the vertical error lines. The contin-
uous lines used for the ambient temperature highlight the actual values.
•  For the visibility data, I wanted to stress the reduction in visibility, represented by
the grey bars intruding from above, possibly leaving only a small, unobscured
visible region at the bottom of the graph. Although good in concept, I don’t
think this idea works well in practice: drawing the visual range with lines
would have been clearer.

•  Both the wind and the cloud cover visualizations represent their underlying
data intuitively: you can, literally, see which way the wind blows. It would have
been weird to use with lines to indicate the wind direction.

Nevertheless, the visualization of the wind speed and direction has a couple
of problems: although you have a relative sense of the wind speed, there’s no
indication of its numerical range—if you’re trying to land a plane, that matters
a lot! And if the wind speed is high and the direction is variable, the arrows will
have a tendency to obscure each other. (That this isn’t an issue here is solely a
consequence of this particular data set.)

•  One last problem: although the example uses good numerical tic marks for the
temperature and dew-point values, things are less clear for the visibility and
pressure readings. A single axis isn’t enough to represent quantities that have
such totally different numerical ranges.


=== 6.5 Other styles

The styles discussed in this chapter are all very general: they can be used to represent
all sorts of data in a variety of situations. In addition to these general-purpose styles,
gnuplot offers further possibilities for special applications:

•  Appendix E explains boxplots (to represent point distributions), histograms
(for counting statistics), and parallel coordinates (a particular kind of multivar-
iate technique).

•  Appendix C and appendix D introduce surface and contour plots, as well as
false-color plots and heatmaps. All of these methods apply to cases where you’d
like to represent how one dependent quantity depends on two independent
variables.

•  Appendix F introduces some special plot types for non-Cartesian coordinates.

=== 6.6 Summary

This chapter is like an illustrated catalog: it demonstrates all of gnuplot’s major plot
styles by way of example. As such, I’m not disappointed if you didn’t read the chapter
from start to finish: it’s fine to look at the figures until you find one that does what you
need and then read the accompanying section.

[[P124]]

The only part of this chapter that you should have read, even on a first pass, is sec-
tion 6.2, because it explains how styles are chosen and how you can customize them to
meet your needs. This is fundamental material that you’ll need basically every time
you use gnuplot.

Everything in this chapter exists to visualize data. In contrast, chapter 7 looks at
things you may want to put on a plot in addition to the data: labels, arrows, and other
decorations.


[[P125]][[ch07]]

== Chaper 7 Decorations: labels, arrows, and explanations

Data alone doesn’t tell a story. To be useful, the data needs to be placed in context:
you must tell the observer what the data is (such as position versus time, particle
count versus scattering angle, stock price versus date, and so on) and what units the
data is plotted in (centimeters or inches, seconds or minutes, dollars or Euros). No
plot is complete without this information.

But you can do much more to make a graph useful and informative: you can
add arrows and annotations on the graph to point out and explain interesting fea-
tures. You may also want to provide special tic marks and labels to make quantita-
tive information stand out more. Or you can change the size and shape of the
entire graph to accommodate a specific data set.

This chapter covers

•  Understanding layers and locations on a graph
•  Adding arrows, labels, and other decorations
•  Providing explanations using a key
•  Changing a graph’s overall appearance

[[P126]]
In this chapter, we’ll discuss all the means that gnuplot offers to put ancillary infor-
mation on a plot (in addition to the data). Because much of this material is quite dry,
I’ve gathered the most important commands and options together in the next section.
Unless you have specific requirements, this may be all you need to know right now—
gnuplot is good at automatically doing the right thing in most situations.

=== 7.1 Quick start: minimal context for data

For the sake of concreteness, let’s go back to the diffusion limited aggregation ( DLA )
example of section 1.1.2 and in particular figure 1.4. We’ll use this plot as our exam-
ple throughout this section.

The absolute quickest way to add the most important contextual information to
the plot is to give it a title, such as

[source]
set title
➥ "Run Time (in seconds) vs. Cluster Size (in thousands of particles)"

This tells the observer both what is plotted (computation time versus system size) as
well as the relevant units (time is given in seconds, and particles are counted by thou-
sands), conveniently packaged in a single command. This is the bare minimum.

The title is centered at the top of the graph (as in figure 7.1—you may want to go
back to section 1.1.2 to learn about the context in which this example arose). With a
little additional effort, you can put labels on the axes using the set xlabel and set
ylabel commands. This frees up the title for contextual information about the data in
the plot, like so:

[source]
set xlabel "Cluster size [thousands]"
set ylabel "Running time [sec]"
set title
➥ "DLA Growth Program: Run Time vs Cluster Size (Double Logarithmic)"

Finally, there’s the key (or legend), which relates line types to data sets. By default, it’s
placed in the top-right corner of the graph, but this may not be suitable if it will inter-
fere with data. You can change the position of the key using the keywords

[source]
left, right, top, bottom, center

in the set key command: for example, set key right center , to place the key verti-
cally centered on the right side of the graph. The order of the keywords doesn’t mat-
ter, and if only one is given, all the other options retain their values. Finally, you can
suppress the key using unset key .

You saw in section 2.1.2 how you can change the string describing the data set in
the key using the title option to the plot command. To suppress an entry in the key,
you can either use the notitle option or provide an empty title string. In the follow-
ing command, the data curve has an entry in the key, but the fitted curve doesn’t:

[source]
plot [1:100][0.1:] "progress" u 1:2 title "Data" w p, (x/2.5)**3 notitle

[[P127]]
Now let’s put all this together. The following listing summarizes the commands used
to build figure 7.1.

Listing 7.1 Commands for figure 7.1 (file: progress.gp)

[source]
set xlabel "Cluster size [thousands]"
set ylabel "Running time [seconds]
set title
➥ "DLA Growth Program: Run Time vs Cluster Size (Double Logarithmic)"
set key top left
set logscale
plot [1:100][0.1:] "progress" u 1:2 title "Data" w p, (x/2.5)**3 notitle

This concludes our quick start, and it may be all you need for now. The rest of this
chapter discusses the miscellaneous options that are available if you aren’t happy with
the defaults. But first I need to describe the different ways you can refer to a location
on a plot.

TIP: You can use set xlabel and set ylabel to tell the viewer what quantities
are plotted along the horizontal and vertical axes. The set title command is
an easy way to add general context to a plot. And don’t forget the plot ...
title "..." facility to add a meaningful string to the plot’s legend.

.Figure 7.1
image:https://drek4537l1klr.cloudfront.net/janert2/Figures/07fig01_alt.jpg[]

Figure 7.1 Providing minimal context for a plot using a title and axes labels. See listing 7.1.

[[P128]]

=== 7.2 Understanding layers and locations

To add decorations to a plot, you must be able to tell gnuplot where on the graph the
new elements should be placed. Two different concepts are involved. In the next sec-
tion, I’ll explain how to specify positions laterally within the plane of the graph. Then,
you’ll learn about the stacking order that enables you to place elements visually in the
foreground or background relative to each other.


==== 7.2.1 Locations

First, let’s establish some terminology. The entire area of the plot is referred to as the
screen or the canvas. On the canvas is the graph, which is surrounded by a border (unless
you explicitly turn off the border). The region outside the border is called the margin.
All these are indicated in figure 7.2.

You can provide up to two different sets of axes for a plot. This is occasionally useful
when comparing different data sets side by side: each data set can be presented with
its own coordinate system in a single graph. The primary coordinate system (named
first ) is plotted along the bottom and left borders. The secondary coordinate system
( second ) is plotted along the top and right borders. By default, the secondary system
isn’t shown; instead, the primary system is displayed on all four borders. (You’ll find
more information on axes and coordinate systems in chapter 8.)

Now that you know what all parts of a graph are called, we can talk about the differ-
ent ways to specify locations. Gnuplot uses five coordinate systems:

// first, second, graph, screen, character
// Border
// Margin
// graph (0,0)
// screen (0,0)
// graph (1,1)
// screen (1,1)
// first
// second
// first
// second

.Figure 7.2
image:https://drek4537l1klr.cloudfront.net/janert2/Figures/07fig02_alt.jpg[]

Figure 7.2 The parts of a gnuplot graph: canvas, borders, and margins

[[P129]]
The first two refer to the coordinates of the plot itself. The third and fourth ( graph
and screen ) refer to the graph area and the entire canvas, respectively, placing the
origin (0,0) at the bottom-left corner and the point (1,1) in the top-right corner (see
figure 7.2). Finally, the character system gives positions in character widths and
heights from the origin (0,0) of the screen area. Obviously, positions in this last coor-
dinate system depend on the font size of the default font for the current terminal.
Coordinates are given as pairs of numbers separated by a comma. As necessary,
each number in this pair can be preceded by one of the five coordinate specifiers. The
default is first , and if no coordinate system is given explicitly for y, the one for x is
used for both values. ^1^

You’ll see many examples of coordinate specifications in the rest of this chapter.

==== 7.2.2 Layers

Gnuplot draws graph elements onto the canvas in a well-defined sequence. You can
use this stacking order to place some elements visually “in front of” or “behind” other
elements.

Plot elements are organized into layers (see figure 7.3). Graph elements in a layer
that’s closer to the front obscure elements in layers further back.

Labels, arrows, and geometric shapes (objects) are organized in two layers, one of
which is (visually) behind the plotted data; the other one is on the top of the visual
stack. When creating a decoration, you can assign it to either of these two layers using
the keywords front and back ; the default is back . Within each layer, arrows are visu-
ally in front of labels, and geometric shapes are even further behind. As you’ll learn in
the next section, each arrow (or label or object) has a numeric tag, and this tag is used
to sort elements of the same type: arrows with lower tag numbers are drawn first, and
all arrows are drawn before any text labels are drawn.

A special layer, identified using the keyword behind , resides at the bottom of the
visual stack. Only objects (but no arrows or labels) can be added to this layer. You can
use this layer to provide a visual background (such as a solid color or a color gradient)
to the entire graph.

^1^
Although it may seem weird to use different coordinate systems in the same coordinate pair, this feature is
occasionally useful. For example, you can use the following command to place a vertical line at a fixed x loca-
tion and let it extend over the full range of the graph, independent of the y range: set arrow from 1.25,
graph 0 to 1.25, graph 1 .

// behind --> Only objects allowed in this layer
// back --> Within layer: objects labels arrows
// plot --> Curves drawn in command-line order
// key
// front --> Within layer: arrows labels objects

.Figure 7.3
image:https://drek4537l1klr.cloudfront.net/janert2/Figures/07fig03_alt.jpg[]

Figure 7.3 Stacking order of layers, front to back. Within each layer, 
objects are drawn first, followed by labels and arrows.
Curves are drawn in the order in which they appear in the plot command.



[[P130]]

Data and functions are plotted in the order in which they appear in the plot com-
mand, left to right. This means elements specified later in the plot command appear
in front of those given earlier.

Whereas the locations within the plane of the graph are essential when working
with decorations, the stacking order becomes relevant only for complicated graphs
consisting of many plot elements. For most day-to-day operations, you probably won’t
need to concern yourself with it. But you have control over the visual stack for those
special situations when you need it!

=== 7.3 Additional graph elements: decorations

I use the term decorations for all additional graphical elements that can be placed on
the graph but that don’t (primarily) represent data. The most important decorations
are text labels, closely followed by arrows, but gnuplot can also draw rectangles, cir-
cles, ellipses, and polygons.


==== 7.3.1 Common conventions

Labels, arrows, and objects share some conventions that apply to all of them equally.
I’ll summarize these conventions here so I don’t need to repeat this information for
each of the individual styles.

.CREATING DECORATIONS
*****
*****
All decorations are created using the set ... command (see chapter 5). It’s very
important to remember that this command does not generate a replot event: the deco-
rations won’t appear on the plot until the next plot , splot , replot , or refresh com-
mand has been issued!

Keep in mind that decorations aren’t taken into account by the autoscale feature,
which automatically attempts to adjust the plot ranges in such a way as to display the
relevant parts of the data. In other words, if a decoration (or part of it) falls outside
the plot range (either explicitly given or automatically selected), it will not appear on
the plot. (More on autoscaling in section 8.2.)

TIP: Decorations created with set ... won’t appear on the graph until the
entire plot is redrawn through a plot , replot , or equivalent command.

.IDENTIFYING DECORATIONS WITH TAGS
*****
*****
So that you can later refer to a specific object (such as an arrow or a text label), you
can give the object a numeric tag: for instance, set arrow 3 ... . Now you can make
changes that apply only to this arrow by providing the tag in the next call to set
arrow ; or you can eliminate the arrow using unset arrow 3 . Arrows, labels, and objects
have separate counters.

If you omit the label, gnuplot will assign the next unused integer automatically
(when using set ... ) or apply the command to all instances of the object (when using
unset ... ). The command unset arrow , without an explicit tag, removes all arrows
from the graph!

[[P131]]
You can see all defined arrows, together with their location and appearance
options, by using show arrow and including a tag (for example, show arrow 3 limits the
command to the corresponding element). Labels and objects can be listed using equiv-
alent commands. Because decorations are drawn onto the plot in the order of their tag
number, you can control visual stacking through appropriately assigned tag numbers.

TIP: When you’re using gnuplot interactively, it’s usually a good idea to
assign numeric tags explicitly and not rely on the automatically generated
tags. Almost invariably, you’ll want to modify a graph element created earlier,
and always using an explicit tag number ensures that you only edit the one
element you intend to.


==== 7.3.2 Arrows

Arrows are generated using the set arrow command, which has the following
options:

[source]
set arrow [{idx:tag}] from {pos:from} to {pos:to}
set arrow [{idx:tag}] from {pos:from} rto {pos:offset}
set arrow [{idx:tag}] from {pos:from} length {pos:len} angle {flt:degrees}
set arrow [{idx:tag}] [ nohead | head | heads | backhead ]
          [ size {flt:length} [,{flt:angle}] [,{flt:backangle}]
            [fixed] ]
          [ nofilled | empty | filled | noborder ]
          [ front | back ]
          [ lineoptions ]
set arrow [{idx:tag}] [ arrowstyle | as ] {idx:style}

Each arrow has a beginning and an end point. The starting point is always given explic-
itly, as a coordinate pair in any of gnuplot’s coordinate systems, but the end point can
be given in three different ways (see the first three lines in the previous snippet):

•  As an explicit end point coordinate using the to keyword. Example: set arrow
from 0,0 to 2,1 .

•  As a relative offset from the starting point, using rto . The horizontal and verti-
cal length of the offset are measured in units of the x and y axis, respectively. ^2^
Example: set arrow from 0,0 rto 2,0 draws a horizontal arrow that is two x-axis
units long.

•  As a length and an angle. The length is measured in units of the horizontal axis
but can be preceded by any of the permissible coordinate system specifiers. The
angle is given in degrees and measured counterclockwise from the positive x
axis. Example: set arrow from 0,0 length 2 angle 45 .

^2^
For logarithmic coordinates, the relative offset is multiplicative, not additive.

[[P132]]
Many aspects of the arrow’s appearance can be changed using the set arrow com-
mand. These specifications can be given either explicitly or by referencing a previ-
ously defined arrow style (using the arrowstyle keyword). In the next section, I’ll
explain the different appearance options; we’ll come back to predefined styles in
chapter 9.

Appearance options can be either specified separately or combined with the coor-
dinates in a single call. The following two code snippets show two equivalent ways to
define the same arrow:

[source]
set arrow 1 from 0,0 to 2,1
set arrow 1 nohead front
set arrow 1 from 0,0 to 2,1 nohead front

.CUSTOMIZING ARROW APPEARANCE
*****
*****
You can customize the appearance of an arrow, in particular the size and shape of its
head (or heads) and the look of its “backbone”:

•  Heads—By default, a head is drawn at the destination endpoint. Heads can be
suppressed entirely using nohead . The keyword heads draws heads at both ends;
backheads draws only a single head at the start point.

•  Head size and shape—You can change the size and shape of the head using the
keyword size followed by the length and the angle at the arrow tip, and—
optionally—the angle at the back of the head (see figure 7.4). Unless otherwise
specified, the length is measured in units of the primary horizontal axis; this
can be changed using any of the coordinate system specifiers (see figure 7.2).

All angles are measured in degrees; the back angle is ignored if the fill style is
nofilled (which is the default). ^3^

By default, the size of the arrow head is reduced for very short arrows; this
can be disabled using fixed immediately following the size.

•  Head color and fill style—By default, arrow heads aren’t filled and the back angle
is ignored. The keyword empty draws only the outline, filled draws the outline
and fills it, and noborder draws the filled area but not the outline. This matters,
because the outline extends, by one line width, beyond the end position of the
arrow; hence you may need to suppress the outline. It also matters if you’re using
a dashed line for the arrow and want to suppress a dashed outline for the head.
You can’t choose the fill color separately from the outline color. If you want a
red-filled arrow head with a black outline, you need to construct it from two
arrows, one on top of the other.

•  Layer assignment—Arrows can be assigned to the front or back layer.

•  Line options—All available line options can be used. They apply to the arrow’s
backbone and its head or outline.

^3^
The default values for the head size are size screen 0.0225,15,90 . Using the screen coordinate system
guarantees that the head size doesn’t change if the plot range does.


[[P133]]
Some examples of custom arrow heads are shown in figure 7.5.

.MORE TRICKS WITH ARROWS
*****
*****
The arrow facility is versatile and can be used for purposes other than placing explicit
arrows on a plot. Here are some ideas:

•  Because an arrow without a head is just a straight line, you can use set arrow
... to draw arbitrary straight lines on a plot. In particular, arrows can be used to
draw vertical lines. (You don’t need arrows to draw horizontal lines, of course; it’s
generally easier to use plot 1, -1 to draw horizontal lines at y = -1 and y = +1.)
•  The ability to mix different coordinate systems in the same coordinate specifica-
tion can come in handy in this context. For example, if you want to draw a verti-
cal line at x = 0.5 from the lower to the upper boundary, you can say set arrow

// Angle Backangle Length
.Figure 7.4
image:https://drek4537l1klr.cloudfront.net/janert2/Figures/07fig04.jpg[]

Figure 7.4 The parameters that control the shape of an arrowhead

// set arrow
// set arrow heads
// set arrow nohead
// set arrow heads size 0.3,90
// set arrow empty
// set arrow filled size 0.5,15,165
// set arrow empty 0.75,30,60
// (Check main text for description)

.Figure 7.5
image:https://drek4537l1klr.cloudfront.net/janert2/Figures/07fig05_alt.jpg[]

Figure 7.5 Different arrow forms and the commands used to generate them. See
listing 7.2 for the last one.


[[P134]]
from 0.5, graph 0 to 0.5, graph 1 without having to worry about the exact val-
ues of the vertical plot range.

•  You can use short arrows without heads to draw custom tic marks, if gnuplot’s
built-in tic marks are insufficient (see chapter 8 for more information on tic
marks).

•  Arrows with customized heads can be used to indicate a scale or range on a
graph—figure 7.8, later in the chapter, contains an arrow used for this purpose.
•  You can generate an arrow with two different heads by generating two single-
headed arrows back to back. You can also overlay arrows to generate more
sophisticated effects. The following listing shows the commands used to gener-
ate the bottom arrow in figure 7.5.

[source]
set arrow 1 from 0,-9 to 6, -9 size 0.5,30
set arrow 2 from 0,-9 to 5.75, -9 size 0.5,30
set arrow 3 from 0,-9 to 1, -9 backhead size 0.3,90

As you’ve seen, arrows are a versatile graph element. But more often than not, you’ll
want to combine them with some textual explanation. That’s what labels are for.

==== 7.3.3 Text labels

Text labels are a natural companion to arrows. The arrow shows the observer where to
look, and the label explains what’s happening:

[source]
set label [{idx:tag}] [ "{str:text}" ] [ at {pos:location} ]
    [ left | center | right ]
    [ rotate [ by {int:degrees} ] | norotate ]
    [ [no]boxed ]
    [ front | back ]
    [ point lt|pt {idx:pointtype}
              | ps {flt:pointsize} | nopoint ]
    [ offset {pos:off} ]
    [ hypertext ]
    [ noenhanced ]
    [ font "{str:name}[,{int:size}]" ]
    [ textcolor | tc [ {clr:colorspec}
                | lt {idx:type} | ls {idx:style} ] ]

The label text is typically a constant, but it can also be a string variable or any string-
valued expression. To obtain a formatted string, the sprintf() and gprintf() func-
tions are often useful. For example, to create a label (at the origin) showing the value
of π, truncated to two digits, you can use set label at 0,0 sprintf( "%.2f", pi ) .
(See section 5.1 for more information about string operations, in particular table 5.1.)

Listing 7.2 Commands to generate the double-feathered arrow in figure 7.5

[[P135]]
By default, the text is placed flush left at the position specified by the at ... loca-
tion. This can be changed using the left , center , and right keywords.

Gnuplot allows text to be rotated, but not all terminals support arbitrary angles.
Use the test command to see what’s possible (see section 10.1.3). If the text hasn’t
been rotated, you can draw a frame around it using boxed . The stacking order can be
controlled with front and back , as for arrows.

Using point , you can place a symbol at the position specified with at ; the text label
is shifted relative to it. The point style and size of the symbol can be fixed using lt
(line type), pt (point type), and ps (point size), and the offset can be customized
using offset . The nopoint option suppresses the point.

The hypertext option creates a label that is visible only when the mouse hovers near
the location of the label—specifically, near the symbol placed at the location of the
label. (The hypertext option can only be used together with the point option.) The
hypertext option isn’t available for all terminals. Currently, only the (interactive)
wxt , qt , and windows terminals support it, as well as the (browser-based) svg and
canvas terminals.

You can select the color of the text using textcolor (abbreviated tc ), followed by
either a color specification (see chapter 9) or the keyword linetype ( lt ) and the index
of a predefined line type. In this case, the color of the line type is applied to the text.
Finally, you can choose a specific font using the font option. The keyword
noenhanced suppresses the interpretation of enhanced-mode control characters in the
text string, even if enhanced mode is active for the current terminal. (Read chapter 10
for an in-depth discussion of font selection and enhanced text mode.)

In addition to the fully general set label facility that I just described, gnuplot offers
two specialized labeling commands: to add a label to any axis of the plot, or to add a title
to the entire graph. Both provide convenient shortcuts for common situations.

.TITLE
*****
*****
The title option is a label with some special defaults. For instance, it’s automatically
placed centered at the top of the graph, and the top margin of the graph is adjusted
accordingly.

The set title option takes the following arguments, which should be familiar
from the discussion of set label :

[source]
set title [ "{str:text}" ] [ offset {pos:off} ]
          [ font "{str:name}[,{int:size}]" ][ noenhanced ]
          [ textcolor | tc [ {clr:colorspec}
                      | lt {idx:type} | ls {idx:style} ] ]

Only the behavior of the offset directive requires an explanation. It can be used to
shift the title from its default position by a specified amount. What’s unusual is that by
default, it interprets its argument as given in the character coordinate system. With
this in mind, the following commands are entirely equivalent—both shift the title
down by the height of a single character:

[[P136]]
[source]
set title "..." offset 0,-1
set title "..." offset character 0,-1

.AXIS LABELS
*****
*****
The commands that place labels on the axes of a plot are also variants of the standard
set label command. Because labels can be placed on any axis, there’s an entire fam-
ily of related commands, all differentiated by prefixes (such as x and y ), that indicate
which axis a label belongs to. (We haven’t discussed these prefixes yet but will do so in
chapter 8.) In the following syntax summary, the underscore ( _ ) stands for any of the
permissible prefixes:

[source]
set _label ["{str:text}"] [ offset {pos:offset} ]
           [ rotate by {int:degrees} | parallel | norotate ]
           [ font "{str:name}[,{int:size}]" ] [ noenhanced ]
           [ textcolor | tc [ {clr:color}
                       | lt {idx:type}
                       | lt {idx:style} ] ]

The options are an almost strict subset of those available for the plain set label com-
mand. Check section 7.3.3 for details. The only new feature is the rotate parallel
directive. It applies only to three-dimensional plots (see appendix C) and rotates each
label such that it’s parallel to its axis (by default, the labels are printed horizontally in
three-dimensional plots).

Finally, keep in mind that both set title and the axis label commands are merely
standard text labels with some convenient defaults. If they don’t give you sufficient
control to achieve the effect you’re looking for, you can always use explicit set label
commands instead.

In addition to arrows and labels, which primarily are intended to add explanations
to a graph, gnuplot also lets you place arbitrary graph objects on a plot. You do so using
the set object command.


==== 7.3.4 Shapes or objects

The set object ... facility can place a variety of geometrical objects on a graph, such
as rectangles, circles, ellipses, and even arbitrary polygons. Shapes are different from
other graphical elements described so far: they’re less suited to represent data,
because their coordinates can’t be read from a file and instead must be set manually.
Shapes also don’t add semantic information to a graph in the way arrows and labels
do. They introduce functionality to gnuplot that you’d expect in a general-purpose
drawing program rather than in a data-visualization tool—but here they are, in case
that (special) need arises.

Because gnuplot’s shapes and objects are a bit outside this book’s primary goal
(which is to help you understand data with graphs), I won’t discuss them much further,
except for some cautionary notes. (See the standard reference documentation for
details.)

[[P137]]
All objects share a single tag counter, which is separate from the tag counters for
arrows and labels; but keep in mind that there is no separate tag counter for (say) cir-
cles as opposed to rectangles. All shapes are of type object ; the particular shape
(whether circle, rectangle, ellipse, or polygon) is specified as a property of each indi-
vidual object. For rectangles, you can define a global style using set style rectangle ;
the other shapes inherit properties from the global fill style, which is defined through
set style fill . (See section 9.4 for information on global styles.) Finally, let me
remind you that elements of type object are the only items that can be placed in the
layer at the bottom of the visual stack (using the behind keyword). This can be useful
to give a colored background to the entire graph. (Most contemporary terminals let
you specify a background color, which may be a more convenient alternative, pro-
vided you want to give a single color to the entire canvas area.)

Arrows, labels, and objects are graphical elements that you can use to make graphs
more interesting and more informative. But they aren’t the only elements that can go
on a plot besides data, and they aren’t even the most useful ones. The single most use-
ful element is probably the graph’s legend or key, which explains what all the lines and
symbols on the plot stand for. Gnuplot’s set key facility is very powerful and therefore
deserves a section by itself.


=== 7.4 The graph’s legend or key

We all know the little boxes on maps that explain what the different symbols mean:
thick red lines indicate highways, white is for country roads, and thin dashed lines
mean unpaved gravel. (And the odd-looking symbol with a roof? Right: that’s an out-
house.) In gnuplot, this box is called the key.

The key (or legend) explains the meaning of each type of line or symbol placed on
the plot. Because gnuplot generates a key automatically, it’s the most convenient way
to provide this sort of explanation. On the other hand, relying on the key separates
the information from the actual data. I therefore often find it preferable to place
arrows and labels directly on the graph instead, to explain the meaning of each curve
or data set. A separate key excels when there are so many curves that individual arrows
and labels would clutter the graph.

As usual, almost anything about the key can be configured. All available options
are summarized next:

[source]
set key [ on|off ] [ default ]
        [ [ at {pos:position} ]
            | [ inside | outside ] [ lmargin | rmargin | tmargin | bmargin ] ]
        [ left | right | center ] [ top | bottom | center ]
        [ vertical | horizontal ] [ Left | Right ]
        [ [no]reverse ] [ [no]invert ]
        [ maxrows [ auto | {int:rows} ] ] [ maxcols [ auto | {int:cols} ] ]
        [ [no]opaque ]
        [ samplen {flt:len} ] [ spacing {flt:factor} ]
        [ width {int:chars} ] [ height {int:chars} ]
        [ [no]title "{str:text}" ]
        [ [no]box [ lineoptions ] ]
        [ [no]enhanced ]
        [ font "str:font,int:size" ] [ textcolor | tc {clr:color} ]
        [ [no]autotitle [columnheader] ]

[[P138]]
As you can see, there are a lot of sub-options! To make information easier to find, I’ve
broken the following explanation into separate sections under their own headings.

==== 7.4.1 Turning the key on and off

You can suppress the key using either of the following two commands:

[source]
set key off
unset key

The command set key on enables it again.


==== 7.4.2 Placement

The key can be placed at any position on the canvas. The most straightforward (but
not necessarily the most convenient) method is to fix a specific location using the at
option. The location can be prefixed by any of the standard coordinate system pre-
fixes. The keywords left , right , top , bottom , and center align the key relative to the
specified position. For instance,

[source]
set key at 0,0 top left

places the top-left corner of the key at the origin of the coordinate system.
As usual, with great power comes great responsibility. When using the explicit at
option, gnuplot doesn’t rearrange the plot in any way to make room for the key: you
must do this explicitly. It’s usually more convenient to use the predefined keywords
that place the key relative to the graph; when you use these keywords, the borders of
the graph are automatically adjusted to make room for the key.

The keywords left , right , top , bottom , and center push the key into the desired
position. You can place the key inside the plot using inside (this is the default) or on
any one of the margins using lmargin , rmargin , tmargin , and bmargin (meaning the
left, right, top, and bottom margin, respectively). You can also use combinations of
position specifiers, such as set key top left . The effect of these options is cumula-
tive, so the following two examples have the same effect:

[source]
set key bottom left

or

[source]
set key bottom
set key left

[[P139]]
One surprising exception is that the keyword center by itself is interpreted as the cen-
ter of the graph (both horizontally and vertically).


==== 7.4.3 Layout

The samples in the key can be either stacked vertically or aligned horizontally using
the vertical and horizontal keywords. The alignment of the labels within the key
is controlled using the Left and Right options (note the capitals). The default is
vertical Left .

Usually, the textual description of the line sample is to the left, with the line sam-
ple on the right. The keyword reverse interchanges this arrangement.

Entries in the key are made in the order in which the corresponding data sets
occur in the plot command. If you want to sort entries in a specific way, you need to
list the data sets in the appropriate order in the plot command. But you can invert
the stacking order of the samples in the key using invert . This is mainly useful to
force the ordering of labels in the key to match the order of box types in a stacked his-
togram (see section E.4).

In general, the key is built up in its primary direction as far as possible. Assuming
that key entries are vertically stacked (which is the default), gnuplot will continue to
add lines to the key and only begin a new column when there is no more vertical room
on the graph. To change this behavior, use the maxrows keyword together with a
numeric argument: gnuplot will create a new column in the key whenever the number
of rows exceeds the specified value. The maxcols keyword has the equivalent effect
with a key that is built up horizontally.


==== 7.4.4 Appearance

By default, each entry in the key is created at the same time the corresponding line is
drawn on the graph. Later plot elements may therefore obscure parts of the key.
When the opaque keyword is given, the key is drawn after the graph is complete; more-
over, the key area is cleared before the key is created.

The length of the line sample in the key can be controlled using samplen . The
sample length is the sum of the tic length (see chapter 8) and the argument given to
samplen times the character width. A negative argument to samplen suppresses the
line sample.

The vertical spacing between lines in the key is controlled using spacing . The spac-
ing is based on the product of the point size and the argument to spacing . This param-
eter does not influence the horizontal spacing between entries in horizontal mode.
You can give the entire key a title (which is placed at the top of the key) using the
title option, and draw a frame around the key using box . In this case, you may need
to adjust the size of the box using the width and height parameters. Both take the
number of characters to be added to or subtracted from the calculated size of the key
before the box is drawn. In particular, if any text label in the key contains control char-
acters for enhanced text mode, the size of the autogenerated box may be incorrect.

[[P140]]
Finally, you can adjust the appearance of the lines used to draw the box using the usual
line options.

Enhanced text mode (see chapter 10) can be switched on or off for the key, inde-
pendent from the terminal’s behavior. You can set the default font for the key by using
the font keyword, but keep in mind that these settings can be overruled in the expla-
nations (see the next section).


==== 7.4.5 Explanations

The explanation is a bit of text that assigns a meaning to each line sample or symbol
type included in the key. The string for the explanation can come from one of two
places: the plot command or the data file. Let’s look at both methods.

.TAKING EXPLANATIONS FROM THE PLOT COMMAND
*****
*****
Usually, the explanatory text is taken from the plot command, using the title keyword:

[source]
plot "data" u 1:2 title "Experiment" w l, sin(x) title "Theory" w l

If no explicit title is set in the plot command, by default gnuplot will generate a stan-
dard description based on the filename and the selection of columns plotted. If you
don’t like this behavior, you can turn it off using set key noautotitle : now only
curves with an explicit title keyword in the plot command will have an entry in the
key. (The command set key autotitle restores the default behavior.)

There are two further ways to suppress parts or all of a key entry:

•  If an empty string is given as argument to the title keyword, gnuplot will gener-
ate no key entry for the corresponding data set: neither a line sample nor an
explanation will be shown.

•  To generate a key entry consisting only of the line sample, without a visible
explanation, use a string consisting only of whitespace as argument to the title
keyword in the plot command.

.TAKING EXPLANATIONS FROM THE DATA FILE
*****
*****
Instead of taking explanations for the key from the plot command, gnuplot can take
them from the first non-comment line in the data file. This is the same information used
in section 4.4.1 to identify a column in the using specification—now it’s used for the
graph’s key, as well.

Although the strings used in the key always come from the first non-comment line
in the data file, there are three ways to instruct gnuplot what to do:

•  Globally, using set key autotitle columnhead
•  As part of the plot command, via title columnhead
•  To have maximum control, using the function columnheader() as part of an
inline transformation in the using specification

[[P141]]
Let’s look at an example. The next listing shows a data file that you’ve seen before (in
listing 4.7). Note how the first line, containing the column headings (which will be
used in the key of the plot), isn’t a comment line.

Listing 7.3 Data for figures 7.6 and 7.7 (file: grains)

    Year    Wheat Barley Rye   <== Not a comment line!
    1990    8     6      14
    1991    10    5      12
    1992    10    7      15
    1993    11    5      13
    1994    9     6      12

You already know how to plot a file like this and generate proper key entries using
explicit explanations in the plot command (technically, you need to use skip 1 ,
because the first line isn’t commented out):

[source]
plot "grains" skip 1 u 1:2 t "Wheat" w lp, "" skip 1 u 1:3 t "Barley" w lp,
➥ "" skip 1 u 1:4 t "Rye" w lp

If you use global style settings instead, the plot command can be particularly simple
(see figure 7.6):

[source]
set style data linesp                    #<== A global style setting …
set key autotitle columnhead             #<== … and global key configuration …
plot "grains" u 1:2, "" u 1:3, "" u 1:4  #<== … result in a simple plot command.

.Figure 7.4
image:https://drek4537l1klr.cloudfront.net/janert2/Figures/07fig06_alt.jpg[]

Figure 7.6 Using set key autotitle columnhead , key entries are taken from
the first non-comment line in the data file. See listing 7.3 for the data file.

[[P142]]
Rather than use a global directive, you can tell gnuplot to take the explanation from
the data file within the plot command. Doing so lets you modify the behavior on a
case-by-case basis:

[source]
plot "grains" u 1:2 t columnhead w lp,   #<== Takes the explanation from the file
➥ "" skip 1 u 1:3 t "Brown Barley" w lp #<== Explicitly provided explanation
➥ "" skip 1 u 1:4 t "" w lp             #<== Suppresses the key entry

Using title columnhead as part of the plot command instructs gnuplot to take the
explanation for that column from the header entry for the same column. If you want
more control (for instance, because you want to specify a different column, or you’re
applying an inline transformation that combines multiple columns), you can use the
columnheader() function. 4 The argument to columnheader should evaluate to an
integer, which is interpreted as a column number; the function returns the contents
of the first non-comment line in this column as a string. This string can either be sup-
plied to the title keyword in the plot directly or be part of a string expression. The
next code snippet shows all these variants:

[source]
plot "grains" u 1:2 t columnhead w lp,          #<== Same column
➥ "" u 1:3 t columnhead(3) w lp,               #<== Arbitrary column
➥ "" u 1:4 t "Black " . columnhead(4) w lp     #<== String expression

Note that the title can be taken from a different column than the data, which can be
useful in combination with data transformations: commands such as plot "data"
using 1:($2/$3) title columnhead(2) are legal.

The ability to take explanations directly from the data file is an interesting feature,
adding significant convenience in particular when you’re including many data sets in
a single plot. Nevertheless, I’m a bit uncomfortable with the way it mixes data and com-
ments in the same file without an easy way to distinguish the two; files in this format are
harder to use with data-processing filters or as input to other programs. (I’d probably
have preferred to make the line containing the column heads a comment line and
indicate its use as title information through a special marker, such as a doubled hash-
mark or other comment character at the beginning of the line.) Judge for yourself.

.PLACING EXPLANATIONS ON THE GRAPH
*****
*****
I quickly want to mention another new feature. Traditionally, explanations are visu-
ally grouped together to form the key. You can now also put some (or all) explana-
tions onto the graph itself, either at the beginning or the end of the line they’re
describing (see figure 7.7). To do so, include at beginning or at end after the title
keyword in the plot command:

^4^
The columnheader() function is new. In previous versions of gnuplot, this effect was achieved by supplying
the column number directly as an argument to the title keyword.


[[P143]]

[source]
unset key
plot [1989:1995] "grains" u 1:2 t "Wheat" at beginning w lp,    #➊
➥               "" u 1:3 t columnhead at end w lp,             #➋
➥               "" u 1:4 t at beginning w lp                   #➌

• ➊ Explicit description at beginning
• ➋ Description from column head at end
• ➌ Default description at beginning

Notice that the explanation string may be missing, but the title keyword (or its
abbreviated form t ) must be present. Also keep in mind that you have no fine control
over the placement of the explanation. Furthermore, gnuplot won’t adjust plot ranges
automatically to make room for these labels: you have to do so yourself. If you want
more control, use the set label facility (see section 7.3.3).


==== 7.4.6 Default settings

Just to provide a reference, the default settings for the key are

[source]
set key on right top vertical Right noreverse noinvert autotitle
➥ samplen 4 spacing 1.25 title '' nobox

The previous command is equivalent to the much shorter

[source]
set key default

which can occasionally be helpful to restore sanity when you’re experimenting with
key placement and layout.

.Figure 7.7
image:https://drek4537l1klr.cloudfront.net/janert2/Figures/07fig07_alt.jpg[]

Figure 7.7 Explanations can be placed at the beginning or end of the curves rather
than grouped together in a global key.


[[P144]]
Now that you’ve seen all the different graph elements you can use in a gnuplot fig-
ure, it’s time to put everything together and look at a worked example. That’s what
we’ll do next.


=== 7.5 Worked example: features of a spectrum

To demonstrate how to use all the features together, let’s study a more extensive exam-
ple (see figure 7.8). The plot shows some experimental data, together with two theo-
retical curves that might explain the data from the experiment.

The folllowing listing gives the commands used to generate this graph, as they would
be entered at the gnuplot prompt. Let’s step through them in detail—there is much
to learn.

Listing 7.4 Commands for figure 7.8 (file: spectrum.gp)

[source]
set title "Scattering: Data and Theory"                      #➊Title
set xlabel "Frequency offset"                                #➋Axis labels
set ylabel "Relative intensity"
set key top left box title "Legend" height .5                #➌Key
set arrow 1 from -4,.35 to -3.4,0.2                          #➍Arrow and label
set label 1 "Cusp at x=- π ?" at -6,0.4
set arrow 2 from 5,-.2 to 5,.95 nohead dashtype '-' lc black #➎Vertical line
set label 2 "Singularity at x=5" at 5,1 center
set arrow 3 from -1,0.2 to 1,0.2 heads size 0.1,90           #➏Scale indicator
set label 3 "Full Width at\nHalf Maximum" at 0,0.125 center  #➐Label with line break
plot [-7:7][-.2:1.1] "spectrum" u 1:2 t "Data" w p pt 7,     #➑Plot command
➥ 1/(1+x**2) t "Lorentzian", exp(-x**2) t "Gaussian"


.Figure 7.8
image:https://drek4537l1klr.cloudfront.net/janert2/Figures/07fig08_alt.jpg[]

Figure 7.8 A complicated plot. See listing 7.4 for the commands used to generate it.

[[P145]]

The graph receives an overall title ➊, and both axes are labeled ➋. The key is moved
to the top-left corner, so it doesn’t interfere with the data, and surrounded with a box
➌ . The key gets its own title, which makes it necessary to increase its overall height a
bit to give it a less crowded appearance.

An arrow and a label are used to point out an oddity in the data ➍. The label con-
tains the Unicode character π (see the sidebar in section 5.1 for more information on
Unicode and how to enter Unicode characters in gnuplot).

An arrow without heads is used to create a dashed, vertical line ➎. The dashed line
shows the vertical asymptote as the data approaches the singularity at x=5. (Dash types
will be introduced in section 9.2.2.)

The scale indicator is yet another creative use for an arrow, this time with two cus-
tomized heads ➏. This arrow doesn’t point out a feature in the graph, but gives an
indication of scale. (“Full Width at Half Maximum” is commonly used in spectroscopy
to measure the width of a spectral line.) The label for this arrow contains an explicit
line break so that it spreads over two lines ➐. Remember from chapter 5 that escaped
characters (such as \n here) in double-quoted strings are interpreted as control char-
acters. Finally, finally, the data is plotted ➑!

I hope this example gives you an idea how you can use decorations to improve
your graphs. Arrows and labels can be used to explain data and point out specific fea-
tures, but nothing prevents you from getting more creative.


=== 7.6 Summary

This chapter explained techniques for putting additional, decorative graphical ele-
ments on a plot: things like arrows and text labels. Because it’s such an important tool
to help a viewer understand a complicated graph, I spent a lot of time explaining how
to customize and tweak the graph’s key or legend.

You also learned how to specify locations on a graph; I introduced the coordinate
systems gnuplot uses for that purpose. I also discussed the layers that make up the
graphical stacking order.

Decorative graphical elements (such as those in this chapter) are important, even
though they don’t represent data. Through these additional decorations and text
labels, a graph receives its semantics: only if there is text can an onlooker understand
what the data shown in the graph means.

In the following chapter, we’ll look at the last important elements that give a plot
context: the axes and their subdivisions and labels. Stay tuned.


[[P146]][[ch08]]

== Chaper 8 All about axes

This chapter covers

•  Using multiple axes
•  Selecting plot ranges
•  Customizing tic marks and tic labels
•  Plotting time series with gnuplot

In this chapter, we finally come to coordinate axes and their labeling. Treating
them last, after discussing plot styles and decorations, may seem surprising, given
how critical well-labeled coordinate axes are to achieving an informative graph. On
the other hand, gnuplot’s default behavior for axes-related options is adequate in
almost all situations, so explicit customization is rarely required.

One topic deserves special consideration: the use of multiple axes on the same
plot. We’ll discuss this first. Then we’ll move on and describe all the ways axes and
their labels can be customized. Finally, we’ll treat the special case when one axis
(usually the x axis) represents time: in other words, when the plot shows a time
series. Time-series plots pose special challenges, because the labels aren’t numeric.
Instead, you need to worry about things such as the names of months and week-
days—potentially in different languages! This has long been a problem to gnuplot
users, so I’ll devote significant space to this application. But first, let’s talk about
multiple axes on the same plot.


[[P147]]

=== 8.1 Multiple axes

Gnuplot gives you the ability to plot graphs using two different coordinate systems
within the same plot. Typically, these coordinate systems share one axis (otherwise
there’s no good reason to have them on the same plot), but they may also be entirely
independent.

Plots involving two different y axes usually make the most sense when you want to
compare side by side two data sets that have very different units. As a typical example,
let’s study figure 8.1, which compares the average ice cream consumption (in some
community) over consecutive four-week periods with the mean temperature during
the same period. ^1^

Figure 8.1 is a good example of why you might want to use multiple axes on a plot:
the two quantities (ice cream consumption and temperature) are of a different nature
and are also numerically quite different. Yet once you put them next to each other,
the correlation becomes clear (not too surprisingly, in this example).

.Figure 8.1
image:https://drek4537l1klr.cloudfront.net/janert2/Figures/08fig01_alt.jpg[]

Figure 8.1 Using multiple axes on a plot to compare two different quantities side by
side. (See listing 8.2 to find out how this plot was made.)

^1^
This example was inspired by the “Ice Cream Consumption” story, found in the StatLib’s Data and Story
Library (DASL) at http://lib.stat.cmu.edu/DASL/Datafiles/IceCream.html.

==== 8.1.1 Terminology

As you’ve just seen, gnuplot can handle two sets of axes on a single plot. The conse-
quence is that all commands and options to manipulate axes-related properties come

[[P148]]
in two versions—one for each set of axes. This section summarizes the naming con-
ventions associated with these commands.

The primary coordinate system is usually plotted along the bottom and left bor-
ders of the graph. (This corresponds to the first coordinate system introduced in
section 7.2.) If the secondary system ( second ) is used, it’s plotted along the top and
right borders.

By default, the secondary system isn’t used. Instead, the tic marks (but not the
labels) of the primary system are mirrored on opposite sides of the plot (that is, on
the top and right borders, respectively).

All options that modify aspects of the coordinate systems can be applied to any of the
axes: either the x or the y axis, in either the primary or the secondary coordinate system.
The commands and options are prefixed to indicate which specific axis a command
should be applied to (see table 8.1). Omitting the prefix applies the option to all axes.
In the rest of this chapter, I’ll frequently discuss only one variant of any option—typi-
cally the one for the x axis of the primary coordinate system. You should keep in mind
that everything applies to all other axes as well, just by selecting the appropriate prefix
per table 8.1.


==== 8.1.2 Plotting with two coordinate systems

The best way to understand how multiple coordinate systems are used in the same
plot is through an example. Listing 8.1 shows the beginning of the data file from fig-
ure 8.1; the complete set of commands used to generate the plot from the data file is
in listing 8.2.

            Primary Secondary
    x axis  x       x2
    y axis  y       y2

Table 8.1 Prefixes used to indicate the selected coordinate system

[source]
    # Date      Consumption[g]  Temperature[Celsius]
    1951-04-01  179.8           6.01
    1951-04-29  180.8           13.34
    1951-05-27  186.5           17.78
    1951-06-24  202.1           19.38
    1951-07-22  190.1           19.48
    ...

Listing 8.1 Incomplete data for figure 8.1 (file: icecream)

[source]
set xdata time
set timefmt "%Y-%m-%d"
set xtics format "%d %b"
set ytics nomirror      #<== Switches mirroring of the principal system off
set y2tics              #<== Switches the secondary system on
set ylabel "Mean ice cream consumption per head [grams]"
set y2label "Mean temperature [Celsius]"
set key top left reverse Left
plot ["1951-03-25":]
➥ "icecream" u 1:2 t "Ice cream" axes x1y1 w lp,
➥ "" u 1:3 axes x1y2 t "Temperature" w lp

Listing 8.2 Commands for figure 8.1 using data from listing 8.1 (file: icecream.gp)

[[P149]]
The first three lines (from set timefmt to set xdata ) tell gnuplot how to parse and for-
mat the calendar date used along the x axis. We’ll discuss them in section 8.4.
Next, the mirroring of the primary axis’ tic marks is switched off on the opposite
(right) side of the plot ( set ytics nomirror ), and instead tic marks for the second-
ary y axis ( set y2tics ) are switched on.

Explicit labels are placed on both vertical axes—this step is crucial when using
multiple axes, because otherwise the viewer has no chance of figuring out which data
set goes with which axis. The key is modified from its default location and appearance
(see section 7.4 if you need a refresher on any of the options).

Finally, the only new thing in the actual plot command is the use of the axes key-
word with its arguments. These directives tell the plot command which combination
of axes to use for each data set. For example, axes x1y2 means that the data should be
plotted according to the primary x axis, but the secondary y axis. There are four possi-
ble combinations of axes that can be used, and they can be selected using x1y1 , x1y2 ,
x2y1 , and x2y2 .


.Should you do it?
******
Multiple axes on a single plot are occasionally frowned upon, because they can easily
be abused to manipulate the message of a graph. Look at the figure at the end of
this sidebar. The top-left panel shows both data sets drawn to the same scale. Both
curves grow, but one grows more strongly than the other.

The other panels show exactly the same data, but look how different the appearance
is in each one! The curve that seems to be growing most strongly in the top-right
panel is the one that is lagging behind in the original graph. And in the bottom two
panels, both curves seem to grow at an equal rate. These dramatically different
appearances were achieved solely by manipulating the plot ranges for each curve
individually.

Dual axes have their uses. They can be helpful (even necessary) to combine two data
sets with very different scales in a single graph. But you must always take care,
because the ability to select different plot ranges in a single graph makes dual-axes
plots open to the kind of abuse you see in the figure.

If you choose to use multiple axes, it’s mandatory that you indicate which scale
applies to which curve. In the figure shown here, this information is intentionally (and
maliciously) omitted, to emphasize the problems that can occur in this kind of graph.
When using dual axes, always include an explicit label stating which axis applies to
which curve!

image:https://drek4537l1klr.cloudfront.net/janert2/Figures/150fig01_alt.jpg[]

The malicious effect of not-to-scale graphs. The data in all four panels is the same, but the
scales have been changed for both curves independently.
******


[[P150]]

==== 8.1.3 Linking axes

In the previous section, you learned how to plot two curves representing different and
independent quantities (ice cream consumption and temperature) on the same plot.
In this section, we’ll consider a related problem: how to plot two curves representing
different but related quantities.

Let’s look at an example. Figure 8.2 shows two data files, side by side. Both contain
temperature readings for the same date range, but for two different locations (New
York City, USA and Frankfurt a.M., Germany) and in two different units (Fahrenheit
and Celsius). ^2^

^2^
Weather data is available from the respective government services: http://mng.bz/V299 and www.dwd.de.


[[P151]]
Because both data sets show the same kind of data, it makes sense to plot them in the
same graph. Nevertheless, because the units are different, the two data sets can’t just
share a single y axis. Of course, you could use inline transformations (see section 3.3)
to transform (say) the Fahrenheit values into Celsius and plot them—but in order to
easily go back and forth between both temperature systems, it would be nice if you
could retain both units in the same plot.

This is where gnuplot’s new set link facility comes in. Using set link , you can
make the values on one axis dependent on the values on the opposite axis. All you
need to do is provide a link function that maps values from one system to the other,
together with its inverse.

In this example, Celsius must be mapped to Fahrenheit and vice versa. The two
temperature systems are related to each other by the following formulas:

    Fahrenheit = (9/5)*Celsius + 32
    Celsius = (5/9)*(Fahrenheit - 32)

Using these formulas, you can set up the link between the two vertical axes:

[source]
set link y2 via (9/5.)*y+32 inverse (5/9.)*(y-32)

This establishes a link between the primary vertical axis (the y axis, on the left),
which shows temperatures in Celsius, and the secondary vertical axis (the y2 axis, on
the right), which shows values in Fahrenheit. You can now plot both files using the
commands from listing 8.3; the resulting graph is shown in figure 8.3. (See listing 8.2
for an explanation of the commands at the beginning of this example.)

    # Frankfurt/M   Celsius           # New York    Fahrenheit
    2014-11-01      9.3               2014-11-01    45
    2014-11-02      10.2              2014-11-02    45
    2014-11-03      12.9              2014-11-03    50
    2014-11-04      12.3              2014-11-04    61
    2014-11-05      9.3               2014-11-05    60
    2014-11-06      6.6               2014-11-06    53
    2014-11-07      5.8               2014-11-07    47

Figure 8.2 Two data sets showing daily temperatures. Note that the data sets use
different units.


[[P152]]

Listing 8.3 Commands for figure 8.3 using data from figure 8.2 (file: link.gp)

[source]
set xdata time
set timefmt "%Y-%m-%d"
set xtics format "%d%b%y"
set ytics nomirror
set y2tics
set ylabel "Celsius"
set y2label "Fahrenheit"
set link y2 via (9/5.)*y+32 inverse (5/9.)*(y-32)
plot "frankfurt" u 1:2 axis x1y1 w lp, "newyork" u 1:2 axis x1y2 w lp

This example should give you a sense how the set link feature can be used. Here are
a few additional details:

•  Links can be established between the two horizontal axes and between the two
vertical axes using set link x2 and set link y2 , respectively.

•  When linking the horizontal axes using set link x2 , you must call the dummy
variable in the link functions x ; when linking the vertical axes using set link
y2 , the dummy variable in the link functions must be called y .

•  You can remove the link between either set of axes using unset link x2 or
unset link y2 .


.Figure 8.3
image:https://drek4537l1klr.cloudfront.net/janert2/Figures/08fig03_alt.jpg[]

Figure 8.3 Linking two axes using link . See the text for details and listing 8.3 for
the commands.


[[P153]]
•  Keep in mind that the link function must be invertible! This isn’t a problem
when the link function is linear (as in the example), but non-linear functions
are, in general, not invertible (or are invertible only over a limited domain—
the function x 2 , for instance, is invertible for all non-negative values of x).
The set link feature is relatively new and strikes me (at the time of this writing) as
still somewhat immature. Feel free to experiment further!

=== 8.2 Selecting plot ranges

I introduced plot ranges in chapter 2, but only in a limited form as an inline specifica-
tion to the plot command, something like this:

[source]
plot [-10:10][-2:2] sin(x)

The first pair of numbers in brackets sets the desired x range, and the second pair of
numbers in brackets fixes the y range. Both terms are optional—if you leave them out,
gnuplot will select ranges automatically.

.Do-it-yourself log plots
******
The link feature can be used to create log plots. Doing so may shed more light on
what link can do.

Let’s consider the data set displayed in the sidebar in section 3.4. Back then, I used
set logscale y to generate a semi-logarithmic plot. Now, I’ll use link instead.

In a semi-log plot, you plot the logarithm of the y value. You can do this using a simple
inline transformation:

[source]
plot "data" u 1:(log10($2)) w lp

This gives the appearance of a semi-log plot, but the tic marks along the vertical axis
show not the actual y values from the data sets, but rather their logarithms (to base
10)—so, a value of 10 corresponds to a tic mark labeled 1, a value of 100 to a tic
mark labeled 2, and so on. (See the scale on the right in the figure in the sidebar in
section 3.4.)

The link feature makes it possible to have an axis showing the original y values:

[source]
set link y2 via 10**y inverse log10(y)

One problem is that gnuplot isn’t very clever at figuring out where to place tic marks
for the dependent (linked) axis, which means you have to specify them explicitly
using a command like this (the set _tics family of options is explained later in this
chapter):

[source]
set y2tics ( 1, 2, 5, 10, 20, 50, 100, 200, 500, 1000, 2000, 5000 )

Although you must specify the tic marks explicitly, link lets gnuplot figure out where
along the vertical axis these tic marks should go. The resulting plot is equivalent to
the figure in section 3.4 (with the tic marks on the left and right interchanged).
******

[[P154]]
This is enough—most of the time. But using this syntax, only the plot ranges of the
primary coordinate system can be fixed, which is insufficient if you want to use multi-
ple axes on the same plot. Also, the inline syntax doesn’t work well when you’re
attempting to change the plot range with the mouse. Let’s look at gnuplot’s facilities
for controlling plot ranges in more detail.

TIP: A distinctive property of good graphs is that they show what is relevant.
Plot ranges are the primary means of achieving this goal. Well-selected plot
ranges are essential!

==== 8.2.1 What you need to know for interactive work

The inline syntax is a shorthand for the family of _range commands. (In this discus-
sion, the underscore is a placeholder for any one of the prefixes from table 8.1.) To
adjust plot ranges for the primary and secondary systems independently, you need to
issue separate set _range commands using different prefixes.

The explicit set _range commands expect a pair of numbers enclosed in square
brackets, similar to the syntax for inline range specifications. The following listing
shows some examples of _range commands in action.

[source]
set xrange [-1:5]       #<== Explicit min and max
set xrange [:10]        #<== Leaves the min unaffected; sets the max explicitly
set yrange [3:*]        #<== Sets the min explicitly; uses autoscaling for the max
set yrange [:sqrt(2)]   #<== Numeric expressions are legal.
set yrange [1:0]        #<== Inverted axes are possible.

Listing 8.4 Permissible syntax for setting plot ranges

In addition to providing explicit lower and upper boundaries, you can leave one or
both of the numbers blank, in which case the corresponding value won’t be changed.
Alternatively, you can supply a star ( * ) to turn on autoscaling for that particular value.
Autoscaling means gnuplot selects a plot range that is at least large enough to include
all data points, but gnuplot may extend the range in order to include the next full tic
mark position. This behavior can be suppressed using the noextend specifier. Using
the following setting, the vertical range is bounded precisely by the minimal and max-
imal values in the plotted data set:

[source]
set yrange [*:*] noextend

The inline shorthand (like plot [0:1] ... ) only affects the command line it’s part
of—it doesn’t reset the overall plot ranges, the way set _range does. This is why you
don’t need to use the * indicator to turn on vertical autoscaling when using only the
shorthand: by default, the plot ranges are [-10:10] horizontally and [*:*] vertically.
Issuing a command like plot [][0:1] ... doesn’t change the global autoscale setting
for the y axis, so a subsequent command like plot [][0:] ... will autoscale the posi-
tive y axis. But if the vertical range has been fixed globally—using set yrange [0:5] ,



[[P155]]
for example—then plot [][0:] ... will honor the explicit plot range. To reestablish
autoscaling behavior, you need to turn it on explicitly, either inline ( plot [][0:*]
... ) or using set yrange [0:*] .


==== 8.2.2 What you might want to know for batch processing

Special considerations apply when creating large numbers of graphs automatically.
Imagine, for instance, that you want to monitor traffic across many websites—in
hosted or enterprise environments, this may mean following hundreds of separate
traffic streams. Furthermore, the traffic to these sites is likely to vary by several orders
of magnitude: a busy site may see tens of thousands of clicks a day (or more), but
other sites may see few if any clicks.

Obviously, you don’t want to select plot ranges manually (for all the sites—every
day!). But relying entirely on gnuplot to adapt the plot range to the available data
often isn’t satisfactory either. For some of the very slow sites (those that show at most a
single click a day), gnuplot will select a vertical plot range of [0:1] , which isn’t a visu-
ally pleasing solution. It would be better if you could make sure the plot range is
always at least [0:10] but larger if need be. Fortunately, gnuplot let’s you do just that:
you can define bounds for autoscaled ranges. The next listing shows you the syntax.

[source]
set yrange [*:*]        #<== Unbounded autoscaling
set yrange [0:5<*]      #<== Lower bound is fixed; upper bound is 5 or more
set yrange [0:5<*<10]   #<== Lower bound is fixed; upper bound is between 5 and 10
set yrange [-10<*:*<10] #<== Double-sided bound, not exceeding [-10:10]

Other times, it may make sense to let autoscaling apply to only some of the lines in a
plot. For example, imagine that you want to plot two data sets together, one of which
is corrupted by occasional crazy outliers. In that case, you may want to let gnuplot use
only the smoother curve to determine the plot range. There are two ways to do this.
Using the noautoscale ( noauto for short) keyword, you can flag those data sets in a
plot command that should be disregarded when determining the plot range: ^3^

[source]
plot "smooth" u 1:2, "noisy" u 1:2 noautoscale

Another approach is to evaluate the data sets first and then use the information
obtained to calculate the plot range. The set _range family of options provides a way
of doing this (using writeback and restore ), but the stats command (see section
5.6) and the internal variables it defines are probably more straightforward to use. ^4^
Listing 8.5 Restricting plot ranges to bounded intervals

^3^
The noautoscale directive is available only when plotting data files, not when plotting functions. If you want
to use it with functions, you need to “fake” it using the "+" pseudofile facility (see section 4.5).

^4^
Another related option is set autoscale , possibly in conjunction with set offset , but it seems overly com-
plicated and largely redundant. For more information about this, as well as about writeback and restore ,
see the standard reference documentation.


[[P156]]

=== 8.3 Tic marks

Subdivision markers or tic marks are placed on the axes of a plot to indicate the scale
of the graph. Only if tic marks are present can a viewer infer quantitative information
from a graph. Suitably chosen tic marks are therefore of critical importance to any
well-constructed graph. Fortunately, gnuplot handles tic marks well on its own, and
you rarely need to customize tic-mark generation and labeling. But for the few cases
when you do have special requests, here’s how to do it.


==== 8.3.1 Overview and common conventions

Gnuplot distinguishes between major and minor tic marks. The difference is that major
tic marks also carry a textual label (normally a number), whereas minor tic marks
don’t. By default, only major tic marks are used, except for logarithmic axes, where
both major and minor tic marks are drawn by default.

Major tic marks are by far the more important of the two types. The appearance of
major tic marks and their labels is controlled through the family of set _tics options.
The available sub-options are as follows:

[source]
set _tics [ axis | border ]
          [ in | out ] [ front | back ]
          [ scale [ default | {flt:major} [,{flt:minor}] ] ]
          [ [no]mirror ]
          [ rotate [by {flt:ang}] | norotate ]
          [ left | right | center | autojustify ]
          [ offset {pos:offset} | nooffset ]
          [ font "{str:name} [,{int:size}]" ]
          [ textcolor | tc {clr:color} ]
          [ format {"str:format"} ]

As before, the underscore _ is a placeholder for any one of the available axes identifi-
ers (see table 8.1), indicating which axis the settings should be applied to. If you omit
the identifier ( set tics ... ), then the chosen style is applied to all axes.

The location and frequency of tic marks is controlled through another set of sub-
options to set _tics . These sub-options only make sense when applied to a specific
axis (meaning you can’t leave the _ placeholder blank in this case):

[source]
set _tics ...
    [ add ]
    [ autofreq
        | {flt:incr}
        | {flt:start}, {flt:incr} [,{flt:end}]
        | ( ["{str:label}"] {flt:pos} [ 0 | 1 ]
        [, ["{str:label}"] ... ] ) ]

We’ll next step through these options: first we’ll discuss how to modify the appearance
and placement of tic marks, and then we’ll talk about labels, before discussing ways to
control the location and frequency of tic marks. We’ll round off this section with some
related features that are handled using commands other than set _tics .


[[P157]]

==== 8.3.2 Tic mark appearance and placement

By default, gnuplot draws tic marks on the border of the plot, extending inward
into the plot region, but they can be drawn toward the outside using the out
option. This is useful in particular when the tic marks would interfere with the data.
Tic marks can be drawn in either the front or the back layer of the visual stack (see
section 7.2).

Instead of being placed along the borders of the plot, tic marks can also be drawn
along the zero axis (for instance, set xtics axis draws tic marks along the line of
the plot where y equals 0). If the zero axis isn’t within the plot range, the tic marks are
drawn along the border.

The scale parameter controls the size of both major and minor tic marks. If no
size for the minor tic marks is given explicitly, it’s set to half the size of the major
marks. The size is given relative to the default size of 1.0 for major tic marks.
By default, the tic marks (but not their labels) of the primary coordinate system
are mirrored on the opposite side. You can turn off this behavior using nomirror .
You want to do this when you’re using two coordinate systems in one plot (such as
both the y and the y2 systems), but there are also other situations when mirroring is
undesirable.

.Why gnuplot’s defaults make sense
*****
Graphs drawn using gnuplot can often be recognized by their overall appearance
(unless the defaults have been modified significantly, of course): the plot is sur-
rounded by a frame (or border), with tic marks and labels on the frame. This format
may at times strike you as a bit tired, but I’d like to emphasize some advantages that
should make you hesitate at least a moment before rejecting it:

•  The frame on all four sides provides a clear visual boundary for the data. If
only two axes were drawn along the bottom and left side, data points in the
upper-right corner might get (visually) lost.

•  The other two sides of the frame (top and right side) can be used to mirror
the primary tic marks or to carry a set of secondary tic marks, thus making
qualitative evaluation of the data easier.

•  Because tic marks and their labels are drawn along the border of the graph
(as opposed to along the zero axis) they’re less likely to interfere with the
data.

If you nevertheless want to give your graphs a different appearance, we’ll discuss
some options in section 12.6.
*****


[[P158]]
.A WORKED EXAMPLE
*****
*****

Figure 8.4 shows a graph that doesn’t use the gnuplot default format: it has no border,
and instead uses explicitly drawn coordinate axes (zero axes). Because there is no bor-
der, the tic marks are drawn along the coordinate axes.


You’ll find the commands for this figure in listing 8.6. First the border is switched off,
but the coordinate axes are drawn with solid black lines. (See section 8.3.6 later in this
chapter for the set zeroaxis command. The line type -1 is guaranteed to draw a
solid black line; see table 9.3.) Then gnuplot is instructed to place tic marks along the
coordinate axis (instead of the border) with set xtics axis (and equivalent for the
vertical axis). Finally, a function is plotted. ^5^

[source]
unset border
set zeroaxis lt -1
set xtics axis
set ytics axis
plot [-8:4] airy(x)

Listing 8.6 Commands for figure 8.4 (file: var-axes.gp)

TIP: Airy函数是微分方程 y'' - xy = 0 的两个线性独立解，通常记作 Ai(x) 和 Bi(x)。

^5^
The Airy function is the solution to the differential equation y ″ - xy = 0 that is bounded everywhere. It’s impor-
tant in the approximation theory of differential equations.


.Figure 8.4
image:https://drek4537l1klr.cloudfront.net/janert2/Figures/08fig04_alt.jpg[]

Figure 8.4 Nonstandard placement of coordinate axes and tic marks. See listing 8.6.

[[P159]]
The resulting graph is closer to what is common in mathematical contexts, but the dis-
advantages are clear: the curve interferes with the tic marks whenever it crosses the
axes. (The partial obscuring of the zeros near the origin could be avoided through
smarter placement of the labels and isn’t a fundamental problem.)

==== 8.3.3 Tic labels

The text labels associated with major tic marks can be rotated and shifted using
rotate and offset . If rotate is used without an explicit angle (in degrees), the labels
are turned by 90 degrees to the left. You can adjust the position of the labels using
offset . The relative shift can be specified in one of the five usual coordinate systems
(see section 7.2); if none is specified, the character coordinate system is assumed.
By default, tic labels are justified depending on the axis and the rotation angle
( autojustify ). Alternatively, you can control the alignment explicitly with left ,
right , and center . Text font and color can be selected in the usual fashion.

.FORMATTING TIC LABELS
*****
*****
You can change the formatting used for the labels placed at the major tic marks using
set _tics format , followed by a string that describes the desired format. ^6^ The format
string is similar to the format string used by the printf() family of functions from the
standard C library. In addition, gnuplot uses some extra format (or conversion) specifi-
ers, which are listed in table 8.2. These conversion specifiers only apply to numeric
arguments; for date/time values, check section 8.4.

TIP: Don’t attempt to build up date and time strings manually; use dedicated
conversion specifiers for time series (see section 8.4).

If the % character is encountered in the format string, it’s interpreted as the beginning
of a conversion specifier. It must be followed by one of the characters from table 8.2.
Several modifiers can be placed between the % character and the conversion specifier;
see table 8.3. In general, gnuplot’s functionality is built on top of the system’s C
library—check its documentation for additional details.

The format string can also contain arbitrary characters, which are placed verbatim
onto the plot. This makes it possible, for instance, to print the units (such as kg or cm )
together with the numerical values.

Finally, providing an empty string as the format specifier (as in set xtics format
"" ) is a way to suppress the generation of tic labels, although the tic marks are drawn.

^6^
Traditionally, formatting of tic labels was accomplished using the set format option. This option is still avail-
able, but it’s now redundant and should probably be avoided in favor of the more consistent method
described in the text.


[[P160]]

Table 8.2 Conversion specifiers understood by the gprintf(...) function. See table 8.4 and table
8.5 for conversion specifiers for date and time values, and table 5.1 for information on gprintf(...) .

    Conversion 
    specifier   Description
    %f          Floating-point notation
    %e or %E    Exponential notation, using e or E (respectively) to indicate an exponent
    %g or %G    Uses the shorter of %f and %e (or %E)
    %h or %H    Like %g or %G, but uses enhanced text mode to format the power of 10 as a
                proper superscript. When the encoding is UTF-8, labels are formatted as
                a × 10^{b}; when Unicode isn’t available, the multiplication sign is replaced
                by the letter x (for %h) and by an asterisk * (for %H). ^a^
    %x or %X    Hexadecimal representation
    %o or %O    Octal representation

    %P          Multiple of π
    %c          Character replacement for scientific powers, such as k (kilo) for 1,000,
                and so on
    %%          Inserts a % character into the output (no conversion)

    %t and %T   Coefficient and exponent to base 10
    %l and %L   Coefficient and exponent to the base of the current logscale
    %s and %S   Coefficient and exponent to the base of the current logscale; scientific power
                (restricts the power to a multiple of 3)
    %b and %B   Coefficient and exponent using ISO/IEC 80000 notation

^a^
This conversion specifier is new with gnuplot 5.

Table 8.3 Accuracy specifiers to be used with the gprintf() and sprintf() functions

    Accuracy 
    specifier   Description
    "-"         Left-justifies the number
    "+"         Explicitly signs all numbers
    " "         Uses a space instead of a positive sign
    "#"         Forces a decimal point, even if all following digits are zero
    "a.b"       Field width a and number of decimal places b. (Both a and b must be positive integers.)
    "0a.b"      Same as previous, but pads the number with zeros instead of spaces on the left

[[P161]]
.SCIENTIFIC NOTATION AND ENHANCED TEXT MODE
*****
*****
Several of the conversion specifiers in table 8.2 give you individual access to the coeffi-
cient and exponent of a number in scientific notation. They’re intended for situations
where you want to build up the combination of coefficient and exponent yourself.

In scientific notation, a number x is represented as

stem:[x = a \times b^c]

where a is called the coefficient (also mantissa or significand), b is the base, and c is called
the exponent or power. For example, the number 1,024 can be written as stem:[1.024 × 10^3]
(base 10) or stem:[1 × 2^10] (base 2).

When in enhanced text mode, gnuplot interprets certain regular characters embed-
ded in string labels as control or formatting characters. This way, it’s possible to
change font face, size, and weight locally and on the fly. ^7^ A full discussion of enhanced
text mode will have to wait until chapter 10; what is of interest in the context of tic
marks and especially tic labels is the ability to include subscripts and superscripts in all
text elements that are part of a graph. Subscripts are indicated with an underscore ( _ )
and superscripts with a caret ( ^ ). A single character following either of these (or a
sequence of characters enclosed in curly braces) is formatted as subscript or super-
script, respectively.

In particular for powers of 10, the ability to use real superscripts is welcome. Imag-
ine a number such as 5,000. In scientific notation, this becomes

\[5 \times 10^3\]

Using the customary E notation (see section 4.3), this is written as 5.0e+03 . But using
enhanced text mode, you can format this string as

    "5 × 10^{3}"

(or even as "5 × 10^3" , because the exponent consists only of a single character), and
gnuplot will display the exponent as a proper superscript.

The new conversion specifiers %h and %H use enhanced text mode to format num-
bers this way if the proper encoding (such as UTF-8 ; see the sidebar in section 5.1) has
been chosen. Otherwise, the lowercase version ( %h ) uses the letter x to signify the mul-
tiplication operator following the coefficient, whereas the uppercase version ( %H ) uses
the asterisk * .

.A WORKED EXAMPLE
*****
*****

Let’s study an example. Figure 8.5 shows the weight of several mammals as a function
of their heart rate in a double-logarithmic plot. Remarkably, the points seem to fall
roughly onto a straight line: there is a distinct relationship between the size (or
weight) of an animal and the rate of its metabolism. This is known as allometric scaling
and extends to other properties, such as the life span, as well: bigger animals live lon-
ger. Allometric scaling is a fascinating topic, but what interests us right now are the
commands used to draw this graph. They’re shown in the following listing.

^7^
Enhanced text mode is now the default in gnuplot 5; in general, it’s no longer necessary to enable it explicitly.
In fact, at times you may need to disable it using the noenhanced keyword in order to include control charac-
ters in text labels.


[[P162]]

[source]
set logscale
unset key
set ylabel "Weight"
set xlabel "Heart rate [beats per minute]"
set ytics format "%.0s%cg"  #➊
set xtics format "%.0t·10^{%T}" #➋
plot [10:1000][:0.2e9]
➥ "mammals" u 3:2:1 w labels point pt 7 lc rgb 'red' offset 0,-1 #➌

Listing 8.7 Commands for figure 8.5 (file: mammals.gp)

• ➊Tic labels for vertical axis
• ➋Tic labels for horizontal axis
• ➌Custom point type and color

.Figure 8.5
image:https://drek4537l1klr.cloudfront.net/janert2/Figures/08fig05_alt.jpg[]

Figure 8.5 Allometric scaling: larger animals have a slower heart rate. Notice the customized
tic labels along both axes. See the text for details and listing 8.7 for the commands.

Choosing logarithmic scales and setting axes labels should be familiar by now, but pay
close attention to the way the tic labels are formatted. For the vertical axis, the format
string is "%.0s%cg" ➊. According to table 8.2, %s is the coefficient (in scientific nota-
tion) when the power is restricted to being a multiple of 3, and %c is a character replace-
ment for that power (k for kilo, M for Mega, and so on). Hence a number like 2,000 is
split into the coefficient 2 (all decimals are suppressed because of %.0s ), followed by k
for the factor of 1,000. The example tacks on an additional g, which carries through
unchanged, to represent the weight unit gram. The result is perfect for grams and kilo-
grams, but megagrams are more commonly known as (metric) tons. The horizontal
axes uses a custom format with a multiplication dot in place of the cross sign ➋. ^8^ Finally,
the plot command is an interesting example of the use of the with labels style (see
section 6.3.5), with an explicitly selected point type and color ➌.

[[P163]]


==== 8.3.4 Tic mark location and frequency

Finally, you can control where tic marks are drawn. Using autofreq , gnuplot will auto-
matically generate tic marks covering the plot range. 9 Alternatively, you can provide
an increment alone; then tic marks are drawn at integer multiples of the increment.
Or you can specify a start point, an increment, and (optionally) an endpoint. (For log-
arithmic axes, the increment is interpreted multiplicatively instead of additively.)
Some examples will clarify (remember that the variable pi is predefined in gnuplot):

[source]
set xtics pi        #➊
set xtics 1, pi     #➋
set xtics 0,0.1,1   #➌

• ➊Increment alone: tic marks at pi, 1*pi, 2*pi, …
• ➋Start and increment: tic marks at 1, 1+pi, 1+2pi, …
• ➌Start, increment, and end point: tic marks at 0, 0.1, 0.2, … 0.9, 1 only

You can also provide a list of explicit labels and locations at which to draw tic marks.
The list must be enclosed in regular parentheses, with list entries separated by com-
mas. Each entry in the list consists of the text label for the tic mark, its location, and a
third, optional parameter that indicates whether the tic mark should be drawn as a
major or minor tic mark: 0 for major and 1 for minor. 10 The text label can be an
empty string (so that no label is drawn for the tic mark), or it can be missing (in this
case, a textual representation of the location parameter is used as a label). If a text
label is provided for minor tic marks, it’s ignored. Here are some examples:

[source]
set xtics ( 0, 1, 2, 3, 4 ) #➊
set xtics ( "First" 1, "Second" 2, "Third" 3 )  #➋
set xtics ( "A" 0 0, 1 1, 2 1, "B" 3 0 )    #➌

• ➊5 major tic marks with autogenerated (numeric) labels
• ➋2 major tic marks at 0 and 3 labeled “A” and “B”, with 2 minor tic marks between them
• ➌3 major tic marks using provided text labels

^8^
The multiplication cross can be found at Unicode code point U+00d7 and the multiplication dot at U+22c5.
The interpunct at code point U+00b7 provides an alternative for the latter that may be more readily available.

^9^
To generate tic marks covering only the actual range of the data, rather than the plot range, you can use the
rangelimited keyword. See the standard gnuplot reference documentation for details.

^10^
You can add further levels of tic marks beyond major and minor. See the standard gnuplot reference docu-
mentation for set tics and set xtics for details.



[[P164]]
.ADDING AND OVERRIDING INDIVIDUAL TIC MARKS
*****
*****
Usually, any change to the location and frequency of tic marks wipes out any previous
settings. To make changes to individual tic marks while retaining existing ones, use
the add keyword. This can be useful for adding tic marks for special values to other-
wise autogenerated tics, like so:

[source]
set xtics autofreq
set xtics add ( " π " pi )

These commands draw a tic mark at π in addition to the automatically generated
ones. If you omitted the add keyword here, the second line would clobber the first,
and the only tic mark would be the one explicitly set at π.

TIP: You can also use the add keyword to override the label of an autogenerated tic
mark. ^11^ Consider the following:

[source]
set xtics -5,1,5    #➊
set xtics add ( "" 0, "max" 5 ) #➋

• ➊ Creates major tic marks at all integer values between -5 and +5
• ➋ Wipes out the label (not the tic mark) at 0, and
replaces the label for the right-most tic mark with
the expression “max”

TIP: You can use set _tic add to add individual tic marks or to replace the
label for autogenerated ones.

.MINOR TIC MARKS
*****
*****
Minor tic marks aren’t labeled and are typically drawn smaller than major tic marks.
By default, minor tic marks are disabled for linear axes and enabled for logarithmic
axes.

Minor tic marks can be switched on using the m_tics family of options, where the
underscore is again used as a placeholder for any of the usual prefixes:

[source]
set m_tics [ {int:intervals} ]

The optional parameter counts the number of subintervals between major tics marks;
the number of minor tic marks generated is one less than this number. For example,
let’s say there are major tic marks at x=0 and x=5, and you’d like to create minor tic
marks for all the integers in between. The command set mxtics 5 will do the trick,
because there are five integer-sized intervals between neighboring major tics, but the
number of minor tic marks generated is only four.

Minor tic marks are drawn only when there are regularly spaced major tic marks. If
all major tics are individually placed, m_tics has no effect. You can still create minor
tic marks manually, using set _tics .

^11^
I’d like to thank Christoph Bersch for making me aware of this possibility.


[[P165]]
.A WORKED EXAMPLE
*****
*****

You may have wondered how I generated the plot in figure 4.2 using two different
y axis scales, each covering only part of the plot. Now you have all the information at
hand to discover the secret.

The plot shows the same data twice, but vertically shifted. You can achieve this—
without using inline transformations!—by plotting the data once against the primary
and once against the secondary vertical coordinate axis, with properly chosen plot
ranges for both axes. Note how the visible range (from min to max) is the same for
both systems, but the two ranges are offset from each other.

Next, the tic marks are added. The following listing specifies both a start and an
end value for tic-mark generation—this way, you partially label each axis, but only for
the part of the plot that’s relevant to each curve.

    set yrange [9:16]
    set y2range [6:13]
    set ytics 9,1,12 nomirror
    set y2tics 10,1,13
    set datafile missing "NaN"
    plot [0:10] "missing" u 1:2 ax x1y2 w linesp lt 1 pt 7,
    ➥          "" u 1:($2) ax x1y1 w linesp lt 1 pt 7

Listing 8.8 Commands for figure 4.2 (file: missing.gp)

==== 8.3.5 Reading tic labels from file

Finally, gnuplot can read the tic labels from the input file using the _ticlabels()
family of functions as part of the using directive to the plot command. (The under-
score _ is again a placeholder for any of the axis identifiers from table 8.1.)
Let’s look at the data file in listing 8.9. The x values are present both in numeric
form (column 1) and as strings. Of course, it would be nice to use the strings for the
tic labels. Here’s how to do that:

[source]
plot "months" u 1:2:xtic(3) w linesp

The xtic() function takes as argument the number of a column to be used for the tic
labels. Equivalent functions exist for the other coordinate axes; labels for the y axis
are specified after labels for the x axis.

[source]
    # Month     Data    Month Name
    1           3       Jan
    2           4       Feb
    3           2       Mar
    4           5       Apr
    5           8       May
    6           7       Jun
    7           4       Jul
    8           5       Aug
    9           3       Sep
    10          2       Oct
    11          4       Nov
    12          2       Dec

Listing 8.9 Time series data for figure 8.7 (file: months)

[[P166]]
When you use any of the _tic() functions in a plot command, tic marks and labels
are only drawn at the locations explicitly read from the data file—in other words, auto-
generation of tic marks is turned off.

The _tic() functions allow a variety of further tricks beyond reading an explicit
string from the data file. The following snippet calculates the quarter of the year for
each month (such as Q1 or Q2) and uses it as the tic label:

[source]
plot "months" u 1:2:xtic( 'Q' . (1+int(($1-1)/3) )) w lp

In sections 8.4.1 and 8.4.2, I’ll show you two more ways to produce figure 8.7 (shown
later in the chapter) from the file in listing 8.9.


==== 8.3.6 Grid and zero axis

In addition (or as an alternative) to tic marks along the border of the graph, you can
overlay a scale grid on the data. Grid lines are drawn at the position of major and,
optionally, minor tic marks:

[source]
set grid [ [no]_tics ] [ [no]m_tics ]
        [ layerdefault | front | back ]
        [ polar [ {flt:angle} ] ]
        [ majorlineoptions [, minorlineoptions] ]

You can switch the grid on to be drawn at major or minor tic marks, for the primary or
secondary coordinate system. (The underscore again must be replaced by any one of
the prefixes from table 8.1.) Tic marks must be enabled—instructions to draw a grid
at nonexistent tic locations are ignored. The grid is drawn either in front of ( set grid
front ) or behind the data ( set grid back ). ^12^ The lines to use for the grid can be set
separately for grid lines drawn at major and minor tic marks. If no style or type is
given, gnuplot uses the style ls 0 , which draws the least-visible lines possible (often
using a dotted line). The polar option is relevant only for plots using polar coordi-
nates, which we’ll discuss in section F.2.1.

Similar to grid lines, but less obtrusive, are zero axes. These are lines drawn across
the graph for all the points where one of the coordinates is equal to zero:

[source]
set _zeroaxis [ lineoptions ]

^12^
The option layerdefault is only relevant for three-dimensional graphs—see the standard reference docu-
mentation for details.


[[P167]]
For example, set xzeroaxis switches on a horizontal line at y=0 (representing the x
axis). The default line type is ls 0 , the same as for the grid.

.A WORKED EXAMPLE
*****
*****

A quick example will help to clarify. (See the following listing and figure 8.6.) Turning
on the grid is simple; more interesting are the tic marks and labels along the horizon-
tal axis.

[source]
set grid
set xtics pi format "%.0P π "
plot [-4*pi:4*pi] sin(x)/x

Listing 8.10 The commands for figure 8.6 (file: ticmarks.gp)

The command set xtics pi instructs gnuplot to place major tic marks at multiples
of π. The format specification format "%.0P π " tells gnuplot to use the integer multi-
ple of π as a label. Tacking on the character π makes it clear to the viewer what the tic
marks represent.

It’s important to understand that the format specifier %P interprets a value as a
multiple of π but by itself does not ensure that tic marks will only be drawn at integer
multiples of π. Instead, you must explicitly choose the locations where tic marks will
be drawn using set xtics pi and then use format "%P" to format the labels at those
positions accordingly.



.Figure 8.6
image:https://drek4537l1klr.cloudfront.net/janert2/Figures/08fig06_alt.jpg[]

Figure 8.6 Tic marks at multiples of π and Greek letters used for the tic labels.
See listing 8.10.


[[P168]]

=== 8.4 Special case: time series

Whenever you want to study how a quantity changes over time, you’re dealing with a
time series. 13 Time series are incredibly common—from stock charts and opinion
polls to fever curves. Unfortunately, they pose special challenges, because the tic
labels you’d like to use for the x axis (such as the names of months or weekdays)
aren’t strictly numeric. Worse, they aren’t even universal, but locale-dependent. If you
want to plot time-series data, you therefore need to be able to parse arbitrary
date/time formats from a file, and you must be able to format timestamps in a suit-
able, locale-dependent format.

Gnuplot offers three different ways to deal with date/time information as part of
axes labels:

•  The classic approach uses set _data , set timefmt , and set _tics format ,
which let you parse and reformat arbitrary date/time information in the input
file; I’ll describe these in detail in section 8.4.2. This is gnuplot’s most flexible
and powerful method of handling timestamps.

•  Alternatively, gnuplot can read fully formatted tic labels directly from the input
file using the _ticlabels() functions introduced in section 8.3.5. This method
is easy if the labels read from file are in the format you want, but it only works if
the data set also contains numeric time information (to fix the x coordinate of
the data points). It’s also only suitable for relatively sparse data sets, because
_ticlabels() creates a tic mark and label for every data point. And it doesn’t
allow locale-dependent formatting.

•  For special cases when you don’t require arbitrary date/time labels but merely
want to use the names of months or weekdays in a plot, gnuplot provides the
simplified set _mtics and set _dtics facilities (see section 8.4.1).

In the next section, we’ll first discuss the simpler case of using month or weekday
names as tic labels. Afterward, we’ll tackle the harder problem of dealing with arbi-
trary date/time information, both for input and for output. (Reading tic labels in files
was discussed previously in section 8.3.5.)

^13^
If the time intervals between successive measurements are equal, the data points form a discrete time series; oth-
erwise, the time series is continuous. I have more to say about time-series analysis in chapter 14.

.Locales
*****
The names of months and days of the week differ from country to country and lan-
guage to language. The set of parameters defining such details of the user interface
is called the locale. By examining the current locale, gnuplot determines the strings
to be used in tic labels involving the names of months or weekdays.

The default is taken from the LANG environment variable but can be changed using
the following command:

[source]
set locale ["{str:locale}"]

The choice of available locales is system-dependent. On Unix systems, you can use
the shell command locale -a for a list of available locales or check the directory
/usr/share/locale/. Note that some locales have country-specific variations (such as
en_AU , en_CA , en_GB , and en_US ). In this case, it may not be sufficient to set the
general locale (such as en ), and a more specific locale must be chosen.
*****

[[P169]]


==== 8.4.1 Turning numbers into names: months and weekdays

Gnuplot provides two simple commands to turn numbers into the names of months
or days of the week. They offer much less flexibility than the general time-series com-
mands discussed in the next section, but they’re easy to use.

Let’s look back at the data file in listing 8.9. Suppose you want to label the x axis
with the names of the months, but without using the explicit names in the third col-
umn. You can do this using the set xmtics command, which maps numbers to
names of months (with 1=“January”, …, 12=“December”). Don’t confuse this com-
mand with the set mxtics command introduced in section 8.3.4, which switches on
minor tic marks!

The following sequence of commands produced the plot in figure 8.7:

[source]
set xmtics      #<== Sets format of major tic marks to months
plot [][0:10] "months" u 1:2 w linesp


.Figure 8.7
image:https://drek4537l1klr.cloudfront.net/janert2/Figures/08fig07_alt.jpg[]

Figure 8.7 A time-series plot, using set xmtics to use months for the labels along
the horizontal axis. Also see listings 8.11 and 8.12. The data is shown in listing 8.9.

[[P170]]
In addition to the names of months, you can use days of the week (such as “Mon”,
“Tue”, and so on) as tic labels. You enable them using set xdtics (with 0=“Sunday”,
…, 6=“Saturday”), similar to what you’ve seen for set xmtics . Both set xmtics and
set xdtics map overflows back into the legal range through a modulo operation
(modulo 12 and modulo 7, respectively), as you’d expect. To restore normal (numeri-
cal) axes labeling, use unset xmtics or unset xdtics . Equivalent commands exist for
all other axes, using the usual prefixes in table 8.1.

The set xmtics and set xdtics facilities are very limited. The strings follow the
locale but can’t be formatted any further. But as a quick-and-easy alternative to the
general methods described next, the techniques introduced in this section are occa-
sionally useful.


==== 8.4.2 General time series: the gory details

For more general time series, you face two problems: you must be able to read arbi-
trary timestamps from the input file and then format them again for output. But
before you can do anything, you must first put gnuplot into time-series mode (for the
primary x axis) using

[source]
set xdata time

Issuing set xdata (without an argument) restores normal operation. Equivalent com-
mands exist for all other axes, distinguished through the usual prefixes.

TIP: To handle general date and time information in data files, you must first
switch to time-series mode using set xdata time . In time-series mode, time-
stamps are parsed (for input) according to the value of set timefmt and are
formatted (for output) according to set _tics format .

In time-series mode, input (parsing of timestamps from files) and output (formatting
timestamps for inclusion in the plot) are controlled by the commands set timefmt
for input and set xtics format for output. 14 Both accept a format string using a syn-
tax similar to that found in the POSIX strftime() routine. (I introduced set _tics
format in section 8.3.3 already, but there we only talked about the formatting of plain
numbers. Now I explain the ability to format complex date/time values.)
Gnuplot assumes that all data is in universal time coordinates ( UTC )—it has no
facilities to perform time zone changes, adjust for daylight savings, or apply similar
transformations. If they’re required, they must be applied externally, before you
attempt to plot the data. 15
14
The command set format x is an older alternative for controlling the output format. It’s now redundant,
but you’ll still find references to it in the standard reference documentation.
15
Gnuplot 5 stores timestamps internally as seconds since the beginning of the Unix epoch. This is a change
from previous versions of gnuplot.


[[P171]]
.INPUT
*****
*****
Time/date information is parsed in a way reminiscent of the scanf() family of func-
tions and shares its familiar challenges. The expected input format is indicated
through a format string to set timefmt . The format string may contain several conver-
sion specifiers, all of which begin with the % character, followed by a letter that indi-
cates how an input value should be interpreted. Check tables 8.4 and 8.5 for a list of
all possible conversion specifiers and their meanings.

The input format string may contain other characters besides format specifiers,
but input strings must match the format exactly (with some exceptions regarding
whitespace that we’ll discuss shortly):

[source]
set timefmt "%Y-%m-%d"　#<== Matches 2000-01-01, but also 2000-1-1
set timefmt "%d%b%y"　  #<== Matches 1JAN05, 01Jan05, 1jan05

If there are no characters separating different fields from one another, gnuplot con-
sumes a fixed number of characters per field (left to right), and the fields must be left-
zero-padded as necessary:

[source]
set timefmt "%Y%m%d"

Parses 20020101 as Jan 1, but parses 2002101
as Oct 1, and will fail to parse 200211

Special rules apply when the date format to be parsed contains whitespace. First, gnu-
plot interprets whitespace-separated data as occupying several columns. A timefmt
format containing whitespace in turn consumes several columns. A blank space (not
an escaped tab: \t ) embedded in a formatting string matches one or more blanks
(not tabs) in the input file. So, "%H %M" matches 12 ␣ 20 and 12 ␣␣␣ 20 but not 1220 .
(The ␣ symbol indicates a whitespace character.)

An example will help. The following input file

[source]
2005-01-01 8:41 3
2005-01-01 9:17 4
2005-01-01 22:46 2
2005-01-02 03:05 5

will be correctly parsed and plotted by the following commands:

[source]
set xdata time
set timefmt "%Y-%m-%d %H:%M"
set xtics format "%F\n%T" rotate
plot "data" u 1:3 w lp

Note that the column used for the y values is the third, because the time format con-
sumes two columns. Also, the format string contains a single whitespace, but in the
data file several blanks separate the date from the time. The file won’t parse correctly
if the spaces between date and time are replaced by tabs.

[[P172]]

Table 8.4 Alphabetically sorted conversion specifiers for date/time information for the set _tics format and set
timefmt commands. See table 8.2 to format numeric values. See table 8.5 for a list sorted by topic.

[cols=5,opts="autowidth",frame=ends,grid=rows]
|===
1.2+|Conversion specifier 
2.1+|Available for ...
1.2+|Values
1.2+|Description
    |input: set timefmt
    |output: set _tics format

|%a |  |✓ |Sun, Mon, …            |Abbreviated day of the week
|%A |  |✓ |Sunday, Monday, …      |Full day of the week
|%b |✓ |✓ |(also %h) Jan, Feb, …  |Abbreviated name of the month (three characters)
|%B |✓ |✓ |January, February, …   |Full name of the month
|%d |✓ |✓ |01–31                  |Day of the month (always two digits on output)
|%D |  |✓ |Example: “03/25/08”    |Shorthand for “%m/%d/%y” (US date format)
|%F |  |✓ |Example: “2008-03-25”  |Shorthand for “%Y-%m-%d” (extended ISO date for- mat)
|%H |✓ |✓ |00–24                  |Hour—24-hour clock (always two digits on output)
|%I |  |✓ |00–12                  |Hour—12-hour clock (always two digits)
|%j |✓ |✓ |001–366                |Day of the year (always three digits on output)
|%k |  |✓ |0–24                   |Hour—24-hour clock (one or two digits on output)
|%l |  |✓ |0–12                   |Hour—12-hour clock (one or two digits)
|%m |✓ |✓ |01–12                  |Month (always two digits on output)
|%M |✓ |✓ |00–60                  |Minute (always two digits on output)
|%p |  |✓ |“am”, “pm”             |a.m./p.m. indicator
|%r |  |✓ |Example: “10:55:48 pm” |Shorthand for “%I:%M:%S %p” (US time format)
|%R |  |✓ |Example: “22:12”       |Shorthand for “%H:%M” (24-hour clock time format without seconds)
|%s |✓ |  |0–…                    |Unix epoch seconds (input only!)
|%S |✓ |✓ |00–60                  |Seconds (always two digits on output)
|%T |  |✓ |Example: “22:12:48”    |Shorthand for “%H:%M:%S” (extended ISO time format: 24-hour clock with seconds)
|%U |  |✓ |00–53                  |Week of the year (weeks starting on Sunday; always two digits)
|%w |  |✓ |00–06                  |Day of the week (0=Sunday; always two digits)
|%W |  |✓ |00–53                  |Week of the year (weeks starting on Monday; always two digits)
|%y |✓ |✓ |00–99                  |Year (two-digit; always two digits on output)
|%Y |✓ |✓ |0000–9999              |Year (four-digit; always four digits on output)
|===

[[P173]]
Table 8.5 Conversion specifiers for date/time information for the set _tics format and set timefmt
commands, sorted by topic. See table 8.2 to format numeric values. See table 8.4 for a list sorted alphabetically
by conversion specifier.


[cols=5,opts="autowidth",frame=ends,grid=rows]
|===
1.2+|Conversion specifier 
2.1+|Available for ...
1.2+|Values
1.2+|Description
    |input: set timefmt
    |output: set _tics format

|%s |✓ |  |0–…                   |Unix epoch seconds (input only)
|%S |✓ |✓ |00–60                |Seconds (always two digits on output)
|%M |✓ |✓ |00–60                |Minute (always two digits on output)
|%k |  |✓ |0–24                  |Hour—24-hour clock (one or two digits on output)
|%H |✓ |✓ |00–24                |Hour—24-hour clock (always two digits on output)
|%l |  |✓ |0–12                  |Hour—12-hour clock (one or two digits)
|%I |  |✓ |00–12                 |Hour—12-hour clock (always two digits)
|%p |  |✓ |“am”, “pm”            |a.m./p.m. indicator
|%j |✓ |✓ |001–366              |Day of the year (always three digits on output)
|%d |✓ |✓ |01–31                |Day of the month (always two digits on output)
|%m |✓ |✓ |01–12                |Month (always two digits on output)
|%b |✓ |✓ |(also %h)            |Jan, Feb, … Abbreviated name of the month (three characters)
|%B |✓ |✓ |January, February, … |Full name of the month
|%y |✓ |✓ |00–99                |Year (two-digit; always two digits on output)
|%Y |✓ |✓ |0000–9999            |Year (four-digit; always four digits on output)
|%w |  |✓ |00–06                 |Day of the week (0=Sunday; always two digits)
|%a |  |✓ |Sun, Mon, …           |Abbreviated day of the week
|%A |  |✓ |Sunday, Monday, …     |Full day of the week
|%W |  |✓ |00–53                 |Week of the year (weeks starting on Monday; always two digits)
|%U |  |✓ |00–53                 |Week of the year (weeks starting on Sunday; always two digits)
|%R |  |✓ |Example: “22:12”      |Shorthand for “%H:%M” (24-hour clock time format without seconds)
|%T |  |✓ |Example: “22:12:48”   |Shorthand for “%H:%M:%S” (extended ISO time format: 24-hour clock with seconds)
|%r |  |✓ |Example: “10:55:48 pm”|Shorthand for “%I:%M:%S %p” (US time format)
|%F |  |✓ |Example: “2008-03-25” |Shorthand for “%Y-%m-%d” (extended ISO date format)
|%D |  |✓ |Example: “03/25/08”   |Shorthand for “%m/%d/%y” (US date format)
|===

[[P174]]
Finally, gnuplot won’t parse strings enclosed in quotes (see section 4.3.3). Therefore,
you can’t parse a file that contains date/time information as strings with embedded
whitespace:

[source]
"2005-01-01 8:41" 3 #|
"2005-01-01 9:17" 4 #|<== Will not parse

Also keep in mind that gnuplot’s capabilities when it comes to parsing date/time
information depend on the capabilities (and sensibilities) of the underlying system
libraries. Don’t expect edge cases to be absolutely portable!
.OUTPUT
*****
*****
Compared to parsing time/date information, it’s much easier to format the informa-
tion into human-readable tic labels. To do so, specify the desired output format using
set _tics format "..." (where the underscore again is a placeholder for any of the
possible prefixes from table 8.1), and you’re done. ^16^

The format string can contain arbitrary text in addition to the formatting charac-
ters. Here’s a useful snippet to stack the time on top of the date (note the embedded
newline):

[source]
set xtics format "%T\n%D"   #<== Time stacked on top of date

But you can also use other text, such as formatting characters

[source]
set xtics format "%Y-%m-%D %H:%M"   #<== Date followed by time

and even plain text:

[source]
set xtics format "It happened on %A"    #<== Full day of the week

In particular when used together with string functions, there is almost no limit to the
appearance of tic labels for plots displaying time series.

.WORKING IN TIME - SERIES MODE
*****
*****
Keep in mind that when working in time-series mode (after issuing the set xdata
time command), all x coordinates are interpreted according to the current setting of
the set timefmt format option (or equivalent for all other axes). In particular, this
means plotting ranges must be specified as quoted strings, in the format defined by
timefmt (the input time format): plot ["01Jan00":"15Jan00"] "data" u 1:2 . Similar
concerns hold for the coordinates supplied to set arrow and set label . ^17^
Also, don’t forget that the currently selected locale (as inherited from the environ-
ment when gnuplot was started, or set using set locale ) affects the tic labels (names
of months and of days in the week).

^16^
I also recommend that you avoid the former way of formatting tic labels based on the set format command.
The new style, based on set xtics format , is both clearer and more robust.

^17^
Alternatively, you can specify ranges and positions as integers, which are interpreted as Unix epoch seconds.


[[P175]]
And finally, always remember that you need to switch on time-series mode explic-
itly using set xdata time . This necessary step is easy to forget, and doing so will lead
to mysterious errors.

TIP: Before parsing date/time information from files and using it to plot
data, you must enable time-series mode using set xdata time .

.A WORKED EXAMPLE
*****
*****

Remember the file with monthly data from listing 8.9? In section 8.3.5, gnuplot read
the tic labels for the horizontal axis directly from the data file. In section 8.4.1, the
plot was created using the simple set xmtics formatting. Now you’ll see a third way of
plotting the file, this time using the full machinery of gnuplot’s general time-series
mode.

The next listing shows one way to do it. In this version, the strings in the third col-
umn aren’t used. (See tables 8.4 and 8.5 for the conversion specifiers.) The resulting
graph is exactly the same as figure 8.7.)

[source]
set xdata time                      #<== Turn on time-series mode!
set timefmt "%m"                    #<== Input format: 1, 2, …, 12
set xtics format "%b"               #<== Output format: Jan, Feb, …
plot [][0:10] "months" u 1:2 w lp   #<== Plot using the first column.

Listing 8.11 Commands for figure 8.7 using time-series mode (file: months1.gp)

Amusingly, there’s another way to achieve the same effect. Remember that the data in
listing 8.9 is redundant: the first and third columns both contain information that can
be interpreted as months. You can therefore ignore the first (numeric) column and
base the graph on the third column. The following listing shows this approach.

[source]
set xdata time                      #<== Turn on time-series mode!
set timefmt "%b"                    #<== Input format: Jan, Feb, …
set xtics format "%b"               #<== Output format: Jan, Feb, …
plot [][0:10] "months" u 3:2 w lp   #<== Plot using the third column.

Listing 8.12 Alternative commands for figure 8.7 (file: months2.gp)

Notice how the strings in the third column are used to give the horizontal position for
each point. (You may want to change the output format to full, rather than abbrevi-
ated, month names using set xtics format "%B" to convince yourself that the strings
read from the file are actually parsed and interpreted and aren’t just passed through
to the graph.)



[[P176]]

==== 8.4.3 Beyond tic labels: processing date/time information

The functionality I just described for use with time-series plots can be extended to
more general applications. Most date/time manipulations involve the first three func-
tions in table 8.6.

As an example, consider again the list of athletic records in listing 3.1. This data set
contains not only the finishing times, but also the calendar date when the record was
set. You may want to include this information in a plot of the data (see figure 8.8).
Table 8.6 Functions to parse and format arbitrary time strings. See tables 8.4 and 8.5 for conversion
specifiers.


[opts="autowidth",frame=ends,grid=rows]
|===
|Function   |Description
| strftime(format, seconds)
| Formats its second argument, which is interpreted as Unix epoch
  seconds, according to the format string in the first argument.
  Returns a formatted string.

| strptime(format, string)
| Parses its second argument, which must be a string containing a
  timestamp, according to the format string in the first argument.
  Returns the corresponding number of Unix epoch seconds as a
  floating-point number.

| timecolumn(column, format)
| Takes an integer column identifier and a format string. Parses
  the current entry in the identified column according to the format
  string. Returns the corresponding number of Unix epoch seconds.
  Equivalent to strptime(format, stringcolumn(column)).

| time(dummy)
| Returns the current system time in Unix epoch seconds. A
  numeric argument must be supplied, but its value is ignored.

| tm_year(seconds)
| Takes a timestamp in Unix epoch seconds, and returns the full
  year as a floating-point number.

| tm_yday(seconds)
| Takes a timestamp in Unix epoch seconds, and returns the day of
  the year as a floating-point number (0.0–365.0).

| tm_mon(seconds)
| Takes a timestamp in Unix epoch seconds, and returns the num-
  ber of the month as a floating-point number (0.0–11.0).

| tm_mday(seconds)
| Takes a timestamp in Unix epoch seconds, and returns the day of
  the month as a floating-point number (1.0–31.0).

| tm_wday(seconds)
| Takes a timestamp in Unix epoch seconds, and returns the day of
  the week as a floating-point number (Sunday=0.0).

| tm_hour(seconds)
| Takes a timestamp in Unix epoch seconds, and returns the hour
  as a floating-point number.

| tm_min(seconds)
| Takes a timestamp in Unix epoch seconds, and returns the minute
  as a floating-point number.

| tm_sec(seconds)
| Takes a timestamp in Unix epoch seconds, and returns the second 
  as a floating-point number.
|===


[[P177]]

This plot command to create this figure is shown here:

[source]
plot [0:1200] "records"
➥ u 1:2:(strftime( "%d %b %y", timecolumn(4, "%Y-%m-%d")))
➥ w labels point pt 7 offset 0,-1

The primary plot style is with labels (see section 6.3.5), using the ability to plot a
point symbol together with the label. The labels are first parsed (using timecolumn() )
and then formatted (using strftime() ). Notice that the date format in the graph is dif-
ferent than in the data file—the date strings are parsed and reformatted, not merely
passed through to the plot.

Instead of using the timecolumn() function, you can use strptime() in conjunc-
tion with the basic stringcolumn() function:

[source]
plot [0:1200] "records"
➥ u 1:2:(strftime("%d %b %y", strptime("%Y-%m-%d", strcol(4))))
➥ w labels point pt 7 offset 0,-1

This example will suffice to demonstrate the possibilities. Keep in mind that 
timecolumn() and strptime() return a numeric representation of a timestamp, thus 
making　all kinds of further date calculations and manipulations possible.

.Figure 8.8
image:https://drek4537l1klr.cloudfront.net/janert2/Figures/08fig08_alt.jpg[]


Figure 8.8 Men’s world records, together with the date when the record was set. The
dates are read from the data file, reformatted, and placed onto the graph. See the text for
details and listing 3.1 for the data.


[[P178]]

=== 8.5 Summary

In this chapter, we talked about all the ways you can control the appearance of the
axes on a plot. It’s been a long chapter, but axes—or rather, the tic marks and labels
placed on them—are important: they enable the viewer to gain quantitative insight
from the data displayed in the plot.

This chapter concludes our overview of what I would call “basic” gnuplot. In the
following chapters, we’ll look at some exciting but distinctly more advanced topics,
such as color in graphs, customizations, and scripting capabilities. You’ll also learn just
about everything there is to know about exporting graphs to standard file formats.

[[part3]]
== Part 3 Mastering technicalities

The topics treated in this part are of a more technical nature than in the
preceding chapters. You’ll need the material in these chapters when you’re no
longer satisfied with gnuplot’s defaults and want to establish greater control over
the appearance of your figures, or if you want to automate and configure the way
you work with gnuplot. Chapter 9 explains how to customize many aspects of
graph elements, such as their color, the shape of point symbols, and the dash
patterns used to draw lines. You’ll also learn how to change the overall appear-
ance of a graph, such as its size and aspect ratio. Chapter 10 describes in detail
how you can export graphs to file, using gnuplot’s terminal capabilities. Chapter
11 discusses ways to automate repetitive tasks, either using gnuplot’s own script-
ing facilities or by using gnuplot in conjunction with scripts or programs written
in a separate programming language. Chapter 12 presents options to customize
your gnuplot work environment.


[[P181]][[ch09]]

== Chaper 9 Color, style, and appearance

This chapter covers

•  Global appearance options
•  Color
•  Lines and points
•  Size and aspect ratio

Whereas the previous few chapters dealt with very local aspects of a graph (such as
an individual curve, a single text label, or the details of tic mark formatting), the
present chapter addresses global issues. We begin with a long and important sec-
tion on color. Color is an exciting topic, and it opens a range of options for data
visualization; I’ll explain gnuplot’s support for color handling in detail.
Next, we discuss a few details that matter if you want to modify the default
appearance of point types, dash patterns, and the automatic selection of visual
styles. The overall size and aspect ratio of the graph are the subjects of the closing
section of this chapter.


=== 9.1 Color

Color is an important element in visualization. At the base level, colors are often
easier to distinguish than dash patterns or different symbol shapes. But colors open

[[P182]]
many more options for visualization—in fact, colors by themselves are sufficient to
represent semantic information (we’ll come back to this in appendix D). And finally,
color is just plain fun!

At the same time, color adds complexity: what colors look good, and which are
suitable for representing information? And then there’s the problem of representing
color in computer systems. In appendix D, we’ll have more to say about choosing col-
ors for visualization; here we’re only interested in the technicalities of specifying color
in gnuplot. ^1^

There are three fundamentally different ways to select a color in gnuplot:

•  Through explicit specification, either by using a known color name (such as
"red" ) or by giving its red-green-blue ( RGB ) components (like "#FF0000" ). An
explicit color specification is indicated by the keyword rgb .

•  By indexed lookup from a selection menu of discrete colors. (For example, lc 1
picks the first color from an existing list of color styles.) Indexed lookup is the
default and doesn’t use a special keyword.

•  By mapping a value into a continuous color gradient. Color gradients are called pal-
ettes in gnuplot terminology (with keyword palette ) and are the principal topic
of appendix D. In this chapter, we’ll give only a brief preview.

Each one of these methods can be used in two ways:
•  Fixed—A specific color is selected for a given data set, to distinguish this data set
from any other.

•  Variable or data-dependent—The color is determined by the value of the data plot-
ted so that the curve changes its color depending on location. Data-dependent
coloring is switched on with the keyword variable in place of an explicit color
name or index, and with palette z for gradient-mapped colors.

Keeping all these possibilities straight is one of our primary goals in this section!
No matter which way you use color, a color specification always requires the line-
color keyword for graph elements (not just lines, but all graph elements, like points
or boxes) and the textcolor keyword for all forms of text labels.

TIP: Remember: all color specifications are preceded either by the keyword
linecolor (or lc ) for graph elements or by textcolor (or tc ) for text labels.

==== 9.1.1 Explicit colors

The most fundamental way to indicate a color is to specify it explicitly. You can do so
by giving its name or by spelling out its components.

^1^
To find the pertinent information in the standard gnuplot reference documentation, use the command
help colorspec .


[[P183]]
.COLOR NAMES
*****
*****
Several colors can be referred to by their name. Gnuplot knows 111 predefined color
names (corresponding to only 95 distinct colors; the duplications are mostly due to
both grey and gray being valid spellings). You can see all the color names and their cor-
responding RGB values using the show colornames command. Note that gnuplot’s list
of color names isn’t identical to the list of X11 colors. ^2^

RGB COMPONENTS

The most common way in computer graphics to indicate an arbitrary color is through
its RGB (red-green-blue) values: a triple of numbers giving the relative intensities of
the red, green, and blue components that make up the desired color. By convention,
each component is represented through a single byte, so that each RGB component
lies between 0 and 255. Conventionally, the components are written as two-digit hexa-
decimal numbers (from 00 to FF ), and an entire triple can be represented through a
string of the following format:

[source]
rgb "#RRGGBB"

This is the X11 format. You can also write the string explicitly as a hexadecimal constant
in the format "0xRRGGBB" . Here are three equivalent ways to specify the same color:

[source]
rgb "red"
rgb "#FF0000"
rgb "0xFF0000"

Instead of representing the RGB triple as a string, you can also use the integer value
corresponding to the value of the three bytes making up the triple. It may be conve-
nient to use the hexadecimal representation of the integer, instead of the representa-
tion to base 10. The following are equivalent:

[source]
rgb 0xff0000
rgb 16711680

Here’s a function that takes the three components (as integers between 0 and 255)
and packs them into an equivalent integer value:

[source,subs=normal,]
pack( r, g, b ) = 2^16^ * r + 2^8^ * g + b

This gives you an additional way to obtain the color red:

[source,subs=normal,]
rgb pack( 255, 0, 0 )

^2^
The Wikipedia pages for “X11 color names” and “Web colors” contain more information about commonly
used color names. The amusing history of color names used in graphical user interfaces can be found in the
article “‘Tomato’ versus ‘#FF6347’—the Tragicomic History of CSS Color Names” by Julianne Tveten (Ars
Technica, October 11, 2015); http://mng.bz/R56B.


[[P184]]
HSV COLOR MODEL

The RGB color model has the advantage of corresponding directly to the way a com-
puter display operates, but it’s not particularly intuitive for a human to use. (Quickly,
what does #2e8b57 look like?)

The HSV (hue-saturation-value) scheme is an alternative to the RGB color descrip-
tion and the most popular intuitive color model. The hue describes the shade of the
color (by convention, a hue value of 0 corresponds to red followed by yellow, green,
cyan, blue, and magenta at equal intervals). The saturation measures the richness of
the color, from pale pastel shades to full saturation. Finally, the value element of the
HSV triple describes the lightness of the color, from very dark to very bright. All HSV
values vary from 0 to 1. ^3^

Gnuplot’s built-in function hsv2rgb( h, s, v ) takes a triple of HSV values, per-
forms the conversion to RGB , and returns an integer-packed representation of the cor-
responding RGB triple. This gives you yet another way to specify the color red
(remember that red corresponds to a hue value of 0):

[source,subs=normal,]
rgb hsv2rgb( 0, 1, 1 )

Table 9.1 Equivalent ways to specify a color explicitly (here, magenta)

[opts="header,autowidth",frame=ends,grid=rows]
|===
|Description               |Example
|Color name                |rgb "magenta"
|X11 RGB string            |rgb "#FF00FF"
|String with hex constant  |rgb "0xFF00FF"
|Integer in hex format     |rgb 0xff00ff
|Packed integer            |rgb 2^16^ * 255 + 2^8^ * 0 + 255 or rgb 16711935
|Conversion from HSV       |rgb hsv2rgb( 5/6., 1, 1 )
|===

Table 9.1 shows all these forms together, this time for the color magenta, which is a
mixture of full red and full blue components. (Its hue value in the HSV model is 5/6.)

TIP: The input values to the hsv2rgb() function must all lie in the interval
[0:1]. The function silently replaces values outside this interval with the near-
est legal value (so, 1.1 becomes 1.0, and -0.1 becomes 0). In particular, the
hue parameter does not wrap around for values greater than 1.0—you must
map it into the unit interval yourself!

You can use the expression x - floor(x) to reduce an arbitrary hue value to the unit
interval. You may want to define a more general version of the hsv2rgb() function
that removes the restriction on the hue value:

[source,subs=normal,]
hsv( h, s, v ) = hsv2rgb( h - floor(h), s, v )

^3^
The Wikipedia page for the HSL and HSV color models provides more detail.

[[184a]]

.Figure 9.1
image:https://drek4537l1klr.cloudfront.net/janert2/Figures/09fig01.jpg[]


Color figure 1 Alpha shading and transparency. When a partially transparent color is added to
an existing background, the added (foreground) color tends to prevail; adding it to a background
of the same hue just increases the intensity. In the left panel, this effect is used to visualize
point density in a dense data set. All data points are drawn with both blue disks and red rims.
Because contributions from overlapping points add visually, regions of high point density show
up as areas of high color intensity. Regions where the density is high enough for the rims to
contribute significantly appear red. The right panel demonstrates what kinds of color mixtures
you can expect when several colors are added together. (See chapter 9 for details.)

.Figure 9.2
image:https://drek4537l1klr.cloudfront.net/janert2/Figures/09fig02.jpg[]

Color figure 2 Using color gradients to visualize data values. In the left panel, color is used to
indicate the order in which particles were added to the cluster. The right panel shows a section
of the complex plane, including part of the Mandelbrot set (black) and its fractal boundary. Color
is used to visualize the number of iteration steps before the Mandelbrot iteration diverged. (See
chapter 9 and appendix D.)

[[184b]]

.Figure 9.3
image:https://drek4537l1klr.cloudfront.net/janert2/Figures/09fig03.jpg[]

Color figure 3 The three built-in color sequences that can be selected using set colorsequence ,
and the custom sequence that was used for the color illustrations in this book. (See chapters 9 and
12 for details.)

.Figure 9.4
image:https://drek4537l1klr.cloudfront.net/janert2/Figures/09fig04_alt.jpg[]

Color figure 4 Several color gradients (or palettes) for visualization purposes, as discussed in
appendix D. Each panel in the figure displays a different palette.


[[184c]]

.Figure 9.5
image:https://drek4537l1klr.cloudfront.net/janert2/Figures/09fig05_alt.jpg[]

Color figure 5 Using stylesheets to change the appearance of a plot. The plot in this
figure has been prepared with a stylesheet that uses relatively bright colors, but thin lines.
(Compare color figure 6. Also see listing 12.7 in chapter 12 for details.)


.Figure 9.6
image:https://drek4537l1klr.cloudfront.net/janert2/Figures/09fig06_alt.jpg[]

Color figure 6 Using stylesheets to change the appearance of a plot. The plot in this
figure has been prepared with a stylesheet that uses soft pastel colors, but relatively thick
lines. (Compare color figure 5. Also see listing 12.8 in chapter 12 for details.)

[[184d]]

.Figure 9.7
image:https://drek4537l1klr.cloudfront.net/janert2/Figures/09fig07_alt.jpg[]

Color figure 7 Using a combination of several graphical techniques to represent a complicated,
multivariate data set. The figure shows a parallel-coordinates plot of the entire glass data set. Because
of the relatively large number of records, all lines are drawn partially transparent so they don’t obscure
each other. A subset of records has been highlighted in a different color: records with a Calcium (Ca)
content between 9 and 10 have been selected for highlighting. (See chapter 14 for details.)

.Figure 9.8
image:https://drek4537l1klr.cloudfront.net/janert2/Figures/09fig08_alt.jpg[]

Color figure 8 A false-color plot prepared using a color gradient. The color of each square represents
the number of defects produced by each machine on each day of the month. Missing squares indicate
that the corresponding machine wasn’t used on that day. Many different aspects of the operation are
visible in this graph. You should be able to recognize weekends and two clusters of machines that seem
more error-prone than the others. This data set contains a handful of outliers (that is, isolated instances
with an excessive number of defects), which are drawn in black. (See appendix D for details.)

[[P185]]

==== 9.1.2 Alpha shading and transparency

So far, we’ve assumed that colors are fully opaque, so that an object drawn on top of
another completely hides its background. But gnuplot can do more: several terminals
allow for transparent colors. ^4^

.MAKING COLORS TRANSPARENT
*****
*****
Indicating that a pixel should be transparent requires additional information. In prac-
tice, you add a fourth byte to the RGB components; this is often called the alpha chan-
nel. In gnuplot’s string representation, it precedes the RGB value:

[source,subs=normal,]
rgb "# αα RRGGBB"
rgb "0x αα RRGGBB"

Transparency information is encoded in the highest-order bit, as follows:

•  α = 0 : fully opaque
•  α = 255 : fully transparent

This convention has the advantage that a fully opaque color rgb "#00RRGGBB" has
the same numerical value as rgb "#RRGGBB" , so opaque colors don’t require special
treatment.

.ALPHA BLENDING
*****
*****
So, what happens when two transparent colors are overlaid? Obviously, the color
“underneath” is still visible—but how? It turns out that there is no obvious answer to
this question—the cairo graphics library defines 29 (!) different operators to combine
two pixels containing alpha-channel information! ^5^

Even in gnuplot, the answer isn’t unique: lines and similar graph elements are
combined using cairo’s OVER operator (the library’s default), but filled objects use the
SATURATE operator. (You can’t specify an operator explicitly.)

To make the behavior of these two operators concrete, let’s assume that you want
to add a new object of color α 1 X 1 to an existing color α 0 X 0 , resulting in color α 2 X 2 .
(Here X stands for any one of the three RGB components.) The new color is then cal-
culated separately for each RGB component according to the following formulas:

\[\begin{align}
\hbox{ OVER }
α_2 &= α_1 + α_0(1 - α_1)                 \\
X_2 &= (α_1 X_1 + α_0 X_0(1 - α_1)) / α_2 \\
\hbox{ SATURATE }
α_2 &= min(1, α_1 + α_0)                  \\
X_2 &= (min(α_1,1 - α_0) X_1 + α_0 X_0) / α_2
\end{align}\]

^4^
All cairo-based terminals support transparency, but several of the older terminals don’t. In particular, neither
the PostScript terminal nor the GD-based bitmap terminals can handle transparency.

^5^
See http://cairographics.org/operators.

[[P186]]

These formulas aren’t so helpful to predict the outcome, but you can use them retro-
spectively to understand what happened. Two general observations hold (see figure 9.1):

•  The two source colors don’t commute: it matters which color is in the back-
ground and which is newly added. The color that is added on top of an existing
background tends to prevail.

•  When all pixels are of the same hue, things are simpler: the hue basically stays,
and only the intensity increases (in a roughly additive way).

.Figure 9.1
image:https://drek4537l1klr.cloudfront.net/janert2/Figures/09fig01_alt.jpg[]

Figure 9.1 Alpha blending in action. The color that is added to an existing
background tends to prevail; adding it to a background of the same hue just
increases the intensity.

.USES FOR TRANSPARENT COLORS AND ALPHA BLENDING
*****
*****
Transparent colors can be useful when you’re visualizing large data sets consisting of
many points. If such data is plotted in a scatter plot, points frequently overlap. With
fully opaque colors, overlapping points completely obscure each other, making the
local density of points indistinguishable. But with partially transparent colors, overlap-
ping points contribute additively, so that a higher color intensity reveals a higher point
density.

Figure 9.2 shows such a scatter plot. The plot command is as follows:

plot [-0.4:1.2][-0.2:1.2] "alpha" u 2:1 w p pt 7 ps 1 lc rgb "#cc0000ff", #➊
➥ "" u 2:1 w p pt 6 ps 1 lc rgb "#ddff0000" #➋

• ➊Blue filled circles
• ➋Red unfilled circles


[[P187]]

.Figure 9.2
image:https://drek4537l1klr.cloudfront.net/janert2/Figures/09fig02_alt.jpg[]

Figure 9.2 Using alpha blending to visualize point density in a dense
data set. All data points are drawn both with blue disks and red rims.

Because contributions from overlapping points add visually, regions of
high point density show up as areas of high color intensity. Regions
where the density is high enough for the rims to contribute significantly
appear red.

All points are first drawn as filled circles ( pt 7 ) in blue ➊ and then again as unfilled
circles ( pt 6 ) in red ➋ . Adding an outline to the circles significantly improves the
appearance of the graph; giving the outline a different color sets off areas of truly
high point density even more strikingly.

You may want to experiment further with this—for example, I’ve obtained good
results when using the same color (say, blue) for both disk and outline, but making
the outline slightly larger than the disk itself (for example, ps 1.5 for the outline, but
ps 1 for the disk).


==== 9.1.3 Selecting a color through indexed lookup

The methods explained so far in this section let you select individual colors. When
that’s what you want, these techniques are convenient: plot sin(x) lc rgb "red" does
exactly that—it plots the sine in red.

It gets trickier if you want to plot several curves at once. To distinguish them, each
should be plotted in a different color, and it would be convenient if gnuplot would do
so automatically. In other words, now you want colors to be chosen from a discrete
selection (rather than specified individually).

This is exactly what gnuplot does: as I explained in section 6.2, gnuplot maintains a
set of distinct colors and (by default) uses the next one for each new function or data
set. (Later in this chapter, you’ll learn how to customize the overall selection of colors
available in this way.)


[[P188]]

Colors (and line types and styles more generally) are identified by a positive inte-
ger. If you want to override gnuplot’s automatic choice of color, or if you want to pick
a particular color from the predefined set, you do so by supplying the appropriate
integer value:

[source,subs=normal,]
plot "data" u 1:2 w l lc 2, "" u 1:3 w l lc 2
This plots both the second and third columns against the first using the second color
from the predefined set of colors for both data sets.

All of this is straightforward. There’s only one possible glitch: don’t confuse lc 1
with lc rgb 1 . The former specifies the first color from the selection of predefined col-
ors (whatever color this may be!). The latter selects a specific color by giving its RGB
components as an integer-packed value. (The value 1 corresponds to "#000001" ,
which is almost black.)

.SPECIAL COLOR INDICES
*****
*****
Gnuplot knows about two special color indices: black and bgnd . The first is a short-
hand to obtain a black line through indexed lookup (that is, without having to iden-
tify a color explicitly). It’s mostly convenient for drawing graph elements like arrows,
borders, and labels: set arrow 1 from 0,0 to 1,1 lc black . (Note the absence of
either quotes or the rgb keyword.)

All contemporary terminals allow an explicit background color to be set using the
background keyword: set terminal pdfcairo background rgb "grey" (see chapter
10). This color is then available through the bgnd index for all graphs sent to this ter-
minal. This is mostly useful to rub out or erase parts of the graph:

[source,subs=normal,]
set object 1 circle at 0,0 radius 1 fill solid fc bgnd front

This clears a circular area of radius 1, centered at the origin, by filling it with the back-
ground color.


==== 9.1.4 Mapping a value into a continuous gradient

Continuous color gradients (called palettes in gnuplot) are the topic of appendix D.
But a discussion of color in gnuplot would be incomplete without mentioning them,
so I’ll give a brief preview here.

First, you need to define a gradient, for example like this:
set palette defined ( 0 'blue', 0.5 'white', 1 'red' )
This defines a color gradient from blue over white to red; white is centrally located in
the mapped interval. You can now use any of the colors from this gradient in a plot
like this:
plot sin(x) lc palette frac 0.25

[[P189]]
This plots the curve in the color that is halfway between blue and white. (The keyword
palette can be abbreviated to pal .)
When you select a color from a palette using the frac keyword, the numeric argu-
ment must lie in the interval [0:1]. You can also map the gradient to a different interval
using set cbrange . (The identifier cb stands for color box.) For example, set cbrange
[-5:5] maps the color gradient into that interval. You can now specify a color by pro-
viding a value from this interval together with the cb keyword. The following plot com-
mand produces the same curve as the previous listing, because -2.5 lies at the same
relative position within the interval [-5:5] as 0.25 lies within the interval [0:1]:
set cbrange [-5:5]
plot sin(x) lc pal cb -2.5
Remapping a gradient to a specific numeric range makes sense when you want to indi-
cate a specific numeric value with a color. That’s the topic of the next section and—in
much more detail—of appendix D.


==== 9.1.5 Using data-dependent colors

Gnuplot can change the color of a line or point based on the values of the data. As
usual, there are three ways to do this: explicitly (using the rgb keyword), by indexed
lookup (using an integer index), and using a gradient (with the palette keyword).
In any case, you must supply an additional column with the using specification of the
plot command; the color information is always taken from the last (rightmost) col-
umn in the using specification. (Value-dependent color is only available for data—if
you want to use it with functions, you have to fake it using the "+" pseudofile—see
section 4.4.)
.EXPLICIT AND INDEXED DATA - DEPENDENT COLORS
*****
*****
Let’s consider an example. Here’s a very short data file:
# x y color
1 2.0 1
2 2.1 2
3 1.9 3
4 2.0 4
5 2.0 5
Either of the following two commands will work:
plot "data" u 1:2:3 w lp lc rgb variable
plot "data" u 1:2:3 w lp lc variable
The first thing to notice is that although the plot style is linespoints , three columns
are specified: the last (rightmost) is used for color information. Next, notice the key-
word variable in the color specification: that’s what turns on data-dependent color-
ing. If variable follows the rgb keyword, the value in the third (color) column is
taken as an integer-packed RGB (or αRGB ) tuple; if variable is used by itself, the
entry in the color column is taken as the index of the color to use. (It’s not possible to
use color names or RGB strings together with variable .)
Explicit
Indexed

[[P190]]
.A WORKED EXAMPLE USING EXPLICIT DATA - DEPENDENT COLORS
*****
*****

In practice, you’ll almost never read either the color value or the color index from a
file. Instead, think of the third column in the using specification as a place to perform
some creative inline transformation (see section 3.3) to calculate a data-dependent
color. Let’s consider a few examples.

Remember DLA clusters, like the one in figure 1.2? For each particle, the data set
contains not only the particle’s coordinates but also the sequence order in which it
was added to the cluster. If you map the latter information onto a color spectrum, you
can generate “tree rings” that indicate how the cluster grew (see figure 9.3).
An easy way to turn sequence numbers into colors is to map them onto the hue
value in the HSV model. Using the hsv2rgb() built-in function, you can do this on the
fly (on a 100,000 particle cluster, in this case):
plot "dla" u 2:3:(hsv2rgb($1/100000.,1,1)) w d lc rgb var
This graph shows clearly that a DLA cluster tends to grow mostly at the rim. Despite
the tenuous structure, it’s rare for a particle to penetrate deeply into an existing clus-
ter; it’s much more likely to get caught by one of the branches extending outward.
Although it worked reasonably well in this example, in general you should use cau-
tion when mapping a quantity to the rainbow spectrum of the HSV color model. One
problem is that this particular color spectrum doesn’t have any inherent sense of
ordering: is yellow larger than blue, or vice versa? Another problem is that the spec-
trum closes in on itself: red represents both very small and very large values. In this
0
10000
20000
30000
40000
50000
60000
70000
80000
90000
100000
Figure 9.3 A DLA cluster (see section 1.1.2) using the HSV color model to indicate
the order in which particles were added to the cluster

[[P191]]
example, it doesn’t matter, because the geometric structure of the cluster provides the
required sense of ordering; but in more general cases, a rainbow plot like this can be
highly confusing. Carefully designed color gradients are almost always a better idea. For-
tunately, gnuplot makes this easy—a topic we’ll come back to in appendix D.
.WORKED EXAMPLES USING INDEXED DATA - DEPENDENT COLORS
*****
*****
Indexed data-dependent colors make sense when the data contains an attribute that
assumes only a discrete set of values (or levels). In listing 9.2, some attributes (such as
the physical dimensions, the year of presentation, and the available horsepower) are
numeric and can have essentially any value. But others, such as the number of cylin-
ders and the country of manufacture, assume only a finite number of discrete values.
Those can be represented through distinct, indexed colors. (See listing 9.1 for the
commands and figure 9.4 for the resulting plot.)
unset key
set xlabel "Year"; set ylabel "Horsepower"
set for[k=1:3] label k sprintf( "% d Cylinders", 4*(k+1) )
➥ at 2003.75,1200+k*50 point pt 7 lc k offset 11,-0.175 right
plot [2003:2014][500:1400] "supercars" u 1:2:($3/4-1) pt 7 ps 1.0 lc var,
➥ "" u 1:2:8 w labels offset 1,-1
# Year PS Cyl Len Height Weight Country Name
2005 1014 16 4462 1159 1888 France "Bugatti Veyron"
2006 1061 8 4475 1092 1270 USA "SSC Aero"
2012 1261 8 4655 1079.5 1244 UK "Hennessey Venom GT"
2011 940 8 4293 1120 1435 Sweden "Koenigsegg Agera"
2005 806 8 4293 1120 1456 Sweden "Koenigsegg CCX"
2009 1104 8 4665 1198 1688 Denmark "Zenvo ST1"
2005 650 8 4460 1114 1100 Germany "Gumpert Apollo"
2009 750 12 4601 1222 1630 UK "Aston Martin 0ne-77"
2011 700 12 4780 1136 1575 Italy "Lamborghini Aventador"
But data-dependent indexed colors can also be used to represent metadata. Here’s a
clever trick: 6 consider a data file containing several data sets, separated by double
blank lines. The index of each data set is available in the pseudocolumn -2 (see sec-
tion 4.4). You can use this information to let gnuplot select a different color for each
data set, by using the value of the pseudocolumn as an index into the set of pre-
defined colors:
plot "data" u 1:2:(1+column(-2)) w lp lc var
Listing 9.1 Command for figure 9.4 using data from listing 9.2 (file: supercars.gp)
Listing 9.2 Data for figure 9.4 (file: supercars)
6
The idea for this application was taken from the standard gnuplot reference documentation.

[[P192]]
Because this example uses indexed lookup, the keyword rgb is absent. You need to use
the column() function, because the dollar-sign shorthand doesn’t work for a negative
column number. And finally, you need to add 1 to the return value, because data sets
in a file are counted starting at 0, whereas line colors are counted starting at 1.
.COLOR GRADIENTS
*****
*****
Indexed and explicit colors work well for discrete colors, but if you want a curve
that changes color continuously, then color gradients are the way to go. Using data-
dependent color with a continuous gradient is similar to what you’ve seen so far,
except the keyword is z instead of variable . Assuming an appropriate color gradient
has been defined, the following command will color the curve according to the gradi-
ent. Again, you need to specify a third column for the color information:
plot "data" u 1:2:3 w l lc palette z
Figure 9.5 shows a way that a color gradient can be used with a regular curve. The idea
is that this curve monitors an important quantity that must not exceed some thresh-
old. The graph uses a color gradient to change the appearance of the curve depend-
ing on the value of the monitored quantity. It’s easy to set up the gradient and create
the plot (more details in appendix D):
set palette defined ( 0 'green', 3 'green', 4 'red', 5 'red' )
plot [][0:5] "monitoring" u 1:2:2 w l palette z lw 2
500
600
700
800
900
1000
1100
1200
1300
1400
2004 2006 2008 2010 2012 2014
8 Cylinders
12 Cylinders
16 Cylinders
Horsepower
Year
Bugatti Veyron
SSC Aero
Hennessey Venom GT
Koenigsegg Agera
Koenigsegg CCX
Zenvo ST1
Gumpert Apollo
Aston Martin One-77
Lamborghini Aventador
Figure 9.4 Using indexed color to visualize discrete values or levels in a data set. For a
set of current “supercars,” the date of presentation and the available horsepower are
visualized through the location on the graph, and the number of cylinders is represented via
color. Compare listing 9.2 for the data and listing 9.1 for the commands.

[[P193]]


==== 9.1.6 The built-in color sequences

For many years, the default color sequence for the most common terminals consisted
of full-intensity red, green, and blue, followed by magenta, cyan, and yellow, because
these are the three basic colors of computer graphics and their binary combinations.
It’s a simple sequence, but not a very good one: the colors are bright and garish, and
yellow is exceptionally difficult to see against a white background. Moreover, this
sequence of colors (with its emphasis on red and green) is particularly challenging for
people who are color-blind! There are also more subtle problems, having to do with
color perception: the blue line, for example, always seems “heavier” than any of the
other colors and tends to dominate a graph.

In gnuplot 5, you can choose from three different color sequences, using the set
colorsequence command (see figure 9.6):
set colorsequence [ default | classic | podo ]
The three color schemes are identified using keywords:
•  default —A terminal-independent sequence of eight colors
•  classic —The original behavior, which differs from terminal to terminal but
usually produces the red/green/blue sequence mentioned earlier
•  podo —A terminal-independent sequence of eight colors, intended to be easy
for color-blind people to distinguish 7
7
Bang Wong, “Points of View: Color Blindness,” Nature Methods 8 (2001): 441.
0
1
2
3
4
5
0 50 100 150 200 250 300
"monitoring" u 1:2:2
0.5
1
1.5
2
2.5
3
3.5
4
4.5
Figure 9.5 Gradient-mapped color. The control curve changes its color if the
monitored quantity exceeds its safe value.


[[P194]]

Unfortunately, none of these three options constitutes a particularly good choice, in
my opinion: the new default scheme, for instance, may be much less garish than the
classic scheme, but its colors are so muted that I now find it difficult to distinguish dif-
ferent lines! The set colorsequence facility is also strangely limited (for example, you
can’t extend or modify the provided color choices), so you’ll probably want to con-
struct your own sequence of colors (and other line properties) from scratch. That’s
what I do, and that’s the topic of section 9.3.

TIP: Because the three built-in color sequences aren’t very good, you should
consider defining and using a custom sequence.


==== 9.1.7 Tips and tricks

Color specifications tend to be clumsy: they’re both lengthy and obscure. It may there-
fore be a good idea to introduce shorthands. Here are some ideas to get you started.
Instead of using a hex string, you can assign its value to a semantically named
variable:
gold = "#FFD700"
gold = pack( 0xff, 0xd7, 0 )
plot "data" u 1:2 w l lc rgb gold
linetype 1
linetype 8
Default
linetype 1
linetype 8
Classic
linetype 1
linetype 8
Podo
linetype 1
linetype 8
Custom
Figure 9.6 The three built-in color sequences that can be selected using set colorsequence ,
and the custom sequence used for the color illustrations in this book. (See section 12.6 for details.)
Hex string
Equivalent: integer value

[[P195]]
This isn’t ideal, because you still have to type the keyword rgb every time. You can
absorb it into the variable if you use gnuplot’s macro facility (see section 5.2):
blue = "rgb '#0000ff'"
plot "data" u 1:2 w l lc @blue
You can even include the lc keyword in the macro:
green = "lc rgb 'green'"
plot "data" u 1:2 w l @green
Rather than use color names, you may also want to consider semantic names for colors:
alarm = "red"
normal = "#00cd00"
The options are endless—adapt them to your needs.


=== 9.2 Lines and points

Gnuplot graphs are constructed from lines and points: these are the fundamental
building blocks. (In keeping with the usage in the gnuplot documentation, the term
point here and in the following refers to the symbol used to represent a single data
point.) All aspects of lines and points can be customized: the width, color, and dash
pattern of lines, and the shape, size, and color of points.

This isn’t news—I introduced all these concepts at the beginning of chapter 6 and
have been using them ever since. (Table 6.1 provides a handy summary.) Most of these
properties are straightforward and won’t need explanation beyond what you can find
in the table. But there are a few exceptions: the selection of available point types
deserves a few words, and so do user-defined dash patterns.


==== 9.2.1 Point types and shapes

Each terminal provides a set of shapes or points that can be used to represent a single
data point. Because these shapes are relatively low-level graph elements, they’re hard-
coded into the implementation of each terminal driver. In general, a gnuplot user
can’t change the existing shapes or add new ones. 8 All commonly used terminals pro-
vide at least a dozen (or so) different shapes, but some terminals define many more
(the old PostScript terminal defined 75 distinct point types!). In practice, fewer than
about 10 point types are sufficiently different that they can be distinguished visually.
The sequence of shapes has been unified across all (contemporary) terminals, at
least for the first few point types (see figure 9.7). Although you can’t change the shape
of the symbol, you can modify its size, line width, and color using the pointsize (or
ps ), linewidth (or lw ), and linecolor (or lc ) properties.

8
You may be able to use symbols beyond those provided by gnuplot by using a single character from a suitable
font as a point symbol—see section 6.3.1. Some terminals, such as tikz , permit user-defined point shapes.

[[P196]]

Point shapes are usually indicated using their index: plot ... w p pt 7 represents
each data point with a filled circle. You may want to define symbolic names for point
types:
frame = 4
box = 5
circ = 6
disk = 7
plot "data" u 1:2 w p pt frame

==== 9.2.2 Dash pattern

The ability to customize dash patterns is a new feature in gnuplot 5; support in older
terminals may be spotty. A dash pattern can be specified inline or defined separately
using set dashtype . Once a dash pattern has been defined this way, you can reference
it by its (integer) index. There are two ways to specify a dash pattern: using a symbolic
string or using a tuple that gives the relative lengths of solid and empty line segments.
.SYMBOLIC STRINGS
*****
*****
A dash pattern can be defined using a symbolic string consisting of the symbols shown
in table 9.2. The dash pattern can consist of up to four non-whitespace characters;
leading whitespace and any further characters are ignored. Figure 9.8 shows some
examples.

Symbolic strings can conveniently be used inline in a plot command. The follow-
ing two commands are equivalent:
plot sin(x) dt '-'
set dashtype 1 '-'
plot sin(x) dt 1
1 : Cross
2 : Saltire
3 : Cross and Saltire
4 : Square, empty
5 : Square, filled
6 : Circle, empty
7 : Circle, filled
8 : Up Triangle, empty
9 : Up Triangle, filled
10 : Down Triangle, empty
11 : Down Triangle, filled
12 : Diamond, empty
13 : Diamond, filled
14 : Pentagon, empty
15 : Pentagon, filled
0 : no symbol
Figure 9.7 Available
point symbols
Square, empty
Square, filled
Circle, empty
Circle, filled
Uses empty squares
Inline specification
Separate definition …
… and indexed lookup

[[P197]]

.EXPLICIT TUPLES
*****
*****
The most general way to specify a dash pattern is to supply a tuple of numeric values.
These values represent the length of subsequent solid and empty line segments.
There can be at most eight elements in the tuple (so that a dash pattern can have at
most four solid parts); the first entry in the tuple is interpreted as solid. Here are two
examples (compare figure 9.8):
set dashtype 1 (2,2)
set dashtype 2 (20,10,2,4,2,10)
Lengths of line segments are measured in units of the line width. A tuple entry of 2
(not 1!) results in a line segment that is as long as it is wide.

Or so it may appear. If you’re using very short line segments, you’re likely to run into
an obscure subtlety: line caps. The cairo library defines three types of line ends: butt ,
Table 9.2 Symbols for dash patterns
Symbol Numeric Description
. (dot) (2,5) A dot followed by a short space
- (dash) (10,10) A dash followed by a space
_ (underscore) (20,10) A long dash followed by a space
␣ (whitespace) (...,10) A space
Dotted line
Long dash followed by a double dot
'.'
'-'
'_'
'... '
'- ..'
(20,10,2,4,2,10)
square round butt
Figure 9.8 Top: Dashed lines resulting from various combinations of the standard
dash symbols or given by an explicit numeric tuple (as shown on the left—the pattern
for the bottom line is given by an explicit numeric tuple). Bottom: Effect of the
different line-cap styles. The line end and the added cap are shown in different colors.

[[P198]]
round , and square (see figure 9.8, bottom), 9 which can be selected when choosing a
cairo-based gnuplot terminal (see section 10.2.3). Unless the chosen style is butt , the
line extends by half a line width past its actual end point. But the default style for the
cairo-based terminals in gnuplot is square , meaning all solid line segments in a dash
pattern appear longer by half the line width at both ends—and the empty segments
appear that much shorter. You now have two options: select the butt option when set-
ting the terminal (for example, set terminal wxt butt ) or take the extent of the line
caps into account when setting up the dash pattern. (You may find it amusing to work
out why the dash pattern (2,2) using butt line caps is equivalent to the dash pattern
(0,4) when using square .)

=== 9.3 Customizing color, dash, and point sequences

Let’s first establish when a predefined sequence of colors (and possibly of other line
properties, such as dash patterns) is relevant: it comes into play only if you’re plotting
many functions (or data sets) and you want to let gnuplot automatically choose a dif-
ferent line color (or pattern) for each new curve. If you don’t use gnuplot’s automatic
style selection, because you specify the plotting style explicitly for each curve instead,
the existence of a predefined color sequence is immaterial. The topic of this section
therefore applies only to a very limited purpose.

That being said, letting gnuplot choose line styles automatically is such a huge con-
venience (in particular when you’re doing casual and exploratory work) that it can’t
be ignored. (It matters less when you’re preparing presentation graphics, because in
that case you naturally want to have full control over all aspects of the plot.)
Gnuplot’s automatic style selector chooses from a sequence of line types. Line types
are gnuplot’s original method for specifying appearance options, and nowadays they
sit rather awkwardly next to the more modern paradigm (based on the set style
facility; see section 9.4). Line types are still essential for gnuplot’s automatic assign-
ment of visual styles to different curves but otherwise have lost much of their previous
importance; in particular, line types are no longer used as containers for general
appearance options.

A line type is a combination of all graphic line attributes together with a point type
and the other point attributes. By construction, every terminal provides an (in princi-
ple) infinite sequence of different line types. This guarantees that gnuplot never runs
out of different styles, no matter how many curves you plot. In practice, not all of
these line types look different, of course—gnuplot uses only about a dozen different
colors and dash patterns before it repeats itself. But every new line gets its own line
type, with a unique numerical index.

9
See http://cairographics.org/samples/set_line_cap.


[[P199]]

==== 9.3.1 Customizing line types

You can customize the default sequence of colors and other properties using the set
linetype command:
set linetype {int:idx} [ lineoptions ]
Here, the first argument is the index of the line type that you wish to modify; it’s fol-
lowed by specifications of graphical attributes (line color and width, point type and size,
and so on—see the tip at the end of section 6.2.3 for an explanation of lineoptions ).
The terminal-specific default values prevail for attributes that aren’t changed explicitly.

TIP: Line types are persistent: they prevail until changed explicitly. In partic-
ular, line types aren’t affected by calls to reset . (They’re reinitialized by
reset session .)
In practice, you’ll only want to redefine a few (the first few) line types and have
gnuplot cycle through them repeatedly when plotting many curves. But because
the number of available line types is always infinite, gnuplot has no way of knowing
when to begin cycling: you have to tell it explicitly. You do so with the command set
linetype cycle :
set linetype cycle {int:period}
Let’s consider an example. You want curves to be drawn with alternating thin red and
wide black lines (only two styles, in other words); the red line should use an empty
square as point symbol and the black line a filled circle ( pt 4 and pt 7 , respectively—
see figure 9.7). The following commands achieve this behavior. Because there are odd
precedence rules between explicit customizations and set linetype cycle , it’s neces-
sary to wipe out previous settings first:
unset for [i=1:32] linetype i
set linetype 1 lw 1 lc rgb "red" pt 4
set linetype 2 lw 2 lc rgb "black" pt 7
set linetype cycle 2
Unfortunately, the set linetype cycle facility applies only to line properties, but not
to point types! It also obeys non-obvious precedence rules, which make its behavior
surprising and hard to predict. 10 My recommendation, therefore, is to avoid it and
instead set all line types explicitly:
set for [i=1:64:2] linetype i lw 1 lc rgb "red" pt 4
set for [i=2:64:2] linetype i lw 2 lc rgb "black" pt 7
This will give you the desired behavior for the first 64 curves you include in a graph
(and, of course, you can always increase the upper limit in the loop as far as necessary).
10
At the time of this writing, this entire area appeared to be somewhat in flux. Check the gnuplot standard ref-
erence documentation for up-to-date details.

Erases any existing customizations
Defines the first line style
Defines the second line style
Tells gnuplot to alternate between two styles

[[P200]]
The same method can be used, even if you want more than two distinct line types—just
increase the step size in the loop accordingly!

==== 9.3.2 Special line types

Every terminal defines two special line types that can’t be modified by the user; see
table 9.3. Line type 0 is frequently useful to add reference or grid lines to a plot. Line
type -1 can be used to add arrows or other decorations, with the guarantee that they
appear solid black.


=== 9.4 Global styles

You can control all graphical aspects of plot elements inline by spelling out the desired
appearance options as part of the plot (or set arrow or set object ) command. But
you can also define global styles. There are three primary reasons to do so:
•  Convenience—Instead of listing all the desired options explicitly (possibly more
than once, if you plot more than one data set or have more than one arrow or
other decoration), you can refer to a style with just its identifier.

•  Semantics—You can set up and refer to styles based on their function (such as
“important” in bright red or “reference” as a dotted hairline).

•  Display targeting—Imagine that you need graphs that look good in different con-
texts: clear and crisp on the screen, bold and bright in a presentation, and
black-and-white in a print publication! Using collections of styles (stylesheets) for
each intended use, this becomes much easier than having to redo all the graphs
by hand.

You create styles using the set style command and can define them for lines and
points, arrows, objects, and so on. In addition to defining global styles, set style is
also used to fix the options on some special-purpose plots—we won’t discuss these
applications here but in their proper context (appendix E).


==== 9.4.1 Data and function styles

By default, functions are plotted with lines ( with lines ), and data from files is plotted
using both lines and points ( with linespoints ). These defaults can be changed using
these commands:
set style data ...

set style function ...

For example, to plot data using with lines , you say set style data lines .
Table 9.3 Special line types defined by all terminals
Line type Description
linetype 0 A minimally visible line; often a thin dotted line in black or gray
linetype -1 A solid black line

[[P201]]

==== 9.4.2 Line styles

You define line styles using set style line . This command takes an integer index of
the style you want to create or change, followed by a combination of line options that
define the desired appearance of the style (see the tip at the end of section 6.2.3 for
the lineoptions shorthand):
set style line {int:index} [ lineoptions ]
set style line {int:index} default
Unless explicitly overridden, all aspects of a line style default to the corresponding
value of the line type of the same index. The keyword default restores a line style to
the equivalent line type.

This begs the question: what’s the difference between line styles and line types? In
brief:
•  Line types are persistent: all of their properties prevail until explicitly changed.
Every terminal provides an infinite number of line types and their properties.
When assigning lines to curves automatically, gnuplot chooses from the avail-
able line types only.

•  Line styles aren’t persistent: they’re deleted by calls to reset . The properties of
line styles default to those of the line type with the same index, unless explicitly
redefined. Line styles aren’t available for automatic assignment to data sets and
functions.

I use the following little mnemonic to remember which is which:
Line-T-ypes are sys-T-em settings.

Line-S-tyles are u-S-er preferences.

My recommendation is to prefer line styles over line types whenever possible and to
restrict the use of line types to the automatic selection feature (where line types are
required).

Here are some examples that give you an idea how line styles can be used:
solid = 100
dotted = 101
important = 102
reference = 103
strut = 104
set style line solid lw 1 lc rgb "green" pt 5
set style line dotted lw 1 lc rgb "blue" dt '.'
set style line important lw 2 lc rgb "red" pt 0
set style line reference lw 0.5 lc rgb "grey" dt (2,4)
set style line strut lw 2 lc black

[[P202]]

==== 9.4.3 Arrow styles

You can predefine arrow styles using set style arrow . The available appearance options
are summarized here—they should all be familiar from section 7.3.2:
set style arrow {idx:index} default
set style arrow [{idx:tag}] [ nohead | head | heads | backhead ]
[ size {flt:length} [,{flt:angle}]
[,{flt:backangle}]
[fixed] ]
[ nofilled | empty | filled | noborder ]
[ front | back ]
[ lineoptions ]
Given all the different appearance options for arrows (in particular with regard to
arrow heads), it may make sense to define common arrow types, for example like so:
nohead = 100
filled = 101
outline = 102
bold = 103
set style arrow nohead nohead
set style arrow filled size screen 0.025, 30, 45 filled
set style arrow outline size screen 0.025, 30, 45 empty
set style arrow bold lw 2 lc rgb "red"
Of course, using symbolic names for the arrow styles is entirely optional. You can now
create an arrow by referencing one of these styles:
set arrow 1 from 0,0 to 1,1 as filled
set arrow 1 from 0,0 to -1,0 as 103
Remember that it’s a good idea to use the screen coordinate system to define the
arrow head: this way, the head size won’t change if the plot range changes!

==== 9.4.4 Fill styles

Several plot styles and decorations can be filled with a color or pattern. This section
introduces the syntax of fill specifications. The three pertinent keywords are fill-
color (or fc ), fillstyle (or fs ), and border (or bo ).

Two of these don’t present surprises: fillcolor must be followed by a color speci-
fication (see section 9.1), and border must be followed by any combination of line
options (see the tip at the end of section 6.2.3). The keyword noborder suppresses the
border. That leaves fillstyle , which does warrant some discussion. 11


11
At the time of this writing, the border and noborder keywords are permissible only if they follow immedi-
ately after the fillstyle or fs directive on the command line.

Uses the symbolic name
Uses the explicit style index

[[P203]]
There are three forms of fill specifiers:
fillstyle empty
fillstyle [transparent] solid [{flt:density}]
fillstyle [transparent] pattern [{idx:style}]
The first one leaves the area empty. The second one fills the area with color; an
optional numerical argument between 0 and 1 is interpreted as density, with 1.0 stand-
ing for full intensity and 0.0 for an invisible fill color. If the optional transparent key-
word is present, then the density value is interpreted as the value of the α channel for
the fill color.

It’s also possible to fill closed areas with cross-hatched patterns: that’s what the
pattern keyword does. All contemporary terminals define a set of eight different pat-
terns (use the test command to see them—this command will be formally introduced
in section 10.1.3); you select one of them through an integer argument after pattern .
If the transparent keyword is present, then the background remains visible through
the grid pattern.

TIP: Areas may appear unfilled even if you set an explicit fill style using fill-
style , unless a fill color has also been selected using fillcolor .

Using set style fill , you can set a global default for many filled styles, such as with
boxes , with candlesticks , with filledcurves (all in chapter 6), and with histograms
(appendix E). It also becomes the default fill style for circles, ellipses, and polygons—
but not for rectangles: for those, you have to use their own set style rectangle com-
mand. See the standard reference documentation for details.


==== 9.4.5 Other global styles

In addition to the applications just discussed, you can use the set style command to
express other global appearance preferences. In particular, you can create predefined
styles for objects (or shapes) in a way similar to that discussed for arrows. Check the
gnuplot standard reference documentation for set style circle , set style ellipse ,
and set style rectangle .

The other available applications of set style are more specific. The command
set style textbox applies only to boxed labels (see section 7.3.3). Again, the stan-
dard reference has the details.

Finally, set style boxplot and set style histogram apply only to special-purpose
plotting styles that I haven’t yet introduced. I’ll do so in appendix E.

=== 9.5 Overall appearance: aspect ratio and borders

In addition to the graph elements that go onto a plot, there are some features that
determine its general appearance: its size and aspect ratio, and the presence or
absence of borders and margins.


[[P204]]

==== 9.5.1 Size and aspect ratio

We have to distinguish between the size of the plot and the size of the canvas. The latter
determines the size of the output file (or screen), whereas the former affects the size of
the graph on the canvas. The canvas size is specified using the following command
set terminal {enum:terminaltype} size {flt:x},{flt:y}
which we’ll discuss in chapter 10 on files and output devices. Here, we’re interested
in the size of the plot on the screen or canvas, which is controlled by the set size
command:
set size [ [no]square | ratio {flt:r} | noratio ]
[ {flt:x} [,{flt:y}] ]
The numeric values x , y scale the plot with respect to the screen. For values less than
1.0 , the graph doesn’t fill the entire screen; for values greater than 1.0 , only part of
the graph is shown. If y is omitted, the plot is scaled in both directions by x . For exam-
ple, set size 0.5 reduces the extent of the plot by half along both axes, while keeping
the overall canvas size fixed.

If the size of the graph is smaller than the size of the canvas, it’s not clear where on
the canvas the graph should be located. You can fix the graph’s position on the screen
using the set origin option:
set origin {flt:x},{flt:y}
The arguments give the origin of the graph in screen coordinates (see figure 7.2 in
chapter 7 for an overview of gnuplot’s coordinate systems).

The ratio option and its relatives ( square and noratio ) provide a shorthand to
control the aspect ratio of the plot: that is, the ratio of the y-axis length to the x-axis
length. Setting set size ratio 2 therefore results in a plot that’s twice as tall as wide,
and set size square is a synonym for set size ratio 1 .

Negative values for the ratio have a special meaning: set size ratio -1 scales the
graph so that the length of the x-axis unit is equal to the length of the y-axis unit. For
ratio -2 , the y-axis unit has twice the length of the x-axis unit; for ratio -0.5 , the
x-axis unit is twice the y-axis unit’s length. Figure 9.9 demonstrates all these settings.
With nosquare and noratio , you reset the aspect ratio of the graph to the default
value of the terminal. Note that neither command resets the scale given by x , y .
It’s possible to give contradictory hints to gnuplot when prescribing both scale val-
ues in addition to the aspect ratio. In such cases, gnuplot attempts to maintain the
desired aspect ratio without exceeding the minimum area given by the scale values.
You can always avoid these situations by fixing only two of the values. My recommen-
dation is to control the size of the plot on the canvas through either the x or y scale value
and to control the aspect ratio using the ratio option. The effect of both of these
options is intuitively clear, and no ambiguity is possible.


[[P205]]

==== 9.5.2 Borders

By default, gnuplot draws borders on all four sides of the plot. This is suitable if the
graph will be used in a larger text document (because it gives the plot a “frame” sepa-
rating it from surrounding text) but can feel cluttered for a standalone diagram; but
it’s simply unsuitable for special diagrams that don’t fit neatly in a rectangular box.
For these reasons, gnuplot gives you the ability to control all parts of the border using
the set border option:
set border [ {int:mask} ] [ front | back | behind ] [ lineoptions ]
The only argument that isn’t familiar by now is mask (see figure 7.3 for layers, and the
tip at the end of section 6.2.3 for the meaning of lineoptions ). This argument is a
bit mask in the form of an integer, each bit referring to one side of the border (see
figure 9.10). The bit positions are counted clockwise from the bottom, so that a mask
value of 1 refers to the bottom, 2 to the left, 4 to the top, and 8 to the right:
15 (=1+2+4+8) paints borders on all four sides. (Additional bits are used for three-
dimensional plots using splot —we’ll discuss them in appendix C.) To draw borders
on some but not all sides, you switch on only those you want to see:
set border 1+2
set border 3
-1
-0.8
-0.6
-0.4
-0.2
0
0.2
0.4
0.6
0.8
1
-3 -2 -1 0 1 2 3
Default
-1
-0.8
-0.6
-0.4
-0.2
0
0.2
0.4
0.6
0.8
1
-3 -2 -1 0 1 2 3
set size ratio 1
-1
-0.8
-0.6
-0.4
-0.2
0
0.2
0.4
0.6
0.8
1
-3 -2 -1 0 1 2 3
set size ratio -1
-1
-0.8
-0.6
-0.4
-0.2
0
0.2
0.4
0.6
0.8
1
-3 -2 -1 0 1 2 3
set size 0.5
Figure 9.9 Controlling overall image size and aspect ratio with set size . Clockwise from top left:
default settings, aspect ratio 10/7; set size ratio 1 , full plot size, aspect ratio 1:1; set size
0.5 , reduced plot on a full-size canvas, default aspect ratio; set size ratio -1 , full plot size, x unit
with the same apparent length as the y unit.

Switches on the bottom and left borders
Same thing

[[P206]]
If tic marks are drawn on the border (as is the default), unsetting the border does not
unset the tic marks. They must be controlled separately using the options discussed in
chapter 8.

.CREATING AN EMPTY SPACE BETWEEN AXES AND DATA
*****
*****
With the set offsets command, you can introduce an empty space between the data
and the borders. This can be desirable to avoid interference between the data and tic
marks and other axes decorations. The set offsets command controls the size of the
empty space on all four sides:
set offsets {flt:left}, {flt:right}, {flt:top}, {flt:bottom}
By default, the arguments are interpreted as given in the first coordinate system;
using the keyword graph , you can also specify the arguments as fractions of the size of
the overall graph. Gnuplot extends the plot ranges to make room for the empty space
as required by set offsets —keep this in mind when using this command.

.CLIPPING DATA POINTS CLOSE TO THE BORDERS
*****
*****
The set clip option controls how gnuplot plots points that are too close to or outside
the plot area:
set clip points
set clip [ one | two ]
The first version, set clip points , is relevant only when you’re using a style that
shows discrete plotting symbols ( with points , with linespoints , and so on). If it’s
active, symbols that would touch or overlap the borders of the plot are suppressed.
Exactly how many points are clipped depends on the symbol size: for larger symbols,
more points need to be clipped. (See chapter 6 for more detail on styles and ways to
influence the symbol size.)
The second version controls how gnuplot plots line segments connecting points if
at least one of the points falls outside the currently visible plot range. If set clip one
is active, line segments are drawn if at least one of the end points falls into the visible
plot range. If set clip two is active, line segments are drawn even if both end points
are outside the current plot range but a straight line connecting them crosses the visi-
ble range. In no case are parts of the line segment drawn outside the visible range. By
default, set clip one is on, but set clip two is off.

15=1+2+4+8 3=1+2
1
2
4
8
1
2
Figure 9.10 The set border
command takes as its first argument an
integer that encodes the choice of
borders to switch on in the form of a bit
mask. The graph indicates which
borders correspond to which bit (in
decimal representation) and also gives
the overall mask value for two common
cases: borders on all sides and borders
on the bottom and left.


[[P207]]

==== 9.5.3 Margins

The empty areas outside a plot’s borders make up the margins (see figure 7.2). By
default, gnuplot calculates the size of the margins automatically, based on the presence
or absence of tics, axis labels, a plot title, and other decorations placed outside the bor-
ders. If necessary, you can fix margins manually using the set margin command.
Traditionally, there have been four different commands, for each of the margins
separately. Gnuplot 5 also contains a version that combines all four into one:
set bmargin [ {flt:chars} | screen {flt:frac} ]
set lmargin [ {flt:chars} | screen {flt:frac} ]
set tmargin [ {flt:chars} | screen {flt:frac} ]
set rmargin [ {flt:chars} | screen {flt:frac} ]
set margin [ {left}, {right}, {bottom}, {top} ]
show margin
The argument is interpreted differently depending on whether the keyword screen is
present: 12
•  Without screen , the argument is interpreted as the width of the margin around
the graph, measured in character widths or heights. Supplying a negative value
restores automatic calculation of an appropriate margin width.

•  With screen present, the argument is interpreted as the absolute position of the
graph’s border, measured in screen coordinates. Using screen ignores and
overrides the current values of set size and set origin .

It’s important to clearly distinguish between these two modes of operation! (See fig-
ure 7.2 for the meaning of screen ; see section 9.5.1 for set size and set origin .)
The set margin command combines all four separate commands into a single
invocation. Each argument can be either a desired width (in character units) or an
absolute position (if preceded by the screen keyword). You can combine both modes
in a single invocation: a command like set margin 10, screen 0.9, -1, -1 is valid.

==== 9.5.4 Internal variables

You can inspect gnuplot’s internal size and margin information by examining the val-
ues of several internal variables. (See section 5.5 for general information on internal
variables.) The variables that are of interest in the current context all have the prefix
GPVAL_TERM_ . You can list them and their values as follows:
show variables GPVAL_TERM_
There are seven such variables; table 9.4 explains what they represent.

12
The gnuplot standard reference documentation states the syntax as at screen , but the at keyword is
optional and will be ignored henceforth.

Bottom margin
Left margin
Top margin
Right margin
Shows the current settings

[[P208]]
Frequently, the numerical value of these variables is less useful; what really matters
are various ratios. For example, the position of the left border in screen coordinates
(see figure 7.2 for the different coordinate systems) is
GPVAL_TERM_XMIN/(1.0*GPVAL_TERM_XSIZE/GPVAL_TERM_SCALE)
In this expression, the multiplication with 1.0 is necessary to force floating-point eval-
uation of the fraction. In general, the units of the variables representing the canvas
size are different from the units representing the location of the graph borders. The
variable GPVAL_TERM_SCALE holds the conversion factor: you must always divide the
variables holding the size by this variable, as in the expression given earlier.

=== 9.6 Summary

In this chapter, we focused less on individual graph elements and their properties and
instead discussed several topics that influence the overall appearance of a graph.
Color, and the way it’s made available in gnuplot, occupied the first part of this chap-
ter. The discussion was pretty technical; appendix D will return to the color topic, but
then we’ll emphasize how to employ color for visualization tasks.

Next, we described how the appearance of lines and points can be controlled in
minute aspects. Gnuplot 5 gives you the ability to define custom dash patterns for
lines, and we explained how to do that.

The last part of this chapter explained how to control the overall appearance of a
graph, such as the presence or absence of graphical borders around a plot, and how
to modify the size and aspect ratio of the entire graph. Gnuplot’s defaults for all these
properties are probably sufficient for the vast majority of your work, but there are situ-
ations where being able to go beyond the basics can give your graphs a palpable lift.
Table 9.4 Internal variables that contain information about the size of the canvas and the position of
the borders
Variable name Description
GPVAL_TERM_XSIZE,
GPVAL_TERM_YSIZE
Size of the entire canvas (or screen) in the horizontal and vertical directions.
GPVAL_TERM_XMIN,
GPVAL_TERM_YMIN
Positions of the bottom and left borders with respect to the canvas. These
are the lower limits of the graph in both directions.

GPVAL_TERM_XMAX,
GPVAL_TERM_YMAX
Positions of the top and right borders with respect to the canvas. These are
the upper limits of the graph in both directions.

GPVAL_TERM_SCALE Conversion factor between the units of the canvas size and the location of
the borders. Variables representing the size must be divided by this variable
to be comparable to the other variables in this table.


[[P209]][[ch10]]

== Chaper 10 Terminals and
output formats
Gnuplot can generate graphs in all common graphics formats (and some uncom-
mon ones, too). The components within gnuplot that are ultimately responsible for
creating all graphical output are called terminals. Different output formats require
different terminals.

Because terminals are the final step in the creation of a graph, the ultimate
appearance of a graph depends directly on the capabilities of the terminal used to
generate it. Some of gnuplot’s terminals produce output of very high quality and
are among gnuplot’s primary assets. Unfortunately, terminal handling in gnuplot is
a bit different than comparable functionality in other programs. We’ll therefore
This chapter covers
•  Understanding terminals
•  Font selection and enhanced text mode
•  Standard graphics file formats
•  Mathematical formulas with gnuplot and LaTeX
•  Interactive terminals

[[P210]]
begin our discussion of terminals with a brief historical digression that explains the
motivation behind gnuplot’s terminal abstraction.

An important capability that is provided by each terminal is the handling of fonts
or typefaces: the selection of fonts and the available effects (italics, boldface, sub- and
superscript) are determined by the choice of terminal. So, we’ll discuss fonts and
related topics in this chapter as well.

Next, we’ll examine the most important terminals, beginning with terminals that
generate output in standard graphics file formats (specifically, PDF and PNG ). Then
we’ll talk about ways to include mathematical notation and formulas on graphs, with
and without the use of LaTeX. We’ll introduce gnuplot’s svg and canvas terminals,
which generate graphics suitable for viewing in contemporary web browsers. And
finally, we’ll quickly survey gnuplot’s interactive terminals.


=== 10.1 The terminal abstraction

If you look in the standard gnuplot reference documentation, you’ll find that gnuplot
supports some 70 different terminals! This may seem daunting, but the reality is that
most of them are obsolete today—the number of terminals that are relevant is (thank-
fully) much smaller. But this leaves unanswered the question of where these 70 differ-
ent terminals originally came from. For this, we need a bit of history.


==== 10.1.1 Historical digression

Gnuplot was originally conceived and implemented at a time (the late 1980s!) when
graphics support was much less standardized than it is today. It wasn’t safe to assume
that a computer even had an interactive graphics terminal: producing graphics usually
required special hardware (such as an attached pen-and-ink plotter or a dedicated
graphics display).

The generic name for such a device that produced visible output was terminal. To
keep gnuplot portable, all code specific to a single terminal was encapsulated into the
terminal facility—today, we’d call it the terminal driver. As graphic terminals devel-
oped and proliferated, gnuplot acquired a selection of such drivers. Nowadays, many
of these legacy devices are obsolete, but the drivers are still part of the gnuplot distri-
bution. Most of them can safely be ignored.

Nevertheless, the abstraction has proven itself capable of adapting to changing cir-
cumstances. Today, the established architecture supports the two forms of graphical
output that are still relevant: it drives interactive, screen-based displays (interactive ter-
minals such as the wxt and qt terminals), and it creates output files, using any of a vari-
ety of standard graphics formats and command languages.


==== 10.1.2 The terminal workflow

The primary reason terminal handling is often seen as obscure and confusing is that it
requires multiple steps. Moreover, if the sequence of steps is interrupted, the gnuplot
session may end up in a different state than at the beginning. This is confusing,

[[P211]]
because the near-unequivocal behavior of most contemporary programs is that an
action “export to file” is both atomic and stateless (or, at least, it appears to be). In
other words, you usually issue a single command to create a file, and then you’re right
back to where you started. Not so in gnuplot.

.THE STANDARD WORKFLOW
*****
*****

The complete workflow to create a graphics file from an interactive gnuplot session
and to restore the interactive session again consists of the following six steps (also
compare listing 2.2):
1 Save the current state of the terminal option with set terminal push .
2 Select a new terminal using set terminal .

3 Select the desired output file or channel name with set output .

4 Generate a plot using plot , splot , replot , or refresh .

5 Restore the original terminal setting using set terminal pop .

6 Restore the original file or channel name with set output .

One reason for this multistep process is that the same terminal abstraction is used for
both the interactive session display as well as the printable export, requiring you to
switch between different modes in a way that seems cumbersome today.

Two issues in particular tend to trip up the unwary. The first is the need to choose
the file format (via the terminal) and the desired filename through two separate com-
mands ( set terminal and set output ). The second is the requirement to restore the
interactive session explicitly after the output file has been generated. (If this doesn’t
happen, subsequent plot commands continue to be sent to the file, clobbering its
contents.)
Some day, gnuplot will acquire an export command that will perform all the
required steps automatically. Until then, you have to either make sure to complete all
the necessary steps manually or use a macro of some form. (You can find implementa-
tions of macros for this purpose in sections 5.2.2, 11.2.1, 11.2.2, and 12.1.2.)

TIP: To export a plot to a file from an interactive session requires multiple
steps. Make sure you complete the process manually or use a macro.

.FLUSH YOUR BUFFERS !
*****
*****
As it turns out, there is a particularly nasty third problem, which is that output buffers
aren’t necessarily flushed after a plot (or equivalent) command. This means when the
plot (or equivalent) command returns, the output file may still be incomplete and
not yet ready to be used as input to other programs.

There’s a simple remedy, though: the next set terminal or set output command
is guaranteed to complete the output file and flush any open buffers. Hence, even if
you don’t want to resume your interactive session, you still need to issue either a set
output or set terminal command. Also be aware that quitting gnuplot does not nec-
essarily flush open files!

[[P212]]

TIP: Output files may not be complete even after the plot command returns.
To guarantee that all buffers are flushed and the file is completed and closed
properly, you must issue either a set output or set terminal command after
the plot command.

.THE PUSH AND POP PSEUDOTERMINALS
*****
*****

The pseudoterminals terminal push and terminal pop can be very helpful in this
context. The command set terminal push saves not only the current terminal type,
but also all selected options. The command set terminal pop restores it. It’s there-
fore possible to restore the previous terminal state even without having explicit infor-
mation about it.

.CHANGING DEFAULT TERMINAL PROPERTIES
*****
*****
A special command exists to change certain terminal options without having to reset
the entire terminal. This can be useful when you want to modify some terminal aspect,
regardless of the current choice of terminal. Five terminal properties can be changed
using this command:
set termoption font "{str:name} [,{flt:size}]"
set termoption fontscale {flt:scale}
set termoption [no]enhanced
set termoption [ linewidth | lw ] {flt:factor}
set termoption [ dashlength | dl ] {flt:factor}
Be aware that only one aspect can be changed per invocation of set termoption ; the differ-
ent aspects can’t be combined into a single call.

.SCALING A COMPLETE PLOT UP OR DOWN
*****
*****
It’s occasionally necessary to scale an entire, finished graph up or down—for a presen-
tation, say, or for inclusion in a publication. Increasing the size of the resulting graph
using set terminal ... size isn’t enough, because the line widths and font sizes won’t
be scaled correspondingly. Instead, you want to adjust the fontscale and linewidth
sub-options to the set terminal command as well.

The set termoption command may be helpful in this context, because it can
adjust these two settings separately from the set terminal command. There is no
equivalent terminal option for the size of symbols; you must use the set pointsize
command for this purpose.


==== 10.1.3 Terminal capabilities and the test command

Output devices (terminals) obviously can differ widely in their capabilities—you can’t
get color plots from a black-and-white printer. Gnuplot has a built-in command called
test that generates a standard test image. The test image shows all available line styles
and fill patterns and also attempts to demonstrate more advanced terminal capabili-
ties, such as the ability to rotate text through an arbitrary angle. To use the test com-
mand, you first need to select the terminal you’re interested in and set the name of
the output file (if it’s not an interactive terminal) like so:

[[P213]]
set terminal pdfcairo
set output "test.pdf"
test
Note that the command is test —not plot test !
In figure 10.1, you see the available line and symbol styles along the right side, fill
patterns along the bottom, and line widths on the left. You can also see what kinds of
arrows the terminal supports and whether it has the ability to rotate text. For the ter-
minal as shown in the figure, all these features are supported.

pdfcairo terminal test
12345678901234567890
test of character width:
Enhanced text: x 0
n+1
Bold Italic
left justified
centre+d text
right justified
rotated ce+ntred text
rotated by +45 deg
rotated by -45 deg
show ticscale -1
0
1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
lw 1
lw 2
lw 3
lw 4
lw 5
lw 6
linewidth
pattern fill
0 1 2 3 4 5 6 7 8
filled polygons:
Figure 10.1 The standard test image to demonstrate terminal capabilities, shown here for
the pdfcairo terminal and the default color sequence set colorsequence default
Gnuplot terminals today
In recent versions of gnuplot, terminal handling has become easier and more consis-
tent than ever. The improvements in terminals and terminal handling alone justify
upgrading to gnuplot 5 at the earliest possible moment!
A huge advance is the development of a family of terminals that are all based on a
common set of high-quality libraries for graphics and font handling. The pngcairo ,
pdfcairo , epscairo , and wxt terminals all use the cairo and pango libraries for graph-
ics and font rendering, and the fontconfig facility for font selection. These libraries
provide advanced capabilities, enabling gnuplot terminals to produce high-quality graph-
ics output. Moreover, because an entire family of terminals shares a common back

[[P214]]

=== 10.2 Font selection and enhanced text mode

Fonts aren’t handled by gnuplot itself—instead, gnuplot relies on capabilities of the
installed system libraries (and, of course, on the selection of installed fonts). In this
section, we investigate how to tell gnuplot to use a specific font from among the avail-
able ones, and we introduce enhanced text mode, which allows additional formatting
options for text.


==== 10.2.1 Font selection

There are three ways to select a font, in increasing order of granularity:
•  Terminals have a default font that’s used for all text labels (unless overridden).
You can select a different default font using the font keyword in the set
terminal command.

(continued)
end, it’s now possible to generate bitmap (PNG), vector (PDF and EPS), and interactive
(wxWidgets) versions of the same graph, with only minor differences between them. a
Even outside this family of terminals sharing a common back end, terminals in gnu-
plot 5 exhibit more consistent behavior than ever before. A common set of options is
available for basically all contemporary terminals. Terminals are guaranteed to offer
at least eight line types that have the same appearance (with regard to color, dash
pattern, and point type) across all terminals. A background color can be selected as
part of the set terminal command.

Font handling, in particular, has become much easier, because all contemporary ter-
minals obtain their font support from the underlying font subsystem in the same way.
Enhanced text mode (see section 10.2.3) is supported and is enabled by default. At
the same time, some traditional uses of enhanced text mode are no longer as rele-
vant: thanks to Unicode and UTF-8 encoding, special symbols can now be requested
without an explicit font change, and the font subsystem will do its best to provide a
suitable glyph.

By default, terminals produce colored graphs using solid lines. The option mono is still
available for all terminals to enforce graphs in black and white, but it does not auto-
matically turn on dashed lines, essentially rendering this option useless. (The options
solid and dashed are still accepted by most terminals but are ignored.) You there-
fore have to select dash patterns explicitly (either globally using set linetype or
inline with dashtype ); thus you’re overall better off using a stylesheet (see section
12.6) to define a set of line types that have both the desired dash type and the
required color when you want to create graphs in black and white.

a
In particular, many of the configuration tricks and tweaks required by the bitmap terminals
based on the GD library and the PostScript terminal are no longer necessary.

[[P215]]
•  Most commands that generate textual output (such as set label and set key )
let you select a font explicitly, again using the font keyword. The font is used only
for the specific label in question.

•  Using enhanced text mode, you can change the font inside a string. This makes it
possible to render individual characters using a specific font if necessary or desired.
Another reason the default font is important is that the average size of its characters is
used to define the character coordinate system (see section 7.2) and to set the size of
the graph’s margins (see section 9.5.3). For variable-width fonts, gnuplot makes a best-
effort attempt to determine an average character size.


==== 10.2.2 Font resolution

In general, all terminals rely on some underlying system library for font resolution.
Most contemporary terminals, and in particular the ones based on the cairo library,
use the fontconfig utility for this purpose. One important service this library pro-
vides is font substitution: given a request for a font, it selects that font from among the
available ones that most closely matches the request, taking into account not just the
name of the requested font but also font characteristics such as style, slant, and
weight. This “ensures that a font will always be returned, but doesn’t ensure that it is
anything like the requested pattern,” as the fontconfig user manual says. 1 The details
of the matching process, and in particular the relative priority of the various attri-
butes, are complicated and not necessarily transparent to the user. The substitution
occurs glyph by glyph: I’ve encountered instances where each character in a string of
special characters was rendered using a different font, depending on which font in
the list of candidates first provided a glyph for the requested character.
One particular problem concerns the rendering of mathematical symbols and
Greek characters. In general, textual labels on a graph should support the graph but
not distract from it. That calls for a clear and neutral font, like Helvetica or another
linear sans-serif font with little line-width variation. In contrast, mathematical symbols
and Greek letters are traditionally drawn with varying stroke weight. If a sans-serif font
is selected as the default font for a terminal, then the font subsystem will attempt to
find sans-serif glyphs for all requested characters, even for special symbols. To avoid
this, I’ve found it necessary to switch fonts inside a string, particularly when I wanted
to use letters from the Greek alphabet.

Figure 10.2 shows the results produced on my system when various free fonts are
requested using the test script in listing 10.1. (Depending on what fonts you have
installed, your results may differ.) The test string consists of a set of regular characters
chosen to exhibit the particulars of the font and a selection of mathematical symbols.
The first group of fonts consists of non-serifs, the second group of serif fonts, and the
last group of three special math fonts. (OpenSymbol is distributed with Open-
Office/LibreOffice, AsanaMath is intended as complement to Palatino, and the STIX
project intends to provide a “comprehensive set of fonts” for scientific publishing.)
1
See www.freedesktop.org/software/fontconfig/fontconfig-user.html.


[[P216]]

unset border; unset tics; unset key
set t pdfcairo size 14cm,17cm
set output "fonttest.pdf"
Listing 10.1 Commands for figure 10.2 (file: font-demo.gp)
Helvetica Quarges Gyt R17
∑αλ ∝ ∫ Γ(θ ⋅ π) dφ → ∞
Nimbus Sans L Quarges Gyt R17 ∑αλ ∝ ∫ Γ(θ ⋅ π) dφ → ∞
FreeSans Quarges Gyt R17 ∑αλ ∝ ∫ Γ(θ ⋅ π) dφ → ∞
TexGyreHeros
Quarges Gyt R17 ∑αλ ∝ ∫ Γ(θ ⋅ π) dφ → ∞
Arial Quarges Gyt R17 ∑αλ ∝ ∫ Γ(θ ⋅ π) dφ → ∞
Verdana
Quarges Gyt R17 ∑αλ ∝ ∫ Γ(θ ⋅ π) dφ → ∞
DejaVu Sans Quarges Gyt R17 ∑αλ ∝ ∫ Γ(θ ⋅ π) dφ → ∞
Liberation Sans Quarges Gyt R17 ∑αλ ∝ ∫ Γ(θ ⋅ π) dφ → ∞
Droid Sans Quarges Gyt R17
∑αλ ∝ ∫ Γ(θ ⋅ π) dφ → ∞
Times Quarges Gyt R17
∑αλ ∝ ∫ Γ(θ ⋅ π) dφ → ∞
Palatino
Quarges Gyt R17
∑αλ ∝ ∫ Γ(θ ⋅ π) dφ → ∞
Bitstream Charter Quarges Gyt R17 ∑αλ ∝ ∫ Γ(θ ⋅ π) dφ → ∞
Utopia Quarges Gyt R17 ∑αλ ∝ ∫ Γ(θ ⋅ π) dφ → ∞
Century Schoolbook L
Quarges Gyt R17 ∑αλ ∝ ∫ Γ(θ ⋅ π) dφ → ∞
OpenSymbol Quarges Gyt R17 ∑αλ ∝ ∫ Γ(θ ⋅ π) dφ → ∞
STIXGeneral
Quarges Gyt R17 ∑αλ ∝ ∫ Γ(θ ⋅ π) dφ → ∞
Asana Math Quarges Gyt R17 ∑αλ ∝ ∫ Γ(θ ⋅ π) dφ → ∞
Figure 10.2 Output produced when various free fonts are requested on my computer—your version
may look different. The first part of the test string contains a selection of characteristic regular
characters, and the second part consists of common mathematical symbols and Greek letters.

[[P217]]
s = "Quarges Gyt R17"
t = " ∑αλ ∝ ∫ Γ(θ ⋅ π) dφ → ∞ "
f = "Helvetica 'Nimbus Sans L' FreeSans TexGyreHeros Arial "
f = f . "Verdana 'DejaVu Sans' 'Liberation Sans' 'Droid Sans' ? "
f = f . "Times Palatino 'Bitstream Charter' Utopia 'Century Schoolbook L' ? "
f = f . "OpenSymbol STIXGeneral 'Asana Math'"
a = 0; b=2.75; c=5.75
n = words(f); m = n
do for[k=1:n] {
m = m - 1
w = word(f,k)
if( w ne '?' ) {
set label w at a,m font "Helvetica,12"
set label s at b,m font sprintf("%s,16", w)
set label t at c,m font sprintf("%s,16", w)
}
}
plot [-0.25:9.25][-1:n] -2

==== 10.2.3 Enhanced text mode

All contemporary terminals support enhanced text mode, which allows additional for-
matting options. In enhanced text mode, some characters become control characters
and indicate, for example, sub- and superscripts. As of gnuplot 5, enhanced text mode is
now the default for all terminals. Enhanced text mode can be enabled or disabled for
individual elements (such as text labels or the key) that contain strings. This may be
useful if you want to use the special characters in regular text. Table 10.1 lists the spe-
cial characters and their effects.

 Here are some additional remarks on enhanced text mode:
•  Curly braces {...} are used both to group several characters together and to
limit the effect of a font declaration to the contents of the braces only. They can
be left off for single-character sub- and superscripts.

•  Phrases in curly braces nest, as in e^{-x^2} or a^{x_i} .

•  Font specifiers must be preceded by a slash / that immediately follows the open-
ing curly brace.

•  Font specifiers can be combined into a single expression: for example,
{/Times:Italic*2 Hello} .

•  Font specifiers apply to everything within the enclosing braces: {/:Italic a_k}
creates a label where both characters are italic. To prevent the subscript from
being italic, you must either take it outside the braces, as in {/:Italic a}_k , or
use an explicit :Normal , like so: {/:Italic a_{/:Normal k}} .

•  A character within the single-byte ASCII range can be selected by supplying its
ASCII code as a three-digit octal number preceded by a backslash.


[[P218]]
Table 10.1 Control characters for enhanced text mode
Control
character
Example Result Description
{} Establishes groups and scopes
^ x^2 Superscript
_ A_{ij} Subscript
@ x@^s_i Aligns sub- and superscripts vertically
x@_i^{-3/2}y You need to put the shorter one first…
x@^{-3/2}_iy … rather than last.

{/ } {/Times Hello} Changes the font
{/= } {/=24 A} Selects an absolute font size (size in printer
points)
{/* } {/*0.5 A} Changes the font size relative to the enclos-
ing font
{/:Normal } {/:Normal Hello} Selects regular font characteristics
{/:Italic } {/:Italic Hello} Selects italics
{/:Bold } {/:Bold Hello} Selects boldface
& [&{abc}] Space, corresponding to the length of the
enclosed argument
~ ~B/ Overlays the two following characters or
groups
~x{.5-} Overlays a - character on the previous char-
acter, raised by 0.5 times the current charac-
ter size
\ \{ x \~ y \} Escapes a special character by preceding it
with a backslash in single-quoted strings
\\ \\{ x \\~ y \\} The backslash must be doubled to escape
special characters in double-quoted strings.

\NNN \101 Selects a symbol using its octal code (single-
byte characters only)
\NNN\NNN \316\261 Selects a multibyte character using a
sequence of octal numbers, one for each byte
in the binary encoding of the character. (The
Unicode character α at code point U+03B1
has the binary representation 0xCE 0xB1 in
UTF-8, which translates to \316\261 in octal
numbers.)
x 2
A ij
x 2
i
x i -3/2 y
x -3/2
i y
Hello
A
A
Hello
Hello
Hello
[ ]
B/
x
-
{ x ~ y }
{ x ~ y }
A
?

[[P219]]
•  Similarly, a multibyte Unicode character can be selected by encoding each byte
of its binary representation as a three-digit octal number. Remember that the
Unicode codepoint U+xxxx does not equal the binary representation in UTF-8 .
Instead, you have to look up the binary representation, convert each byte sepa-
rately to a three-digit octal number, and then supply the sequence of numbers
thus obtained.

•  Special characters can be used in enhanced text mode by preceding them with
a backslash \ for single-quoted strings and by preceding them with a double
backslash \\ for double-quoted strings.

•  Overlays and the escaping of special characters aren’t available for the original
postscript terminal. Both work normally for the pdfcairo and epscairo
terminals.


==== 10.2.4 Worked example

Let’s look at some examples of enhanced text mode (see listing 10.2 and figure 10.3).
Most of the commands should be clear; I only want to point out a few details.
Enhanced text mode can be used anywhere that gnuplot expects a string: in the exam-
ple, it’s used in the labels, for the x tics, and for the entries in the graph’s key. The
scope of a font selection can be limited using curly braces. This is done several times:
for example, in expressions such as {/OpenSymbol φ }(x) , which prints the first char-
acter using the OpenSymbol font but the last three using the regular font.
A word of warning: enhanced text mode works best for simple applications, such as
sub- and superscripts, boldface and italics, and simple changes to the font size or font
face. But complicated, nested expressions may not always work out perfectly (in par-
ticular when using the PostScript terminal—see the gnuplot standard reference docu-
mentation for details).

Enhanced text mode vs. Unicode
Enhanced text mode used to be very important for two applications that today are bet-
ter solved through Unicode. Overlays (using the ~ operator) were a way to create
accented characters, and special characters (such as Greek letters and certain math-
ematical symbols) could be accessed by switching to a different font, like the Post-
Script Symbol font.

Today, both of these effects are better achieved through Unicode. Dedicated glyphs
for accented characters almost always look better than an ad hoc solution using over-
lays; and system-wide font subsystems do their best to return a suitable glyph when
a special symbol is requested, without you having to declare a specific font.
This leaves enhanced text mode as a solution for basic formatting tasks: sub- and
superscripts, and local changes in font size and appearance (italics and boldface).
Nevertheless, font changes are still available, and you’re free to use them if you have
reason to override the selection made by the font subsystem.


[[P220]]

set label 1 "{/OpenSymbol φ }(x) = e^{-x^2/2} / √ 2{/OpenSymbol π}" at 1.2,.25
set label 2
➥ "{/OpenSymbol Φ }(x) = ∫ @_{- ∞ }^x &{i} {/OpenSymbol φ }(t) dt" at 1.2,0.8
set label 3 "{/:Bold*2 Big and Bold}" at -2.5,0.6
set key top left title "{/:Bold Legend}"
set xtics ( "{/OpenSymbol π}/2" pi/2, "0" 0, "-{/OpenSymbol π}/2" -pi/2 )
plot [-3:3] exp(-0.5*x**2)/sqrt(2*pi) t "{/OpenSymbol φ }(x)",
➥ norm(x) t "{/OpenSymbol Φ }(x)"

=== 10.3 Generating PNG and PDF with cairo-based terminals

The pngcairo and pdfcairo terminals are the first choice when it comes to generat-
ing graphs in a standard bitmap ( PNG ) or vector ( PDF ) file format. (There is also the
epscairo format, which is equivalent to the pdfcairo format but produces encapsu-
lated PostScript.) These terminals share a common set of options:
set terminal [ pngcairo | pdfcairo | epscairo ]
[ size {flt:x}[ in|cm ],{flt,y}[ in|cm ] ]
[ font "{str:face} [, {int:size}]" ] [ fontscale {flt:scale} ]
[ background rgb {colorspec} ] [ [no]transparent ]
Listing 10.2 Commands for figure 10.3 (file: enhanced-mode.gp)
0
0.1
0.2
0.3
0.4
0.5
0.6
0.7
0.8
0.9
1
-π/2 0 π/2
φ(x) = e -x
2 /2 ⁄ √2π
Φ(x) = ∫ -∞
x φ(t) dt
Big and Bold
Legend
φ(x)
Φ(x)
Figure 10.3 Enhanced text mode. See listing 10.2.


[[P221]]
[ [linewidth|lw] {flt:factor} ][ [dashlength|dl] {flt:factor} ]
[ butt | square | rounded ]
[ [no]enhanced ] [ [no]crop ] [ mono | color ]
The only option that requires some care is size , because it treats units differently
depending on the output format:
•  For PNG , the size defaults to 640 × 480 pixels (aspect ratio 4:3). If no units are
specified, pixels are assumed; if either cm or in is given, the size is converted to
pixels, assuming 72 pixels per inch.

•  For PDF and EPS , the size defaults to 5 × 3 inches (aspect ratio 5:3). Other sizes
can be specified using either cm or in as units; if no units are given explicitly,
inches are assumed.

Most of the other options are straightforward:
•  You can choose a typeface and size for the terminal’s default font. The default is
font "sans,12" (but see fontscale ). You can give only the size, leaving the
font blank: font ",16" .

•  Using fontscale , you can adjust the size of the font separately and relative to
the current font size. Be aware that the default value of this option is 0.5!
•  You can specify a background color using any one of the explicit color specifica-
tions (those using the rgb keyword—see section 9.1.1). Using transparent
makes the background color transparent.

•  Line widths (for vector formats) default to 0.25 points (with 72 points per
inch). Both the line width and the dash length can be changed by a multiplica-
tive factor. Note that it’s not possible to change the point size in the same man-
ner; you have to use the global set pointsize option instead.

•  The keywords butt , square , and rounded control how the cairo library renders
line ends and joins (see figure 9.8). The default is butt .

•  Enhanced text mode is the default. You can disable it using noenhanced —for
instance, because you want to use its control characters as regular characters.
•  When you use crop , the terminal attempts to trim empty space around the
graph before saving it. The plot isn’t rescaled, so the resulting graph is in gen-
eral smaller than the size specified in the size directive. (The crop option is
only available for pngcairo .)
•  By default, terminals produce colored output. You can force monochrome out-
put using mono , but be aware that this does not automatically turn on dashed
lines—you have to do so explicitly for each line in your graph.


=== 10.4 Using gnuplot with LaTeX

One very common use of gnuplot graphs is to include them as illustrations in a
LaTeX document. This section presents a couple of cookbook-style recipes. First, I
describe how to include a regular graphics file as an image in a LaTeX document.

[[P222]]
Then we discuss gnuplot’s special cairolatex terminal, which allows you to combine
gnuplot graphics with LaTeX text in the same illustration so that you can use the full
power of LaTeX for mathematical typesetting in gnuplot graphs.


==== 10.4.1 Including a graph in a LaTeX document

Including an external figure in LaTeX is fairly easy. One possibility is to use the
graphicx package. This LaTeX package can handle both bitmap and vector formats,
but for best results you want to use a vector format when available. 2
As an example, let’s assume you want to include the graph from figure 10.3 in a LaTeX
document. You’d have to export the graph to PDF , using the following commands:
...
set terminal pdfcairo
set output 'enhanced.pdf'
replot
The resulting file can then be included into a LaTeX document. The complete LaTeX
document is shown in the following listing.

\documentclass{article}
\usepackage{graphicx}
\begin{document}
\section{The First Section}
Here is a very short paragraph. The plot will be included
after this paragraph.

\begin{figure}[h]
\begin{center}
\includegraphics[width=10cm]{enhanced}
\end{center}
\caption{A gnuplot graph, included in \LaTeX}
\end{figure}
And here is a second paragraph. The graph should have
been included before.

\section{The Second Section}
The second section really contains only a very short text.

\end{document}
The graphicx package provides the \includegraphics command, which takes
the name of the graphics file to include as a mandatory parameter. (The filename
extension isn’t required, and it’s recommended that you omit it.) The \include-
graphics command takes a number of optional parameters as key/value pairs, which
2
Also keep in mind that you may have to use pdflatex when using graphics in PDF format, but plain latex
for EPS graphics. Some newer TeX installations perform the necessary format conversion automatically.
Listing 10.3 Importing a PDF into LaTeX: see figure 10.4 (file: doc1.tex)
Commands from listing 10.2 go here.


[[P223]]
let you perform useful operations on the image as it’s included: you can trim, scale,
and rotate it. Here, its size is adjusted ever so slightly (from 5 inches to 10 cm). 3 The
document’s final appearance after processing with LaTeX is shown in figure 10.4.
3
There are many more options—check your favorite LaTeX reference for details. A good place to start is
H. Kopka and P. W. Daly, Guide to LaTeX, 4th ed. (Addison-Wesley, 2004).
1 The First Section
Here is a very short paragraph. The plot will be included after
this paragraph.

0
0.1
0.2
0.3
0.4
0.5
0.6
0.7
0.8
0.9
1
-π/2 0 π/2
φ(x) = e -x
2 /2 ⁄ √2π
Φ(x) = ? - x φ(t) dt
Big and Bold
Legend
φ(x)
Φ(x)
Figure 1: A gnuplot graph, included in L
A T E X
And here is a second paragraph. The graph should have been
included before.

2 The Second Section
The second section really contains only a very short text.

1
Figure 10.4 The final appearance of the LaTeX document shown in listing 10.3. Note the labels
using enhanced text mode in the included gnuplot graph.


[[P224]]

==== 10.4.2 Using the cairolatex terminal

In the previous example, a graphics file containing enhanced-mode text was included
in a LaTeX document. This seems inconvenient, to say the least: because LaTeX has
such powerful capabilities to format text (and mathematical expressions specifically),
there should be ways to use them to lay out the text, rather than dealing with the
much more limited possibilities available through enhanced text mode.

The cairolatex terminal does exactly that: it splits a gnuplot graph into its graph-
ical and textual components. The graph is stored as a PDF (or EPS ) file, and the text is
saved to a LaTeX file. You then include this LaTeX document, which in turn imports
the graphics file, into your LaTeX master file. 4

TIP: When gnuplot generates a file that has to be postprocessed using LaTeX,
it’s particularly important to close the file properly by invoking set output
after the plot is finished: otherwise, the generated file won’t be complete, and
LaTeX will fail. (This applies equally to the cairolatex terminal, as well as to
the tikz terminal later in this section, and other comparable terminals.)
.A WORKED EXAMPLE
*****
*****

An example will make this clearer. Let’s re-create the graph from figure 10.4, this time
using LaTeX formatting commands instead of enhanced text mode. See the next list-
ing (compare to listing 10.2 for a version of this graph using enhanced text mode).
set label 1 '$\phi(x) = \frac{1}{\sqrt{2 \pi}} e^{-\frac{1}{2} x^2}$'
➥ at 1.2,0.25
set label 2 '$\Phi(x) = \int_{-\infty}^x \phi(t) dt$' at 1.2,0.8
set label 3 '\textbf{\Large Big and Bold}' at -2.5,0.6
set key top left Left title '\textbf{Legend}'
set xtics ( '$-\pi/2$' -pi/2, '$0$' 0, '$\pi/2$' pi/2 )
plot [-3:3] exp(-0.5*x**2) /sqrt(2*pi) t '$\phi(x)$',
➥ norm(x) t '$\Phi(x)$'
set terminal cairolatex pdf
set o "cairolatex.tex"
replot
set o
The text for labels and tic marks that are added to the graph now contains LaTeX
directives. In particular, note the $...$ , which indicate math mode in LaTeX and which
are required for many of the special mathematical formatting commands.

4
The cairolatex terminal is a modern replacement for the epslatex terminal, but epslatex remains avail-
able as well.

Listing 10.4 Combining gnuplot and LaTeX using cairolatex (file:cairolatex.gp)
Supply the name of the output LaTeX
file with extension!
Make sure to flush and close the output file.


[[P225]]
All the strings in listing 10.4 use single quotes, and therefore the backslashes they
contain don’t need to be doubled. If you used double quotes instead, then all the con-
tained backslashes would have to be escaped. The third label, for example, would
have to be written like so:
set label 3 "\\textbf{\\Large Big and Bold}" at -2.5,0.6
The cairolatex terminal generates two files: the graph (as a PDF or an EPS file) and
the text (as a LaTeX file). Gnuplot expects the full name (including extension) of the
LaTeX file to be set using set output when you use the cairolatex terminal (see the
third-to-last line in listing 10.4). The following listing shows the LaTeX master file.
\documentclass{article}
\usepackage{graphicx}
\begin{document}
\section{The First Section}
This is a different document. We will include a \LaTeX\ file
containing the graph below.

\begin{figure}[h]
\begin{center}
\input{cairolatex}
\end{center}
\caption{A graphics file included in \LaTeX, with \LaTeX\ labels}
\end{figure}
And here is a second paragraph. The graph should have
been included before.

\section{The Second Section}
The second section really contains only a very short text.

\end{document}
Note how similar this document is to the one in listing 10.3. The graphicx package
must again be specified explicitly. The document then uses \input (instead of
\includegraphics —that’s the only difference) to include the LaTeX file written by
gnuplot. Again, it’s recommended that you omit the extension: LaTeX will look for a
file with .tex extension. The final document (after LaTeX processing) is shown in fig-
ure 10.5.

Listing 10.5 LaTeX document that imports cairolatex.tex (file: doc2.tex)

[[P226]]
1 The First Section
This is a different document. We will include a L
A T E X file contain-
ing the graph below.

0
0.1
0.2
0.3
0.4
0.5
0.6
0.7
0.8
0.9
1
−π/2 0 π/2
φ(x) =
1
√ 2π e −
1
2 x
2
Φ(x) =
? x
−∞ φ(t)dt
Big and Bold
Legend
φ(x)
Φ(x)
Figure 1: A graphics file included in L
A T E X, with L A T E X labels
And here is a second paragraph. The graph should have been
included before.

2 The Second Section
The second section really contains only a very short text.

1
Figure 10.5 The final appearance of the LaTeX document shown in listing 10.5. Note the true LaTeX
labels and tic marks on the graph. Compare to figure 10.4.


[[P227]]
.OPTIONS FOR THE CAIROLATEX TERMINAL
*****
*****
Now that you’ve seen how the cairolatex terminal is used, we can take a closer look
at its features. It shares most of its features with the pngcairo and pdfcairo terminals:
set terminal cairolatex [ eps | pdf ] [ standalone | input ]
[ header "{str:header}" | noheader ]
[ size {flt:x}[ in|cm ],{flt,y}[ in|cm ] ]
[ font "{str:latexfont}[,{int:size}]" ][fontscale {flt:scale}]
[ background rgb {colorspec} ] [ [no]transparent ]
[ [linewidth|lw] {flt:factor} ][ [dashlength|dl] {flt:factor} ]
[ butt | square | rounded ] [ [no]crop ]
[ blacktext | colortext ] [ mono | color ]
Only three options are new: using the eps and pdf keywords, you choose the format of
the graphics part of the output. Be aware that the default is eps (not pdf ).
If you select standalone , the generated LaTeX document is complete and can be
compiled by itself. In other words, it doesn’t have to be included into another LaTeX
document for further processing. This way, you can create standalone graphics with
LaTeX-style annotations.

In standalone mode, the name of the generated graphics ( PDF or EPS ) file is mod-
ified by appending -inc to the base name: the two files written by cairolatex would be
called, for example, graph.tex and graph-inc.pdf. This means that the resulting graph,
which combines both plot and text, can still be named graph.pdf. The default value
for this option is input , which generates an incomplete LaTeX document for inclu-
sion in a master file, as shown earlier.

The last new option is header . With it, you can add an arbitrary set of LaTeX com-
mands into the LaTeX file containing the text component of the plot. For instance,
you could use this
set terminal cairolatex header "\\bfseries"
to print all text in the plot in boldface.

If LaTeX finds the file gnuplot.cfg when processing a standalone file, it’s included
in the preamble of the document. It’s included before the argument to the header
option, so the latter can be used to override global settings from the gnuplot.cfg file.
Finally, the font option changes its meaning for the cairolatex terminal, com-
pared to the pdfcairo and pngcairo terminals. Instead of the names of system fonts,
cairolatex obviously expects names for LaTeX fonts. The font description consists of
three parts: the font name, the font series, and the font shape. All three parts are
optional, but the commas are mandatory. Here are two quick examples:
set terminal cairolatex font "cmr,b,it"
set terminal cairolatex font ",,sc"
ComputerModern, bold, italic
Surrounding font, with small caps

[[P228]]
You can give the size of the font after the font description: set terminal cairolatex
"cmr" 14 .

The cairolatex terminal provides additional ways you can access LaTeX features
from within a gnuplot command script. Check the gnuplot standard reference docu-
mentation and your favorite LaTeX reference for more details.


==== 10.4.3 Letting LaTeX generate the graph

When you use the cairolatex terminal, gnuplot draws the graph, and LaTeX pro-
vides the text labels. You can go a step further and let LaTeX draw both the text and
the graph. Gnuplot merely creates a set of LaTeX commands that accomplish both
tasks. Several terminals take this approach; here I’ll briefly introduce the tikz termi-
nal as an example for the overall concept. The context terminal follows a similar idea.
The tikz terminal uses the Lua language to create the required LaTeX commands.
The next listing re-creates the graph from listing 10.4 but uses the tikz terminal.
set label 1 '$\phi(x) = \frac{1}{\sqrt{2 \pi}} e^{-\frac{1}{2} x^2}$'
➥ at 1.2,0.25
set label 2 '$\Phi(x) = \int_{-\infty}^x \phi(t) dt$' at 1.2,0.8
set label 3 '\textbf{\Large Big and Bold}' at -2.5,0.6
set key top left Left title '\textbf{Legend}'
set xtics ( '$-\pi/2$' -pi/2, '$0$' 0, '$\pi/2$' pi/2 )
plot [-3:3] exp(-0.5*x**2) /sqrt(2*pi) t '$\phi(x)$', norm(x) t '$\Phi(x)$'
set terminal tikz standalone
set o "tikz.tex"
replot
set o
Notice that the tikz terminal is invoked with the standalone option: in this case,
you’re creating just the graph. Gnuplot produces a LaTeX file called tikz.tex that can
be processed using pdflatex . Some auxiliary files that are required by LaTeX are part
of the gnuplot distribution, but you can also generate local copies of them in the cur-
rent directory by including the keyword createstyle in the call to set terminal
tikz ... . The resulting graph is shown in figure 10.6. Be aware that you need to have
the pgf (TeX Portable Graphics Format) package installed, which is part of the LaTeX
distribution but may not be installed by default.

How does this entire approach compare to the alternatives? Historically, one
advantage of letting LaTeX generate the graph was that LaTeX allowed greater con-
trol over the appearance of lines, dash patterns, and the like. This aspect has become
less important as gnuplot has acquired some of these capabilities.

Terminals such as pdfcairo produce a separate (standalone) graph, which poten-
tially has to be included into a document. Using the tikz or context terminal, you
can embed the commands that generate the graph into the document, so only a
Listing 10.6 Commands for figure 10.6 (file: tikz-demo.gp)
Supply the name of the output LaTeX file with extension!
Make sure to flush and close the output file.


[[P229]]
single file has to be processed. Whether this is a good idea is another question—per-
sonally, I prefer the separation of concerns provided by having standalone graphs and a
document that references them. Also be aware that LaTeX may encounter resource
(specifically, memory) limitations when processing large graphs.


=== 10.5 Scalable graphics for the Web with SVG and HTML5

Traditionally, graphics to be displayed in web pages were bitmaps—and you can still
do this, using the pngcairo terminal, for instance. But gnuplot can also generate
graphs using scalable formats that can be rendered in a web browser. The svg terminal
creates a graph using the Scalable Vector Graphics ( SVG ) format; the canvas terminal
prepares JavaScript commands for use with the HTML5 canvas element.


==== 10.5.1 The svg terminal

The svg terminal behaves similarly to the pngcairo and pdfcairo terminals, but it
creates SVG code, which can be captured in a file using set output :
set terminal svg [ size {int:x},{int:y} [ fixed | dynamic ] ]
[ font "{str:name} [, {int:size} ]" ]
[ fname "{str:fontname}" ] [ fsize {int:fontsize} ]
[ fontfile {str:filename} ] [ [no]enhanced ]
[ rounded | butt | square ] [ background rgb {colorspec} ]
[ [linewidth|lw] {flt:fac} ] [ [dashlength|dl] {flt:fac} ]
[[ mouse ] [ standalone | jsdir "str:dirname" ]]
[ name "{str:title}" ]
0
0.1
0.2
0.3
0.4
0.5
0.6
0.7
0.8
0.9
1
−π/2 0 π/2
φ(x) =
1
√ 2π e −
1
2 x
2
Φ(x) =
? x
−∞ φ(t)dt
Big and Bold
Legend
φ(x)
Φ(x)
Figure 10.6 A graph drawn using the tikz terminal. See listing 10.6 for the commands.

[[P230]]
You can specify a size in pixels; the default size is 600 × 480. By default, or if the key-
word fixed is given, the resulting graph has an absolute size; if dynamic is given, then
the resulting graph adapts to the size of the viewer (typically filling the entire avail-
able area).

A font can be specified using the usual format, but you can also specify only a font
name or font size using the keywords fname and fsize . Using fontfile , a file with
font information can be embedded into the SVG document; gnuplot searches for the
requested file using the information in the GNUPLOT_FONTPATH environment variable.
The font must be an SVG font, not a PostScript or TrueType font.

The keyword mouse enables mousing: mouse coordinates are continuously dis-
played when the mouse is over the image; and individual curves can be toggled on or
off by clicking their entry in the graph’s key. Mousing requires an external JavaScript
script, which is usually found in a standard location of the local gnuplot installation;
you can change the location by providing a path name to the jsdir option. The
standalone option embeds the mousing code in the SVG file, rather than referring to
an external document. Finally, you can use name to give the plot an identifier by which
it can be referred to by JavaScript or a web page that includes the graph.
An SVG file can be used by itself or included in a web page. It’s recommended that
you use the <object> tag for this purpose, like so:
<object type="image/svg+xml" data="graph.svg">
Your browser does not support SVG.

</object>
This also provides a fallback message to the user, in case the user’s browser doesn’t
support SVG .


==== 10.5.2 The canvas terminal

The canvas terminal creates JavaScript commands that draw onto an HTML5 canvas
element. It can be called in two different modes:
•  Using standalone , the terminal produces a web page (that is, HTML code) con-
taining a <canvas> element and the JavaScript to draw on it. The set output
option should therefore specify a file with extension .html (or equivalent).
•  The name option identifies the name of a JavaScript function that will be gener-
ated, and the terminal produces just the set of JavaScript commands that
implement that function. The set output option should specify a file with
extension .js.

The canvas terminal supports various options:
set terminal canvas [ size {int:x},{int:y} ]
[ font "{str:name} [,{int:size}] ] [ fsize {int:size} ]
[ [no]enhanced ]
[ title "{str:title}" ]
[ rounded | butt | square ] [background rgb {colorspec}]
[ [linewidth | lw] {flt:fac} ]

[[P231]]
[ [dashlength | dl] {flt:fac} ]
[ standalone [mousing] | name "funcname" ]
[ jsdir "{str:url}" ]
You can specify a font using font . This setting is currently ignored, but a font size can
be selected using fsize .

In standalone mode, the terminal creates a complete web page, which includes
the JavaScript code for the graph. In addition, the web page refers to various other
JavaScript files that are part of the gnuplot installation and that it expects to find in a
standard location. You can specify a different directory using the jsdir option; this
may be appropriate when the web page isn’t viewed locally, but is served on the Web.
If the mousing keyword is used in conjunction with standalone , then some additional
elements are included in the page that show the mouse coordinates and provide fur-
ther ways to interact with the graph (such as zoom and unzoom functionality).
When the name option is used, gnuplot generates only the JavaScript. The resulting
code contains the implementation of a JavaScript function with the desired name. For
example, assume that you’ve created a JavaScript file called plotter.js, containing a
function called drawplot() , using the following commands:
...
set terminal canvas name "drawplot"
set output "plotter.js"
replot
These files can be used in a web page like the one in the following listing.
<html>
<head>
<script src="/usr/share/gnuplot/5.0/js/canvastext.js"></script>
<script src="/usr/share/gnuplot/5.0/js/gnuplot_common.js"></script>
</head>
<body onload="drawplot();">
<script src="plotter.js"></script>
<canvas id="drawplot" width=600 height=400>
<div id="err_msg">Your browser does not support HTML5 canvas.</div>
</canvas>
</body>
</html>
Several details are important:
•  The header section references two external scripts, which are part of the gnu-
plot distribution. Make sure the path to these files is correct in the header and
that the files are visible.

•  The name of the function appears twice in the page: as the value of the onload
attribute of the <body> tag, and as the value of the id attribute of the <canvas> tag.
Listing 10.7 Using the canvas name terminal (file: canvas-demo.html)
plot commands go here.


[[P232]]
•  The name of the generated JavaScript file is used in the <script> tag within the
page’s body.


=== 10.6 Interactive terminals

In contrast to the large range of options available for file-based terminals, interactive
terminals are rather straightforward.


==== 10.6.1 Common options

Gnuplot can have multiple plot windows open simultaneously, although only one of
the windows will receive plot commands at any time. You can create a new plot win-
dow by specifying the terminal ID (which is just an integer expression) when choosing
the terminal, like so:
set terminal wxt 1
To switch between open windows, use set terminal together with the terminal type
followed by the window ID to select the active terminal. The keyword close in a set
terminal command closes the identified window. (Depending on the window man-
ager, the window may persist until it has received mouse or keyboard focus for the first
time after the set terminal ... close command has been issued.)
To distinguish between multiple plot windows, you can give each one a title, which
will (depending on the window manager) be displayed in the window’s header bar.
(This is the title of the window only and has nothing to do with the title that can be
placed on the plot using set title .)
Plot windows are automatically raised and receive input focus when a new plot is
drawn. You can disable this behavior using the noraise option, so that keyboard focus
stays with the command window even when a plot command is issued.

By default, pressing the space bar while the plot window has focus raises the command
window, and pressing the Q key closes the plot window. Using the ctrl option, these bind-
ings are replaced by combinations of the Ctrl key together with either the space bar or the
Q key (thus freeing up those keys to be rebound otherwise: see section 12.4.3). 5
When the persist option has been enabled, plot windows stay up even when gnu-
plot is exited (or prevent gnuplot from terminating completely until all plot windows
have been closed explicitly).

You can use three commands to manipulate interactive terminals directly: raise ,
lower , and clear . The first two take an optional window identifier as optional argu-
ment. The clear command (which always acts on the most currently active terminal)
is useful even for non-interactive terminals: it clears the plot area (and forces a
form-feed or page break for non-interactive terminals). It’s required, for example, in
some applications of multiplot mode (see section E.1).

5
Everything having to do with keyboard focus and the raising and lowering of windows depends on the inter-
play of the window manager and the widget set implementing the terminal. As of this writing, not all of this
functionality works with all window managers.


[[P233]]

==== 10.6.2 The wxt and qt terminals

The wxt and qt terminals are very similar in their functionality but are built using dif-
ferent widget sets. Because both widget sets are cross-platform, both terminals are
available on all current operating systems: Linux, Windows, and Mac OS X .
Both terminals share the most important options:
set term [ wxt | qt ] [ {int:id} ] [ title "{str:title}" ]
[ size {int:width},{int:height} ] [ position {int:x},{int:y} ]
[ font "str:face[,{int:size}]" ] [ [no]enhanced ]
[ [no]raise ] [ [no]persist ] [ [no]ctrl ]
[ close ]
In addition, both terminals support the dashlength (or dl ) option. The wxt terminal
(but not the qt terminal) also offers the background (or backg ) and linewidth (or
lw ) options.


==== 10.6.3 The aqua terminal

The aqua terminal is a native Mac OS X terminal for gnuplot. It relies on AquaTerm.app:
set term aqua [ {int:id} ] [ title "{str:title}" ]
[ size {int:width},{int:height} ]
[ font "str:face[,{int:size}]" ] [ [no]enhanced ]

==== 10.6.4 The windows terminal

The windows terminal is for use on Microsoft Windows platforms:
set term windows [ {int:id} ] [ title "{str:title}" ]
[ size {int:width},{int:height} ] [ position {int:x},{int:y} ]
[ font "str:face[,{int:size}]" ] [ [no]enhanced ]
[ close ]
The windows terminal supports some additional GUI features; see the standard gnu-
plot reference documentation for details.


=== 10.7 Other terminals

As mentioned in the introduction to this chapter, gnuplot supports a lot of termi-
nals—many more than I discussed in this chapter. Although most of them are no lon-
ger relevant, some may be of use in specialized situations.

Traditionally, the postscript terminal was very important, and so were the gif , png ,
and jpeg bitmap terminals based on the GD library. These terminals have largely been
replaced by the pdfcairo and pngcairo terminals discussed earlier in this chapter. 6
6
The default appearance of graphs produced using pdfcairo differs somewhat from those generated with
postscript . Explicitly specifying the aspect ratio with set terminal pdfcairo size 5in,3.5in and
adjusting the border thickness and point size with set border lw 1.5 and set pointsize 0.75 bring the
results from the pdfcairo terminal much closer to the look familiar from the postscript terminal. If you
want to create monochrome graphs, you’ll need to define your own dash patterns—see the stylesheet in listing
12.9 for an example. You may also want to specify the Helvetica font, but the result will depend on the selec-
tion of fonts installed on your system (whereas PostScript graphs were guaranteed to use the actual Helvetica,
because it’s one of the 35 PostScript core fonts).


[[P234]]
There are many more terminals that generate commands suitable for TeX or
LaTeX processing than I described here. If you’re interested, you may want to check
out the standard gnuplot reference documentation for eepic , latex , pslatex ,
pstricks , texdraw , and tpic .

In addition to LaTeX, gnuplot supports some other graphical command lan-
guages. Check out the fig and tgif terminals.

You should also know about two terminals that are truly obsolete but are still sup-
ported and may provide a safe fallback solution if necessary: x11 and dumb . The x11
terminal is built on the X11 system without the benefit of a modern widget system. As
an X11 application, it honors many of the standard X11 conventions, such as geome-
try, color resources, and app-defaults. The x11 terminal has been superseded by termi-
nals such as wxt and qt that are built using contemporary widget sets.

Finally, a true classic: the dumb terminal (see figure 10.7). This is a terminal for
character-oriented output devices. It uses characters to draw an ASCII -art rendition of
the plot: it’s the fallback for console-oriented systems or over really slow network con-
nections. For all of these terminals, see the standard gnuplot reference documentation.

=== 10.8 Summary

Gnuplot uses the terminal facility to create output for other applications and devices.
The pngcairo and pdfcairo terminals create graphs in standard bitmap ( PNG ) and
vector ( PDF ) formats. The svg and canvas terminals can generate vector graphics suit-
able for inclusion in dynamic web pages.

Figure 10.7 The dumb terminal

[[P235]]
The appearance of strings and text labels depends on the available fonts and the
capabilities of the chosen output format. Enhanced text mode lets you embed simple
formatting commands (such as sub- and superscripts) in text labels.

For those who are familiar with LaTeX, the cairolatex terminal makes it possible
to use LaTeX’s text (and, in particular, math) formatting capabilities together with
gnuplot’s plotting facilities to achieve particularly high-quality plots for publications
or other printable documents. Finally, I provided a brief overview of interactive termi-
nals for various platforms.


[[P236]][[ch11]]

== Chaper 11 Automation, scripting,
and animation
In the preceding chapters, we’ve studied most commands and options that can be
used from within gnuplot. But up to this point, our discussions assumed that you’d
be running gnuplot interactively: entering commands, viewing plots, and then
entering more commands.

But sometimes that’s not what you want. For instance, you may have a large
number of data sets and just want to convert all of them to plots: it would be great
to automate this task through scripting. Or you may have a cron job running nightly
to scan web server logs and want it to also generate some plots showing the number
of hits per hour, without requiring human intervention: that’s batch processing. Or
you might want to use gnuplot as a graphing back end, while tendering control to
some other program.

This chapter covers
•  Loops and conditionals
•  Command files and batch processing
•  Calling gnuplot from other programs
•  Animations

[[P237]]
All these situations involve tasks that have been automated to some degree. In this
chapter, we’ll study ways to do this, either using gnuplot’s own facilities or using gnu-
plot in conjunction with an external programming language.


=== 11.1 Loops and conditionals

Gnuplot has support for loops and conditionals: this makes it possible to automate
repeated tasks. In contrast to the inline loops that we encountered earlier (see section
5.4), the control structures introduced in this section are more general. They can be
applied to any command, or any combination of commands—not just a single plot or
set command, as was the case for inline loops. In addition to two different loops and
a conditional construct, there’s also a special operator that calculates the sum of a set
of numbers. Let’s look at all of them in detail; table 11.1 provides a summary.
The do for loop is a generalization of the inline loop concept. Loops can extend
over a numeric range (start and end inclusive; the increment is optional and defaults
to 1). Alternatively, the do for loop can also iterate over whitespace-separated tokens
in a string.

The other loop is a while loop. It executes the statements in the loop body as long
as the supplied condition doesn’t evaluate to 0.

The if statement is used to construct conditionals. The else clause is optional; at
present, there is no provision for repeated conditions (no elsif or similar).
Finally, the sum construct is an expression (meaning it returns a value). It iterates over
a set of integers, evaluates a given expression, and adds the expression’s value to a run-
ning total. Upon completion, the value of the running total is returned. It isn’t possible
to give a step size, and the evaluated term need not include the iteration variable:
sum[var=start:end] expression
The following examples will make this clearer:
print sum[k=1:10] 1
print sum[k=1:10] k
plot "data" u 1:(sum[k=2:5] column(k)/4.)
Prints 10.0
Prints 55.0
Plots the average of cols 2–5
Limitations of gnuplot’s programming model
At the present time, gnuplot offers only limited support for scripting. It has control
structures (loops and conditionals) but neither data structures a nor subroutines—and
of course no such thing as local variables! This shouldn’t be a surprise: gnuplot was
never intended as a programming environment, and the available scripting support is
little more than an ad hoc collection of convenience features, intended to take the
tedium out of repeated tasks.

a But see the footnote on page 15.


[[P238]]
Table 11.1 Gnuplot loop constructs and conditionals
Syntax Example
do for [var=start:end:increment] {
statement
statement
...
}
do for[k=1:10] {
print k
}
do for [var in tokenstring] {
statement
statement
...
}
do for [s in "abc uvw xyz"] {
print s
}
while( condition ) {
statement
statement
...
}
x = 0
while( x < 10 ) {
x = x + 1
print x
}
if( condition ) {
statement
statement
...
} else {
statement
statement
...
}
x = 0
if( x < 0 ) {
print "Negative"
} else {
print "Not negative"
}
(continued)
The problem is that control structures like loops require arrays and subroutines to
work properly: they don’t make much sense otherwise. But because gnuplot doesn’t
offer such facilities, existing features find themselves “press-ganged” into roles that
they aren’t intended for: whitespace-separated strings, together with the word() and
words() functions, are used to mimic iterable data structures; array indexes are
faked through numeric suffixes on variable names; and individual command files
have to stand in for subroutines. Depending on your perspective, you may find this
either hideous or ingenious.

You can’t very well have “a little” programming support. Either you don’t have any, or
you’ll find that each “small” feature before long leads to the addition of yet another
“small” feature, until you end up with a complete programming environment any-
way—simply by following the law of unintended consequences.

Because of this, I doubt the wisdom of adding programming support to gnuplot
through opportunistic accretion and without clarity about the intended programming
model. The evolution of programming languages over the last 30 years (and the last
15, in particular) has shown how difficult it is to create a programming environment
that “wears well as one’s experience with it grows.”

[[P239]]

==== 11.1.1 Worked example: making graph paper

To kick off our list of examples for gnuplot’s looping constructs, let’s make some quad-
ruled graph paper. This application demonstrates how repetitive tasks can be automated
with loops. It also has an immediate graphical representation (see figure 11.1).
On commercially produced graph paper, every fifth line is printed a little wider than
the remaining lines to impose some larger-scale, visual guidance to the user. In the
graph in figure 11.1, I instead made every fifth line a little darker than the other lines,
using different shades of grey. For best effect, it’s important to add the darker lines
later to the plot than the other lines.

The commands for the graph paper in figure 11.1 are shown in listing 11.1. The
size of the entire graph is set to 12.5cm×12.5cm, but the actual plot (the canvas) is
scaled to 80% of that, leading to a finished 10cm×10cm square with millimeter spac-
ing of individual lines.

Figure 11.1 Graph paper: an easy application of gnuplot’s loops. See listing 11.1.

[[P240]]

set terminal pdfcairo size 12.5cm,12.5cm
set o 'graphpaper.pdf'
set size 0.8,0.8
set origin 0.1,0.1
set margins 0,0,0,0
unset key
unset tics
set style arrow 1 nohead lw 1
set for [i=1:99] arrow from i/10.,0 to i/10.,10 as 1 lc rgb 'light-grey'
set for [i=1:99] arrow from 0,i/10. to 10,i/10. as 1 lc rgb 'light-grey'
set for [i=5:95:10] arrow from i/10.,0 to i/10.,10 as 1 lc rgb 'grey'
set for [i=5:95:5] arrow from 0,i/10. to 10,i/10. as 1 lc rgb 'grey'
set for [i=10:90:10] arrow from i/10.,0 to i/10.,10 as 1 lc rgb 'dark-grey'
set for [i=10:90:10] arrow from 0,i/10. to 10,i/10. as 1 lc rgb 'dark-grey'
plot [0:10][0:10] 1/0
set o

==== 11.1.2 Worked examples: iterating over files

It’s no surprise that gnuplot’s looping facilities come in handy whenever you’re deal-
ing with a large number of similar files. Let’s consider two examples—one straightfor-
ward, the other one not.

.PLOTTING SEVERAL FILES
*****
*****
Imagine that you have a directory containing many data sets. Each data set is in a sep-
arate file, and the files are all named in a predictable fashion: data01, data02, and so
on. You want to generate a plot of every data set, each in its own file, with appropri-
ately chosen filenames. Here’s how to do it (the sprintf() function comes in handy
to format the input and output filenames properly):
set terminal pdfcairo
do for[k=1:50] {
set output sprintf( "graph%02d.pdf", k )
plot sprintf( "data%02d", k ) u 1:2
set output
}
.MAKING DATA COMPARABLE
*****
*****
The next example is more complicated. In this case, you have only three files (data1,
data2, and data3), but you don’t want to plot each data set in a separate graph.
Instead, you want to combine them onto a single graph so that they can be compared
easily. To compare disparate data sets meaningfully, it’s often necessary to normalize
the data before plotting it. For now, and to keep the exposition simple, let’s assume
that you just want to subtract the respective average value from each data set before
Listing 11.1 Commands for figure 11.1 (file: graphpaper.gp)
Chooses the output file format
Creates the output file
Plots the data
Flushes the output channel

[[P241]]
plotting it. (You’ll see another example of normalizing data for the sake of compari-
son in section 14.1.3.)
It’s easy enough to loop over the files and use the stats command (see section 5.6)
to calculate the respective average (or mean) values. The problem is that you need to
store the separate values temporarily, so that you can use them later in the plot com-
mand. Because gnuplot doesn’t have an array data structure, you need to bend over
backward to accomplish this goal. I’m going to show you two different ways to get there.
In the first implementation, variables with numeric suffixes stand in as array
entries. But because it’s impossible to create variables dynamically, a string containing
the variable definition is constructed instead, which is then executed using eval . The
subsequent plot command, using an inline loop, does the same thing—it builds up
the variable name as a string and obtains the value of the corresponding variable
using the value() function (see section 5.1 for information about value() ):
do for[file in "data1 data2 data3"] {
stats file u 2 nooutput
eval sprintf( "mean_%s=%f", file, STATS_mean )
}
plot for[file in "data1 data2 data3"]
➥ file u 1:($2-value(sprintf("mean_%s", file)))
The second implementation may be more straightforward, but personally I find it
even more ominous. It fully embraces the idea that an array is nothing more than a
sequence of values and hence can be conveniently represented as a string. String
operations are then used to extract the desired entry.

In the first loop, a string is built up from the values calculated by stats (don’t miss
the whitespace in the sprintf() format specifier that indicates token boundaries).
The plot command contains an inline loop and uses the word() function to extract
each appropriate element in turn from the string of values (see table 5.1 for informa-
tion about the word() function):
files = "data1 data2 data3"
means = ""
do for[file in files] {
stats file u 2 nooutput
means = means . sprintf( " %f", STATS_mean )
}
plot for[k=1:3] word(files,k) u 1:($2-word(means,k))

==== 11.1.3 Worked examples: Taylor series and Newton’s method

In this section, I demonstrate two other applications of looping constructs. Both
require some familiarity with calculus—feel free to skip this section. 1
1
This isn’t the place to explain either Taylor series or Newton’s method; the purpose of this section is to dem-
onstrate gnuplot’s looping features. For this reason, my presentation of the mathematical concepts is inten-
tionally brief. The Wikipedia pages for both topics are reasonably accessible.

[[P242]]
.TAYLOR SERIES
*****
*****
According to Taylor’s theorem, every smooth function can be locally approximated by a
polynomial: the higher order the polynomial, the better the approximation. We demon-
strate this here for the function sin(x), which has the following Taylor approximation:
Using gnuplot’s sum feature, together with the ! operator to indicate the factorial, this
can be written very compactly in gnuplot (also see figure 11.2—the function s(n) has
been introduced to fix the key entry when there is only a single term in the series):
f(x,n) = sum[k=1:n] (-1)**(k-1)*x**(2*k-1)/(2*k-1)!
s(n) = (n==1 ? "1 Term" : sprintf( "%d Terms", n ) )
plot [-8:8][-1.2:1.2] sin(x) lw 2, for[n=1:4] f(x,n) t s(n)
.NEWTON ’ S METHOD
*****
*****
The other example involves Newton’s method for finding the roots of an analytic
function. Newton’s method consists of an iteration of the following form:
x ( ) sin 1 – ( ) k
1 –
k 1 =
n

x 2k
1 –
2k 1 – ( )!
----------------------- ≈
-1
-0.5
0
0.5
1
-8 -6 -4 -2 0 2 4 6 8
sin(x)
1 Term
2 Terms
3 Terms
4 Terms
Figure 11.2 Successive approximations to sin(x) using the sum facility
x n
1 +
x n
f x n ( )
f ′ x n ( )
--------------- - – =

[[P243]]
This can be implemented using a while loop. The derivative f ′(x) is evaluated
through a finite-difference approximation:
f(x) = cos(x)
steps=0; x=0.5; eps=1e-6
while( abs(f(x)) > 1e-10 && steps < 15 ) {
df = (f(x+eps) - f(x) )/eps
x = x - f(x)/df
steps = steps + 1
print steps, x, f(x)
}
With the given choice of parameters, Newton’s method converges to the first positive
root of the cosine in five steps. Here’s the total output from running this snippet:
1 2.33048604607464 -0.688696509312027
2 1.38062453566562 0.189027591805359
3 1.57312250575387 -0.0023261768611035
4 1.57079632259625 4.19864216189357e-09
5 1.5707963267949 6.12323399573677e-17

=== 11.2 Command files

Gnuplot commands can be not only entered at the command prompt but also cap-
tured in a script file. Such a file can be loaded into a gnuplot session, included in
other command files, or processed by gnuplot in batch mode.

So far, we’ve encountered command files mostly as the product of the save com-
mand. The files generated by save capture the entire state of the gnuplot session at
that moment: the values of all options and variables, all user-defined functions, as well
as the most recent plot command. If you load such a file, it re-creates exactly the pre-
vious session state, and—in particular—it re-creates exactly the previous plot.
It’s worth emphasizing that this isn’t the only way to use command files; in particu-
lar, it isn’t necessary for command files to contain a plot or splot command. Com-
mand files without either of these commands obviously don’t generate visual output,
but they can be very useful nevertheless:
•  As setup or configuration scripts—Such scripts contain nothing but function defi-
nitions, customized line types and styles, or shorthands for commonly used
color gradients. We’ll explore some of these possibilities in chapter 12.
•  As subroutines—I mentioned earlier that gnuplot doesn’t have subroutines: it’s
not possible to group several statements together into a single, callable unit.
Command files provide a workaround for this limitation.

•  As batch files—The contents of a command file can be processed by gnuplot in
the background, without an interactive user session.


[[P244]]

==== 11.2.1 Scripts as subroutines

Gnuplot doesn’t have a way to group several commands or statements together into a
single, callable unit. Gnuplot’s functions are expressions (they return a value), and
their definitions must consist entirely of expressions as well. It isn’t possible to evaluate
a gnuplot command within a gnuplot function, much less a sequence of commands.
Scripts provide a workaround. A script can contain any valid gnuplot code and is
callable as a single unit. The generic export script is a good example (compare sec-
tion 10.1.2):
set terminal push
set terminal pdfcairo
set output "graph.pdf"
replot
set output
set terminal pop
This sequence of commands can be run with a single invocation of load or call .
.PASSING PARAMETERS TO SCRIPTS
*****
*****
The script in the previous example didn’t take any parameters: the name of the out-
put file was hardwired. That’s not ideal; it would be better to supply a filename at run-
time. There are two ways to do this:
•  Prepopulate a gnuplot session variable, and use it in the script.

•  Use call to invoke the script, and specify the parameters as part of the
command.

To use the first method, the export script must be changed to use a variable:
set terminal push
set terminal pdfcairo
set output outfile
replot
set output
set terminal pop
Be sure to assign the proper value to this variable before invoking the script (assuming
that the script is called export.gp):
outfile = "graph.pdf"
load "export.gp"
The alternative is to use the call command to invoke the script (instead of load ). The
call command accepts up to nine parameters on the command line, which are avail-
able in the script in variables called ARG1 , ARG2 , and so on. (The variable ARG0 is set to
the name of the script file, and the variable ARGC holds the number of arguments sup-
plied to call .) A version of the export script, suitable for call , looks like this:
set terminal push
set terminal pdfcairo
The outfile variable holds
the desired filename.


[[P245]]
set output ARG1
replot
set output
set terminal pop
You call it like this:
call "export.gp" "graph.pdf"
Personally, I prefer the call mechanism over prepopulating session variables, because
it makes the parameter passing explicit. You need to be aware of an important limita-
tion, though: parameters are passed by call as strings and therefore must be repre-
sentable by strings (numbers are converted to strings on the fly). This makes passing
functions inconvenient, whereas a function that exists in the current session can be
used by the script. (You’ll see an example in a moment, when we discuss a script that
implements Newton’s method.)
.SIMULATING LOCAL VARIABLES
*****
*****
Gnuplot doesn’t have local variables: all variables that are created live in the global
session space. This means if you call a script that defines variables, these variables are
still part of the session when the script finishes. This may be desirable (because it pro-
vides a way to retrieve values from the script), but more often it isn’t. The problem
also exists in reverse: if a variable existed in the session before the script was run, then it
will have been clobbered afterward.

The solution is to give the names of all strictly internal variables a unique prefix.
You can even use the undefine command to clean up the session by removing all vari-
ables with a given prefix upon completion of the script.

.FURTHER POSSIBILITIES WITH SCRIPTS
*****
*****
Scripts may contain load and call commands. Their effect is to include the contents
of the loaded file at the position of the load or call command. (Gnuplot safeguards
against infinite recursive inclusion.)
When you use the command quit in a script, it doesn’t terminate the gnuplot ses-
sion; instead, it terminates execution of the current script. It therefore acts similarly to a
return statement in most programming languages, initiating an immediate return to
the calling code (but without a return value, of course).

.A WORKED EXAMPLE : N EWTON ’ S METHOD ( AGAIN )
*****
*****

Listing 11.2 is another implementation of Newton’s method that demonstrates some
of the ideas just introduced. The script defines three internal variables, all of which
are prefixed with NEWTON_ and are removed from the session on the last line of the
script. Parameters are passed to the script implicitly: both the function f(x) and the
starting value x must exist in the session before the script is called. Upon completion,
the variable x holds the position of the found root. A sample use of this script might
be as follows (the last line is the final output from the script):
Uses the special variable

[[P246]]
f(x) = cos(x**2); x=1.0
load "newton.gp"
f(1.253314137316) = -0.000000000001 in 4 steps
# Must prepopulate f(x) and x before call
NEWTON_steps = 0
NEWTON_eps = 1.e-6
while( abs(f(x)) > 1e-12 && NEWTON_steps < 15 ) {
NEWTON_df = (f(x+NEWTON_eps) - f(x) )/NEWTON_eps
x = x - f(x)/NEWTON_df
NEWTON_steps = NEWTON_steps + 1
}
print sprintf("f(%.12f) = %.12f in %d steps", x, f(x), NEWTON_steps)
undefine NEWTON*

==== 11.2.2 Worked example: export script

The script in listing 11.3 is intended to demonstrate how far you can push the “script-
as-subroutine” concept in gnuplot. You decide whether this is a good idea.
The purpose of the script is my old standby: saving the commands of the last plot,
and exporting the plot to a file in a standard graphics file format. 2 But this script
does more:
•  It infers the desired file format by examining the extension of the target file.
•  The target file can include an absolute or relative path. The script places both
the command file and the graphics file in the specified directory.

•  You can specify additional options when invoking this script. These options are
supplied to the chosen terminal when the graph is exported.

The script makes a number of (platform-specific) assumptions:
•  The filename extension indicating the desired graphics file format consists of
exactly three letters.

•  The path separator is / (Unix convention—you need to change this if you’re on
a different platform).

The script itself is straightforward but messy, because much of the string handling has
to be done explicitly. Moreover, gnuplot doesn’t follow the convention of most con-
temporary programming languages of using zero-offset strings and asymmetric
bounds, thus necessitating the explicit conditional when splitting the argument into
path and basename. (To reduce clutter, I have refrained from prefixing all internal
variables to make them “private.”)
Listing 11.2 Newton’s method in gnuplot (file: newton.gp)
2
If gnuplot should ever acquire a simple export command that bundles all the required steps into a single
invocation, I’ll lose one of my best sources for examples.

Prepopulates function f(x) and starting value x
Invokes script
Output

[[P247]]
As I said, I regard this example as a “technology demonstrator” that shows how you
can encapsulate complex tasks in scripts and use them like subroutines. You decide
whether you think this is the right approach.

    # Invoke as: call "mega-export.gp" "graph.png" "terminal options"
    # File format MUST be a three-letter extension.

    arg = ARG1
    opts = ARG2
    len = strlen( arg )
    k = 0
    do for [i = 1:len] {
    if( arg[i:i] eq "/" ) {
    k = i
    }
    }
    if( k == 0 ) {
    path = ''
    file = arg[1:len-4]
    } else {
    path = arg[1:k]
    file = arg[k+1:len-4]
    }
    type = arg[len-2:]
    term = ''
    if( type eq 'eps' ) { term = 'epscairo' }
    if( type eq 'pdf' ) { term = 'pdfcairo' }
    if( type eq 'png' ) { term = 'pngcairo' }
    if( type eq 'svg' ) { term = 'svg' }
    if( term eq '' ) {
    print "Unknown file type - using pdf"
    term = 'pdfcairo'
    }
    save path . file . '.gp'
    set t push
    eval "set t " . term . " " . opts
    set o path . file . "." . type
    replot
    set o
    set t pop
    print "Done!"

=== 11.3 Batch processing

Gnuplot can be run by itself as a standalone command interpreter, executing scripts
from files—basically like a Perl or Python interpreter interpreting a program in its
respective language. The only difference is that in gnuplot’s case, the final output is a
graph. Running gnuplot non-interactively as a command interpreter like this is known
as batch mode.

Listing 11.3 Full-featured export script (file: mega-export.gp)
Saves arguments
Finds the last "/"
in the filename
No "/" found: uses current directory
Splits the
filename
into path,
file, and
extension
At least one "/" found
Assumes a 3-letter extension
Selects a terminal
based on the extension

[[P248]]

TIP: Batch mode isn’t terribly common, because you usually want to see and
interact with the graph that’s created. Batch mode is useful whenever you
want to create a large number of file-based graphs using a predetermined set
of commands, or when you need to re-create the same graphics file again and
again as the data set that’s plotted changes.

Running gnuplot in batch mode is straightforward and equivalent to the way Perl and
Python behave: any files listed after the gnuplot command are expected to contain
gnuplot commands. They’re executed in the order specified, as if they had been
loaded using load . Alternatively, gnuplot will read commands from standard input.
There are thus three ways to execute a set of command files:
•  Using command-line arguments:
shell> gnuplot plot1.gp plot2.gp plot3.gp
•  Reading from standard input:
shell> cat plot1.gp plot2.gp plot3.gp | gnuplot
•  From within a gnuplot session:
load "plot1.gp"
load "plot2.gp"
load "plot3.gp"
Gnuplot doesn’t start an interactive session when invoked with command-line argu-
ments: it just processes all commands (including any plot commands) and termi-
nates. This implies that plots sent to an interactive terminal usually aren’t visible, or rather,
they’re visible for a tiny moment as gnuplot opens the terminal window, draws the
graph, and immediately closes the plot window again and exits. 3 It’s a common mis-
take to forget to set appropriate (file-based) terminal and output options in gnuplot
batch files!

TIP: By default, gnuplot uses one of the interactive terminals for all graphical
output. That’s great for interactive sessions but makes no sense when you’re
using gnuplot in batch mode. Don’t forget to choose a meaningful output
format and destination.

You can force an interactive session by using the special filename - (hyphen) on the
command line. The following command runs a setup script before dropping you into
an interactive session (you’ll need to issue an end-of-file character before quitting):
shell> gnuplot setup.gp -
3
You can also specify the command-line flag -persist when invoking gnuplot so that the plot remains visible
on the screen.


[[P249]]

==== 11.3.1 Using gnuplot in shell pipelines

It’s possible to use gnuplot as part of a command pipeline, 4 wherein gnuplot reads
both commands and data from standard input. The special filename - (see section 4.5)
tells gnuplot to read data from the current source: that is, from the same input device
from which the most recent command was read. So if the command was read from
standard input, then plot "-" will continue reading data from standard input as well.
This makes it possible to build a pipeline like the following:
shell> cat script.gp data | gnuplot
Here, the command file script.gp may be as simple as
set t pngcairo
set o "out.png"
plot "-" u 1:2 w lp
and the data file may contain any data set, as long as it has at least the two columns ref-
erenced in the plot command.

The pipeline concept can be taken a step further: remember that set output
defaults to standard output (if no filename is given as argument). Now the script is
even simpler
set t pngcairo
plot "-" u 1:2 w lp
but in the pipeline you need to deal with the results that gnuplot sends to standard
output. The easiest way is to capture them in a file
shell> cat script.gp data | gnuplot > graph.png
but it would of course also be possible to pipe gnuplot’s output to some other post-
processing step instead.

A word of warning: to use gnuplot in a pipeline like that, both commands and data
must be sent to standard input explicitly. Just listing them on the command line
doesn’t work: gnuplot won’t read a combination of command and data files from the
command line.

TIP: Using gnuplot in a shell pipeline may seem unusual at first, but it can be
very convenient. Any pre- or postprocessing can be done in one fell swoop.
Moreover, sending the graph to standard output avoids all of gnuplot’s awk-
ward file-handling issues.

4
Provided the platform supports pipes, of course.


[[P250]]

=== 11.4 Calling gnuplot from other programs

Sometimes it’s necessary or desirable to let gnuplot be controlled by another com-
puter program. Three situations come to mind:
•  You need a level of automation and control that is difficult or impossible to
achieve with gnuplot’s limited scripting capabilities.

•  You want to use gnuplot to visualize data that is generated by some other pro-
gram without having to save the data to an intermediate file.

•  You’d like to use gnuplot as a generic graphics back end for a system that has no
graphics capabilities otherwise.

You can use gnuplot this way, and it isn’t even particularly difficult—but it isn’t espe-
cially convenient, either. Gnuplot doesn’t offer an API or a robust method of interpro-
cess communication. Gnuplot must be run as a subprocess, and all communication
has to occur via pipes (where available) or otherwise through the file system. Bidirec-
tional communication (that is, sending data back from gnuplot to the controlling pro-
cess) is particularly challenging.

TIP: Before investing effort in one of the solutions sketched in the following
sections, consider whether batch operations are sufficient. In batch mode,
your program creates a file with gnuplot commands (and a heredoc contain-
ing the data) on disk and then invokes gnuplot on that file (in a subshell).
The detour through the file system effectively decouples gnuplot from your
program, which makes operations more robust and easier to debug.

In the following two sections, I demonstrate how to run gnuplot from either Perl or
Python. The master process sends some data to gnuplot (via a pipe), and gnuplot cre-
ates a graphics file on disk—this is probably the most common case. The main differ-
ences between these examples concern the way Perl and Python handle subprocesses
and have little to do with gnuplot itself. (The Python example also makes use of a
heredoc, whereas the Perl example uses the - special file.)

==== 11.4.1 Worked example: calling gnuplot from Perl

Perl, the “duct tape of the internet,” is (still) a common choice for gluing processes
together. It lets you open a subprocess as a file handle—in the same way you’d open a
file—provided the first character in the filename is a | (pipe symbol). You can then
write anything to this file handle using print , and it will be sent to the standard input
of the subprocess. In listing 11.4, this method is used to send both commands and
data to gnuplot. The special file - is useful here, because it instructs gnuplot to read
data from standard input (see section 4.5 for more information on pseudofiles). It’s
important to close the file handle describing the subprocess explicitly when you’re
done, because Perl won’t terminate while gnuplot is still running!

[[P251]]

[source]
open PROC, "| /usr/bin/gnuplot " || die "Could not start gnuplot: $!";
print PROC "set xlabel 'Time'; set ylabel 'Amplitude';"
print PROC "set o 'graph.png';";
print PROC "set t pngcairo;";
print PROC "plot '-' u 1:2 t 'data' w l\n";
for( $x = 0.0; $x <= 10.0; $x += 0.1 ) {
    $y = exp(-$x/5)*sin( $x );
    print PROC "$x $y\n";
}
print PROC "e\n";
close PROC;

==== 11.4.2 Worked example: calling gnuplot from Python

Listing 11.5 shows a simple Python program that uses gnuplot to create a graph. It
uses the Popen facility from the subprocess module in the standard library. The con-
structor returns an object that provides a handle to the subprocess. The script sends
commands to the subprocess via the stdin member of this handle. In contrast to the
Perl example in the previous section, this script doesn’t use the special - filename.
Instead, it creates a heredoc named $d and references it in the plot command. The
heredoc is particularly useful here, because this example involves two columns of data.
The - filename would require looping through the data twice: once for the first col-
umn and once for the second. The heredoc submits all the data to gnuplot in one fell
swoop and then provides access to it as needed.

[source]
import subprocess
data = [ [0, 12, 25],
[1, 14, 22],
[2, 15, 23],
[3, 11, 25] ]
gnuplot = "/usr/bin/gnuplot"
gp = subprocess.Popen( gnuplot, stdin=subprocess.PIPE )
gp.stdin.write( "$d << EOD\n" )
for row in data:
for col in row:
Listing 11.4 Calling gnuplot from Perl (file: driver.pl)
Listing 11.5 Calling gnuplot from Python (file: driver.py)
Opens gnuplot as a subprocess and
assigns it to the file handle PROC
Writes gnuplot options to the file handle
Writes the name of the output file …
… and the desired terminal to the file handle
Instructs gnuplot to expect
data to follow inline
Sends the data to the file handle
The data stream is
terminated by the
single letter e. Closes the file handle
and terminates the
gnuplot subprocess
Columns: [x, y1, y2]

[[P252]]
gp.stdin.write( "%f\t" % (col,) )
gp.stdin.write( "\n" )
gp.stdin.write( "EOD\n" )
gp.stdin.write( "set t pngcairo; set o 'graph.png';\n" )
gp.stdin.write( "plot $d u 1:2 w l, $d u 1:3 w l\n" )

==== 11.4.3 Helpful hints

Using gnuplot in such a way from another program works quite well but can appear a
bit fickle at first, because you need to re-create exactly those conditions that are usu-
ally fulfilled by input coming from the interactive command-line environment. Diag-
nosing glitches in this area isn’t helped by error messages, which are intended for
interactive use. Here’s a checklist of trouble spots to look for when things don’t work
out at first:
•  Commands must be separated from one another by explicit semicolons or new-
lines. A common mistake is to write code like this (also see listing 11.4):
print PROC "set key";
print PROC "set border";
The two set commands appear to be broken down onto two separate lines, but
gnuplot will see them as one consecutive string. This will work:
print PROC "set key\n";
print PROC "set border";
Instead of the newline, a semicolon could have been used as well.

•  The line containing the plot command must be terminated by an explicit new-
line. Gnuplot doesn’t parse a command line until it has encountered a newline.
Because the plot command is the last command, it must end with an explicit
newline.

•  You must use an explicit using directive when using the special filename - to tell
gnuplot how to parse the incoming data stream.

•  For each occurrence of - in the plot command, there must be a separate data
stream. Gnuplot will continue to interpret incoming data as data until it has
encountered a corresponding number of end-of-file characters. (This is
another reason heredocs are probably more convenient in this situation.)
•  Keep in mind that some characters in gnuplot code may have a special meaning
in a programming environment. For example, the $ character, frequently used
to indicate the value of a column in gnuplot, is also used by Perl and Unix shells.
To prevent interpretation by the programming environment, the character
needs to be protected (that is, escaped). Alternatively, you can use the column()
function, which eliminates the need for the $ character in gnuplot code.
•  Don’t forget to separate data lines from one another using newlines as well.
One final comment: when generating many graphs from the same program, it’s usually
a good idea to start gnuplot only once and use a single process instance for all the
graphs, rather than starting a separate gnuplot process for each of them. This doesn’t
WRONG: missing newline or semicolon!
RIGHT: explicit newline

[[P253]]
matter much when you’re preparing two or three graphs, but when the number of
graphs is large, the time savings are significant. Just be sure to reset all relevant options
(and specifically the output filename) between invocations of the plot command.
Thoughts for the design of a gnuplot access layer
If you find that you need to drive gnuplot from some other program a lot, it may be
worth investing in an access layer. A quick internet search will turn up several gnuplot
wrappers for a variety of languages. Most of them attempt to replicate gnuplot’s set
of commands and options as an API in the host language. This approach is funda-
mentally mistaken in my opinion, because whenever new features are added to gnu-
plot or existing ones change, the access layer is no longer up to date.

Instead, I recommend building an access layer in the spirit of the thin database wrap-
pers that exist in all common programming languages for interfacing to relational
databases. They don’t try to replicate SQL in the host language; they merely provide
a way to submit well-formed SQL to the database and to move data back and forth.
I think such an access layer needs to have only three basic functions:
•  open() —Starts the subprocess, and maintains a handle to it. This function
hides all the messy details.

•  exec() —Takes a string (or an array of strings), and sends them to gnuplot.
It’s the user’s responsibility to make sure the strings contain valid gnuplot
commands, but the access layer may apply safeguards against common over-
sights, such as ensuring that each command is terminated with a semicolon
or a newline.

•  data() —Takes the identifier for a heredoc (such as "$d" ) and a two-
dimensional data structure in the host language. It turns the data structure
into a sequence of strings, each corresponding to one line in the data “file,”
and then sends commands to gnuplot that create a heredoc under the given
name, containing the supplied data. Subsequent plot commands can then
reference this heredoc by its identifier.

The primary idea is to play on the strengths of the host language as much as possi-
ble, rather than try to replicate gnuplot’s command set. For example, the user should
be able to build up a native data structure and manipulate it in the host language—
only at the last moment does the access layer turn it into strings that can be passed
to gnuplot as a “data file.” The heredoc facility comes in handy, because it means
data needs to be submitted to gnuplot only once.

These are just considerations that you might find useful if you’re designing an access
layer for gnuplot. Because every language is different, it doesn’t make sense to pro-
vide a skeleton implementation here: in particular, what is considered the most suit-
able “native” data structure is likely to differ so much from one host language to the
next that little can be said in general. Also keep in mind that getting the edge cases
right will require a disproportionate amount of effort (this is especially true for the
serialization of the data structure into strings). A one-off, specialized implementation
that takes the specifics of the intended usage into account may be able to skirt some
of these issues.


[[P254]]


=== 11.5 Animations

All the facilities you’ve encountered in this chapter support automation in some form:
events occurring without human intervention. You can take this a step further and
think about a series of graphs being created, by themselves, in sequence. In other
words, you have all the ingredients for animation: moving pictures.


==== 11.5.1 Introducing a delay

To achieve satisfactory animation, you’ll need one additional feature: a controlled delay
between successive figures. This is where the pause command comes in. The pause
command takes the number of seconds to wait ( -1 waits until a carriage return is
encountered or—if mousing is enabled—a mouse click has occurred) and an optional
string argument, which is printed to the command window to prompt the user:
pause {int:seconds} [ "{str:message}" ]
The pause command is usually used in conjunction with one of the loop constructs. 5
For a first example, let’s go back to the Taylor series example from section 11.1.3 ear-
lier in this chapter. Using pause , you can create an animated version of this example:
f(x,n) = sum[k=1:n] (-1)**(k-1)*x**(2*k-1)/(2*k-1)!
do for[n=1:8] {
plot [-8:8][-1.2:1.2] sin(x) lw 2, f(x,n) t sprintf("%d Terms",n)
pause 2
}
This plots a new graph every two seconds, each one representing a better approxima-
tion than the one before. (Try it yourself—there’s no point showing a static graph of
an animated effect.)

5
In previous gnuplot versions, the same effect was achieved using the reread command. When included in a
command file, reread instructs gnuplot to begin executing the current file from the beginning, resulting in
an infinite loop.

(continued)
Finally, be aware of the false sense of security that such an access layer instills. A
proper API lets you detect and recover from error conditions in the encapsulated
code (by throwing exceptions or returning error codes). This isn’t true for gnuplot,
because gnuplot has no way of notifying you when things go wrong: it just spews
(human-readable) error messages to standard error. It’s difficult to respond program-
matically to that.


[[P255]]

==== 11.5.2 Waiting for a user event

A second form of the pause command waits until a specific user event has occurred:
pause mouse [ {eventmask} ] [ "{str:message}" ]
The event mask can contain any combination of the following keywords, separated by
commas: keypress , button1 , button2 , button3 , close (meaning the plot window was
closed), and any . If pause was terminated through a keyboard event, the ASCII value
of the selected key is stored in the gnuplot variable MOUSE_KEY and the corresponding
character in the variable MOUSE_CHAR . If a mouse event occurred, the mouse coordi-
nates are stored in the variables MOUSE_X , MOUSE_Y or MOUSE_X2 , MOUSE_Y2 , respec-
tively, and are available for further processing. The command pause mouse (without
an event mask) is equivalent to pause -1 .


==== 11.5.3 Further examples

Some of the most striking applications of animations involve three-dimensional
graphics. We’ll discuss these in detail in appendix C and appendix F, but I want to give
two quick demos here (see listings 11.6 and 11.7). 6
The logic of both listings is straightforward: a parameter-dependent graph is con-
tinuously re-created in a while loop. Because the parameter is slowly changed at the
same time, no two successive graphs are exactly equal, giving the appearance of a
smooth change.

It’s essential to include a delay in the loop (using pause ) and to provide an explicit
break condition for the loop—gnuplot doesn’t recover gracefully if the loop is stopped
using Ctrl-C. You can stop the animations in the example scripts by pressing the X key
on your keyboard (we’ll formally introduce the bind command in chapter 12).

TIP: Always include an explicit break condition. Gnuplot doesn’t recover if
the loop isn’t stopped cleanly.

unset key; unset border; unset tics
bind "x" "end=1"
end = 0; t = 0
while( end==0 ) {
t = t + 0.1
splot [][][-1:1] exp(-0.2*sqrt(x**2+y**2))*cos(sqrt(x**2+y**2) - t)
pause 0.001
}
6
The file world_110m.txt required by the second listing can be found at www.gnuplotting.org/plotting-the-
world-revisited/.

Listing 11.6 Animation demo (file: pebble.gp)

[[P256]]
For another stunning example of what is possible using gnuplot animations, check out
the demo/games directory of the gnuplot distribution. There you’ll find, among other
things, a rather addictive implementation of a Tetris-like game—entirely in gnuplot!
unset key; unset border; unset tics
set hidden3d
set mapping spherical; set angles degrees
set parametric; set urange [-90:90]; set vrange [0:360]
bind "x" "end=1"
end = 0; t = 0
while( end==0 ) {
t = (t + 1)%360
set view 90-30*cos(t), 360-t, 1.5, 1.25
splot cos(u)*cos(v),-cos(u)*sin(v),sin(u) w l lc rgb "grey", \
 "world_110m.txt" w l lt 1
pause 0.01
}

=== 11.6 Case study: continuously monitoring a live data stream

Monitoring a live stream 7 means animated figures that are continuously changing as
they’re being updated with newly arriving data. This isn’t a situation that gnuplot was
designed for, but—as it turns out—gnuplot can handle it quite gracefully.
In this section, I’ll present several different approaches to this problem. We’ll start
with a very basic, ad hoc solution; the final solution is more involved and can be
regarded as the beginnings of a production-level, real-time monitoring system that uses
gnuplot as its graphics back end. Some of the initial ideas use Unix tools for simplicity,
but the final solution is fully general and can, in principle, be adapted to any platform.

==== 11.6.1 Using gnuplot to monitor a file

First, let’s assume that you would like to monitor the tail end of a log file. Messages are
appended to the log file asynchronously by some other process (or processes). For
demonstration purposes, let’s assume that each log entry consists of a timestamp fol-
lowed by the actual value. The goal is to have a constantly updated plot of the last few
entries in the log file.

The minimal gnuplot script to achieve this goal is just a few lines long:
while( 1 ) {
plot "< tail -200 logfile" u 0:2 w lp
pause 0.1
}
Listing 11.7 Animation demo (file: globe.gp)
7
This section was partially inspired by the blog post “Visualize real-time data streams with Gnuplot” by
Thanassis Tsiodras. You can find it at http://mng.bz/N3kJ.


[[P257]]
The script consists of an infinite loop, which is executed 10 times per second ( pause
0.1 ). The plot command uses the Unix tail facility to extract the last 200 lines from
the log file. The output from tail is piped directly to gnuplot, without accessing the file
system. The pseudocolumn 0 (that is, the line number in the actual data set) is used for
the x coordinate. (See chapter 4 for information on pseudofiles and pseudocolumns.)
This works quite well, although the result isn’t very pretty (we’ll remedy this
next). But as a minimal-effort solution, this script can’t be beat. It should be commit-
ted to memory for all situations where you have an ad hoc need for real-time moni-
toring of data.

.ADATA GENERATOR FOR TESTING
*****
*****
If you want to try the solutions described in this section and you don’t have access to a
live data stream, you may find the script in listing 11.8 helpful. It generates data at ran-
dom intervals; you must specify the average time between write events as a command-
line parameter. So, to have the script generate about 10 events per second, you call it
like this (depending on your needs, you may want to redirect the generator’s output
to a file):
shell> python -u datagen.py 0.1
The -u option forces Python to use unbuffered I/O . This is important in this applica-
tion, because you’re interested in seeing real-time data. Don’t forget. The generated
“data” here is a sine wave. The script writes out about 20 points per period of the sine,
regardless of the specified wait time between write events.

import sys
import time
import math
import random
tmax = float( sys.argv[1] )
t = 0
while 1:
dt = random.uniform( 0, 2.0*tmax )
time.sleep(dt)
t += dt
print t, math.sin(0.1*math.pi*t/tmax)
.ABETTER MONITOR
*****
*****
Let’s improve the monitoring script given earlier. The data does contain timestamps,
but so far, they’re ignored. The graph therefore gives the impression that log entries
are equally spaced in time—which isn’t true.

But if you try using the timestamp as the x coordinate, the visual effect is unsatis-
factory. The reason has to do with the way gnuplot handles the plot range: unless
instructed otherwise, it makes sure all data points are included, and it extends the plot
Listing 11.8 A random data generator (file: datagen.py)

[[P258]]
range to the next tic mark. But because data points occur asynchronously (at random
times), the range of seconds spanned by the points in the sample changes as new
points are added and old points are removed. This constant change in the plot range
leads to the undesirable “flicker” effect. The following script uses a fixed plot range to
avoid this problem.

logname = "logfile"
tmplen = 200
tmpname = "tmp"
bind "x" "end=1"
end = 0
while( end==0 ) {
system sprintf( "tail -%d %s > %s", tmplen, logname, tmpname )
stats [*:*][*:*] "tmp" u 1:2 nooutput
set xrange [STATS_max_x-11.0:STATS_max_x+1]
plot "tmp" u 1:2 w lp
pause .01
}
The first few lines of the script are used to configure the script to local conditions: you
must supply the name of the log file to monitor, as well as the name of a temporary file
and the number of records that will be saved to it. (We’ll come back to the latter
parameter later.) The script then invokes the Unix tail utility via gnuplot’s system
command to dump the configured number of data points from the end of the log file
into a temporary file. The stats command is used to determine the value of the last
(most recent) timestamp in this temporary file. The set xrange command then
chooses a fixed plot range that is based on this value: the plot range extends 1 second
into the future and 11 seconds into the past, measured from the last entry in the tem-
porary file. (That the upper limit of the plot range isn’t made to coincide with the
largest data point is sheerly for visual effect. Try it both ways: personally, I find it help-
ful to see explicitly where the available data ends.) The range indicators on the stats
command are important: without them, stats would discard data outside the plot
range and hence fail to reflect changes to the input file.

The result works quite well in practice. (Try it!) Here are a few additional ideas you
may want to explore:
•  The script contains three adjustable parameters: the wait time in the pause
command, the number of lines that tail extracts, and the size of the plot range
in seconds. All three should depend on the frequency with which entries are
added to the log file. Begin by deciding how many previous seconds you want to
see in the graph. If you know at what rate new lines are appended to the log file,
you can figure out how many records you need to extract. The wait time in
pause should be smaller (by a factor of 2–10) than the time between log-file
updates to ensure smooth animation, but keep in mind that reducing this num-
ber drives up resource consumption.

Listing 11.9 A real-time data monitor (file: monitor.gp)
Name of the log file to monitor
Number of records to save to a temporary file
Name of the temporary file

[[P259]]
•  Listing 11.9 uses the Unix tail command to extract a certain number of
records from the log file to a temporary file, which is then read by both stats
and plot . Both the tail command and the temporary file are optional: in prin-
ciple, you could rely entirely on the plot range to restrict the data and run both
stats and plot directly on the log file. But if the log file is long (and what log
file is ever short?), then the tail command is likely to be faster and less
resource-intensive than gnuplot’s own (and very complex) data-file parser
(which is invoked by both stats and plot ). Furthermore, by creating a tempo-
rary file, it’s guaranteed that both stats and plot see exactly the same data: if
you let both commands run on the log file in sequence, you introduce a possi-
ble race condition wherein the log file is being updated between the two com-
mands. You decide whether any of these precautions are necessary or desirable
in your situation!

==== 11.6.2 Using a driver to monitor arbitrary data sources

The solution in the previous section is nice because it’s implemented entirely using
gnuplot’s own facilities. But it also has some drawbacks:
•  It’s a polling solution. Gnuplot polls its input source constantly, whether there is
new data or not. As a rule, polling architectures are more resource-intensive
than other solutions.

•  It’s not flexible, because any processing of the data would have to be accom-
plished using gnuplot’s limited scripting capabilities.

The approach presented in this section is different, because it relies on an intermedi-
ate layer, written in a general-purpose programming language (Python, in this case,
but it could, of course, be anything). The script in listing 11.10 acts as a filter: it gathers
data from standard input and passes it on to gnuplot only if new data is available. It
therefore implements a “push” model, rather than the “pull” model of the previous
solutions. The script also acts as a buffer, storing the most recent set of points and pass-
ing the points to gnuplot. This is necessary because now the file system is skipped
entirely, and gnuplot itself doesn’t retain data between plots.

[source]
import sys
import subprocess
buflen = 200
gnuplot = "/usr/bin/gnuplot"
gp = subprocess.Popen( gnuplot, stdin=subprocess.PIPE )
gp.stdin.write( "set t wxt\n" )
buf = []
while 1:
    line = sys.stdin.readline()

Listing 11.10 A data monitor in Python (file: monitor.py)
Number of data points to buffer
Reads unbuffered from standard input

[[P260]]
t, u = line.strip().split()
buf.append( (float(t), float(u)) )
buf = buf[-buflen:]
mx = buf[-1][0]
gp.stdin.write( "set xrange [%f:%f]\n" % ( mx-10, mx+1 ) )
gp.stdin.write( "plot '-' u 1:2 w lp\n" )
for d in buf:
gp.stdin.write( "%f %f\n" % d )
gp.stdin.write( "e\n" )
The script runs gnuplot as a subprocess and communicates with gnuplot by writing to
gnuplot’s standard input via a pipe. The script reads incoming data from its own stan-
dard input (not from a file), splits and parses the intake, and pushes it onto a buffer,
before passing it on to gnuplot. In this case, there is no need for gnuplot’s stats com-
mand, because the determination of the plot range is now done in the Python script.
The script is straightforward. Only two Python-specific implementation details
require comment:

•  To achieve real-time behavior, all input and output must be unbuffered. This is
the reason the script uses sys.stdin.readline() in a while loop, instead of
the more familiar idiom for line in sys.stdin: . Also, make sure to run this
script using Python’s -u command-line option.

•  The line buf = buf[-buflen:] retains the last buflen elements in the array. If
the array contains fewer than buflen elements, then all of them are retained.
It should be clear that listing 11.10 is only the beginning. Not only are all features
missing that would make the program more robust (error-handling, and so on), but
the function of the script could be extended in many ways:
•  Observe and combine multiple input sources. The script in listing 11.10 listens
to its own standard input—instead, it could keep tabs on a range of different
log files, combine data from all of them, and generate a unified status plot.
•  Conversely, split a single, heterogeneous input source into multiple data
streams, and maintain several gnuplot processes, each of which is used to plot
only a single output channel.

•  Statistically manipulate the data, remove outliers, and identify trends. The
results of a predictive model could be combined with the raw output so that
both can be plotted together and compared easily.

•  Make any other modifications you can think of …
The options are endless but have little to do with our primary topic, which is gnuplot.
Listing 11.10 is only intended to get you started.

Drops the oldest data
points, retaining at
most buflen points
Most recent
timestamp

[[P261]]

=== 11.7 Summary

In this chapter, you learned about ways to automate gnuplot tasks. Gnuplot provides
some programming constructs, such as loops and conditionals, but for more compli-
cated tasks, it may be more convenient to “drive” gnuplot from an external program-
ming language as a subprocess.

Another way to automate tasks is to capture all the required gnuplot commands in
scripts that can be run by themselves, as batch processes, or even as part of Unix pipe-
lines. In chapter 12, you’ll learn about additional uses for script files.
Gnuplot’s automation capabilities enable the creation of animated graphics. We
demonstrated the basic principles and then used them in a particularly interesting
application: the real-time monitoring of a live data stream.


[[P262]][[ch12]]

== Chaper 12 Beyond the defaults:
workflow and styles
Overall, gnuplot’s defaults are pretty good—so good, in fact, that it’s easy to forget
that they aren’t set in stone, and that there may be good reasons for changing
them. This applies not only to the visual appearance of plots, but also to the way
you interact with gnuplot.

In this chapter, we’ll explore some ways to customize your gnuplot experience.
First, we’ll consider workflow alternatives: ways to organize your interaction with
gnuplot beyond the regular, interactive session. We’ll discuss various shortcuts and
conveniences, along with the possibility of using an external editor for authoring
gnuplot command files rather than typing in commands interactively at the gnu-
plot prompt. Next come various topics that are more typically associated with user
This chapter covers
•  The standard workflow and some variations
•  Using external editors and viewers
•  Hotkeys and mousing
•  Configuring your workspace
•  Defining and using stylesheets

[[P263]]
customization: custom key (and mouse) bindings, and the definition of private option
settings and configurations.

Finally, I’ll introduce the idea of stylesheets: collections of appearance options for
lines and points that can be applied to graphs to give them a different appearance. In
particular, defining and choosing stylesheets judiciously makes it possible to create
graphs with a specific purpose in mind, be it a computer screen, a black-and-white
publication, or an overhead presentation.


=== 12.1 The standard interactive workflow

Gnuplot was originally conceived as an interactive tool, and this is still the most natu-
ral way to use it: you start an interactive session, enter commands at the gnuplot
prompt, examine the resulting graph, and iterate. Frequently, such an interactive ses-
sion results in a saved command file that can be used to re-create the final state, as
well as a final graph, exported in some graphics file format. This section reviews some
ideas for improving this straightforward workflow.


==== 12.1.1 Extracting specifics from command files

I’ve pointed out several times before that it isn’t enough to just export the final graph
as a PNG or PDF —it’s crucial to also save the final set of options (using save ). Only
then can you re-create the graph in gnuplot to examine it again, to modify an aspect,
or to update it with new data.

The files that the save command generates are long: they contain the values of all
of gnuplot’s options, 1 as well as all user-defined functions and variables. Most of this
information is redundant: options are written to file even if they still have their default
values. The advantage is, of course, that the resulting file is guaranteed to be self-
contained. But the information that is specific to the current graph is hard to discern.
You can recover the plot-specific information by comparing the saved file against a
file that contains only default values. This baseline file can be obtained by starting gnu-
plot and—without doing anything else—issuing a save command.

Because the file format of gnuplot’s command files is so simple (line-oriented text
files, with one command or option per line), it’s easy to write a short program in your
language of choice to compare the two files. 2 Wherever the GNU diff utility is avail-
able, it can be used to good effect as well (the cryptic command-line options instruct
diff to print only lines that are new or different in the second file):
shell> diff --new-line-format="%L" --old-line-format=""
➥ --unchanged-line-format="" default.gp graph.gp
The resulting file is short and neat, but it’s less self-contained than the original file was,
because it doesn’t contain a complete set of options. If the shortened file is loaded into
1
With three exceptions: the set output , set terminal , and set linetype settings.
2
For example, you can find one such program among the contributed scripts on the gnuplot homepage at
www.gnuplot.info.


[[P264]]
a gnuplot session that’s configured differently from the baseline file, the resulting
graph will be different than the original. Also, if gnuplot’s defaults change, the graph
created by the shortened file will be affected. This is something to be aware of.

==== 12.1.2 Extending the command set

Sometimes it takes several gnuplot commands to achieve a common task (exporting
to file, for instance), sometimes the syntax is awkward and hard to remember (setting
up a palette for false-color plots), and sometimes both (time-series scaling for the x
axis). It would be nice if we could define our own commands to take the drudgery out
of it. There are basically two mechanisms available:

•  Build up a string of commands, and execute it using eval (see section 5.2.2).
•  Capture commands in a command file, and run it using either load or call
(see section 11.2.1).

These methods are almost equivalent—the main difference between them lies in the
way they’re called. Let’s look at some examples. (Either method can also be bound to
a hotkey—see section 12.4.3 later in this chapter.)

USING SCRIPTLETS
*****
It’s important to remember that command files don’t need to be complete: a com-
mand file that only defines some functions or sets some options is perfectly legitimate
and often useful. Listings 12.1 and 12.2 show two examples that do just that: listing
12.1 defines two distributions that I frequently need in my work; and listing 12.2
switches on time-series mode, using a specific timestamp format. The real benefit of
the latter example is that I don’t need to remember the conversion specifiers! (I can
never remember whether it’s minutes or months that go with an uppercase M as
opposed to a lowercase one.)
*****

You can also collect style definitions and appearance options (line widths and col-
ors) together to form stylesheets. This idea is so important that it’s given its own section
(section 12.6) later in this chapter.

Gnuplot looks for scripts invoked with load or call first in the current working
directory and then in the directories listed in the loadpath option. 3 The loadpath
option can be set using set loadpath ; if the GNUPLOT_LIB environment variable is set,
its contents are appended to loadpath (see section 12.5.1). It’s therefore possible to
create a library of useful scripts in a personal collection.

sqrt2pi = sqrt(2.0*pi)
gauss(x,m,s) = exp(-0.5*((x-m)/s)**2)/(sqrt2pi*s)
lognorm(x,m,s) = exp(-0.5*((log(x)-m)/s)**2)/(sqrt2pi*x*s)
3
Gnuplot uses loadpath for scripts and also for data: it searches first in the current directory and then in the
directories listed in loadpath for data files named in calls to plot or splot .
Listing 12.1 Scriptlet defining common functions (file: normdist.gp)

[[P265]]
set xdata time
set xtics format "%T"
set timefmt "%H:%M:%S"

USING EVAL
*****
*****
Strings containing valid gnuplot commands can be executed using eval . Further-
more, you can build up strings dynamically for a specific purpose or—even better—
write functions to do this for you.

Here’s a simple example. Switching to polar mode usually requires several com-
mands (see section F.2.1). Combining them all into one string, you can achieve the
same effect with a single call:
polar = "set polar; set size sq; unset border; unset tics; set rtics; \
set grid polar; set key outside"
Now, eval polar will not only turn on polar mode, but also set up suitable appearance
options.

Switching on time-series mode can be accomplished in a similar fashion. If the fol-
lowing strings exist in the current gnuplot session
times = "set xdata time; set xtics format '%T'; set timefmt '%H:%M:%S'"
dates = "set xdata time; set xtics format '%F'; set timefmt '%Y-%m-%d'"
then time-series mode can be turned on by using eval times or eval dates . (Of
course, the format of the timestamps in the input file must match the format specified
in these strings.)
Finally, and as an example of a function that generates a string dynamically, con-
sider again the export function introduced in section 5.2.2 (see listing 12.3). It gen-
erates a string that—when executed using eval —exports a graph, using a user-
supplied filename and terminal. The function can be called directly from within the
eval command:
eval export( "graph.pdf", "pdfcairo" )
export( file, terminal ) = sprintf(
➥ "set t push; set t %s; set o '%s'; replot; set o; set t pop",
➥ terminal, file )
.ADDITIONAL CONSIDERATIONS
*****
*****
On startup, gnuplot reads an initialization file (see section 12.5.1), and it may seem
natural to place as many definitions as possible in this file so they’re always available.
Over time, I’ve moved away from this approach and instead suggest that you use many
Listing 12.2 Scriptlet to activate time-series mode (file: timeseries-mode.gp)
Listing 12.3 A function that generates a command string dynamically (file: export.gp)

[[P266]]
smaller files, each containing only closely related definitions that can be loaded as
needed; this way, you avoid polluting the gnuplot session with all kinds of rarely used
functionality.

This highlights one of the main differences between scriptlets and dynamically
evaluated strings. The strings (or functions that generate them given a set of argu-
ments) must exist in the gnuplot session, whereas scriptlets don’t. Furthermore, any-
thing that lives in the gnuplot session may be overwritten at any time and without
warning; scriptlets, by contrast, offer a degree of encapsulation.

Finally, you can bind either scriptlets or strings to be evaluated with eval to key-
board events. In that case, pressing the appropriate key invokes the desired action.
(We’ll discuss this later in this chapter, in section 12.4.3.)

==== 12.1.3 Session variables, loops, and macros

Don’t forget that it’s often possible to streamline your workflow using the techniques
introduced in chapter 5: session variables, string macros, and inline loops. Inline
loops don’t need any further explanation (you’ve seen plenty of examples), but here
are some ideas for using session variables and macros.


USING VARIABLES
*****
*****
Imagine that you want to work with a data set that’s in a file with an inconveniently
long filename (possibly not even in the current directory). Assigning the name to a
variable helps to keep command lines much shorter:
FILE = "../path/to/directory/long-and-painful-filename.dat"
stats FILE u 2 nooutput
plot FILE u 1:($2/STATS_mean) w lp
Another possibility is to assign just the base name of the file to a variable, and add
extensions on the fly:
BASE = "long-and-painful-filename"
plot BASE . ".dat" u 1:2
save BASE . ".gp"
set terminal pdfcairo
set output BASE . ".pdf"
replot
You get the idea.


USING MACROS
*****
*****
Macros are another way to shorten command lines (see section 5.2). Imagine that you
want to plot several files using the with xyerrorbars style. That style requires six col-
umns to be named in the using clause. A macro may come in handy:
cols = "using 1:2:3:4:5:6"
plot "data1" @cols w xyerrorbars, "data2" @cols w xyerrobars

[[P267]]
In fact, you could make with xyerrorbars part of the macro! Macros can also help
straighten out complicated inline transformations:
trsf = "using ($1-$2/$3):(sqrt((abs($4-$5)/$6)))"
plot "data1" @trsf, "data2" @trsf
A third idea is to use macros to shorten appearance options, in particular colors (see
section 9.1). Compare this command
plot "data" u 1:2 lc rgb "red", "" u 1:3 lc rgb "green",
➥ "" u 1:4 lc rgb "blue"
with this:
r = "lc rgb 'red'"
g = "lc rgb 'green'"
b = "lc rgb 'blue'"
plot "data" u 1:2 @r, "" u 1:3 @g, "" u 1:4 @b
Defining line styles is an alternative, of course.


=== 12.2 Using external editors and viewers

In everything so far, I’ve assumed that you’re using gnuplot interactively: that you
started gnuplot and are typing commands at gnuplot’s own command prompt and that
you view the generated plots in one of gnuplot’s interactive terminals (such as the wxt
or qt terminal). But it turns out there are other ways to interact with gnuplot, even for
interactive, non-batch work. (Batch-oriented operations are treated in chapter 11.)
Rather than entering commands at gnuplot’s prompt, you may find it convenient
to use your favorite text editor to type commands into a command file and then let
gnuplot run this file as a script. One way to do this is to run an interactive gnuplot ses-
sion in another window. 4 You then load the script using load and examine the graph
in one of the interactive terminals.

Alternatively, you may choose to work with one of the file-based terminals and
export graphs in PNG or PDF format directly. If you do this, you need to specify the
output terminal and filename in your script before the plot command:
set terminal pdfcairo
set output "graph.pdf"
plot sin(x)
Now you don’t even need to start an interactive session. Instead, you run gnuplot at the
shell prompt, giving the name of your script as a command-line argument to gnuplot
shell> gnuplot script.gp
4
Depending on your text editor, you may not even need a separate window. If you use Emacs, for instance, an
internet search will turn up not one, but two gnuplot modes that let you run gnuplot from within your Emacs
window.


[[P268]]
and view the resulting graph in a separate viewer (such as okular or evince). Modern
viewers usually detect when the file they’re displaying changes on disk; they automati-
cally reload and redisplay the graph after you change your script and run gnuplot
again, leading to a comfortable workflow experience.

Alternatively, you can load the command file into a gnuplot session using load , but
in this case your script must contain the command set output after the plot com-
mand to ensure that all output buffers are flushed. Running gnuplot from the shell
prompt avoids this need: the gnuplot process terminates after completion of the
script, and that forces all open files to be flushed.

Using an external editor (and, possibly, an external viewer) has some advantages
compared to running gnuplot in an interactive session:
•  All commands and option values are simultaneously visible in the command
file.

•  Editing may be more convenient in a proper editor.

•  You can never forget to save your commands (not just your graph).

•  For file-based formats, there can be no discrepancy between the appearance of
the graph during the interactive session and the final graph saved to disk. (This
can be a problem when you prepare a graph using an interactive terminal but
then export the final version as PNG or PDF .)
•  Because multiplot mode (see section E.1) doesn’t permit you to change the
output and terminal settings, the command-file-based approach is the only
practical way to create a multiplot graph.

The primary disadvantage of using an external editor is the need to run a separate
window (which can be mitigated if a gnuplot plug-in is available for your editor).
When using file-based output formats and external viewers, you lose the ability to
interact with the graph using the mouse—which often doesn’t matter but can be pain-
ful at times.

TIP: Consider using an external editor and viewer. You might like it!

=== 12.3 Invoking shell commands from gnuplot

Gnuplot can’t do everything alone. It’s occasionally useful to invoke other programs
within a gnuplot session. There are four ways to do this:
•  The system command executes a command in a subshell, directing its output
to the interactive gnuplot terminal. For example, you can list the contents of
the current directory with system "ls" .

•  The system() function is similar to the system command. It takes a command
as argument, executes it as a subprocess, and returns its output as a string (in
contrast to the system command, which always directs any output from the sub-
process to the interactive terminal).


[[P269]]
•  Backticks or back quotes (decimal ASCII code 96—typically bound to the left-
most key in the top row on the keyboard) may be familiar from Perl and some
Unix shells. The command in back quotes is executed, and its output replaces
the back-quoted text (including the back quotes). Back-quote substitution can
be used anywhere except inside single-quoted strings.

•  The shell command suspends the current gnuplot session and starts an inter-
active shell. Quitting the shell (typically by typing exit or pressing Ctrl-D)
resumes the gnuplot session. (The shell command is somewhat of a legacy
from days before windowing systems—today, we’re more likely to pop up a shell
in another terminal window, rather than suspend the process in the current
window.)
In general, the system() function is more versatile than backticks and is the preferred
way to capture output from a subprocess. But backticks have the advantage that they
can occur inside double-quoted strings, whereas the output from the system() func-
tion must be concatenated explicitly to the string. In other words, the following two
commands are equivalent:
set label 1 "Today: `date`" at 0,0
set label 2 "Today: " . system( "date" ) at 0,1
For simple string substitutions such as these, backticks can be a convenient shorthand.
For more complicated operations, the system() function is the better choice.

==== 12.3.1 Worked example: plotting each file in a directory

Shell commands can be combined with loops. To plot every file in the current direc-
tory, either of the following two commands will work:
files = system( "ls" )
plot for[f in files] f u 1:2
plot for[f in "`ls`"] f u 1:2

=== 12.4 Hotkeys and mousing

When you issue a plot command, gnuplot pops up a new window containing the plot
(assuming, of course, that you’re working with one of the interactive terminals and
not currently exporting graphs to file). The new window containing the graph is auto-
matically raised or active.

When a graphics window is active like this, you can invoke gnuplot commands
through keyboard shortcuts or mouse clicks. In this section, we look at some of the
default bindings provided by gnuplot, and also see how to define custom keyboard or
mouse shortcuts.

Uses the system() function
Uses backticks

[[P270]]

==== 12.4.1 Default hotkeys

Pressing the space bar when the plot window is active raises the gnuplot command
window. This is convenient when you’re doing interactive work: you can iteratively
continue working on a single graph without ever having to take your hands off the
keyboard!
Grid lines can be toggled on or off through the hotkey g. Logarithmic plotting is
bound to l (y axis only) and L (in this case, gnuplot scales only the axis closest to the
mouse pointer logarithmically). The + and - keys can be used to zoom in and out of
the plot. Pressing q closes the current plot window.

These and some other interesting default bindings are listed in table 12.1. You can
get a display of all currently defined key bindings by pressing h while the plot window
is active.

I don’t find most of the default bindings all that useful (and some are outright
annoying), but custom hotkeys (see section 12.4.3) can be very useful indeed.

==== 12.4.2 Mousing

In interactive terminals, you can use the mouse to navigate the graph. By default,
mouse actions should be enabled, but in case they aren’t, you can enable them using
the command
set mouse
When the mouse is active, the current coordinates are always displayed at the bottom
of the plot window. You can place a temporary crosshair at the current mouse position
Table 12.1 Selected default hotkey bindings
Key Function
Space bar Raises the command window and switches keyboard focus to it
q Closes the current plot window
g Toggles grid lines on the plot
r Toggles the crosshair (ruler) at the current mouse position
l (lowercase letter L) Toggles logarithmic scaling for the y axis
L Toggles logarithmic scaling for the axis closest to the mouse pointer
+ Zooms in
- Zooms out
u Unzooms (after zooming using the mouse)
h Help: shows all key bindings
Arrow keys Scrolls the graph in the indicated direction

[[P271]]
by pressing the r key. Pressing r again switches off the crosshair. While the crosshair is
active, its location and the relative distance of the mouse pointer from the crosshair
coordinate are shown in the plot window, together with the absolute coordinates of
the mouse pointer.

You can use the mouse to zoom in on a graph by dragging the mouse while hold-
ing mouse button 3 (often the right mouse button). Click into the graph with mouse
button 3, drag while holding the button down, and then click with mouse button 1 to
replot only the section of the graph in the indicated region. Press u (unzoom) to
return to the previous setting. When you use the mouse to set the plot range in this
way, both the x and the y range are fixed according to the mouse coordinates (in par-
ticular, the y range is no longer autoscaled).

There are other ways to use the mouse in current interactive terminals. For exam-
ple, clicking a key entry toggles the corresponding curve in the graph on or off. 5 The
set mouse command takes some additional options that mostly control the display for-
mat of the mouse coordinates in the plot window. Check the standard gnuplot refer-
ence for details.


==== 12.4.3 Custom hotkeys

The standard hotkey bindings are nothing to write home about, and neither is the
default mouse behavior. But you can also define your own hotkey and mouse bind-
ings, and that allows for some exciting possibilities.

The bind command is the essential facility to do this. It’s used to bind gnuplot
commands to key strokes or mouse clicks. Here’s a trivial example:
bind "r" "replot"
This binds the r key to the replot command. Now, pressing the r key (while the plot
window has focus) will redraw the most recent plot.

.THE BIND COMMAND IN DETAIL
*****
*****

The bind command takes two string arguments: the key (possibly in combination with
one or several of the control keys) and the command to be executed (when invoked
without arguments, bind shows all currently defined bindings):
bind
bind [allwindows] "{str:keys}" "{str:command}"
You can bind commands to special keys—see table 12.2 for the symbolic names of
some function keys you may want to know, and see the standard gnuplot reference
documentation for the bind command for the complete list.

5
This feature is new with gnuplot 5.

Shows current bindings
Defines a new binding

[[P272]]

Usually, the commands bound to the hotkeys are executed only if the plot window has
keyboard focus; hotkeys don’t apply when the command window has focus. This behav-
ior can be overridden by the optional allwindows option to bind : if it has been given,
then the binding applies to all plot windows, active or not. In this case, the variable
MOUSE_KEY_WINDOW is set to the ID of the window generating the event.

Here are some additional points to watch out for:
•  Neither the space bar nor the q key can be rebound from its default settings.
•  Only mouse button 1 can be bound.

•  Running bind without arguments displays a list of current bindings. So does
show bind or pressing the h key while the plot window has focus.

•  The command reset bind returns all key bindings to their defaults.

.WORKED EXAMPLES
*****
*****
Some of the custom additions to the standard command set that were discussed in sec-
tion 12.1.2 can be bound to keys. Assuming that the string variables polar , times , and
dates exist in the gnuplot session and have the values shown earlier, you can bind
them to keys, like so:
bind "F1" polar
bind "F2" times
bind "F3" dates
bind "F4" "reset session"
For convenience, I’ve bound these commands to function keys here; you can bind
them to any other key as well. The binding for F4 resets gnuplot to its state at the
beginning of the session, presumably resetting the configuration changes brought
about by any of the other keys.

You can also bind the loading of a scriptlet to a key. In this case, the effective com-
mand is load :
bind "F5" "load 'normdist.gp'"
Table 12.2 Symbolic names of some of the function keys available
Location Name
Control keys "ctrl-", "alt-"
Main key block "Tab", "Escape", "Return"
Arrow keys "Left", "Up", "Down", "Right"
System key block "Home", "End", "PageUp", "PageDown"
Function keys "F1", …, "F12"
Window events "Button1", "Close"

[[P273]]
One word of warning: if you use string variables in bind (as in the bindings for F1 , F2 ,
and F3 in the earlier example), then the variables must contain the string to evaluate
at the time the bind command is executed (early binding). You can’t bind a key to a vari-
able first and then dynamically change the value of that variable later.

==== 12.4.4 Capturing mouse events

Whenever a mouse or keyboard event occurs while the graph window has focus (and
provided mousing is enabled using set mouse ), gnuplot populates several variables
with information regarding the details of the most recent events. The names of these
variables all begin with the prefix MOUSE_ . See table 12.3 for a complete list.
You can use the information contained in these variables, in combination with the
bind command, to write gnuplot code that responds to user actions. In this way, it’s
possible to achieve a limited form of programmable interactivity.

.WORKED EXAMPLE
*****
*****
Here’s an intentionally simple example, mostly to demonstrate the principle. I’ll pres-
ent a much more interesting and useful application in the following section.
If you execute the following command
bind "Button1" "set label at MOUSE_X, MOUSE_Y center point pt 1 ps 4; \
set label at MOUSE_X, MOUSE_Y center point pt 6 ps 3; replot"
and then click into the plot window, a point symbol is placed at the current mouse posi-
tion—for example, to draw attention to an oddity in the data. To make things a little
Table 12.3 These variables are set whenever a mouse or keyboard event occurs when a plot
window is active, provided that mousing has been enabled using set mouse .
Variable name Description
MOUSE_X x coordinate at the time of the mouse event (measured in the first
coordinate system)
MOUSE_Y y coordinate
MOUSE_X2 x coordinate (measured in the second coordinate system)
MOUSE_Y2 y coordinate
MOUSE_BUTTON ID of the mouse button clicked (1, 2, or 3)
MOUSE_SHIFT Nonzero if the Shift key was pressed when the event occurred
MOUSE_CTRL Nonzero if the Ctrl key was pressed when the event occurred
MOUSE_ALT Nonzero if the Alt (Meta) key was pressed when the event occurred
MOUSE_KEY ASCII code of the key that was pressed
MOUSE_CHAR Character value of the key that was pressed
MOUSE_KEY_WINDOW ID of the plot window that received the event

[[P274]]
more interesting, it’s a symbol that gnuplot doesn’t provide as a built-in: a crosshair,
here generated from a separately drawn cross and circle. To remove the symbols, you
need to find their tags first using show label and then remove them individually with
unset label , followed by the tag.

This code snippet is a straightforward application of the bind command. Let me
draw your attention to the replot command at the end of the command string: this is
common practice when using bind and ensures that the result of the action is visible
immediately. You’ll see more examples of this technique in the next section.

==== 12.4.5 Case study: placing arrows and labels with the mouse

Truth be told, I don’t find most key bindings terribly useful: the whole purpose of
gnuplot is graphs, and I want to interact with them using the mouse, not the keyboard
(for a stunning exception to this rule, see section D.7). Fortunately, the bind com-
mand can be used to create some special mouse bindings as well.

Wouldn’t it be nice if you could place arrows and labels onto the graph with the
mouse: just point and click? Turns out you can. Here are some ideas.

.LABELS
*****
*****
The problem with placing labels is that there isn’t a way to prompt the user for the
text of the label. Hence, you must rely on the user to prepopulate an agreed-on vari-
able, or you must rely on the user to call an appropriate function later.
The following snippet follows the former approach:
bind "ctrl-Button1" 'eval sprintf( "set label %d \"%s\" at %f,%f; replot", \
labeltag, labeltext, MOUSE_X, MOUSE_Y )'
It assumes that the variables labeltext and labeltag have been populated appropri-
ately. Then, clicking into the plot while pressing the Ctrl key will place the label at the
current position of the mouse pointer.

Two notes on implementation: in the second argument to bind , you must escape
the innermost quotation marks. Also note the replot command, which ensures that
the plot automatically updates when the mouse button is clicked. This is common
practice when using bind .

The next code snippet takes the other approach. You click first, and then you sup-
ply the text (note that the second string supplied to the bind command is continued
on the next line):
bind "ctrl-Button1" "label_x=MOUSE_X; label_y=MOUSE_Y; \
set label 1000 at label_x,label_y point; replot"
label( tag, text ) =
➥ sprintf( "set label %d '%s' at %f,%f; unset label 1000; replot",
➥ tag, text, label_x, label_y )
Now, if you Ctrl-click anywhere in the plot window, a point symbol is placed at the
position of the mouse cursor, to remind you to supply the label text. You do the latter

[[P275]]
using the label() function, which removes the point from the graph and replaces it
with the supplied text. Don’t forget to use eval with this function:
eval label( 2, "Hello, World!" )
.ARROWS
*****
*****
Arrows are trickier, because you need to capture two positions. The problem is that the
only accessible mouse event is the click: this means you can’t use drag-and-drop as in a
drawing program. Instead, you have to capture two clicks separately. This leads to a
problem: what if you change your mind between the first click and the second?
Listing 12.4 shows the solution. You bind both the mouse click and the Esc key.
When the mouse key is clicked once, a temporary marker is placed on the plot; when
a second click occurs, the marker is removed and an arrow is drawn. If you change
your mind after the first click, you can press the Esc key, which removes the temporary
marker and leaves gnuplot in a clean state. Pretty cool! (Try it!)
bind "Button1" \
"if(exists('arrow')==0) { \
arrow=1; arrow_x=MOUSE_X; arrow_y=MOUSE_Y; \
set label 1000 at arrow_x,arrow_y point; replot; \
} else { \
unset label 1000; \
set arrow from arrow_x,arrow_y to MOUSE_X, MOUSE_Y; replot; \
undefine arrow,arrow_x,arrow_y \
}"
bind "Escape" "unset label 1000; replot; undefine arrow,arrow_x,arrow_y"
A crucial element of the logic in listing 12.4 is the variable called arrow . If it exists in
the gnuplot session, then you know the first point has been selected and the tempo-
rary marker has been placed; if it doesn’t exist, then the first point has not been
selected yet. You can test for the existence of a variable with this name using the
exists() function. The reason to test for the existence of this variable (rather than
for its value) is that a test for value would result in an error if the variable hadn’t yet
been initialized. The existence test is more robust.

TIP: The snippet in listing 12.4 works extremely well. It takes all the pain out
of gnuplot’s set arrow facility.


=== 12.5 Startup configurations and initialization

You can pass commands and information to gnuplot on startup. All three typical ways
of initializing a program are available: initialization files, environment variables, and
command-line flags. Let’s consider them in turn.

Listing 12.4 Commands to place arrows using the mouse (file: mouse-arrows.gp)

[[P276]]

==== 12.5.1 Startup and initialization files

On startup, gnuplot attempts to read the file gnuplotrc from a standard location, such
as /usr/share/gnuplot/ on Linux—run show loadpath to see the configured loca-
tion. By default, this file is empty, but you can use it for customizations that should be
global to your installation.

Gnuplot also looks for a personal initialization file, called .gnuplot on Unix (and
Mac OS ) and GNUPLOT.INI on Windows. Gnuplot searches for this file first in the cur-
rent directory and then in the current user’s home directory (as defined by the corre-
sponding environment variable). Once a file has been located, searching doesn’t
continue. The file is executed (using load ) before any other files or commands are
read from the command line, standard input, or an interactive terminal. In general,
settings in the initialization file override environment variables.

You can suppress reading of both initialization files by giving the -d command-line
option when invoking gnuplot. This may be useful when you want all of gnuplot’s
internal settings to assume their default values.

.WHAT TO PUT IN YOUR INITIALIZATION FILE
*****
*****
I recommend keeping the default initialization file relatively short, in order to prevent
pollution of the gnuplot session (and all command files subsequently saved with
save ). I think it’s a better idea to group related settings in individual command files
that can be loaded as needed, and to limit the default file to only those settings that
you really want to have in effect at all times. Also keep in mind that there is only one
initialization file that is read automatically by gnuplot. With individual command files
or stylesheets (see section 12.6), you have greater control over the state of your gnu-
plot session. (You can either load them after gnuplot has started, using load , or spec-
ify them on the command line.)
The following listing shows my personal initialization file. It’s relatively short and
contains only a handful of settings that I find generally useful.

set encoding utf8
set samples 3000
set isosamples 30
set hidden3d
set loadpath "/home/janert/lib/gnuplot/"
load "default-style.gp"
hsv( h, s, v ) = hsv2rgb( h - floor(h), s, v )
pack( r, g, b ) = 2**16*r + 2**8*g + b
bind "Button1" \
"if(exists('arrow')==0) { \
arrow=1; arrow_x=MOUSE_X; arrow_y=MOUSE_Y; \
Listing 12.5 A typical .gnuplot initialization file (file: dot.gnuplot)
Improves the
default settings
B
Personal library of
gnuplot scripts
C
Loads
personal
stylesheet
D
Color-management
functions
E
F
Sets arrows
with the mouse

[[P277]]
set label 1000 at arrow_x,arrow_y point; replot; \
} else { \
unset label 1000; \5
set arrow from arrow_x,arrow_y to MOUSE_X, MOUSE_Y; replot; \
undefine arrow,arrow_x,arrow_y \
}"
bind "Escape" "unset label 1000; replot; undefine arrow,arrow_x,arrow_y"
The first few lines fix instances where gnuplot’s defaults don’t work well B . I explicitly
enable UTF-8 (see the sidebar at the end of section 5.1) and increase the sampling
density for plot and splot (see sections 3.1 and C.1.2). Next, I define the path for my
local library of gnuplot scripts C and load the default style sheet directly from that
directory D . Then I define two functions for handling color (see section 9.1.1) E
and define bindings that let me set arrows with the mouse (see listing 12.4) F . That’s
it—everything else is loaded only as required.


==== 12.5.2 Environment variables

Gnuplot examines several environment variables (see table 12.4). Not all of them are
still important; some of them provide information for graphics terminals that are no
longer current. In general, I don’t like to rely on environment variables and instead
prefer explicit initialization in a configuration file or scriptlet.

Table 12.4 The environment variables that gnuplot reads on startup. Unless otherwise specified, the
variables have the same name on all platforms.

Name (Unix and Mac OS X)
Name (Windows,
if different)
Description
GNUTERM Name of the terminal to be used. (Compare the
set terminal command.)
GNUHELP Path to the online help file gnuplot.gih.

GNUPLOT_LIB Additional directories to be searched for data
and command files. (Compare the set
loadpath facility.) a
GDFONTPATH and
GNUPLOT_DEFAULT_GDFONT
Search path used by terminals based on the GD
library (PNG, GIF, and JPG) to locate font files,
and a default font to be used with these termi-
nals, respectively.

GNUPLOT_FONTPATH Search path used by the PostScript and SVG ter-
minals to locate font files. (Compare gnuplot’s
set fontpath facility.) a
GNUPLOT_PS_DIR Used by the PostScript terminal to locate cus-
tom prologue files.

a Path entries are separated from one another using a colon ( : ) on Unix and a semicolon ( ; ) on Windows.
F

[[P278]]

==== 12.5.3 Gnuplot command-line flags

In general, gnuplot executes the contents of command files named on the command
line when gnuplot is first started (see section 11.3). Remember that the special file-
name - (hyphen) suspends processing of the command line and begins reading inter-
active commands from standard input.

In addition, gnuplot recognizes six command-line flags. See table 12.5.

GNUFITLOG Name of the log file maintained by the fit
command (discussed in section F.7); defaults
to fit.log. If a directory is named, then gnuplot
creates a file with the default name in this
directory.

HOME GNUPLOT and
USERPROFILE
Directory to search for a .gnuplot initialization
script if none is found in the current directory.

PAGER n/a Name of the pager program to use.

SHELL COMSPEC Name of the shell to spawn in response to the
gnuplot shell command.

Table 12.5 Command-line options recognized by gnuplot
Short form Long form Description
-V --version Prints version information.

-h --help Prints a short usage message.

-p --persist Continues to display the display window for interactive
terminals, even after the interactive gnuplot session has
terminated.

-d --default-settings Suppresses loading of both the global (gnuplotrc) and
the personal (.gnuplot) initialization files.

-c ... Treats the rest of the command line as if invoked using
call. This option should be followed by the name of a
command file and, optionally, its arguments.

-e "..." Executes the commands given as string argument
before processing the rest of the command line.

Table 12.4 The environment variables that gnuplot reads on startup. Unless otherwise specified, the
variables have the same name on all platforms. (continued)
Name (Unix and Mac OS X)
Name (Windows,
if different)
Description

[[P279]]

=== 12.6 Stylesheets

The concept of a stylesheet is probably most familiar in the context of web develop-
ment, but it is, in fact, more general: wherever a document is prepared using markup,
the stylesheet principle can be applied. The markup language is used to indicate
semantics, whereupon the stylesheet is applied to fix the visual appearance.
This notion can be carried over to gnuplot, once you realize that a command like
plot "data" u 1:2 w lp lt 1, "" u 1:3 w l lt 2
constitutes a form of markup. The appearance of the plot depends on the styles that
are in effect when the plot is rendered by gnuplot. By supplying suitably chosen defini-
tions for line types and other properties (such as arrow styles and text fonts), you can
therefore create a family of graphs, each with a different visual appearance.
The notion of using stylesheets like this with gnuplot may seem unfamiliar (at
least, I’ve never seen this done before), but it’s an extremely powerful concept. It
enables you to create graphics for specific circumstances and purposes. At their most
basic, stylesheets allow you to create both color and black-and-white versions of
graphs, but the idea can be taken further. Graphs for interactive work (on a computer
screen) place different demands on colors, line widths, point sizes, and so on, than
graphs prepared for (say) a PowerPoint presentation (see the sidebar “But is it beauti-
ful?” later in this chapter).

To be clear, I’m not saying you can apply a different stylesheet to an existing com-
mand file and obtain a satisfactory graph without tweaking (as you can with CSS or, for
example, LaTeX). But by using different sets of predefined line types and other visual-
appearance options, you can begin to create graphs that take the specifics of the
intended presentation channel or medium (screen, print, or overhead) into account.
If nothing else, you can use a personal stylesheet to escape the standard look of gnu-
plot graphics (although I don’t think you should—see the sidebar in section 8.3.2).
But it’s nice to have the option!

TIP: Customize styles to adapt the appearance of graphs to their intended use
and medium. Collect related styles together to create stylesheets for different
purposes.


==== 12.6.1 Worked example: stylesheets

What does the stylesheet concept look like in practice? In this section, I’ll present the
same graph four different ways, using four different stylesheets—with no changes to
the plot command! The plot includes six curves (so there’s a need for a variety of dis-
tinguishable line styles) and both sparse and dense data sets (so I have the opportu-
nity to use both the with lines and the with linespoints plot styles).

The plot command is shown in the next listing. It’s used without modification to
generate all of the next four graphs. Only the stylesheets differ.


[[P280]]

set xlabel "Input"
set ylabel "Response"
plot "sparse" u 1:2 t "Sparse 1" w lp, "" u 1:3 t "Sparse 2" w lp,
➥ "" u 1:2:(1000) t "Smooth" s acs w l,
➥ "dense" u 1:2 t "Dense 1" w l, "" u 1:3 t "Dense 2" w l,
➥ "" u 1:4 t "Dense 3" w l
The stylesheets must be loaded (using load ) before the plot command is issued. You
should also run reset or reset session before loading the next stylesheet (other-
wise, previous styles will sometimes interfere with current ones).

.INTERACTIVE COMPUTER WORK 1: THIN AND BRIGHT
*****
*****
The stylesheet in listing 12.7 is intended as a replacement for the old gnuplot default
appearance and is meant primarily for interactive use at a computer screen (although
I also used it for most of the color figures in this book). It’s characterized by relatively
thin lines, in bright colors. To make thin lines visually distinguishable, it’s necessary to
choose relatively bright colors; but in contrast to the old gnuplot default, the colors
are toned down a bit. A dark green is used in place of bright green, and the color yel-
low (traditionally the sixth style in the default sequence), which is too difficult to see
against a white background, is replaced with a drab goldenrod. 6 Moreover, I tried to
make sure colors that are adjacent in the sequence exhibit good contrast with each
other; hence the two greens and blues are well separated. The choice of point type
also warrants a remark: instead of the spidery cross and saltire, this stylesheet prefers
filled and open circles and squares. The resulting plot is shown in figure 12.1. (The
set termoption command changes just one aspect of a terminal, without requiring
the terminal to be specified—see chapter 10.)
set linetype 1 pt 7 lc rgb '0xee0000'
set linetype 2 pt 5 lc rgb '0x008b00'
set linetype 3 pt 6 lc rgb '0x0000cd'
set linetype 4 pt 4 lc rgb '0xff3fb3'
set linetype 5 pt 2 lc rgb '0x00cdcd'
set linetype 6 pt 7 lc rgb '0xcd9b1d'
set linetype 7 pt 5 lc rgb '0x8968cd'
set linetype 8 pt 6 lc rgb '0x8b8b83'
set linetype 9 pt 4 lc rgb '0x00bb00'
set linetype 10 pt 2 lc rgb '0x1e90ff'
set linetype 11 pt 7 lc rgb '0x8b2500'
set linetype 12 pt 5 lc rgb '0x000000'
set termoption font "Helvetica,12"
set termoption fontscale 0.5
Listing 12.6 Plot command for figures 12.1 through 12.4 (file: style-cmd.gp)
6
Because hex strings aren’t intuitive, the X11 color name has been included for each stylesheet color in this
section.

Listing 12.7 Stylesheet for figure 12.1 (file: style1.gp)
Red2
Green4
MediumBlue
Maroon1
Cyan3
Goldenrod3
MediumPurple3
Ivory4
Custom green
DodgerBlue1
OrangeRed4
Black

[[P281]]
.INTERACTIVE COMPUTER WORK 2: THICK AND PASTEL
*****
*****
The second stylesheet (listing 12.8) is also intended for interactive use on a computer
screen, but behold how different the resulting graph appears! (See figure 12.2.) Gone
are the brightly colored hairlines, and instead the graph uses thick, wide lines in soft
pastel colors. (It also uses a boldface font, in keeping with the thick line widths.) If
you’re used to graphs like figure 12.1, then this style takes some getting used to, but I
recommend that you give it a fair try. After a while, you may notice that the muted col-
ors and soft edges have a welcome, soothing effect. But it’s quite different than what
you saw before.

set linetype 1 lw 3 pt 7 lc rgb '0x87ceeb'
set linetype 2 lw 3 pt 5 lc rgb '0x7ccd7c'
set linetype 3 lw 3 pt 6 lc rgb '0xab82ff'
set linetype 4 lw 3 pt 4 lc rgb '0x6ca6cd'
set linetype 5 lw 3 pt 7 lc rgb '0xfa8072'
set linetype 6 lw 3 pt 5 lc rgb '0xd2b48c'
set pointsize 0.5
set termoption font "Helvetica-Bold,11"
set termoption fontscale 0.5
Listing 12.8 Stylesheet for figure 12.2 (file: style2.gp)
-0.5
0
0.5
1
1.5
2
0 0.2 0.4 0.6 0.8 1
Response
Input
Sparse 1
Sparse 2
Smooth
Dense 1
Dense 2
Dense 3
Figure 12.1 The example graph using the stylesheet from listing 12.7: thin lines, bright
colors, small symbols
SkyBlue
PaleGreen3
MediumPurple1
SkyBlue3
Salmon
Tan

[[P282]]
.PRINT PUBLISHING : BLACK - AND - WHITE
*****
*****
For print publishing, it may still be necessary to submit graphs in black and white. For
line art, this means you have to resort to dash patterns to distinguish lines from each
other. This is what the stylesheet in listing 12.9 is for. It uses custom dash patterns that
are intended to re-create (and improve on) the dash patterns from gnuplot’s Post-
Script terminal. In keeping with the preference for hairlines in scientific drawing, it
doesn’t use filled point symbols and instead gives preference specifically to the cross
and saltire—but with a twist! It uses gnuplot’s new pointintervalbox feature so the
continuous line doesn’t touch, and thereby interfere with, the point symbols. The
resulting graph is shown in figure 12.3.

set linetype 1 pi -1 pt 1 lc black dt solid
set linetype 2 pi -1 pt 2 lc black dt (8,6)
set linetype 3 pi -1 pt 6 lc black dt (4,3)
set linetype 4 pi -1 pt 4 lc black dt (3,6)
set linetype 5 pi -1 pt 1 lc black dt (12,5,2,5,2,5)
set linetype 6 pi -1 pt 2 lc black dt (16,8)
set linetype 7 pi -1 pt 6 lc black dt (20,6,2,6)
set linetype 8 pi -1 pt 4 lc black dt (30,10)
set pointsize 0.5
set pointintervalbox 1.75
set termoption font "Helvetica,12"
set termoption fontscale 0.5
Listing 12.9 Stylesheet for figure 12.3 (file: style3.gp)
-0.5
0
0.5
1
1.5
2
0 0.2 0.4 0.6 0.8 1
Response
Input
Sparse 1
Sparse 2
Smooth
Dense 1
Dense 2
Dense 3
Figure 12.2 The example graph using the stylesheet from listing 12.8: thick lines, pastel
colors. Compare figure 12.1.


[[P283]]
.AWALK ON THE WILD SIDE
*****
*****
The last stylesheet has a two-fold purpose: I want to demonstrate some intentionally
questionable choices for the appearance of a graph—these aren’t recommendations!
More seriously, I also want to show how to make a graph look entirely different from the
usual gnuplot appearance. Here are some of the differences: the graph has no frame,
but a couple of arrows indicating the coordinate axes; the aspect ratio is square; the
font is a serif type; the lines are wide and bright; despite being color-coded, they’re
also dashed; the frame around the key unnecessarily clutters and partially obscures
the graph; and the text is either too large or too small. Not all of these choices are
poor, but some definitely are. (See the following listing and figure 12.4.)
unset border
set xtic nomirror
set ytic rotate by 90 center nomirror
set arrow 1000 from graph 0,0 to graph 1.075,0 head filled lw 2
set arrow 1001 from graph 0,0 to graph 0,1.075 head filled lw 2
set size square
set lmargin 7
set rmargin 5
set tmargin 1.5
set ylabel offset 3,0
set xlabel offset 0,0.5
Listing 12.10 Stylesheet for figure 12.4 (file: style4.gp)
-0.5
0
0.5
1
1.5
2
0 0.2 0.4 0.6 0.8 1
Response
Input
Sparse 1
Sparse 2
Smooth
Dense 1
Dense 2
Dense 3
Figure 12.3 The example graph using the stylesheet from listing 12.9: black-and-white,
dashed hairlines, cross-shaped symbols

[[P284]]
set key opaque title "Legend" box lw 2 font ",10"
set linetype 1 lw 2 pt 9 lc rgb '0xff4500'
set linetype 2 lw 2 pt 11 lc rgb '0x00ff00' dt '-'
set linetype 3 lw 2 pt 13 lc rgb '0x0000ee' dt '_'
set linetype 4 lw 2 pt 9 lc rgb '0xff1493' dt '.'
set linetype 5 lw 2 pt 11 lc rgb '0x00eeee'
set linetype 6 lw 2 pt 13 lc rgb '0x9400d3' dt '-'
set termoption font "Times,20"
set termoption fontscale 0.5
OrangeRed
Green
Blue1
DeepPink
Cyan2
DarkViolet
-0.5 0 0.5 1 1.5 2
0 0.2 0.4 0.6 0.8 1
Response
Input
Legend
Sparse 1
Sparse 2
Smooth
Dense 1
Dense 2
Dense 3
Figure 12.4 The example graph
using the stylesheet from listing
12.10: as different from the
gnuplot defaults as possible
But is it beautiful?
Gnuplot’s defaults owe some to scientific tradition and some to technical limitations
on early computer systems. Few of these limitations still remain, which means you’re
free to choose from the available options for the best results.

The first two of gnuplot’s point symbols (or point types—see figure 9.7) come from a
scientific tradition: on graph paper, where accuracy needed to be maintained manu-
ally, two thin, short lines intersecting in a point provided a good way to fix a location
on the graph precisely. Today, when the data is available numerically and the com-
puter takes care of accuracy, this is much less of a concern, and you can choose sym-
bols that are more aesthetically pleasing.

For scientific plots of medium-sized data sets, both cross and saltire may still be ade-
quate. The combination of the two (the third symbol in gnuplot’s default ordering) is
bulky and shouldn’t be used.


[[P285]]

=== 12.7 Summary

In this chapter, we explored different ways to go beyond gnuplot’s default appearance
and behavior. First, we considered ways to streamline your gnuplot workflow through
scripts and customized key bindings (hotkeys). You may want to personalize your work
environment when using gnuplot, and I showed you how to do that.

In the last part of the chapter, I introduced the concept of stylesheets. Stylesheets are
bundles of appearance options that you can use to create graphs that are optimized
for their intended use and medium—be it an interactive computer session, a black-
and-white print publication, or a presentation to a live audience.

For presentation graphics, in particular for sparse data sets, I recommend the filled
circle and the filled square. These two symbols, together with a choice of colors,
should be enough to distinguish several data sets in a single graph. If you need even
more symbols, I recommend the unfilled circle and unfilled square, followed by cross
and saltire, and possibly the tip-down triangles (filled and unfilled). The diamond (four-
cornered symbol, standing on its tip) doesn’t reproduce well and should probably,
although regretfully, be avoided.

For large data sets consisting of many points, the unfilled circle has a special advan-
tage: even if points are spaced densely enough that symbols overlap partially, unfilled
circles provide the best chance of being recognizable as separate symbols. Whereas
filled symbols occlude each other, and symbols made up of straight lines (such as
crosses and squares) blend together as individual edges align, unfilled circles can
still be distinguished from each other.

Traditionally, thin lines have been used in scientific publishing: again, because a thin
line fixes a location on a graph more precisely. This is still a good tradition to follow,
in particular for print publishing: thin lines often give a publication a classy appear-
ance. (Provided they aren’t too thin to render properly—as publishers switch from
photo-offset to print-on-demand technology, sturdier lines might be a good idea!)
For other publication channels, this isn’t true. In particular for slides and overhead
presentations, thicker, rounded lines work better: they can be seen from the back of
the room, and they tend to fit better with the overall style of the medium. Graphs for
the Web fall between these two extremes.

In general, I recommend using non-serif fonts (such as Helvetica) for labels on a
graph, because such fonts are the most neutral. Make sure you choose the font size
properly: it’s surprisingly common to see graph labels that are too large, leading to
an imbalanced appearance of the entire graph.


[[part4]]
== Part 4 Understanding data

I n this final part, we can take the technical aspects of working with gnuplot
largely for granted, and instead concentrate on the tasks that can be solved with
gnuplot. Chapter 13 introduces several fundamental types of graphs and explains
when and how to use them. Chapter 14 is more advanced and offers solutions to
some recurring topics in graphical analysis. Chapter 15 closes this book with a
reminder regarding the ultimate purpose of all kinds of analysis.


[[P289]][[ch13]]

== Chaper 13 Basic techniques of graphical analysis
This chapter and the next largely take gnuplot and its features for granted and
instead concentrate on applying gnuplot to specific goals that commonly arise when
graphing data. At the same time, I’ll take the opportunity to show you how certain
tasks can be accomplished using gnuplot’s features. In this chapter, I’ll discuss
some basic activities that are generally useful in graphical analysis; the next chapter
will cover some more specialized tasks in greater depth.

When faced with a new data set, two questions usually dominate. The first is,
how does one quantity depend on some other quantity—how does y vary with x?
The second question (for data sets that include some form of statistical noise) asks,
how is some quantity distributed—where are data points located, and what’s the
This chapter covers
•  Investigating relationships
•  Using logarithmic scales
•  Representing point distributions
•  Visualizing ranked data
•  Organizing your work

[[P290]]
character of the randomness? These are the two primary questions for this chapter. In
the course of it, we’ll also revisit logarithmic plots and their uses and examine more
applications of smooth approximations to noisy data sets—topics first introduced in
chapter 3.


=== 13.1 Representing relationships

One of the conceptually easiest and most familiar types of graphs shows the dependence
of one quantity on another—so much so that creating a plot of this type is what is com-
monly meant by “graphing data.” You’ve seen several examples in this book, like fig-
ure 2.4, figure 3.1, and many more.


==== 13.1.1 Scatter plots

For many data sets, it’s natural to ask whether one quantity depends on another and,
if so, how: does y grow as x grows, or does it fall, or does y not depend on x to begin
with? A scatter plot is the first step in finding the answer. A scatter plot shows uncon-
nected symbols located at the position given by x and y. It’s an easy way to get a feeling
for an otherwise unknown data set.

.ASIMPLE EXAMPLE : CAR DATA
*****
*****
Listing 13.1 shows the first few lines from a sample data set containing 26 attributes
for 205 different car models that were imported into the US in 1985. 1 The 14th col-
umn gives the curb-weight in pounds, and the last (26th) column the price (in 1985
dollars). A scatter plot like the one in figure 13.1 shows how weight varies as a func-
tion of price.

1,158,audi,gas,turbo,four,sedan,fwd,front,105.80,192.70,71.40,55.90,
0,?,audi,gas,turbo,two,hatchback,4wd,front,99.50,178.20,67.90,52.00,
2,192,bmw,gas,std,two,sedan,rwd,front,101.20,176.80,64.80,54.30,2395
0,192,bmw,gas,std,four,sedan,rwd,front,101.20,176.80,64.80,54.30,239
0,188,bmw,gas,std,two,sedan,rwd,front,101.20,176.80,64.80,54.30,2710
...
In this case, the input file is not whitespace-separated, but comma-separated. Instead
of transforming the input file to space separated, it’s more convenient to use gnu-
plot’s set datafile separator option to plot this data file. The open circle ( pt 6 ) is
used because it remains easiest to distinguish even when data points overlap:
set datafile separator ","
plot [2500:] "imports-85.data" u 26:14 pt 6
You can clearly see that weight goes up as the price increases, which is reasonable. You
should also note that there are many more low-price/low-weight cars than heavy, pre-
mium vehicles. For budget cars, weight seems to increase in step (linearly) with price
1
This example comes from the “Automobile” data set, available from the UCI Machine Learning Repository at
http://archive.ics.uci.edu/ml/datasets/Automobile.

Listing 13.1 Incomplete data for figure 13.1 (file: imports-85.data)

[[P291]]
for a while; but for higher-priced vehicles, the gain in weight levels off. This observa-
tion may have a simple explanation: the price of mass-market vehicles is largely deter-
mined by the cost of materials, so that a car that’s twice as big (as measured by its
overall mass) is also twice as expensive, whereas the price of luxury cars is determined
by higher quality (fancier materials such as leather seats, and additional options such
as more electronics) rather than by sheer bulk.


USING SCATTER PLOTS
*****
*****
This example demonstrates what to look for when examining a scatter plot. The first
question usually concerns the nature of the relationship between x and y. Does y fall
as x grows or vice versa? Do the points fall approximately onto a straight line or not? Is
there an oscillatory component? Whatever it is, take note of it.

The second question concerns the strength of the relationship, or, put another
way, the amount of noise in the data. Do the data points jump around unpredictably
as you go from one x value to the next? Are there outliers that seem to behave differ-
ently than the majority of the points? Detecting outliers is important: gone unnoticed,
they’ll mess up most statistical quantities (such as the mean) you may want to calculate
later. And sometimes, outliers indicate an interesting effect—maybe a subgroup of
points follows different rules than the majority. Outliers in scatter plots should never
go uninvestigated.

A third aspect to look for in a scatter plot is the distribution of points in either dimen-
sion. Are points distributed rather uniformly, or do they cluster in a few locations? If so,
do you understand the reason for the clustering, or is this something you should investi-
gate further? There may be a lot of information even in a humble scatter plot!
1000
1500
2000
2500
3000
3500
4000
4500
5000 10000 15000 20000 25000 30000 35000 40000 45000 50000
Weight [Pounds]
Price [USD]
Figure 13.1 Curb weight versus price for 205 different cars. See listing 13.1.

[[P292]]

==== 13.1.2 Highlighting trends

The primary reason for preparing scatter plots is to determine whether there is any
relationship between the plotted quantities, and what the nature of this relationship
might be. In particular when the data is noisy, it may be difficult to recognize the dom-
inant behavior from the individual data points alone, and so there is a need for graph-
ical tools to highlight trends that may exist in the data. Gnuplot offers weighted cubic
splines for this purpose. Let’s study an example before discussing splines in more detail.
.WORKED EXAMPLE : MARATHON WINNING TIMES
*****
*****
Figure 13.2 shows the finishing times of the winners in a marathon event from when
the event was first conducted until 1990. 2 In general, you see that the finishing times
have decreased over time—the top athletes are getting better every year. The changes
are particularly dramatic for the women’s results since they started competing in 1966.
Also shown are the best-fit straight-line approximations to the data (as found by the
stats command), and they seem to represent the data quite well. The only issue is
that according to those fits, women should overtake men sometime in the early
1990s—and then continue to get dramatically faster. Is this a reasonable conclusion?
This example attempts to demonstrates two important points when working with
data. The first is the need to be sensitive to the structure and quality of the data. For
the data in figure 13.2, fitting a straight line provides only a very coarse—and, as you’ll
see, misleading—approximation of the real behavior.

2
This example was inspired by the book Graphic Discovery by Howard Wainer (Princeton University Press, 2005).
120
140
160
180
200
1900 1920 1940 1960 1980 2000
Men
Women
Winning time in minutes
Year
Men
Women
Figure 13.2 Finishing times (in minutes) for the winner of a marathon (up to the year 1990),
together with the best straight-line fit. Will women overtake men in the coming years?

[[P293]]
You need to remember that by fitting a straight line, you’ve chosen one specific
model to represent the data. At this point, you’re no longer analyzing the data with the
intention of revealing the information contained in it, but are making a specific state-
ment about its surmised behavior. Before making such a strong statement, you should
have sufficient evidence for the applicability of the particular model selected. And com-
ing back to the current example, there certainly doesn’t seem to be any strong theoret-
ical reason why athletic performance should follow a straight line as a function of time.
To understand the structure of the data, it might be a better idea to represent the
data by using “soft” local approximations, such as weighted splines. Some experimen-
tation with the weights will tell you much about the structure of the data: does the
overall shape of the approximation curve change drastically as you vary the weighting?
Which features are the most robust, and which disappear most quickly? Typically, sig-
nificant features tend to be rather robust under transformations, whereas less relevant
features are more transient.

Figure 13.3 shows the same data as figure 13.2, but instead of a straight line, a soft
spline is used to represent the data, like so:
plot [1890:2017.5][115:215] "men-women" u 1:2 t "Men" w p pt 4,
➥ "" u 1:3 t "Women" w p pt 6,
➥ "" u 1:2:(1e-2) t '' s acs lt 1 lw 2,
➥ "" u 1:3:(1e-2) t '' s acs lt 2 lw 2
120
140
160
180
200
1900 1920 1940 1960 1980 2000
1990
Winning time in minutes
Year
Men
Women
Figure 13.3 The same data as in figure 13.2, together with a weighted-splines fit. The fit is
based only on points prior to 1990, but the actual finishing times for the following years are also
shown. The softer spline clearly reveals the leveling off of the women’s results well before 1990.

[[P294]]
This approximation suggests that women’s performance starts to level off in the late
1980s, and the results from years after 1990 corroborate this observation. Note that
the spline approximation in the graph is based only on years up to and including 1990,
but not on later data points.

More on splines
Splines are a way to provide a smooth approximation to a set of points. a Splines are
constructed from piecewise polynomial functions, which are joined together in a
smooth fashion; the joints are referred to as knots. In the case of interpolating
splines, the knots are made to coincide with the actual data points; the resulting
curve is therefore forced to pass exactly through all data points. In the case of
smoothing or approximating splines, the vertical position of each knot is left to vary,
so the resulting curve in general does not pass through the individual data points.
Because in the latter case the curve doesn’t have to pass through any data points
exactly, it can be less wiggly.

Both interpolating and approximating splines must fulfill the same smoothness con-
ditions, but in addition, the approximating spline must strike a balance between the
following two conditions:
•  Passing close to the data points
•  Not being too wiggly
These conditions are expressed in the following functional, which is minimized by the
approximating spline s(x)
where (x i , y i ) are the coordinates of the data points, the w i are the weights attached
to each data point, and the prime indicates a derivative with respect to x. In this func-
tional, the first term is large if s(x) is wiggly, and the second term is large if s(x)
doesn’t pass close to the data points. (The form of the first term comes from a phys-
ical analogy: if the spline were made out of a real material, such as a thin strip of
wood or metal, the first term would be related to the total bending energy of the strip.)
The balance between these two terms is controlled through the weight parameters w i :
if the w i are small, the first term dominates, and the resulting spline approaches a
straight line (which happens to coincide with the least-squares linear regression line for
the data set). If the weights are large, the second term dominates, and the spline
approaches the interpolating spline (which passes exactly through all data points).
a
I’d like to thank Lucas Hart and Clark Gaylord for helpful correspondence regarding this topic.
J s [ ] s″ x ( ) ( ) 2 x d

w i s x i ( ) y i – ( ) 2
i
N

+ =

[[P295]]

=== 13.2 Logarithmic plots

Logarithmic scales are one of the most versatile tools in the graphical analyst’s tool-
box. I introduced them in section 3.4 and discussed how they work. Now let’s put
them into action.

Logarithmic scales serve three purposes when plotting:
•  They rein in large variations in the data.

•  They turn multiplicative deviations into additive ones.

•  They reveal exponential and power-law behavior.


==== 13.2.1 Large variations in data

To understand the meaning of the first two items, let’s study the daily traffic pattern at
a website. Figure 13.4 shows the number of hits per day over approximately three
months. There’s tremendous variation in the data, with alternating periods of high
and low traffic. During periods of high traffic, daily hit counts may reach close to half
a million hits but then fall to very little traffic shortly thereafter. On the scale of the
graph, the periods of low traffic seem barely different from zero, with little fluctuation.
Another way to think about the weights is to write w i = 1/d i 2 , where d i is a measure
for the uncertainty in the data of point i (such as the standard deviation in this point).
One would expect the spline to pass through the interval [y i -d i , y i +d i ] at x i . The higher
the confidence in one point, the smaller you can choose to make this interval, and
therefore the larger the weight w i will be. By choosing d i = 0 for one of the points, you
can even force the curve to pass through this point exactly, although you may let the
spline float more freely for the other points. In principle it’s possible to choose a dif-
ferent weight for each point, but if all points are known to the same accuracy, then
all weights should be the same. This is what was done for all examples in this book.
One important remark: the way J[s] is written in the example, the size of the second
term depends on the number of data points—if you double the size of the data set,
the size of the second term will be (approximately) twice as large. By contrast, the
first term does not depend on the number of data points. If the number of data points
grows, the second term will therefore become larger relative to the first one, and the
resulting spline will be more wiggly.

To maintain the original balance between wigglyness and closeness of approxima-
tion, the weights must be increased accordingly for data sets containing a larger num-
ber of points. Equivalently, you might want to take the number of points into account
explicitly by writing w i = u i /N , where u i is the actual weight and N is the number of
knots. With this choice for w i , the balance between both terms will be maintained
regardless of the number of knots in the data set. b
b
You can find more information on splines in chapter 1 of Handbook on Splines for the User
by E. V. Shikin and A. I. Plis (CRC Press, 1995).


[[P296]]
Figure 13.5 displays the same data, but now on a semi-logarithmic scale. The logarith-
mic scale helps to dampen the extreme variation of the original data set (two orders of
magnitude) so you can see the structure during both the high- and the low-traffic sea-
sons. That’s the first effect of logarithmic plots: they help to make data spanning
extreme ranges visible by suppressing high-value outliers and enhancing low-value
background.

Furthermore, you can see that the relative size of the day-to-day fluctuations is
about equal during both phases. The absolute size of the fluctuations is quite differ-
ent, but their size as a percentage of the average value is roughly the same (very
approximately, during low season, traffic varies between 2,000 and 20,000 hits a day, a
factor of 10; whereas during high season it varies between 30,000 and 300,000 hits a
day, again a factor of 10). That’s the second effect of logarithmic plots: they turn mul-
tiplicative variations into additive ones.

Figure 13.6 tries to demonstrate the last point in a different way. The bottom panel
shows the web traffic on consecutive days (like figure 13.4), displaying great seasonal
variance, but the top panel shows the ratio of the difference in traffic on consecutive
days divided by the actual value—(current day − previous day)/current day—which does
not exhibit a seasonal pattern. This is further proof that the daily fluctuation, viewed as
a percentage of the overall traffic, is constant throughout. The calculation for the top
panel can be performed as an inline transformation, by the way:
prv=40000
plot [0:365][-1:1] "webtraffic" u (y=($2-prv)/($2+prv), prv=$2, y) w l
0
50000
100000
150000
200000
250000
300000
350000
0 61 122 183 244 305
Hits per day
Day
Figure 13.4 Traffic patterns for a website. Daily hit count versus day of the year. Note
the extreme variation in traffic over time.


[[P297]]
1000
10000
100000
1×10 6
0 61 122 183 244 305
Hits per day
Day
Figure 13.5 The same data as in figure 13.4, but on a semi-logarithmic scale. Note how the
high-traffic outliers have been suppressed and the low-traffic background has been enhanced.
In this presentation, data spanning two orders of magnitude can be compared easily.
-1
-0.5
0
0.5
1
Relative change
0k
50k
100k
150k
200k
250k
300k
0 62 124 186 248 310
Hits per day
Day
Figure 13.6 Bottom panel: hits per day over time (as in figure 13.4); top panel: change in traffic
between consecutive days, divided by the total traffic. Note how the relative change (top panel)
doesn’t exhibit any seasonal pattern, indicating that the relative size of the variation is constant.

[[P298]]

==== 13.2.2 Power-law behavior

Finally, let’s look at a curious example that brings together two benefits of logarithmic
plots: the ability to display and compare data of very different magnitude, and the
ability to turn power-law behavior into straight lines. Mammals come in all shapes and
sizes, from tiny rodents (the smallest known land mammal is the Pygmy Shrew, which
weighs only a few grams, but some bats found in Thailand are apparently smaller still)
to the largest of whales (weighing several hundreds of tons). It’s a curious empirical
fact that there seem to be fixed relationships between different metabolic quantities—
basically, the larger an animal is, the slower its bodily functions progress. Figure 13.7
shows an example: the duration (in seconds) of a single resting heartbeat as a func-
tion of the typical body mass. The regularity of the data is remarkable, spanning eight
orders of magnitude for the mass of the animal. What’s even more amazing is how well
the data is represented by the simple function T ~ m 1/4 . This law isn’t limited to the
examples shown in the graph: if you added animals to the list, they’d also fall close to
the straight line (I didn’t just pick the best ones).

The existence of such scaling relations in biological systems has been known for a
long time and seems to hold generally. For example, it turns out that the typical lifetime
of a mammal also obeys a quarter-power scaling law relation against the body mass, lead-
ing to the surprising conclusion that the total number of heartbeats in the life of a sin-
gle organism is fixed—no matter what the typical resting heart rate is. (In case you care,
the number comes out to about 1.5 billion heartbeats during a typical lifetime.)
0.1
1
0.01 0.1 1 10 100 1000 10000 100000
1×10 6
Pulse duration [sec]
Weight [kg]
Human
Cat
Dog
Hamster
Monkey
Horse
Cow
Pig
Rabbit
Elephant
LargeWhale
Rat
Wolf
Figure 13.7 Allometric scaling: the duration of an average resting heartbeat as a
function of the typical body mass for several mammals. Note how the data points seem
to fall on a straight line with slope 1/4.


[[P299]]
These observations have been explained in terms of the geometrical constraints that
must exist in the vascular networks (the veins and arteries), which supply nutrients to
all parts of the organism. 3 As it turns out, you can derive the quarter-power scaling
laws starting from only three simple assumptions: that the support network must be a
space-filling fractal, reaching all parts of the organism; that the terminal capillaries
where nutrients are exchanged are the same size in all animals; and that organisms
have evolved in such a way that the energy required for the transport of nutrients
through their bodies is minimized. I think it’s amazing how such a powerful result can
be derived from such simple assumptions. But, on the other hand, we shouldn’t be
surprised: generally applicable laws (such as the quarter-power scaling in this exam-
ple) must stem from very fundamental assumptions, disregarding any specifics.
Let’s come back to figure 13.7. The double-logarithmic scales make it possible to
follow the data over eight orders of magnitude. (Had I used linear scales, all animals
except for the whale would be squished against the left side of the graph—literally
crushed by the whale.) So again, logarithmic scales can help to deal with data span-
ning a wide range of values. In addition, the double-logarithmic plot turns the power
law relationship T ~ m 1/4 into a straight line and makes it possible to read off the expo-
nent from the slope of the line. I explained how this works in detail in section 3.4 and
won’t repeat it here.

Finally, figure 13.7 is a nice example for the power of gnuplot’s with labels plot
style. The graph was generated using
plot [][:5] "mammals" u ($2/1000):(60/$3) w p pt 7,
➥ "" u ($2/1000):(60/$3*1.125):1 w labels
The first part of the command draws the symbols ( with points ); the second adds the
labels. Inline transformations are used to express the weight in kilograms (instead of
grams) and to transform the heart rate (given in beats per minute) into the duration
of each beat (measured in seconds). All the labels are shifted a bit upward so as not to
obscure the symbols. In this example, the vertical offset is multiplicative, because of the
logarithmic scale of the graph (remember: logarithms turn multiplicative offsets into
linear ones).


=== 13.3 Point distributions

Besides detecting relationships between quantities, you may want to understand how
data points that are somehow random are distributed. Are data points spread out evenly,
or are they clustered in a few spots? Are distributions symmetric, or are they skewed?
How much weight is contained in the tails of a distribution, compared to its center?
Let’s say you have a file containing a set of measurements. They can be anything:
interarrival times for requests at a web server, completion times of database queries,
weights of potatoes, heights of people—whatever. What can be said about them?
3
The original reference is the paper “A General Model for the Origin of Allometric Scaling Laws in Biology”
by G. B. West, J. H. Brown, and B. J. Enquist, Science 276 (1997): 122. Additional references can be found on
the web.


[[P300]]

==== 13.3.1 Summary statistics and box plots

Two commands will give a first answer: the stats command and the with boxplot style
(see sections 5.6 and E.2, respectively). Both share the advantage that they have no
adjustable parameters—they are as simple as can be. Both also share the disadvantage
that they lose a lot of information about the distribution of individual points, because
both aggregate the entire distribution into a handful of summary statistics. (A box-and-
whisker plot is after all nothing more than a graphical representation of the results
from running the stats command.)
In short: to get a first idea how the values in a new dataset are distributed, both of
these commands are convenient, because of their extreme simplicity. But both hide
too much information to develop a detailed understanding.


==== 13.3.2 Jitter plots and histograms

One easy way to get a visualization of a collection of random points is to generate a jit-
ter plot, which is really a one-dimensional scatter plot, but with a twist. The bottom part
of figure 13.8 was created by shifting each data point vertically by a random amount.
(The rand(0) function returns a random number in the range [0:1].) If I’d plotted
the data in a true, one-dimensional fashion, too many of the points would’ve over-
lapped, making it difficult to detect clustering. Such jittering by a random amount is a
good trick to remember whenever you’re creating scatter plots of larger data sets:
plot "jitter" u 1:(0.25*rand(0)-.35)
-0.4
-0.2
0
0.2
0.4
0.6
0.8
1
0 2 4 6 8 10
smooth frequency
smooth cumulative
Figure 13.8 Three ways to represent a distribution of random points: jitter plot
(bottom), histogram (with boxes), and cumulative distribution function (dashed line)

[[P301]]
You can see that the distribution of points is skewed. It’s strictly bounded by 0 on the
left, with points clustering around 1; and as you move to the right, points become
increasingly sparse. But it’s hard to say something more definite just by looking at the
jitter plot. For instance, is there a second cluster of points between 3 and 4? This does
seem possible, but it’s hard to tell for sure using this representation.
The next step when investigating the properties of a distribution usually involves
drawing a histogram. To create a histogram, you assign data points to buckets or bins
and count how many events fall into each bin. It’s easiest to make all bins have equal
width, but with proper normalization per bin, you can make a histogram containing
bins of differing widths. This is sometimes useful out in the tails of a distribution
where the number of events per bin is small.

Gnuplot doesn’t have an explicit histogramming function, but you can use the
smooth frequency functionality (see section 3.5.3) to good effect. Recall: smooth
frequency sorts the x values by size and then plots the sum of y values per x value.
That’s what you need to build a histogram.

The next example introduces a function bin(x,s) that takes two parameters. The
first parameter is the x value you’d like to bin, and the second parameter is the bin
width. The return value of the function is the position of the left edge of the bin—you
can use the binc(x,s) function for bins centered on the x value.

The smooth frequency feature forms the sum of all y values falling into each bin. If
all you care about is the overall shape of the histogram, you may supply any constant,
such as (1) ; but if you want to obtain a normalized histogram (one with a total surface
area equal to unity), you need to take into account the number of points in the sam-
ple and the bin width. You can convince yourself easily that the proper y value for a
normalized histogram is
1/(bin-width ⋅ total-number-of-points-in-sample)
You can use the with boxes style to draw a histogram (see figure 13.8), but you want to
fix the width of the boxes in the graph to coincide with the bin width. (By default, the
boxes expand to touch their neighbors, which leads to a faulty graphical representa-
tion if some of the internal bins are empty.) Choose a bin width of 0.1, and use the
stats command to find the number of points in the data set. The plot command
uses the binc() function, because the with boxes style positions its boxes centered at
the supplied position:
bin(x,s) = s*floor(x/s)
binc(x,s) = s*(floor(x/s)+0.5)
set boxwidth 0.1
stats "jitter" u 1 noout
plot "jitter"
➥ u (binc($1,0.1)):(1./(0.1*STATS_records)) smooth frequency with boxes
Figure 13.8 also includes a curve for the cumulative distribution function of the data set.
We’ll come back to it in section 13.3.4.


[[P302]]

==== 13.3.3 Kernel density estimates and rug plots

The apparent simplicity of the histogramming method hides some pitfalls. The first
concerns the width of the bins: make them too narrow, and the resulting histogram
will be bumpy; make them too wide, and you lose relevant features. There’s also ambi-
guity in regard to the placement of the bins: is the first bin centered at 0 (or any other
value) or flush left there? In particular for sparse data sets, the overall appearance of
the histogram can depend quite sensitively on these details!
A better method to generate distribution curves from individual data points goes
under the name kernel density estimation. Rather than count how many data points fall
into each bin, a strongly peaked but smooth function (a kernel) is placed at the loca-
tion of each data point. Then the contributions from all these curves are summed up
and the result is plotted. Mathematically, the kernel estimate f(x) for a data set consist-
ing of N points x i is
Here, K(x) is any smooth, peaked, normalized function, and h is the bandwidth: a mea-
sure of the width of the kernel function. A popular example is the Gaussian kernel:
As you already saw in section 3.5.2, gnuplot can generate such curves using the smooth
kdensity functionality. It works in much the same way as the smooth frequency fea-
ture discussed earlier:
plot "jitter" u 1:(1./STATS_records) smooth kdensity bandwidth 0.05
The first column specifies the location; the second gives the weight each point should
have. For a normalized histogram, this should be the inverse of the number of data
points—because the kernel functions are normalized themselves, you don’t have
to worry about the bandwidth at this point as you did for histograms using smooth
frequency . The bandwidth parameter (preceded by the bandwidth keyword) is
optional. If it’s omitted (or negative), gnuplot calculates a default bandwidth, which
would be optimal if the data were normally distributed. This default bandwidth tends
to be conservative (which means, rather broad).

Figure 13.9 shows several curves drawn using kdensity for the same data set you saw
in figure 13.8, for a variety of bandwidth parameters. Studying this graph carefully, you
may conclude that there is indeed a second cluster of points, located near 3.5. Note how
the choice of bandwidth can hide or reveal features in the distribution of points.
One more thing: figure 13.9 uses a different representation for the individual data
points. Instead of using symbols as in the jitter plot included in figure 13.8, this figure
f x ( )
1
N
--- -
1
h
-- -
i
N

K
x x i –
h
------------- -
 
 
=
K x ( )
1
2π
---------- -e
1
2
-- -x 2 –
=

[[P303]]
uses a rug plot along the bottom edge. Each data point is represented through a short,
vertical line. In gnuplot, this can be accomplished through the with vectors style:
plot [:11][-0.1:0.8] "jitter" u 1:(-0.1):(0):(0.05) t '' w vec nohead
I prefer jitter plots, because lines in a rug plot tend to obscure each other, making it
difficult to identify individual data points. But rug plots may give a somewhat neater
appearance to your graphs and appear less noisy.


==== 13.3.4 Cumulative distribution functions

Histograms and density estimates have the advantage of being intuitive: they show you
directly the probability for a certain value to occur. But they have some disadvantages
when it comes to making quantitative statements. For example, based on the histo-
gram in figure 13.8, it’s hard to determine how much relative weight is in the tail of
the distribution: how likely are values larger than 4 to occur? How about values larger
than 6? You can guess that the probability is small, but it’s hard to be more precise. To
answer such questions, you need to know the area under the histogram within certain
bounds. In other words, you want to look at the cumulative distribution function (or dis-
tribution function for short).

0
0.1
0.2
0.3
0.4
0.5
0.6
0.7
0.8
0 2 4 6 8 10
default
Bandwidth 0.3
Bandwidth 0.1
Figure 13.9 An alternative to histograms: kernel density estimates using smooth
kdensity . Curves for three different bandwidths are shown. A bandwidth of 0.3
seems to give the best trade-off between smoothing action and retention of details.
Note how it brings out the secondary cluster near x=3.5. Individual data points are
represented through the rug plot along the bottom.


[[P304]]
The value of the cumulative distribution function at position x is the fraction of
events that have occurred with x i less than x. In figure 13.8, I showed the distribution
function together with the histogram. To repeat: the value of the cumulative distribu-
tion function at position x is equal to the area under the (normalized) histogram from
its left border to position x.

Cumulative distribution functions are accessible using smooth cumulative . The
smooth cumulative feature is similar to smooth frequency : first all points are sorted in
order of ascending x value, and then the sum of all y values to the left of the current
position is plotted as a smoothed value. To obtain a normalized distribution function,
you must supply 1/number-of-points as the y value. In contrast to histograms or density
estimates, distribution functions don’t depend on a width parameter:
stats "jitter" u 1 noout
plot "jitter" u 1:(1./STATS_records) smooth cumulative
Cumulative distribution functions can be a little unintuitive at first, but they’re well
worth becoming familiar with. They make it easy to answer questions such as those
raised at the beginning of this section. From figure 13.8, you can immediately see that
there’s a 3% chance of finding a point at x > 6 and about a 15% chance for x > 4. You
can also find more proof for the second cluster of points between 3 and 4: here the
distribution function seems to make a jump, indicating an accumulation of points in
this interval.

The cumulative distribution function is also very important theoretically and often
the basis for further tests and calculations. The discussion of probability plots in sec-
tion F.6 is a good example and also shows how the results from smooth cumul can be
captured into a heredoc for further processing.


=== 13.4 Ranked data

Imagine that I give you a list of the countries in the European Union, together with
their land area (in square kilometers) and population numbers. How would you rep-
resent this information? How would you represent it graphically?
The particular challenge here is that the independent variable has no intrinsic ordering.
What does this mean?
Given the name of a country, the value of the area measure is fixed; hence the
name is the independent variable, and the area is the dependent variable. Usually, the
independent variable is plotted along the x axis and the dependent variable is
observed with it. But in this case, there’s no natural ordering of the independent vari-
able. Sure, you can order the states alphabetically by their names, but this ordering is
arbitrary and bears no relationship on the data. (You wouldn’t expect the size of a
state to change if you gave it a different name, would you?) Also, the ordering might
change if you were to translate the names to a different language. But the information
that is to be displayed depends on the areas and shouldn’t be affected by the spelling
of the country names.


[[P305]]
For data like this, the only ordering that’s intrinsic to the data is in the values of the
dependent variable. Therefore, a graphical representation of this data should be
ordered by the dependent variable, not the independent one. Such plots are often called
dotplots, but I tend to think of them as rank-order plots. Figure 13.10 shows an example.
If the input file is sorted by the appropriate quantity, you can generate such plots
easily using gnuplot’s facility for reading tic labels from the input file. Given an input
file containing the names and areas in two columns, such as this 4
Malta 316
Luxembourg 2586
Cyprus 9251
Slovenia 20273
...
the entire plot can be generated using the following command:
plot "europeanunion" using ($2/1000):0:ytic(1) w p pt 7
The ytic(1) function selects the values in column 1 as tic labels for the y axis (see sec-
tion 8.3.5); and the pseudocolumn 0, which evaluates the line number in the input
file, is used as the corresponding vertical coordinate (see section 4.4). The inverted y
range places the first line in the file at the top of the graph instead of the bottom.
4
The data can be found on the Wikipedia page for the European Union.

Malta
Luxembourg
Cyprus
Slovenia
Belgium
Netherlands
Denmark
Estonia
Slovakia
Croatia
Latvia
Lithuania
Ireland
CzechRepublic
Austria
Portugal
Hungary
Bulgaria
Greece
Romania
UnitedKingdom
Italy
Poland
Finland
Germany
Sweden
Spain
France
0 100 200 300 400 500 600 700
Area [1000 sq km]
Figure 13.10 A rank-order plot. Because there’s no natural ordering in the independent
variable (in this case, the country names), the data has been sorted by the dependent
variable to emphasize the structure in the data.


[[P306]]
This is the basic idea. You could plot the state names along the x axis instead, but
then you’d need to rotate the labels to make sure they didn’t overlap. Unfortunately,
rotating the labels by 90 degrees (so that they run vertically) makes them hard to read.
A good trick is to rotate them by some angle so that they run diagonally; but the initial
layout, with the names running down the y axis, is the easiest to read.

What if you want to show and compare multiple data sets, such as the land area
and the population? The best strategy is to declare a primary data set, which deter-
mines the ordering for all others. Figure 13.11 shows an example. The points of the
secondary data set (the population in millions) have been connected with lines to
make them stand out more. Additionally, the x axis has been scaled logarithmically,
which is often useful with dotplots of this sort. You can see that overall the population
count follows the area, but there are some notable outliers: the northern Scandina-
vian countries Sweden and Finland are thinly populated, whereas the so-called Bene-
lux countries (Belgium, Netherlands, and Luxembourg) have an exceptionally high
population density.

Dot- or rank-order plots are useful whenever the independent variable has no nat-
ural ordering. On the other hand, if the independent variable can be ordered—even
if it’s nonnumeric, such as the categories Strong Dislike, Dislike, Neutral, Like, and Strong
Like—you should use the information in your graphs and order data points by the
independent variable.

Malta
Luxembourg
Cyprus
Slovenia
Belgium
Netherlands
Denmark
Estonia
Slovakia
Croatia
Latvia
Lithuania
Ireland
CzechRepublic
Austria
Portugal
Hungary
Bulgaria
Greece
Romania
UnitedKingdom
Italy
Poland
Finland
Germany
Sweden
Spain
France
0.1 1 10 100 1000
0.1 1 10 100 1000
Area [1000 sq km]
Population [Millions]
Area
Population
Figure 13.11 A rank-order plot displaying a primary and a secondary data set for
comparison. The country names are sorted according to the primary data set (the
area); the points in the secondary data are connected by lines to make them easier
to distinguish. Note the logarithmic scale for the horizontal axes.


[[P307]]

=== 13.5 Pie charts

Pie charts are a way to visualize how an entity breaks down into its constituent parts.
Their strongest point (and the only reason to use them) is that, by construction, they
represent all components of the overall entity, without any pieces that might possibly
be missing. Aside from that, pie charts have many well-known problems. Specifically,
comparing the size of different components with similar magnitudes is difficult, as is
the representation of more than a handful of components. For such tasks, some vari-
ant of rank-order plot (see section 13.4) is usually a better solution.

Gnuplot doesn’t have pie charts built in, but they can be constructed through judi-
cious use of existing gnuplot features. Given the following data set
# Name Percent
A 55
B 25
C 10
D 7
E 3
you can generate the pie chart in figure 13.12 using the following commands:
set size square
set angles degrees
unset key; unset tics; unset border
beg(x) = (b=a, a=a+x, 360.*b)
end(x) = (c=c+x, 360.*c)
med(x) = (u=v+x/2, v=v+x, 360.*u)
a=b=c=u=v=0
plot [-1:1][-1:1]
➥ "pie-data" u (0):(0):(1):(beg($2/100.)):(end($2/100.)) w circ,
➥ "" u (0.75*cos(med($2/100.))):(0.75*sin(360.*u)):1 w labels
The challenge is that the with circles style requires the beginning and end angle of
each pie segment (each wedge). But the data set only gives the percentage for each
component, which corresponds to the angle enclosed (or subtended) by the wedge.
The function end(x) therefore keeps a running total of all percentages encountered
so far: this is the leading edge of the current slice. The function beg(x) does the same,
but it always reports the most recent value: this is the trailing edge of the current slice.
The function med(x) reports a value halfway between the leading and the trailing
edges: this is where the label is placed. Don’t forget to set (or reset) all variables to 0
before each plot!




[[P308]]

=== 13.6 Organizational issues

The basic techniques of graphical analysis don’t just range over types of graphs and
when to use them, but also include some recurring administrative tasks and organiza-
tional questions, mostly relating to the handling of data sets and the files containing
them. In this section, I’ll make some recommendations on that.

I also want to stress that graphs are prepared for different purposes. Graphs that
are prepared merely for personal use and discovery require little polishing, but this
isn’t true for presentation graphics that are intended to communicate results to an
audience. Presentation graphics are important: they document completed work. I’ll
close this section with some recommendations for the preparation of attractive and
valuable presentation graphics.


==== 13.6.1 The lifecycle of a graph

It’s helpful to have a sense for the life expectancy of your graphs: short (seconds to
days, for interactive exploration and ongoing work), intermediate (days to weeks, for
intermediate results), and long (weeks to infinity, for final results and public con-
sumption). Treat graphs differently, based on their expected lives: for short-lived
graphs, ease of use is the predominant concern. Nothing should stop you from
redrawing the graph, changing the range or plotting style, or applying a transforma-
tion. Any amount of polishing is too much.

A
B
C
D
E
Figure 13.12 A pie chart

[[P309]]
For graphs in the intermediate bracket, polishing is still not required, but contex-
tual descriptions (title, units, key) become important: not necessarily to communicate
such details to others, but to serve as reminders to yourself, should you come back to
your work after a few days or weeks of absence. (It’s amazing how quickly even essen-
tial details can be forgotten.)
For long-lived graphs, and those published or presented publicly, different rules
apply. Such graphs belong to presentation graphics proper, and I’ll have a bit more to say
about that topic in section 13.7.


==== 13.6.2 Input data files

Data files should be reasonably self-contained and self-explanatory. Let me explain.
When I was looking for data sets to use as examples for this book, I checked out
quite a few publicly accessible data-set libraries on the web. In one of them, I found a
data set that, according to the description on the website, contained annual sunspot
numbers for a certain specified range of years. I downloaded the corresponding file
together with several others data sets from the website, and only then started to exam-
ine the contents of each file in detail.

Each file consisted of only a single column, containing the dependent variable—
and nothing else! Looking at these files alone, it was no longer possible to determine
which one contained what, be it sunspot numbers or the price of pork bellies, or some
other data set. Because the independent variable was missing as well, I couldn’t even
tell whether I was looking at monthly or yearly data, and, in any case, for what time
frame. In other words, the sheer act of downloading a file turned it into instant gar-
bage, by irrevocably separating it from the information that gave it meaning!
To avoid such embarrassments, it’s generally a good idea to keep the basic informa-
tion that’s necessary to understand the data contained in the data set as part of the data
file, typically as a block of comments near the beginning of the file. (I find it more con-
venient to have this information at the top of the file than at the end.) The informa-
tion contained in such a header is more or less the same information you’d put onto a
graph in the form of textual labels and descriptions. Here are some pointers:
•  Most important is a description of the file format. It should at least include a
description of the content of all columns, together with the units used. It’s nice
if it also contains a brief overall headline description of the file. If ancillary
information would be required to re-create the data set, it should also be
included: things such as parameter settings for the experimental apparatus, or
starting values and the version number for the simulation program used to cal-
culate the data. If the data was downloaded from the web, I always make sure to
keep a reference to the source URL in the file.

•  I also recommend being generous when it comes to the inclusion of redundant
information. The sunspot data I mentioned earlier is an interesting example.
The lack of data for the independent variable made it more difficult to use and
understand the contents of the file. Given the starting value and the increment,

[[P310]]
it’s trivial to reproduce the values, but it’s generally much more convenient to
have all this information available already.

•  The ability to reproduce a data file if necessary is critical. If you combine data
from several sources into a single data set, or manually edit a data set to remove
glitches, keep the originals. And stick a note in the combined file explaining its
origins. More likely than not, you’ll have to come back and do it all over again
at some point. Remember: if you delete the originals, they’re gone forever.
•  Unless there are extenuating circumstances (and even in most cases when there
are), prefer plain text files over binary formats. The advantages of plain text are just
too numerous: plain text is portable across all platforms (despite the annoying
newline character issue) and can be manipulated using standard tools (editors,
spreadsheets, scripting languages). A corrupted text file can be repaired easily—
not so for a binary file. A text file is by construction more self-explanatory than
a binary file will ever be. And finally, text files compress nicely and therefore
don’t take up much disk space.

Some statistics packages keep their data sets in proprietary binary formats. I find the
constant need to invoke a special, proprietary program just to view the contents of a
file a major inconvenience, and the dependence on the operations provided by the
package for all data-manipulation tasks is an unwelcome hindrance to my work.
If you have a legitimate need for a binary file format, at least use an existing stan-
dard, for which quality libraries are easily available. Ad hoc binary formats are almost
certainly a bad idea.

Something we don’t tend to think of often are clerical errors: typos, incorrectly
named files, data entered into the wrong column, wrongly recorded units—that sort
of thing. They’re apparently more common than you might think: Cleveland and
Wainer 5 give interesting examples of odd entries in well-known data sets and provide
convincing arguments that explain these entries as due to clerical errors, such as the
interchange of digits or the inadvertent switching of columns for the data points in
question.

Finally, make sure critical data is backed up frequently. (I once accidentally deleted
data that had taken weeks to compute. Praise your system administrators!)

==== 13.6.3 Output files

The most important advice (again) is to make plots reproducible. Don’t just export to
a printable format and move on. It’s almost guaranteed that you’ll want to redraw the
graph, with minor modifications, as more data becomes available or the understanding
of it grows. Always save the plotting commands and options to a file before moving on.
Use an appropriate file format. Bitmaps (such as PNG ) are simple and portable
but can’t be resized without loss of quality. Whenever there is a chance that you (or
5
See section 6.4 in Visualizing Data by W. S. Cleveland (Hobart Press, 1993) and the introduction to Graphic
Discovery by H. Wainer (Princeton University Press, 2005) for details.


[[P311]]
whoever is using your graphs) might need to resize a graph, make sure to use a vector
format (such as PDF ). This is particularly true for print publishing: not only will
graphs routinely be resized, but only vector formats will take advantage of the higher
resolution offered by printing devices.

Decide whether you need to prepare your graphs in color, black and white, or half-
tone (grayscale). Consider the use of stylesheets (see section 12.6) to target graphs to
different display channels. I routinely create different versions of the same graph
(using different stylesheets) so I’m set for all possible applications. Adopting a nam-
ing convention helps to keep different versions organized.


=== 13.7 Presentation graphics

This book isn’t primarily about presentation graphics, but about graphical analysis.
There’s already plenty of advice on presentation graphics, and you’ll have no difficulty
finding it, but not much of it appears to be based on rigorous studies. Nevertheless,
the advice is often worded assertively, if not emotionally, and there’s an unfortunate
(and ultimately unhelpful) tendency toward the derision of work considered inade-
quate. Given the lack of rigorous evidence, tastes and personal opinions naturally play
a large role.

I don’t intend to add to this debate. Instead, I’d like to present a list of reminders
concerning details that are easily (and inadvertently) forgotten when preparing a
graph for publication. Most of them concern the inclusion of contextual information,
which can’t be inferred from the graph itself, but which is nevertheless important for
understanding. By publication I mean any form of wider distribution of the graph: any-
thing leaving the immediate group of coworkers who were involved in its creation,
and in particular any use with a long expected lifetime.

These aren’t commandments, but reminders. Use your own good judgment:
•  Axes should be labeled. The labels should describe the quantity plotted and
should include the units of measurement. Don’t leave this information to a sep-
arate figure caption. Keep in mind that the graph may be separated from its
context, in which case information contained only in the caption may be lost.
The caption should be used to describe salient features of the graph, not to give
vital information about the plotted data.

•  Choose meaningful, self-explanatory labels. If you must use abbreviations that
aren’t in common use, explain them, ideally on the graph itself, not in the cap-
tion (see previous item). (In a recent book on data graphing, I found a figure
of a histogram in which the buckets were labeled Married, Nvd, Dvd, Spd, and
Wdd. I marveled about the possible meaning of Nvd for quite a while. The
abbreviations were explained neither in the text nor in the figure caption.)
•  If there’s more than one line in a graph, explain what each of the lines repre-
sents, either through a key or by using an explicit label referring to each line. If
you use a key, make sure the key entries are meaningful.


[[P312]]
•  If there’s ancillary information, consider placing it onto the graph, rather than
supplying it only in the caption.

•  If at all possible, make sure text labels, including the key, don’t obscure the
data. If necessary, move or rewrite them.

•  When publishing a false-color plot, always include the associated color scale in
the graph. No matter how intuitive the chosen palette may appear to you,
remember that there’s no universal and unambiguous mapping from numbers
to colors and vice versa.

•  Describe the meaning of error bars. Do they show the calculated standard devi-
ation of the sample population? Do they represent interquartile ranges? Or do
they indicate the limits of resolution of your experimental apparatus? This
information can’t be inferred from the graph but must be explained through
textual information.

•  Use an appropriate measure of uncertainty. Don’t show standard deviations for
highly skewed or multimodal populations just because they’re easy to calculate.
•  Choose meaningful plot ranges. The graph should display the relevant part of
the data, and the data should make use of the entire available space. It may be
necessary to use more than one graph to convey all the relevant detail: it isn’t
unreasonable to have one graph to exhibit the overall shape of the data and
one that zooms in on a particular region at greater resolution. Keep in mind
that the relevant information in a data set is sometimes the trend and some-
times the absolute value. Make sure the chosen plot range is appropriate given
the context.

•  Consider logarithmic scales if the variation in the data is too great to be repre-
sented otherwise.

•  Don’t be shy about choosing a different font if the default font looks ugly. Given
the importance of textual information on a graph (labels, tic marks, keys),
make the necessary effort to ensure that all text is clearly readable even after
the graph has been reproduced and possibly reduced in size a few times. (On
the other hand, making labels too big or too bold can easily ruin the overall
appearance of a plot. Experiment!)
In general, sans serif fonts (such as Helvetica) are preferred for standalone
pieces of text, whereas serif fonts (such as Times Roman) are considered more
suitable for body text. Because labels on a graph tend to be short, this suggests
using a good sans serif font in plots. (I also find that sans serif fonts enhance the
visual clarity of a graph, whereas serif fonts don’t, but others may disagree.
Judge for yourself.)
•  Use an appropriate aspect ratio. Human perception seems to have an affinity to
figures with an aspect ratio of roughly 10:7, in landscape orientation (that is,
wider than tall). In particular, it’s generally not a good idea to use a square
graph unless the symmetry of the data demands it.


[[P313]]
•  Don’t use bitmapped graphics formats ( PNG , GIF , JPG ) in print publications.
Use vector formats such as PDF , PostScript, and EPS instead.

•  Proofread your graphs. Common error spots include typos in textual labels,
switched data sets or interchanged labels, and omitted qualifiers (milli-, kilo-,
and so on) for units.


=== 13.8 Summary

Understanding data with graphs typically involves certain recurrent tasks and ques-
tions. How one quantity depends on another is such a question; how a bunch of data
points are distributed is another. Other recurrent problems have to do with data that
spans many orders of magnitude, and data that isn’t strictly numeric.

In this chapter, we discussed the standard types of graphs to investigate such ques-
tions, and showed how to create them using gnuplot. All these methods and plots are
very general—in the next chapter, we’ll concentrate on some more specific problems
and explore them in depth.


[[P314]][[ch14]]

== Chaper 14 Topics in graphical analysis
The previous chapter discussed some fundamental graphical methods that are very
generally useful. In this chapter, I’ll select a few tasks that are more specific and
explore them in greater depth.

Because of their immense practical importance, our first topic will be the han-
dling of time series. In particular, you’ll see some clever ways to smooth a time
series using only gnuplot commands. The next topic concerns multivariate data
sets: data sets with more than two or three different attributes. A variety of tech-
niques are available for such data, and some of gnuplot’s relatively new features
facilitate the visual exploration of such data.

Next, we’ll discuss ways to enhance the visual perception of graphs. You can aid
analysis and discovery by preparing graphs such that noteworthy features are more
easily recognized. This topic isn’t frequently discussed, but some awareness of the
issues involved can greatly improve your results.

This chapter covers
•  Techniques for time-series plots
•  Techniques for multivariate data sets
•  Techniques to improve visual perception

[[P315]]

=== 14.1 Techniques for time-series plots

Time-series plots are probably the most common graph in practice: whenever you want
to monitor a quantity, you’re dealing with a time-series plot of some form. This section
introduces some operations that are frequently useful when dealing with time series
and shows you how to coax gnuplot into performing those operations.


==== 14.1.1 Plotting an Apache web server log

Technically, a discrete time series consists of measurements at equally spaced time intervals.
The requirement that all time steps are of the same size is important: several time-
series operations and transformations rely on this property. 1
But raw data is frequently not of that form. Web server logs (and other event logs,
generally) merely record the timestamp when an event occurred—they’re asynchro-
nous. Turning this data into a (discrete) time series means counting the number of
events per (equally sized) time interval.

In general, I strongly suggest that you do this kind of data munging outside of gnu-
plot, using the programming language of your choice. But in a pinch, it can be done
with gnuplot. The following listing shows the beginning of an Apache web server log
file (lines are truncated on the right). 2
64.242.88.10 - - [07/Mar/2004:16:05:49 -0800] "GET /twiki/bin/edit/Main/Doub
64.242.88.10 - - [07/Mar/2004:16:06:51 -0800] "GET /twiki/bin/rdiff/TWiki/Ne
64.242.88.10 - - [07/Mar/2004:16:10:02 -0800] "GET /mailman/listinfo/hsdivis
64.242.88.10 - - [07/Mar/2004:16:11:58 -0800] "GET /twiki/bin/view/TWiki/Wik
64.242.88.10 - - [07/Mar/2004:16:20:55 -0800] "GET /twiki/bin/view/Main/DCCA
...
The timestamp is in the fourth column, and gnuplot’s time-series mode is required to
parse it properly. The timestamp must be truncated to the desired interval for the
time series. Then the number of events in each interval must be counted. You can use
smooth frequency (see section 3.5.3) for the latter. When truncating the timestamp,
keep in mind that gnuplot treats it as a string, so you need to use string operations for
all manipulations. The next listing truncates the timestamp to the hour: that is the
step size of the resulting time series (see figure 14.1).

set xdata time
set timefmt "[%d/%b/%Y:%H:%M:%S"
set xtics format "%d%b\n%H:00" rotate
set ylabel "Hits per hour"
plot "access_log" u (strcol(4)[1:15] . ":00:00"):(1) s f w l
1
If observations occur asynchronously, so that the intervals are of varying sizes, the data is said to form a contin-
uous time series. I recommend reserving the term time series for sets of equally spaced observations only, and
speaking of an (asynchronous) event stream otherwise.

Listing 14.1 Part of a web server log; incomplete data for figure 14.1
2
You can find the complete file at www.monitorware.com/en/logsamples/apache.php.
Listing 14.2 Commands for figure 14.1 (file: access-log.gp)
Turns on time-series mode
The left bracket is part of the format.

Truncates the
timestamp to the
first 15 characters

[[P316]]
Because this method relies on gnuplot’s timestamp parsing, it’s rather brittle and
doesn’t deal well with missing or malformed entries in the log file. If you encounter
such problems, it’s probably easiest to preprocess the raw data in a general program-
ming language.


==== 14.1.2 Smoothing and differencing

The transformation most frequently applied to a time series is probably some form of
smoothing, to remove noise and bring out the underlying trend more clearly. Another
often useful operation is the differencing of a time series, wherein the original data is
replaced by the difference between any two consecutive observations. Using session
variables and the comma operator, these tasks can be accomplished as part of a plot
command.

.EXPONENTIAL SMOOTHING IN GNUPLOT
*****
*****
Probably the most familiar smoothing methods are the floating and trailing averages,
which replace each data point with the average over some number of adjacent data
points. In the first case, the averaging interval is symmetrical, which means the
smoothed curve can never extend all the way to the most recent value in the time
series; for this reason, the trailing average uses a one-sided interval. Both methods
have some problems, not the least of which is that they need to keep track of all the
data points in the averaging interval individually.

An often more favorable and much simpler smoothing method is known as expo-
nential smoothing or the Holt-Winters method. It replaces each data point not with the
average, but with the following quantity:
0
20
40
60
80
100
120
07Mar
12:00
08Mar
00:00
08Mar
12:00
09Mar
00:00
09Mar
12:00
10Mar
00:00
10Mar
12:00
11Mar
00:00
11Mar
12:00
12Mar
00:00
12Mar
12:00
Hits per hour
Figure 14.1 Web traffic (hits per hour). Compare listing 14.2.


[[P317]]
s[t] = a * x[t] + (1-a) * s[t-1]
Here, s[t] is the smoothed value at time step t , and it’s calculated as a mixture
between the observed value x[t] at that time and the most recent smoothed value
s[t-1] . The smoothing parameter a is a number between 0 and 1: the closer to 1, the
less the data is smoothed.

Exponential smoothing can be implemented as an inline transformation in
gnuplot:
s=0; a=0.5
plot "data" u 1:(s=a*$2 + (1-a)*s) w l
This works because the value of an assignment expression is the assigned value. It may
be convenient to bundle the operation into a function, as in the following listing (also
see figure 14.2).

hw(x,a) = a*x + (1-a)*s
s=1; plot "unsmoothed" u 1:2 w l, "" u 1:(s=hw($2,0.2)) w l lw 2
It’s important that the variable s is initialized before the plot command. For best
results, it should be initialized to a value that is similar to the first value in the data set.
Listing 14.3 Single exponential smoothing: see figure 14.2 (file: smoothing.gp)
0.7
0.75
0.8
0.85
0.9
0.95
1
1.05
1.1
1.15
0 20 40 60 80 100
data
smoothed
Figure 14.2 A noisy time series and a smoothed trend line. The trend was calculated using
single exponential smoothing: s=a*x + (1-a)*s , with a smoothing parameter of a = 0.5 .

[[P318]]

TIP: Exponential smoothing is an exceedingly simple yet robust and versatile
method to smooth a time series and bring out an underlying trend. It can be
implemented using a convenient inline transformation in gnuplot. Don’t
forget that the temporary variable must be initialized before invoking the plot
command.

.DOUBLE EXPONENTIAL SMOOTHING
*****
*****
Single exponential smoothing (as in listing 14.3) works best for stationary time series
that don’t exhibit a long-term trend. If a trend is present, the smoothed curve tends to
lag behind and doesn’t constitute a good approximation to the raw data. For data sets
that include a trend, it may therefore be necessary to use a smoothing scheme that
explicitly includes a trend. One such method is double exponential smoothing:
s[t] = a*x[t] + (1-a)*(s[t-1] + u[t-1])
u[t] = b*(s[t] - s[t-1]) + (1-b)*u[t-1]
Here, s[t] is the smoothed value at time step t , and u[t] is the smoothed trend at the
same time step. There are now two smoothing parameters, a and b , for the value and
the trend, respectively. This method, too, can be implemented as an inline transfor-
mation in gnuplot:
a=0.5; b=0.5
s=0; u=0; q=0
plot "data" u 1:(s=a*$2+(1-a)*(s+u), u=b*(s-q)+(1-b)*u, q=s) w l
Obtaining a good approximation now requires finding suitable values for both smooth-
ing parameters, a and b . This may involve a fair bit of trial-and-error experimentation!
Again, the formulas can be wrapped into a function:
hw2(x,a,b) = (s=a*x+(1-a)*(s+u), u=b*(s-q)+(1-b)*u, q=s)
s=0; u=0; q=0
plot "data" u 1:(s=hw2($2,0.5,0.5)) w l
Keep in mind that a gnuplot function doesn’t create a scope for local variables: all
variables are global. The function finds the variables it writes to (such as s , u , and q ) as
session variables in the current gnuplot session. It’s a mistake to supply such variables
as arguments to the function. But because the function expects to find these variables
in the gnuplot session, it’s essential that the variables be created (that is, initialized)
before the function is invoked.

.DIFFERENCING A TIME SERIES IN GNUPLOT
*****
*****
Another transformation that is often useful is to difference the time series. This
amounts to replacing each entry in the series with the difference between two consec-
utive values; the resulting series is shorter by one record.

In gnuplot, this can be accomplished through an inline transformation as well:
u=0
plot "data" u 1:(v=$2-u, u=$2, v) w l

[[P319]]
This works because gnuplot treats the comma ( , ) as an operator, similar to the way
the C programming language does. It separates different expressions, evaluating each
in turn (left to right), and returns the value of the last (rightmost) one.
Using the comma operator, it’s possible to define gnuplot functions comprising mul-
tiple statements. Traditionally, the body of a gnuplot function had to consist of a single
expression, but the comma operator provides a way to circumvent this limitation. You
saw an example in the previous section on double exponential smoothing, in the defini-
tion of the function hw2(x,a,b) = (s=a*x+(1-a)*(s+u), u=b*(s-q)+(1-b)*u, q=s) .
TIP: The comma operator lets you combine multiple statements into a single
expression. Statements are evaluated left to right, and the value of the right-
most statement is returned as the value of the entire expression.


==== 14.1.3 Monitoring and control charts

One of the most common applications of time series and time-series graphs is the
monitoring of a metric over time—usually to detect whether the observed system is
behaving as expected. Two tasks commonly arise in such applications: data needs to
be normalized, so that the behavior can be compared across different metrics. Addi-
tionally, there’s often an interest in identifying unexpected behavior, such as outliers
and drifts. Let’s discuss them in turn.

.MAKING DATA COMPARABLE
*****
*****
Imagine that you’re in charge of some operation. It may be a factory or production
plant, it may be a data center, or it might even be a sales department. What matters is
that you want to monitor the most relevant metrics constantly.

To keep things simple, let’s assume it’s a manufacturing operation where just three
parameters really matter: overall productivity (units per hour), the completion time
for each unit (in minutes), and the defect rate (the ratio of defective units to the total
number of units produced). You might want to plot them together on a control chart
so you can immediately see if one of them starts running out of the allowed zone. But
most of all, you want to be able to compare them against each other: is one parameter
consistently performing better than the others? Is one of the parameters on a slippery
slope, getting worse and worse, relative to the others? And so forth.

A naive way to achieve this effect is to plot the three parameters in a single chart.
The result is shown in figure 14.3 and is probably not what you want!
The problem is that the three parameters assume very different values: productiv-
ity is typically around 10,000 units per hour, assembly time is on the order of an hour,
and the defect rate should be very, very small. Before you can compare them, you
therefore need to normalize them.

Making metrics comparable by normalizing them usually involves two steps: first,
they are shifted by subtracting a constant offset (such as a long-term average), and then
they are rescaled by dividing them by their typical range of values (as expressed in the
standard deviation, for example). The resulting normalized metrics are all centered
on or near zero, and their fluctuations are of roughly unit size. (Also see figure 14.4.)

[[P320]]
0
2000
4000
6000
8000
10000
12000
0 20 40 60 80 100 120 140 160
Productivity (Units per Hour)
Completion Time (Minutes)
Defect Rate (Defects per Thousand)
Figure 14.3 A control chart showing three very different quantities simultaneously.
What’s wrong with this picture?
-1.5
-1
-0.5
0
0.5
1
1.5
0 20 40 60 80 100 120 140 160
Productivity (normalized)
Completion Time (normalized)
Defect Rate (normalized)
Figure 14.4 A control chart showing normalized metrics. The data is the same as
in figure 14.3.


[[P321]]
More generally, normalizing metrics always involves a linear transformation of the form
where m is a measure for the typical value of the metric in question, and s is a measure
for the typical spread or range of values. If the metric is well-behaved, with relatively
regular and symmetric fluctuations, then the mean and standard deviation are popu-
lar choices for m and s; but if the metric is strongly affected by outliers, then the
median and the interquartile range may be more robust choices. Another possibility is
to use the smallest possible value for m and the range between the greatest and the
smallest value for s: the resulting normalized quantity isn’t centered on zero but is
restricted to the unit interval.

Because normalization involves rescaling by the typical range of values, the result-
ing quantities are all dimensionless and are therefore directly comparable (in contrast
to the original data, whose numerical values depended on the units of measure that
were used).

.IDENTIFYING OUTLIERS
*****
*****
Identifying outliers is in some ways a complementary activity to normalizing data,
because it amounts to finding data points that are different than the rest. When you’re
dealing with time series, there is one additional issue: the baseline itself is changing
constantly!
In the context of time-series analysis, an outlier is a data point that is further away
from the trend than is typical. In the absence of other information about the data, the
smoothed data is the best guess at the true trend, and is therefore used as a baseline.
Identifying outliers in a time series thus involves three steps:
1 Establish a baseline by finding a smooth trend for the time series.

2 Find the range of typical deviations of the raw data from the trend.

3 Tag as outliers those records that differ by more than the typical range from the
trend.

Figure 14.5 shows the situation after the first step. The data consists of the daily num-
ber of calls made to a call center, and a trend has been added using single exponential
smoothing:
s=0; a=0.25
plot "callcenter" u 1:2 w l, "" u 1:(s=a*$2+(1-a)*s) w l lt 3 lw 2
The next step involves finding the typical range of the fluctuations of the raw data
around the trend. It can be found using the stats command:
s=0; a=0.25
stats "callcenter" u 1:(s=a*$2+(1-a)*s, $2-s)
It’s important that the last expression in the using expression is $2-s : this is the
momentary deviation of the actual data from the smoothed trend. For simplicity, I used
z
x m –
s
------------- =

[[P322]]
the standard deviation (as reported by stats ) as a measure for the range—for this
data set, it doesn’t differ much from the interquartile range. The value of the standard
deviation is roughly 21, and I chose to label all records that differ by more than twice
that as outliers.

Figure 14.6 shows the data together with the trend, as before. Outliers as identified
by the foregoing procedure are marked with symbols, and the typical range of fluctua-
tions is indicated using a grey band. The complete plot command is as follows:
s=0; a=0.25
plot "callcenter" u 1:2 w l,
➥ "" u 1:(s=a*$2+(1-a)*s) w l lt 3 lw 2,
➥ "" u 1:(s=a*$2+(1-a)*s, abs($2-s)>2*STATS_ssd_y?$2:NaN) w p lc 2 pt 7,
➥ "" u 1:(s=a*$2+(1-a)*s, s+2*STATS_ssd_y):(s-2*STATS_ssd_y)
➥ w filledc fs transparent solid 0.5 lc rgb "dark-grey"
.CUSUM PLOTS
*****
*****
Occasionally, you may find yourself monitoring a quantity that has a well-defined target
value (or setpoint in control-theory lingo): for instance, you may want to keep a power
supply at a precisely determined temperature. In such cases, it’s essential to detect early
whether the metric has drifted away from its setpoint. This may be difficult, because
any noise in the data is likely to obscure a small but systematic change quite effectively.
Consider figure 14.7. Would you say that the system has undergone any change from its
0
50
100
150
200
250
300
350
400
450
0 50 100 150 200 250 300 350 400 450
Calls
Days
Data
Smoothed
Figure 14.5 Number of daily calls to a call center. The figure shows the raw data and
the smoothed trend line.

Initializes temporary variables
Raw data
Smooth trend
Outliers
Grey band

[[P323]]
setpoint at y=5 during the observed interval? (The horizontal lines at y=3 and y=7 are
intended to indicate the permissible range for the observed metric.)
The trick is to amplify the effect by keeping an accumulating sum of all deviations
from the intended setpoint. As long as the system is centered on the correct value, the
deviations will cancel each other out. But a persistent deviation, even if it’s small, will
quickly lead to the build-up of noticeable error in the cumulative sum. Plotting this
quantity in a cusum chart provides a low-tech yet remarkably sensitive diagnostic instru-
ment to spot even small but persistent deviations from the setpoint.

In gnuplot, you can obtain a cusum chart through a simple inline transformation.
I used the following commands to create figure 14.8, which clearly shows that some-
thing changed near time step 15:
setpoint = 5
s=0; plot [][-1:11] "cusum" u 1:2 w lp pt 7, "" u 1:(s=s+($2-setpoint)) w l
In this case, the data has been created synthetically as Gaussian noise, with mean μ =5
and standard deviation σ =1 for the first 15 observations, but with mean μ =5.5 for the
subsequent data points. Looking at the raw data in figure 14.7 doesn’t reveal this per-
manent shift; even comparison with the reference lines above and below doesn’t sug-
gest any trouble. But the cumulative error in figure 14.8 is a dead giveaway!

-50
0
50
100
150
200
250
300
350
400
450
0 50 100 150 200 250 300 350 400 450
Calls
Days
Data
Smoothed
Outliers
Figure 14.6 Same data as in figure 14.5. In addition to the smoothed trend line, the
region of normal fluctuations is indicated (shaded); outliers outside this region are
indicated with symbols. (See the text for details.)

[[P324]]
0
2
4
6
8
10
0 5 10 15 20 25 30
Observed metric
Time
Figure 14.7 A control chart. The target value for the observed metric is 5. The horizontal
lines indicate the permitted range around the setpoint.

0
2
4
6
8
10
0 5 10 15 20 25 30
Observed metric
Time
Data
Cusum
Figure 14.8 Same data as in figure 14.7, but shown together with the cumulative
deviation from the intended setpoint of 5. The sudden and persistent increase in the
cumulative error indicates that the system is shifted away from its target value—even
though this isn’t immediately visible in the raw data.


[[P325]]
When using cusum charts, the cumulative error shouldn’t be calculated “since the
beginning of time.” Even when the system is perfectly centered on its setpoint, the
cumulative error will exhibit arbitrarily large deviations in the long run. For this rea-
son, the cumulative error should be reset frequently and calculated over only a rela-
tively small number of recent observations (a few dozen).


==== 14.1.4 Changing composition and stacked curves

As a final example of a time-series problem, let’s consider a situation where the com-
position of an aggregate changes over time, while at the same time, the magnitude of
the entire aggregate also changes. The total human population, for example, changes
over time—but so does its breakdown by continent. Representing both aspects (over-
all size and composition) simultaneously is a difficult problem. This section intro-
duces four complementary solutions. This will also give me an opportunity to
demonstrate gnuplot’s for and sum constructs. (See the next listing—multiplot mode
will be discussed in section E.1.)
set xtics 26
set mxtics 2
set xrange [0:150]
set multip layout 2,2 rowsfirst margins 0.1,0.95,0.15,0.9 spacing 0.1,0.05
set key horizontal samplen 2 at screen 0.55,0.95 width -7 center
set xtic format ""
set ylab "Absolute" offset 1,0
tx(k) = (k==2 ? 'Product 1' : ''.k-1)
plot for[k=2:5] "composition" u 1:k t '' . tx(k) w l
unset ylab
unset key
plot for[k=2:5] "composition" u 1:(sum[j=2:k] column(j)) w l
set xtic format "%g"
set xlab "Individual"
set ylab "Fractional" offset 1,0
plot [][0:.6] for[k=2:5] "composition"
➥ u 1:(column(k)/(sum[j=2:5] column(j))) w l
unset ylab
set xlab "Stacked"
plot [][0:1.025] for[k=2:5] "composition"
➥ u 1:((sum[j=2:k] column(j))/(sum[j=2:5] column(j))) w l
unset multiplot
Listing 14.4 Commands for figure 14.9 (file: composition.gp)
Turns on
multiplot mode
Upper
left:
individual
product
numbers
Uses a function to
supply a description
for key entry
Upper right:
stacked product
numbers. Uses
the sum feature.

Lower
left:
individual
fractions
Divides by the
sum over all
products
Lower
right:
stacked
fractions
Divides the
sum by the
overall sum
Turns off multiplot mode

[[P326]]
Let’s consider a company that manufactures four products, numbered 1 through 4.
The absolute weekly production numbers (in thousands of units) for each product
separately are shown in figure 14.9, upper left. Such a plot makes it easy to follow the
behavior of each product individually, but as the number of products grows, such a
plot can become cluttered. Moreover, it isn’t easy to see how total production changes
over time. You could add a curve, but it would obviously be on a very different scale
than the individual contributions. Using a second vertical scale (one for the individual
numbers and one for the totals) is possible but leads to even more clutter.
For these reasons, you occasionally see the data represented in a stacked plot, as in fig-
ure 14.9, upper right. Here, the numbers for all products have been stacked on top
of one another, so that the curve for (say) product 2 represents the total manufac-
tured output for products 1 and 2 combined. By construction, lines in such plots
never cross, and hence the graphs always have a neat appearance—which makes
them popular in general-interest publications. Nevertheless, they have significant
problems. Only two curves are easy to interpret: the bottom one (product 1) and the
top one (total production). It’s exceptionally hard in such a stacked graph to esti-
mate how the contributions from the individual components change over time. For
0
0.2
0.4
0.6
0.8
1
1.2
Absolute
Product 1 2 3 4
0
0.5
1
1.5
2
2.5
3
0
0.1
0.2
0.3
0.4
0.5
0.6
0 26 52 78 104 130
Fractional
Individual
0
0.2
0.4
0.6
0.8
1
0 26 52 78 104 130
Stacked
Figure 14.9 Four different ways to present changes in composition. Each line corresponds to
the number of units produced for one of four different products. The top row shows absolute
numbers of units produced; the bottom row shows fractions relative to total production. In the
left column, each line is drawn separately; in the right column, the lines are stacked, giving a
cumulative view into the data. See listing 14.4.


[[P327]]
example, how much of the sudden increase in total production after week 130 is due
to product 4? It’s basically impossible to tell from this graph—you have to go back to
the previous panel. Similarly, from this graph, it isn’t easy to see that the double-
hump configuration starting in week 100 is due exclusively to product 2. (Judging the
distance between closely spaced curves that vary a lot over the plot range is excep-
tionally difficult—see section 14.3.2.)
If you’re interested in the relative changes in composition, then—following the
principle to “plot what’s relevant”—you shouldn’t plot the absolute numbers but
rather their fractional contribution to the total. That’s what the panel at bottom right
in figure 14.9 does. This panel is also a stacked graph, but it shows the relative contri-
bution of each component, not the absolute numbers. It shares with the previous
panel that it’s guaranteed to look clean and that the individual contributions are hard
to estimate. In addition, this diagram completely hides any information about total
production. In particular, the dramatic increase toward the end of the observation
time frame is invisible! Although diagrams of this form have a lot of intuitive appeal,
they convey information poorly.

Finally, the panel at bottom left shows the relative contributions, separately for
each component again. It shares with the first panel (top left) that it appears cluttered
but that the information on individual products is easy to discern.

The appearance and information content of stacked graphs (like the ones on the
right side of figure 14.9) depend strongly on the order in which the individual curves
(here: product lines) are stacked. If there is some natural ordering, then such stacked
graphs may, in fact, be the best way to represent the information. Figure 14.10 shows
one such attempt. In this figure, the products have been ordered by their contribu-
tion to the total output, based on the (reasonable) assumption that products that con-
tribute more are more important. It makes sense to include curves that show less
variation and are flatter earlier in the graph, to retain a more stable baseline for the
curves that are added later to the stack. For this reason, product 1 has been included
before product 2, although it contributes overall slightly less: this way, the infamous
double-hump affects fewer curves in the overall stack.

Because the components for figure 14.10 had to be picked individually, the sum
facility was much less useful:
plot [0:150] "composition" u 1:5 t "Product 4" w l lt 4,
➥ "" u 1:($5+$2) t "1" w l lt 1,
➥ "" u 1:($5+$3+$2) t "2" w l lt 2,
➥ "" u 1:($5+$3+$2+$4) t "3" w l lt 3

TIP: Stacked graphs look appealing but often convey information poorly,
unless you can find a natural order in which to add curves to the stack.

[[P328]]

=== 14.2 Graphical techniques for multivariate data sets

Data sets with more than two (or maybe three) columns are called multivariate data
sets. In principle, the number of columns can be arbitrarily large. Multivariate data
sets pose special challenges for graphical methods: it’s difficult to represent more
than two dimensions in a necessarily flat graph!
There are basically two approaches to overcome the limitation posed by the two-
dimensional nature of the canvas:
•  Juxtapose several graphs, each representing only a small number of the avail-
able attributes.

•  Use complex symbols or glyphs that convey information not only through their
position on the graph, but also through their appearance (shape or color).
In this section, I’ll demonstrate some of the most common graphical techniques for
multivariate data sets. My intent here is twofold: I want to describe these graphical
methods, but I also want to show you how to realize them in gnuplot. Given that we’re
dealing with a multivariate problem, this will be an exercise in the use of loops and
multiplot mode! 3
3
This section uses several gnuplot features that are explained in appendix E.
0
0.5
1
1.5
2
2.5
3
0 26 52 78 104 130
Units [in 1,000]
Weeks
Product 4
1
2
3
Figure 14.10 A stacked graph of absolute production numbers. The curves have
been sorted in such a way that lines showing the smallest variation are lower in the
stack, leading to a more stable baseline to which the subsequent products are added.

[[P329]]

==== 14.2.1 Introduction

Our case study for exploring multivariate graphics is a data set describing the compo-
sition of a little more than 200 individual samples of glass. 4 The data set consists of 11
columns: the first is an integer to identify the record, followed by 9 columns of actual
measurements, and finally a column that specifies the type of glass as an integer
between 1 and 7. 5 Hence, this data set has 9 (or, if you count the glass type as well, 10)
attributes. The data set is therefore neither particularly large nor excessively high-
dimensional—it’s just the right size to introduce the topic.

The data file is comma-separated, so it’s necessary to use set datafile separator
',' . The following listing does this and also includes a bunch of other definitions that
will turn out to be useful. In all subsequent listings, this file with common definitions
is loaded first.

set datafile separator ','
data = "glass.data"
names = "ID RfIx Na Mg Al Si K Ca Ba Fe Type"
types = "Bldg1 Bldg2 Vhcl1 Vhcl2 Cont Tbl Lamp"

==== 14.2.2 Distribution of values by attribute

The first question concerns the distribution of values for the various attributes. The
nine observed values are numerical, but the glass type is categorical—it can take on
only seven distinct values. Figure 14.11 shows a histogram of the latter; the commands
are in the next listing.

load "glass.def"
set boxwid 1
set xtic format ""
set for[k=1:7] xtic add ( word(types,k) k )
plot data u 11:(1) smooth frequency w boxes
Clearly, window glass as used in buildings dominates this data set; moreover, there are
no records in this data set of type 4 (vehicle windows of variety 2). For this reason, it’s
important to fix the boxwidth: otherwise, the two adjacent boxes will extend to fill
the gap.

4
This example comes from the “Glass Identification” data set, available from the UCI Machine Learning Repos-
itory at http://archive.ics.uci.edu/ml/datasets/Glass+Identification.

5
The measurements consist of the refractive index (RfIx) and the relative concentration of various chemical
elements in each glass sample. The types of glass include two types each for building and vehicle windows,
glass for containers, tableware, and headlamps.

Listing 14.5 Common definitions for the glass data set (file: glass.def)
Listing 14.6 Commands for figure 14.11 (file: glass1.gp )
Name of the input data file
Column names
Types of glass (column 11)

[[P330]]
Next let’s investigate the distribution of the nine numerical attributes. Keep in mind
that, at this point, you have no idea what their numerical ranges are. That suggests
box-and-whisker plots, because they don’t require any adjustable parameters. See fig-
ure 14.12 and the next listing.

load "glass.def"
unset xtics; unset key
set ticscale 0; set grid lt 1 lc rgb "grey" lw 2
set ytic offset 0.5,0
set style fill solid 0.5
set multiplot layout 1,9 margin 0.075,0.975,0.1,0.95 spacing 0.075,0
do for[k=2:10] {
set xlabel word(names,k)
plot data u (1):k:(0.5) w boxplot pt 6
}
unset multi
The graph is a bit cluttered, mostly because each panel requires its own set of tic
marks. For this reason, individual tic marks are replaced with grey grid lines to pro-
vide a quieter visual appearance. Empty, instead of filled, circles are used for the outli-
ers, because those are easier to distinguish when they overlap partially.
Listing 14.7 Commands for figure 14.12 (file: glass2.gp )
0
10
20
30
40
50
60
70
80
Bldg1 Bldg2 Vhcl1 Vhcl2 Cont Tbl Lamp
data u 11:(1)
Figure 14.11 Number of data points for each type of glass. Compare listing 14.6.
Moves the tic marks
closer to their boxes

[[P331]]

==== 14.2.3 Distribution by level

It’s natural to ask whether different glass types can be distinguished by the observed
properties of the sample. Figure 14.13 therefore investigates the distribution of values
separately for each type of glass, which in the present case constitutes the level. (Also
see the next listing.) The situation certainly isn’t as clear cut as in section E.2.2!
load "glass.def"
unset xtic; unset key
set multi layout 3,3 margin 0.075,0.99,0.015,0.975 spacing 0.055,0.035
do for[k=2:10] {
set label word(names,k) at graph 0.95,0.9 right
plot data u (1):k:(0.5):11 w boxplot pt 6
unset label
}
unset multi
.SAMPLE SIZE IN A SERIAL BOX - AND - WHISKER PLOT
*****
*****
Figure 14.13 is great to get an overall view, but a graph showing only a single attribute
allows greater detail—see figure 14.14. An interesting question when looking at a
serial box-and-whisker plot concerns the number of data points for each level: that
would be good information to have in order to evaluate the relative importance of
Listing 14.8 Commands for figure 14.13 (file: glass3.gp )
1.51
1.515
1.52
1.525
1.53
1.535
RfIx
10
11
12
13
14
15
16
17
18
Na
0
0.5
1
1.5
2
2.5
3
3.5
4
4.5
Mg
0
0.5
1
1.5
2
2.5
3
3.5
Al
69
70
71
72
73
74
75
76
Si
0
1
2
3
4
5
6
7
K
4
6
8
10
12
14
16
18
Ca
0
0.5
1
1.5
2
2.5
3
3.5
Ba
0
0.1
0.2
0.3
0.4
0.5
0.6
Fe
Figure 14.12 Distribution of values for each attribute. Compare listing 14.7.

[[P332]]
each level. One way to represent this quantity is via the width of the central box for
each level, and that’s what’s done in figure 14.14.

Gnuplot’s with boxplot style doesn’t support this feature out of the box, but
because it does support level-specific boxwidths, you can accomplish this goal with a lit-
tle effort. In the following listing, the stats command is used to count the number of
records for each level. A string is built up holding all the counts as whitespace-
separated tokens; the word function extracts the appropriate token when needed.
(See section 11.1.2 for a more detailed discussion of this technique.)
load "glass.def"
col = 6
get( s, k ) = word( s, int(k) )
unset key
set title "Attribute: " . get(names,col)
s = ''
do for[k=1:7] {
stats data u ($11==k?1:0) noout
s = s . sprintf( " %d", STATS_sum )
}
plot data u (1):col:(0.01*get(s,$11)):(get(types,$11)) w boxplot
Listing 14.9 Commands for figure 14.14 (file: glass4.gp)
1.51
1.515
1.52
1.525
1.53
1.535
RfIx
10
11
12
13
14
15
16
17
18
Na
0
0.5
1
1.5
2
2.5
3
3.5
4
4.5
Mg
0
0.5
1
1.5
2
2.5
3
3.5
Al
69
70
71
72
73
74
75
76
Si
0
1
2
3
4
5
6
7
K
4
6
8
10
12
14
16
18
Ca
0
0.5
1
1.5
2
2.5
3
3.5
Ba
0
0.1
0.2
0.3
0.4
0.5
0.6
Fe
Figure 14.13 Distribution of values for each attribute, shown separately for each type of glass. The
sequence of glass types is the same as in figure 14.11; type Vhcl2 is ignored because there are no
records for it. Compare listing 14.8.

Selects the column
to display
Accesses the k-th
element in string s
Builds up the string
of record counts for
each level

[[P333]]

==== 14.2.4 Scatter-plot matrix

Box-and-whisker plots help us understand the distribution of data points for each attri-
bute, but they tell us nothing about the relationships between different attributes.
That’s what the scatter-plot matrix is for.

A scatter-plot matrix consists of scatter plots for all possible pairs of attributes in a
data set. In the present case, there are nine numerical attributes, and hence the
scatter-plot matrix forms a 9 × 9 array (see figure 14.15 and listing 14.10). You can
inspect this collection of graphs for correlations between attributes. For example, the
index of refraction grows quite regularly with the calcium (chemical symbol: Ca) con-
tent of the sample.

The upper and lower half of a scatter-plot matrix aren’t independent; each pair of
attributes appears twice, with the horizontal and vertical axes interchanged. For this
reason, I use the bottom half of the array to visualize clusters of points. The symbols
are larger than in the top half, but the color is so transparent as to be almost invisible.
Only where many points overlap is the density high enough to form recognizable
spots. (See section 9.1.2 for information about transparency and alpha shading.)
69
70
71
72
73
74
75
76
Bldg1 Bldg2 Vhcl1 Cont Tbl Lamp
Attribute: Si
Figure 14.14 Distribution of values for attribute Si, shown separately for each type of glass.
The width of the central box is proportional to the number of data points for each level.
Compare listing 14.9.


[[P334]]

load "glass.def"
unset key; unset tics
set size square
set multi layout 9,9 margin 0.01,0.99,0.01,0.99 spacing 0.01
do for[i=2:10] {
do for[j=2:10] {
if( i!=j ) {
if( i<j ) {
Listing 14.10 Commands for figure 14.15 (file: glass5.gp )
RfIx
Na
Mg
Al
Si
K
Ca
Ba
Fe
Figure 14.15 Scatter-plot matrix of all attributes, ignoring the type of glass. The upper half of the
matrix shows individual points, and the lower half shows smeared-out and partially transparent
symbols to facilitate the recognition of clusters. Compare listing 14.10.

[[P335]]
plot data u i:j w p ps .25 pt 7
} else {
plot data u i:j w p ps .5 pt 7 lc rgb "#e60000ff"
}
} else {
unset border
set label word(names,i) at 0,0 center
plot [-1:1][-1:1] 1/0
unset label
set border
}
}
}
unset multi
The command set size square ensures that each individual panel of the 9 × 9 matrix
is square. For best results, you may want to make sure that the shape of the overall
canvas forms a square as well, using set terminal ... size ... with your preferred
terminal.


==== 14.2.5 Parallel-coordinates plot

The scatter-plot matrix is a method to visualize the relationship between any two attri-
butes, but it provides no help at all when it comes to relationships across more than
two attributes at the same time. For that, we turn to parallel-coordinates plots. They’re
formally introduced in section E.3, and there it’s also explained that gnuplot’s current
implementation is subject to some limitations: in particular, the number of attributes
is constrained to a small integer number. Among other things, you’ll now learn how to
work around this issue.

The trick is to use multiplot mode (again)! Using multiplot mode, you can include
as many attributes as desired by placing several graphs side by side, each of which
doesn’t exceed the maximum number of columns supported (see listing 14.11).
Multiplot mode deals with the number of attributes; alpha shading is used to cope
with the number of records. In the present case, the number of records is sufficiently
high that lines obscure each other, making it impossible to discern any dominating
structure in the graph. By using partially transparent lines, isolated lines fade into the
background, but areas where lines cluster stand out strongly. (See figure 14.16.)
load "glass.def"
unset key; unset ytics
set xtics format ""
set style parallel lw 1 lc black
set linetype 1 lc '#ddff0000' lw 1
set multi layout 1,2 margin 0.05,0.9,0.1,0.95 spacing 0
set for[k=1:5] xtic add ( word(names,k) k )
plot [1:6] data u 1:2:3:4:5:6 w parallel lt 1
Listing 14.11 Commands for figure 14.16 (file: glass6.gp )
Turns on
multiplot
mode
Left side

[[P336]]
set for[k=1:6] xtic add ( word(names,k+5) k )
set paxis 6 tics format ""
set for[k=1:7] paxis 6 tics add ( word(types,k) k ) offset 7,0
plot [1:6] data u 6:7:8:9:10:11 w parallel lt 1
unset multi
.HIGHLIGHTING A SUBSET OF RECORDS
*****
*****
It’s often desirable to highlight a subset of records in a parallel-coordinates plot,
based on some condition. In figure E.12, records are highlighted based on their class.
In the present case, all records are highlighted that belong to a particular cluster. If
you examine figure 14.16, you’ll notice that there is a reasonably well-separated clus-
ter of records with an intermediate concentration of Ca. In figure 14.17, those lines
are highlighted, and you can observe two things: records with an intermediate Ca con-
centration tend to have an unusually high or low aluminum (symbol: Al) concentra-
tion. And they tend to correspond to glass made for lamps or tableware, but not for
containers or windows. That’s an interesting finding.

Highlighting makes use of data-dependent coloring (see section 9.1.5): an addi-
tional column is specified at the end of the using declaration, and its value is evalu-
ated to the linetype to use. Listing 14.12 defines the function c() that selects the
linetype, depending on whether the argument to the function falls into the desired
numerical range. (Tic marks have been turned on for the attribute in question.)
ID RfIx Na Mg Al Si K Ca Ba Fe Type
Bldg1
Bldg2
Vhcl1
Vhcl2
Cont
Tbl
Lamp
Figure 14.16 Parallel-coordinates plot of the entire glass data set. Because of the relatively large
number of records, all lines are drawn partially transparent, so as not to obscure each other. To
accommodate all attributes, this graph was composed using multiplot mode (see listing 14.11).
Right side
Turns off multiplot mode

[[P337]]

load "glass.def"
unset key; unset ytics
set xtics format ""
c(x) = 9<x && x<10 ? 2 : 3
set style parallel lw 1 lc black
set linetype 1 lc '#ddff0000' lw 1
set linetype 2 lc '#aa0000ff' lw 1
set linetype 3 lc '#ff000000' lw 1
set multi layout 1,2 margin 0.05,0.9,0.1,0.95 spacing 0
set for[k=1:5] xtic add ( word(names,k) k )
plot [1:6] data u 1:2:3:4:5:6 w parallel lt 1,
➥ data u 1:2:3:4:5:6:(c($8)) w parallel lc var
set for[k=1:6] xtic add ( word(names,k+5) k )
set paxis 3 tics 1
set paxis 6 tics format ""
set for[k=1:7] paxis 6 tics add ( word(types,k) k ) offset 7,0
plot [1:6] data u 6:7:8:9:10:11 w parallel lt 1,
➥ data u 6:7:8:9:10:11:(c($8)) w parallel lc var
unset multi
Listing 14.12 Commands for figure 14.17 (file: glass7.gp )
ID RfIx Na Mg Al Si K Ca Ba Fe Type
Bldg1
Bldg2
Vhcl1
Vhcl2
Cont
Tbl
Lamp
Figure 14.17 Same as figure 14.16, but with a subset of records highlighted. Records with
a Ca content between 9 and 10 have been selected for highlighting. Compare listing 14.12.
Default
style Highlight
style Invisible
(transparent)
style
Left
side
Right
side
Turns on tic marks
for one column

[[P338]]
The listing defines two line types in addition to the default: one for highlighting and
one that is completely transparent and therefore invisible. Because it doesn’t obscure
any of the existing graphical elements, it’s used for the records that aren’t selected for
highlighting.

.FURTHER SUGGESTIONS
*****
*****
Figure 14.17 explores only one aspect of the data set; many similar clusters can be
found and traced across all attributes. You can also do what I did in figure E.12 and
highlight all records belonging to a particular type of glass. Does this reveal any inter-
esting structure in the data set? Another possibility is to draw all lines belonging to the
same type of glass in the same color, using six different colors simultaneously.
Another aspect affecting the appearance of a parallel-coordinates plot is the order
or sequence in which attributes are plotted. In figures 14.16 and 14.17, I used the (arbi-
trary) arrangement of columns in the original data file, but different permutations
may give quite different results. Unfortunately, gnuplot doesn’t make it easy to shuffle
columns in a parallel-coordinates plot: you have to create different using declarations
to rearrange attributes. Here are two permutations that you may want to try:
1,4,6,2,5,3,8,7,10,9,11
1,4,6,3,5,8,2,10,7,9,11

=== 14.3 Visual perception

Even if you’ve found the most appropriate combination of quantities to look at, the
amount of information you can extract from a graph still depends on the way the data is
presented. The way people perceive a plot depends on the human, visual-psychological
perception of it. To get the most out of a graph, you should therefore format it to
improve the way it will be perceived.

Whether aware of it or not, in looking at a plot, humans always tend to engage in com-
parisons. Is this line longer than that? Is this part of the curve steeper than that? Is the
area underneath this function larger than the area underneath that function? And so on.
To gain the maximum insight from a plot, you therefore want to find a representa-
tion of the data that facilitates such comparisons as much as possible. In this section, I
give you some ideas for how this can be achieved.


==== 14.3.1 Banking

The idea of banking (or banking to 45 degrees) was proposed by W. S. Cleveland, who
demonstrated in a series of controlled experiments that our ability to compare angles
is greatest for angles that are close to 45 degrees. 6 In other words, if you want to assess
and compare the slopes of lines on a graph, you’ll do best if the graph is sized in such
a way that most of the lines are roughly going diagonally across it.

In a way, this is a confirmation of something you’ve probably been doing intui-
tively already. Whenever you’ve found yourself adjusting the plot ranges of a graph to
get its aspect ratio right (as opposed to narrowing the plot ranges to zoom in on a
6
See The Elements of Graphing Data by William S. Cleveland (Hobart Press, 1994) and references therein.

[[P339]]
region), you’ve probably been banking. Let’s consider an example: figure 14.18 shows
the number of sunspots observed annually for the 300 years from 1700 to 2000. 7 The
number of sunspots observed varies from year to year, following an irregular cycle of
about 11 years.

Because of the large number of cycles included in the graph, vertical (or almost
vertical) line segments dominate the graph, making it hard to recognize the structure
in the data. In figure 14.19, the plot range has been split into thirds, and each third is
displayed in a separate panel. The aspect ratio of the panels has been chosen in such a
way that the rising and falling edges of the curve are close to 45 degrees. The graphs
alone (without the labels and decorations) can be created easily:
set multiplot layout 3,1 margins 0.1,0.95,0.1,0.95 spacing 0
plot [0:100] "sunspots" u ($1-1700):2 w l
plot [0:100] "sunspots" u ($1-1800):2 w l
plot [0:100] "sunspots" u ($1-1900):2 w l
unset multi
Now an interesting feature in the data can be recognized: the number of sunspots
during each cycle rises quickly but tends to fall more slowly. (There’s the visual com-
parison I referred to earlier!) You wouldn’t have been able to see this from the repre-
sentation of the data in figure 14.18.

7
The data was obtained from WDC-SILSO, Royal Observatory of Belgium, Brussels, www.sidc.be/silso
/datafiles.

0
10
20
30
40
50
60
70
80
90
100
1700 1750 1800 1850 1900 1950 2000
Annual mean total sunspot number
Figure 14.18 Annual sunspot numbers for the years 1700 through 2000. What can you
say about the shape of the curve in this representation?

[[P340]]

Banking is a valuable tool. In particular, I find it helpful because it draws attention to
the importance of the apparent slopes of lines on a graph. Nevertheless, it must be
used with judgment and discretion. Taken by itself, it can lead to graphs with strongly
skewed aspect ratios. Figure 14.19 is a good example: if the three segments hadn’t
been stacked on top of each other, the resulting graph would have had a very awkward
shape (extremely long and flat).

TIP: To improve the perception of slopes, choose the plot range and aspect
ratio of your graphs such that most of the curves are at approximately 45
degrees to the horizontal. If necessary, chop up the data set into segments
and arrange them in a cut-and-stack plot, to keep the overall aspect ratio of
the plot at a convenient value.


==== 14.3.2 Judging lengths and distances

Look at figure 14.20. It shows the flows to and from a storage tank as a function of
time. For the time interval considered here, the inflows are always greater than the
outflows, so the tank tends to fill up over time, but that’s not our concern right now.
(Let’s say the tank is large enough.)
Instead, let’s ask for the net inflow as a function of time—the inflow less the outflow
at each moment. Could you draw it? Does it look at all like the graph in figure 14.21?
In particular, does your graph contain the peak between 6 and 7 on the horizontal
axis? How about the relative height of the peak?
0
25
50
75 1700
0
25
50
75 1800
Annual mean total sunspot number
25
50
75
0 20 40 60 80 100
1900
Figure 14.19 A different representation of the sunspot data from figure 14.18. The aspect ratio
of each segment in the cut-and-stack plot is such that it banks lines to 45 degrees.

[[P341]]

0
10
20
30
40
50
60
0 2 4 6 8 10 12
Outflow
Inflow
Flow rate
Time
Figure 14.20 Inflow to and outflow from a storage tank. What’s the net flow to the tank?
0
5
10
15
20
0 2 4 6 8 10 12
Net flow rate
Time
Figure 14.21 Net flow to the storage tank. This is the difference between the inflow and
the outflow (see figure 14.20).


[[P342]]
This example shows how hard it is to estimate accurately the vertical distance between
two curves with large slopes. The eye has a tendency to concentrate on the shortest dis-
tance between two curves, not on the vertical distance between them. The shortest dis-
tance is measured along a straight line perpendicular to the curves. For nearly
horizontal curves, this is reasonably close to the vertical distance; but as the slopes
become steeper, the difference becomes significant. (Because the net flow is the dif-
ference between the two flow rates at the same point in time, you’re looking specifi-
cally for the vertical distance between the two curves.)
You may also want to compare the observations made here with the discussion in
section 14.1.4—the problems are similar. As a general rule, it’s difficult to estimate
changes against a baseline that itself isn’t constant; and the more rapidly the baseline
changes, the harder it is to use.

TIP: The eye has difficulty accurately judging the vertical distance between
two curves with large slopes. If the nature of the difference between two quan-
tities is important, then plot it explicitly. Don’t rely on observers to recognize
it from the contributing components.


==== 14.3.3 Plot ranges and whether to always include zero

Plots should have meaningful plot ranges, showing those parts of the data that the
viewer is most likely going to be interested in at a reasonable resolution. It may not be
possible to convey all the meaning appropriately with a single choice of plot ranges, so
don’t be shy about showing two or more views of the same data set—for instance, an
overview plot and a detailed close-up of only a small section of the entire data set.
A long-standing (and largely unfruitful) discussion concerns the question of
whether zero should be included in the range of a graph. The answer is simple: it
depends.

If you’re interested in the total value of a quantity, you probably want to include
zero in your range. If you care only about the variation relative to some baseline other
than zero, then don’t include zero.

Figure 14.22 demonstrates what I mean. Both panels of the graph show the same
data. The main graph tells us that the total variation is small, compared to the overall
value. The inset tells us that there has been a steady increase from left to right. Both
views are valid, and each gives an answer to a different question.

Plot ranges are a bit more of a concern when you need to compare several graphs
against each other. In such a situation, all graphs should have the same scale to facili-
tate comparison; in fact, using different scales for different graphs is a guaranteed
path to confusion (because the difference in scales will go unnoticed or be conve-
niently forgotten). And if one of the graphs legitimately includes zero, then all of
them must do the same.


[[P343]]

=== 14.4 Summary

In this chapter, I chose three recurring topics and discussed them in greater depth.
The first was the graphical analysis of time series; we paid particular attention to find-
ing a smooth approximation to the raw data’s overall trend. I then described a variety
of methods for the graphical treatment of multivariate data sets and how to realize
them in gnuplot. Finally, I pointed out the importance of visual perception and
described some ways to take advantage of it.

0
2
4
6
8
10
12
14
16
0 20 40 60 80 100
15
15.2
15.4
15.6
15.8
16
16.2
0 50 100
Figure 14.22 Two different views of the same data set. The outer graph includes zero in the
vertical plot range, and the inner graph displays only that part of the vertical axis that
corresponds to data points. Both views are valid: the outer graph shows that the relative change
in the data is small compared to its absolute value; the inner graph shows that the variation
increases dramatically from left to right.


[[P344]][[ch15]]
== Chaper 15 Coda: understanding data with graphs

But in the end, the most impor-
tant thing is to draw the right
conclusions from the available
evidence.

During World War II, a pro-
gram was launched to explore
the possibility of equipping
fighter planes with additional
armor as protection against
ground-based anti-aircraft fire. 1
To determine where on the air-
plane to place the armor,
fighter planes returning from
combat missions were investi-
gated for bullet holes. In figure
15.1, the areas where bullet
holes were found are shown
shaded; areas without bullet
holes are left white.

Given this evidence, where
would you put additional armor?
1
The inspiration for this story stems from the book Graphical Discovery by Howard Wainer (Princeton Uni-
versity Press, 2005).

Figure 15.1 Schematic outline of a fighter airplane. Areas
where bullet holes were found on machines returning from
combat missions are shaded. Where would you recommend
placing additional armor?

[[P345]]
The not-so-obvious obvious answer is to add the armor in those areas where no bul-
let holes were found. Why? Because airplanes are subject to hits everywhere, but if the
hits strike in the white areas in figure 15.1, the airplane doesn’t come back from its mis-
sion. (Statisticians speak of survivorship bias.) Therefore, those are the most vital areas
of the machine and should receive the best possible protection.

So, let this be our final lesson. Evidence, be it graphical or otherwise, is just that:
mere data. But actual insight arises only through the correct interpretation of those
facts.


[[P346]]
== Appendix A Obtaining, building, and installing gnuplot

The easiest way to install gnuplot on your local computer is to download and install a
precompiled package. If you’re running Linux, there’s a good chance gnuplot is
already installed; if not, you’ll have no difficulty finding an RPM or Debian package on
the internet. There are MacPorts packages for Mac OS X and precompiled binaries for
Windows as well. In section A.3, we consider some of these options in more detail.
If you’d like to be totally up to date and have access to the newest features, or if you
want to start hacking on gnuplot yourself, you’ll have to build from source. Section

=== A.4 in this appendix will help you get started.



=== A.1 Inspecting compile-time options

You can inspect what compile-time options your version of gnuplot was built with from
within a gnuplot session. The pertinent commands are show version and show ver-
sion long . The first version will tell you little more than the version number, but the
second version will also print the compile-time options to the screen. A - prefix indi-
cates an option that is disabled, a + prefix one that is enabled.

Most of this information is primarily relevant if you’re building gnuplot from
source yourself (see section A.4) or if you want to report bugs to the gnuplot develop-
ers’ mailing list (gnuplot-beta@lists.sourceforge.net). But even if some feature doesn’t
work as expected, it may be worth checking whether your gnuplot executable was
built with support for that feature to begin with.


=== A.2 Release and development versions

Gnuplot versions are generally labeled with a three-part version number indicating
major, minor, and bug-fix releases. Bug-fix releases are prepared as needed (roughly
twice a year). Minor releases introduce new features but preserve backward compati-
bility for existing gnuplot command scripts. Major releases may break backward
compatibility. The development version of a minor release is indicated by an odd
version number, which is incremented to the next even number on promotion to a
released version.

Gnuplot is a mature project—for the 5.x.x major release series, minor releases
are a few years apart, and the core developer team is very conscientious about not

[[P347]]
introducing instability into released versions. On the other hand, new and exciting
features continue to be added to gnuplot all the time, so there are good reasons for
learning how to build gnuplot from source.


=== A.3 Installing a prebuilt package

Installing a prebuilt package is usually straightforward and mostly dependent on your
choice of package manager.


==== A.3.1 Linux

Usually, the easiest way to install new software on a Linux box is to use the standard
administration tool that comes with your local Linux distribution. On RPM -based dis-
tributions, you can also download an RPM file explicitly and then install it (as root)
using
rpm -i gnuplot-XXX.rpm
where you should replace gnuplot- XXX .rpm with the exact name of the package file
you’ve downloaded. RPM files for current gnuplot releases can be found without diffi-
culty on the web.

On Debian-based systems, you can execute the following:
apt-get install gnuplot
But be warned that there are reports that gnuplot for Debian-based systems is often
built without the GNU readline library (due to strict interpretations of the differences
in the GNU and the gnuplot licenses), so you might want to build gnuplot from source
instead.


==== A.3.2 Mac OS X

The most convenient way to install gnuplot on Mac OS X is to use a package manager,
such as Homebrew or MacPorts, which will automatically deal with configuration
issues and resolve dependencies. 1 Assuming you already have Homebrew installed,
you can install gnuplot by entering the following command in the Terminal:
brew install gnuplot
If you’re using MacPorts, you type
sudo port install gnuplot
The latter will prompt you for your password, which you need to enter. Once gnuplot
has been successfully installed using either method, you can run it by issuing the com-
mand gnuplot in the Terminal window.

1
I’d like to thank Mojca Miklavec for help with this section.


[[P348]]
Be aware that a choice of build options is available when installing gnuplot, in par-
ticular with regard to the selection of terminals that will be included. The MacPorts
distribution, for example, includes AquaTerm and the cairo-based terminals (includ-
ing the wxt terminal) by default, but not the qt terminal.


==== A.3.3 Windows

The easiest way to install gnuplot on Windows is to use the precompiled package avail-
able from the download section of the gnuplot website at www.gnuplot.info. 2 At the
time of this writing, the most recent version available was gnuplot 5.0.1. Download the
file gp501-win64-mingw.exe, and execute it. The package works with the Windows
installer, which takes care of things like permissions and menu entries.
No further installation is required. To run gnuplot, select the entry in the Start
menu. A new window will pop up, containing the familiar gnuplot command prompt.
The window has some additional menus that provide shortcuts to many of the gnuplot
commands.

The bin directory contains additional gnuplot executables, which are intended to
emulate Unix pipes and files necessary to run the qt and wxt terminals on Windows.
Refer to the README -Windows.txt file for additional details.


=== A.4 Building from source

If you want to build gnuplot from source, you have two choices: either you can down-
load and build an officially released version of gnuplot, or—if you want to be truly on
the cutting edge—you can download and build the latest development version. Released
versions of gnuplot can be downloaded as source tarballs from the gnuplot home
page at www.gnuplot.info. There, you can also find precompiled binaries for several
non-Unix platforms.


==== A.4.1 Obtaining the development version from CVS

The development version of the gnuplot source tree is kept in CVS at www.source-
forge.net. To get a copy of the development version from the repository, follow these
steps:
1 Create a directory on your local drive, and change into it. You can name it any
way you like.

2 Log in to the CVS repository:
cvs
➥ -d:pserver:anonymous@gnuplot.cvs.sourceforge.net:/cvsroot/gnuplot
➥ login
Press Enter when you’re prompted for a password. (This step is only necessary
the first time around.)
2
I’d like to thank Bastian Märkisch for help with this section.


[[P349]]
3 Check out the source tree:
cvs
➥ -d:pserver:anonymous@gnuplot.cvs.sourceforge.net:/cvsroot/gnuplot
➥ checkout gnuplot
You may want to set the environment variable CVSROOT to
:pserver:anonymous@gnuplot.cvs.sourceforge.net:/cvsroot/gnuplot
(How you do this depends on the shell you’re using.) If CVSROOT is set, you don’t need
to repeat the cvs-directory as part of the CVS command line using the -d option.
The checkout command creates a directory called gnuplot in the current direc-
tory. We’ll examine its contents next.


==== A.4.2 Layout of the source tree

Whether you downloaded and unpacked a tarball of a released version or checked out
the current development version from CVS , you should now have a directory called
gnuplot (or similar) on your local drive. Inside this directory, you’ll find the following
(I’m listing only the most important files and directories):
•  config/—Files required by the automake/autoconf utility, which is used to con-
figure the build process to the local environment.

•  demo/—A large set of gnuplot demos and the data files required by them.
•  docs/—Source files for the gnuplot reference documentation. Documentation
for gnuplot is maintained in a markup language that’s specific to gnuplot. Help
files in common formats ( HTML , T e X , GNU Info, and so on) are built from the
master file (called gnuplot.doc), as is the gnuplot online help feature. You can
find an explanation of the markup format in the README file in the docs/
directory.

•  src/—The source tree.

•  Copyright—The gnuplot copyright and license.

•  INSTALL —Gnuplot build and installation instructions. Very detailed.

•  INSTALL .gnu—Documentation for the GNU autoconf/configure utility.

•  NEWS —Overview of new features, changes, and fixes in the current version of
gnuplot.

•  README —The overall gnuplot Readme file.

•  RELEASE_NOTES —A rather detailed overview concerning the new features in
the current version, bugs and limitations, and important configuration options.

==== A.4.3 Building and installing

Specific build instructions are platform dependent. Because of the great variability of
Unix platforms, the instructions for building on Unix are the most complex.

[[P350]]
U NIX
Building gnuplot from source on Unix requires that the standard Unix development
tools are installed. In addition to a C compiler and make , this also includes the auto-
conf/automake utility, which is used during the configuration step to probe many
aspects of the local build environment and to create a localized Makefile. Building is
then a rather painless process using make .

Configuring
When building from source, it’s necessary to set up your build script first. To do so,
change into the gnuplot directory and execute ./prepare . This creates a script called
configure. (This step is only required when building the development version of gnu-
plot; the release versions already include a usable configure script.)
In either case, execute ./configure in the gnuplot directory. The configure script
takes a large number of command-line options. You can obtain a complete list using
./configure --help
Many of these options are described in detail in the INSTALL file. Here, I mention just
the ones that you’ll most likely want to tinker with. For the majority of options, the
defaults are fine:
•  --prefix=PREFIX —This controls where the gnuplot executable, library, and
documentation files will be installed. The default is /usr/local. If you don’t
have root permission on your box, or if you’d like to maintain a local version of
the development version, you may want to provide a different path here.

There are many more options that control the installation location of execut-
able, library, and documentation files independently. Check the INSTALL file
for details.

•  --with-readline —Gnuplot comes with its own minimal version of a readline
library (which provides command-line editing capabilities, command comple-
tion, and a history feature). You can select this version using --with-readline
or using --with-readline=builtin (this is the default). If instead you’d like to
use the more powerful GNU readline library, use --with-readline=gnu , or
--with-readline=DIR , where DIR is the path to a (nonstandard) directory con-
taining the GNU readline library. Note that the GNU readline library is released
under a different license than the rest of gnuplot.

•  --with-wx=DIR —The location of wx-config, the wxWidgets configuration pro-
gram. This is important if you want to include support for the wxt terminal.
•  --with-qt —This determines whether gnuplot will be built with support for the qt
terminal, and which version of qt to use. If you select --with-qt=no , the qt termi-
nal won’t be supported; other possible values for this option are qt4 and qt5 .
The configuration step produces a long list of output describing the local environ-
ment that will be used during the build process. It’s worth skimming this output: if the
configuration utility doesn’t seem to find libraries that you know are available, you

[[P351]]
may have to change some of the defaults using additional command-line options
described in the INSTALL file. Libraries required for some of the terminals are occa-
sionally not found, which means you need to override the search paths by tweaking
the corresponding command-line options to configure.

Also be aware that you’ll need the devel packages for many of the required libraries
if you want to build gnuplot from source, not just the release packages. In particular,
the packages required for the wxt, cairo, and pango libraries may not be installed on
your local system by default.

Building and installing
If the configuration step has completed successfully, building gnuplot is very simple:
execute make from within the gnuplot directory. Compilation (on a reasonably cur-
rent system) takes only a few minutes.

If the compilation was successful, execute make install to install the gnuplot
binary, its documentation, and any required auxiliary files into the specified locations.
You may want to follow this with make distclean to remove many of the temporary
files left over from the build process.

.WINDOWS
*****
*****
Gnuplot can be built on Windows using a variety of compilers. A major challenge
when building on Windows is resolving the dependencies on external libraries. Check
the INSTALL file for more information.

.MAC OS X
*****
*****
To build gnuplot on Mac OS X , you should have the Xcode development environment
installed: the build process is then essentially the same as for other Unix platforms.
You may also want to have AquaTerm installed, which you can obtain through a pack-
age manager or directly from SourceForge (http://aquaterm.sourceforge.net).
To include support for cairo and wxt, you must have the cairo and pango libraries
installed already. See the INSTALL file for details.

Also, there have been reports of problems with the readline library that ships with
Mac OS X . You may want to fall back to gnuplot’s own (minimalistic) version of the
readline library: ./configure --with-readline=builtin ; or replace the default
library with the GNU readline version before building.


[[P352]]
== Appendix B Resources

=== B.1 Gnuplot

The official website for the gnuplot project is www.gnuplot.info. There you’ll find the
official documentation, including the extensive and helpful FAQ , as well as links (not
always current) to other sites and related projects.

Community support is available through the newsgroup comp.graphics.apps
.gnuplot and the mailing list gnuplot-info@lists.sourceforge.net. There’s also a mail-
ing list for gnuplot developers: gnuplot-beta@lists.sourceforge.net.


==== B.1.1 Websites

Several websites are dedicated to gnuplot and often contain very good information, as
well as tips and tricks. The following stand out both for the quality of their material
and for the range of topics covered:
•  Gnuplotting at www.gnuplotting.org—Hagen Wierstorf maintains a page with
some stunning examples and uncommon gnuplot applications.

•  Impossible Gnuplot Graphs at www.phyast.pitt.edu/~zov1/gnuplot/html/intro
.html—The first of two websites with gnuplot tricks by Zoltán Vörös.

•  Gnuplot Tricks at http://gnuplot-tricks.blogspot.com—The other site prepared
by Zoltán Vörös.

•  Gnuplot—not so Frequently Asked Questions at http://lowrank.net/gnuplot/index-e
.html and at http://mng.bz/5i80—Originally collected by Toshihiko Kawano at
Los Alamos National Lab, this is a large collection of techniques. Some of the
material is a little dated, but most of it is still relevant and interesting. (The orig-
inal site has gone away, but the material is now fortunately hosted by volun-
teers.)
For specific topics, a quick Google search will typically result in additional posts and
articles.


==== B.1.2 Books

To my knowledge, there is only one other book dedicated exclusively to gnuplot:
•  Gnuplot Cookbook by Lee Phillips (Packt Publishing, 2012)—This book contains
a collection of “recipes” for common, and not-so-common, tasks.


[[P353]]

=== B.2 Data repositories

I assume that you’ll usually have your own data that you want to plot! Still, the need
for example data sets arises from time to time. Here are some good collections of
freely available data sets on the web:
•  UCI Machine Learning Repository at http://archive.ics.uci.edu/ml/index.html—A
very large and frequently updated collection of data sets.

•  Journal of Statistics Education Data Archive at www.amstat.org/publications
/jse/jse_data_archive.htm—A large collection of often very interesting data
sets used in papers published by the JSE .

•  Time Series Data Library at http://data.is/ TSDL demo—A very large collection of
time series data, collected by Rob Hyndman. Unfortunately only sparsely
documented.

•  The Data and Story Library at http://lib.stat.cmu.edu/ DASL —An older, medium-
sized collection of data sets and “stories,” intended to teach basic statistics.
•  StatLib Datasets Archive at ftp://rcom.univie.ac.at/mirrors/lib.stat.cmu.edu
/datasets/.index.html—Many data sets that have been mentioned in textbooks
can be downloaded from this site. You usually need the respective textbook to
make sense of the downloads.

•  100+ Interesting Data Sets for Statistics at http://rs.io/100-interesting-data-sets-for-
statistics—A large and heterogeneous collection of links and pointers to data
archives on the web.


=== B.3 Books

Here are a few books on scientific graphics and graphical discovery that I’ve found
helpful and interesting:
•  The Elements of Graphing Data by William S. Cleveland (Hobart Press, 1994)—
Probably the definitive reference on graphical analysis (as opposed to presenta-
tion graphics). Much of the material in chapter 13 and chapter 14 has been
influenced by Cleveland’s careful approach. There’s also a companion volume,
Visualizing Data (1993), by the same author.

•  Visual Revelations by Howard Wainer (Copernicus/Springer, 1997), Graphic Dis-
covery by Howard Wainer (Princeton University Press, 2005), and Picturing the
Uncertain World: How to Understand, Communicate, and Control Uncertainty through
Graphical Display by Howard Wainer (Princeton University Press, 2011)—Three
collections of short essays on statistical graphics, written in an entertaining,
semi-popular style. Many good ideas and interesting case studies can be found
here, but also a lot of editorializing about various issues.

•  Data Analysis with Open Source Tools by Philipp K. Janert (O’Reilly, 2009)—The
first several chapters of this book cover graphical methods in data analysis (sim-
ilar in spirit to chapters 13 and 14, but in more depth). The remainder of the
book discusses a variety of other (nongraphical) techniques for extracting
insights from data.


[[P354]]
Symbols
^ (caret) symbol 161, 218
^ operator 36
_ (underscore) symbol 156, 161, 197, 218
_tic() functions 166
_ticlabels() family of functions 165, 168
- (dash) symbol 197
- operator 35
! (exclamation point) 98
! operator 35, 242
!= operator 36
? (question mark) character 98
. (dot) operator 35, 92
" " accuracy specifier 160
"-" accuracy specifier 160
"#" accuracy specifier 160
"+" accuracy specifier 160
(,) operator 36
{} control character 218
{/ } control character 218
{/:Bold} control character 218
{/:Italic} control character 218
{/:Normal} control character 218
{/*} control character 218
{/=} control character 218
@ control character 218
@ symbol 87
* (asterisk) character 154
* (multiplication) operator 35
** (exponentiation) operator 32, 35
/ (division) operator 35
/ path separator 246
\ control character 218
& control character 218
& operator 36
&& operator 36
# (hashmark) 20, 26, 58
% operator 35
%% conversion specifier 160
%A conversion specifier 172–173
%a conversion specifier 172–173
%B conversion specifier 172–173
%b conversion specifier 160, 172–173
%c conversion specifier 160
%D conversion specifier 172–173
%d conversion specifier 172–173
%e conversion specifier 160
%F conversion specifier 172–173
%f conversion specifier 160
%g conversion specifier 160
%H conversion specifier 172–173
%h conversion specifier 160–161
%I conversion specifier 172–173
%j conversion specifier 172–173
%k conversion specifier 172–173
%l conversion specifier 160, 172–173
%M conversion specifier 172–173
%m conversion specifier 172–173
%o conversion specifier 160
%P conversion specifier 160, 167
%p conversion specifier 172–173
%R conversion specifier 172–173
%r conversion specifier 172–173
%S conversion specifier 172–173
%s conversion specifier 160, 162, 172–173
%T conversion specifier 172–173
%t conversion specifier 160
%U conversion specifier 172–173
%W conversion specifier 172–173
%w conversion specifier 172–173
index
Note: index entries that begin with the letters C, D, E, and F can be found in the corresponding appendixes
in the e-book version of this book .


[[P355]]
%x conversion specifier 160
%Y conversion specifier 172–173
%y conversion specifier 172–173
+ default hotkey binding 270
+ operator 35
< operator 35
<< operator 35
<= operator 36
= operator 36
== operator 36
> operator 36
>= operator 36
>> operator 35
| operator 36
|| operator 36
~ control character 218
~ operator 35
$ character 252
$2-s using expression 321
Numerics
"0a.b" accuracy specifier 160
0 set hidden3d option C4
1 set hidden3d option C4
2 set hidden3d option C4
A
a smoothing parameter 317–318
"a.b" accuracy specifier 160
abbreviations feature 24
abs(x) function F12–F13
acos(x) function F11
acosh(x) function F11
acsplines keyword 45
add keyword 164
airy(x) function F12
allometric scaling 162, 298
allwindows option 272
alpha channel 185
alpha shading 185–186
"alt-" control key 272
animations 254–255
introducing delays 254
waiting for user event 255
Apache web server log, plotting 315–316
appearance (plot), changing 338
append keyword 88
approximating splines 46, 294
aqua terminal 233
arg(x) function F13
ARG1 variable 244
ARG2 variable 244
ARGC variable 244
ARGO variable 244
arrays, creating with multiplot layout E4
arrow keys, default hotkey binding 270
arrow variable 275
arrows 131–134
customizing appearance of 132–133
placing with mouse 275
styles for 202
arrowstyle keyword 104
arrowstyle variable 118
asin(x) function F11
asinh(x) function F11
aspect ratio, view point using 204, C10
asterisk (*) character 154
at option 138
at symbol (@) 87
atan(x) function F11
atan2(x) function F11
atanh(x) function F11
auto C12
autoscaling 154
axes
double-logarithmic 9
graphs sharing common axis E7–E8
labels for 136
multiple 147–153
linking axes 150–153
plotting with two coordinate systems
148–150
terminology 147–148
selecting plot ranges 153–155
batch processing and 155
interactive work and 154–155
tic marks 156–167
appearance and placement 157–159
grid and zero axis 166–167
labels for 159–163
location and frequency of 163–165
overview 156
reading from file 165–166
time series 168, 170–177
date and time information 176–177
example 175
input 171–174
months and weekdays 169–170
output 174
working in time-series mode 174–175
B
b smoothing parameter 318
back keyword 129
background option 233
backheads keyword 132
backslash-escaped control characters 80

[[P356]]
bandwidth keyword 302
banking 338–340
base plane C7–C8
batch files 243
batch mode 247–248
beg(x) function 307
behind keyword 129
besj0(x) function F12
besj1(x) function F12
besy0(x) function F12
besy1(x) function F12
Bézier approximations 48
bezier keyword 45
bgnd index 188
bimodal data 5
bin function 301
binc() function 301
binc(x,s) function 301
bind command 255, 271–274, D30
bird’s-eye view C10
black color index 188
blank lines 60
bmargin keyword 138
<body> tag 231
border (bo) keyword 104, 202–203, D22
borders 128, 205–206
clipping data points close to 206
creating empty space between axes and
data 206
borders plane C7
bottom keyword 138
box plots 112, 300
box set dgrid3d keyword C19
box-and-whisker plots E1, E10–E17
appearance options E13–E14
individual E10–E14
semantics of E11–E13
serial box-and-whisker plots E14–E17
appearance options for E15–E16
example of array of E16–E17
boxerrorbars style 110
boxes 112–114
boxplot keyword E10
boxxyerrorbars style 110
Brewer, Cynthia D31
Brown, J. H. 299
bspline keyword C13
buffers, flushing 211–212
buflen element 260
building gnuplot from source 348–351
layout of source tree 349
obtaining development version from CVS
348–349
on Mac OS X 351
on Unix 350–351
on Windows 351
built-in color sequences 193–194
built-in functions 36–37
butt control 221
butt line end 197–198
Button1 window event 272
C
-c ... command-line option 278
c() function 336
cairo-based terminals, generating PNG and PDF
with 220–221
cairolatex terminal 221, 235
example 224–225
options for 227–228
call command 25, 244–245, D30
candlesticks style 111, 121
<canvas> element 229–231
canvas terminal 210, 230–231, 234
canvas, size of 128, 204
caret (^) symbol 161
cauchy set dgrid3d keyword C19
cb keyword 189
cbdata time option D17
cbdtics option D17
cbmtics option D17
cbrange option D18–D19, D24, D29
cbtics option D17
ceil(x) function F12
center keyword 138–139
char keyword E7
character coordinate system 215
Chebyshev polynomial E5
clear command 232, E9
Cleveland, William S. 310, 338
close window event 272
cls(s) function E22
clustered histogram style E25
clustered style E25
clusters 6, 8
CMY (cyan-magenta-yellow) D3
cnormal keyword 45
coerce evaluation 80
color 181–195
alpha shading 185–186
built-in color sequences 193–194
data-dependent colors 189–193
color gradients 192–193
examples 190–192
explicit and indexed 189
explicit colors 182–184
color names 183
HSV color model 184
RGB components 183

[[P357]]
color (continued)
mapping value into continuous gradient
188–189
selecting through indexed lookup 187–188
transparency 185–187
colorbox D16–D19
colored surface plots with pm3d D21–D22
appearance options for D21–D22
elevation and color D22
column-access functions 69–70
column() function 69–70, 192, 252
columnheader() function 140, 142
columns
accessing 67–70
by position or name 68–69
column-access functions 69–70
pseudocolumns 69
selecting 58–59
columnsfirst keyword E3
comma operator 35
comma-separated data file 329
comma, mandatory E26
command files 243–247
export script example 246–247
extracting specifics from 263–264
scripts as subroutines 244–246
Newton’s method 245–246
passing parameters to scripts 244–245
simulating local variables 245
command-line flags 278
command-line-orientation 5, 12
commands
extending command set 264–266
using eval 265
using scriptlets 264
history of 96–99
general history feature 97–98
redrawing graphs 97
restoring session defaults 98–99
recalling 18
saving and loading 25–26
comment character 26, 63
comments 58, 63–64
comparison operator 80
complex numbers F12–F14
concatenation operator 80
config/ file 349
configuration script 243
configure options 350
constants F13
continuous gradient, mapping value into 188–189
continuous time series 168
contour plots C1, C10
contour lines and C10–C14
contour labels C12–C13
customizing contour lines and their labels
C12–C14
frequency and spacing of contours C12
smoothing contour lines C13–C14
coordinate axes C6–C10
base plane C7–C8
borders plane C7
plotting data from a file using splot C14–C17
grid format C14–C16
matrix format C16–C17
smooth surfaces C17–C20
view point C8–C10
bird’s-eye view C10
unit length and aspect ratio C10
using mouse C8–C9
using set view C9
control charts, monitoring and
cusum plots 322–325
identifying outliers 321–322
making data comparable 319–321
controlled delay feature 254
coordinate axes C6–C10
base plane C7–C8
borders plane C7
Copyright file 349
corners2color keyword D22
cos(x) function F11
cosh(x) function F11
critical point E9
crop option 221
csplines keyword 45–46
ctrl option 232
ctrl- control key 272
cubic splines 46
cubicspline keyword C13
cumulative distribution functions 50–51, 301,
303–304
cumulative keyword 45
cumulative sum 323
curve fitting F18–F27
background F18–F19
example F19–F21
fit command F22–F23
managing fitting parameters F23
options for F24–F27
specifying columns for data and weighting
factors F22
variables set by F23
practical advice F24
curves, stacked, changing 325–327
custom hotkeys 271–273
bind command 271–272
examples 272–273
customizing line types 199–200
cusum plots 322–325

[[P358]]
cvs-directory 349
CVS, obtaining development version from
348–349
CVSROOT environment variable 349
cylindrical coordinates F6–F7
D
-d command-line option 276, 278, 349
dash patterns 196–198, 282
dash (-) symbol 197
dot (.) symbol 197
explicit tuples 197–198
symbolic strings 196–197
underscore (_) symbol 197
whitespace symbol 197
dashlength option 233
dashtype keyword 104
data
bimodal 5
minimal context for 126–127
Data Analysis with Open Source Tools 353
Data and Story Library, The 353
data blocks 62
data repositories, resources 353
data set examples
allometric scaling 298
Chebyshev polynomial E5
diffusion limited aggregation (DLA) 6
fractal 6
mammals 298
marathon 4
data sets. See data set examples
data stream, live, continuously monitoring
256–260
using drivers to monitor arbitrary data sources
259–260
using gnuplot to monitor files 256–259
data structures, strings as 79
data styles 200
data transformations 39–42
data-dependent colors 189–193
color gradients 192–193
examples 190–192
explicit and indexed 189
data() function 253
datafile missing option 65
dates variable 272
decorations 130–137
arrows 131–134
common conventions 130–131
creating 130
identifying using tags 130–131
objects 136–137
shapes 136–137
text labels 134–136
axis labels 136
title label 135–136
deduping repeated entries 51
default font 214
default hotkeys 270
default keyword 98, 201
--default-settings command-line option 278
defined keyword D4–D6
delays, in animations 254
demo/ file 349
dependent variable F1
descriptions, strings as 79
dgrid3d option C2, C14, C17–C19
diff utility 263
differencing 319–325
discontinuity in data 60
discrete time series 168, 315
distances, judging 340–342
division (/) operator 35
dl option 233
DLA (diffusion limited aggregation) 6
do for loop 237
docs/ file 349
dot (.) operator 35, 92
dotplots 305
dots style 108
double blank lines 60
double exponential smoothing 318
double-logarithmic axes 9
double-quoted strings 80
Down arrow key 272
downwards keyword E3
drawplot() function 231
dumb terminal 234
dy default C19
E
-e "..." command-line option 278
editors, external 267–268
Elements of Graphing Data, The 338, 353
ellipses 119
EllipticE(x) function F12
EllipticK(x) function F12
EllipticPi(x) function F12
else clause 237
empty keyword 132
End system key block 272
end(x) function 307
enhanced text mode 161, 214–219
Enquist, B. J. 299
environment variables 277–278

[[P359]]
eps keyword 227
epscairo terminal 213, 218
eq operator 36, 80
erf(x) function F11
erfc(x) function F11
error bars 108–110
errorbars style 108–109
errorlines style 108–109
Escape main key block 272
estimate parameter values F27
Euler-Mascheroni constant 37
eval command 85, 241, 264–266, 275
eval dates command 265
eval polar command 265
eval times command 265
every directive 62–63, C15
example data sets
allometric scaling 298
Chebyshev polynomial E5
diffusion limited aggregation (DLA) 6
fractal 6
mammals 298
marathon 4
example matrix format C16
exclamation point (!) 98
exec() function 253
exists() function 275
exp set dgrid3d keyword C19
exp(x) function F11
expint(n, x) function F12
explicit colors 182–184, 221
color names 183
HSV color model 184
RGB components 183
explicit newlines 252
explicit semicolons 252
explicit specification 182
exponential smoothing 316–318
exponentiation (**) operator 34–35
export command 211, 265
exporting
graphs 26–28
using clipboard 26–27
using GUI button 26
using terminals 27–28
palettes D8
expressions (math) 34
external editors and viewers 267–268
F
f function F13, F18
f range C8
f(x) function 245
F1 function key 272
F12 function key 272
false-color plots C1, D1, D22–D28
further reading about D31
using points 23–D25
using with image D26–D28
using with pm3d D25–D26
fc (fillcolor) keyword 202–203
field separators 64
fig terminal 234
file keyword D6
files
accessing columns 67–70
by position or name 68–69
column-access functions 69–70
pseudocolumns 69
file format options 63–66
comments 63–64
field separator 64
missing values 65
number formats 63
strings in data files 66
metadata in data files 75–76
pseudofiles 70–75
generating data 75
heredocs 72–73
reading data from standard input 71–72
reading data from subprocess 74
writing to a pipe 74
standard data-file format 56–59
comments and header lines 58
selecting columns 58–59
structured data sets 59–63
multiple data sets per file 59–61
records spanning multiple lines, the every
directive 62–63
fill, styles for 202–203
fillcolor (fc) keyword 104, 202–203
filled styles 114–115
filledcurves style 114
fillsteps style 114
fillstyle (fs) keyword 104, 202–203
financebars style 111
first coordinate system F6
fit command 278, F18–F19, F21–F23
managing fitting parameters F23
options for F24–F27
specifying columns for data and weighting
factors F22
variables set by F23
FIT_ prefix, for internal variables 93
FIT_CONVERGED variable F23
FIT_COV_ variable F26
FIT_LOG variable F26
FIT_NDF variable F23

[[P360]]
FIT_NITER variable F23
FIT_P variable F23
FIT_SCRIPT variable F26
FIT_STDFIT variable F23
FIT_WSSR variable F23
fixed plot range 258
flicker effect 258
float keyword D8
floating average 316
floor(x) function F12
flushing, buffers 211–212
font handling, unified 14
font keyword 214–215
font option 135
font substitution 215, 217
fontconfig utility 213, 215
Fontmatrix 84
fonts
resolution of 215–216
selection of 214–215
fontscale sub-option 212, 221
for construct 325
for loop 91
frac keyword 189, D19
fractal 6
fraction keyword E13
frequency keyword 45
front keyword 129
fs (fillstyle) keyword 202–203
fsteps style 112
function styles 200
functions F4
built-in 36–37
defining palettes using D6–D7
rand(0) 300
sampling rate for 32–33
strings as 79
user-defined 37–39
functions feature D10
functions keyword D6
G
g default hotkey binding 270
gamma(x) function F11
gauss set dgrid3d keyword C19
geo palettes D13
geo scale D13
gif bitmap terminal 233
global styles 200–203
arrow styles 202
data and function styles 200
fill styles 202–203
line styles 201
other global styles 203
glyphs 84
GNFONTPATH variable 277
GNPLOT_DEFAULT_GDFONT variable 277
GNPLOT_FONTPATH variable 277
GNPLOT_PS_DIR variable 277
GNU software, vs. gnuplot 12
GNUFITLOG variable 278
GNUHELP variable 277
gnuplot
building from source 348–351
layout of source tree 349
obtaining development version from cvs
348–349
on Mac OS X 351
on Unix 350–351
on Windows 351
calling from other programs 250–254
from Perl 250–251
from Python 251
helpful hints 252–254
defined 3
inspecting compile-time options 346
installing prebuilt package 347–348
on Linux 347
on Mac OS X 347–348
on Windows 348
limitations of 13
reasons for using 12–13
release and development versions 346–347
resources 352
version 5 13–15
vs. GNU software 12
websites 348
gnuplot command 248, 347
Gnuplot Cookbook 352
Gnuplot Tricks 352
GNUPLOT_FONTPATH environment
variable 230
GNUPLOT_LIB variable 264, 277
Gnuplotting 352
GNUTERM variable 277
GPFUN_ prefix, for internal variables 93
gprintf() function 134
GPVAL_ prefix, for internal variables 93
GPVAL_TERM_SCALE variable 208
GPVAL_TERM_XMAX variable 208
GPVAL_TERM_XMIN variable 208
GPVAL_TERM_XSIZE variable 208
GPVAL_TERM_YMAX variable 208
GPVAL_TERM_YMIN variable 208
GPVAL_TERM_YSIZE variable 208
gradient color D1
graph area E6
graph keyword 206
Graphic Discovery 292, 310, 344

[[P361]]
graphical analysis 9–11
benefits 11
defined 3
limitations of 11
logarithmic plots 295–299
large variations in data 295–296
power-law behavior 298–299
multivariate data sets 328–338
distribution by level 331–332
distribution of values by attribute 329–330
overview 329
parallel-coordinates plot 335–338
scatter-plot matrix 333–335
organizational issues 308–311
input data files 309–310
lifecycle of graphs 308–309
output files 310–311
pie charts 307
point distributions 299–304
cumulative distribution functions 303–304
jitter plots and histograms 300–301
kernel density estimates and rug plots
302–303
summary statistics and box plots 300
presentation graphics 311–313
ranked data 304–306
reasons for using 11
representing relationships 290
highlighting trends 292
scatter plots 290–291
time-series plots 315–327
changing composition and stacked
curves 325–327
differencing time series 318–319
double exponential smoothing 318
exponential smoothing 316–318
monitoring and control charts 319–325
plotting Apache web server log 315–316
visual perception 338–342
banking 338–340
judging lengths and distances 340–342
plot ranges and whether to always include
zero 342
graphical analysis techniques, changing
appearance 338
graphicx package 222, 225
graphs
customizing elements of 103–105
inline customizations 103–105
line options 105
exporting 26–28
using clipboard 26–27
using GUI button 26
using terminals 27–28
legend of 137–144
appearance 139–140
default settings 143–144
explanations 140–143
layout 139
placement 138–139
turning on and off 138
lifecycle of 308–309
parallel-coordinates graphs E19–E20
presentation 10
redrawing 97
scatter plot 22
sharing common axis E7–E8
within graphs E9
grayscale palette D9–D10
Green, J. J. D31
grid cbtics option D17
grid format C14
grid mcbtics option D17
GUI button, exporting graphs using 26
H
-h command-line option 278
h default hotkey binding 270
Handbook on Splines for the User 295
hann set dgrid3d keyword C19
hashmark (#) 20, 26, 58
header lines 58
header option 227
heads keyword 132
heatmaps D1
help command 30
--help command-line option 278
help expressions functions 36, F11
heredocs, reading and writing 72–73, 90
histeps style 112, E23
histogram error bars E25
histograms 300–301, E23–E27
history, of commands 96–99
general history feature 97–98
redrawing graphs 97
restoring session defaults 98–99
Holt-Winters method 316
Home system key block 272
HOME variable 278
horizontal keyword 139
Hornik, Kurt D31
hotkeys 264
custom 271–273
bind command 271–272
examples 272–273
default hotkeys 270
See also mousing
HSV (hue-saturation-value) 184, D3
hsv2rgb() function 184, 190
hue 184

[[P362]]
hypertext directive 117
hypertext option 135
I
ibeta(p, q, x) function F11
id attribute 231
if statement 237
igamma(a, x) function F11
imag(x) function F13
images, using false-color plots with D26–D28
Impossible Gnuplot Graphs 352
impulses 112–114
\includegraphics command 222
incremental keyword C12
independent variable F1
index directive 61, 63
indexed lookup 182, 187–188
indexing strings 81
initialization. See startup configurations and
initialization
inline loops 90–92
loops over numbers 90–91
loops over strings 91–92
input data files 309–310
input option 227
insets E1
inspecting compile-time options 346
INSTALL file 349–351
INSTALL.gnu file 349
installing prebuilt package 347–348
on Linux 347
on Mac OS X 347–348
on Windows 348
int keyword D8
int(x) function F12
interactive terminals 232–233
aqua terminal 233
common options 232
qt terminal 233
windows terminal 233
wxt terminal 233
interactive workflow
extending command set 264–266
using eval 265
using scriptlets 264
extracting specifics from command files
263–264
using macros 266–267
using variables 266
internal variables 93–96, 207–208
interpolating splines 294
interpolation curves 46–48
Bézier approximations 48
spline interpolations 46–48
interquartile range E11
interval keyword C13
inverf(x) function F11
inverse Gaussian distribution function F14
invert keyword 139
invnorm(x) function F11, F14
iterating over files 240–241
making data comparable 240–241
plotting several files 240
iteration, defined 10
J
jitter plots 299–301
Journal of Statistics Education Data Archive 353
jpeg bitmap terminal 233
jsdir option 230–231
K
kdensity keyword 45
Kelley, Colin (gnuplot author) 12
kernel density estimates 49–50, 302–303
key bindings D30
key default hotkey binding 270
key, defined 22
keywords
offset E4
scale E4
knots 294
known functional form F18
L
L default hotkey binding 270
l default hotkey binding 270
label() function 275
labels, placing with mouse 274–275
labeltag variable 274
labeltext variable 274
lambertw(x) function F12
landscape orientation 312
large variations in data 295–296
LaTeX 221–229
generating graph using 228–229
including graph in document 222–223
using cairolatex terminal 224–228
example 224–225
options for 227–228
layers 129–130
layout directive E3
layout feature E3–E4
layout keyword E3

[[P363]]
lc keyword 195
Left arrow key 272
left keyword 138
legends, of graphs 137–144
appearance 139–140
default settings 143–144
explanations 140–143
layout 139
placement 138–139
turning on and off 138
lengths
judging 340–342
view point using C10
lgamma(a, x) function F11
lifecycle of graphs 308–309
limitations of gnuplot 13
line types, special 200
linear keyword C13
linecolor keyword 104, 182
linecolor variable 119, E22
lines
blank 60
customizing types of 199–200
dash pattern 196–198
explicit tuples 197–198
symbolic strings 196–197
styles for 107, 201
types of 198
linespoints style 106–108, 189
linestyle keyword 104
linetype (lt) keyword 103–104, 135
linewidth keyword 104
linewidth option 233
linewidth sub-option 212
link command F16–F17
linking axes 150–153
Linux, installing prebuilt package on 347
Lissajous figures F2
live data stream, continuously monitoring
256–260
using drivers to monitor arbitrary data
sources 259–260
using gnuplot to monitor files 256–259
lmargin keyword 138
load command 25, 243–245, 248, 264, 267–268,
272, D8
loadpath option 264
local variables, simulating 245
locales 168–169
locations 128–129
log-log plots 43
logarithmic plots 42–45, 295–299
large variations in data 295–296
power-law behavior 298–299
logarithmic scaling, of colorbox D19
loops and conditionals 237–243
iterating over files 240–241
making data comparable 240–241
plotting several files 240
making graph paper 239
Newton’s method 242–243
Taylor series 242
loops. See inline loops
lw option 233
M
m_tics family of options 164
Mac OS X
building gnuplot from source on 351
installing prebuilt package on 347–348
macros
in interactive workflow 266–267
strings as 79
magnet E9
make distclean command 351
make install command 351
Mandelbrot set, coloring D28–D29
margins 128, 207, E4–E8
margins keyword E6–E7
markup 279
Marquardt-Levenberg method F19
math 34–39
built-in functions 36–37, F10–F12
complex numbers F12–F14
curve fitting F18–F27
background F18–F19
example F19–F21
fit command F22–F27
practical advice F24
expressions 34
mathematical expressions 34–36
mathematically undefined values 39
nan (not-a-number) 39
non-Cartesian coordinates F3–F7
cylindrical and spherical coordinates F6–F7
polar coordinates F4–F6
overview 34
parametric plots F1–F3
probability plots F14–F17
user-defined variables and functions 37–39
vector fields F7–F10
plane vector fields with plot F7–F9
three-dimensional vectors with splot F9–F10
matrix format C16
matrix keyword C17
maxcols keyword 139
MAXITR F13
maxrows keyword 139
mcbtics option D17

[[P364]]
mcsplines keyword 45–46
median E11
merit function F18
metadata 56, 75–76
minimal context for data 126–127
mirror keyword F5
missing values 65
model keyword D3
monitoring and control charts
cusum plots 322–325
identifying outliers 321–322
making data comparable 319–321
monitoring live data stream, continuously
256–260
using drivers to monitor arbitrary data
sources 259–260
using gnuplot to monitor files 256–259
mono option 214, 221
Moreland, Kenneth D31
MOUSE_ prefix, for internal variables 93
MOUSE_ALT variable 273
MOUSE_BUTTON variable 273
MOUSE_CHAR variable 273
MOUSE_CTRL variable 273
MOUSE_KEY variable 255, 273
MOUSE_KEY_WINDOW variable 272–273
MOUSE_SHIFT variable 273
MOUSE_X variable 255, 273
MOUSE_X2 variable 255, 273
MOUSE_Y variable 255, 273
MOUSE_Y2 variable 255, 273
mousing 270–271
adjusting viewing angle C8–C9
capturing mouse events 273–274
placing arrows with mouse 275
placing labels with mouse 274–275
See also hotkeys
multiple axes 147–153
linking 150–153
plotting with two coordinate systems 148–150
terminology 147–148
multiple data sets per file 59–61
selecting data sets by name 61
selecting data sets by position 61
multiple lines, records spanning 62–63
multiple steps 210
multiplication (*) operator 35
multiplot E1
accommodating marginal labels with margins
and spacing E4–E8
graphs within graphs E9
layout options and set multiplot command
E2–E4
regular arrays of graphs with layout E4
using multiplot mode E1–E2
multiplot layout E4
multiplot mode E16, E20
multivariate data sets 328–338
distribution by level 331–332
distribution of values by attribute 329–330
overview 329
parallel-coordinates plot 335–338
scatter-plot matrix 333–335
multivariate visualization 115–120
arrows 118–120
labels 116–118
point size 116–118
shapes 118–120
Murrell, Paul D31
N
n lines 58
name keyword 96
name option 230
name, accessing columns by 68–69
NaN (not a number) 39, 65
ne operator 80
net inflow function 340
newhistogram command E26
NEWS file 349
NEWTON_ 245
Newton’s method 242–243, 245–246
Nimbus Sans L 84
\NNN control character 218
\NNN\NNN control character 218
noautoscale keyword 155
nodes, defining palettes through D4–D6
noenhanced keyword 135
nomirror 157
non-Cartesian coordinates F3–F7
cylindrical coordinates F6–F7
polar coordinates F4–F6
spherical coordinates F6–F7
nonlinear least-square fits F18
nonuniform matrix format C17
nooffset keyword C4
nooutput keyword 96
noraise option 232
noratio option 204
norm(x) function F11
normalize data 240
nosquare option 204
notitle option 126
NTSC luminance D7
number formats 63
Number theory 37
numbers, loops over 90–91

[[P365]]
O
<object> tag 230
off keyword E16
offset argument C3
offset command 135, 159
offset keyword C4, E4
onload attribute 231
opaque keyword 139
open() function 253
organizational issues 308–311
input data files 309–310
lifecycle of graphs 308–309
output files 310–311
outliers E12, F27
output formats. See terminals and output formats
output setting 268
P
-p command-line option 278
PageDown system key block 272
PAGER variable 278
PageUp system key block 272
palette keyword 182, 189
palettes 182, D1
color models and components D3–D4
colorbox D16–D19
colored surface plots with pm3d D21–D22
appearance options for D21–D22
elevation and color D22
creating D3–D16
defining through nodes D4–D6
defining using functions D6–D7
displaying D7–D8
examples of D9–D16
for segregation tasks D12–D13
four industrial-strength palettes D11–D12
geo palettes D13
grayscale D9–D10
standard rainbow D9–D10
three simple workhorses D10–D11
tree rings D13–D16
exporting D8
further reading about D31
interactive palette explorer example D29–D30
mapping plot range to D17–D19
logarithmic scaling of colorbox D19
outliers D18–D19
querying palette definition D8
saving D8
using D19–D22
parallel coordinates 335, E1, E18–E23
highlighting subset of records E21–E23
improving appearance E21
parameters, passing to scripts 244–245
parametric mode F7
parametric plots F1–F3
pattern keyword 203
pause -1 command 255
pause command 254–255, 258
pause mouse command 255
pdf keyword 227
PDF, generating with cairo-based terminals
220–221
pdfcairo terminal 213, 218, 227, 229, 233–234
pdflatex 228
Perl, calling gnuplot from 250–251
--persist command-line option 278
persist option 232
phase transition E9
pie charts 307
pipe, writing to 74
Plis, A. I. 295
plot ... smooth cumul command F14
plot command 6, 9, 17, 211–212, 232, 237, 241,
243, 249, 251–253, 259, 267–269, 277,
279–280, 301, 316–318, 322, C1, D29,
E3, E6, E21, F6–F8, F22
data transformations 39–42
logarithmic plots 42–45
plotting data 33–34
plotting functions 32–33
smooth interpolation and approximation 45–51
deduping repeated entries 51
interpolation curves 46–48
point distributions 49–51
See also math
plot option 211
plot sin(x) command 17
plot styles, box 112
plot... smooth kdens command 93
plots
abbreviations and defaults 24–25
box 112
invoking gnuplot and first plots 17–20
plotting data from file 20–24
ranges 18
pm3d
colored surface plots with D21–D22
appearance options for D21–D22
elevation and color D22
using false-color plots with D25–D26
png bitmap terminal 233
PNG, generating with cairo-based terminals
220–221
pngcairo terminal 213, 218, 227, 229, 233–234
point distributions 49–51, 299–304
cumulative distribution functions 50–51,
303–304

[[P366]]
point distributions (continued)
jitter plots and histograms 300–301
kernel density estimates 49–50, 302–303
summary statistics and box plots 300
pointinterval (pi) property 108
pointinterval keyword 104
pointintervalbox feature 108, 282
points
false-color plots using D23–D25
styles for 106–107
types and shapes 195–196
points option C14
points style 106–107
pointsize keyword 104
pointsize variable 116–117
pointtype (pt) keyword 104, 106
polar coordinates F4–F6
polar option 166
polar variable 272
polishing 10
Popen facility 251
position, accessing columns by 68–69
PostScript file D7
postscript terminal 218, 233
power-law behavior 298–299
--prefix=PREFIX control 350
presentation graphics 10, 311–313
Primer of Analytic Number Theory, A 37
print command 88–89
probability plots F14–F17
pseudocolumns 55, 69
pseudofiles 55, 70–75
generating data 75
heredocs 72–73
reading data from standard input 71–72
reading data from subprocess 74
writing to a pipe 74
Python, calling gnuplot from 251
Q
q default hotkey binding 270
qt terminal 27, 210, 233, 267, 348, 350
qt4 value 350
qt5value 350
querying palette definition D8
question mark (?) character 98
quiet option 98, F25
quit command 245
R
r default hotkey binding 270
radius F4
rainbow, standard D9–D10
ramp color D1
rand(0) function 300
rand(x) function 37, F12
range keyword E20
ranked data 304–306
ratio option 204
README file 349
real(x) function F13
recalling commands 18
recursive F13
redrawing graphs 97
refresh command 97
refresh option 211
relationships, representation of 290
highlighting trends 292
scatter plots 290–291
release and development versions 346–347
release packages 351
RELEASE_NOTES file 349
relief map C1
replot command 28, 271, 274
replot option 211
reset bind command 99, 272
reset command 29, 98, 280
reset errors command 99
reset session command 199, 280
restoring, session defaults 98–99
Return main key block 272
return statement 245
reverse keyword 139
RGB (red-green-blue) 183, D3
rgb keyword 182
Right arrow key 272
right keyword 138
rmargin keyword 138
Rogowitz, Bernice D31
rotate command 159
rotate parallel directive 136
round line end 197–198
rounded control 221
rowsfirst keyword E3
rowstacked style E26
rug plots 302–303
S
s(n) function 242
samplen keyword 139
sampling rate for functions 32–33
saturate operator 185
saturation 184
save command 25, 243, 263, E2
saving palettes D8

[[P367]]
sbezier keyword 45
scalable graphics for web 229–231
canvas terminal 230–231
svg terminal 229–230
scale keyword C10, E4
scale parameter 157
scaling law 8
scanf() functions 76, 171
scansautomatic directive D22
scansbackward directive D22
scansforward directive D22
scatter plots 289
graph 22
splines 294
scatter-plot matrix 333, 335
scientific notation 63
screen keyword E7
screen system E4
screen. See canvas
<script> tag 232
scripting
batch processing 247–249
calling gnuplot from other programs 250–254
from Perl 250–251
from Python 251
helpful hints 252–254
command files 243–247
export script example 246–247
scripts as subroutines 244–246
continuously monitoring live data stream
256–260
using drivers to monitor arbitrary data
sources 259–260
using gnuplot to monitor files 256–259
loops and conditionals 237–243
iterating over files 240–241
making graph paper 239
Newton’s method 242–243
Taylor series 242
scriptlets, extending command set using 264
segregation tasks, palettes for D12–D13
self-contained files 309
self-explanatory files 309
semantics 279
semi-log plots 43
semicolon (;) 26
sensible defaults feature 24
separate symbols 285
separation keyword E16
serial box-and-whisker plots E14–E17
appearance options for E15–E16
example of array of E16–E17
session defaults, restoring 98–99
set _range command 154, E20
set _tic add command 164
set _tics command E20
set _tics format command 160
set angle command 119
set arrow command 130–132
set arrow facility command 275
set arrow style command 115, 202
set autoscale command 155
set bars command 109, 111
set border command C6–C7
set boxwidth command 114, E25
set cblabel command D17
set cbrange command D17–D18
set cbrange option D18
set clip command 206
set clip points command 206
set cntrlabel command C12
set cntrlabel format command C13
set cntrlabel onecolor command C12
set cntrlabel parameter command C13
set cntrlparam command C12
set cntrparam command C13
set colorbox command D16
set colorsequence classic command 14
set colorsequence facility 194
set command 28–29, 237, 252
set contour command C10
set contour option C10
set dashtype command 196
set datafile separator command 290
set dgrid3d facility C19, D22
set dummy command 38
set fit command F18, F23–F24
set fit covariancevariables command F26
set fit errorscaling command F26
set fit errorvariables command F25
set fit limit command F25
set fit limit_abs command F25
set fit logfile command F25
set fit maxiter command F25
set fit prescale command F24–F25
set fit script command F26
set fit start_lambda command F25
set format command 159
set grid polar command F5
set hidden3d command C3–C4
set history quiet command 98
set isosamples command C3, C5, C11
set key command 126
set key noautotitle command 140
set label command 136
set label style command 115
set linetype command C12
set linetype cycle facility 199
set link command F16
set link facility 151–152

[[P368]]
set link x2 command 152
set link y2 command 152
set loadpath command 264
set logscale cb command D17, D19, D29
set logscale y command 153
set macro command 87
set mapping facility F3, F6
set margin command 207
set margins command E7
set mouse command 271, 273
set multiplot command E1, E3, E6
set multiplot layout command E4, E6, E8
set multiplot next command E3
set mxtics 5 command 164
set object command 136
set object style command 115
set offsets command 206
set origin command 204, E2, E4, E9
set output command 27–28, 211–212, 224, 229–
230, 249, 268
set palette command D1, D3–D4, D6, D8–D9, D12
set palette cubehelix command D6
set palette defined (...) command D5
set palette file ... command D6, D8
set palette functions command D8
set palette rgbformulae command D7
set paxis command E20
set pm3d corners2color command D26
set pm3d hidden3d command D21
set pm3d mode command D21
set pointsize command 103, 212, 221
set polar facility F3
set print command 73, 88–89, D8
set raxis command F5
set rrange command F6
set samples command 32, 75, 89, C4, C11
set samples parameter command C13
set size command E2, E4
set size square command 335
set style boxplot command 203, E12–E13, E15
set style circle setting command 118
set style command 200, 203, E24
set style fill command 114, 137, E13
set style histogram clustered command E24
set style histogram clustered gap 2 command E24
set style histogram columnstacked style
command E26
set style histogram command 203
set style line command 201
set style rectangle command 137
set style textbox command 203
set surface command C3
set table command 73, 89
set terminal ... close command 232
set terminal ... size... command 335
set terminal command 27–28, 211–212, 214, 232
set terminal pop command 211
set terminal push command 211
set termoption command 212, 280
set timefmt command 170–171, 174
set title command 135–136, E3
set urange command F3
set view command C8–C9
set view equal xy command C10
set view equal xyz command C10
set view map command C10
set vrange command F3
set x2tic add ( ... ) command F17
set xdata command 170
set xdata time command 170, 175
set xdtics command 170
set xlabel command 126–127, C7
set xmtics command 170
set xrange command 258
set xrange plot range command F2
set xtic command E16
set xtics command F5
set xtics format command 170
set xtics pi command 167
set xyplane command C8
set xzero axis command 167
set ylabel command 126–127, C7
set yrange plot range command F2
set ytics command E20, F5
set zeroaccess command 158
set zlabel command C7
set[...] command 130
setborder command 205
setup script 243
sgn(x) function F12
shell commands, invoking from gnuplot 268–269
SHELL variable 278
show all command 29
show bind command 272
show colornames command 183, D4
show command 29, 131
show functions command 29
show label command 274
show loadpath command 276
show palette command D8
show variables all command 94
show variables command 29
show version long command 29, 87
show version long pertinent command 346
show version pertinent command 346
sin(x) function F11
single blank lines 60
single plot E4
single-quoted strings 80
sinh(x) function F11

[[P369]]
size directive 221
size option 218
size, of canvas 204
skip directive 58
smooth cnormal command 50–51
smooth cumul command F14
smooth cumulative feature 304
smooth directive 45–46, 49
smooth frequency function 51, 301–302, 315
smooth interpolation and approximation 45–51
deduping repeated entries 51
interpolation curves 46–48
Bézier approximations 48
spline interpolations 46–48
point distributions 49–51
cumulative distribution functions 50–51
kernel density estimates 49–50
smooth kdens command 49
smooth kdensity feature 96, 302
smooth sbezier command 48
smooth surfaces, dgrid3d facility C17–C20
smooth unique command 51
smoothing 319–325
smoothing splines 294
source tree, layout of 349
space bar default hotkey binding 270
spacing directive E4
spacing keyword 139, E6–E7
spacing value E8
special line types 200
special plots
box-and-whisker plots E10–E17
appearance options E13–E14
individual E10–E14
semantics of E11–E13
serial box-and-whisker plots E14–E17
histograms E23–E27
multiplot E1
graphs within graphs E9
layout options and set multiplot
command E2–E4
marginal labels with margins and
spacing E4–E8
regular arrays of graphs with layout E4
using multiplot mode E1–E2
parallel coordinates E18–E23
parallel-coordinates graphs E19–E20
spectrum, features of 144–145
spherical coordinates F6–F7
spline interpolations 46–48
splines 294
splines algorithm C18
splot command 211, 243, 277, C1–C3, C15–C16,
C20–D1, D20–D22, D25, F3
sprintf() function 134, 240–241
sqrt(x) function F11
square control 221
square line end 197–198
src/ file 349
stacked curves, changing 325–327
stacked histogram style E25
stacking order 128
standalone mode 227, 231
standalone option 230
standard data-file format 56–59
comments and header lines 58
selecting columns 58–59
standard rainbow D9–D10
startup configurations and initialization 275–278
command-line flags 278
environment variables 277–278
startup and initialization files 276–277
StatLib Datasets Archive 353
stats command 94, 96, 241, 258–260, 299, 321,
332, F17
STATS_ prefix, for internal variables 93
steps style 112
Stopple, J. 37
strftime() function 70, 176–177
stringcolumn(i) function 122
strings 79–85
data files 66
executing with eval 86–87
in data files 66
loops over 91–92
quotes 80
string expressions in commands 86
string macros inside commands 87
string operations 80–82
strptime() function 70, 176–177
structure matrix format C16
structured data sets 59–63
multiple data sets per file 59–61
selecting data sets by name 61
selecting data sets by position 61
records spanning multiple lines 62–63
styles 22, 101–105
boxes 112–114
choosing inline using with keyword 101–102
customizing graph elements 103–105
inline customizations 103–105
line options 105
dots 108
filled styles 114–115
global 200–203
arrow styles 202
data and function styles 200
fill styles 202–203
line styles 201
other global styles 203

[[P370]]
styles (continued)
impulses 112–114
lines 107
linespoints style 107–108
multivariate visualization 115–120
arrows 118–120
labels 116–118
point size 116–118
shapes 118–120
points 106–107
reasons for using 101
steps 112
time-series styles 111–112
with error bars 108–110
stylesheets 263–264, 279–285
subprocess module 251
subprocess, reading data from 74
subroutines, scripts as 243–246
Newton’s method 245–246
passing parameters to scripts 244–245
simulating local variables 245
sum construct 237, 242, 325, 327
summary statistics 300
surface plots C1–C6
coordinate axes C6–C10
base plane C7–C8
borders plane C7
plotting data from a file using splot C14–C17
grid format C14–C16
matrix format C16–C17
smooth surfaces C17–C20
special options for C3–C6
sampling frequency for plotting functions
with splot C4–C6
set hidden3d option C3–C4
set surface option C3
splot command C2–C3
view point C8–C10
bird’s-eye view C10
unit length and aspect ratio C10
using mouse C8–C9
using set view C9
svg terminal 210, 229–230, 234
sym(s) function 122
synopsis C7, C18
system() function 268–269
T
Tab main key block 272
tags, identifying decorations using 130–131
tail command 259
tail facility 257–258
tan(x) function F11
tanh(x) function F11
Taylor expansion 18
Taylor series 242
terminal abstraction 210–214
terminal facility 210, 234
terminal option 211
terminal pop pseudoterminal 212
terminal push pseudoterminal 212
terminal setting 268
terminals 209–210
terminals and output formats
capabilities and test command 212–213
enhanced text mode 217–219
font resolution 215–216
font selection 214–215
generating PNG and PDF with cairo-based
terminals 220–221
interactive terminals 232–233
aqua terminal 233
common options 232
windows terminal 233
wxt and qt terminals 233
scalable graphics for web 229–231
canvas terminal 230–231
svg terminal 229–230
terminal abstraction 210–214
using gnuplot with LaTeX 221–229
generating graph using LaTex 228–229
including graph in document 222–223
using cairolatex terminal 224–228
workflow 210–212
changing default terminal properties 212
flushing buffers 211–212
push and pop pseudoterminals 212
scaling complete plot up or down 212
standard workflow 211
test command 135, 212–213
test palette command D7–D8
text labels 134–136
axis labels 136
title label 135–136
textcolor (tc) keyword 104, 117, 135, 182
textual output generation 88–90
print command 88–89
reading and writing heredocs 90
set print command 88–89
set table command 89
with table style 89
tgif terminal 234
thermodynamics of phase transitions E9
three-dimensional vectors, with splot F9–F10
tic marks 6, 156–167
appearance and placement 157–159
grid and zero axis 166–167

[[P371]]
tic marks (continued)
labels for 159–163
formatting 159–160
scientific notation and enhanced text
mode 161
location and frequency of 163–165
adding and overriding individual tic
marks 164
minor tic marks 164
overview 156
reading from file 165–166
tics keyword E20
ticslabels() function 75
tikz terminal 224, 228
time series 168, 170–177
date and time information 176–177
example 175
input 171–174
months and weekdays 169–170
output 174
styles for 111–112
working in time-series mode 174–175
Time Series Data Library 353
time-series plots 315–327
changing composition and stacked curves
325–327
differencing time series 318–319
double exponential smoothing 318
exponential smoothing 316–318
monitoring and control charts
cusum plots 322–325
identifying outliers 321–322
making data comparable 319–321
plotting Apache web server log 315–316
smoothing and differencing 319–325
time() function 176
timecolumn() function 70, 76, 176–177
times variable 272
title columnhead 141
title directive 9, 22, E3
title keyword 22, 140, 142–143
title label 135–136
title option 139, C2
title strings 66
tm_hour() function 176
tm_mday() function 176
tm_min() function 176
tm_mon() function 176
tm_sec() function 176
tm_wday() function 176
tm_yday() function 176
tm_year() function 176
tmargin keyword 138
to keyword 131
top keyword 138
trailing average 316
trange plot range F2
transformation F27
transformations, data 39–42
transparency 185–187
transparent keyword 203
Treinish, Lloyd D31
trianglepattern keyword C3–C4
U
-u command 257, 260
u default hotkey binding 270
u variable F3
UCI Machine Learning Repository 290, 329, 353
undefine command 245
undefined command 73
undefined values 39
underscore (_) symbol 156, 161
Unicode 14
unique keyword 45
Unix, building gnuplot from source on 350–351
unset arrow command 131
unset colorbox command D17
unset command 29
unset label command 274
unset multiplot command E1–E2
unset raxis command F5
unset xdtics command 170
unset xmtics command 170
Up arrow key 272
update command F18
upset session 99
upwards keyword E3
user keyword D16
user-defined variables and functions 37–39
using directive 21–22, 25, 40, 58, 252, 266, C2,
D6, D20, D22, F4, F22
UTF-8 84–85
V
-V command-line option 278
v variable F3
valid() function 70
value() function 241
values, missing 65
variable keyword 182, 189
variables
environment variables 277–278
in interactive workflow 266
internal 93–96
local, simulating 245
set by fit command F23
user-defined 37–39

[[P372]]
vector fields F7–F10
plane vector fields with plot F7–F9
three-dimensional vectors with splot F9–F10
verbose F25
--version command-line option 278
vertical keyword 139
via clause F21
view point C8–C10
bird’s-eye view C10
unit length and aspect ratio C10
using mouse C8–C9
using set view C9
viewers, external 267–268
visual perception 338–342
banking 338–340
judging lengths and distances 340–342
plot ranges and whether to always include
zero 342
Visualizing Data 310
W
w pm3d style D1
Wainer, Howard 292, 310, 344
weighted cubic splines 292
weighted least-squares merit function F18
West, G. B. 299
while loop 237, 243, 255, 260
whiskerbars keyword 112
Wierstorf, Hagen D31
Williams, Thomas (gnuplot author) 12
Windows
building gnuplot from source on 351
installing prebuilt package on 348
windows terminal 233
with arrows style 115
with boxes style 301
with boxplot style 299, 332, E10
with boxxyerrorbars style D25
with candlesticks style E13
with circles style 115, 307, 24
with directive 22
with ellipses style 115
with histogram style E24
with image style D25–D29
with keyword 101–102
with labels style 82, 90, 115–118, 163, C13
with lines style 22, 75, 106
with linespoints style 22, 108
with option C2
with points style 22, 106, D24, D28–D29
with rgbalpha style D28
with table style 89
with vectors style 118, 303, D24, F1, F7, F9
with xyerrorbars style 266–267
--with-qt option 350
--with-qt=no option 350
--with-readline option 350
--with-readline=builtin option 350
--with-readline=DIR option 350
--with-readline=gnu option 350
--with-wx=DIR option 350
Witten, T. A. 6
word function 238, 241, 332–334
word() function 92
words() function 92, 238
workflow 266–267
changing default terminal properties 212
scaling complete plot up or down 212
See interactive workflow
wxt terminal 27, 210, 213, 233, 267, 348, 350
X
x variable 245, C2
X11 format 183
x11 terminal 27, 234
xmtics command 169
xrange option C3
xrange plot range F2
xtic() function 165, E25
xticlabels() function E25
xyplane option C7–C8
Y
y variable C2
yerrorlines style 122
yrange option C3
yrange plot range F2
ytic(1) function 305
Z
z direction C1
z keyword 192
z range C8
Zeileis, Achim D31

[[C1]]
== Appendix C Surface and contour plots

The plot command discussed in this book creates graphs that show how one variable
(y) behaves as a function of another one (x). But what if you want to show how some
quantity depends on two independent variables? In other words, how can you best
visualize a single “output” variable as a function of two “input” variables? That’s basi-
cally the problem cartographers have: show a quantity (the elevation above sea level
or the type of ground cover) as a function of two coordinates (the position on the sur-
face). In gnuplot, you have essentially the same options cartographers have:
•  Create a rendering of a raised surface. Cartographers call this a relief map; I’ll
refer to it as a surface plot.

•  Create a contour plot by looking straight down onto the coordinate plane and
using contour lines (similar to the ones found on topographic maps) to indi-
cate the elevation (or whatever the dependent variable represents).

•  Use color to create a false-color plot (what is colloquially known as a heatmap).
Surface and contour plots are treated in this appendix; false-color plots are the topic
of appendix D. Surface and contour plots are created using gnuplot’s splot com-
mand (short for “surface plot”). It’s a close relative of the familiar plot command;
most of what you already know will carry over directly.

Neither surface nor contour plots deal very well with noise. This means it can be
difficult to use either of them with real data—smooth functions are easier, and that’s
why most of the examples in this appendix show functions only. We turn to data later
in this appendix and discuss the different file formats available. (Also keep in mind
that false-color plots may be a better approach for noisy data altogether.)

=== C.1 Surface plots

Surface plots (and contour plots) are created using the splot command. Its syntax is
very similar to the syntax for the plot command. The differences are largely due to
the need to handle one additional dimension, which I’ll refer to as the z direction.
Here’s an example of the splot command in action (also see figure C.1—if your
plot doesn’t look anything like figure C.1, keep reading; I’ll tell you about the options
you need to adjust manually to get a satisfactory result shortly):
splot [-2:2][-2:2]
➥ exp(-(x**2 + y**2))*cos(x/4)*sin(y)*cos(2*(x**2+y**2))

[[C2]]
You can see how the function must depend on two variables, x and y . Corresponding
to the two variables, there are two brackets to limit the plot range. A third bracket can
be added to restrict the plot range in the new, “vertical” z direction.


==== C.1.1 The splot command

Most of the additional options applicable to the plot command are available for the
splot command as well. You can also plot data from a file (see section C.4 later in this
appendix) and use many of the directives familiar from plot :
•  The title option is available to place a descriptive string into the key.
•  The using directive now requires three arguments to pick out the columns used
for the x, y, and z directions, respectively.

•  Similarly, you have to add a third bracket if you want to restrict the z range:
splot [xmin:xmax][ymin:ymax][zmin:zmax] ... .

•  Plotting styles are selected in the usual form through the with option. Not all
the styles described in chapter 6 are available with splot . Only points , lines ,
linespoints , and impulses can be used with splot ; in particular, this means
none of the styles drawing error bars are available.

Although we don’t show an example here, nothing prevents you from plotting several
functions (or data sets) simultaneously using splot : for example, splot f(x,y),
g(x,y) .

In addition to using , you can use index and every to plot only parts of a file. The
smooth directive (see chapter 3) isn’t available for splot , but you can apply data trans-
formations as part of the using directive, as discussed in section 3.3. Furthermore, the
dgrid3d option provides a way to calculate and plot a smooth approximation to a
noisy data set when using splot (see section C.5).

-2 -1.5
-1 -0.5
0 0.5
1 1.5
2
x
-2
-1.5
-1
-0.5
0
0.5
1
1.5
2
y
Figure C.1 Creating three-dimensional plots using the splot command:
splot [-2:2][-2:2] exp(-(x**2 + y**2))*cos(x/4)*sin(y)*cos(2*(x**2+y**2))

[[C3]]
.STYLE , DECORATIONS , AND AXES WHEN USING SPLOT
*****
*****
Global options can be used with splot in the same way as with plot . Both set style
function and set style data have the desired effect. In addition to the familiar
xrange and yrange options (see section 8.2), there’s a zrange option to control the
plot range globally.

Arrows and labels (but not objects) can be placed onto a three-dimensional graph
without problems. Just remember to provide a third value to each coordinate for the z
value (for example, set label "text" at -2,-3,1 ).

In contrast to plot , graphs generated with splot can have only a single coordinate
system. Therefore, all the options used to control the secondary coordinate system (see
section 8.1) have no meaning for graphs generated with splot . Also, the axes directive
can’t be used with splot . We’ll study tic marks and axes in more detail later, when we
discuss ways to choose the viewpoint for a graph created with splot in section C.2.

==== C.1.2 Special options for surface plots

There are three options specific to the appearance of a surface plot: set surface , set
hidden3d , and set isosamples .

.THE SET SURFACE OPTION
*****
*****

The set surface option turns rendering of the surface on or off. For surface plots,
this is of course not useful; but the splot command is also used to generate contour
and false-color plots, where an explicitly drawn surface is not desired.
By default, the surface is shown, but it can be switched off using the following
command:
unset surface
Switch the surface back on using set surface .

.THE SET HIDDEN 3 D OPTION
*****
*****

In figure C.1, the surface is opaque: parts closer to the observer obscure parts of the
surface further back. By default, this effect is off, and only a transparent wire mesh of
the surface is drawn. Figure C.2 demonstrates what a plot looks like if no opaque sur-
face is drawn.

To switch to an opaque surface rendering, use the set hidden3d option. You’ll
probably want to make opaque surfaces the default—for example, by including the
following line in your gnuplot startup file (see section 12.5):
set hidden3d
The hidden3d option can take a number of optional arguments. The most important
of these are offset and trianglepattern : 1
set hidden3d [ [no]offset {int:offset} ] [ trianglepattern {int:mask} ]
1
There are a few further options to hidden3d , most of which deal with certain edge cases that may arise when
making a surface plot containing undefined points or points outside of the z range. Check the standard gnu-
plot reference documentation if this is relevant to you.


[[C4]]
You can use the offset keyword to control the color and line type that are used for
the bottom side of the surface. As you know, gnuplot will cycle through all available
plot styles for each new data set (see section 9.3). Through the integer argument to
offset , you can control how far the internal style counter should be advanced from
the style used for the top side of the surface. By default, gnuplot chooses the next
available style. An argument of zero ( set hidden3d offset 0 ) draws both sides of the
surface in the same style. The same effect is achieved through the nooffset keyword.
Using the trianglepattern keyword, you can control which lines are drawn to
connect neighboring grid points. The argument to trianglepattern is an integer,
which is interpreted as a bitmask (see table C.1).

You can select any combination of bits. The default is 3, so that the surface is made up
of rectangular surface elements. When you use a value of 7, diagonal lines are also
drawn, so that the surface appears to be made out of triangles. Figure C.3 compares
different settings of this option.

.SAMPLING FREQUENCY FOR PLOTTING FUNCTIONS WITH SPLOT
*****
*****
In section 3.1, you learned to use the set samples option to control the number of
points where gnuplot evaluates a function (of a single variable) in order to plot it. When
plotting a function of two variables using splot , things are a bit more complicated.
If hidden3d is on, so that the surface is opaque, then set isosamples controls the
number of evaluation points, and these points are connected with straight lines to
Table C.1 Values used in the mask to the set hidden3d option
Bit position Value Description
0 1 Lines parallel to the x axis
1 2 Lines parallel to the y axis
2 4 Diagonal lines, from southwest to northeast
-2 -1.5
-1 -0.5
0 0.5
1 1.5
2 -2
-1.5
-1
-0.5
0
0.5
1
1.5
2
x
y
Figure C.2 The same plot as in figure C.1, but without the opaque surface effect.
Use set hidden3d to enable the drawing of an opaque, nontransparent surface.

[[C5]]
form the surface. If hidden3d is off, so that the surface is transparent, then set
isosamples still controls the number of grid points, but set samples controls the
number of evaluation points for each line in the grid.

The set isosamples command takes one or two integer values, which specify the
number of grid points in the x and y direction, respectively. If only a single value is
provided, it’s used for both directions:
set isosamples {int:xlines} [, {int:ylines} ]
By default, functions are evaluated on a 10×10 grid, which is too coarse to give a
good, smooth appearance of the plotted curve. I find values of around 30 to be
ideal—using an even finer grid brings little additional smoothness but leads to grid
lines overlapping each other unfavorably. You probably want to include the following
line in your gnuplot startup file:
set isosamples 30
Figure C.4 shows the same function plotted in figure C.1, but now plotted with the
default setting of set isosamples 10 .

TIP: Gnuplot’s default value of 10 for the set isosamples option is much too
small to give attractive graphs. Choosing a moderately higher number (such
as 30) will lead to much better results.

isosamples 90
trianglepattern 1
-2
-1.5
-1
-0.5
0
0.5
1
1.5
2
x
-2
-1.5
-1
-0.5
0
0.5
1
1.5
2
y
isosamples 60
trianglepattern 2
-2
-1.5
-1
-0.5
0
0.5
1
1.5
2
x
-2
-1.5
-1
-0.5
0
0.5
1
1.5
2
y
isosamples 60
trianglepattern 4
-2
-1.5
-1
-0.5
0
0.5
1
1.5
2
x
-2
-1.5
-1
-0.5
0
0.5
1
1.5
2
y
isosamples 40
trianglepattern 7
-2
-1.5
-1
-0.5
0
0.5
1
1.5
2
x
-2
-1.5
-1
-0.5
0
0.5
1
1.5
2
y
Figure C.3 Comparing different values of isosamples and hidden3d trianglepattern .
Except for the values of those two options, these graphs are identical to figure C.1.

[[C6]]
Special rules apply to the pseudofile ++ (see section 4.5). In this case, the number of
grid points used for drawing the surface is controlled by set samples for the x direc-
tion and by set isosamples for the y direction. To obtain behavior from the pseudo-
file ++ that is equivalent to a regular function plot, you need to assign the same value
to set samples and set isosamples , as in the following example:
f(x,y) = exp(-(x**2 + y**2))*cos(x/4)*sin(y)*cos(2*(x**2+y**2))
set samples 30
set isosamples 30
splot [-2:2][-2:2] "++" u 1:2:(f($1, $2)) w l
Finally, let me remind you that set samples and set isosamples are only relevant
when plotting functions and have no effect when plotting data from a file.

=== C.2 View point and coordinate axes

With three-dimensional plots, there’s a new problem that doesn’t exist with regular,
two-dimensional plots: they can be viewed from different positions and under different
angles. You must therefore choose a view point. Closely related is the issue of coordinate
axes: you need to provide a clear frame of reference so that the viewer can understand
from which position the graph is seen. And finally, you have to provide a scale and tic
marks if you want to convey quantitative information. Let’s look at all of that.

==== C.2.1 Borders and base plane

A regular (two-dimensional) plot has four borders that you can modify using the set
border option, as you’ve seen in section 9.5.2. For a surface plot, you can imagine the
entire surface embedded in a cube. You can use the set border option to switch each
individual edge of this cube on or off.

-1.5
-1 -0.5
0 0.5
1 1.5
2
x
-2
-1.5
-1
-0.5
0
0.5
1
1.5
2
y
Figure C.4 The isosamples option controls the number of nodes used to draw
the surface. Here, we use the default value of set isosamples 10 , whereas in
figure C.1, we used a much finer grid of set isosamples 30 .


[[C7]]
.BORDERS
*****
*****
The set border command takes an integer argument, which is interpreted as a 12-bit
bitmask; each bit turns one of the edges on or off. Table C.2 shows the bit positions for
each edge of the surrounding cube.

The default value is 31 when you use splot , turning on the four sides of the base and
the leftmost vertical axis. (No matter what’s specified in the set border option, bor-
ders other than the base are drawn only if set surface is true.)
You can place labels along the borders of the plot in the usual fashion using set
xlabel , set ylabel , and (only for splot ) set zlabel . In all graphs in this appendix,
I’ve made sure to use explicit labels on both the x and the y axes.

TIP: There is no “obvious” view point for surface plots; it often makes sense to
choose a different view point for each function or data set. Because of this, it
is essential that you tell the reader which axis is which by using explicit labels
on all axes.

Tic marks are drawn independently of the borders—see chapter 8 for all the options
available to control the drawing and placement of tics. Just keep in mind that the sec-
ondary coordinate system ( x2tics and so on) isn’t available; instead, there’s an addi-
tional set of options to control the appearance of tic marks in the z direction ( ztics
and so forth).

.THE BASE PLANE
*****
*****

By default, the plotted surface is elevated a certain distance above the base plan of the
surrounding box. You can control this elevation through the xyplane option:
set xyplane [ at {flt:zvalue} | {flt:frac} ]
Table C.2 The values of the mask used in the set border option. The red lines are the ones switched
on by the corresponding bit in the mask.

Bit
position Value Edge
Bit
position Value Edge
Bit
position Value Edge
0 1 4 16 8 256
1 2 5 32 9 512
2 4 6 64 10 1024
3 8 7 128 11 2048

[[C8]]
There are two ways you can use set xyplane to fix the position of the base relative to
the plot surface. You can specify an explicit z value at which the base plan should be
drawn, using the keyword at together with xyplane :
set xyplane at 0.1
This is the easiest way to fix the location of the base plane if you use an explicit plot
range in the vertical direction.

If the z range is dynamically chosen, it doesn’t make sense to specify a fixed loca-
tion for the base plane; instead, its position should be chosen as a fraction of the total
apparent height of the figure. This is precisely what set xyplane without the at key-
word does: it allows you to control the elevation of the plot surface above the base
plane as a fraction of the total z range.

A few examples may help to clarify. The command
set xyplane 0
puts the base plane right at the low end of the z range. Choosing
set xyplane 0.5
elevates the plotted surface by half the total z range (or half the apparent height of
the plot) above the base plane. Using negative arguments to set xyplane lifts the base
plane so that it intersects with the plot surface. For example, the command
set xyplane -0.5
places the base plane at the middle of the z range.

The following formula can be used to convert between the two models. It tells you
the z value at which the base plane will be drawn, given the fractional parameter f and
the z range [zmin:zmax] :
z = zmin - f * ( zmin - zmax )

==== C.2.2 View point

When creating surface plots using splot , you can control one aspect of the graph that
has no equivalent in two-dimensional plots: the view point—that is, the location (rela-
tive to the graph) from which the observer appears to be regarding the plotted sur-
face. You can set the view point in two ways: either programmatically with the set
view option, or interactively using the mouse.


USING THE MOUSE
*****
*****
The more convenient way to adjust the viewing angle is of course using the mouse!
Grab the plotted surface (by left-clicking into the plot window), and drag it to its
desired position. This requires a reasonably fast computer (and works much better if
the surfaces are opaque—when hidden3d is true). When you hold down the Ctrl key

[[C9]]
while dragging with the mouse, only the box surrounding the graph is shown: this may
facilitate this process on slow computers or for surfaces containing many points.
Holding down the middle mouse button and moving the mouse zooms the graph:
moving the mouse left to right increases the size of the entire graph (and vice versa).
Moving the mouse upward stretches the graph in the z direction only; moving the
mouse downward shrinks the graph in the z direction. Again, you can suppress ren-
dering of the actual plot surface when dragging by holding down the Ctrl key while
moving the mouse. Finally, holding down the Shift key together with the middle
mouse button lets you move the base plane of the plot (this is equivalent to set
xyplane ).


USING SET VIEW
*****
*****
The set view command gives you exactly the same capabilities, but in a non-interac-
tive fashion. The set view option takes up to four optional arguments:
set view [{flt:theta} [, {flt:phi} [, {flt:scale} [, {flt:z_scale}]]]]
The first two arguments are the angles (in
degrees) of the view point around the horizontal
and the vertical axes, respectively. (In spherical
coordinates, these are the polar and azimuthal
angles.) The angles are restricted to values from
0 to 360. (See figure C.5.) Figure C.6 demon-
strates how a graph can appear from different
view points.

The third and fourth parameters correspond
to the zooming effect I’ve already mentioned in
the context of mouse interactions. Both default
to 1.0 : choosing smaller scale factors results in a
smaller graph on the canvas. (In particular, the
scale factor is the inverse of the radial compo-
nent in spherical coordinates.)
set view 60,65
set xyplane -0.25
-2
-1
0
1
2
x
-2 -1.5
-1 -0.5
0 0.5
1 1.5
2
y
set view 77,77
set xyplane 0
-2 -1 0
1
x
-2 -1.5 -1 -0.5 0 0.5 1 1.5 2
y
Figure C.6 Different view points. Compare to figure C.1, where the same function is shown with
set view 45,50 .

View
point
x
y
z
θ
φ
Figure C.5 The angles used when
setting the view point with set view

[[C10]]
.UNIT LENGTH AND ASPECT RATIO
*****
*****
You can also use set view to fix the length of the x and y axis units. (The set view
command therefore does for splot what set size does for plot —see section 9.5.1.)
The command set view equal xy creates a graph within which the (visual) length
of one x axis unit equals the length of one y axis unit. The graph is scaled so that it’s
guaranteed to fit on the canvas.

The command set view equal xyz also sets the z axis unit to the same visual
length, but in this case, there is no guarantee that the graph will fit on the canvas! The
command set view noequal removes the constraint between the axis units.

.BIRD ’ S - EYE VIEW
*****
*****
The special command set view map places the observer right above the plotted surface
so they perceive just the base plane of the plot as a regular, two-dimensional plot. This
is the proper view for contour plots (see section C.3) and for false-color plots (see
appendix D).

But set view map is not just a convenient shorthand for set view 0, 180, 1.425, 1 .
It also enables set size for splot . In particular, you can use set size square and set
size ratio -1 to influence the appearance of contour plots and heatmaps.
It’s possible to append the keyword scale together with a numerical factor to scale
the resulting graph on the canvas. The following code snippet turns on map view and
also shrinks the graph to half its default size:
set view map scale 0.5

=== C.3 Contour lines and contour plots

You can add contour lines to a plot generated using splot . Contour lines can be a
great help when it comes to associating specific z values with surface plots. They can
also be used by themselves to make contour plots.

Use the set contour option to enable contour lines:
set contour [ base | surface | both ]
By default, contour lines are only plotted on the bottom of the box surrounding the
surface plot. But contours can also be drawn on either the plot surface or on both
(base and surface), through the use of the appropriate options to set contour (as in
figure C.7).


==== C.3.1 Contour plots

Contour lines are almost more useful by themselves than in combination with surface
plots: a contour plot shows only the contour lines, from the bird’s-eye perspective. Fig-
ure C.8 is yet another representation of the function from figure C.1—this time as a
contour plot. Listing C.1 summarizes the commands necessary to go from a three-
dimensional surface plot to a flat contour plot.


[[C11]]
The quality of the resulting plot depends strongly on the choices for set isosamples
and set samples . The former controls the number of nodes at which the function is
evaluated, and the latter controls the number of line segments used to draw the con-
tours. Higher resolution is obviously better, but it requires more computational
power. (Values from 30 to 300 for either seem to work well in practice.)
0.3
0.2
0.1
0.0
-0.1
-0.2
-0.3
-2 -1.5
-1 -0.5
0 0.5
1 1.5
2
x
-2
-1.5
-1
-0.5
0
0.5
1
1.5
2
y
Figure C.7 Adding contour lines at the base and on the surface using set contour
both and set cntrparam levels incremental -0.3,0.1,0.4 . The function
is the same as in figure C.1.

0.3
0.2
0.1
0.0
-0.1
-0.2
-0.3
-2 -1.5 -1 -0.5 0 0.5 1 1.5 2
x
-2
-1.5
-1
-0.5
0
0.5
1
1.5
2
y
Figure C.8 The function from figure C.1, plotted
in contour view. See listing C.1 for the commands.


[[C12]]

set view map
set size ratio -1
unset surface
set contourv
set isosamples 150
set cntrparam levels 10
set clabel "%.1f"

==== C.3.2 Customizing contour lines and their labels

As you can see in figure C.8, gnuplot assigns a new line type from the predefined
sequence of types to each new contour (see section 9.3). To customize the assignment
of colors to contours, you need to redefine the appropriate style using set linetype .
It’s also possible to use only a single line type for all contours, using the command set
cntrlabel onecolor .

A word of warning: gnuplot’s commands for customizing contour plots aren’t very
polished. Most actions are achieved through two commands— set cntrparam and set
cntrlabel —but each is responsible for several, only vaguely related tasks, distin-
guished by various suboptions. Also, and in contrast to usual gnuplot usage, these
commands don’t allow you to combine multiple suboptions into a single invocation.
.FREQUENCY AND SPACING OF CONTOURS
*****
*****
To influence the frequency and spacing of contour lines, use set cntrparam levels .
The different ways to do this are reminiscent of the options used to place tic marks
along the axes (see section 8.3.4):
set cntrparam levels [ auto [{int:n}]
| discrete {flt:z0} [, {flt:z1} [, ...]]
| incremental
{flt:start}, {flt:inc} [, {flt:end}] ]
When using auto , approximately five uniformly spaced contour lines are drawn. You
can pass an integer argument to auto to change the number of contour lines that are
generated. All these settings are approximate, because gnuplot attempts to place con-
tour lines at round numbers.

Using discrete , you can control exactly where contour lines are placed. The dis-
crete suboption takes a comma-separated list of z values as an argument, at which
contours should be drawn. All z values for which contours should be shown must be
specified in a single call to set cntrparam levels discrete ; you can’t add individual
contour lines to autogenerated ones. Finally, you can fix a starting z value and an
increment (and optionally an end value) through the incremental keyword.
.CONTOUR LABELS
*****
*****
By default, gnuplot automatically generates an entry in the key (see section 7.4)
for each contour line. The formatting of these labels can be customized using set
Listing C.1 Commands to switch to a contour view—see figure C.8
Chooses bird’s-eye view
Chooses equal units in both directions
Switches off the surface
Switches on contour lines
Increases the sampling frequency
Increases the number of contour lines
Chooses the format of the contour labels in the key

[[C13]]
cntrlabel format . The format string can contain any of the familiar conversion spec-
ifiers (see section 8.3.3):
set cntrlabel [format "str:format"] [font "str:font"]
It’s also possible to place the labels directly onto the graph, rather than grouping them
into a separate key, but (at the time of this writing) support for this feature is still rudi-
mentary. To place labels onto the graph, use the with labels style together with the
splot command. This will draw only the labels; if you want both contours and labels,
you need to plot the function of data twice in the same command: once with lines
and once with labels .

Two parameters control the number and placement of labels that are drawn for
each contour line: set samples and set cntrlabel . By default, a label is placed at
every 20th line segment—hence a larger value of set samples means more labels. You
can modify the number and position of labels using
set cntrlabel [start {int:segment}] [interval {int:segment}]
Using the interval keyword, you can change the frequency of labels: a higher num-
ber means more line segments are drawn between consecutive labels. Unfortunately,
values higher than 100 are silently truncated to 100. The argument to the start key-
word determines at which line segment (starting from some arbitrary origin) the first
label is drawn. Changing this value, you can slide all labels in the graph along their
contours.

It’s currently not possible to shift or rotate labels. Feel free to experiment, but you
may be better off using explicit labels (using set label ; see section 7.3.3) to annotate
a contour plot on the graph.

.SMOOTHING CONTOUR LINES
*****
*****
The set cntrparam command can also control how contours are generated—this may
be useful at times, for example if you want to graph noisy data. The relevant sub-
options are as follows:
set cntrparam [ linear | cubicspline | bspline ]
set cntrparam [ points {int:q} ]
set cntrparam [ order {int:q} ]
To draw contours, gnuplot determines a set of points (called nodes) at which the func-
tion (or data) has the same z value. Through the first set of keywords, you can choose
how these points are connected: linear (the default) uses straight lines; cubicspline
uses a smooth curve, which is guaranteed to pass exactly through the nodes; and
bspline uses a curve that’s guaranteed smooth but isn’t guaranteed to pass through
the nodes exactly. For “crumply” surfaces, or low resolutions (that is, few grid points),
one of the spline options may give significantly better results than the default.

[[C14]]
You can specify two additional parameters that are relevant to the way splines are
drawn (they have no meaning for linear mode). The points option controls the
number of points for which the interpolation between any two neighboring nodes is
evaluated when drawing the contour. More points again mean smoother curves. With
order , you can set the order of the spline to be used (this option is only relevant for
bspline ). The order must be an integer between 2 and 10. The greater the order, the
smoother the contour. Note that both points and order require separate calls to set
cntrparam —they can’t be combined with the type of curve ( linear , cubicspline , or
bspline ) in the same call.


=== C.4 Plotting data from a file using splot

Everything we’ve done so far has involved the plotting of functions only. Can gnuplot
use data from a file to generate surface and contour plots? Of course it can!
Gnuplot supports two data file formats to work with splot . For data files in other
formats, or for data that’s not on a grid, check the dgrid3d option described in sec-
tion C.5.


==== C.4.1 Grid format

If the data file is in grid format, each line must contain both x and y coordinates, as well
as the z value that is to be plotted. Data must be organized into data blocks, which are
separated from each other by a single blank line. Each block must contain all data
points for a single row of data points, parallel to the x axis (in other words, within each
data block, the x coordinate stays constant, but the y coordinate runs). The following
listing shows a short example file demonstrating this format. The corresponding plot
is in figure C.9.

    # x y z
    0 -1 10
    0 0 10
    0 1 10
    1 -1 10
    1 0 5
    1 1 10
    2 -1 10
    2 0 1
    2 1 10
    3 -1 10
    3 0 0
    3 1 10
Keep in mind one very important restriction: all data blocks must contain the same number
of data points. If the number of data points isn’t the same in all data blocks, or if even a
single data point is missing or invalid, splot can’t draw a surface.

Listing C.2 Simple data file suitable for splot —see figure C.9 (file: grid)

[[C15]]
This is a formal requirement, only: there’s no constraint that the data values (that is,
the x and y coordinates) form a regular grid. Small deviations of the x and y positions
from regularity are fine, but the plot may look strange or may not be very useful if the
underlying grid is too distorted.

As mentioned when we first introduced the splot command earlier in this appen-
dix, many of the directives familiar from the plot command are available when plot-
ting gridded data using splot . In particular, you can have different data sets in a single
file, separated from each other by double blank lines (as discussed in chapter 3). You
can then select a specific such set using index . The every directive can be used to pick
out subsets of each data set. Finally, the using directive can be used to choose the data
columns for x, y, and z values and to apply data transformations in the usual fashion
(see section 3.3).

.MISSING DATA
*****
*****
It’s instructive to see what gnuplot does with a defective file that doesn’t follow this
format. Figure C.10 shows the results of the splot command for a file that’s the same
as in listing C.2, except that the last entry (the point at (3,1,10) ) has either been
replaced with the not-a-number marker NaN or been omitted entirely.

If gnuplot finds a not-a-number marker (as defined by set datafile missing —see
section 4.3.4), it can still draw a complete surface, just omitting the panels that touch
the invalid data point. But if the data point is missing entirely, then no surface can be
drawn. Instead, the splot command connects all points in one data block consecu-
tively, but doesn’t connect data points separated (in the file) by a single blank line—
this is exactly what the plot command does when it encounters single blank lines in a
file. But in addition, splot staggers the plots for successive data blocks (front to back)
and thus gives the illusion of optical depth. But cross lines (parallel to the x axis) are
0
0.5
1
1.5
2
2.5
3
x
-1
-0.5
0
0.5
1
y
0
2
4
6
8
10
z
Figure C.9 The data from listing C.2 plotted using splot "grid" u 1:2:3 w linesp

[[C16]]
only drawn when the data in the input file fulfills the requirements of regular, gridded
data blocks, as discussed earlier.


==== C.4.2 Matrix format

The matrix format is an alternative file format for data on a regular, rectangular grid.
It’s more compact, because it doesn’t store the (redundant) information on x and y
coordinates for every data point—only the z values at the grid locations are kept.
There are two permissible matrix formats: one that stores the coordinates of the grid
points (without duplication) together with the z value, and a super-compact format
that does away with the grid coordinates altogether.

Table C.3 shows the general structure of both formats. In the general matrix for-
mat, the first row contains the x coordinates of the grid points, and the first column
contains the y coordinates. The entry in the top-left corner is ignored but must con-
tain a numeric value. In the compact format, the coordinates aren’t stored explicitly.
Instead, when reading a file in the compact format, gnuplot assumes that the coordi-
nate values consist of pairs of positive integers, starting at (0, 0) .

Table C.3 The matrix formats
General: nonuniform matrix Compact: matrix
Structure NA x0 x1 x2 x3 ...

y0 z00 z01 z02 z03
y1 z10 z11 z12 z13
y2 z20 z21 z22 z23
y3 z30 z31 z32 z33
... ...

z00 z01 z02 z03 ...

z10 z11 z12 z13
z20 z21 z22 z23
z30 z31 z32 z33
... ...

Example 0 0 1 2 3
-1 10 10 10 10
0 10 5 1 0
1 10 10 10 10
10 10 10 10
10 5 1 0
10 10 10 10
Missing
0
1
2
3
x
-1
-0.5
0
0.5
1
y
0
2
4
6
8
10
z
NaN
0
1
2
3
x
-1
-0.5
0
0.5
1
y
0
2
4
6
8
10
z
Figure C.10 The splot command requires all data points to be supplied on a regular grid, with
none missing. This figure shows what happens when the last point (at x=3, y=1) has been replaced
with a not-a-number marker or omitted entirely. See listing C.2 for the original data file. The splot
command is the same as in figure C.9.


[[C17]]
Upon reading a file in matrix format, gnuplot internally transforms the contained
information into a three-column grid format, with the x coordinates in the first col-
umn, the y coordinates in the second, and the data values in the third. These columns
can then be selected in a regular using specifier.

TIP: Keep in mind that a file in matrix format is internally transformed into
the equivalent grid format. Construct a using specifier as you would for a file
in grid format.

.A WORKED EXAMPLE
*****
*****

Let’s say that the two example files in table C.3 are called matrix and packedmatrix,
respectively. Then the following three commands are equivalent:
splot "grid" u 1:2:3 w l
splot "matrix" nonuniform matrix u 1:2:3 w l
pos( k, origin, spacing ) = origin + k*spacing
splot "packedmatrix" matrix u (pos($1,0,1)):(pos($2,-1,1)):3 w l
The only difference is the appearance of the new keywords matrix (indicating a file in
packed matrix format) and nonuniform matrix (for a file in general matrix format:
that is, including coordinate information in the first row and column).

A special consideration applies to files in the packed matrix format, because the
integer pairs that gnuplot supplies instead of coordinate values must be transformed
into true locations. As long as the grid points lie on a regular, rectangular grid, this
can always be accomplished through a simple linear transformation, involving the
coordinate value of the origin and the lattice spacing, as shown in the listing.

=== C.5 Smooth surfaces

Surface plots can be fun, but things can go wrong in practice—in particular, when
you’re graphing data (as opposed to plotting smooth functions):
•  Data is scattered (not on a regular grid), so that no regular surface can be
drawn.

•  Data is sparse, so that the surface consists only of a few elements and is there-
fore not easy to recognize.

•  Data is noisy, so that the surface appears overly bumpy.

•  The data file isn’t in a suitable format.


==== C.5.1 The set dgrid3d facility

Gnuplot provides a slick little facility that takes arbitrary input data and generates a
smooth interpolation onto a two-dimensional grid: the dgrid3d option. If dgrid3d is
on, splot doesn’t plot the raw data. Instead, it reads the data and then generates an
approximation to this data for every point of a regular grid. The number of grid
points and some aspects of the interpolation algorithm can be controlled through set
dgrid3d :
Using grid format
Using matrix format
Using packed
matrix format

[[C18]]
[source]
set dgrid3d [ {int:nx} [, {int:ny} [, {int:q} ] ] ]
set dgrid3d [ {int:nx} [, {int:ny} ] ]
            [ splines
            | gauss | cauchy | exp | box | hann
            [ {flt:dx} [, {flt:dy} ] ] ]

By default, dgrid3d is disabled. When it’s enabled, three-dimensional data read from
a file is always treated as a scattered data set. A grid with dimensions derived from a
bounding box of the scattered data and size as specified by the nx and ny parameters
is created for plotting and contouring. The grid is equally spaced in x rows and in y
columns; the z values are computed as weighted averages or spline interpolations of
the scattered points’ z values. In other words, a regularly spaced grid is created, and a
smooth approximation to the raw data is evaluated for all grid points. Only this
approximation is plotted, but not the raw data. The number of columns defaults to
the number of rows, which defaults to 10.

Several algorithms are available to calculate the approximation from the raw data.
Some of these algorithms can take additional parameters. All the algorithms have in
common that the closer a data point is to a grid point, the more effect it has on that
grid location.

The splines algorithm calculates an interpolation based on thin plate splines. It
doesn’t take additional parameters, which is convenient but also means the algorithm
can’t be adapted to take the nature of the data into account.

An alternative and more flexible algorithm is based on weighted averages. 2 Each
data point is replaced with a kernel: a smooth function that’s peaked at the location of
the data point. The contributions from all kernels are combined to find the weighted
average for the plot:
Here, z i is the value of the ith data point, and d i is the Euclidean distance between the
current grid point and the location of the ith data point. The function w(d) is the
smoothing kernel. Several kernels can be selected by supplying the appropriate key-
word to set dgrid3d . Table C.4 lists the available choices.

When using one of the five smoothing kernels from table C.4, up to two additional
parameters can be specified: dx and dy . These are used to rescale the coordinate dif-
ferences when calculating the Euclidean distance:
2
The dgrid3d facility allows for some other options as well. Check the standard gnuplot reference documen-
tation for details.

    z
    Σ i w d i
    ( ) z i
    ⋅
    Σ i w d i
    ( )
    ------------------------------ =
    d i
    x x i –
    dx
    ----------------
     
     
    2
    y y i –
    dy
    -------------- -
     
     
    2
    + =

[[C19]]
The value of dy defaults to the value of dx , which defaults to 1. The parameters dx and
dy make it possible to control the radius over which data points contribute to a grid
point in the units of the data.

Figure C.11 shows the data from listing C.2 plotted when smoothed using dgrid3d
with the Gaussian kernel. (The Gaussian kernel is probably the most generally useful
and versatile kernel—unless you have specific reasons to use a different one, it’ll serve
you well in a variety of situations.)
The set dgrid3d facility isn’t perfect. In particular, it can’t be turned on and off for
individual data sets—either all data sets are smoothed with it, or none. This makes it
impossible, for instance, to plot the raw data together with the smooth surface. But
overall, dgrid3d is a great tool to generate good-looking two-dimensional graphs from
otherwise unsuitable data.

Table C.4 Smoothing kernels available with set dgrid3d
Keyword Definition
gauss
w(d) = exp(-d 2 )
cauchy
w(d) = 1/(1+d 2 )
exp w(d) = exp(-d)
box w(d) = 1 if |d| < 1;
w(d) = 0 otherwise
hann
w(d) = ½ ⋅ (1-cos(2 π d)) if |d| < 1;
w(d) = 0 otherwise
0
0.5
1
1.5
2
2.5
3
x
-1
-0.5
0
0.5
1
y
0
2
4
6
8
10
z
Figure C.11 The same data
as in figure C.9, but plotted
after turning on smoothing
using set dgrid3d
30,30 gauss 0.6,0.6

[[C20]]

Words of caution
Graphs generated with the splot command can be visually very appealing, and
you’ve seen some nice examples in this appendix. Nevertheless, my recommenda-
tion is to use them sparingly and to also explore other ways of representing multivar-
iate data (for example, take a look at chapter 14). Surface plots are often stunning,
but (because of the additional need to find a suitable view point) getting them “right”
is disproportionately more difficult. Reading quantitative (as opposed to qualitative)
information off of them is often tricky, if not impossible. Finally, they simply aren’t
suitable for noisy data sets. But they can be effective for conveying the broad aspects
of a multidimensional data set, in particular to an audience that has a harder time
making sense out of other ways of representing such data (such as false-color plots:
for those, see appendix D).


[[D1]]
== Appendix D Palettes and false-color plots

Gnuplot provides a facility to map numeric values into a continuous range of colors.
This allows you to create false-color plots (or heatmaps): graphs in which a numeric value
is represented by a color, instead of by position.

In this appendix, we’ll first study how to set up such mappings between numbers
and colors. Because the values in a false-color plot typically form a continuum, the
mapping usually consists of a continuous color ramp or color gradient. The gnuplot
command to create and manage such color gradients is set palette , and hence I’ll
refer to these mappings as palettes. After introducing the commands to define palettes,
we’ll look in detail at a catalog of example palettes for a variety of different applica-
tions and point out their strengths and weaknesses.

Next, we’ll study ways to use palettes to create colored graphs in gnuplot. Gnu-
plot’s palette feature is quite flexible, and you can use it for a variety of purposes, of
which heatmaps are only one (but arguably the most important) example.


=== D.1 Warm-up examples

Before discussing all the various commands and options in detail, let’s quickly look at
an example that demonstrates the capabilities that’ll be introduced in this appendix.
Consider again the function that was studied in appendix C. There, you saw surface
plots (such as figure C.1) and contour plots (figure C.8) of this function. Now we’re
going to add some color!
Let’s begin simply. The following commands create a colored figure (figure D.1):
set isosamples 200
set palette defined ( 0 "blue", 0.5 "light-grey", 1 "red" )
splot [-2:2][-2:2]
➥ exp(-(x**2 + y**2))*cos(x/4)*sin(y)*cos(2*(x**2+y**2)) w pm3d
Two items are new. First, the set palette command is used to create a smooth color
gradient palette in gnuplot. The w pm3d style in the splot command then uses this pal-
ette to create a colored surface by mapping the surface elevation into the palette. (The
abbreviation stands for “palette-mapped three-dimensional” plot—you can see why.)
Of course, other color schemes are possible—that’s the point of the set palette
command. Later in this appendix (in section D.2), you’ll learn how to set up your own
palettes using the set palette command.


[[D2]]
But color palettes are not only available for surface plots (as in figure D.1), but also
for many other plots. Figure D.2 shows the same function again, but instead of using
contour lines, it now uses only color to indicate the local value of the function at each
point.

The graph in the left panel was constructed with a very simple palette, using the
following commands:
set isosamples 400
set view map; set size square
set palette defined (-1 'white', 0 'blue', 0 'red', 1 'white' )
splot [-2:2][-2:2]
➥ exp(-(x**2 + y**2))*cos(x/4)*sin(y)*cos(2*(x**2+y**2)) w pm3d
The palette for the other graph is a tad more complicated; you’ll see its definition
later, in section D.2.5.

-2 -1.5
-1 -0.5
0 0.5
1 1.5
2
x
-2
-1.5
-1
-0.5
0
0.5
1
1.5
2
y
-0.4
-0.3
-0.2
-0.1
0
0.1
0.2
0.3
0.4
Figure D.1 Adding color from a continuous palette to a surface plot. Compare figure C.1.
-2 -1.5 -1 -0.5 0 0.5 1 1.5 2
x
-2
-1.5
-1
-0.5
0
0.5
1
1.5
2
y
-0.4
-0.3
-0.2
-0.1
0
0.1
0.2
0.3
0.4
-2 -1.5 -1 -0.5 0 0.5 1 1.5 2
x
-2
-1.5
-1
-0.5
0
0.5
1
1.5
2
y
-0.4
-0.3
-0.2
-0.1
0
0.1
0.2
0.3
0.4
Figure D.2 Two examples of false-color plots. The function is the same as in figure D.1. The graph
on the left was drawn using a simple palette defined by set palette defined (-1 'white', 0
'blue', 0 'red', 1 'white' ) ; the graph on the right uses the palette from panel N in figure D.4.

[[D3]]
For yet another kind of graph that used a color palette, go back to figure 9.5, when we
discussed data-dependent colors. The time has come to introduce all the detail that
we skipped back then!

=== D.2 Creating palettes

Gnuplot’s command to create color gradients is set palette . The command is pretty
smart and does a lot of legwork for you. It’s also fairly complex and combines many
different bits of functionality. In fact, one of its problems is its almost promiscuous
flexibility: the command places few limits on user input, which can be both very con-
venient and very confusing, depending on whether you understand how gnuplot pro-
cesses the arguments.

There are basically two different ways to define a color gradient using set palette :
•  A gradient can be defined through a discrete set of colors at fixed positions
within the numerical range. The set palette command fills in the gaps
between these nodes through linear interpolation, separately for each color
component.

•  A gradient can be defined through a set of three functions (one for each color
component) that map the numerical range to a color component.


==== D.2.1 Color models and components

The set palette command can handle five different color models: RGB (red-green-
blue), HSV (hue-saturation-value), CMY (cyan-magenta-yellow; mostly used in print
publishing), YIQ ( US color television standard), and CIE XYZ (a model based on color
perception). 1 For computer graphics, RGB and HSV are by far the most important.
You can select the color model using the model keyword. For example:
set palette model RGB
set palette model HSV
The color model selection is sticky, meaning it remains in effect until explicitly changed:
you don’t need to include the model specification in every call to set palette . The
default is the RGB model.

TIP: The color model in set palette is sticky and silently stays in effect until
explicitly overridden. Unless the color model is RGB , I always include the
explicit choice of color model in each call to set palette .

All color models represent color through exactly three components, and formulas exist
to translate between the different color models. (Transparency would require a fourth
component, but set palette doesn’t handle transparent colors, so three components
are sufficient.)
1
Check the respective Wikipedia pages for details.


[[D4]]
To specify the three components, the set palette command accepts three differ-
ent formats:
•  A named color, such as "red" . Use show colornames for a list of permissible
colors.

•  A hex string, such as "#ff0000" or "0xff0000" . Both formats are equivalent.
•  A numeric triple, such as 1 0 0 . The numbers must be between 0 and 1 and be
separated by whitespace, without punctuation or delimiters.

Here are two colors in all three formats:
"red" "#ff0000" 1 0 0
"grey" "0xc0c0c0" 0.75 0.75 0.75
Here’s the first potential for confusion: the set palette command separates the input
into three components (let’s call them A , B , and C ) and interprets them according to the cur-
rently selected color model. Every format is permissible for every color model, and gnuplot
makes no attempt to “guess” the intended color model from the input format.
Let’s consider an example. Regardless of whether your input was "red" or
"#ff0000" or 1 0 0 , gnuplot will interpret it as follows: first channel (component A )
at maximum, and the other two channels (components B and C ) at minimum. If the
chosen color model is RGB , then this amounts to “full red, no green or blue.” But if the
chosen color model is HSV , this means “full hue, no saturation or value” (that is, black,
by virtue of the zero value in the third channel). Similarly, the arguments "grey" ,
"0xc0c0c0" , and 0.75 0.75 0.75 will all be interpreted as “all three channels at
three-quarters of their maximum.” In the RGB space, this amounts to a light gray; but
in the HSV space, the color will be a medium purple! In every case, the input is split
into its three components first, and only then are the components interpreted accord-
ing to the currently active color model. (In fairness, set palette warns you if you try
to use named colors with color spaces other than RGB .)
TIP: The set palette command doesn’t restrict the input format to appro-
priate color models. Instead, all input is first broken into components, which
are only then interpreted according to the currently selected color model.

==== D.2.2 Defining palettes through nodes

You can define a palette by specifying a set of colors at fixed locations within the plot
range, and gnuplot will fill in the gaps in between. This is, in my opinion, the most
useful way to create palettes in practice.

You use the defined keyword to specify the list of colors and positions. You can use
any of the color formats discussed in the previous section, and hence the following
four commands are equivalent:
set palette defined ( -1 "red", 0 "white", 1 "blue" )
set palette defined ( -1 "#ff0000", 0 "#ffffff", 1 "#0000ff" )
set palette defined ( -1 1 0 0, 0 1 1 1, 1 0 0 1 )
set palette defined ( -1 "red", 0 "#ffffff", 1 0 0 1 )

[[D5]]
The defined keyword must be followed by a comma-separated list in parentheses.
Each of the entries between the commas consists of a position, followed by a color.
Don’t get confused when using the third format (numeric triples): each entry indeed
consists of four numbers, without any punctuation between them.

There’s no limit on the number of entries in the list of colors. The values used as
positions aren’t restricted: they can be positive or negative, integer or floating-point.
The only constraint is that they must form a non-decreasing sequence of numbers. It’s
possible to repeat a position, and doing so can be useful to create palettes with sharp
transitions, as we’ll discuss later. Two examples:
set palette defined ( -1 "red", 0 "red", 0 "blue", 1 "blue" )
set palette defined ( 0 "red", -1 "white", 1 "blue" )
This brings us to the second potential source of confusion when using set palette :
the positions need not correspond to actual values from the plot range! In fact, they
aren’t absolute positions at all—they’re merely relative positions in the interval
spanned by the smallest and the greatest of the positions (that is, by the first and the
last entries between the parentheses). The following four commands all define exactly
the same palette:
set palette defined ( -1 "red", 0 "white", 1 "blue" )
set palette defined ( -10 "red", 0 "white", 10 "blue" )
set palette defined ( 0 "red", 0.5 "white", 1 "blue" )
set palette defined ( 7 "red", 14 "white", 21 "blue" )
In every case, the total range of values spanned by the positions will be shifted and
scaled to the unit interval. All nodes retain their relative positions in the process. In
particular, the positions need not correspond to actual values from the plot range; you
use a special command ( set cbrange —see section D.3) to map the entire palette to
the desired plot range.

TIP: The positions assigned to nodes when using set palette defined (...)
aren’t absolute positions; they’re relative positions within the interval of val-
ues spanned by the first and last node. Gnuplot internally normalizes the
values by shifting and scaling the nodes into the unit interval for further
processing.

Gnuplot interpolates linearly between nodes, for each component separately. The
interpolation is done in the currently selected color space, and only afterward are the inter-
polated values transformed to RGB for actual presentation. For example, the following
command creates a standard rainbow palette:
set palette model HSV defined ( 0 0 1 1, 1 1 1 1 )
In HSV space, gnuplot interpolates linearly between a hue value of 0 and a hue value
of 1, but if you look at the resulting palette in RGB space, the behavior is most defi-
nitely not linear.

Valid
Not valid: positions
are out of order!

[[D6]]
.READING NODES FROM FILE
*****
*****
It’s possible to read the nodes from file, using the file keyword. The file is treated as
a regular data file, which means the using directive is available to pick out columns
and to apply inline transformations.

Gnuplot expects three or four columns (the position, followed by the three color
components). If only three columns are provided, the nodes that are read from file will
be spaced uniformly along the palette. Again, the values of the color components that
are read from file will be interpreted according to the currently active color model!
Here are two syntax examples, with and without an explicit using directive:
set palette file "palette.gpf"
set palette file "palette.gpf" using 1:2:3:4
The color values read from file (or resulting from an inline transformation) should be
between 0 and 1. Values exceeding this interval are truncated back into this interval.

TIP: Any color values that are read from file using set palette file ... and
that exceed the unit interval are truncated back into the unit interval.

==== D.2.3 Defining palettes with functions

Rather than provide a set of nodes and let gnuplot interpolate between them, you can
also provide a set of three functions (one for each color component). Depending on
the color model chosen, the components will be interpreted as red, green, and blue
channels ( RGB ), or as hue, saturation, and value channels ( HSV ), and so on.
Instead of using defined , you use the functions keyword in the set palette com-
mand. The functions are arbitrary, but each one must map the unit interval [0:1] into
the unit interval [0:1]. The independent (dummy) variable in the function definition
must be called gray (not x , not grey !).

Defining palettes using functions works best in the relatively intuitive HSV color
space. Here are a few simple examples:
set palette model HSV functions gray, 1, 1
set palette model HSV functions 0, 0, gray
set palette model HSV functions 0, 0, sqrt(gray)
set palette model HSV functions gray, 1-gray, 1

TIP: When defining a palette through functions with set palette functions
... , don’t forget that the independent (dummy) variable in the function def-
initions must be called gray . If you choose any other variable name (such as x ),
gnuplot will not warn you—things just won’t work!
.OTHER WAYS TO DEFINE PALETTES WITH FUNCTIONS
*****
*****
The set palette command offers some further features that I want to mention in
passing. Check the gnuplot standard reference documentation for details.
The command set palette cubehelix (which is intended to be used with the RGB color
model) creates a palette that traces out a rainbow, while simultaneously increasing color
intensity. Several sub-options allow you to control various aspects of the resulting palette.
Standard rainbow
Linear grayscale
Nonlinear grayscale
Rainbow that fades to white

[[D7]]
The set palette rgbformulae command is intended to reduce the size of Post-
Script files. When using this option, you must define your palette in terms of several
predefined functions. When exporting your graph to PostScript, these functions are
written to the PostScript file so that the palette can be evaluated analytically when the
PostScript file is processed. Because the palette need not be saved explicitly, the result-
ing PostScript file is smaller.


==== D.2.4 Displaying and exporting palettes

The following command is a valuable tool when developing palettes:
test palette
It produces a figure (using the current settings of set output and set terminal !) like
the one in figure D.3. The bottom panel shows the palette as a spectrum of colors; the
top panel shows the intensity levels of the red, green, and blue components. (Regard-
less of the choice of color model, the test palette command always displays RGB
components.) Also included in the top panel is the value of the NTSC luminance, which
corresponds to the Y channel in the YIQ model. It indicates the result if the color were
displayed on a black-and-white TV screen.

0
0.1
0.2
0.3
0.4
0.5
0.6
0.7
0.8
0.9
1
0 0.1 0.2 0.3 0.4 0.5 0.6 0.7 0.8 0.9 1
R,G,B profiles of the current color palette
red green blue NTSC
Figure D.3 The result of the test palette command for a palette defined with set palette
defined ( 0 'web-green', 0.4 'goldenrod', 1 'red' ) or, equivalently, set palette
defined ( 0 "#00c000", 0.4 "#ffc020", 1 "#ff0000" )

[[D8]]
.QUERYING THE PALETTE DEFINITION
*****
*****
In addition to this graphical visualization of the palette with test palette , you can
query the current definition using
show palette
This prints the current values of all sub-options of set palette to the screen, including
the three function definitions if the palette was defined using set palette functions .
If the palette was created from a set of discrete nodes using set palette defined
(...) , then the printed message won’t include explicit information on the nodes.
Instead, you must use
show palette gradient
to list them.

.EXPORTING A PALETTE
*****
*****
It may be desirable to export a finished palette as a set of RGB triples: for example, to use
it in another application. You can do so using the show palette palette command:
show palette palette {int:n} [ int | float ]
This prints a list of RGB triples to the output channel identified by the current value of
set print . The mandatory integer argument gives the number of intermediate colors
in the exported palette. By default, the output is formatted for human readability, but
by giving either the int or the float keyword, you can obtain a listing that’s easier to
parse from a program. (With int , the RGB values are integers in the range 0 to 255;
with float , they’re floating-point values between 0 and 1.)
.SAVING A PALETTE
*****
*****
All the details supplied to the set palette command are included in the information
persisted with save ; hence an existing graph (and its palette) can be re-created using
load , as you’d expect. You should be aware, though, that gnuplot saves the color for
each node in a palette only in the third format, which consists of three numbers
between 0 and 1. In particular, gnuplot will not write the names of named colors to file
when using save . The resulting command files are therefore, by construction, much
less human-readable. If you want to save a palette to file with the idea of later continu-
ing to edit it manually, then you should edit the respective command file in an editor
(see section 12.2), rather than use gnuplot’s save command.

TIP: Even though you may have defined a palette in terms of named colors,
gnuplot will only persist the equivalent numerical values for each of the three
color components to file. To retain the named colors, you must edit and save
the command file in an external editor.


[[D9]]

==== D.2.5 Some example palettes

Let’s look at some example palettes. The purpose here is twofold: first, I want to dem-
onstrate how to use the set palette command; and I also want to provide you with
recommendations for palettes and specific color choices that work well in practice.
(For all the following, compare figure D.4.) 2 Defining your own palettes is particularly
important because gnuplot’s default palette isn’t very good. To obtain good results,
you need to define your own.

TIP: Because gnuplot’s default palette isn’t very good, it’s essential that you
learn how to define your own palettes. Moreover, false-color plots generally
need palettes that have been adapted to the specific graph in order to be
effective, necessitating you to have the required know-how.

.GRAYSCALE AND STANDARD RAINBOW
*****
*****
Two palettes are particularly suitable to demonstrate the various features of the set
palette command: the linear grayscale and the standard rainbow (panels A and B,
respectively, in figure D.4). Here are four equivalent ways of creating a linear grayscale
2
You can find a very large collection of palettes at http://soliton.vm.bytemark.co.uk/pub/cpt-city. Although
many of them are intended for graphic design, not data visualization, the site is a terrific source of inspiration.
A
0.0
0.2
0.4
0.6
0.8
1.0
B C D E F G H J K L M N O P Q
Figure D.4 Several example palettes: each panel in the figure displays a different palette. See the
text for details.


[[D10]]
palette, using all combinations of the RGB and HSV color model together with either
the defined or the functions feature:
set palette defined ( 0 "black", 1 "white" )
set palette functions gray, gray, gray
set palette model HSV defined ( 0 0 0 0, 1 0 0 1 )
set palette model HSV functions 0, 0, gray
The standard rainbow only makes sense to define in HSV space. Here are two ways,
using nodes and functions, respectively:
set palette model HSV defined ( 0 0 1 1, 1 1 1 1 )
set palette model HSV functions gray, 1, 1
Neither of these two palettes works particularly well in practice. The standard rainbow
doesn’t convey an intuitive sense of ordering; it wraps around (so that the highest and
the smallest values are assigned similar colors); and its garish colors don’t aid percep-
tion. Graphs drawn using a simple grayscale are dominated by shades of black and
white, which are harder to distinguish than shades of darker and lighter grays. More-
over, a grayscale isn’t in color!
.THREE SIMPLE WORKHORSES
*****
*****
Here are three palettes that are simple enough to keep in mind, so that you can re-
create them on the spot. The first consists of the colors blue, white, and red (panel C
in figure D.4):
set palette defined ( 0 "blue", 0.5 "white", 1 "red" )
You should commit this palette to memory! It has several advantages:
•  It has an intuitive sense of ordering.

•  It provides strong gradients on both sides of the central white band. (The white
can be replaced with gray if it’s hard to distinguish from the background.)
•  The white band need not be symmetric in the unit interval. By shifting it rela-
tive to the other two colors, the palette can be adjusted to asymmetric problems
(for example, set palette defined ( 0 "blue", 0.25 "white", 1 "red" ) ).
•  The basic idea is easy to remember and set up.

TIP: Despite its extreme simplicity, the blue/white/red palette is amazingly
convenient and versatile. The color white should be replaced by a light gray if
white would be hard to distinguish from the color of the background.

Another combination of colors that conveys a sense of ordering consists of the traffic
light colors: red, yellow, and green (panel D in figure D.4). In addition to the sense of
ordering, this particular trio of colors invariably also conveys a semantic “good/bad”
meaning—which may or may not be appropriate:


[[D11]]
set palette defined ( 0 "web-green", 0.5 "goldenrod", 1 "red" )
set palette defined ( 0 "#00c000", 0.5 "#ffc020", 1 "#ff0000" )
set palette defined ( 0 0 3/4. 0, 1 1 3/4. 1/8., 2 1 0 0 )
The three definitions given are equivalent—the one using gnuplot’s color names may
be the easiest to remember, the one using hex strings is the most portable, and the
one using numeric fractions makes the specific choice of colors clearest. In this pal-
ette, I use a warmer green and a dark shade of yellow: I’ve found that both colors look
better than pure green and yellow at full intensity.

TIP: The red/yellow/green color combination conveys not only a high/low
but also a semantic good/bad distinction. You need to decide whether this is
appropriate for the visualization task at hand. Keep in mind that a pure yel-
low may be hard to see against a white background; instead, it’s better to use a
darker shade of yellow or even a light orange. Also keep in mind that this pal-
ette will pose difficulties for people with red/green color vision deficiencies.
The last simple workhorse is the “improved rainbow” (panel E in figure D.4):
set palette model RGB defined ( 0 'blue', 1 'cyan', 2 'green', 3 'yellow',
➥ 4 'red', 5 'magenta' )
It fixes the two biggest problems of the standard rainbow: because the colors run from
blue (cold) to red and magenta (hot), it conveys an intuitive sense of ordering. More-
over, because it doesn’t wrap around, the color mapping is unambiguous. The
improved rainbow isn’t a very good palette, but it’s much better than the standard
rainbow, and—because it only depends on primary colors as nodes—it’s still easy to
remember and simple to set up.

.FOUR INDUSTRIAL - STRENGTH PALETTES
*****
*****
The following palette, which is a further refinement on the improved rainbow palette,
is similar to the default color palette in MATLAB (panel F in figure D.4):
set palette defined ( 0 'dark-blue', 1/8. 'blue', 3/8. 'cyan',
➥ 5/8. 'yellow', 7/8. 'red', 1 'dark-red' )
This is a good, all-purpose palette with a strong intuitive sense of ordering and several
distinct visual gradients toward the center of the plot range. Furthermore, the central
part of the palette consists of softer, pastel colors, which results in graphs that are eas-
ier on the eyes.

In a similar spirit, here’s an improved version of the red/yellow/green color com-
bination. Like the most recent palette, this also uses pastel colors in the center of the
plot area (panel G in figure D.4):
set palette defined ( 0 0 0.55 0.2, 0.3 0.65 0.85 0.4, 0.5 1 1 0.75,
➥ 0.7 0.95 0.68 0.38, 1 0.75 0 0.15 )

[[D12]]
The next two palettes are very good but also very subtle: each is constructed from a
large number of nodes with precisely chosen colors for each node. Instead of giving
you an approximation, which would necessarily lose some of the subtlety of either pal-
ette, I recommend that you download the original files.

The first of these palettes 3 is based on work by the oceanographer William F.
Haxby (panel H in figure D.4). It’s similar in spirit to the MATLAB palette you just saw,
but it works with even milder colors. Highly recommended!
The other palette 4 was developed by computer scientist Kenneth Moreland and is
an improvement on the simple blue/white/red palette (panel J in figure D.4). It uses
non-saturated colors and special, nonlinear color ramps and thereby achieves
an uncommonly uniform variation of intensity across the entire spectrum. Highly
recommended!
It shouldn’t be lost on you that all the palettes in this section are improvements on
simple palettes that were introduced earlier. The difference doesn’t come from a con-
ceptual breakthrough, but from a relentless attention to detail. 5

TIP: High-quality palettes can’t be improvised but are the result of many
incremental improvements in detail. Become familiar with and use high-
quality palettes that are available.

.PALETTES FOR SEGREGATION TASKS
*****
*****
All the palettes discussed so far consisted of smooth transitions and were suitable for
continuously varying data. But sometimes that’s not what you want: sometimes it’s nec-
essary to indicate sharp boundaries between categories. (Think of the difference
between a political compared to a topographical map!)
Using the set palette command, you create a sharp color transition by listing one
of the positions twice, giving a different color each time. The following traffic-light pal-
ette consists only of sharp transitions (panel K in figure D.4):
set palette defined ( 0 "green", 1 "green", 1 "yellow",
➥ 2 "yellow", 2 "red", 3 "red" )
Palettes can feature sharp transitions together with smooth gradients. Here’s a variant
of the blue/white/red palette that emphasizes the break at the center of the plot
range. You might use this palette to indicate the location where a function or data set
changes sign—while still indicating total magnitude through the smooth color change
on either side. Notice that the palette doesn’t fade to white (or gray) away from the
center, but always retains some tint (panel L in figure D.4):
set palette defined ( -1 '#aaaaff', 0 'blue', 0 'red', 1 '#ffaaaa' )
3
“Hx-110-110,” cpt-city, http://mng.bz/T48T.

4
“Cool-warm,” cpt-city, http://mng.bz/m8bp.

5
You can find another interesting palette at www.gnuplotting.org/matlab-colorbar-parula-with-gnuplot. This
palette combines a continuous change in hue with an almost linear increase in lightness over the entire color
range.


[[D13]]
Here’s a red/green palette with a sharp transition. In contrast to the blue/red palette
you just saw, this one has the highest color intensity not in the center, but toward the
edges. The fully saturated colors were chosen to be relatively mild and to have compa-
rable lightness (panel M in figure D.4):
set palette defined (0 0 0.75 0, 0.2 0.2 0.8 0.2, 0.5 0.75 0.95 0.75,
➥ 0.5 1 0.66 0.66, 0.8 0.9 0.25 0.25, 1 0.9 0.1 0.1 )
Here’s a more complicated take on the same idea (panel N in figure D.4). This palette
also exhibits red and blue color gradients away from the middle, but in addition it
sports a rapid sequence of color changes right at the center point, thus very effectively
highlighting the transition: 6
set palette defined ( 0 "dark-blue", 0.45 "blue", 0.495 "web-blue",
➥ 0.4995 "cyan", 0.5 "white", 0.5005 "yellow",
➥ 0.505 "sienna1", 0.55 "red", 1 "dark-red" )
.GEO PALETTES
*****
*****
A geo scale is yet another type of palette that offers a sense of ordering, using the kind
of color sequence familiar from topographic maps (although in this case the sense of
ordering is more conventional than inherent). Such palettes seem to work best when
all the colors are particularly pale. Here’s an example (panel O in figure D.4):
set palette defined ( 0 0.7 0.85 0.6, 0.3 1 1 0.75,
➥ 0.7 0.75 0.6 0.4, 1 1 1 1 )
Geo palettes may include a sharp transition to indicate the boundary between sea and
land. Here’s a a rather complex example 7 (panel P in figure D.4):
set pal defined (0 0.45 0.66 0.85,0.25 0.725 0.9 1, 0.33 0.85 0.95 1,
➥ 0.33 0.68 0.82 0.65,0.4 0.58 0.75 0.53,0.575 0.95 0.9 0.75,
➥ 0.8 0.66 0.52 0.32,0.85 0.66 0.6 0.5, 1 0.95 0.95 0.95 )
.TREE RINGS
*****
*****
Yet another idea is to create a palette from well-separated color bands (possibly on a
smoothly varying background). Here’s an example 8 (panel Q in figure D.4):
hue(x) = word( "0.75 0.66 0.5 0.33 0.16 0.1 0.0 0.83", 1+int(8*x) )
sat(x) = cos(2*pi*(x*7.4-0.2))
set palette model HSV functions hue(gray), sat(gray)>0?sat(gray):0, 1
If you want to superimpose the colored bands on a smoothly changing grayscale, you
can replace the 1 in the last entry (for the value component) with an expression like
sat(gray)>-0.5?1:gray . Personally, I find that the background clutters up the result
too much.

6
For a similar palette, see “Curvature,” cpt-city, http://mng.bz/QJ7x.

7
This palette was inspired by the standard palette used by maps on Wikipedia. See “Wikipedia elevation
schemes,” cpt-city, http://mng.bz/6lBR.

8
This is an improvement on the version given in the first edition. I’ve since learned that you need to use rela-
tively wide color bands that don’t have sharp edges, but that fade away gently.

[[D14]]

Thoughts on palette design
It isn’t at all obvious what makes a good palette. Here are some considerations and
recommendations for you to consider:
•  Be clear about the purpose of the visualization. Are you looking for a realistic
representation of the variations in the data, or are you more interested in seg-
menting (categorizing) it into different strata? Are you particularly interested
in the features within a certain limited range of values? Do you want to iden-
tify and highlight data points representing specific values (such as outliers)?
All of these tasks are valid but lend themselves to different palettes. To repre-
sent smooth variation, a palette with a continuous spectrum of colors works
best; but for segmentation tasks, a palette consisting of several discrete
color bands makes more sense. These attributes can be combined, for
instance in a palette varying smoothly in the center but with solid colors once
certain thresholds are crossed.

•  Understand the nature of the data. Does the data form a continuous spec-
trum, or does it consist of a set of discrete values? In either case, is there a
natural ordering in the values?
If the data is discrete, you want to make sure the color bands in your palette
correspond to the values in your data set. If the data comes from a continu-
ous spectrum, you may want either a continuous palette or a discrete one,
depending on the purpose of the visualization. Finally, if the data is ordered,
you want a palette that has some form of visual ordering (such as a black-to-
white grayscale).

•  If you want to express order, make sure your palette has an intuitive sense of
ordering. Changes in lightness are unambiguously perceived as ordered;
that’s why a grayscale naturally conveys a sense of ordering. In contrast, hues
aren’t necessarily sorted. Some exceptions (that do convey a sense of order-
ing) are based on similarity with temperature. Examples include the heat
scale (black, red, yellow, white—coinciding with a change in lightness) and
the combinations of blue and red. Other color combinations are convention-
ally perceived as ordered, such as palettes based on the shades of the
traffic-light colors green, yellow, and red, or the geo scales familiar from topo-
graphic maps. By contrast, the standard rainbow is not ordered: this is one of
the primary reasons it’s such a poor choice for palettes.

•  Make sure there are strong visual gradients in those regions of the data where
significant and relevant change occurs. There tend to be regions in the data
where change is more relevant to the task at hand than in others. What this
region is depends on the data (and the task): are you interested in the
detailed behavior in the middle of the data set, while caring less about the
exact behavior near the edges of the spectrum? Or do you mostly want to
identify outliers, so you’re less interested in the variation in the middle
ground? Either way, you want to make sure the strongest visual change in the
palette coincides with those regions you care about the most. The conse-
quence is that palettes that distribute change uniformly across the full range
of values probably won’t give the most insight into the most relevant parts of

[[D15]]

your data. (This implies that palettes generated by a simple mathematical for-
mula are often suboptimal.)
Specialized tasks call for more creativity in the creation of palettes. For exam-
ple, the data may pass through zero (or some other relevant threshold) in the
middle of the spectrum. You want to clearly indicate this threshold but also
show the smooth variation on both sides of it. In such a situation, you may
want to have a sharp transition (such as a hard red/blue changeover) in the
spectrum at the location of the threshold, while letting the colors change
smoothly as you go away from the threshold on either side.

To summarize: don’t distribute strong visual gradients uniformly over the
entire plot range if some regions of the plot range contain much less detail
than others. Good palettes are often not uniform, and every palette must be
tuned for both the current data set and the intended use.

•  Make sure the color-mapping is unambiguous. One problem with the standard
rainbow is that it wraps around: the very highest and the very lowest numeric
values are mapped to similar colors. In general, you want to avoid such
ambiguous mapping, although there are situations where it may be less of a
problem because the data is sufficiently smooth to prevent ambiguity when
interpreting a plot.

•  Prefer pastel colors and subtle changes in palettes. This is possibly the most
surprising of all recommendations. Intuitively, you’d expect that bright, fully
saturated colors would give the best visual contrast. But this isn’t the case.
Instead, pastel colors, which are easier on the eyes, make it easier to detect
details and structure in the data. High-quality palettes often employ a range
of carefully chosen, subtle colors.

•  Use a palette suitable for the intended medium. Graphs for a print publication
may require a different palette than graphs for an overhead presentation. For
best results, you may need to choose or adapt a palette for each target
medium.

A particular concern is black-and-white publishing. Some palettes attempt to
change hue and lightness simultaneously, in an attempt to be suitable for
both color displays and monochrome printing. (Gnuplot’s standard palette is
of this kind.) I usually don’t find the results very convincing. If in doubt, I’d opt
for redrawing a graph using a custom-made grayscale palette for black-and-
white displays.

•  Develop a library of high-quality palettes. Designing good palettes is difficult,
involving much trial-and-error. I recommend that you build a library of well-
designed palettes, drawing not only on your own experience, but also on pal-
ettes developed by others. Adapting a good palette to a specific task is likely
to lead to better results than improvising one from scratch.

•  Never publish a false-color plot without showing the mapping of numbers to col-
ors explicitly. No matter how intuitive you think your chosen color scheme is,
keep in mind that there’s no universally accepted, generally understood map-
ping from numbers to colors. Without a colorbox, there’s a good chance that
your graph can’t be understood by someone else.


[[D16]]

=== D.3 The colorbox

The colorbox shows the mapping of numeric values to colors. It fulfills a role similar
to that of the key (see section 7.4), but for colored plots. You encountered examples
in figures D.1 and D.2; further examples can be found in figures D.5 and D.6, in sec-
tion D.4. In all cases, the colorbox appears to the right of the main figure.
The colorbox is only visible when you use palette-mapped colors. Its appearance is
controlled through the set colorbox options:
set colorbox [ vertical | horizontal ]
[ noborder | bdefault | border {idx:linestyle} ]
[ default | user [ origin {pos:orig} ] [ size {pos:size} ] ]
[ front | back ]
The colorbox can be oriented either horizontally or vertically (this is the default). It’s
usually surrounded by a border, which you can turn off using noborder . Alternatively,
a predefined line style can be selected as an integer argument to the border keyword.
You can’t use explicit line options with set colorbox .

The standard size and position for the colorbox can be chosen using the
default keyword. Alternatively, the keyword user selects customized sizing and
placing of the colorbox, indicated through the appropriate optional arguments. For
(continued)
What’s more, even if the ordering relation in your color scheme is clear (for
example, in a simple grayscale), the mapping of numbers to specific colors is
impossible to infer without an explicit key. Always provide one!
•  Be aware of color-blindness. A significant percentage of the population exhib-
its some form of color-vision deficiency, with men being much more likely to
be affected than women. Graphs that rely solely on color to convey informa-
tion pose special challenges for such individuals.

The phenomenon of color-vision deficiency is complex, with many different
aspects to consider, and it exhibits a great deal of individual variation. It’s
therefore difficult, if not impossible, to give general advice, but here are two
observations to keep in mind. First, be aware that the most common form of
color-blindness is a reduced ability (or inability) to distinguish between red
and green. Palettes that rely primarily on red and green are therefore particu-
larly challenging. Furthermore, you may want to include secondary clues
(such as changes in lightness) in a palette and not rely on color changes
exclusively.

Finally, keep in mind that it all depends on the specific task at hand and on the pur-
pose of your visualization. Consider a map: it may either be colored continuously (top-
ographic map) or use discrete colors (political map). In the discrete case, the colors
may be unsorted and chosen for contrast (to indicate different countries) or sorted
(to indicate a sorted quantity, such as the average income per head for each country).
Continuous quantities are always sorted, and therefore smooth palettes should
always be constructed to convey a clear sense of ordering.


[[D17]]
three-dimensional plots, the only permitted coordinate system is the screen system
(see section 7.2); but for two-dimensional plots (including set view map plots), all
coordinate systems can be used.

The colorbox can be suppressed using unset colorbox . Keep in mind that hiding
the colorbox doesn’t allow the viewer to extract any quantitative information from
your plot, because there’s no obvious mapping from colors to numbers and vice versa.
Don’t do it unless you’re sure the graph is meaningful even without the colorbox.
You can think of the colorbox as just a little plot within a larger one, and so it
responds to all commands and options that manipulate plot ranges, axes, and tic
marks. For the colorbox, there’s only a single axis, running from low values (and the
corresponding colors) to high values (and colors). This axis as known as the cb (for
colorbox) axis. Table D.1 lists all relevant options. None of these options change the
way colors are distributed in the palette; they merely change the way numeric values
are assigned to those colors.


==== D.3.1 Mapping the plot range to the palette

As I pointed out in section D.2.2, the positions assigned to the various nodes making
up a palette are merely relative positions within the palette. In particular, they don’t
necessarily correspond to the values that are being plotted. Hence there’s a separate
step, wherein the range of the palette is mapped to the range of data values.
Table D.1 Colorbox options. They control the placement and formatting of tic marks along the colorbox
and are therefore similar to the corresponding commands for any of the other axes. (The details given in
the indicated sections apply to the colorbox as well.)
Option name Description Section
set cbrange Sets the range of numeric values covered by the colorbox, inde-
pendently of the range chosen for the range of z values.

8.2
set logscale cb Distributes numeric values logarithmically across colors. 3.4
set cblabel Assigns a text label to the colorbox. This label is placed next to
the colorbox. If the label is invisible, use set cblabel
offset, because the default placement may put the label out-
side the canvas area.

7.3.3
cbtics Controls all aspects of tics for the colorbox (major tic marks). 8.3
mcbtics Controls minor tic marks for the colorbox. 8.3.4
grid cbtics Draws grid lines within the colorbox at the major colorbox tic
positions.

8.3.6
grid mcbtics Draws a grid within the colorbox at the minor colorbox tic
positions.

8.3.6
cbdata time Chooses time-series mode for the values in the colorbox. 8.4
cbdtics Uses weekdays as tic labels for numeric values. 8.4.1
cbmtics Uses months as tic labels for numeric values. 8.4.1

[[D18]]
The relevant command in this context is set cbrange . Its syntax is equivalent to
the familiar set xrange or set yrange command (see section 8.2). The set cbrange
command assigns a specific numeric value to the minimum and the maximum posi-
tion in the palette; intermediate values are distributed uniformly into the interval. To
make this concrete, let’s say that you’ve defined a palette using
set palette defined ( 0 "blue", 0.5 "white", 1 "red" )
If the data that you want to plot now spans the range from -5 to +5, then you want to
set cbrange to this interval:
set cbrange [-5:5]
All of this is extremely straightforward. Confusion can arise through three items in
particular:
•  It’s easy to forget that the positions specified when defining the palette are only
relative positions and are in no fixed relationship to the plotted data.
•  By default, cbrange is set to autoscaling (see section 8.2.1): that is, set cbrange
[*:*] . In practice, this means gnuplot sets the range of the palette equal to the
range of plotted values. Most of the time this is exactly what you want, but it
obscures the fact that choosing the cbrange is a separate step.

•  Values outside the chosen cbrange are plotted in the nearest color. That means
a data point that exceeds the maximum (or minimum) of an explicitly set
cbrange is plotted in the color corresponding to the largest (or smallest) posi-
tion in the palette. In particular, there’s no visual indication that a data point is
outside the interval defined by cbrange .

.DEALING WITH OUTLIERS
*****
*****
A common problem when using palettes is the occurrence of outliers in the data.
(You’ll see a worked example in section D.5.1.) Imagine a data set where all data
points take on values between 0 and 1 except for a handful of records that have a
value of 10. Gnuplot’s default setting of set cbrange [*:*] means the palette will be
autoscaled to the interval [0:10] . Most of the data points (and all the data points that
you care about) are therefore mapped to the bottom tenth of the palette, with the con-
sequence that they’re all drawn in more or less the same color. That’s not the
intended effect.

The remedy is simple: fix cbrange to the relevant range of values using set
cbrange [0:1] . Now, the “good” data points are mapped to the full range of the pal-
ette, and the few outliers are mapped to the color at the top end of the palette.
It may be desirable to indicate data points that exceed the specified cbrange using
a special color. This can be done—see section D.5.1 for an explanation.





[[D19]]

TIP: Gnuplot’s default of autoscaling cbrange means a single outlier can dis-
tort the mapping of colors to values. Choose an explicit cbrange to make sure
the interesting data points span the entire range of the palette. Gnuplot han-
dles outliers that exceed the cbrange reasonably.

.LOGARITHMIC SCALING OF THE COLORBOX
*****
*****
Finally, you can use logarithmic scaling with the colorbox. Setting set logscale cb
distributes tic marks (that is, numeric values) logarithmically across the color spec-
trum. This command doesn’t affect the way the palette is constructed from the nodes;
it only affects the way the colors are mapped to data values.


=== D.4 Using palettes

Palettes can be used with different plot styles. First, wherever gnuplot expects an
explicit color specification (such as rgb "red" or rgb "#ff0000" ), you can instead pro-
vide a color from a palette using the keyword frac followed by the relative position in
the palette. See the following listing and figure D.5.

set palette defined ( 0 'web-green', 1 'goldenrod', 2 'red' )
set grid lt 1 lw 1.5 lc palette frac 0.5
set label 1 "{/:Bold Origin}" at 1.5,-0.15 center tc palette frac 0.9
set arrow 1 from 1.1,-0.15 to 0.125,-0.02 lw 2 lc palette frac 0.9
plot [-5:3] airy(x) lw 2 lc palette frac 0.1
Listing D.1 Commands for figure D.5 (file: airy.gp)
-0.5
-0.4
-0.3
-0.2
-0.1
0
0.1
0.2
0.3
0.4
0.5
0.6
-5 -4 -3 -2 -1 0 1 2 3
Origin
airy(x)
-10
-5
0
5
10
Figure D.5 Selecting colors from a palette (see listing D.1). In this figure, the color position
in the palette is fixed, and the colors are therefore not data-dependent.

[[D20]]
More interestingly, palettes can be used for data-dependent coloring: the color of
each point or line segment is found by mapping the values of an additional data col-
umn into the palette, using the keyword palette in the plot command. Figure 9.5
showed how to use this feature to create a curve that changes its color continuously.
The next listing shows another application (compare figure D.6).

set palette defined ( 0 'blue', 1 'grey', 2 'red' )
plot "cloud" u 1:2:3 palette pt 7
The first two columns determine the location of each point, and the third column is
used to find the point’s color by mapping the numeric value into the provided palette.
Because data-dependent coloring depends on the ability to add columns to the using
directive, it’s only available when plotting data. If you want to use it when plotting
functions, you must employ the "+" pseudofile.

Furthermore, palettes can be used together with splot to create colored surface
plots—that will be the topic of the following section. But the most exciting application
of palettes is to use them in false-color plots that rely entirely on color to convey values
in a data set. Because of their importance, they’re treated in their own section later in
this appendix (section D.5).

Listing D.2 Commands for figure D.6 (file: cloud.gp)
-0.6
-0.5
-0.4
-0.3
-0.2
-0.1
0
0.1
0.2
0.3
0.8 0.9 1 1.1 1.2 1.3 1.4 1.5 1.6 1.7
"cloud" u 1:2:3
0
0.2
0.4
0.6
0.8
1
1.2
1.4
1.6
1.8
2
Figure D.6 Selecting colors from a palette (see listing D.2). In this figure, the
values of the data points are used to select their colors from the palette; the plot
uses data-dependent coloring.


[[D21]]

==== D.4.1 Colored surface plots with pm3d

Palettes were originally developed to color surface plots generated by splot (see
appendix C). You saw an example at the beginning of this appendix (see figure D.1).
The splot command uses palettes when the with pm3d style is given explicitly as part
of the splot command, or when pm3d mode is enabled globally using set pm3d .
.APPEARANCE OPTIONS FOR COLORED SURFACE PLOTS
*****
*****
The set pm3d command controls various aspects of the way color is used:
set pm3d [ at [b|s|t] | map ]
[ implicit | explicit ]
[ border {lineoptions} | hidden3d {idx:linestyle} | nohidden3d ]
[ interpolate {int:xsteps},{int:ysteps} ]
[ corners2color
[ mean|geomean|harmean|rms|median|min|max|c1|c2|c3|c4 ] ]
[ scansautomatic | scansforward | scansbackward | depthorder ]
[ flush [ begin | center | end ] ] [ [no]ftriangles ]
[ clip1in | clip4in ]
In pm3d mode, gnuplot constructs a surface from colored, nontransparent polygons.
Because the polygons are opaque, no explicit hidden-line removal is required—
instead, surface areas closer to the observer hide surface areas further away. The
resulting effect therefore depends on the order or direction in which the surface is
drawn. Although gnuplot usually chooses a reasonable strategy for drawing surfaces, it
helps to keep this point in mind when working in pm3d mode. (The gnuplot standard
reference documentation contains more information on the algorithm.)
A colored, opaque surface can be drawn at three positions: at the top of the plot-
ting box, on the plotted surface, or at the bottom. The position is specified using the
keyword at together with a combination of the letters b (bottom), s (surface), and t
(top). Each letter can appear twice (for example, set pm3d at bsb : this is one instance
where the way surfaces are drawn in pm3d mode is potentially relevant). You can use
the keyword map as a shortcut for set view map; set pm3d at b .

By default, the command set pm3d puts pm3d into implicit mode, meaning all sur-
faces drawn with splot are drawn using colored, nontransparent polygons. If you
want to combine colored surfaces together with transparent, wire-mesh surfaces in a
single graph, you need to choose explicit mode using set pm3d explicit . In explicit
mode, you must specify pm3d as part of the splot command:
splot f(x,y) w l, g(x,y) w pm3d
This plots the function f(x,y) with a transparent wire mesh, but the function g(x,y)
with a colored, opaque surface.

A colored surface can be drawn together with a wire mesh of the same surface
using set pm3d hidden3d . This command takes as an additional, mandatory argument
the index of a (previously defined) line style, which is used for the wire mesh. When
using this plot mode, don’t forget to switch off the regular surface and hidden-line

[[D22]]
removal using unset surface; unset hidden3d . An alternative to hidden3d is the
border keyword, which can be followed by any of the familiar line options (see the tip
at the end of section 6.2.3) that should be used for drawing the wire mesh.
As an alternative to set dgrid3d (see section C.5), pm3d has a similar interpolating
capability, triggered by the keyword interpolate . It takes two mandatory arguments,
giving the number of interpolation steps in both x and y directions.

Two sub-options to set pm3d control the way the surface is constructed. The
corners2color keyword selects how the color of each polygon is determined from the
z coordinates of its four corners: as mean, median, and so on, or by choosing the value
from one of the corners directly. The scansforward , scansbackward directives con-
trol the direction in which the surface is constructed. The default is scansautomatic
and usually doesn’t need to be changed.

Further sub-options apply to certain edge cases when the input data doesn’t fall on
a regular grid. See the gnuplot standard reference documentation for details.
.ELEVATION AND COLOR
*****
*****
So far, we’ve assumed that the color of each surface element was chosen based on the
elevation of that surface element, in order to enhance the height perception of the sur-
face. But it’s also possible to map a different quantity than the height to the color spec-
trum. This is done with an additional parameter to the using directive to the splot
command:
set pm3d at s
splot "data" u 1:2:3:4 w pm3d
Here, the first and second columns of the data file are taken as x and y coordinates,
the value of the third column is used for the z coordinate (the height) of the surface,
and the color is assigned according to the fourth column.


=== D.5 False-color plots

There are at least three different ways to use gnuplot palettes to create false-color
plots:
•  Using the with points style (and other standard styles)
•  Using the with pm3d style
•  Using the with image style
All of these approaches have different strengths and weaknesses, which makes them
suitable to different tasks. Table D.2 summarizes the most important differences.

[[D23]]


==== D.5.1 Using points

Imagine that you oversee a fleet of machines or servers, and you want to visualize the
number of defects that have occurred for each device and for each day of operation.
The situation is complicated by the fact that not all machines operate every day:
depending on the daily load, machines are either active on a given day or not.
This problem has a natural grid-like structure: you care about the number of
defects for each machine-day. But because not all machines are active on all days, the
grid isn’t complete and has missing cells. One interesting question is this: do defects
cluster in any way? The data format is simple enough: for each day that a machine was
active, the data set contains a record with the day number, the machine ID , and the
number of observed defects (see listing D.3).

    # Day Machine Defects
    1 1 2
    1 3 0
    1 4 1
    1 5 2
    ...

Figure D.7 uses gnuplot’s with points style, together with a color palette, to visualize
this data set. The selected point size is relatively large, because each point represents a
cell in the data grid. Each record is first plotted as a filled (colored) square; then a
Table D.2 Relevant differences between the three plot styles that can be used to create false-color plots
with points with pm3d with image
Surface elements can be at
arbitrary locations.

Surface elements must form a
regular, but possibly distorted,
grid.

Surface elements must form a
strictly regular grid.

Each surface element is drawn
independently from all others.

Each surface element is deter-
mined by the data points at its
four corners.

Each surface element is centered
on a data point and extends half-
way to the four neighboring data
points.

Surface elements can be at
arbitrary locations.

Surface elements can be drawn
on an elevated surface.

Surface elements must form a
flat surface.

Style is only available for data. Style works with functions and
data.

Style is only available for data.

Listing D.3 Incomplete data for figure D.7 and listing D.4 (file: machines)
with points
with pm3d
with image

[[D24]]
thin, black empty frame is drawn around it purely for aesthetic reasons. (Try it with
and without the frame!) Two clusters of sometimes troublesome machines are clearly
visible. (The commands are in the following listing.)
unset key
set xlab "Day"; set ylab "Machine"; set cblab "Defects" offset 1,0
set palette defined (0 'web-green', 0.5 'goldenrod', 0.999 'red', 1 'black')
set cbrange [0:7]
plot [0:32][0:21] "machines" u 1:2:3 w p pt 5 ps 1.75 pal,
➥ "" u 1:2 w p pt 4 ps 1.75 lw 0.5 lc black
To get a good result with this data set, it’s necessary to specify cbrange explicitly.
Although the number of defects for most of the data points is somewhere between 0
and 7, there is a handful of records that show catastrophic failure, with defect rates up
to 50! If you relied on gnuplot’s autoscaling of the cbrange , then almost all the data
points would be drawn in green. Fixing the palette using set cbrange [0:7] ensures
that the interesting data points are distributed across the entire palette. The palette
was designed for this scenario: its uppermost edge is black so that points exceeding
the interval defined by cbrange stand out.

One last comment before leaving this section: this approach to creating false-color
plots isn’t limited to the with points style, but works with most of the familiar styles. You
Listing D.4 Commands for figure D.7 (file: machines.gp)
0
5
10
15
20
0 5 10 15 20 25 30
Day
0
1
2
3
4
5
6
7
Defects
Figure D.7 Showing the number of defects per machine and day in a false-color
plot. This plot uses the with points style. See listing D.4.


[[D25]]
may want to experiment with the with vectors and with circles styles (section 6.3.5).
The with boxxyerrorbars style may come in handy to create rectangles of arbitrary
size. For example, the following plot command is for all practical purposes equivalent
to the one from listing D.4:
plot [0:32][0:21]
➥ "machines" u 1:2:(.35):(0.35):3 w boxxyerrorbars lc palette fs solid,
➥ "" u 1:2:(.35):(0.35) w boxxyerrorbar lw 0.5 lc black

==== D.5.2 Using the pm3d style

Although pm3d mode has so far been discussed only in the context of colored surface
plots, it can also be used for false-color plots by placing the viewpoint vertically above
the surface. This is what the set pm3d map option does.

For data sets on a regular grid, the with image style is probably more convenient,
but there are two instances where you still need with pm3d for false-color plots: when
plotting functions and when the points fall on a grid that is locally distorted. Figure D.2
demonstrated two examples of plotting functions using with pm3d , so I don’t need to
repeat this here, but I’ll show an example of a distorted grid. Listing D.5 is similar to
the file in listing C.2 that was graphed in a surface plot in figure C.9, but with one dif-
ference: the positions of the points down the center line are all slightly shifted in an
irregular fashion. The splot command can handle this:
set palette defined ( 0 'blue', 0.5 'grey', 1 'red' )
set pm3d map
splot "distorted-grid" u 1:2:3
# x y z
0 -1 10
0 0 10
0 1 10
1 -1 10
1.2 0.2 5
1 1 10
2 -1 10
1.9 -0.2 1
2 1 10
3 -1 10
2.8 0 0
3 1 10
As you look at figure D.8, I’d like to emphasize how the surface elements are spanned
by their four corners, and that the color is a combination of the z values at those four
corners. You may want to experiment with set pm3d corners2color to see what results
you get.

Listing D.5 Data for figure D.8: distorted grid (file: distorted-grid)

[[D26]]


==== D.5.3 Using the image style

The with image style is suitable for flat graphs on a regular, rectangular (or at least
rhomboidal) grid. The style is very restrictive (the grid has to be strictly regular, with
no missing values) but convenient if the necessary conditions are fulfilled. The style
performs few internal consistency checks, and it’s relatively easy to get gnuplot (and
oneself) confused by trying to use with image for anything other than what it was
intended for: flat graphs on strictly regular grids!
The with image style works with all three data formats familiar from splot : grid,
matrix, and packed matrix (see section C.4). When using the packed matrix format
(which doesn’t include coordinate information), then all the formal requirements are
automatically fulfilled—this is the sweet spot for the style. When using the general,
non-uniform matrix format, be aware that gnuplot does not evaluate all the coordi-
nates. It merely examines the coordinates of the bottom-left and top-right corners
(the origin and its diagonal counterpart) and then chops the coordinate axes into
cells of equal size. It isn’t possible to have a non-uniform grid with the with image style,
even when using the non-uniform matrix format!
Even more confusion may result when using the grid format, which includes
explicit coordinate information for all cells, because gnuplot ignores most of them
and again constructs a regular, equally spaced array of cells. The with image style will
fail with an error message if any of the cells are missing.

TIP: The with image style is strictly for data sets on a regular, rectangular grid of
equally spaced cells. If your problem doesn’t fit that description, don’t use this style.
0 0.5 1 1.5 2 2.5 3
x
-1
-0.5
0
0.5
1
y
0
2
4
6
8
10
Figure D.8 The with pm3d style can create false-color plots even when the grid is distorted.
Every tile is spanned by the data points at its four corners. See listing D.5 for the data.

[[D27]]
Figure D.9 shows a false-color plot of the original file from listing C.2 (that is, without
distortions). Notice that the individual cells are centered on the location of the data
points. Because of the large areas of solid color, I used a pastel version of the usual
red/white/blue palette. Also, notice that the command is plot , not splot !
set palette def ( 0 '#8080ff', 0.5 '#ffffff', 1 '#ff8080' )
plot "grid" u 1:2:3 w image, "" u 1:2 w p pt 7 lc black
.MISSING VALUES AND UNSORTED DATA FILES
*****
*****
The with image style won’t tolerate missing values: every cell in the grid must exist
and contain a value, even if it’s an invalid value (see section 4.3.4). If gnuplot detects
an invalid value, with image doesn’t draw the corresponding surface element; the
background remains visible (that’s usually what you want).

Furthermore, if your data file is in grid format, you may think it isn’t necessary for
the file to be sorted: after all, the grid format contains the locations of all the surface
elements explicitly, and hence gnuplot should be able to place each surface element
individually. But remember that the with image style doesn’t process the coordinates:
instead, it places surface elements in the order in which they’re found in the data file.
The data file therefore must be sorted, by horizontal coordinates first and by vertical
coordinates second.

If your file doesn’t fulfill these two requirements, then you need to write a short
script in the programming language of your choice that reads in the raw data, populates
-1.5
-1
-0.5
0
0.5
1
1.5
-0.5 0 0.5 1 1.5 2 2.5 3 3.5
y
x
0
2
4
6
8
10
Figure D.9 A false-color plot for a regular grid, created using the with image style.
Notice that each tile is centered on a data point. The data is shown in listing C.2.

[[D28]]
a suitable grid, and then prints the grid, in order, while supplying NaN values for all cells
that don’t contain data. Or, you can use the with points style to begin with.
.OTHER WITH IMAGE FORMATS
*****
*****
In addition to the with image style described so far, gnuplot also provides the with
rgbimage and with rgbalpha styles. Both are similar to the with image style, but they
expect each data point to be described not by a single value, but by separate color com-
ponents. The with rgbimage style expects three values per data point (for the red,
green, and blue color components), and the with rgbalpha style expects four (with the
addition of an alpha channel for transparency). All values are expected in the range
from 0 to 255. See the standard gnuplot reference documentation for more details.

=== D.6 Case study: coloring the Mandelbrot set

Figure D.10 was created using the with image style from a file containing the x and y
coordinates for each pixel and a third value that’s mapped into a color palette. The
figure shows a small section of the complex plane near the edge of the Mandelbrot
set. The x and y coordinates correspond to the real and imaginary components of a
complex number, and the color-coded quantity is the number of iteration steps before
the Mandelbrot iteration diverged. 9 The data file was calculated separately.
This example is interesting not only because the appearance of the Mandelbrot set
continues to be fascinating, but also because it poses particular challenges for the
9
See the Wikipedia page on the Mandelbrot set for details of the calculation.
0.225
0.23
0.235
0.24
0.245
0.25
0.255
0.26
0.265
-0.745 -0.74 -0.735 -0.73 -0.725 -0.72 -0.715 -0.71 -0.705
100
1000
10000
Figure D.10 A section of the complex plane, showing part of the Mandelbrot
set and its fractal boundary. See listing D.6.


[[D29]]
design of a good palette. The range of values that needs to be represented through
color spans three orders of magnitude (from 10 to 10,000). Moreover, the distribution
of values is extremely uneven: all larger values are concentrated in a very narrow area
near the border of the Mandelbrot set (the black area in figure D.10).

You can attempt to form a palette by distributing nodes non-uniformly, like so:
set palette defined ( 0 'cyan', 200 'blue', 300 'red', 600 'yellow',
➥ 2000 'white', 9999 'white', 10000 'black' )
The problem is that now the colorbox is almost useless: fully 80% of the area is white
(from 2,000 to 10,000). It’s better to use logarithmic scales. Remember: set logscale
cb doesn’t change the way the palette is constructed from the nodes, but only changes
the way numerical values are mapped to colors (that is, how tic marks are distributed
across the palette). In order to assign nodes to specific numerical values despite the
logarithmic scale, the following listing uses the logarithms of the desired values in the
definition of the palette and fixes cbrange explicitly.

set size ratio -1
unset key
set palette defined ( log(15) 'cyan', log(100) 'blue', log(200) 'red',
➥ log(500) 'yellow', log(2000) 'white',
➥ log(9995) 'white', log(10000) 'black')
set logscale cb
set cbrange [15:10000]
plot "fractal" u 1:2:3 w p pt 5 ps .05 lc pal z
One last question concerns the style to use with the plot command. This example
may look like an ideal application of the with image style, because it involves a regular
grid without missing cells. But the implementation of with image contains certain
optimizations that lead to a loss of accuracy for a figure containing as much fine-
grained detail as the Mandelbrot set. I therefore used the with points style, but with
a very small point size.


=== D.7 Case study: an interactive palette explorer

For palettes that are defined through nodes, two things need to be fixed:
•  The precise color of each node
•  The absolute position of each node within the palette
In section D.2.5, I gave many examples of colors and color combinations. In this sec-
tion, I’ll demonstrate a technique you can use to experiment with the position of each
node. 10
Listing D.6 Commands for figure D.10 (file: fractal.gp)
10
I’d like to thank Ethan Merritt for making me aware of this technique.


[[D30]]
In section D.2.5, the nodes were distributed more or less uniformly across the spec-
trum. The need to place the nodes more carefully arises when there’s more than one
strong visual gradient in the palette and you want these gradients to coincide with
regions of significant change in the data set. Depending on the placement of the
nodes, a false-color plot of the same data set can appear quite different—even when
the colors for all the nodes remain unchanged. Wouldn’t it be lovely if you could
move the nodes back and forth in the palette and have gnuplot simultaneously redraw
the graph you’re working on? The following listing shows a tool that does just that.
# Invoke as: call 'palette-explorer.gp' 'blue' 'white' 'red'
c1 = ARG1
c2 = ARG2
c3 = ARG3
s = 0.5
ds = 0.025
p = sprintf( "set palette defined (0 '%s', s '%s', 1 '%s'); ", c1, c2, c3 )
bind 'F1' "s=(s-ds>0?s-ds:0); " . p . "replot;"
bind 'F2' "s=(s+ds<1?s+ds:1); " . p . "replot;"
eval(p)
This script is intentionally simple: it’s intended for palettes of only three nodes. But
the principles carry over directly to more complicated situations. You invoke the script
using the call command and giving the three colors that you would like to use in
your palette:
call "palette-explorer.gp" "blue" "white" "red"
The script creates a palette using the supplied colors and also defines a parameter s
that controls the relative position of the central node within the palette. Furthermore,
the script creates two key bindings to the two function keys F1 and F2 (the choice of
keys is obviously arbitrary; see section 12.4.3 for more information on the bind com-
mand). If the plot window has keyboard focus, then with each key press, the parame-
ter s and therefore the position of the middle color are moved by the amount ds ,
either up or down. Then the palette is re-created, and the plot is redrawn—using the
new palette—via replot . The effect needs to be seen to be believed. Try it out with a
graph like figure D.6 or figure D.7.

As I said, this script is intentionally simple and is meant to demonstrate the basic
principle most clearly. Three generalizations suggest themselves:
•  Extension to more than three colors
•  Different choice for the size of the step width ds
•  Displaying or exporting the final palette
Have fun!
Listing D.7 Command file for an interactive palette explorer (file: palette-explorer.gp)
Stores the
supplied colors
Initializes the location
of the central node
Selects the step size
Constructs
a string
containing
the palette
definition
Creates
hotkey bindings
Evaluates the string when a hotkey is pressed

[[D31]]

=== D.8 Further reading

It’s difficult to find information on color selection that is based on empirical evidence;
many recommendations aren’t much more than personal opinion. At the same time,
it’s interesting to observe that there has been real (albeit slow) progress over time.
Here are some suggestions:
•  A relatively recent and very careful paper has been prepared by Kenneth More-
land at Sandia National Lab. This is a good place to start, and it also reviews pre-
vious work. (He’s also the inventor of the palette in panel J in figure D.4.)
Check out his website: http://kennethmoreland.com/color-maps.

•  Two early papers by Bernice Rogowitz and Lloyd Treinish at IBM suggest using
changes in lightness for data exhibiting lots of fine detail and using changes in
hue and saturation for data with smooth changes. The titles are “Why Should
Engineers and Scientists Be Worried About Color?” and “How Not to Lie with
Visualization,” and you can find copies on the web.

•  Another interesting paper is “Escaping RGB land: Selecting Colors for Statistical
Graphics” by Achim Zeileis, Kurt Hornik, and Paul Murrell. These authors
emphasize the importance of taking human visual perception into account
when designing palettes and recommend palettes involving very pastel colors.
This paper also can be found on the web.

Several websites make palettes available for download:
•  J. J. Green maintains a very large selection of color gradients at his cpt-city web-
site (http://soliton.vm.bytemark.co.uk/pub/cpt-city). Many of the palettes
found here are intended for graphic design, not data visualization, and the
sheer number of examples can be overwhelming at first. Palettes can be down-
loaded in a format that is suitable for gnuplot.

•  Hagen Wierstorf (who also maintains the www.gnuplotting.org website) provides
a selection of suitable palettes at https://github.com/Gnuplotting/gnuplot-
palettes. Many of these palettes are based on the work of Cynthia Brewer (see the
next entry).

•  Cynthia Brewer has done extensive research into the development of color
schemes, primarily for use in the preparation of maps. Be aware that not all of
these findings may carry over to scientific visualization! There’s an online tool
that you can use to create your own color palettes, incorporating her ideas, at
http://colorbrewer2.org.


[[E1]]
== Appendix E Special plots

In this appendix, we’ll discuss several “special” plotting options. All of them produce
graphs that are visually and semantically more complicated than the line-and-point
plots we’ve been dealing with so far.

First, you’ll learn about gnuplot’s multiplot feature. This is a way to combine differ-
ent plots into a single graph. The individual components may either be arranged on a
regular array (that’s the more common case) or be placed arbitrarily (for example, to
create insets within a larger graph).

In the remainder of the appendix, we’ll introduce three types of plots that summa-
rize entire data sets in some way. First, we’ll discuss box-and-whisker plots: a popular
method to visualize the distribution of points in a simple and robust fashion. Then
we’ll turn to parallel coordinates. This is a relatively new type of plot that’s intended to
reveal structure in multidimensional data sets, but gnuplot makes them easy to create.
The final section deals with gnuplot’s support for drawing histograms: pretty and pop-
ular, they’re most suitable for presentations and information graphics.

Except for the first topic (multiplot), the material in this appendix is rather spe-
cialized, and not everyone may have a need for it. Make sure you catch the multiplot
features, but feel free to skip the rest if it’s not relevant to you right now.

=== E.1 Multiplot

Gnuplot’s multiplot feature allows you to combine several plots into a single graph.
This can be useful for a number of purposes:
•  To make arrays of related graphs
•  To create insets: graphs within a graph (for example, to show some details at
greater magnification)
•  For special effects, such as multiple, clearly separate plots aligned on a common
axis

==== E.1.1 Using multiplot mode

Multiplot mode is enabled like an option through a set multiplot command and
remains active until an unset multiplot command has been issued. When multiplot
mode is active, the usual gnuplot> prompt is replaced by a multiplot> prompt. All
plot (or splot or replot or test , but not test palette ) commands issued at this
prompt are directed to the same graph, and you can control their relative location by

[[E2]]
giving additional directives to the set multiplot command. Any other option modi-
fied while in multiplot mode is applied to all subsequent plots. This is the normal gnu-
plot behavior; multiplot mode doesn’t change that. Any option or decoration you
want to apply to only one of the plots in a multiplot combination has to be explicitly
set before and unset after the respective plot command. (This doesn’t apply to deco-
rations positioned with screen coordinates: because there’s only a single screen coor-
dinate system even for a multiplot graph, they’re global objects.)
Different terminals may exhibit different behavior regarding the time when plots
become visible. Some show each plot right when the corresponding plot has been
issued; others may delay generation of the entire array of graphs until multiplot mode
is switched off again.

There’s one very important limitation to keep in mind: you can’t change the termi-
nal while in multiplot mode! This implies that you may have to change the way you
use gnuplot: it’s not possible to build up a graph iteratively using an interactive
(screen) terminal and then, finally, export it to a graphics file format, because this
would require a change of terminal before the last step. Instead, the file-based termi-
nal has to be selected first, with all other commands following. Personally, I write all
my commands to a command file (using a text editor) and then run it using load ,
while using an interactive terminal. When I’m satisfied with the resulting graph, I
insert a terminal and output setting at the top of the command file, and run it one
final time to export the graph to file. Because multiplot mode is mostly a tool for gen-
erating final presentation graphics (as opposed to doing exploratory data analysis,
which must be interactive to be useful), this works quite well. (Also see section 12.2 on
using external editors in general.)
There’s one additional gotcha to be aware of when using multiplot mode: if you
want to capture the commands for the plot using save , you must issue the save com-
mand before leaving multiplot mode. (Otherwise, only the commands for the last plot
in the multiplot set will be saved to file!) And remember to exit multiplot mode using
unset multiplot , not using Ctrl-D (which terminates gnuplot).

TIP: When using multiplot mode, it makes the most sense to prepare a com-
mand file with all plot and appearance commands and to load it into gnuplot
using load . Using multiplot mode interactively is just too fickle and frustrating.

==== E.1.2 Layout options and the set multiplot command

The multiplot feature can be used in two different ways. You can specify the layout of a
tabular array of graphs as part of the set multiplot command and let gnuplot figure
out sizing and positioning of all components in the overall graph automatically. Or
you can take control of all aspects of the layout yourself and arrange the individual
graphs using set size and set origin . All of this will become much clearer once we
look at some examples.




[[E3]]
The set multiplot option has the following sub-options:
set multiplot [ title "{str:title}" ] [ font "str:font [,int:size]" ]
[ layout {int:rows},{int:cols}
[ rowsfirst | columnsfirst ] [ downwards | upwards ]
[ scale {flt:xfactor}[,{flt:yfactor}] ]
[ offset {flt:xoff}[,{flt:yoff}] ]
[ margins {flt:left},{flt:right},{flt:bottom},{flt:top}
[ spacing {flt:horizontal} [, {flt:vertical} ] ] ]
]
set multiplot [ prev | next ]
The title directive is equivalent to set title (see section 7.3.3) for regular plots: it
can be used to give an overall title to the entire assembly of graphs. (The set title
command can still be used to assign a title to each of the individual component
graphs.) All other directives (besides title ) are only meaningful in combination with
the layout keyword, which is a convenience feature to create arrays of graphs easily.
In the following sections, I’ll first guide you through some examples using the layout
facility before explaining how to place graph components explicitly.

TIP: The layout feature of gnuplot’s multiplot mode may seem daunting at
first, but—once mastered—it takes the pain out of multipanel graphs. I highly
recommend that you learn how to use it and prefer it over explicit placement
of individual graphs whenever possible.

The layout directive takes two mandatory integer arguments, which describe the
number of rows and columns in the resulting array of graphs. This array will be filled
with subsequent plot commands. The order in which subsequent panels are filled can
be controlled through the rowsfirst , columnsfirst , downwards , and upwards key-
words (see figure E.1). The default is rowsfirst downwards .

Each new plot command moves to and fills the next array location (when using
layout ). You can skip one location by using set multiplot next instead of a plot
Figure E.1 Choosing the layout direction in multiplot mode: rowsfirst downwards (left; this is the
default) and columnsfirst upwards (right)

[[E4]]
command: gnuplot will leave the next location in the sequence blank. You can back
up using set multiplot prev .

Individual plots can be scaled and shifted from their (automatically assigned) size
and position using the scale and offset keywords. The arguments to scale are mul-
tiplicative scale factors for the x and y size of the individual plots (if only one is given,
it’s applied to both axes). Using the offset directive, you can shift all graphs by the
same amount; the arguments are interpreted as coordinates in the screen system (see
section 7.2), so that offset 0.25, 0.1 shifts everything by a quarter of the overall
width of the graph to the right and by a tenth of the height up.

The margins and spacing directives must be used together (and together with the
layout option). They create a regular array of equally sized graphs that are properly
aligned, even if only some of these graphs have marginal labels. (This will become
much clearer when we look at an example in section E.1.4.) One important limita-
tion: set multiplot layout doesn’t nest—you can’t have a small array of graphs as a
panel in a larger array.


==== E.1.3 Regular arrays of graphs with layout

The layout feature makes it truly easy to generate multipanel graphs (as in figure E.2):
just see how short and clear the following listing is! (It’s important to use a complete do
for loop here, and not just an inline loop: if I had used an inline loop, all six curves
would have been drawn to a single plot, instead of six plots with a single curve in each.)
t(x,n) = cos(n*acos(x))
set xrange [-1:1]
set yrange [-1:1]
set multiplot title "Chebyshev Polynomials" layout 3,2
do for[k=1:6] { plot t(x,k) t sprintf( "k=%d", k ) }
unset multiplot
If you want to have more control over the way individual plots are assembled to form a
plot, you can’t use layout ; instead you have to handle everything yourself using set
size and set origin . You’ll see an example in a moment (in section E.1.5), but first,
let’s turn to another problem: tic marks and axes labels in a multiplot array.

==== E.1.4 Accommodating marginal labels with margins and spacing

Figure E.2 is pretty and was easy to do. Yet it isn’t fully satisfactory: it feels cluttered.
Can’t we remove some of the decorations, so that we have more room for the graphs,
but do so without losing any information? An obvious candidate are some of the tic
labels: all the individual graphs show exactly the same plot range (both horizontally
and vertically), and hence there’s no need to repeat the tic labels on all the graphs.
Just a single set of tic labels around the outer edges of the entire array would be suffi-
cient. In fact, that’s exactly what you see in figure E.3.

Listing E.1 Commands for figure E.2. (file: chebyshev.gp)
Defines the function to plot
Fixes the range for all plots
Turns on
multiplot mode
Creates six
individual plots
Don’t forget to turn
off multiplot mode!

[[E5]]
You now need to switch on tic and axis labels for some, but not all, of the graphs. As a
result, the commands in the next listing aren’t nearly as nice as the previous version
(in listing E.1).

t(x,n) = cos(n*acos(x))
set xrange [-1:1]
set yrange [-1:1]
set multiplot layout 3,2 margins 0.15,0.95,0.15,0.95 spacing 0.03,0.05
set xtics format ""; set ytics format "%g"; plot t(x,1) t "k=1"
set xtics format ""; set ytics format ""; plot t(x,2) t "k=2"
set ylabel "Chebyshev\nPolynomials"
set xtics format ""; set ytics format "%g"; plot t(x,3) t "k=3"
unset ylabel
set xtics format ""; set ytics format ""; plot t(x,4) t "k=4"
set xlabel "k odd";
set xtics format "%g"; set ytics format "%g"; plot t(x,5) t "k=5"
set xlabel "k even";
set xtics format "%g"; set ytics format ""; plot t(x,6) t "k=6
unset xlabel
unset multiplot
Listing E.2 Commands for figure E.3 (file: marginals.gp)
Chebyshev Polynomials
-1
-0.5
0
0.5
1
-1 -0.5 0 0.5 1
k=1
-1
-0.5
0
0.5
1
-1 -0.5 0 0.5 1
k=2
-1
-0.5
0
0.5
1
-1 -0.5 0 0.5 1
k=3
-1
-0.5
0
0.5
1
-1 -0.5 0 0.5 1
k=4
-1
-0.5
0
0.5
1
-1 -0.5 0 0.5 1
k=5
-1
-0.5
0
0.5
1
-1 -0.5 0 0.5 1
k=6
Figure E.2 A regular array of small plots created in multiplot mode. See listing E.1.
Now includes margins
and spacing options!
Top
row
Middle
row
Defines the
overall vertical
axis label
Turns off the
vertical
label again
Bottom
row
Turns off the horizontal label
Defines the horizontal axis label on the left
Defines the horizontal axis label on the right
Don’t forget to turn off multiplot mode again!

[[E6]]
Before each plot command, the tic labels for both axes are turned either on or off.
The title is dropped from the top of the plot (and hence from the set multiplot
command), but axis labels are attached to some of the plots.

An essential change has occurred in the set multiplot command: it now includes
the margins and spacing keywords. When these keywords (which must be used
together) are included in the set multiplot command, then the individual graphs
are drawn so that their graph area (that is, the area within their borders) is exactly the
same size for all of them—regardless of whether an individual graph has marginal
labels (such as tic or axis labels). In contrast, if the margins and spacing keywords
aren’t included, then gnuplot draws the individual plots such that their screen area
(that is, their total extent, including their margins) is the same. (See section 7.2 for
the definition of graph and screen coordinates, specifically figure 7.2.)
To put it differently: when margins and spacing are included in the set multi-
plot command, then gnuplot ignores the margins of individual plots and instead arranges
plots with equally sized graph areas on a regular array. In this case, it’s the user’s
responsibility to make sure there’s enough room for any marginal notes attached to
individual graphs. By contrast, when using set multiplot layout without the margins
and spacing keywords, then gnuplot shrinks the graph area of individual plots to
make room for that plot’s margins. In this case, you can be sure the margins fit into
-1
-0.5
0
0.5
1
k=1 k=2
-1
-0.5
0
0.5
1
Chebyshev
Polynomials
k=3 k=4
-1
-0.5
0
0.5
1
-1 -0.5 0 0.5 1
k odd
k=5
-1 -0.5 0 0.5 1
k even
k=6
Figure E.3 A regular array of small plots. All individual plots are of the same size and therefore
line up, although some of them have marginal notes whereas others don’t. See listing E.2.

[[E7]]
the multiplot array, but the individual plots may not all be the same size (and, in con-
sequence, their borders may not line up).

The numerical arguments to margins and spacing control the extent of the mar-
gins around the outer edge of the array of plots and the internal spacing between
individual plots, respectively. Two different systems of measurement are available:
character widths and heights, and fractions of the total screen size. Character widths
must be indicated through the char keyword, and fractions of the screen width
through the screen keyword. If neither is found, screen is assumed. 1
The margins sub-option behaves similarly to the set margins command (see sec-
tion 9.5.3): when the char system is used, then the arguments are interpreted as the
width of the margins around the array of subplots; if the screen system is used, then
the arguments are interpreted as the absolute position of the outer boundaries of the
array of subplots. In contrast to set margins , the keyword doesn’t need to be repeated
for each argument, but applies to all subsequent numbers (until the next appearance
of either screen or char ).

.GRAPHS SHARING A COMMON AXIS
*****
*****
Here’s another example that demonstrates the features just introduced. Occasionally,
you may want to show two or more graphs together, aligned on a common axis, to
facilitate comparison between curves in both graphs. Of course, it’s possible to put all
the curves into a single plot (as in section 8.1), but sometimes doing so would lead to
an overly cluttered graph—for example, if you wanted to compare not just two curves,
but two entire sets of curves.

To make this concrete, let’s assume I want to compare the log-normal probability
density function and its cumulative distribution function for an entire set of parame-
ters. I could place all these curves into a single graph, but the graph would appear
crowded, and it would be difficult to distinguish the curves properly from each other.
Instead, let’s put them into two different graphs, aligned on a common axis, as
shown in figure E.4. By now, you know how to create a multipanel plot using multiplot
mode (see the following listing), so I only need to point out a few details.
lgn( x, s ) = exp(-0.5*(log(x)/s)**2)/(x*s*sqrt(2*pi))
clgn( x, s ) = norm(log(x)/s)
vals = "0.05 0.1 0.25 0.5"
set multiplot title "" layout 2,1 margins 0.1,0.9,0.1,0.95 spacing 0,0
1
For gnuplot 5.0, only screen is available; char is available for gnuplot versions beginning with 5.1.
Listing E.3 Commands for figure E.4 (file: sidebyside.gp)
The log-normal
probability density
B
Its cumulative
distribution function
C
Defines parameters as a
whitespace-separated string
D

[[E8]]
set key bottom right Left title "Cumulative"
set xtics 0.2 format ""
set ytics 0.2,0.2
set grid
plot [0:2][0:1] for[v in vals] clgn(x,v) t "s=" . v
set key top right Left title "Density"
set format x "%g"
set ytics auto
unset grid
plot [0:2][0:8.5] for[v in vals] lgn(x,v) t "s=" . v
unset multiplot
First come the definitions of the two functions to plot B C . You also define the set
of parameters, as a whitespace-separated string (because gnuplot doesn’t have an
array type) D .

The spacing value in set multiplot is 0 , so that the two graphs will touch each
other. So that the axis labels for the vertical axis don’t clobber each other where the two
graphs meet, the first label (for y=0) in the top graph is suppressed E (see section 8.3.3
for details of the set ytics option).

Top
plot
No tic labels for the x axis,
but tic marks are drawn
with the given frequency
Suppresses the tic label
for y=0 (tics start at 0.2
with step width 0.2)
E
Bottom
plot
Restores the tic labels for the x-axis
0.2
0.4
0.6
0.8
1
Cumulative
s=0.05
s=0.1
s=0.25
s=0.5
0
1
2
3
4
5
6
7
8
0 0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8 2
Density
s=0.05
s=0.1
s=0.25
s=0.5
Figure E.4 Showing two plots side by side using multiplot mode (see listing E.3)

[[E9]]

==== E.1.5 Graphs within a graph

Sometimes it’s useful to place small graphs inside a larger one: for example, to show a
detail of the overall graph at greater magnification, or to provide some form of ancil-
lary information (as in figure E.5). This can’t be accomplished using layout , so you
have to roll your own.

Listing E.4 shows how it’s done. 2 Let’s step through this example carefully and point
out some details and potential pitfalls.

In this example, the main curve is drawn first, and then the small insets are added
to it. Options (such as their size) that apply to all insets are defined first. Because the
insets are small, all decorations and margins are removed, to reduce clutter.
The insets are placed on the existing graph individually by specifying the location
of their bottom-left corner using the set origin command. By default, gnuplot
doesn’t clear the area where the insets will be placed, and therefore it’s necessary to
2
This example is taken from the thermodynamics of phase transitions: if you heat a magnet beyond its critical
temperature, it loses all magnetization. In the graph, the thick curve shows the magnetization as a function of
temperature, and the three insets show the typical form of the free energy as a function of the magnetization
for three different temperatures: below, at, and above the critical value. Below the critical temperature, the
free energy develops two minima at nonzero values of the magnetization, indicating that a magnetized phase
is stable. Right at the critical temperature, these two minima coalesce, yielding a curve that’s flat at the origin.
Above the transition temperature, there’s only a single minimum at zero: the magnetization of the sample is
now zero.

-1
-0.5
0
0.5
1
1.5
2
-3 -2 -1 0 1 2
Figure E.5 A larger graph with insets showing ancillary information. See listing E.4.

[[E10]]
do so explicitly using the clear command. The subsequent plot command then
draws one of the insets on the cleared area.

f(x,a) = x<a ? sqrt(a-x) : 0
g(x,b) = 0.25*x**4 + b*x**2
set multiplot
set grid
plot [-3:2.5][-1:2] f(x,0) notitle w l lw 3
unset grid
unset tics
unset key
set margins 0, 0, 0, 0
set size 0.2
set origin 0.175,0.425
clear
plot [-2.5:2.5][-1.5:2] g(x,-1)
set origin 0.4625,0.125
clear
plot [-2.5:2.5][-0.5:3] g(x,0)
set origin 0.675,0.425
clear
plot [-2.5:2.5][-0.5:3] g(x,1)
unset multiplot

=== E.2 Box-and-whisker plots

Box-and-whisker plots (or boxplots for short) are a simple and robust way to visualize
univariate point distributions. They serve the same purpose as kernel-density esti-
mates (see section 3.5.2). Boxplots are somewhat easier to use, because they don’t
depend on an adjustable parameter (kernel-density estimates require a choice for the
bandwidth). This convenience comes at a price: boxplots lose some detail of the rep-
resented data set (in particular, boxplots are unable to identify data sets having multi-
ple maxima—an important limitation to keep in mind!) and aren’t very intuitive.

==== E.2.1 Individual box-and-whisker plots

Boxplots are created using the familiar plot command together with the with boxplot
style. (The boxplot keyword can’t be abbreviated!) At least two parameters must be
supplied in the using specifier. The first is the horizontal position at which the boxplot
Listing E.4 Commands for figure E.5 (file: insets.gp)
Defines the functions to plot
Switches on multiplot—this time without the layout option
Turns on the background grid
Plots the main curve as a thick line
Switches off the background grid for subsequent plots
Removes all decorations, such as tic marks
and text labels, from the inset plots
Sets all margins for the insets to zero
Sets the size of the insets, as a
fraction of the overall plot size
Left inset
Sets the inset location by specifying its origin in screen coordinates
Clears the background for the inset
Generates the inset plot
Middle
inset
Sets the inset location by specifying its origin in screen coordinates
Clears the background for the inset
Generates the inset plot
Right
inset
Sets the inset location by specifying its origin in screen coordinates
Clears the background for the inset
Generates the inset plot
Switches off multiplot mode

[[E11]]
will be drawn (usually this is a numeric constant, but it can also be a column number so
that the horizontal position will be read from file). The second entry in the using spec-
ifier indicates which column from the data file to represent via box and whiskers. (This
means the first column in the using specifier gives the horizontal position and the sec-
ond column the vertical “data”—just as for any other plot style.) To create a boxplot of
the data from listing 3.4, you’d use this command (see figure E.6):
plot "measurements" u (1):1 w boxplot
It’s not a problem to have multiple boxplots in the same graph (for easy comparison).
You can also combine the boxplot style with other styles, such as lines or points.
.SEMANTICS OF BOX - AND - WHISKER PLOTS
*****
*****
The various elements of box-and-whisker plots represent different properties of the
underlying data set. Boxplots usually represent various percentiles: for skewed point dis-
tributions, these quantities are more informative than the (more familiar) mean and
standard deviation. (The boxplot style uses gnuplot’s stats command to find the
median and percentiles. Check section 5.6 for details on the calculation.)
•  The box indicates the interquartile range: the top and bottom boundaries of the
box are chosen such that one quarter of points falls outside and below the box,
and one quarter outside and above the box.

•  The location of the median is indicated by a marker inside the box. The median
divides the data set in two equal parts: half of all data points have a value less
than the median, and half of the points have a value greater than the median.
0.5
1
1.5
2
2.5
3
3.5
4
4.5
0.2 0.4 0.6 0.8 1 1.2 1.4 1.6 1.8
"measurements" u (1):1
Figure E.6 A box-and-whisker plot, when drawn using only default appearance options

[[E12]]
•  The construction of the whiskers is more complicated (and more ambiguous).
Traditionally, whiskers extend to the most extreme data point that lies within
1.5 times the interquartile range from either edge of the box. The process is as
follows: draw a line that’s 1.5 times the height of the box outward from either
end of the box, and then trim the line back to the last data point within its
range. This location marks the end point of the whisker. (See figure E.7.)
•  Points that fall outside the range of the whiskers are considered outliers and are
indicated with individual symbols.

The complicated prescription for constructing the whiskers requires an explanation.
The idea is to indicate the actual extent of the “tails” of the distribution, while distin-
guishing them clearly from true outliers.

What are outliers? A point is considered an outlier only if it’s exceptionally far away
from the other points. It isn’t enough for a point to be the smallest or largest value in
a data set: a data set that’s very compact (so that all points cluster close together)
doesn’t have any outliers—but it still has a smallest and a largest value! All this means
true outliers are points that are far from the center of the distribution, when mea-
sured in units of the width of the distribution. The method for constructing whiskers
reflects this: only points far from the center in comparison to the interquartile range are
considered outliers. (Look at figure E.7: it has an outlier at its upper range, but its
lower part is sufficiently compact that no point is considered an outlier.)
0
1
2
3
4
IQR
Step 1:
1.5 × IQR
Step 2:
Trim back
Step 1
Step 2
Outlier
No
Outlier!
Figure E.7 Construction of a box-and-whisker plot from the data set. (The individual
data points are shown on the left.)

[[E13]]
Once outliers have been identified, each whisker is trimmed back toward the most
extreme data point still within the range of the respective whisker. The length of each
whisker therefore indicates the true extent of the tail of the distribution on either side
of the distribution.

You can customize the precise determination of the whiskers using set style
boxplot :
set style boxplot [range {flt:range} | fraction {flt:frac}]
If invoked with the range keyword, followed by a floating-point number, the whiskers
are constructed in the way just explained, and the numerical argument is used as the
factor by which the interquartile range is multiplied to determine the original extent of
the whisker. This is the default behavior, and the default value of the multiplier is 1.5.
But it’s also possible to designate a fixed fraction of points as outliers. This is done
with the fraction keyword. It must be followed by a numeric argument between 0.5
and 1.0, which indicates the fraction of regular (that is, non-outlier) points. For exam-
ple, set style boxplot fraction 0.9 treats 10% of points as outliers. As before, the
whiskers will extend to the data point furthest from the center that isn’t considered
an outlier.

.APPEARANCE OPTIONS
*****
*****
In addition to the options just discussed, which control the semantics of the boxplot,
there are also options that merely modify the visual appearance of the plot. Boxplots
are similar to the with candlesticks style (see section 6.3.2), and many of the options
mentioned there apply to the present situation as well. In particular, you can use set
bars (see section 6.3.2) to customize the length of the bars at the end of the whiskers;
set boxwidth controls the width of the central box, and set style fill its fill style.
Instead of using global options, you can also use inline directives. For example, to
have the central box lightly shaded, you can use
plot "measurements" u (1):1 w boxplot fs solid 0.2
Similarly, the box width can be specified inline, as a third entry to the using specifier.
This makes it possible to have the box width be data-dependent. (Compare figure 14.14
and listing 14.9 for an example.)
Finally, there are some additional sub-options to set style boxplot :
set style boxplot [ [no]outliers ] [pointtype | pt {int:pointtype}]
[ candlesticks | financebars ]
By default, outliers are indicated with filled circles (point type 7). The point type can
be overridden in the plot command or changed globally using set style boxplot . If
there are several outliers with the same value, then they’re plotted as individual points
in a horizontal row. The keyword nooutliers suppresses the visual representation
for individual outliers. It isn’t possible to draw horizontal box-and-whisker plots with

[[E14]]
gnuplot at this time, but you can use the financebars appearance in conjunction with
the boxplot style instead of the candlesticks appearance (see section 6.3.2).
By default, gnuplot draws a box around the plotted data. I’ve argued elsewhere
(see the sidebar in section 8.3.2) why this makes sense. For box-and-whisker plots, this
additional boundary is less important, and you may want to switch it off (using the set
border command—see section 9.5.2). But if you choose to do so, you should retain
the left border and its tic marks: otherwise, there’s no way for an observer to infer
quantitative information from the plot! (See figure E.8 and listing E.5 for an example.)

TIP: Many of gnuplot’s default appearance options aren’t particularly suitable
for box-and-whisker plots. You can improve the quality of your graphs by cus-
tomizing borders, tic marks, and tic labels. But it’s essential to retain enough
information that an observer can still infer numeric values from the graph!

==== E.2.2 Serial box-and-whisker plots

So far, we’ve only considered individual box-and-whisker plots for single data sets. But
the technique becomes significantly more useful when you’re dealing with an entire
series of data sets, distinguished by a discrete label. For example, imagine that some
experiment has been repeated several times, each time subject to a different treatment
level. It would be nice to see a graph of all point distributions at once, showing a separate
boxplot for each different treatment level. Fortunately, gnuplot let’s you do just that.
All you have to do is to include a fourth column in the using specifier. The value
of this fourth column is interpreted as the treatment level, and a separate boxplot is
constructed for each new value of the level. (Of course, the values in the fourth col-
umn should form a discrete set—frequently it will be a string.) All the resulting box-
plots are then shown together and on the same scale, facilitating comparison across
treatment levels.

We’ll demonstrate this feature using one of the most famous data sets in the his-
tory of statistics: Fisher’s Iris data. 3 The data set consists of size measurements of differ-
ent parts of Iris flowers. For each flower, four quantities were measured (sepal length
and width, and petal length and width, all in centimeters). Three different kinds of
Iris are considered (I. Setosa, I. Versicolor, and I. Virginica), and for each kind, the data
set contains values for 50 instances. The question is whether it’s possible to determine
the type of plant from the measurements in the data set.

Figure E.8 shows the sepal length as box-and-whisker plots separately for each type
of flower. The commands for this graph are in the next listing. (The file format of the
data set available at the UCI repository is comma-separated, not whitespace-separated,
requiring a call to set datafile separator !)
3
A quick internet search will turn up multiple sources; I use the version found in the UCI Machine Learning
Repository at http://archive.ics.uci.edu/ml/datasets/Iris.


[[E15]]

set datafile separator ","
unset key
set border 2
set xtics scale 0
set ytics nomirror
set ylabel "Sepal length [cm]"
plot "iris.data" u (1):1:(0.5):5 w boxplot
This graph follows the suggestions made at the end of the previous section: it does
away with most decorations, but retains the numerical scale along the left edge. You’ll
also notice that gnuplot automatically labels each boxplot with the corresponding
level (that is, the entry in the fourth column in the using expression).
.APPEARANCE OPTIONS FOR SERIAL BOX - AND - WHISKER PLOTS
*****
*****
Most of what you learned for a single box-and-whisker plot carries over to serial box-
and-whisker plots. The first entry in the using specification (which previously gave
the horizontal location of the boxplot) now gives the horizontal position of the first
(left-most) boxplot in the series. The spacing between successive boxplots is con-
trolled using set style boxplot , which also allows you to customize some other
appearance aspects:
Listing E.5 Commands for figure E.8. (file: iris1.gp)
Retains only the border on the left
Removes the tics, but retains the tic labels
Avoids tics on the right
4
4.5
5
5.5
6
6.5
7
7.5
8
Iris-setosa Iris-versicolor Iris-virginica
Sepal length [cm]
Figure E.8 A serial box-and-whisker plot. The distribution of sepal lengths is shown
separately for each type of flower.


[[E16]]
set style boxplot [ separation {flt:s} ]
[ labels [ off | auto | x | x2 ] ]
[ [un]sorted ]
In brief:
•  Using the separation keyword, you can control the distance between boxes.
The argument is the desired separation in x axis units; its default is 1.
•  By default, the value of the fourth column (the level) is printed as a tic label on
the horizontal axis. The axis can be selected using x (below) or x2 (above).
Choosing auto places the labels on whichever axis is indicated by the axes key-
word inside the plot command (see section 8.1.2). The keyword off suppresses
printing of labels.

•  Boxplots are sorted by the first appearance of their level in the data file. (It isn’t
necessary for the data file to be grouped by level, hence the first appearance of
a level determines the sort order.) This can be changed using the sorted
option. Levels are assumed to be strings, so the sort order is alphabetical, not
numeric. An arbitrary sort order isn’t possible at this time.

Here are three further things to keep in mind:
•  As you saw in figure E.8, gnuplot automatically places a string label for the level
in the margin. These labels are equivalent to tic marks and tic labels; you can
customize their appearance using set xtic .

•  Although I don’t show an example here, it’s absolutely possible to combine
multiple data sets in a single graph. For example, if you want to plot both sepal
length and width in a single plot, you can do so as follows:
plot "iris.data" u (1):1:(.5):5 w boxplot, "" u (5):2:(.5):5 w boxplot
This creates boxplots for the sepal lengths of the three types of flower starting at
x=1, together with corresponding boxplots of the sepal widths, starting at x=5.
•  It’s unfortunately not possible to draw each level in a separate color or style at
this time.

.WORKED EXAMPLE : AN ARRAY OF SERIAL BOXPLOTS
*****
*****
In figure E.8, you can see the distribution of sepal lengths for all three types of flowers
at once—but wouldn’t it be great if you could compare all four measured quantities
for all types of flowers in a single graph? The multiplot mode that was explained ear-
lier in this appendix makes this easy.

Figure E.9 shows all four measurements in a 2 × 2 matrix of serial boxplots. Looking
over these graphs, it immediately stands out that I. setosa is distinguished by petals that
are smaller, in both length and width, than those of the other two variants. Because
the boxplots display outliers explicitly, you know for sure that even the largest instance
of I. setosa in this data set was smaller than the smallest instance of either of the other
two types!

[[E17]]
You can see the commands for figure E.9 in the next listing. Notice that I retained the
borders around the individual plots in this case: this helps to distinguish them from
one another in the array of graphs.

set datafile separator ","
unset xtics; set ytics 1
set bars 0; unset key;
set multiplot
➥ title "From left to right: I. Setosa, I. Versicolor, I.Virginica"
➥ layout 2,2 margins 0.1,0.9,0.1,0.9 spacing 0.075
set xlabel ""; set ylabel "Sepal"
plot "iris.data" u (1):1:(0.5):5 w boxplot
set xlabel ""; set ylabel ""
plot "iris.data" u (1):2:(0.5):5 w boxplot
set xlabel "Length"; set ylabel "Petal"
plot "iris.data" u (1):3:(0.5):5 w boxplot
set xlabel "Width"; set ylabel ""
plot "iris.data" u (1):4:(0.5):5 w boxplot
unset multi
Listing E.6 Commands for figure E.9 (file: iris2.gp)
From left to right: I. Setosa, I. Versicolor, I.Virginica
4
5
6
7
8
Sepal
2
3
4
5
1
2
3
4
5
6
7
Petal
Length
0
1
2
3
Width
Figure E.9 An array of serial box-and-whisker plots. The distribution of all four observed
quantities is displayed for all flower types separately. (See listing E.6.)

[[E18]]

=== E.3 Parallel coordinates

Graphs using parallel coordinates are a relatively new idea. Their purpose is to reveal
structure in multivariate data sets: that is, data sets that have more than two or three
attributes per record. In contrast to some other multivariate visualization techniques,
parallel coordinates aren’t limited to data sets containing only a few records. The par-
allel-coordinates technique therefore scales well, both in the number of attributes and
in the number of records. The downside is that plots of parallel coordinates are nei-
ther pretty nor particularly intuitive. You aren’t likely to exhibit them in a presenta-
tion, but they may serve as an intermediate discovery tool.

To understand parallel coordinates, let’s go back to the Iris data set introduced in
section E.2.2. For the moment, consider just the first record in that data set. It has the
following values in its five columns:
Sepal length 5.1 cm
Sepal width 3.5 cm
Petal length 1.4 cm
Petal width 0.2 cm
Name Iris setosa
To construct a parallel-coordinates plot, you draw a coordinate axis for each attribute;
but in contrast to other types of graphs, all axes are arranged in parallel. The values
for every record are then marked on each coordinate axis and connected with lines.
For the first record from the Iris data set, the result is shown in figure E.10.
Sepal
Length
Sepal
Width
Petal
Length
Petal
Width
4.5
5
5.5
6
6.5
7
7.5
2
2.5
3
3.5
4
1
2
3
4
5
6
0.5
1
1.5
2
2.5
Figure E.10 Parallel-coordinates plot for a single record

[[E19]]
This procedure is repeated for all records in the data set (see figure E.11). Now this
plot can be examined for possible structure in the data set. Look for clusters or gaps
along one of the axes: those can be used to classify data sets into groups. You can also
look for outliers and for correlations among data sets: positively correlated quantities
show up as parallel (or nearly parallel) lines, whereas negative correlation is indicated
by lines crossing each other. From figure E.11, for instance, a cluster of records with
relatively small values for petal length and width stands out: those belong to I. setosa—
something you already knew from figure E.9. But from the parallel-coordinates plot, it
becomes also obvious that short sepal length implies long sepal width (and vice
versa)—a fact that isn’t so easy to discern from figure E.9.

Having seen what graphs of parallel coordinates are and how they’re used, let’s
understand how to create them with gnuplot. (Support for this feature is still new. The
basic functionality works well, but you’ll frequently find that you need to change the
default appearance yourself.)

==== E.3.1 Creating parallel-coordinates graphs

You create graphs of parallel coordinates in gnuplot using the plot command together
with the with parallelaxes style. The individual columns that are used for the axes
are listed as entries in the using specifier. The basic command to create figure E.11 is
therefore
set datafile separator ","
plot "iris.data" u 1:2:3:4 w parallelaxes
Sepal
Length
Sepal
Width
Petal
Length
Petal
Width
4.5
5
5.5
6
6.5
7
7.5
2
2.5
3
3.5
4
1
2
3
4
5
6
0.5
1
1.5
2
2.5
Figure E.11 Parallel-coordinates plot for the entire Iris data set

[[E20]]
A word of warning: the current implementation arbitrarily limits the number of col-
umns to seven. 4 If you want to use more columns, you need to employ multiplot
mode—see section 14.2.5 for a worked example.

.APPEARANCE OPTIONS FOR PARALLEL COORDINATES
*****
*****
You can use the set paxis command to control the appearance of individual axes in a
parallel-coordinates plot:
set paxis {int:n} [ range {range-options} | tics {tic-options} ]
This command combines the functionality of the set _range and the set _tics
commands familiar from chapter 8. The mandatory first argument to set paxis is an
integer between 1 and 7 that identifies which of the parallel axes the options should
be applied to. (The axis with index 1 is always the left-most one.) Only a single axis
can be identified with each invocation to set paxis ; if you want to make adjustments
to several axes, you need to do so explicitly or use an inline loop ( set for[k=1:7]
paxis k ... ).

The range keyword must be followed by a legal range specification (like so: set
paxis 1 range [0:10] ). The tics keyword acts like the familiar set xtics or set
ytics ; all options available to those commands apply in the current case as well.
The appearance of the parallel axes can be customized using 5
set style parallel [ front | back ] [ lineoptions ]
By default, the axes and the associated tic marks are drawn in front of the data. The
axes are drawn as thick black lines; you may find that you want to reduce the thick-
ness. (See the tip at the end of section 6.2.3 for all the appearance aspects covered by
lineoptions .)

==== E.3.2 Worked example: Iris data, again

I hope the preceding discussion has convinced you that gnuplot’s parallel-coordi-
nates feature is remarkably easy to use, despite the intimidating appearance of the
resulting graphs. In order to get the most value out of these graphs, it’s nonetheless
necessary to augment gnuplot’s functionality. In this section, you’ll first see ways to
improve the appearance of the plot and then learn how to highlight a subset of records.
The latter is an essential capability when using parallel-coordinates plots. (Chapter 14
shows some additional tricks applicable in particular to data sets containing a large
number of records.)
4
The details of the implementation may have changed by the time you read this. Check the release notes for
the most up-to-date information.

5
This feature wasn’t documented in the standard gnuplot reference documentation at the time of this writing.

[[E21]]
.IMPROVING APPEARANCE
*****
*****
Similar to the situation you encountered for serial box-and-whisker plots (section E.2.1),
gnuplot’s defaults aren’t the most suitable for parallel-coordinates plots, either. (As
you may have found out already, the graphs resulting from the simple command given
earlier look quite different than figure E.11.) You can improve the appearance of the
plot by adapting the defaults appropriately. Here’s how it’s done.

set datafile separator ','
unset key
unset border
unset ytics
set xtics ("Sepal\nLength" 1, "Sepal\nWidth" 2,
➥ "Petal\nLength" 3, "Petal\nWidth" 4 )
set lmargin 6
set bmargin 3
set for[k=1:4] paxis k tics
plot [1:4] "iris.data" u 1:2:3:4 w parallel
Because there are exactly four parallel axes (located at positions 1 through 4), the
plot range is restricted in the plot command to that interval. This gets rid of the mar-
gins that gnuplot leaves by default on both sides of a parallel-coordinates plot and
maximizes the area available for the plot. Whether you want to switch off the borders
around the entire graph is a personal choice. I prefer the appearance of the graph
without them—in particular the horizontal lines at top and bottom feel visually con-
straining.

.HIGHLIGHTING A SUBSET OF RECORDS
*****
*****
The purpose of parallel-coordinates plots is to identify structure in a data set. The
visual presentation makes it easy to see where lines cluster (for example, in figure E.11,
there is an obvious cluster of lines with small petal length). This leads to the next ques-
tion: how are lines that cluster for some attribute distributed elsewhere? If you could
just select the lines in the cluster so that they’re highlighted everywhere, then this ques-
tion would be answered. In this section, I’ll show you how to do this, but there’s more:
you’ll also learn how to take the type of flower into account and to include it in the
highlighting (see figure E.12). 6
The name of the flower is given in the data set as a string. To plot it, you must
map the names to numbers. The most convenient way to do such transformations is
Listing E.7 Commands for figure E.11 (file: iris3.gp)
6
After this section was written, I noticed that the Wikipedia page for parallel coordinates also uses Fisher’s Iris
data to demonstrate this technique and includes a figure very similar to figure E.12. As I said, it’s one of the
best-known and most-frequently used data sets in all of statistics!
Switches off unnecessary decorations
Replaces the tic labels along
the horizontal axis with the
names of the quantities plotted
Adjusts the left and bottom margins
to make room for the labels
Turns on tic marks for all four parallel axes

[[E22]]
probably using an external scripting language, but it can be done entirely in gnuplot,
too. The following function ( cls is short for class)
cls(s) = s eq 'Iris-setosa' ? 1:(s eq 'Iris-versicolor' ? 2:3)
consists of two nested conditionals and maps the names to the value 1, 2, or 3. To
include the names in the plot, remember that all of gnuplot’s commands to control
tic labels are available for each axis in a parallel-coordinates plot. With
set paxis 5 tics ( "I. Setosa" 1, "I. Versicolor" 2, "I. Virginica" 3 )
➥ left offset 4,0
you can place informative labels on the tics of the new, fifth axis.

The last trick is to use data-dependent coloring for the lines themselves (see sec-
tion 9.1.5)! You remember: if you use linecolor variable (or lc var for short), then
the right-most entry in the using specifier is interpreted as the index of a color from
gnuplot’s sequence of linetypes (and their associated colors). Because the function
cls(s) already maps the flower names to the values 1, 2, and 3, you can use these val-
ues directly as a color index: each flower type is drawn with a different line type (and
therefore a different color). You can find all the commands in the next listing. (One
last comment: instead of adjusting the left and right margins explicitly, here I decided
to manage the horizontal extent of the plot entirely through the plot range. That’s
sheerly a matter of convenience—you can do it either way.)
Sepal
Length
Sepal
Width
Petal
Length
Petal
Width
4.5
5
5.5
6
6.5
7
7.5
2
2.5
3
3.5
4
1
2
3
4
5
6
0.5
1
1.5
2
2.5
I. Setosa
I. Versicolor
I. Virginica
Figure E.12 A parallel-coordinates plot for the entire Iris data set. Records are
color-coded based on the flower type.


[[E23]]

set datafile separator ','
unset key
unset border
unset ytics
set xtics ( "Sepal\nLength" 1, "Sepal\nWidth" 2,
➥ "Petal\nLength" 3, "Petal\nWidth" 4 )
set bmargin 3
set for[k=1:4] paxis k tics
set paxis 5 tics ( "I. Setosa" 1, "I. Versicolor" 2, "I. Virginica" 3 )
➥ left offset 4,0
cls(s) = s eq 'Iris-setosa' ? 1:(s eq 'Iris-versicolor' ? 2:3)
plot [0.6:5.8] "iris.data" u 1:2:3:4:(cls(strcol(5))):(cls(strcol(5)))
➥ w parallel lc var

=== E.4 Histograms

The histogram styles are a bit of a departure from gnuplot’s usual processing model,
in that they have the concept of a data set. The overall appearance of the plot depends
on both row and column information simultaneously.

Histograms are the result of counting statistics. For the sake of discussion, let’s
assume that there are three political parties (Red, Blue, and Green), and you want to
show the number of votes for each party. The outcome of a single election can be
shown easily using, for instance, the histeps style.

But what to do if elections are held annually, and you want to show the results for a
number of years in one plot? To make matters concrete, let’s consider a specific data
file, shown next.

    # Year Red Green Blue Spending
    1990 33 45 18 21
    1991 35 42 19 18
    1992 34 44 14 25
    1993 37 43 25 27
    1994 47 15 30 28
    1995 41 14 32 33
    1996 42 20 35 35
    1997 39 21 31 32

One possible solution would be to plot the data as a regular time series (see figure
E.13—ignoring the last column for the time being):
set style data lp
set for [k=1:3] lt k pt 7
plot "elections" u 1:2 t "Red", "" u 1:3 t "Green", "" u 1:4 t "Blue"
Listing E.8 Commands for figure E.12 (file: iris4.gp)
Listing E.9 Data for figures E.13 and E.14 (file: elections)
Uses line points
Uses a filled circle
as a symbol

[[E24]]
Often this is exactly what you want, but this format can be clumsy, in particular if
there are many competing parties or if there is a lot of variation year over year. The
histogram style offers an alternative.

Using set style histogram clustered generates a sequence of histograms (see
figure E.14). Each histogram corresponds to one row in the input file (in this example,
this corresponds to one year):
set style fill solid 0.5
set style histogram clustered
plot "elections" u 2 t "Red" w histograms,
➥ "" u 3 t "Green" w histograms, "" u 4 t "Blue" w histograms
Instead of repeating the with histograms style directive multiple times in the plot
command, you can select the global style to use histograms for all data sets:
set style fill solid 0.5
set style histogram clustered
set style data histograms
plot "elections" u 2 t "Red", "" u 3 t "Green", "" u 4 t "Blue"
For all the histogram styles, it’s usually a good idea to have the boxes filled to make
them more easily distinguishable, and so this option is enabled here. You can control
the spacing between consecutive histograms using the optional gap parameter to the
set style command: set style histogram clustered gap 2 . The size of the gap is
measured in multiples of individual boxes in the histograms. (To create gaps within
each histogram, so that neighboring boxes don’t touch each other, use set boxwidth .)
10
15
20
25
30
35
40
45
50
1990 1991 1992 1993 1994 1995 1996 1997
Red
Green
Blue
Figure E.13 Election results as a time series. The data file is shown in listing E.9.

[[E25]]
Keep in mind that the way gnuplot reads the data file for histograms is a bit unusual:
each new row generates a new histogram cluster, but the histogram style accepts only a
single column in the using directive. You therefore have to list the file repeatedly in
the same plot command to generate meaningful histograms, as shown previously.
Finally, the labels gnuplot places along the x axis aren’t very meaningful. You can
either set explicit labels for each histogram using the set xtics add command or
read a textual label from the data file using the function xticlabels() ( xtic() for
short). The effect of the latter is demonstrated in figure E.15. (For more information
on tic labels, see chapter 8.)
In addition to the clustered histogram style we looked at so far, there is also a
stacked style. Using this style, the individual boxes aren’t placed next to one another,
but stacked on top of each other, so that each vertical box forms an entire histogram.
By default, adjacent boxes touch each other, but as usual, you can use set boxwidth
to control the width of individual boxes (see figure E.15):
set style fill solid 0.5
set style histogram rowstacked
set style data histograms
plot "elections" u 2:xtic(1) t "Red", "" u 3 t "Green", "" u 4 t "Blue"
There are two additional histogram styles, which I won’t describe here in detail,
because they’re similar to the ones we discussed already. The set style histogram
errorbars style is similar to the clustered style, except that it reads two values for
10
15
20
25
30
35
40
45
50
-1 0 1 2 3 4 5 6 7 8
Red
Green
Blue
Figure E.14 Election results using set style histogram clustered . This is the
same data set as in figure E.13.


[[E26]]
each box, the second being the uncertainty in the data, represented with a standard
error bar. The set style histogram columnstacked style is equivalent to the row-
stacked style, except that each vertical box is built from a single column (not row) in
the input file.

One last directive related to histograms is newhistogram (see figure E.16). It can
be used to have several sets of clustered histograms on the same plot. An example will
suffice:
set style fill solid 0.5
set style histogram clustered
set style data histogram
set bmargin 5
set xtic rotate by 90 offset 0,-2
plot newhistogram "\n\nElection Results",
➥ "elections" u 2:xtic(1) t "Red", "" u 3 t "Green", "" u 4 t "Blue",
➥ newhistogram "\n\nCampaign Spending",
➥ "" u 4:xtic(1) t "Spending"
The syntax for the newhistogram command is a bit unintuitive (I still tend to get it
wrong), so let me point out the salient features: the newhistogram keyword is followed
by a mandatory string label (an empty string is permitted) and a mandatory comma, and
then the rest of the plot command follows, starting with the filename.

0
20
40
60
80
100
120
1990 1991 1992 1993 1994 1995 1996 1997
Red
Green
Blue
Figure E.15 Election results using set style histogram rowstacked . This
is the same data set yet again. Note the effect of the xtic() function, which is
used to read x axis labels directly from the data file.

Makes room for xtics
Rotates xtics so they don’t overlap

[[E27]]
In addition to the commands that are directly related to the histogram feature, this
example includes some appearance options: tic labels are rotated so that they don’t
overlap each other, and the bottom margin has been increased to make room for both
the rotated tic labels as well as the histogram label supplied to the newhistogram key-
word. Finally, I began each of the two histogram labels with some newlines: otherwise,
they interfere with the tic labels.

Histograms such as those discussed in this section look good and are frequently
used in business presentations or in the media. But they make it difficult to see trends
in the data, and in particular quantitative comparison of data can be difficult. (Gnu-
plot offers some additional features that I didn’t mention; check the standard refer-
ence information if you want to know more.)
10
15
20
25
30
35
40
45
50
1990
1991
1992
1993
1994
1995
1996
1997
1990
1991
1992
1993
1994
1995
1996
1997
Red
Green
Blue
Spending
Campaign Spending Election Results
Figure E.16 Several histograms can be combined in a single graph using newhistogram .

[[F1]]
== Appendix F Higher math

This appendix discusses several topics that are mathematically a bit more advanced
than the rest of the book. We’ll explore gnuplot’s support for parametrized curves
and non-Cartesian coordinates (such as polar, cylindrical, and spherical coordinates).
In section 6.3.5, you learned about the with vectors style; here, we’ll demonstrate
some additional uses for it. Gnuplot has built-in support for complex numbers, which
we haven’t mentioned so far—we’ll remedy this now. Next I’ll show you how to create
probability plots with gnuplot; and finally, there’s a lengthy section on fitting nonlin-
ear functions to data.

Because this isn’t a math book but a book on gnuplot, I won’t provide much of the
background for these concepts; I’ll just show you how gnuplot handles them. This
appendix is best skipped unless you have a specific need for its contents. Rest assured:
if you don’t know what I’m talking about, you aren’t going to need it.


=== F.1 Parametric plots

Parametric plots are only relevant when you’re plotting functions with gnuplot: the
concept has no meaning when plotting data from files. So far, whenever you’ve plot-
ted a function, the function provided a y value (the dependent variable) as a function of
an x value (the independent variable): plot sqrt(x) . Alternatively, you can give two
functions, one for the x and one for the y value separately, but both depending on a
common parameter, which by convention is called t. For certain kinds of curves, such a
parametrization is simpler than the explicit form. The following plot command draws
a circle (after adjusting the aspect ratio appropriately):
set size square
set parametric
plot [0:2*pi] cos(t), sin(t)
This parametric representation is significantly simpler than the equivalent explicit
form:
set size square
unset parametric
plot [-1:1] sqrt(1-x**2), -sqrt(1-x**2)

[[F2]]
In general, the following two commands give the same result:
unset parametric
plot f(x)
set parametric
plot t, f(t)
For parametric plots, there are now three relevant plot ranges: trange , xrange , and
yrange . The first controls the range of values assumed for the parameter (the dummy
variable) t , whereas the other two are used (as before) to control the range of points
visible in the plot. All three ranges can be adjusted either explicitly using set trange
or the familiar set xrange and set yrange commands (see section 8.2), or inline as
part of the plot command. If used inline, the setting for the trange precedes the
other two. This is demonstrated in the following listing. The resulting plot is shown in
figure F.1.

set parametric
set size square
plot [0:2*pi][-1.1:1.1][-1.1:1.1] sin(2*t), cos(5*t)
Parametric graphs of trigonometric functions (such as figure F.1) are known as Lissa-
jous figures, and gnuplot’s parametric mode makes drawing them very easy. Simple
Listing F.1 Parametric mode: commands for figure F.1 (file: lissajous.gp)
-1
-0.5
0
0.5
1
-1 -0.5 0 0.5 1
Figure F.1 A simple Lissajous figure,
drawn using parametric mode.

See listing F.1.


[[F3]]
expressions, as in listing F.1, lead to simple graphs, but more complicated expressions
can also be fun. Figure F.2, for instance, was generated as follows: 1
set parametric
set size square
unset key; unset border; unset tics
set samples 100000
plot [0:100*pi] sin(0.99*t)-0.7*cos(3.01*t), cos(1.01*t)+0.1*sin(15.03*t)
For three-dimensional plots (using the splot command), you obviously need to pro-
vide a third function, with all three functions depending on two variables called u and
v and possessing corresponding options set urange and set vrange .


=== F.2 Non-Cartesian coordinates

Not all coordinate systems are made out of straight lines at right angles to each other.
To plot points on a circle, for instance, it makes more sense to use polar coordinates,
or to use spherical or cylindrical coordinates for systems possessing those kinds of
symmetry. Gnuplot has built-in support for these three symmetries through the set
polar and set mapping facilities. To generate plots using other coordinate systems,
you have to resort to inline data transformations or external filters.


1
This example was taken from A. K. Dewdney’s “Computer Recreation” column in Scientific American, May 1988.
Figure F.2 A more complicated
figure drawn with parametric mode.

Plotted are the functions
sin(0.99*t)-0.7*cos(3.01*t)
for the horizontal coordinate and
cos(1.01*t)+0.1*sin(15.03*t)
for the vertical coordinate.


[[F4]]

==== F.2.1 Polar coordinates

Polar mode is enabled using
set polar
which doesn’t take any further options. In polar mode, the independent variable is
interpreted as an angle and the dependent variable as a radius. When plotting data,
this means the first column specified in the using clause is interpreted as the angle
and the second column as the radius. When plotting functions in polar mode, the inde-
pendent (dummy) variable is denoted with t (not x ), similar to the convention used
for parametric plots (see section F.1).

The angle may be given either in radians (multiples of π—this is the default) or in
degrees. You can switch between both representations using
set angles [ degrees | radians ]
The current value of this option affects not only polar plots, but also how the argu-
ments of trigonometric functions are interpreted.

Let’s look at an example (see figure F.3). The process to generate attractive plots
in polar mode requires several steps, because some artifacts from regular plots must
be removed explicitly. It’s also necessary to introduce some additional options control-
ling the appearance of polar plots. 2 The individual steps are shown in the following
listing.

set polar
set size square
unset border
unset tics
set tmargin 2; set bmargin 2
set key left at graph 1,0.95
set rrange [0:1]
set raxis
set rtics 0.25 nomirror scale 0.5
set grid polar pi/8.0
2
The way polar plots are handled has changed from previous versions of gnuplot; in particular, the commands
set raxis and set rtics are relatively new.

Listing F.2 Polar mode: commands for figure F.3 (file: polar.gp)
Switches on polar mode. Angles are
interpreted as radians (the default).

Ensures a square aspect ratio
Removes
the usual
decorations
Switches off border and tic marks
Makes room for labels at the top and bottom
Gets the key out of the way
Adds
polar plot
decorations
Fixes the radial range
Switches on the axis at zero-angle
Defines the spacing for radial tic marks and grid lines
Turns on the grid, and defines the angular
spacing tic marks and grid lines

[[F5]]
set label "0 π " at 1,0 offset char 1,0
set label "+0.5 π " at 0,1 center offset char 0,0.75
set label "-0.5 π " at 0,-1 center offset char 0,-0.75
set label "+/- π " at -1,0 offset char -5,0
plot [-0.875*pi:0.875*pi] "polardata" u 1:2 t "Data" w l,
➥ 0.27*(2-cos(3*t)+0.75*cos(5*t)) t "Model"
.APPEARANCE OPTIONS FOR POLAR DIAGRAMS
*****
*****
Gnuplot draws polar diagrams with the zero angle located on the right (rather than at
the top, which is possibly more common). By default, the half-axis at zero-angle is
drawn explicitly; you can turn it off using unset raxis .

With polar plots, it’s helpful to have a grid (as is the case with figure F.3). The spac-
ing of radial lines in the polar grid is controlled through the argument to set grid
polar , and the concentric circular grid lines are controlled through set rtics . The
set rtics command behaves just like the familiar set xtics and set ytics com-
mands and takes the same sub-options (see section 8.3). One difference is the key-
word mirror : if it’s used in conjunction with set raxis , then radial tic marks are
drawn on the left half-axis as well.


Defines
angular
tic labels
Plots the data together with a function. The plot range
controls the dummy variable t (effectively, the angle variable).

0 0.25 0.5 0.75 1
0 π
+0.5 π
-0.5 π
+/- π
Data
Model
Figure F.3 A graph in polar mode.

See listing F.2.


[[F6]]
The radial plot range is controlled through set rrange . The radial range need not
include 0. It’s possible to specify a range of values such as set rrange [0.2:0.8] , but
the diagram always appears like a circular disk, not as an annulus. Only a small circle
near the origin is left blank to indicate that 0 isn’t included. (Gnuplot will neither
warn you if you specify negative values in set rrange nor suppress such data points if
you try to plot them. You have been warned.)
Finally, if you study the commands in listing F.2 carefully, you’ll notice that gnuplot
doesn’t really have a polar coordinate system! The positions for the labels, for
instance, are given in the first coordinate system (see section 7.2), despite the fact
that this coordinate system isn’t visible in the graph. To identify arbitrary locations,
you’ll probably want to use explicit trigonometric expressions to perform the neces-
sary calculations on the fly.


==== F.2.2 Cylindrical and spherical coordinates

Polar mode only makes sense for graphs generated using plot —the equivalent for
graphs created with splot is the set mapping option:
set mapping [ cartesian | cylindrical | spherical ]
I’ll demonstrate this facility here by means of a familiar object (see figure F.4). The
coordinates (at a scale of 1 to 10 million) are contained in the file world_110m.txt. 3
This data is now plotted twice: once using plot as a projection into the plane, and
once with set mapping spherical .

The projection into the plane holds no surprises, but the spherical representation
warrants a few comments. As you can see in listing F.3, you first switch on spherical
3
This data set has a much greater resolution than the world.dat file that is part of the gnuplot distribution. You
can find the data set used here at www.gnuplotting.org/plotting-the-world-revisited/. It’s based on original
data, which you can find at www.naturalearthdata.com/downloads.

-100
-80
-60
-40
-20
0
20
40
60
80
100
-200 -150 -100 -50 0 50 100 150 200
Figure F.4 Using a spherical coordinate system together with splot . On the left, the data
is plotted as a regular two-dimensional plot using plot ; on the right, it’s plotted (together
with a grid) using set mapping spherical and splot . (See listing F.3.)

[[F7]]
coordinates and turn off most standard decorations—just as for polar plots (in section

==== F.2.1 a moment ago). But in this case, you also turn on parametric mode (see section F.1).

Remember that parametric mode has no bearing on the plotting of data; it only affects
functions. Here, it’s used to draw a grid on the surface of the globe, using the parame-
trized version of the surface of a sphere that makes up the last entry in the plot
command.

This should be enough to demonstrate non-Cartesian coordinates. If you need to
know more, check the standard gnuplot reference documentation for further details.
set mapping spherical
set angles degrees
unset border
unset tics
unset key
set hidden3d
set parametric
set urange [-90:90]
set vrange [0:360]
set view 55,80,1.5,1.25
splot "world_110m.txt" w l,
➥ cos(u)*cos(v),-cos(u)*sin(v),sin(u) w l lc rgb "grey"

=== F.3 Vector fields

Vector-valued quantities have both a magnitude and a direction, in contrast to scalars,
which only have a magnitude. Simply put, vectors are arrows, whereas scalars are num-
bers. Think of a climber in a mountainscape: the local height is a scalar, but the direc-
tion in which the climber would tumble down (if he let go) is a vector.

You’ve already encountered gnuplot’s with vectors style (in section 6.3.5), which
can be used to plot vector-valued quantities. So far, it’s only been used in conjunction
with the plot command, but it’s also available for splot .


==== F.3.1 Plane vector fields with plot

Additional information is required when plotting vectors, to indicate the direction.
For two-dimensional plots using plot , gnuplot requires four columns: the first two
give the position of the start of each arrow, and the last two give the offset (relative to
the start) of the arrow’s end. In other words, the columns must represent x, y, dx, and
dy, and gnuplot shows the data as arrows from (x, y) to (x+dx, y+dy). All quantities are
interpreted as locations in the diagram’s coordinates.

Figure F.5 shows an example. The data can be interpreted as the force on a test
charge in the presence of three other charges (indicated by dots). It was created using
the following:
Listing F.3 Commands for figure F.4 (file: world.gp)
Switches on spherical coordinates
Uses degrees, not radians
Cleans up
unnecessary
decorations
Used by the functions
that draw the grid lines
Chooses the view point

[[F8]]
set size square
unset key
set style arrow 100 size screen 0.01,10 lt 1
plot [-5.3:5.3][-5.3:5.3] "arrows" i 0 u 1:2:3:4 w vec as 100,
➥ "" i 1 u 1:2 w p pt 7 ps 0.5 lc rgb 'black'
All the options to change the appearance of an arrow (see section 7.3.2) are available
to you. You can provide them inline as part of the plot command or define your own
custom arrow style, as I did here (see section 9.4.3).

Another possibility is to use data-dependent coloring (see section 9.1.5). Figure F.6
shows the same data set as figure F.5 but uses a fifth column (giving the relative field
strength) to color the arrows. To map the latter value to a color, it’s convenient to use
a palette:
set size square
unset key
set palette defined ( -1 "blue", 0 "grey", 1 "red" )
set style arrow 100 size screen 0.02,10,90 filled fixed lc palette z
plot [-5.3:5.3][-5.3:5.3] "arrows" i 0 u 1:2:3:4:5 w vec as 100,
➥ "" i 1 u 1:2 w p pt 7 ps 0.5 lc rgb 'black'
-4
-2
0
2
4
-4 -2 0 2 4
Figure F.5 A vector field, plotted
using the with vectors style

[[F9]]


==== F.3.2 Three-dimensional vectors with splot

Similar considerations apply to vectors in three dimensions, only now you need to sup-
ply six columns in total. In three dimensions (when using splot ), the with vectors
style can be used in creative ways to visualize three-dimensional objects. In particular,
together with the mousing capabilities of interactive terminals (see section 10.6), this
can be useful—a lot of visualization power that’s usually only achieved with much
more complicated programs.

A quick example will help to clarify. Listing F.4 shows a data file. The top part of
the data file gives the coordinates of a pyramid-shaped body (a tetrahedron, to be pre-
cise). The bottom part of the file shows the edges of the pyramid. The labels A, B, C,
and D at the corners help to identify the edges of the body.

    # x y z color label
    1 0 -0.7 1 "A"
    -1 0 -0.7 1 "B"
    0 1 0.7 2 "C"
    0 -1 0.7 2 "D"
    # x1 y1 z1 x2 y2 z2
    1 0 -0.7 -1 0 -0.7
    -1 0 -0.7 0 1 0.7
    0 1 0.7 0 -1 0.7
    0 -1 0.7 1 0 -0.7
    1 0 -0.7 0 1 0.7
    -1 0 -0.7 0 -1 0.7
    Listing F.4 Data for figure F.7 (file: pyramid)
    -4
    -2
    0
    2
    4
    -4 -2 0 2 4
    -0.4
    -0.2
    0
    0.2
    0.4
    0.6
    0.8
    1
    1.2
    1.4
    1.6

Figure F.6 Same as figure F.5,
but using data-dependent
coloring to represent additional
information in the graph
End points
Edges
A → B
B → C
C → D
D → A
A → C
B → D

[[F10]]
When attempting to plot this data, you need to remember that the with vectors style
requires the starting points and the relative offsets of the end points, not the coordi-
nates of the start and end points directly. The commands in listing F.5 use inline data
transformations to convert the coordinates into offsets on the fly. Furthermore, this
example uses some of the tricks you learned in sections 6.3.5 and 9.1.5 to attach a text
label to each end point and to give them different colors. The resulting graph is
shown in figure F.7. Try it yourself and then grab the figure with the mouse to rotate
it. Have fun!
unset border
unset tics
unset key
set view 200,80
splot [-1:1][-1:1][-1:1] "pyramid" i 0 u 1:2:3:4 w p pt 7 ps 3 lc var,
➥ "" i 1 u 1:2:3:($4-$1):($5-$2):($6-$3) with vectors nohead lt -1,
➥ "" i 0 u 1:2:3:5 w labels offset 1,1

=== F.4 Built-in mathematical functions

As mentioned in chapter 3, gnuplot provides a large number of standard mathematical
functions as well as quite a few that are much less standard. Table F.1 gives the full list. 4
Several of the more common functions can handle complex arguments (see sec-
tion F.5) and return complex-valued return values if necessary. Other functions accept
complex-valued arguments but silently ignore the imaginary part. Yet other functions
require real (or integer) arguments. See table F.1 for the behavior of each function.
Be aware that the behavior of the trigonometric functions depends on the current
value of the set angles option (see section F.2.2 earlier in this appendix).
Listing F.5 Commands for figure F.7 using data from listing F.4 (file: pyramid.gp)
4
For non-elementary functions with ambiguous notations, I’ve given a pointer to the defining relationship in
Handbook of Mathematical Functions by M. Abramowitz and I. Stegun (Dover Publications, 1965), quoted as
A&S. (The full content of the book can be found on the web, for instance at www.nr.com/aands/ and
www.convertit.com.)
C
D
A
B
Figure F.7 The body whose coordinates were
given in listing F.4. Load listing F.5 into gnuplot,
using an interactive terminal, and then grab this
figure with the mouse and try to rotate it!

[[F11]]
Additional functions may be available if gnuplot has been linked against the
appropriate libraries. Check the release notes for your installation. (To find the list of
available mathematical functions in the gnuplot standard reference documentation,
use help expressions functions . The command help functions pulls up informa-
tion on user-defined functions.)
Table F.1 All built-in mathematical functions
Function Arguments Description
sqrt(x) Any Square root function
exp(x) Any Exponential function
log(x), log10(x) Any Logarithm to base e and to base 10
sin(x), cos(x), tan(x) Any Trigonometric functions. Arguments inter-
preted according to set angles.

asin(x), acos(x),
atan(x)
Any Inverse trigonometric functions. Return
values depend on the value of set
angles.

atan2(y, x) Real Evaluates to atan(y/x), but uses the
signs of both arguments to determine
the resulting quadrant. Return value
depends on the value of set angles.

sinh(x), cosh(x),
tanh(x)
Any Hyperbolic functions
asinh(x), acosh(x),
atanh(x)
Any Inverse hyperbolic functions
erf(x)
Any a
Error function (A&S 7.1.1)
erfc(x)
Any a
Complementary error function (A&S
7.1.2): erfc(x) = 1 - erf(x)
inverf(x)
Any a
Inverse error function
invnorm(x)
Any a
Inverse normal distribution function
norm(x)
Any a
Normal (Gaussian) distribution function
(A&S 26.2.2): norm(x) =
0.5*(1+erf(x/sqrt(2)))
gamma(x)
Any a
Gamma function (A&S 6.1.1).

ibeta(p, q, x)
Any a
Incomplete beta function (A&S 6.6.1)
igamma(a, x)
Any a
Incomplete gamma function (A&S 6.5.1)
lgamma(x)
Any a
Natural logarithm of the gamma function:
lgamma(x) = log( gamma(x) )
a For complex-valued arguments, the function ignores the imaginary part of the argument.

[[F12]]

=== F.5 Complex numbers

Gnuplot has limited support for complex numbers, so let’s take a quick look. (If you
don’t know what complex numbers are, you probably want to skip this section.)
Complex numbers are pairs of numbers, the so-called real and imaginary parts. In
gnuplot, a complex number is indicated using curly braces ( {} ). The following
expression would be interpreted as the complex number z = 1 + i, where i is the imag-
inary unit:
z = { 1, 1 }
Gnuplot can perform simple arithmetic on complex numbers, such as { 1, 1 } + { -1, 0 } .
Furthermore, several of the built-in mathematical functions (such as sin(x) , exp(x) ,
and so forth) can accept complex arguments and return complex numbers as results.
besj0(x), besj1(x) Real Bessel function of the first kind of order
0 and 1. Argument is always interpreted
as radians.

besy0(x), besy1(x) Real Bessel function of the second kind of
order 0 and 1. Argument is always inter-
preted as radians.

airy(x)
Any a
Airy function (A&S 10.4.2)
EllipticK(x),
EllipticE(x)
Real Complete elliptic integral of the first and
second kind (A&S 17.3.1 and 17.3.3)
EllipticPi(n,x) Real Complete elliptic integral of the third kind
(A&S 17.7.2)
expint(n, x) n integer, x real Exponential integral (A&S 5.1.4)
lambertw(x) Real Lambert-W function (the inverse of f(w) =
w exp(w)
abs(x) Any Absolute value for real or complex x
floor(x), ceil(x)
Any a
Smallest integer not less than x, and
largest integer not greater than x (both
as floating-point values)
int(x)
Any a
Integer part of x, truncated to zero
rand(x)
Any a
Random number generator
(see table 3.3)
sgn(x)
Any a
Sign function
(-1 if x < 0; 0 if x = 0; 1 if x > 0)
a
For complex-valued arguments, the function ignores the imaginary part of the argument.
Table F.1 All built-in mathematical functions (continued)
Function Arguments Description

[[F13]]
You can use the special functions real(x) and imag(x) to pick out the real and imagi-
nary parts, respectively (see table F.2).

One important limitation of gnuplot’s complex numbers is that both parts must be
numeric constants—not variables, not expressions! You can always work around this
limitation, though, by using a complex constant as part of a more general expression.
For example, the following command will plot real and imaginary parts of the expo-
nential function, evaluated for a purely imaginary argument:
plot real( exp(x*{0,1}) ), imag( exp(x*{0,1}) )
Complex numbers are of fundamental importance in mathematics and theoretical
physics, and they have important applications in signal processing and control theory.
Gnuplot’s ability to handle them makes it particularly suitable for such applications.

==== F.5.1 Application: Mandelbrot set (pure gnuplot)

Gnuplot’s support for complex numbers makes it possible to write a program that cal-
culates and visualizes the Mandelbrot set entirely in gnuplot. 5 Listing F.6 is short and
sweet. The core of the script is the function f(z,c,k) that implements the iteration
that defines the Mandelbrot set. The function is recursive (that is, it calls itself):
because the body of a gnuplot function must be an expression, that’s the only way to
define an iteration inside a function. The function takes three arguments: the recur-
sion variable, the starting point for the iteration (which is kept constant during the
recursion), and the depth of the recursion. The function returns the number of itera-
tions before the absolute value of the recursion variable (the first argument) exceeds
2, unless the maximum number of iterations MAXITR is reached first. This function is
evaluated on a regular grid using the pseudofile ++ (see section 4.5). Remember to
use the same granularity for both set samples and set isosamples when using ++
(see section C.1.2). The results are shown in figure F.8. (Depending on the speed of
your computer, the figure may take a few seconds to render.)
Table F.2 Functions to access parts of complex numbers
Function Description
abs(x) Absolute value of x: sqrt( real(x)**2 + imag(x)**2 )
arg(x) Phase angle of x: atan( imag(x)/real(x) )
imag(x) Imaginary part of x
real(x) Real part of x
5
The Wikipedia page on the Mandelbrot set is quite detailed and informative.

[[F14]]

set size sq; set view map
set samples 500; set isosamples 500
MAXITR = 100
f(z,c,k) = abs(z)>2 || k>=MAXITR ? k : f(z**2+c,c,k+1)
set palette defined
➥ ( 0 'white', 5 'blue', 15 'red', 50 'yellow', 99 'yellow', 100 'black' )
splot [-1.5:0.5][-1:1] "++" u 1:2:( f({0,0}, $1+$2*{0,1}, 0) ) w pm3d

=== F.6 Probability plots

A probability plot (or, more precisely, a “normal” probability plot) is a graphical tech-
nique to determine whether a bunch of values are distributed according to a normal
(Gaussian) distribution. From such a plot, it is also possible to obtain the two parame-
ters of the Gaussian distribution (mean and standard deviation) by purely graphical
means. Gnuplot doesn’t have probability plots built in, but it does provide all the
ingredients necessary for you to roll your own.

To understand what a normal probability plot does, consider the cumulative distri-
bution function of a set of points. If the data points were drawn from a Gaussian distri-
bution, then their empirical cumulative distribution function would have the shape of
the Gaussian cumulative distribution function. Applying the inverse Gaussian distribu-
tion function to the empirical distribution function of the set of measurements should
therefore result in a straight line. Because deviations from a straight line are easy to spot,
this technique provides an easy, graphical way to test a data set for Gaussian behavior.
Gnuplot can calculate the cumulative distribution function of a set of points using
smooth cumul in the plot command. The inverse Gaussian distribution function is
Listing F.6 Commands for figure F.8 (file: mandelbrot.gp)
-1.5 -1 -0.5 0 0.5
-1
.5
0
.5
1
0
10
20
30
40
50
60
70
80
90
100
Figure F.8 The Mandelbrot set, rendered
and calculated in gnuplot. See listing F.6 for
the complete implementation.


[[F15]]
available as the built-in function invnorm(x) . To create a probability plot in gnuplot,
you need to employ these facilities in sequence: first, obtain the empirical distribution
function using plot ... smooth cumul . The results aren’t plotted right away; instead,
they’re stored in a heredoc via the set table (see section 5.3.2) facility. Then apply the
inverse Gaussian distribution function to the data in the heredoc and plot the results.
Figure F.9 shows the probability plots for two data sets: one that’s Gaussian and
hence forms a straight line, and one that’s clearly not Gaussian. (It’s truncated on the
left and somewhat heavy-tailed on the right.) Listing F.7 summarizes the basic
sequence of steps to create a probability plot for a single data set. This code attempts
to be generic, so you must configure the name of the file and the column to use in the
first lines of the listing.

FILE = "probplot"
COL = 1
stats FILE u COL nooutput
set table $tmp
plot FILE u COL:(1./(STATS_records+1)) s cumul
unset table
plot $tmp u (invnorm($2)):1 w l
Listing F.7 Commands to generate a probability plot (file: probplot1.gp)
-10
-5
0
5
10
15
20
25
30
35
-2.5 -2 -1.5 -1 -0.5 0 0.5 1 1.5 2 2.5
Gaussian
Non-Gaussian
Figure F.9 Normal probability plots for two data sets: one that follows a Gaussian
distribution, the other showing non-Gaussian behavior
Use this to configure the data file …
… and which column to use in the file.

Populates STATS_records
Stores the cumulative distribution
function in a heredoc
Creates the probability plot

[[F16]]

==== F.6.1 Adding a probability scale

You can improve the graph by adding a second axis, with divisions in probability units
(probits). This way, you also learn more about the ability to link two axes using the set
link command introduced in section 8.1.3.

In a probability plot, the observed values are plotted along the vertical axis,
whereas the distribution of points is plotted along the horizontal axis, measured in
standard deviations. Instead of measuring the distribution of points along the hori-
zontal axis in standard deviations, you can also express the distribution in fractions of
the entire data set (see figure F.10). The meaning of this scale is possibly more intui-
tive, but it comes at the cost of a non-uniform division of the axis.

The complete code is shown in listing F.8. Two things are new, compared to the previ-
ous example. First, the secondary axis ( x2 ) is linked to the primary one using
set xrange [-1:1]
set link x2 via norm(x) inverse invnorm(x)
set xrange [*:*]
I’ve explained the link command before (section 8.1.3). The two calls to set xrange
are necessary to suppress some gnuplot warnings: to validate its input, the set link
command tests that the two functions supplied are actually inverses of each other, by
7.95
8
8.05
8.1
8.15
8.2
8.25
8.3
-4 -3 -2 -1 0 1 2 3 4
0.01
0.05
0.95
0.99
0.10
0.20
0.30
0.40
0.50
0.60
0.70
0.80
0.90
Figure F.10 A normal probability plot, with secondary tic marks and grid lines
added. (See listing F.8.)

[[F17]]
evaluating them at the ends of the current plot range. The problem is that the func-
tions used here encounter numerical precision loss at the extreme values of the
default plot range (which is [-10:10] ). Restricting the plot range first to a safe inter-
val, and then turning on autoscaling again afterward, suppresses the warnings.
The link command by itself doesn’t switch on the tic marks on the secondary axis;
you have to do so yourself. Because the tic marks are distributed in such a non-uni-
form manner, it’s necessary to add some tic marks for extreme values explicitly, using
set x2tic add ( ... ) .

The other new feature in listing F.8 is the second call to stats , this time not on the
data set, but on the heredoc. The linear regression results from the stats command
are used as a model for the data and combined in the probability plot together with
the data (see figure F.10).

FILE = "probplot"
COL = 1
stats FILE u COL nooutput
set table $tmp
plot FILE u COL:(1./(STATS_records+1)) s cumul
unset table
set xrange [-1:1]
set link x2 via norm(x) inverse invnorm(x)
set xrange [*:*]
set xtics nomirror
set x2tics format "%.2f" rotate
set x2tics add ( "0.01" 0.01, "0.05" 0.05, "0.95" 0.95, "0.99" 0.99 )
set grid x2tics ytics
stats $tmp u (invnorm($2)):1 noout
print "mu=", STATS_intercept, " sigma=", STATS_slope
plot $tmp u (invnorm($2)):1 w l, STATS_slope*x + STATS_intercept
The data set shown in figure F.10 is much larger than the one in figure F.9 (2,000 data
points now versus 100 data points before). It’s mostly Gaussian, except for a handful of
outliers. Using the newly added axis, you can conclude that more than 0.99 − 0.01=0.98
or 98% of the points are normally distributed. The number of true outliers isn’t large
(about 12). Notice that their values aren’t massively different from the rest of the data
points, but sufficiently different that in a data set of 2,000 points, you wouldn’t expect
to find such values—if all the values were drawn from a Gaussian distribution, that is.
The probability plot helps to identify the outliers and their range of values.
Listing F.8 Commands for figure F.10 (file: probplot2.gp)
Configures the data file …
… and column
Populates STATS_records
Stores the cumulative distribution
function in a heredoc
Links the two axes
Fixes the appearance
of the tic labels
Performs a linear
regression, and …
… prints the results

[[F18]]

=== F.7 Curve fitting

Gnuplot includes a facility to perform nonlinear least-square fits. This subject is a little
outside gnuplot’s primary area of applicability (which is to generate graphs), but it’s a
popular part of gnuplot’s feature set.

Gnuplot’s fitting subsystem consists of two commands: the fit command and the
update command that’s used to export fitted parameter values. Many aspects of the
fitting algorithm can be modified using set fit . 6

==== F.7.1 Background

Before describing how to use the fit command and the associated options, let me
explain the context and define some specific terms. Assume that you have a set of N
data points (x i , y i ) and a function f(x; a 1 , …, a m ) of known functional form. Note that
the function doesn’t just depend on the independent variable x, but also on m param-
eters a 1 through a m . Fitting this function to the data means finding those values for
(a 1 , …, a m ) that optimize a certain merit function—a function measuring how well the
data is represented by the function. The most common merit function is the sum of
the squares of the deviations (or residuals):
I’ll refer to it as the squared error E 2
0 ; the gnuplot reference documentation calls it SSR ,
for “sum of squared residuals.” You can assign a weight to each term in this sum, such
that data points that are known more accurately contribute more strongly. Let’s write
the weight for the ith term as 1/ δ i , where δ i is a measure for the uncertainty (such as
the standard deviation) of that term. The result is the weighted least-squares merit func-
tion (which I denote by E 2 , and which is called WSSR for “weighted sum of squared
residuals” in the gnuplot reference documentation):
The optimal choice of parameters (in a least-squares sense) minimizes this value. 7
If the function f(x; a 1 , …, a m ) is linear in the independent variable—that is, if
f(x; a, b) = ax + b, then the minimization of the error with respect to the parameters a
and b can be performed analytically, so that expressions for the optimal values for
6
In previous versions of gnuplot, the aspects now bundled in set fit were controlled through a variety of
internal variables (and two environment variables) that are now deprecated.
7
Although the sum of squared residuals is by far the most commonly used merit function, it’s not the only pos-
sible choice. It can be justified on statistical grounds when the noise in the data has certain properties. It has
the technical advantage of being simple and analytic everywhere. A disadvantage is that it tends to over-
emphasize outliers.



[[F19]]
these parameters can be obtained in closed form (linear regression). If the function isn’t
linear in x but is linear in the parameters—for example, f(x; a, b) = a sin(x) + b
cos(x)—a similarly simple relation holds. But if the function is not linear in the param-
eters—for example, f(x; a, b ) = sin(a x)/sqrt(x+b)—there’s generally no solution to
the minimization problem in closed form, and you have to resort to an iterative
approximation scheme.

In this case, the merit function is minimized using an iterative algorithm, in which
different values for the parameters are tried repeatedly until the merit function
reaches its optimal value. The standard numerical algorithm for this task, which takes
into account the specific analytic form of the merit function as a sum of squares, is
known as the Marquardt-Levenberg method. This is what gnuplot’s fit command uses.

==== F.7.2 A worked example

Before describing the fit command and all its options in detail, let’s see how it works
in practice. Consider the data in figure F.11, showing the results of a scattering exper-
iment. The horizontal axis (corresponding to the scattering angle and thus the
energy) has been divided into 140 equal-sized bins, and the vertical axis gives the
number of events registered in each bin. You can observe different peaks in this spec-
trum and would like to know their position, strength, and width.

0
100
200
300
400
500
600
700
800
0 20 40 60 80 100 120 140
Figure F.11 Data from a scattering experiment. How many peaks are there, where are
they located, and what’s their width?

[[F20]]
Because this data stems from a scattering experiment, you have good reason to believe
that the shape of each peak is well described by a function of this form
and that the entire spectrum is a mixture of such functions, for proper values of the
parameters. It’s these parameters that you want to determine using fit .
Simply eyeballing figure F.11, two peaks can be identified at once: one near x=50
with a strength of about 700, and another near x=90 with a strength of about 250.
(Experienced practitioners will point to the little shoulder on the right flank of the
taller peak near x=65 and suggest the existence of a third peak, but we’ll ignore this
for now.) These initial guesses for the position and strength of the peaks must be pro-
vided as starting values for the iteration. The following listing shows the commands
required to fit the two primary peaks, and figure F.12 shows a plot of the data together
with the fitted function.

c(x,m,s) = 1/(1.0 + ((x-m)/s)**2)
set fit results
a1=700; m1=50; s1=10
a2=250; m2=90; s2=15
fit a1*c(x,m1,s1) + a2*c(x,m2,s2) "bumps" u 1:2 via a1,m1,s1,a2,m2,s2
After 4 iterations the fit converged.

final sum of squares of residuals : 33965.5
rel. change during last iteration : -7.50711e-06
degrees of freedom (FIT_NDF) : 134
rms of residuals (FIT_STDFIT) = sqrt(WSSR/ndf) : 15.9209
variance of residuals (reduced chisquare) = WSSR/ndf : 253.474
Final set of parameters Asymptotic Standard Error
======================= ==========================
a1 = 682.455 +/- 5.853 (0.8577%)
m1 = 48.8178 +/- 0.08384 (0.1717%)
s1 = 9.5442 +/- 0.1334 (1.397%)
a2 = 193.285 +/- 5.162 (2.671%)
m2 = 90.5625 +/- 0.3414 (0.3769%)
s2 = 12.3524 +/- 0.5457 (4.417%)
...
plot "bumps" u 1:2 w lp pt 6, a1*c(x,m1,s1) + a2*c(x,m2,s2)
Overall, the function fits the data quite nicely, and you can read the position, strength,
and width of the peaks from the fitted values. Comparing the data to the curve, the
deviation near x=65 seems too systematic to be noise—you may want to repeat the pro-
cess but include a third peak. What’s its relative strength, compared to the two pri-
mary ones?
Listing F.9 Results from fit for the data in figure F.11


Defines the function
Suppresses most output
Guess for the first peak
Guess for the second peak
Further output omitted

[[F21]]
Listing F.9 shows the basic steps of fitting data with gnuplot:
1 Define a function to fit. This isn’t strictly required; you can use an explicit
expression in the fit command, but in order to keep things neat, it’s almost
always worth the effort to define a function depending on the fitting parame-
ters explicitly.

2 Choose starting values for all parameters. Again, this isn’t strictly required,
because gnuplot will initialize all parameters listed in the via clause to 1.0
before starting the iteration. But most realistic problems will need reasonable
guesses for the starting values for the iteration to converge well.

3 Perform the fit.

4 Plot the data together with the fitted function. By the end of the fit, the result-
ing parameters are stored in the variables named in the via clause, thus over-
riding the starting values. This makes it possible and convenient to express the
fitted function (in the plot command) in terms of these variables, rather than
using the numerical values instead.

This concludes the process of “fitting” a function to the data, but the work doesn’t
stop here. The next step would be to subtract the fit from the data to obtain the resid-
ual. You might want to plot it and inspect it for trend and correlation (there shouldn’t
be either) and Gaussian distribution (validating assumptions required for interpreta-
tion of the results—a probability plot may come in handy).

0
100
200
300
400
500
600
700
800
0 20 40 60 80 100 120 140
Figure F.12 The data from figure F.11 when fitting two peaks using the fit command.
The agreement is quite good, but is there a third peak, centered near x=65?

[[F22]]

==== F.7.3 Using the fit command

The syntax of the fit command is superficially similar to the plot command. The
main difference is that before the name of the data file, you must specify the function to
fit, and at the end of the command, you must name the fitting parameters using the
keyword via :
fit [ {ranges} ]
{function} "{str:datafile}" [ index ... ] [ every ... ]
using {columnspec}
via [ {var1}, {var2}, ... | "{str:parameterfile}" ]
The requirements for the format of the data file are the same as for the plot com-
mand. The index and every directives to select parts from the data file are available
for fit as well, and so are on-the-fly transformations through the using option. The
using clause specifies columns, as with plot . Plot ranges can be given inline, using the
syntax familiar from the plot command. Any data point outside the plot range is
ignored in the fitting procedure.

The function must depend on the dummy variable explicitly but otherwise can be
any valid gnuplot expression. Usually, it’s a user-defined function. The names of the
parameters with respect to which the fit is performed are specified using the via
directive. There are two variants: the names of the parameters can be given explicitly
as part of the fit command or can be read from a file (more on this in a moment). At
the end of the iteration, the variables are assigned their final values and therefore can
be used directly in subsequent plots. (We made use of this in listing F.9.)
During the iteration, the fit command prints out progress and diagnostic mes-
sages to screen and to a log file (by default called fit.log). The file is always appended
to, so you may want to delete it every once in a while. You can control the verbosity of
these messages as well as the filename using set fit (see section F.7.5).
.SPECIFYING COLUMNS FOR DATA AND WEIGHTING FACTORS
*****
*****
When used with fit , the using directive can specify one to three columns: if only a
single column is given, it’s assumed to be the y value, and the line number is used as
the x value. Two columns are interpreted as (x, y) pairs. A third column is interpreted
as the weight for the corresponding value and is used to form a weighted least squares
merit function: if the value in the third column is δ , then each term in the sum of
squares is multiplied by 1/ δ 2 ).

In recent versions of gnuplot, it’s also possible to fit functions of more than one
independent variable: in other words, rather than fit a curve to a set of points, you can
fit a surface (or hyper-surface). Obviously, this requires additional columns to be
included in the using clause. Check the gnuplot standard reference for details of the
syntax.


[[F23]]
.MANAGING FITTING PARAMETERS
*****
*****
Nonlinear least squares require an iterative algorithm, and therefore it’s necessary to
initialize all parameters with good starting values. With badly chosen starting values,
the procedure may require many steps to converge, or it may diverge altogether.
If the variable names are listed explicitly in the via clause, then you should initial-
ize the corresponding session variables with suitable starting values. Any parameter
that hasn’t been defined is set equal to 1.

It’s also possible to specify the parameters and their starting values in a file. This
method is intended for batch operations, when you want to fit several data sets and
need to give different starting values to each. The parameter file may contain starting
values for all parameters, using the following syntax:
varname = value
varname = value # FIXED
The comment on the second line forces gnuplot to keep this value fixed during the
iteration; that is, the corresponding variable won’t be adjusted when attempting to
optimize the merit function.

If the list of parameters (and their starting values) has been read from a file, then
the resulting values can be written out to a file using the update command. This com-
mand takes the name of the parameter file as mandatory first argument. If no second
argument is given, the input file is renamed by appending .old, and the resulting val-
ues are written to a file with the original name. Alternatively, if a second filename is
supplied, the resulting values are written to this file, and the original file is left
untouched.

.VARIABLES SET BY THE FIT COMMAND
*****
*****
After the iteration has converged (or has been interrupted), gnuplot sets several vari-
ables that can be read out to obtain the results of the fitting procedure:
•  FIT_CONVERGED —A flag that equals 1 if the iteration converged or 0 if it was
interrupted or exceeded the allowed number of steps.

•  FIT_NITER —The number of iteration steps taken.

•  FIT_NDF —The number of degrees of freedom for this fit. It equals the number
of data points less the number of adjustable parameters and is usually denoted
as ν : ν = N − m.

•  FIT_WSSR —The weighted sum of squares residual, evaluated at the point to
which the iteration converged: E 2 (as defined earlier).

•  FIT_STDFIT —sqrt(E 2 / ν ).

•  FIT_P —The p-value, calculated from the chi-square distribution, given the
number of degrees of freedom and the final weighted sum of squares.

Depending on the settings chosen by set fit , gnuplot may also create session vari-
ables holding the uncertainties in the estimated parameter values and for the entries
in the covariance matrix. (See section F.7.5.)

[[F24]]

==== F.7.4 Practical advice

Like any other nondeterministic, iterative calculation, nonlinear least-squares fitting
isn’t guaranteed to converge (and even less guaranteed to converge to the “desired”
solution.) The following considerations may be helpful if you encounter problems.
Most problems with convergence can be solved with a better choice of starting val-
ues. Spend some time trying to fit the curve “by eye” before calling fit , manually try-
ing out different values for the fitting parameters. (This is much more useful than
fiddling with the iteration limits and lambda parameters accessible through set fit .)
If you need to fit a function with many parameters, try to reduce the complexity by
getting the dominant behavior right before dealing with smaller effects. (In section F.7.2,
we fitted only the two obvious peaks first, before asking whether there might be sec-
ondary peaks present as well.)
All fitting parameters should be of roughly equal scale. If some of the parameters
differ wildly (by many orders of magnitude) from one another, the fitting function
should be modified to take these factors into account explicitly. (Say you want to fit
f(x; a, b) = a cos(b x), and you know that a is close to 1,000, whereas b is close to 1. You
can either divide the data by 1,000 or write the function as f(x; a, b) = 1000 a cos(b x)
instead.) You can use the set fit prescale option to let gnuplot do some of the work
for you.

Finally, the iteration problem becomes mathematically badly conditioned if the fit-
ting function contains several parameters that have similar effects on the behavior of
the function. A blatant example is f(x; a, b) = a exp(x+b), which despite its appearance
has only one adjustable parameter, because a exp(x+b) = (a exp(b)) exp(x) = c exp(x).
For more complicated models, this kind of cross-correlation may be hard to detect
ahead of time.


==== F.7.5 Options for the fit command

You can control many aspects of the fitting operation through the set fit command. 8
Here’s a summary:

[source]
set fit [ verbose | brief | results | quiet ]
        [ logfile "{str:filename}" | default ]
        [ maxiter {int:val} | default ]
        [ limit {flt:eps} | default ] [ limit_abs {flt:eps }
        [ start_lambda {flt:val} | default ]
        [ lambda_factor {flt:val} | default ]
        [ [no]prescale ]
        [ [no]errorvariables ] [ [no]covariancevariables ]
        [ [no]errorscaling ]
        [ script [ "{str:command} | default ] ] 

^8^
The internal variables that were used for this purpose in previous versions of gnuplot have been deprecated.

[[F25]]
Let’s step through them:

•  Gnuplot generates a diagnostic for each step in the iteration. Four levels of ver-
bosity are available:

– verbose prints the entire message.
– brief prints a one-line message for each iteration step.
– results suppresses messages for individual steps and only prints the results of the fit.
– quiet switches off all diagnostic output.

•  By default, diagnostic messages are written (appended) to a file called fit.log.
The filename can be overridden using set fit logfile . If the path name con-
figured identifies a directory (rather than a file), then a file named fit.log is cre-
ated in that directory. ^9^
•  The maximum number of iterations can be controlled using set fit maxiter .
A value of 0 or default allows for an infinite number of steps.

•  The main convergence criterion is the size of the most recent reduction in the
squared residual. If the relative change in the sum of squared residuals between
successive iteration steps is less than the value specified with set fit limit ,
then the iteration stops. The default is 10-5 .

It’s also possible to define a limit for the absolute size of the correction step
using set fit limit_abs . It defaults to 0.

•  The Marquardt-Levenberg algorithm always attempts to take the largest possi-
ble step that will reduce E2 . A numerical factor (usually called λ or lambda) con-
trols the size of the step taken and is itself modified by the algorithm as the
iteration proceeds. The value defined using set fit start_lambda is the initial
value of lambda at the start of each iteration step; the value of set fit
lambda_factor is the factor by which lambda is varied when searching for the
optimal step size. Controlling these variables can help to achieve convergence
in difficult situations. ^10^
•  For best convergence, all the fitting parameters should be roughly of the same
scale. If they aren’t, you can either rewrite the problem (to take the differing
scales into account explicitly) or try to use set fit prescale . If it’s switched on,
then every variable is scaled by its starting value before each iteration step.
•  When set fit errorvariables is selected, gnuplot generates session variables
that hold the estimates of the uncertainty in the fitted parameters. The names
of these session variables are obtained by appending _err to the actual variable
name. That is, the uncertainty in the estimate for a parameter called a is stored
in a variable called a_err , and so on.

^9^
The current gnuplot development version also provides a set fit nolog option that suppresses the creation
of a log file entirely.

^10^
Keep in mind that the simplest and most effective way to influence the behavior of the fitting routines is to
provide better starting values for the fit parameters. A reasonable selection of starting values will usually obvi-
ate the need to fiddle with the lambda values.


[[F26]]

If set fit covariancevariables is switched on, then the entries in the cova-
riance matrix are similarly made available. The resulting variable names begin
with FIT_COV_ , followed by the names of the two variables in question, sepa-
rated by an underscore. For example, the covariance of two variables named a
and b is in a variable called FIT_COV_a_b .

•  The set fit errorscaling parameter concerns the way the accuracies of the
parameter estimates are calculated. (Check the gnuplot standard reference for
details.)

•  Using set fit script , you can provide a gnuplot command to run when the iter-
ation is interrupted using Ctrl-C. (The default is to run the replot command.)

For the sake of completeness, I’ll mention that two of these options can be prepopu-
lated through environment variables: FIT_LOG can give the name of a file used for
diagnostic output, and FIT_SCRIPT can contain the name of a command file that’s to
be executed when the iteration is interrupted. Configurations made with set fit take
precedence over those made using environment variables.

Should you do it?

To be honest, I’m not a great fan of least-squares fitting. Despite (or because of) its
appeal and popularity, in my experience it’s easily overused and frequently misused.
It’s wrong to regard it as a “versatile general-purpose tool.” In particular, non-linear
fitting as described here has only some very specific application areas that it’s suited
for; for other purposes, better methods exist. Personally, I think it should be regarded
more as a “last resort” than as a “first thing to try.” Instead consider the following
options:

What are the alternatives?

Depending on what you’re trying to do, there may be easier or otherwise better meth-
ods to use.

If you’re trying to find a smooth curve as a purely graphical visualization of a noisy set
of points, then you should use a non-parametric approximation such as weighted
splines (see section 3.5.1), rather than attempt to fit a function. By choosing the
function to fit, you’re making a very strong statement about the shape of the curve.
You shouldn’t make such a statement unless you have a reasonable justification for
making this particular choice.

Also, keep in mind that your mathematical model may describe the dominant behav-
ior over some region of the data set well, but may nevertheless be incorrect else-
where. The fitting process, by contrast, attempts to minimize the merit function
globally. If the model isn’t applicable over some part of the data set, the values
obtained from the fit may be less accurate than if the fit had been constrained to only
that part of the original data that can be described accurately by the model. You
should therefore be careful to perform fits only on those parts of the data set for
which the model is good. Proceed with caution!

[[F27]]

In a similar spirit, outliers can wreak havoc on results obtained using standard sta-
tistical methods. Both linear and nonlinear regression are affected.

If you’re trying to estimate parameter values, you’ll frequently find that better, more
direct methods exist. Instead of “fitting” a Gaussian to a histogram of values, you
can simply calculate the mean and standard deviation of the data set! Similar closed-
form, maximum-likelihood estimators exist for many commonly used distributions.
Often, a transformation of the data will remove the need for a nonlinear fit. Single and
double logarithmic transformations turn exponential and power-law behavior into lin-
ear problems, for example. If only the dominant or asymptotic behavior is of interest,
you may want to concentrate on it alone and seek a transformation to linear form for
it, rather than fitting a complicated model to the entire problem.


When does curve fitting make sense?

It can be appropriate to fit a phenomenological model to a data set, in order to obtain
an analytical (yet still only phenomenological) description of the data. Although this
looks innocuous, it still can lead to problems because the justification and origin of
the model are so easily ignored. Typically, it won’t be long before it’ll be conveniently
forgotten that the simple analytical model that was assumed for the fitting procedure
has no theoretical justification, and all kinds of unwarranted conclusions will be
drawn from it. Furthermore, the fit is only as good as the function chosen in the first
place. Maybe a different choice would have given different (and better) results. If
more or newer or better data becomes available, will somebody really remember to

reevaluate the choice of model?

Nonlinear fitting can make sense if you want to find good estimates for parameter
values and the nature of the problem is such that no simpler method will do. The dif-
ficulty here lies in the interpretation of the results—not so much for the parameter
values themselves, but for the estimated uncertainty of these results. The interpre-
tation of the reported “errors” isn’t obvious and depends on conditions that aren’t
necessarily fulfilled in practice. This is even more true when you’re trying to decide
between different models based on some measure for the goodness of fit. The entire
topic is complex and difficult, resting on subtle assumptions and producing results
that aren’t easily interpreted correctly. Beware of a false sense of security!

Philipp K. Janert

Gnuplot is an open-source graphics program that helps
you analyze, interpret, and present numerical data.

Available for Unix, Mac, and Windows, it is well-
maintained, mature, and totally free.

gnuplot in Action, Second Edition is a major revision of this
authoritative guide for developers, engineers, and scientists.

The book starts with a tutorial introduction, followed by a
systematic overview of gnuplot’s core features and full coverage
of gnuplot’s advanced capabilities. Experienced readers will
appreciate the discussion of gnuplot 5’s features, including
new plot types, improved text and color handling, and sup-
port for interactive, web-based display formats. The book
concludes with chapters on graphical effects and general
techniques for understanding data with graphs. It includes
four pages of color illustrations. 3D graphics, false-color plots,
heatmaps, and multivariate visualizations are covered
in chapter-length appendixes available in the eBook.

What’s Inside

● Creating different types of graphs in detail
● Animations, scripting, batch operations
● Extensive discussion of terminals
● Updated to cover gnuplot version 5

No prior experience with gnuplot is required. This book con-
centrates on practical applications of gnuplot relevant to users
of all levels.

Philipp K. Janert , PhD, is a programmer and scientist. He is the
author of several books on data analysis and applied math and
has been a gnuplot power user and developer for over 20 years.

To download their free eBook in PDF, ePub, and Kindle formats,
owners of this book should visit
manning.com/books/gnuplot-in-action-second-edition
$44.99 / Can $51.99 [INCLUDING eBOOK]
gnuplot IN ACTION Second Edition
OPEN SOURCE/DATA VISUALIZATION
M A N N I N G
“
The highly anticipated,
updated version of my
go-to-for-everything
book on gnuplot . ”
—Ryan Balfanz, Shift Medical, Inc.

“ The essential guide
for newcomers and the
defi nitive handbook for
advanced users. ”
—Zoltán Vörös
University of Innsbruck
“
Learn how to use gnuplot
to convert meaningful data
into attention-grabbing
visualizations that
communicate your message
quickly and accurately. ”
—David Kerns
Rincon Research Corporation
“
An accessible guide to
gnuplot and best practices of
everyday data visualization. ”
—Wesley R. Elsberry, PhD
RealPage, Inc.

SEE INSERT
www.it-ebooks.info


== Source Code

The downloads are organized into three directories:

datasets::
	contains the datasets
	publicly available data sets are not copied,
	instead, the URL where the dataset can be found is given 
	in a file with the extension .readme

gnuplot::
	contains the gnuplot command files

misc::
	contains files in other formats (Perl, Python, Latex, HTML)

To run the examples, proceed as follows:

1. change into the datasets directory (NOT into the gnuplot directory!)
2. start gnuplot
3. issue gnuplot commands from the book, like so:
   plot "marathon" using 1:2 with boxes

OR

3) load a command file using the "load" command and the relative path, like so:
   load "../gnuplot/orders.gp"


[source,bash]
----
#!/usr/bin/bash
cd datasets
for it in *; do
	if ! [[ $it =~ (fractal|dla|cluster|readme) ]]; then
		printf "=== %s\n\n----\n" $it
		cat $it
		printf "\n----\n\n"
	fi
done
----

    Links here:
    http://www.gnuplotting.org/plotting-the-world-revisited/

    Based on original data here:
    http://www.naturalearthdata.com/downloads/

    http://www.sidc.be/silso/datafiles.
    https://archive.ics.uci.edu/ml/datasets/Automobile
    http://www.monitorware.com/en/logsamples/apache.php


== misc


=== canvas-demo.html

[source,html]
----
<html>
  <head>
    <script src="/usr/share/gnuplot/5.0/js/canvastext.js"></script>
    <script src="/usr/share/gnuplot/5.0/js/gnuplot_common.js"></script>
  </head>

  <body onload="drawplot();">
    <script src="plotter.js"></script>
    <canvas id="drawplot" width=600 height=400>
      <div id="err_msg">Your browser does not support HTML5 canvas.</div>
    </canvas>
  </body>
</html>
----


=== datagen.py

[source,py]
----
import sys
import time
import math
import random

tmax = float( sys.argv[1] )

t = 0
while 1:
    dt = random.uniform( 0, 2.0*tmax )
    time.sleep(dt)
    t += dt

    print t, math.sin(0.1*math.pi*t/tmax)
----


=== doc1.tex

[source,tex]
----
\documentclass{article}
\usepackage{graphicx}

\begin{document}

\section{The First Section}

Here is a very short paragraph. The plot will be included 
after this paragraph.

\begin{figure}[h]
  \begin{center}
    \includegraphics[width=10cm]{enhanced}
  \end{center}
  \caption{A gnuplot graph, included in \LaTeX}
\end{figure}

And here is a second paragraph. The graph should have
been included before.

\section{The Second Section}

The second section really contains only a very short text.
\end{document} 
----


=== doc2.tex

[source,tex]
----
\documentclass{article}
\usepackage{graphicx}

\begin{document}

\section{The First Section}

This is a different document. We will include a \LaTeX\ file
containing the graph below.

\begin{figure}[h]
  \begin{center}
    \input{cairolatex}
  \end{center}
  \caption{A graphics file included in \LaTeX, with \LaTeX\ labels}
\end{figure}

And here is a second paragraph. The graph should have
been included before.

\section{The Second Section}

The second section really contains only a very short text.

\end{document}
----


=== driver.pl

[source,perl]
----
open PROC, "| /usr/bin/gnuplot " || die "Could not start gnuplot: $!";

print PROC "set xlabel 'Time'; set ylabel 'Amplitude';";

print PROC "set o 'graph.png';";
print PROC "set t pngcairo;";

print PROC "plot '-' u 1:2 t 'data' w l\n";

for( $x = 0.0; $x <= 10.0; $x += 0.1 ) {
  $y = exp(-$x/5)*sin( $x );
  print PROC "$x $y\n";
}
print PROC "e\n";

close PROC;
----


=== driver.py

[source,py]
----
import subprocess

data = [ [0, 12, 25],     # x, y1, y2
         [1, 14, 22],
         [2, 15, 23],
         [3, 11, 25] ]

gnuplot = "/usr/bin/gnuplot"

gp = subprocess.Popen( gnuplot, stdin=subprocess.PIPE )

gp.stdin.write( "$d << EOD\n" )
for row in data:
    for col in row:      
        gp.stdin.write( "%f\t" % (col,) )
    gp.stdin.write( "\n" )
gp.stdin.write( "EOD\n" )

gp.stdin.write( "set t pngcairo; set o 'graph.png';\n" )
gp.stdin.write( "plot $d u 1:2 w l, $d u 1:3 w l\n" )
----

=== monitor.py

[source,py]
----
import sys
import subprocess

buflen = 200                       # number of data points to buffer

gnuplot = "/usr/bin/gnuplot"

gp = subprocess.Popen( gnuplot, stdin=subprocess.PIPE )
gp.stdin.write( "set t wxt\n" )

buf = []
while 1:
    line = sys.stdin.readline()    # read unbuffered from stdin

    t, u = line.strip().split()
    buf.append( (float(t), float(u)) )

    buf = buf[-buflen:]            # drop oldest data points,
                                   # retaining at most buflen points

    mx = buf[-1][0]                # most recent time stamp
    gp.stdin.write( "set xrange [%f:%f]\n" % ( mx-10, mx+1 ) )

    gp.stdin.write( "plot '-' u 1:2 w lp\n" )
    for d in buf:
        gp.stdin.write( "%f %f\n" % d )
    gp.stdin.write( "e\n" )
----


== Gnuplot

=== access-log.gp

[source,gnuplot]
----
set xdata time
set timefmt "[%d/%b/%Y:%H:%M:%S"   # The left bracket is part of the format!
set xtics format "%d%b\n%H:00" rotate

set ylabel "Hits per hour"

plot "access_log" u (strcol(4)[1:15] . ":00:00"):(1) s f w l
----

=== airy.gp

[source,gnuplot]
----
set palette defined ( 0 'web-green', 1 'goldenrod', 2 'red' )

set grid lt 1 lw 1.5 lc palette frac 0.5
set label 1 "{/:Bold Origin}" at 1.5,-0.15 center tc palette frac 0.9
set arrow 1 from 1.1,-0.15 to 0.125,-0.02 lw 2 lc palette frac 0.9

plot [-5:3] airy(x) lw 2 lc palette frac 0.1
----

=== cairolatex.gp

[source,gnuplot]
----
set label 1 '$\phi(x) = \frac{1}{\sqrt{2 \pi}} e^{-\frac{1}{2} x^2}$' at 1.2,0.25
set label 2 '$\Phi(x) = \int_{-\infty}^x \phi(t) dt$' at 1.2,0.8

set label 3 '\textbf{\Large Big and Bold}' at -2.5,0.6

set key top left Left title '\textbf{Legend}'

set xtics ( '$-\pi/2$' -pi/2, '$0$' 0, '$\pi/2$' pi/2 )

plot [-3:3] exp(-0.5*x**2) /sqrt(2*pi) t '$\phi(x)$', norm(x) t '$\Phi(x)$'

set terminal cairolatex pdf
set o "cairolatex.tex"    # Name of output LaTeX file with extension!
replot

----

=== chebyshev.gp

[source,gnuplot]
----
t(x,n) = cos(n*acos(x))     # Define some function

set xrange [-1:1]
set yrange [-1:1]

set multiplot title "Chebyshev Polynomials" layout 3,2

do for[k=1:6] { plot t(x,k) t sprintf( "k=%d", k ) }

unset multiplot             # Don't forget! 
----

=== cloud.gp

[source,gnuplot]
----
set palette defined ( 0 'web-green', 1 'goldenrod', 2 'red' )
plot "cloud" u 1:2:3 palette
----

=== composition.gp

[source,gnuplot]
----
set xtics 26
set mxtics 2

set xrange [0:150]

set multiplot layout 2,2 rowsfirst margins 0.1,0.95,0.15,0.9 spacing 0.1,0.05

# top left: individual product numbers
set key horizontal samplen 2 at screen 0.55,0.95 width -7 center
set xtic format ""
set ylab "Absolute" offset 1,0
tx(k) = (k==2 ? 'Product 1' : ''.k-1)
plot for[k=2:5] "composition" u 1:k t  '' . tx(k) w l
unset ylab
unset key

# top right: stacked product numbers: use sum
plot for[k=2:5] "composition" u 1:(sum[j=2:k] column(j)) w l

# bottom left: individual fractions: divide by sum over all products
set xtic format "%g"
set xlab "Individual"
set ylab "Fractional" offset 1,0
plot [][0:.6] for[k=2:5] "composition" u 1:(column(k)/(sum[j=2:5] column(j))) w l
unset ylab

# bottom right: stacked fractions: divide sum by sum over all
set xlab "Stacked"
plot [][0:1.025] for[k=2:5] "composition" u 1:((sum[j=2:k] column(j))/(sum[j=2:5] column(j))) w l

unset multiplot
----

=== dot.gnuplot

[source,gnuplot]
----
# Improve default settings
set encoding utf8

set samples 3000

set isosamples 30
set hidden3d


# Local library
set loadpath "/home/janert/lib/gnuplot/"

# Local style - enable if defined
# load "default-style.gp" 


# Color management functions
hsv( h, s, v )  = hsv2rgb( h - floor(h), s, v )
pack( r, g, b ) = 2**16*r + 2**8*g + b


# Set arrows with mouse
bind "Button1" \
"if(exists('arrow')==0) { \
   arrow=1; arrow_x=MOUSE_X; arrow_y=MOUSE_Y; \
   set label 1000 at arrow_x,arrow_y point; replot; \
 } else { \
   unset label 1000; \
   set arrow from arrow_x,arrow_y to MOUSE_X, MOUSE_Y; replot; \
   undefine arrow,arrow_x,arrow_y \
}"

bind "Escape" "unset label 1000; replot; undefine arrow,arrow_x,arrow_y"

----

=== enhanced-mode.gp

[source,gnuplot]
----
set label 1 "{/OpenSymbol φ}(x) = e^{-x^2/2} ∕ √2{/OpenSymbol π}" at 1.2,.25
set label 2 "{/OpenSymbol Φ}(x) = ∫@_{-∞}^x &{i} {/OpenSymbol φ}(t) dt" at 1.2,0.8

set label 3 "{/:Bold*2 Big and Bold}" at -2.5,0.6

set key top left title "{/:Bold Legend}"

set xtics ( "{/OpenSymbol π}/2" pi/2, "0" 0, "-{/OpenSymbol π}/2" -pi/2 )

plot [-3:3] exp(-0.5*x**2)/sqrt(2*pi) t "{/OpenSymbol φ}(x)", norm(x) t "{/OpenSymbol Φ}(x)"
----

=== export.gp

[source,gnuplot]
----
export( file, terminal ) = sprintf( \
    "set t push; set t %s; set o '%s'; replot; set o; set t pop", \
    terminal, file )
----

=== font-demo.gp

[source,gnuplot]
----
unset border; unset tics; unset key

set t pdfcairo size 14cm,17cm
set output "fonttest.pdf"

s = "Quarges Gyt R17"
t = "∑αλ ∝ ∫ Γ(θ ⋅ π) dφ → ∞"

f = "Helvetica 'Nimbus Sans L' FreeSans TexGyreHeros Arial "
f = f . "Verdana 'DejaVu Sans' 'Liberation Sans' 'Droid Sans' ? "
f = f . "Times Palatino 'Bitstream Charter' Utopia 'Century Schoolbook L' ? "
f = f . "OpenSymbol STIXGeneral 'Asana Math'"

a = 0; b=2.75; c=5.75
n = words(f); m = n

do for[k=1:n] {
  m = m - 1
  w = word(f,k)
  if( w ne '?' ) {
    set label w at a,m font "Helvetica,12"
    set label s at b,m font sprintf("%s,16", w)
    set label t at c,m font sprintf("%s,16", w)
  }
}
plot [-0.25:9.25][-1:n] -2

----

=== glass.def

[source,gnuplot]
----
set datafile separator ','

data = "glass.data"                               # Name of input data file
names = "ID RfIx Na Mg Al Si K Ca Ba Fe Type"     # Column names
types = "Bldg1 Bldg2 Vhcl1 Vhcl2 Cont Tbl Lamp"   # Types of glass (col 11)

----

=== glass1.gp

[source,gnuplot]
----
load "glass.def"

set boxwid 1
set xtic format ""
set for[k=1:7] xtic add ( word(types,k) k )
plot data u 11:(1) smooth frequency w boxes
----

=== glass2.gp

[source,gnuplot]
----
load "glass.def"

unset xtics; unset key
set ticscale 0; set grid lt 1 lc rgb "grey" lw 2
set ytic offset 0.5,0         # Move tic marks closer to their boxes
set style fill solid 0.5

set multiplot layout 1,9 margin 0.075,0.975,0.1,0.95 spacing 0.075,0
do for[k=2:10] { 
  set xlabel word(names,k)
  plot data u (1):k:(0.5) w boxplot pt 6 
}
unset multi
----

=== glass3.gp

[source,gnuplot]
----
load "glass.def"

unset xtic; unset key

set multi layout 3,3 margin 0.075,0.99,0.015,0.975 spacing 0.055,0.035
do for[k=2:10] {
  set label word(names,k) at graph 0.95,0.9 right
  plot data u (1):k:(0.5):11 w boxplot pt 6 
  unset label
}
unset multi
----

=== glass4.gp

[source,gnuplot]
----
load "glass.def"

col = 6                          # Column to display
get( s, k ) = word( s, int(k) )  # Access k-th element in string s

unset key
set title "Attribute: " . get(names,col)

s = ''
do for[k=1:7] { 
  stats data u ($11==k?1:0) noout
  s = s . sprintf( " %d", STATS_sum )
}
plot data u (1):col:(0.01*get(s,$11)):(get(types,$11)) w boxplot

----

=== glass5.gp

[source,gnuplot]
----
load "glass.def"

unset key; unset tics

set size square

set multi layout 9,9 margin 0.01,0.99,0.01,0.99 spacing 0.01
do for[i=2:10] {
  do for[j=2:10] { 
    if( i!=j ) {
      if( i<j ) {
        plot data u i:j w p ps .25 pt 7 
      } else {
        plot data u i:j w p ps .5 pt 7 lc rgb "#e60000ff"
      } 
    } else {
      unset border
      set label word(names,i) at 0,0 center
      plot [-1:1][-1:1] 1/0
      unset label
      set border
    }
  }
}
unset multi
----

=== glass6.gp

[source,gnuplot]
----
load "glass.def"

unset key; unset ytics
set xtics format ""

set style parallel lw 1 lc black

set linetype 1 lc '#ddff0000' lw 1

set multi layout 1,2 margin 0.05,0.9,0.1,0.95 spacing 0

# Left side
set for[k=1:5] xtic add ( word(names,k) k )
plot [1:6] data u 1:2:3:4:5:6 w parallel lt 1

# Right side
set for[k=1:6] xtic add ( word(names,k+5) k )
set paxis 6 tics format ""
set for[k=1:7] paxis 6 tics add ( word(types,k) k ) offset 7,0
plot [1:6] data u 6:7:8:9:10:11 w parallel lt 1

unset multi
----

=== glass7.gp

[source,gnuplot]
----
load "glass.def"

unset key; unset ytics
set xtics format ""

c(x) = 9<x && x<10 ? 2 : 3

set style parallel lw 1 lc black

set linetype 1 lc '#ddff0000' lw 1   # Default style
set linetype 2 lc '#aa0000ff' lw 1   # Highlight style
set linetype 3 lc '#ff000000' lw 1   # Invisible (transparent) style

set multi layout 1,2 margin 0.05,0.9,0.1,0.95 spacing 0

# Left side
set for[k=1:5] xtic add ( word(names,k) k )
plot [1:6] data u 1:2:3:4:5:6 w parallel lt 1, \
           data u 1:2:3:4:5:6:(c($8)) w parallel lc var

# Right side
set for[k=1:6] xtic add ( word(names,k+5) k )
set paxis 3 tics 1                   # Turn on tic marks for one col
set paxis 6 tics format ""
set for[k=1:7] paxis 6 tics add ( word(types,k) k ) offset 7,0
plot [1:6] data u 6:7:8:9:10:11 w parallel lt 1, \
           data u 6:7:8:9:10:11:(c($8)) w parallel lc var

unset multi 
----

=== globe.gp

[source,gnuplot]
----
unset key; unset border; unset tics
set hidden3d

set mapping spherical; set angles degrees
set parametric; set urange [-90:90]; set vrange [0:360]

bind "x" "end=1"

end = 0; t = 0
while( end==0 ) {
  t = (t + 1)%360

  set view 90-30*cos(t), 360-t, 1.5, 1.25

  splot cos(u)*cos(v),-cos(u)*sin(v),sin(u) w l lc rgb "grey", "world_110m.txt" w l lt 1

  pause 0.01
}

----

=== graphpaper.gp

[source,gnuplot]
----
set terminal pdfcairo size 12.5cm,12.5cm
set o 'graphpaper.pdf'

set size 0.8,0.8
set origin 0.1,0.1
set margins 0,0,0,0

unset key
unset tics

set style arrow 1 nohead lw 1

set for [i=1:99] arrow from i/10.,0 to i/10.,10 as 1 lc rgb 'light-grey'
set for [i=1:99] arrow from 0,i/10. to 10,i/10. as 1 lc rgb 'light-grey'

set for [i=5:95:10] arrow from i/10.,0 to i/10.,10 as 1 lc rgb 'grey'
set for [i=5:95:5] arrow from 0,i/10. to 10,i/10. as 1 lc rgb 'grey'

set for [i=10:90:10] arrow from i/10.,0 to i/10.,10 as 1 lc rgb 'dark-grey'
set for [i=10:90:10] arrow from 0,i/10. to 10,i/10. as 1 lc rgb 'dark-grey'

plot [0:10][0:10] 1/0
set o

----

=== icecream.gp

[source,gnuplot]
----
set xdata time
set timefmt "%Y-%m-%d"
set xtics format "%d %b"

set ytics nomirror  # Switch mirroring of principal system OFF
set y2tics          # Switch secondary system ON

set ylabel  "Mean icecream consumption per head [grams]"
set y2label "Mean temperature [Celsius]"

set key top left reverse Left

plot ["1951-03-25":] \
 "icecream" u 1:2 t "Icecream" axes x1y1 w linesp, \
 "" u 1:3 axes x1y2 t "Temperature" w linesp
----

=== insets.gp

[source,gnuplot]
----
f(x,a) = x<a ? sqrt(a-x) : 0        # Magnetization
g(x,b) = 0.25*x**4 + b*x**2         # Free Energy

set multiplot

set grid
plot [-3:2.5][-1:2] f(x,0) notitle w l lw 3
unset grid

unset tics
unset key
set margins 0, 0, 0, 0

set size 0.2

set origin 0.175,0.425
clear
plot [-2.5:2.5][-1.5:2] g(x,-1)

set origin 0.4625,0.125
clear
plot [-2.5:2.5][-0.5:3] g(x,0)

set origin 0.675,0.425
clear
plot [-2.5:2.5][-0.5:3] g(x,1)

unset multiplot
----

=== iris1.gp

[source,gnuplot]
----
set datafile separator ","
unset key           
set border 2        # retain only the border on the left
set xtics scale 0   # remove the tics, but retain tic labels
set ytics nomirror  # avoid tics on the right
plot "iris.data" u (1):1:(0.5):5 w boxplot  
----

=== iris2.gp

[source,gnuplot]
----
set datafile separator ","
unset xtics; set ytics 1
set bars 0; unset key;

set multiplot \
    title "From left to right: I. Setosa, I. Versicolor, I.Virginica" \
    layout 2,2 margins 0.1,0.9,0.1,0.9 spacing 0.075

set xlabel ""; set ylabel "Sepal"
plot "iris.data" u (1):1:(0.5):5 w boxplot
set xlabel ""; set ylabel ""
plot "iris.data" u (1):2:(0.5):5 w boxplot

set xlabel "Length"; set ylabel "Petal"
plot "iris.data" u (1):3:(0.5):5 w boxplot
set xlabel "Width"; set ylabel ""
plot "iris.data" u (1):4:(0.5):5 w boxplot

unset multi
----

=== iris3.gp

[source,gnuplot]
----
set datafile separator ','

unset key                     # switch off unnecessary decorations
unset border
unset ytics
set xtics ("Sepal\nLength" 1, "Sepal\nWidth" 2, \
           "Petal\nLength" 3, "Petal\nWidth" 4 )
set lmargin 6
set bmargin 3

set for[k=1:4] paxis k tics   # turn on tic marks along parallel axes

plot [1:4] "iris.data" u 1:2:3:4 w parallel 
----

=== iris4.gp

[source,gnuplot]
----
set datafile separator ','

unset key
unset border
unset ytics
set xtics ( "Sepal\nLength" 1, "Sepal\nWidth" 2, "Petal\nLength" 3, "Petal\nWidth" 4 )
set bmargin 3

set for[k=1:4] paxis k tics
set paxis 5 tics ( "I. Setosa" 1, "I. Versicolor" 2, "I. Virginica" 3 ) left offset 4,0

cls(s) = s eq 'Iris-setosa' ? 1:(s eq 'Iris-versicolor' ? 2:3)

plot [0.6:5.8] "iris.data" u 1:2:3:4:(cls(strcol(5))):(cls(strcol(5))) w parallel lc var

----

=== link.gp

[source,gnuplot]
----
set xdata time
set timefmt "%Y-%m-%d"

set xtics format "%d%b%y"
set ytics nomirror
set y2tics

set ylabel "Celsius"
set y2label "Fahrenheit"

set link y2 via (9/5.)*y+32 inverse (5/9.)*(y-32)

plot "frankfurt" u 1:2 axis x1y1 w lp, "newyork" u 1:2 axis x1y2 w lp
----

=== lissajous.gp

[source,gnuplot]
----
set parametric
set size square

plot [0:2*pi][-1.1:1.1][-1.1:1.1] sin(2*t), cos(5*t)
----

=== machines.gp

[source,gnuplot]
----
unset key        
set xlab "Day"; set ylab "Machine"; set cblab "Defects" offset 1,0

set palette defined (0 'web-green', 0.5 'goldenrod', 0.999 'red', 1 'black')
set cbrange [0:7]

plot [0:32][0:21] "machines" u 1:2:3 w p pt 5 ps 1.75 pal,\
                  "" u 1:2 w p pt 4 ps 1.75 lw 0.5 lc black
----

=== mammals.gp

[source,gnuplot]
----
set logscale
unset key

set ylabel "Weight"
set xlabel "Heart rate [beats per minute]"

set ytics format "%.0s%cg"
set xtics format "%.0t·10^{%T}"

plot [10:1000][:0.2e9] \
 "mammals" u 3:2:1 w labels point pt 7 lc rgb 'red' offset 0,-1
----

=== mandelbrot.gp

[source,gnuplot]
----
set size sq; set view map

set samples 500; set isosamples 500

MAXITR = 100
f(z,c,k) = abs(z)>2 || k>=MAXITR ? k : f(z**2+c,c,k+1)

set palette defined ( 0 'white', 5 'blue', 15 'red', 50 'yellow', 99 'yellow', 100 'black' )

splot [-1.5:0.5][-1:1] "++" u 1:2:( f({0,0}, $1+$2*{0,1}, 0) ) w pm3d
----

=== marginals.gp

[source,gnuplot]
----
t(x,n) = cos(n*acos(x))     # Define some function

set xrange [-1:1]
set yrange [-1:1]

set multiplot layout 3,2 margins 0.15,0.95,0.15,0.95 spacing 0.03,0.05

set xtics format "";   set ytics format "%g"; plot t(x,1) t "k=1"
set xtics format "";   set ytics format "";   plot t(x,2) t "k=2"

set ylabel "Chebyshev\nPolynomials"
set xtics format "";   set ytics format "%g"; plot t(x,3) t "k=3"
unset ylabel
set xtics format "";   set ytics format "";   plot t(x,4) t "k=4"

set xlabel "k odd";
set xtics format "%g"; set ytics format "%g"; plot t(x,5) t "k=5"
set xlabel "k even";
set xtics format "%g"; set ytics format "";   plot t(x,6) t "k=6"
unset xlabel

unset multiplot             # Don't forget!
----

=== mega-export.gp

[source,gnuplot]
----
# Invoke as: call "mega-export.gp" "graph.png" "terminal options"
# File format MUST be a three-letter extension.

# Save arguments
arg = ARG1
opts = ARG2
len = strlen( arg )

# Find the last "/" in the filename
k = 0
do for [i = 1:len] {
  if( arg[i:i] eq "/" ) {
    k = i
  }
}

# Split the filename into path, file, and extension
if( k == 0 ) {         # No "/" found: use current dir
  path = ''
  file = arg[1:len-4]
} else {               # At least one "/" found
  path = arg[1:k]
  file = arg[k+1:len-4]
}
type = arg[len-2:]     # Assuming 3 letter extension

# Select a terminal based on the extension
term = ''
if( type eq 'eps' ) { term = 'epscairo' }
if( type eq 'pdf' ) { term = 'pdfcairo' }
if( type eq 'png' ) { term = 'pngcairo' }
if( type eq 'svg' ) { term = 'svg' }
if( term eq '' ) {
  print "Unknown file type - using pdf"
  term = 'pdfcairo'
}

save path . file . '.gp'

set t push
eval "set t " . term . " " . opts
set o path . file . "." . type
replot
set o
set t pop

print "Done!"
----

=== missing.gp

[source,gnuplot]
----
set yrange [9:16]
set y2range [6:13]

set ytics 9,1,12 nomirror
set y2tics 10,1,13 

set datafile missing "NaN"

plot [0:10] "missing" u 1:2 ax x1y2 w linesp lt 1 pt 7, \
     "" u 1:($2) ax x1y1 w linesp lt 1 pt 7
----

=== monitor.gp

[source,gnuplot]
----
logname = "logfile"   # Configure name of logfile
tmplen  = 200
tmpname = "tmp"

bind "x" "end=1"      # Hit 'x' to terminate script!
end = 0
while( end==0 ) {
  system sprintf( "tail -%d %s > %s", tmplen, logname, tmpname )
  stats [*:*][*:*] "tmp" u 1:2 nooutput
  set xrange [STATS_max_x-11.0:STATS_max_x+1]
  plot "tmp" u 1:2 w lp
  pause .01
}

----

=== months1.gp

[source,gnuplot]
----
set xdata time                      # turn on time series mode!

set timefmt "%m"                    # input format: 1...12
set xtics format "%b"               # output format: Jan, Feb, ...

plot [][0:10] "months" u 1:2 w lp   # plot

----

=== months2.gp

[source,gnuplot]
----
set xdata time                      # turn on time series mode!

set timefmt "%b"                    # input format: Jan, Feb, ...
set xtics format "%b"               # output format: Jan, Feb, ...

plot [][0:10] "months" u 3:2 w lp   # plot, using the third column!

----

=== mouse-arrows.gp

[source,gnuplot]
----
bind "Button1" \
"if(exists('arrow')==0) { \
   arrow=1; arrow_x=MOUSE_X; arrow_y=MOUSE_Y; \
   set label 1000 at arrow_x,arrow_y point; replot; \
 } else { \
   unset label 1000; \
   set arrow from arrow_x,arrow_y to MOUSE_X, MOUSE_Y; replot; \
   undefine arrow,arrow_x,arrow_y \
}"

bind "Escape" "unset label 1000; replot; undefine arrow,arrow_x,arrow_y"

----

=== newton.gp

[source,gnuplot]
----
# Must prepopulate f(x) and x before call

NEWTON_steps = 0
NEWTON_eps = 1.e-6

while( abs(f(x)) > 1e-12 && NEWTON_steps < 15 ) {
  NEWTON_df = (f(x+NEWTON_eps) - f(x) )/NEWTON_eps
  x = x - f(x)/NEWTON_df
  NEWTON_steps = NEWTON_steps + 1
}
print sprintf("f(%.12f) = %.12f in %d steps", x, f(x), NEWTON_steps)

undefine NEWTON*
----

=== normdist.gp

[source,gnuplot]
----
sqrt2pi = sqrt(2.0*pi)

gauss(x,m,s) = exp(-0.5*((x-m)/s)**2)/(sqrt2pi*s)
lognorm(x,m,s) = exp(-0.5*((log(x)-m)/s)**2)/(sqrt2pi*x*s)

----

=== orders.gp

[source,gnuplot]
----

unset key

set multiplot layout 2,2 margins 0.06,0.95,0.085,0.95 spacing 0.075,0.1

# --------------------
set xtics 2,2 
set mxtics 2

set label 1 "Orders per Day" at 8,3
plot [1:14] "orders" u (strcol(2)[9:10]+0):(1) s f w lp pt 7

set xtics 1
unset mxtics

# --------------------
set label 1 "Histogram:\nItems per Order" at 3.5,50
plot [0:7] "orders" u 4:(1) s f w boxes

# --------------------
set label 1 "Value vs Weight" at 4,7
plot "orders" u 5:6 w p pt 6

# --------------------
set xtics ( "Date" 1, "Items" 2, "Weight" 3, "Value" 4, "Ship" 5 )
unset ytics

set style parallel lw 1
set linetype 1000 lc "0xff000000"

ship(c) = 0+strcol(c)[1:1]   # return ship method as integer

unset label 1
plot [1:5] "orders" u (strcol(2)[9:10]+0):4:5:6:(ship(7)) w parallel lt 10,\
          "" u (strcol(2)[9:10]+0):4:5:6:(ship(7)):(ship(7)==0?1:1000) \
          w parallel lc var

unset multi

----

=== palette-explorer.gp

[source,gnuplot]
----
# Invoke as: call 'palette-explorer.gp' 'blue' 'white' 'red'

c1 = ARG1
c2 = ARG2
c3 = ARG3

s = 0.5
ds = 0.025

p = sprintf( "set palette defined (0 '%s', s '%s', 1 '%s'); ", c1, c2, c3 )

bind 'F1' "s=(s-ds>0?s-ds:0); " . p . "replot;"
bind 'F2' "s=(s+ds<1?s+ds:1); " . p . "replot;"

eval(p)
----

=== passwd.gp

[source,gnuplot]
----
set datafile separator ':'
set datafile commentschar "m"
plot [-10:90][0:15] "passwd" \
 u 3:($0+2):( stringcolumn(1) . "\n" . stringcolumn(5) ) w labels
----

=== pebble.gp

[source,gnuplot]
----
unset key; unset border; unset tics

bind "x" "end=1"

end = 0; t = 0
while( end==0 ) {
  t = t + 0.1
  splot [][][-1:1] exp(-0.2*sqrt(x**2+y**2))*cos(sqrt(x**2+y**2) - t)
  pause 0.001
}
----

=== polar.gp

[source,gnuplot]
----
set polar                               # Switch on polar mode
set size square                         # Ensure square aspect ratio

unset border                            # Switch off border...
unset tics                              # ... and regular tic marks
set tmargin 2; set bmargin 2            # Make room at top and bottom
set key left at graph 1,0.95            # Get the key out of the way

set rrange [0:1]                        # Fix radial range
set raxis                               # Switch on axis at zero-angle
set rtics 0.25 nomirror scale 0.5       # Format radial tic marks
set grid polar pi/8.0                   # Switch on and customize grid

set label "0π" at 1,0 offset char 1,0   # Angular tic labels
set label "+0.5π" at 0,1 center offset char 0,0.75
set label "-0.5π" at 0,-1 center offset char 0,-0.75
set label "+/-π" at -1,0 offset char -5,0

plot [-0.875*pi:0.875*pi] "polardata" u 1:2 t "Data" w l, \
                          0.27*(2-cos(3*t)+0.75*cos(5*t)) t "Model"
----

=== probplot1.gp

[source,gnuplot]
----
FILE = "probplotdata1"             # Configure data file
COL  = 1                           # ... and column

stats FILE u COL nooutput          # Populate STATS_records

set table $tmp                     # Store cumul dist fct in heredoc
plot FILE u COL:(1./(STATS_records+1)) s cumul 
unset table

plot $tmp u (invnorm($2)):1 w p    # Create prob plot

----

=== probplot2.gp

[source,gnuplot]
----
FILE = "probplotdata2"             # Configure data file
COL  = 1                           # ... and column

stats FILE u COL nooutput          # Populate STATS_records

set table $tmp                     # Store cumul dist fct in heredoc
plot FILE u COL:(1./(STATS_records+1)) s cumul 
unset table

set xrange [-1:1]
set link x2 via norm(x) inverse invnorm(x)   # Link the two axes
set xrange [*:*]

set xtics nomirror                 # Fix the appearance of tic labels
set x2tics format "%.2f" rotate
set x2tics add ( "0.01" 0.01, "0.05" 0.05, "0.95" 0.95, "0.99" 0.99 )

set grid x2tics ytics

stats $tmp u (invnorm($2)):1 noout # Performs linear regression, and ...
print "mu=", STATS_intercept, " sigma=", STATS_slope # ... print results

plot $tmp u (invnorm($2)):1 w p, STATS_slope*x + STATS_intercept
----

=== progress.gp

[source,gnuplot]
----
set xlabel "Cluster size [thousands]"
set ylabel "Running time [sec]"
set title "DLA Growth Program: Run Time vs Cluster Size (Double Logarithmic)"

set key top left
set logscale

plot [1:100][0.1:] "progress" u 1:2 title "Data" w p, (x/2.5)**3 notitle

----

=== pyramid.gp

[source,gnuplot]
----
unset border
unset tics
unset key
set view 75,35
splot "pyramid" index 0 with points pointtype 7 pointsize 3, \
      "" i 1 u 1:2:3:($4-$1):($5-$2):($6-$3) with vectors nohead 
----

=== shapes.gp

[source,gnuplot]
----
set angle degrees

plot "shapes" u 1:($2+2):(2*$3*cos($4)):(2*$3*sin($4)) w vectors, \
     "" u 1:($2+1):($3) w circles,\
     "" u 1:(1):($3):(0):4 w circles,\
     "" u 1:(0):(0.5):($3):4 w ellipses
----

=== sidebyside.gp

[source,gnuplot]
----
lgn( x, s )  = exp(-0.5*(log(x)/s)**2)/(x*s*sqrt(2*pi))  # Log-normal
clgn( x, s ) = norm(log(x)/s)                            # Cumulative

vals = "0.05 0.1 0.25 0.5"

set multiplot title "" layout 2,1 margins 0.1,0.9,0.1,0.95 spacing 0,0

# --- Top plot

set key bottom right Left title "Cumulative"
set xtics 0.2 format "" # No tic labels for x-axis, but adjust frequency
set ytics 0.2,0.2       # Suppress the tic label for y=0 (start,step)
set grid

plot [0:2][0:1] for[v in vals] clgn(x,v) t "s=" . v

# --- Bottom plot

set key top right Left title "Density"
set format x "%g"       # Restore the tic labels for the x-axis
set ytics auto
unset grid

plot [0:2][0:8.5] for[v in vals] lgn(x,v) t "s=" . v

unset multiplot
----

=== smoothing.gp

[source,gnuplot]
----
hw(x,a) = a*x + (1-a)*s
s=1; plot "unsmoothed" u 1:2 w l, "" u 1:(s=hw($2,0.2)) w l lw 2
----

=== spectrum.gp

[source,gnuplot]
----
set title "Scattering: Data and Theory"

set xlabel "Frequency offset"
set ylabel "Relative intensity"

set key top left box title "Legend" height .5

set arrow 1 from -4,.35 to -3.4,0.2
set label 1 "Cusp at x=-π?" at -6,0.4

set arrow 2 from 5,-.2 to 5,.95 nohead dashtype '-' lc black
set label 2 "Singularity at x=5" at 5,1 center

set arrow 3 from -1,0.2 to 1,0.2 heads size 0.1,90
set label 3 "Full Width at\nHalf Maximum" at 0,0.125 center

plot [-7:7][-.2:1.1] "spectrum" u 1:2 t "Data" w p pt 7, \
                    1/(1+x**2) t "Lorentzian", exp(-x**2) t "Gaussian"
----

=== style1.gp

[source,gnuplot]
----
set linetype  1 pt 7 lc rgb '0xee0000' # red2
set linetype  2 pt 5 lc rgb '0x008b00' # green4
set linetype  3 pt 6 lc rgb '0x0000cd' # mediumblue
set linetype  4 pt 4 lc rgb '0xff3fb3' # maroon1
set linetype  5 pt 2 lc rgb '0x00cdcd' # cyan3
set linetype  6 pt 7 lc rgb '0xcd9b1d' # goldenrod3
set linetype  7 pt 5 lc rgb '0x8968cd' # mediumpurple3
set linetype  8 pt 6 lc rgb '0x8b8b83' # ivory4
set linetype  9 pt 4 lc rgb '0x00bb00' # (custom green)
set linetype 10 pt 2 lc rgb '0x1e90ff' # dodgerblue1
set linetype 11 pt 7 lc rgb '0x8b2500' # orangered4
set linetype 12 pt 5 lc rgb '0x000000' # black

set termoption font "Helvetica,12" 
# set termoption fontscale 0.5

----

=== style2.gp

[source,gnuplot]
----
set linetype 1 lw 3 pt 7 lc rgb '0x87ceeb' # skyblue
set linetype 2 lw 3 pt 5 lc rgb '0x7ccd7c' # palegreen3
set linetype 3 lw 3 pt 6 lc rgb '0xab82ff' # mediumpurple1
set linetype 4 lw 3 pt 4 lc rgb '0x6ca6cd' # skyblue3
set linetype 5 lw 3 pt 7 lc rgb '0xfa8072' # salmon
set linetype 6 lw 3 pt 5 lc rgb '0xd2b48c' # tan

set pointsize 0.5

set termoption font "Helvetica-Bold,11" 
# set termoption fontscale .5

----

=== style3.gp

[source,gnuplot]
----

set linetype 1 pi -1 pt 1 lc black dt solid
set linetype 2 pi -1 pt 2 lc black dt (8,6)
set linetype 3 pi -1 pt 6 lc black dt (4,3)	   
set linetype 4 pi -1 pt 4 lc black dt (2,2)
set linetype 5 pi -1 pt 1 lc black dt (12,5,2,5,2,5)
set linetype 6 pi -1 pt 2 lc black dt (16,8)
set linetype 7 pi -1 pt 6 lc black dt (20,6,2,6)
set linetype 8 pi -1 pt 4 lc black dt (30,10)

set pointsize 0.5
set pointintervalbox 1.75

set termoption font "Helvetica,12" 
# set termoption fontscale 0.5 

----

=== style4.gp

[source,gnuplot]
----
unset border
set xtic nomirror
set ytic rotate by 90 center nomirror
set arrow 1000 from graph 0,0 to graph 1.075,0 head filled lw 2
set arrow 1001 from graph 0,0 to graph 0,1.075 head filled lw 2 

set size square

set lmargin 7
set rmargin 5
set tmargin 1.5
set ylabel offset 3,0
set xlabel offset 0,0.5

set key opaque title "Legend" box lw 2 font ",10" 

set linetype 1 lw 2 pt  9 lc rgb '0xff4500'          # orangered
set linetype 2 lw 2 pt 11 lc rgb '0x00ff00' dt '-'   # green
set linetype 3 lw 2 pt 13 lc rgb '0x0000ee' dt '_'   # blue1 
set linetype 4 lw 2 pt  9 lc rgb '0xff1493' dt '.'   # deeppink
set linetype 5 lw 2 pt 11 lc rgb '0x00eeee'          # cyan2
set linetype 6 lw 2 pt 13 lc rgb '0x9400d3' dt '-'   # darkviolet

set termoption font "Times,20"
# set termoption fontscale 0.5

----

=== style-cmd.gp

[source,gnuplot]
----
set xlabel "Input"
set ylabel "Response"

plot "sparse" u 1:2 t "Sparse 1" w lp, "" u 1:3 t "Sparse 2" w lp, \
     "" u 1:2:(1000) t "Smooth" s acs w l, \
     "dense" u 1:2 t "Dense 1" w l, "" u 1:3 t "Dense 2" w l, \
     "" u 1:4 t "Dense 3" w l
----

=== supercars.gp

[source,gnuplot]
----
unset key

set ylabel "Horsepowers"; set xlabel "Year"

set for[k=1:3] label k sprintf( "% d Cylinders", 4*(k+1) ) at 2003.75,1200+k*50 point pt 7 lc k offset 11,-0.175 right

plot [2003:2014][500:1400] "supercars" u 1:2:($3/4-1) pt 7 ps 1.0 lc var, "" u 1:2:8 w labels offset 1,-1

----

=== ticmarks.gp

[source,gnuplot]
----
set grid
set xtics pi format "%.0Pπ"

plot [-4*pi:4*pi] sin(x)/x
----

=== tikz-demo.gp

[source,gnuplot]
----
set label 1 '$\phi(x) = \frac{1}{\sqrt{2 \pi}} e^{-\frac{1}{2} x^2}$' at 1.2,0.25
set label 2 '$\Phi(x) = \int_{-\infty}^x \phi(t) dt$' at 1.2,0.8

set label 3 '\textbf{\Large Big and Bold}' at -2.5,0.6

set key top left Left title '\textbf{Legend}'

set xtics ( '$-\pi/2$' -pi/2, '$0$' 0, '$\pi/2$' pi/2 )

plot [-3:3] exp(-0.5*x**2) /sqrt(2*pi) t '$\phi(x)$', norm(x) t '$\Phi(x)$'

set terminal tikz standalone
set o "tikz.tex"    # Name of output LaTeX file with extension!
replot
set o               # Make sure to flush and close the output file

----

=== timeseries-mode.gp

[source,gnuplot]
----
set xdata time
set xtics format "%T"
set timefmt "%H:%M:%S"

----

=== var-axes.gp

[source,gnuplot]
----
unset border
set zeroaxis lt -1

set xtics axis
set ytics axis

plot [-8:4] airy(x)
----

=== weather.gp

[source,gnuplot]
----
set angle degrees  
unset key

set bar 0          # disable whiskers on the errorbars
set boxwidth .7    # fix width of candlesticks

sym(s) = s eq 'up' ? "△" : (s eq 'dn' ? "▼" : "◎")

plot [0:32][0:18] \
"weather" u 1:($5+2):($5+2):(10+2):(10+2) w cand lc rgb "grey" fs solid, \
"" u 1:2:3:2 w yerrorlines pt 0 lt 1, \
"" u 1:(1):(0.4):(90-0.01*$4*359):(90) w circ lc rgb "blue" fs solid, \
"" u 1:(1):(0.4) w circ lc rgb "black", \
2 lc rgb 'dark-grey', 10+2 lc rgb 'dark-grey', \
"" u 1:(16) w p lt 2 pt 7 ps .75, \
"" u 1:(16):(.05*$6*cos(90-$7)):(.05*$6*sin(90-$7)) w vectors lw 2 lt 2 nohead,\
"" u 1:($8-1000):(sym(stringcolumn(9))) w labels
----

=== world.gp

[source,gnuplot]
----
# Make sure gnuplot can find the file "world.dat" from the demo/ folder
# of the gnuplot distribution.

set mapping spherical      # Switch on spherical coordinates
set angles degrees

unset border               # Clean up
unset tics
unset key
set hidden3d

set parametric             # For the grid lines
set urange [-90:90]
set vrange [0:360]

set view 55,80,1.5,1.25    # Choose view point

splot "world.dat" w l, cos(u)*cos(v),-cos(u)*sin(v),sin(u) w l lc rgb "grey"
----


== datasets

=== alpha

----
0.199751 0.696865
0.156291 0.712802
0.20714 0.752361
0.0524864 0.737301
0.200537 0.708255
0.207559 0.698329
0.180958 0.725043
0.142082 0.654286
0.182775 0.754935
0.0992701 0.700805
0.187561 0.693555
0.240338 0.726868
0.113745 0.699525
0.0940212 0.674962
0.187733 0.745552
0.172489 0.719421
0.129099 0.745075
0.176816 0.7263
0.201207 0.716728
0.117697 0.693244
0.130928 0.725668
0.212672 0.723753
0.202077 0.726257
0.151901 0.696175
0.169175 0.73258
0.175758 0.700046
0.0973005 0.680159
0.151555 0.69144
0.134719 0.748488
0.257573 0.730033
0.17183 0.704411
0.17485 0.748115
0.134045 0.669592
0.199542 0.724125
0.213611 0.715414
0.23501 0.740198
0.155978 0.718257
0.174631 0.682503
0.149486 0.706449
0.136037 0.803404
0.140226 0.750573
0.158068 0.691727
0.169393 0.699596
0.109816 0.781335
0.12445 0.702984
0.165591 0.758395
0.154576 0.73926
0.164492 0.735889
0.168331 0.691705
0.169669 0.605353
0.194203 0.706402
0.18364 0.701719
0.166781 0.672709
0.14195 0.757723
0.11787 0.679527
0.157724 0.739355
0.157186 0.711463
0.131883 0.713687
0.150226 0.727314
0.155019 0.715065
0.162523 0.712897
0.170451 0.684719
0.141206 0.718421
0.178643 0.690266
0.141958 0.68791
0.206096 0.745819
0.133383 0.737612
0.161501 0.678644
0.178361 0.731965
0.219657 0.718509
0.203263 0.67322
0.134621 0.689694
0.161654 0.736049
0.135851 0.72654
0.160794 0.713942
0.187193 0.72498
0.204472 0.76597
0.188225 0.663657
0.167054 0.711361
0.165897 0.709806
0.167077 0.754028
0.139574 0.733623
0.119565 0.693703
0.133773 0.797718
0.154259 0.794688
0.171497 0.745749
0.219267 0.716891
0.138335 0.746081
0.200499 0.756629
0.163643 0.751672
0.170573 0.66317
0.144022 0.709606
0.193401 0.720897
0.147489 0.703635
0.237072 0.734427
0.149345 0.682975
0.182315 0.699632
0.0990463 0.723375
0.181266 0.738991
0.128692 0.687493
0.123563 0.746071
0.192474 0.732784
0.276916 0.759969
0.173247 0.734225
0.132606 0.69684
0.158631 0.730399
0.165247 0.643872
0.205539 0.690766
0.167314 0.700048
0.166249 0.709221
0.219808 0.694991
0.192329 0.704917
0.134 0.666345
0.186934 0.706381
0.171283 0.717364
0.16662 0.726471
0.246361 0.6844
0.159426 0.714506
0.183109 0.704529
0.119415 0.716453
0.227506 0.651333
0.173514 0.670198
0.187905 0.670384
0.133102 0.737735
0.139807 0.694487
0.192433 0.636845
0.179085 0.72282
0.181406 0.735531
0.166828 0.734029
0.155248 0.750301
0.188208 0.680491
0.168435 0.744249
0.127784 0.663129
0.139244 0.756875
0.167583 0.718569
0.205468 0.704926
0.205281 0.699023
0.144212 0.741434
0.190971 0.753511
0.163254 0.659008
0.0996305 0.787218
0.201912 0.710767
0.159719 0.723914
0.157165 0.713869
0.187404 0.727851
0.126266 0.713396
0.128581 0.765705
0.196926 0.686556
0.216798 0.771097
0.141243 0.746273
0.150703 0.708865
0.167706 0.673986
0.184943 0.664278
0.143311 0.729678
0.18004 0.705274
0.131624 0.670746
0.174602 0.66991
0.112424 0.686383
0.196056 0.713216
0.145989 0.725954
0.210221 0.696904
0.179033 0.716061
0.163166 0.675944
0.115396 0.713667
0.211995 0.668941
0.160005 0.814817
0.118415 0.717156
0.13291 0.762917
0.150359 0.672077
0.169653 0.678565
0.140844 0.686745
0.172115 0.69229
0.155074 0.732589
0.162035 0.69072
0.148594 0.718099
0.180228 0.734483
0.172378 0.731742
0.180068 0.753166
0.14744 0.727743
0.203038 0.733064
0.166424 0.715156
0.147524 0.686161
0.138033 0.687458
0.14906 0.718654
0.198649 0.74125
0.13961 0.741898
0.159978 0.722815
0.163803 0.651453
0.183789 0.694419
0.168824 0.663308
0.176601 0.726448
0.120858 0.709231
0.131599 0.702925
0.11408 0.774283
0.163082 0.711491
0.206923 0.737406
0.195718 0.680351
0.252076 0.731272
0.160332 0.70383
0.148333 0.711493
0.162312 0.771122
0.126787 0.738638
0.192251 0.724117
0.135025 0.774957
0.177715 0.749974
0.160236 0.677806
0.171129 0.691815
0.14336 0.724543
0.156192 0.73983
0.136317 0.729524
0.148488 0.728819
0.178951 0.746578
0.144471 0.730975
0.0706879 0.710042
0.114886 0.735099
0.267853 0.67289
0.114082 0.714513
0.12385 0.740228
0.219485 0.698554
0.149245 0.664143
0.176006 0.776214
0.177873 0.716787
0.154424 0.713114
0.113205 0.749339
0.160301 0.686626
0.213243 0.697197
0.187046 0.676624
0.164905 0.72035
0.190335 0.762686
0.169255 0.690012
0.163058 0.66305
0.51603 0.329506
0.400175 0.242397
0.345574 0.459967
0.406879 0.30198
0.424034 0.289576
0.526287 0.210978
0.321999 0.461873
0.434177 0.303514
0.367735 0.299419
0.252769 0.246649
0.439482 0.42951
0.300327 0.260635
0.434584 0.192853
0.384346 0.261872
0.259738 0.209689
0.410821 0.412129
0.430999 0.442521
0.347374 0.268256
0.417512 0.266464
0.294626 0.256868
0.360516 0.329468
0.436397 0.341896
0.531231 0.303335
0.403377 0.201948
0.513008 0.237228
0.397976 0.43794
0.294435 0.2738
0.307797 0.10506
0.319938 0.10801
0.372495 0.441592
0.340153 0.337111
0.327608 0.416848
0.192404 0.352362
0.453875 0.33769
0.530399 0.269476
0.478313 0.169592
0.411173 0.280795
0.379841 0.374329
0.367156 0.401927
0.299697 0.156431
0.37131 0.323995
0.275675 0.358632
0.36176 0.329054
0.469297 0.332871
0.346357 0.326522
0.361142 0.245961
0.310231 0.28491
0.461068 0.23118
0.452839 0.394462
0.333437 0.261483
0.447064 0.302838
0.262927 0.243164
0.473578 0.418806
0.322668 0.224574
0.303418 0.324458
0.286093 0.159641
0.37496 0.254071
0.50557 0.315968
0.404618 0.333108
0.301003 0.182642
0.292741 0.401001
0.356584 0.250108
0.34026 0.272183
0.247243 0.333359
0.346276 0.259231
0.23429 0.178359
0.211419 0.345095
0.277885 0.442681
0.493647 0.250187
0.300657 0.274886
0.278691 0.358746
0.507378 0.270544
0.421136 0.300375
0.521664 0.306189
0.373832 0.255263
0.41109 0.265568
0.431146 0.219936
0.351344 0.469183
0.483728 0.223395
0.44416 0.27474
0.495891 0.300957
0.237859 0.317035
0.551932 0.228668
0.438 0.317962
0.398766 0.39175
0.266054 0.255915
0.288226 0.303701
0.270008 0.263586
0.354807 0.386936
0.226186 0.246955
0.436183 0.354811
0.406339 0.180992
0.428798 0.432758
0.490052 0.403628
0.40925 0.201034
0.204747 0.238877
0.404267 0.214751
0.437341 0.230728
0.316513 0.301943
0.338713 0.219225
0.305672 0.315409
0.183133 0.226252
0.164951 0.287628
0.50312 0.322669
0.25842 0.32864
0.284178 0.289813
0.413911 0.440598
0.444531 0.337372
0.384337 0.248227
0.30669 0.346899
0.372462 0.214166
0.413677 0.191544
0.397087 0.334552
0.374436 0.139106
0.413351 0.454138
0.40205 0.183981
0.393744 0.215428
0.213956 0.387288
0.451252 0.411041
0.279451 0.378178
0.354272 0.364164
0.405801 0.250283
0.39229 0.362076
0.272617 0.20409
0.434442 0.201299
0.447117 0.356418
0.240715 0.301859
0.376036 0.296075
0.390239 0.363714
0.269432 0.389636
0.369976 0.181481
0.49159 0.264378
0.383637 0.296064
0.309655 0.0616458
0.35921 0.214886
0.382042 0.260327
0.359697 0.306439
0.347525 0.322417
0.387526 0.241968
0.294113 0.231248
0.258431 0.236739
0.364993 0.376069
0.368292 0.316038
0.454632 0.379651
0.423187 0.130694
0.272238 0.342181
0.426557 0.201285
0.35005 0.256567
0.45523 0.29714
0.438972 0.320242
0.494854 0.207477
0.344815 0.384374
0.302686 0.352145
0.365776 0.50044
0.473965 0.425169
0.319558 0.145837
0.482682 0.349016
0.334297 0.315476
0.401972 0.237424
0.416429 0.270283
0.325998 0.196255
0.382368 0.295158
0.357987 0.338052
0.358235 0.249325
0.43814 0.228922
0.350899 0.265058
0.322085 0.299016
0.300141 0.441131
0.504722 0.251595
0.487842 0.299142
0.380402 0.381658
0.48684 0.256431
0.425911 0.428141
0.460336 0.296847
0.365553 0.246015
0.403574 0.367348
0.386641 0.270317
0.321118 0.42943
0.148903 0.302156
0.416616 0.35809
0.456892 0.301308
0.296542 0.260056
0.458698 0.245113
0.43443 0.237419
0.39824 0.268643
0.298378 0.332362
0.288245 0.152507
0.487852 0.241217
0.427445 0.253829
0.492512 0.26566
0.194067 0.406569
0.367982 0.320282
0.303357 0.378
0.454667 0.273572
0.371875 0.338328
0.346544 0.228411
0.268454 0.266355
0.253752 0.366335
0.349831 0.429931
0.339762 0.352186
0.320626 0.366721
0.353341 0.223411
0.32582 0.403488
0.314459 0.247741
0.375824 0.335118
0.358542 0.373798
0.357621 0.22665
0.280496 0.322568
0.342323 0.271724
0.405194 0.28309
0.385319 0.236111
0.429673 0.0913051
0.460129 0.253667
0.326503 0.212344
0.352268 0.17237
0.374848 0.251142
0.297124 0.314175
0.263375 0.236697
0.274327 0.239476
0.367419 0.329856
0.435778 0.298664
0.421685 0.152646
0.422308 0.435399
0.311856 0.269876
0.343811 0.299536
0.411201 0.192925
0.26024 0.294752
0.402169 0.321601
0.368174 0.263258
0.472738 0.232808
0.401561 0.302394
0.41354 0.298077
0.177844 0.151035
0.389258 0.232556
0.305518 0.126468
0.353782 0.313601
0.351385 0.526674
0.353298 0.32122
0.485995 0.27384
0.271435 0.279059
0.346667 0.210734
0.279311 0.265821
0.391965 0.352504
0.360791 0.144546
0.217163 0.167983
0.48771 0.26224
0.269422 0.336996
0.322179 0.309033
0.424084 0.236275
0.406697 0.290735
0.264689 0.317923
0.234244 0.298955
0.338069 0.349335
0.336141 0.249657
0.368559 0.207882
0.420984 0.295985
0.395478 0.293716
0.361211 0.371149
0.305588 0.29849
0.24402 0.225299
0.337165 0.301147
0.371887 0.270315
0.373873 0.415357
0.371667 0.159216
0.286969 0.335517
0.289769 0.399219
0.451999 0.308984
0.350251 0.362079
0.484193 0.420576
0.455851 0.274374
0.299913 0.249259
0.431807 0.292734
0.538212 0.232376
0.413841 0.245501
0.38206 0.407376
0.143914 0.426071
0.433129 0.301009
0.169516 0.0170102
0.150072 0.0474509
0.0853749 -0.11135
0.0963231 0.011815
0.00621269 0.023216
-0.0635785 -0.00965935
0.23828 0.0930549
0.0704456 -0.0636391
0.0160444 -0.0916637
0.086551 0.0765831
0.0726378 -0.0918124
0.105414 0.0872377
0.159989 0.0681915
0.100037 0.00500415
0.177777 -0.0108122
0.143015 0.058094
0.0845101 -0.0381378
0.0730631 0.0586993
0.231614 0.141367
0.0202634 -0.00878701
-0.0280474 -0.101987
0.0184943 -0.0547752
0.0737284 0.00864917
0.0398314 -0.0589149
0.119737 -0.0477834
0.0739496 -0.100892
0.131207 0.117621
-0.00070226 -0.0236614
0.121505 -0.058258
-0.0308408 -0.208866
0.0449046 -0.0378356
0.149299 0.0701227
-0.033981 -0.0812538
0.0949583 0.0295911
0.00974849 -0.0410406
-0.0242073 -0.0809086
0.032004 0.0576194
-0.00987046 0.00854082
0.0869865 0.07768
-0.0300585 0.102316
0.0457635 -0.101351
0.131213 -0.0593031
-0.033345 -0.0497954
0.0353318 -0.0548328
0.14016 0.0912527
-0.0680782 0.076963
0.144729 -0.138226
0.0297247 -0.134576
-0.0119522 -0.0454797
0.0980345 -0.0328557
0.0446618 -0.079376
0.0737023 -0.126708
0.26851 0.0739542
0.098118 -0.0859271
0.225677 -0.0562298
-0.0656564 0.0982206
0.00828476 -0.0583984
0.134775 0.0275494
0.186391 0.0638796
-0.0630461 0.0605936
0.0541345 -0.03052
-0.0895242 0.0228802
0.0172618 0.106511
-0.0211892 -0.123272
0.192794 -0.0346111
0.0853026 -0.0416937
0.172602 0.030448
0.0196175 0.0329285
0.182769 -0.174028
-0.138468 -0.0931103
0.0501044 -0.0581525
-0.0710392 0.0163817
0.0804634 -0.0760199
0.0295061 0.116218
0.0327761 -0.197276
0.0725205 -0.0764253
-0.0445175 0.00191111
0.0653571 -0.169884
0.0909567 0.0845535
0.0932566 0.0419059
0.141854 0.17776
0.114793 0.0119093
0.0870978 0.0877113
-0.0863737 -0.128759
-0.0213793 -0.11823
0.192283 0.0899277
0.0609798 0.0530499
0.156516 -0.0876379
0.00367908 -0.100011
0.129725 -0.0522588
-0.015485 -0.105256
-0.0507216 0.110324
0.225555 -0.0955748
0.14256 0.0752606
0.0685264 0.0456119
-0.0570444 -0.0279984
0.00817195 -0.129797
0.143267 -0.0127017
0.0614962 0.0328785
0.108137 -0.10141
0.196097 0.167612
0.0564103 -0.0438434
0.0456609 -0.0539488
-0.028601 -0.0273732
-0.0537887 -0.172161
0.0494214 -0.0718184
0.0384749 0.130174
0.121411 -0.0716346
0.101858 0.000889771
0.253937 0.0643509
0.169618 -0.0821644
0.0721658 -0.186583
0.0244803 0.101648
-0.0417947 -0.148906
0.133826 0.167327
-0.0125641 0.0976679
0.141413 0.0634701
0.239426 -0.0198444
0.0788269 -0.0896144
-0.018429 0.0198281
0.106747 -0.0185692
-0.117835 0.00144161
0.10554 0.0647078
0.0592072 0.097892
-0.0805335 -0.124943
0.0314595 -0.186909
0.175903 0.0270638
0.0972878 -0.111256
0.178313 0.0130628
0.15171 0.115374
-0.0864281 -0.101351
0.0655842 -0.0629973
0.0964489 -0.0332402
0.0599315 0.0679201
-0.00951154 -0.136033
0.015063 0.159445
0.131324 0.0923683
0.0735411 -0.140786
0.112985 -0.0800126
0.039282 0.0233677
0.0366189 0.0299125
0.0937925 -0.0513732
0.122837 0.0491639
0.212514 -0.0229205
-0.0290648 0.0114436
0.139542 0.0797253
0.0764874 -0.0410119
0.123319 -0.0680721
0.0422498 -0.20638
0.220515 -0.139206
-0.0707908 0.0244128
0.206413 0.062804
0.0241577 0.0378006
0.0981055 -0.105683
0.0513899 0.26625
0.157165 -0.0977653
0.0815671 -0.147267
-0.0234036 0.180304
0.191859 -0.0360548
0.00754057 -0.039945
0.095176 0.0296888
-0.124775 -0.121905
0.0721018 -0.215102
0.225357 0.0124227
-0.0326732 -0.163057
0.208866 -0.0823214
0.0839766 0.0711019
0.184296 0.0510997
0.890981 0.0148298
0.885225 0.0385323
0.968034 0.00737669
0.964778 -0.0647286
1.03327 -0.00853017
0.876574 0.0373718
0.954509 0.0201199
0.87135 -0.051427
0.943467 0.0472104
0.956153 -0.00398691
0.943228 0.0440384
0.879963 0.0515038
0.966683 0.0660767
0.891293 0.00462888
0.898138 0.0215826
0.916423 -0.0128156
0.9181 0.0173294
0.957232 0.0734122
0.942148 0.0413499
0.884583 -0.0331456
0.941837 0.0766744
0.891816 0.0221377
0.93424 -0.0267173
0.952188 0.00203575
0.884507 0.0346364
0.961563 -0.0119913
0.905229 -0.0294539
0.921062 0.0875455
0.873428 -0.00494773
0.94472 0.00158221
0.894945 0.064063
0.884727 0.0323031
0.939883 0.0367638
0.930977 0.060135
0.989412 0.0684684
0.929591 -0.00127604
0.93873 0.0568061
0.908584 0.0105331
1.00141 0.0408235
0.842471 -0.024208
0.940388 0.046663
0.839764 0.0642534
0.926793 0.0426345
0.944967 0.00207118
0.927269 0.0455224
0.908385 0.0381394
0.926878 0.0359206
0.87181 0.0701604
0.873721 0.026291
0.913007 0.00981763
0.931812 -0.0148418
0.924069 -0.0192157
0.927656 0.01484
0.924388 0.0468637
0.864121 -0.0269547
0.975186 0.040052
0.937141 0.0671027
0.931453 0.0541092
0.985292 -0.0455245
0.94204 0.0817369
0.904744 -0.0604528
0.922257 0.0318458
0.900157 -0.0535061
0.906654 -0.022095
0.963681 0.0302074
0.968799 -0.0404397
0.944346 0.113818
0.858557 0.032514
0.932101 -0.0127146
0.912382 0.0203725
0.925271 -0.0184481
0.95538 0.018182
0.841848 0.0884488
0.860833 0.000245005
0.907218 -0.00649303
0.874218 0.0454918
0.941855 0.0414661
0.922929 -0.00822832
1.02612 0.0278347
0.854926 -0.00655541
0.964676 0.0731353
0.908361 0.0418527
0.914972 0.0262477
0.921997 -0.0105228
0.918715 0.0285755
0.93833 0.0562939
0.937454 -0.00927842
0.952431 0.0491341
0.873105 0.01508
0.977624 0.0272481
0.949813 -0.0121454
0.928352 -0.0564136
0.940736 0.0608556
0.920211 -0.0459492
0.915423 -0.00672526
0.904462 0.0187944
0.953933 0.0290092
0.952766 0.0827014
0.842406 0.00149137
0.890053 0.105742
0.831592 0.0310065
0.948432 0.0391444
0.954298 -0.050243
0.85389 0.00122818
0.851496 0.00832381
0.914066 0.0136173
0.956672 0.0290367
0.944069 0.0283869
1.01149 0.0037716
0.981437 0.0126206
0.913521 -0.0111994
0.867668 -0.081313
0.94457 -0.0103422
0.874606 -0.0355901
0.944167 -0.0102186
0.859548 0.000629678
0.851775 0.00849498
0.962651 -0.0328154
0.896027 0.0260848
0.874728 0.0165269
0.916601 -0.0568862
0.918298 0.0380657
0.941755 -0.00288026
0.926118 0.0939488
1.01974 -0.0197032
0.916502 0.0267388
1.01863 0.036296
0.990527 0.00892697
0.852571 -0.0289513
0.955244 0.0322746
0.909365 0.0491532
0.968307 -0.00707967
0.997723 -0.00649889
0.903658 -0.0220604
0.945065 -0.0225773
0.963053 -0.0410994
0.9964 -0.00430404
0.984632 0.0427003
0.954982 0.0472974
0.929332 0.00541224
0.885132 -0.0901615
0.966114 0.037897
0.94495 -0.013124
0.999228 0.061617
0.905996 -0.0208246
0.944638 0.0443261
0.850732 0.0226391
0.914595 -0.0535949
0.943808 0.0180214
0.955809 0.00808818
0.889501 -0.0293298
0.901106 0.00170925
0.927066 -0.00429107
0.996117 0.0367457
0.897489 0.0448132
0.918821 0.0651198
0.89503 0.0267754
0.868766 0.0480403
0.941974 0.0604441
0.915906 0.0432488
0.934996 -0.0459311
0.863915 -0.000229347
0.919514 0.0224478
0.878442 -0.039479
0.960096 0.0100944
0.924268 -0.0155582
0.902493 0.00375772
0.933286 -0.0568395
0.897182 -0.00772732
0.939066 0.093592
0.890146 -0.0190197
0.896435 -0.00349057
0.886987 -0.0719935
0.930294 0.039919
0.924588 0.0568319
0.947969 0.00709464
0.925756 -0.0478823
0.896771 0.00931758
0.865932 -0.024263
0.868693 0.0389305
0.89741 0.0496939
0.856293 -0.000430264
0.984262 0.0364339
0.90134 0.000628356
0.812982 0.0668273
0.87163 -0.0258616
0.916408 -0.0267644
0.934029 0.0681309
0.907619 0.036761
0.935439 -0.0166554
0.838646 0.0859081
0.904188 -0.0201634
0.824664 -0.0706218
0.950727 -0.047652
0.905362 0.0364075
0.986453 0.0325118
0.951604 -0.0332234
0.889556 0.00531285
0.949413 -0.0238609
0.943199 -0.0120354
0.914437 0.0138886
0.905075 0.0810754
0.913884 -0.0203459
0.900101 -0.0567375
0.965711 -0.00175968
0.856879 -0.0260318
0.973681 -0.0269891
0.917743 -0.0173126
0.342285 0.247927
0.345169 0.257299
0.351656 0.259233
0.346936 0.263774
0.341807 0.263132
0.331774 0.258249
0.317063 0.269778
0.360091 0.244894
0.333953 0.261876
0.347019 0.269437
0.325086 0.259125
0.337551 0.270722
0.360608 0.279416
0.317635 0.274131
0.331439 0.245293
0.366789 0.265272
0.357837 0.257045
0.350581 0.25996
0.361578 0.270905
0.329398 0.261081
0.327439 0.254937
0.346507 0.251427
0.325318 0.267131
0.343407 0.272848
0.336127 0.266972
0.341261 0.259585
0.330113 0.231616
0.349854 0.254272
0.343621 0.257489
0.32866 0.275124
0.329461 0.248872
0.341932 0.258429
0.308397 0.268039
0.34717 0.268048
0.334187 0.246351
0.327698 0.261443
0.365395 0.272965
0.347476 0.272618
0.339711 0.232584
0.332951 0.250898
0.325685 0.278194
0.351764 0.271791
0.33335 0.253746
0.343742 0.261005
0.349927 0.275565
0.355359 0.261263
0.330502 0.271571
0.350005 0.242649
0.341531 0.252064
0.327411 0.266267
0.351385 0.264629
0.340354 0.249475
0.347346 0.254123
0.331319 0.282617
0.33474 0.263503
0.351656 0.249281
0.339814 0.271642
0.32471 0.27028
0.349613 0.272523
0.353708 0.262266
0.334888 0.273258
0.336184 0.266604
0.350015 0.264633
0.334181 0.280498
0.348201 0.270613
0.328364 0.241265
0.353162 0.247533
0.349995 0.264236
0.33963 0.275887
0.368895 0.232355
0.337901 0.27879
0.34909 0.240355
0.344425 0.236763
0.346164 0.257486
0.357172 0.257151
0.337686 0.261568
0.357781 0.250009
0.359052 0.250935
0.352415 0.263295
0.345307 0.282103
0.324066 0.25123
0.342481 0.274866
0.334384 0.289219
0.337916 0.271348
0.336636 0.25031
0.368451 0.263053
0.344274 0.263464
0.332845 0.256304
0.35326 0.251299
0.340629 0.275171
0.340893 0.227094
0.335112 0.261018
0.333421 0.262165
0.336037 0.263504
0.318797 0.253299
0.331035 0.279187
0.359204 0.253241
0.336882 0.259493
0.343489 0.262106
0.340082 0.265646
0.349598 0.247676
0.361018 0.247665
0.333178 0.266097
0.325647 0.259332
0.359907 0.262435
0.359889 0.241777
0.351058 0.241276
0.329054 0.261333
0.325502 0.266569
0.325627 0.239942
0.338059 0.251143
0.337428 0.273651
0.345891 0.268469
0.345561 0.269629
0.342032 0.276284
0.340341 0.267638
0.349259 0.247098
0.327602 0.262489
0.357374 0.258187
0.346612 0.264981
0.344152 0.240784
0.335349 0.262507
0.330011 0.277798
0.338177 0.266009
0.353894 0.240061
0.331185 0.261102
0.326957 0.278735
0.348966 0.276577
0.340449 0.258742
0.335487 0.266044
0.336524 0.253509
0.337109 0.273534
0.358768 0.27526
0.356338 0.257538
0.351285 0.252286
0.339818 0.261692
0.348553 0.24378
0.332321 0.251009
0.354023 0.269355
0.346584 0.257774
0.351062 0.283974
0.343841 0.268092
0.356207 0.245617
0.355443 0.289168
0.354283 0.268419
0.359008 0.257028
0.359424 0.273771
0.330013 0.252495
0.3153 0.239832
0.329618 0.250482
0.340526 0.289525
0.342313 0.253179
0.324838 0.223752
0.339602 0.255227
0.339483 0.255814
0.340599 0.256772
0.350043 0.266626
0.338242 0.271001
0.34829 0.263382
0.337906 0.261119
0.343329 0.267982
0.323835 0.286287
0.333255 0.269432
0.343964 0.245975
0.340915 0.246519
0.349478 0.256543
0.339739 0.248671
0.317883 0.258129
0.351278 0.249686
0.330924 0.283594
0.360174 0.257673
0.341671 0.275176
0.321056 0.27129
0.328916 0.242089
0.370766 0.243603
0.353936 0.243336
0.358384 0.269452
0.338698 0.238444
0.358739 0.253816
0.339132 0.273971
0.355538 0.257105
0.332455 0.268315
0.339933 0.251923
0.353817 0.252592
0.333233 0.248328
0.333028 0.278911
0.339227 0.238681
0.351325 0.266446
0.365965 0.265803
0.345727 0.239363
0.36137 0.257271
0.349302 0.259696
0.35195 0.240608
0.378952 0.243684
0.34967 0.246284
0.337714 0.253826
0.360424 0.247551
0.350732 0.246369
0.321318 0.2335
0.339499 0.288922
0.345597 0.238802
0.313133 0.274379
0.308924 0.237379
0.343278 0.251655
0.339261 0.280098
0.352325 0.27165
0.331303 0.251843
0.355999 0.260945
0.335536 0.253579
0.362364 0.241017
0.352095 0.266351
0.320138 0.250566
0.349626 0.246766
0.317361 0.263605
0.338615 0.272341
0.339987 0.250019
0.330674 0.260412
0.355128 0.279703
0.334402 0.273082
0.347247 0.268913
0.337682 0.291713
0.336485 0.248372
0.345761 0.267474
0.33726 0.251129
0.35145 0.26152
0.327119 0.243896
0.340668 0.250877
0.332739 0.234122
0.330135 0.270065
0.337054 0.271681
0.336364 0.24129
0.342301 0.256805
0.372197 0.244915
0.350484 0.255213
0.359608 0.288326
0.32865 0.255431
0.34658 0.236633
0.332617 0.272743
0.336631 0.244704
0.36517 0.24801
0.350818 0.271965
0.3305 0.283667
0.329821 0.259764
0.350873 0.266237
0.345999 0.269406
0.348519 0.266686
0.355017 0.274052
0.354515 0.277523
0.325041 0.25349
0.345325 0.256372
0.352988 0.250154
0.351652 0.274647
0.351908 0.265041
0.339913 0.257572
0.386731 0.2572
0.321445 0.267922
0.332512 0.271207
0.349595 0.270708
0.358418 0.231694
0.363566 0.240095
0.363553 0.256533
0.332283 0.229671
0.340083 0.253543
0.337804 0.245401
0.347705 0.254797
0.331611 0.235266
0.323069 0.269378
0.334845 0.243619
0.339346 0.284985
0.569072 0.818376
0.594524 0.876425
0.538514 0.805375
0.569217 0.767424
0.608218 0.918011
0.597723 0.849308
0.470472 0.90101
0.536509 0.86422
0.493244 0.905003
0.571761 0.906305
0.503071 0.776368
0.656708 1.01305
0.55557 0.812598
0.645769 0.836514
0.662375 0.890962
0.423636 0.910027
0.530351 0.885747
0.616469 0.90517
0.541845 0.861655
0.463809 0.9078
0.541925 0.93715
0.599811 0.869773
0.468047 0.817386
0.560757 0.905658
0.549737 0.806496
0.537164 0.987462
0.560115 1.01311
0.466746 0.865307
0.549909 0.841975
0.526998 0.885715
0.518788 0.785986
0.601894 0.891477
0.49927 0.938104
0.679939 0.811526
0.630762 0.788323
0.415432 0.847318
0.595951 0.942659
0.555261 0.876973
0.626711 0.926863
0.503672 0.819256
0.58312 0.983406
0.56179 0.906622
0.625825 0.892002
0.587819 0.829746
0.552406 0.849688
0.623084 0.856249
0.403756 0.881671
0.572737 0.773056
0.47855 0.907929
0.5827 0.753398
0.590554 0.947967
0.568559 0.745046
0.539877 0.850382
0.666893 0.846784
0.679196 0.810163
0.493035 0.918673
0.612293 0.81822
0.514701 0.797084
0.588472 0.831456
0.476359 0.91141
0.511898 0.772393
0.400998 0.871582
0.508494 0.790198
0.57278 0.878489
0.605512 0.905112
0.40601 0.873082
0.560818 0.861634
0.61826 0.86343
0.643625 0.846352
0.530793 0.775316
0.546867 1.05398
0.573223 0.848414
0.587139 0.805346
0.48243 0.830874
0.48979 0.86925
0.497764 0.910332
0.539953 0.867874
0.671724 0.835915
0.576997 0.891513
0.631316 0.815185
0.474026 0.894021
0.57252 0.878001
0.605255 0.87539
0.523324 0.818471
0.494337 0.835402
0.565998 0.819027
0.558796 0.817892
0.564 0.914152
0.475229 0.89883
0.501896 0.831264
0.645722 0.947458
0.533516 0.803586
0.584402 0.915631
0.563606 0.870419
0.588028 0.839795
0.499111 0.938048
0.572858 0.887158
0.571676 0.853364
0.552233 0.926004
0.532082 0.856341
0.641832 0.930233
0.447148 0.947383
0.584662 0.980134
0.519819 0.834323
0.518914 0.768968
0.54474 0.934573
0.574524 0.906141
0.655283 0.912722
0.5249 0.82596
0.663292 0.811244
0.39497 0.965179
0.589928 0.852718
0.523824 0.762358
0.497909 0.9587
0.611783 0.84615
0.470127 0.791473
0.581478 0.938191
0.590902 0.959741
0.666031 0.827099
0.633792 0.755845
0.524646 0.963203
0.528165 0.851718
0.507749 0.859587
0.454762 0.918911
0.536045 0.806462
0.585104 0.872821
0.602753 0.769721
0.599628 0.894032
0.595896 0.92703
0.543047 0.875152
0.613044 0.891457
0.596967 0.936063
0.42795 0.803688
0.619717 0.849136
0.431544 0.812987
0.679057 0.85944
0.446728 0.909939
0.551917 0.770271
0.453364 0.803453
0.604916 0.969953
0.540999 0.812491
0.470289 0.768466
0.603014 0.752813
0.534001 0.911067
0.560726 1.03854
0.562654 1.00226
0.463131 0.797928
0.545877 0.833612
0.439927 0.904962
0.678061 0.846133
0.604528 0.854009
0.5025 0.856939
0.612806 0.991466
0.58135 0.950342
0.579132 0.803196
0.500119 0.816818
0.631992 0.975289
0.536683 0.924532
0.603815 0.997905
0.577039 0.832947
0.485053 0.88755
0.648521 0.706823
0.549078 0.841483
0.511404 0.978935
0.485218 0.853601
0.557404 0.859937
0.558796 0.816386
0.52293 0.800706
0.510455 0.916923
0.438015 0.912501
0.604803 0.842666
0.589379 0.850599
0.537137 0.858857
0.620472 0.955247
0.558205 0.845664
0.625299 0.903022
0.498213 0.970677
0.578598 0.89766
0.454409 0.845123
0.535136 0.922926
0.581369 0.949823
0.536167 0.882707
0.584444 0.854936
0.489522 0.954096
0.526519 0.930119
0.439817 0.885194
0.47876 0.829208
0.59921 0.989811
0.627056 0.898881
0.470852 0.886417
0.48725 0.85833
0.643545 0.86907
0.581502 0.80847
0.552575 0.849755
0.623389 0.904805
0.559593 0.892663
0.486168 0.885639
0.555349 0.925376
0.480652 0.826105
0.575437 0.762419
0.597422 0.929144
0.650332 0.866613
0.542343 0.881567
0.617927 0.311119
0.652842 0.345126
0.543321 0.41019
0.572128 0.376578
0.636478 0.474732
0.629011 0.404849
0.592623 0.34973
0.594029 0.37961
0.539964 0.352766
0.630623 0.388635
0.632072 0.377455
0.568493 0.390293
0.575912 0.306319
0.600172 0.377832
0.67415 0.371947
0.612018 0.373571
0.597768 0.408459
0.596697 0.342494
0.608433 0.36643
0.609243 0.378232
0.574906 0.327343
0.53846 0.312944
0.523267 0.395007
0.634674 0.414919
0.643483 0.348778
0.597413 0.350719
0.621334 0.356003
0.611212 0.387759
0.563333 0.273555
0.646187 0.403404
0.570812 0.403219
0.568554 0.353758
0.60734 0.298327
0.598569 0.375472
0.684129 0.314907
0.581659 0.398084
0.63737 0.365648
0.655443 0.373748
0.561607 0.346308
0.641477 0.428275
0.628735 0.436426
0.572975 0.389824
0.645378 0.381369
0.635526 0.470943
0.578922 0.440606
0.588258 0.447589
0.671667 0.368356
0.641785 0.333992
0.575953 0.373179
0.571016 0.367953
0.727198 0.364079
0.639278 0.335797
0.58437 0.46923
0.705286 0.380294
0.553237 0.382283
0.546449 0.412538
0.596683 0.368831
0.594961 0.412584
0.65081 0.351234
0.662759 0.389731
0.649626 0.428133
0.587894 0.336822
0.549986 0.381481
0.62115 0.387008
0.603221 0.34736
0.573006 0.388423
0.577403 0.385699
0.590867 0.378108
0.539569 0.350415
0.675803 0.374183
0.628028 0.372667
0.684915 0.332803
0.632066 0.382427
0.604142 0.439239
0.59002 0.393488
0.661579 0.39347
0.599206 0.379144
0.682411 0.422597
0.595474 0.387322
0.558268 0.376643
0.571473 0.410985
0.63898 0.414971
0.689294 0.402095
0.636581 0.397708
0.617426 0.410171
0.660211 0.393853
0.561904 0.373647
0.638731 0.379616
0.645863 0.329493
0.554491 0.375143
0.559747 0.378018
0.562515 0.358795
0.61163 0.447571
0.534671 0.376246
0.623812 0.411122
0.546735 0.317363
0.59555 0.385684
0.635856 0.478925
0.639715 0.413065
0.603725 0.418072
0.645328 0.455822
0.608498 0.285746
0.679374 0.355086
0.560871 0.367935
0.586388 0.36081
0.657933 0.399824
0.659699 0.366335
0.631946 0.38683
0.522235 0.410226
0.68547 0.252279
0.615603 0.3765
0.551888 0.347054
0.557924 0.42699
0.53919 0.503265
0.569565 0.403229
0.632154 0.385844
0.587047 0.430343
0.674474 0.393459
0.51777 0.273757
0.550526 0.392349
0.579973 0.308997
0.636309 0.350293
0.559565 0.351477
0.658199 0.345758
0.578748 0.401409
0.655584 0.394899
0.566392 0.362188
0.645904 0.345605
0.672789 0.366303
0.652781 0.408337
0.631176 0.459597
0.757467 0.41189
0.774987 0.365426
0.811528 0.332385
0.690454 0.50013
0.747941 0.2552
0.74768 0.306182
0.719774 0.397139
0.703167 0.383558
0.916294 0.331729
0.663689 0.341001
0.740496 0.465914
0.779945 0.158796
0.78369 0.278517
0.648068 0.493484
0.6704 0.201066
0.676373 0.286057
0.773239 0.329465
0.640217 0.20425
1.01187 0.386917
0.701055 0.0778973
0.741058 0.275981
0.712379 0.443555
0.737056 0.182738
0.784878 0.353914
0.829508 0.367497
0.735413 0.269154
0.760829 0.442452
0.679098 0.455129
0.716157 0.376099
0.730179 0.245078
0.63588 0.374773
0.840813 0.447781
0.752373 0.31147
0.533402 0.280751
0.604394 0.365305
0.61543 0.177022
0.87692 0.281537
0.847517 0.340343
0.742806 0.246839
0.692097 0.247184
0.703327 0.161983
0.656878 0.250868
0.966465 0.294348
0.542787 0.320132
0.75927 0.314434
0.725371 0.426202
0.769903 0.37043
0.815178 0.0463132
0.795601 0.263366
0.633218 0.223013
0.660311 0.356652
0.757921 0.384588
0.833562 0.53866
0.683323 0.333325
0.639234 0.27756
0.805888 0.496513
0.705589 0.483527
0.788994 0.481167
0.722126 0.445349
0.807076 0.315808
0.801943 0.332394
0.833278 0.425758
0.716117 0.357427
0.815067 0.464195
0.905564 0.173866
0.672212 0.407577
0.824278 0.333943
0.544411 0.198569
0.636909 0.406156
0.786597 0.320235
0.746111 0.372345
0.589094 0.213694
0.791824 0.441097
0.683168 0.346912
0.740286 0.321163
0.819066 0.183168
0.741344 0.362837
0.878373 0.29937
0.63846 0.421428
0.76413 0.262926
0.608017 0.253919
0.67254 0.414489
0.807357 0.510947
0.831109 0.219121
0.638031 0.301438
0.898009 0.458834
0.669648 0.368111
0.637406 0.314494
0.955804 0.401035
0.755958 0.425102
0.82418 0.360442
0.876347 0.236768
0.814378 0.252718
0.691209 0.248576
0.828136 0.286254
0.809446 0.214138
0.683767 0.191956
0.730279 0.457789
0.734437 0.29512
0.678712 0.368978
0.863856 0.288364
0.730861 0.248565
0.779101 0.363749
0.644663 0.318169
0.741232 0.29181
0.722824 0.223656
0.667962 0.380539
0.892208 0.3663
0.787641 0.378312
0.7183 0.377279
0.719347 0.355291
0.607578 0.263581
0.688744 0.208595
0.602183 0.169155
0.700147 0.205423
0.740316 0.284988
0.746412 0.273336
0.692455 0.541467
0.611675 0.298573
0.697394 0.547314
0.813586 0.377602
0.876737 0.209206
0.493676 0.340225
0.713117 0.372931
0.721087 0.568183
0.791155 0.52
0.717453 0.344557
0.861445 0.272729
0.562202 0.17819
0.846911 0.395748
0.80198 0.39301
0.948713 0.440746
0.677824 0.382288
0.747959 0.485316
0.716532 0.106431
0.630883 0.244639
0.646807 0.260405
0.919187 0.434378
0.761559 0.492119
0.839818 0.292338
0.588511 0.321875
0.721472 0.492682
0.688456 0.262968
0.598589 0.376495
0.841627 0.352684
0.594369 0.256077
0.898188 0.516339
0.7289 0.330499
0.555661 0.244807
0.759369 0.379955
0.601658 0.40462
0.712013 0.454023
0.597089 0.356687
0.627204 0.316911
0.742543 0.40903
0.743736 0.463505
0.852326 0.155867
0.700714 0.431503
1.044 0.265949
0.79592 0.452152
0.676133 0.332497
0.678367 0.37205
0.670282 0.330247
0.824468 0.266303
0.825958 0.262544
0.958781 0.445617
0.815432 0.260632
0.725858 0.359885
0.75654 0.33427
0.821363 0.383831
0.800166 0.470732
0.854023 0.191031
0.779142 0.242785
0.716339 0.313104
0.817692 0.256126
0.571707 0.305798
0.601477 0.384169
0.78424 0.217032
0.483584 0.438139
0.671176 0.379322
0.907927 0.203054
0.786995 0.370476
0.591808 0.393595
0.825779 0.156903
0.86222 0.247914
0.744926 0.341033
0.763712 0.290532
0.833927 0.212711
0.808761 0.405522
0.7242 0.309946
0.553808 0.25494
0.679406 0.336417
0.818068 0.394555
0.682142 0.107242
0.836576 0.405108
0.756087 0.187558
0.579892 0.411113
0.842129 0.338321
0.802789 0.344819
0.806589 0.425766
0.794248 0.399505
0.921903 0.355023
0.745706 0.411396
0.677049 0.297385
0.710649 0.227753
0.812255 0.149327
0.695445 0.37234
0.848945 0.248939
0.741629 0.404989
0.686877 0.291764
0.710945 0.300483
0.708076 0.306174
0.599819 0.390729
0.604027 0.327034
0.919723 0.0651608
0.731654 0.253253
0.768282 0.260546
0.842556 0.2575
0.698511 0.359772
0.762857 0.0442098
0.606044 0.360725
0.879441 0.372991
0.821195 0.280387
0.836668 0.302565
0.766228 0.356312
0.793153 0.476201
0.827385 0.203357
0.553675 0.454336
0.649387 0.314776
0.820573 0.486877
0.739007 0.29382
0.594747 0.258591
0.766619 0.360468
0.747629 0.322244
0.75243 0.206932
0.505015 0.776086
0.781502 0.872529
0.564476 0.719459
0.623949 0.694019
0.547195 0.696454
0.37731 0.813062
0.687586 0.586491
0.599074 0.611922
0.403593 0.736154
0.501778 0.664033
0.738142 0.591516
0.591449 0.80694
0.572813 0.668702
0.648288 0.745477
0.45707 0.809767
0.502769 0.523928
0.566009 0.537431
0.569134 0.693435
0.488184 0.543199
0.560146 0.869804
0.492843 0.744303
0.422713 0.657669
0.718883 0.612548
0.679937 0.530575
0.671307 0.69155
0.628757 0.703586
0.60117 0.755201
0.529323 0.564622
0.609069 0.727702
0.525205 0.667301
0.646815 0.73229
0.539637 0.601028
0.655636 0.671176
0.638164 0.694443
0.468735 0.728519
0.44916 0.749441
0.600082 0.540358
0.568198 0.640968
0.53567 0.63667
0.588038 0.665368
0.592857 0.663351
0.679241 0.655366
0.666406 0.66813
0.647194 0.75138
0.749452 0.562888
0.629469 0.610725
0.484042 0.655963
0.63852 0.700499
0.527544 0.709667
0.568091 0.678776
0.590444 0.64844
0.560758 0.849794
0.479178 0.781644
0.532901 0.735624
0.48264 0.654419
0.453619 0.706166
0.587041 0.720697
0.647363 0.757959
0.496483 0.690075
0.415944 0.680615
0.670653 0.657901
0.505832 0.767178
0.7365 0.667366
0.546097 0.684726
0.574604 0.660797
0.54153 0.62175
0.445515 0.760128
0.488451 0.689579
0.553205 0.621529
0.524458 0.604289
0.434021 0.72974
0.541984 0.754773
0.697065 0.703348
0.486161 0.635354
0.678879 0.67381
0.60932 0.691976
0.453173 0.807367
0.804765 0.672973
0.450354 0.754882
0.711123 0.657822
0.541985 0.658188
0.594154 0.759106
0.634095 0.7146
0.623786 0.637359
0.609187 0.712435
0.52149 0.78752
0.606696 0.775137
0.422939 0.575318
0.602049 0.660367
0.398942 0.817305
0.416624 0.755808
0.678186 0.680138
0.576434 0.749916
0.493181 0.62849
0.29583 0.48902
0.541533 0.661143
0.529287 0.913343
0.454217 0.589347
0.514496 0.577992
0.501218 0.794602
0.622604 0.687247
0.575227 0.726436
0.516275 0.717972
0.512866 0.84549
0.50383 0.587208
0.737296 0.885511
0.515289 0.749825
0.522501 0.710873
0.568726 0.746449
0.670878 0.694529
0.481862 0.745002
0.594161 0.374308
0.625017 0.660309
0.587898 0.57678
0.583766 0.714858
0.70279 0.760633
0.615972 0.75526
0.671814 0.654113
0.589279 0.551404
0.384498 0.618205
0.368742 0.802924
0.473945 0.697487
0.450467 0.772492
0.666391 0.733639
0.736995 0.744294
0.455654 0.663471
0.545103 0.717481
0.468567 0.728996
0.794669 0.626689
0.594595 0.601891
0.525748 0.871972
0.645271 0.740075
0.580676 0.491788
0.665318 0.720693
0.56032 0.763169
0.604564 1.04252
0.560221 0.629573
0.474221 0.832031
0.491705 0.850074
0.594901 0.541319
0.456861 0.909042
0.591582 0.738573
0.664125 0.746315
0.530929 0.704274
0.563415 0.649089
0.533781 0.756741
0.450338 0.589073
0.509568 0.670665
0.364638 0.665235
0.608718 0.673904
0.560317 0.660099
0.734529 1.00412
0.703647 0.663391
0.447979 0.625172
0.618587 0.72773
0.470286 0.68417
0.502907 0.712168
0.796322 0.613197
0.539417 0.744263
0.401466 0.469133
0.55614 0.577103
0.638802 0.796609
0.393331 0.555452
0.581008 0.6249
0.460356 0.879232
0.549102 0.583792
0.391471 0.710442
0.66966 0.7825
0.674909 0.599143
0.715025 0.725164
0.691485 0.725698
0.50141 0.60236
0.554806 0.637864
0.520923 0.686354
0.618045 0.854236
0.645558 0.72921
0.519505 0.752739
0.566179 0.84148
0.620564 0.918294
0.50992 0.812887
0.800021 0.626094
0.845136 0.480947
0.953448 0.318826
1.0474 0.612923
0.958467 0.485214
0.933017 0.51668
0.99497 0.459699
1.05554 0.582432
0.840644 0.330768
0.935352 0.358288
0.900575 0.534486
1.05844 0.475555
1.02069 0.17918
0.879871 0.377134
0.872685 0.318824
0.890731 0.317672
0.948612 0.421541
0.92586 0.357341
1.11801 0.35506
0.948611 0.52312
0.738762 0.381605
0.872715 0.325168
0.929183 0.488386
0.889522 0.465352
0.951789 0.464145
0.877113 0.382691
0.896134 0.562735
0.833324 0.358256
0.882121 0.479311
0.915427 0.347932
0.771703 0.416587
0.910483 0.253851
0.903093 0.39579
0.884412 0.487514
0.807076 0.357001
0.802076 0.452163
0.985352 0.394891
0.789851 0.287405
0.876614 0.497837
0.810804 0.541254
1.06063 0.468372
0.996999 0.461685
0.816113 0.298089
0.891402 0.355349
0.855808 0.425257
0.866608 0.345668
1.02591 0.345673
1.05253 0.227671
0.835459 0.262443
0.839451 0.47692
0.968138 0.254231
0.809164 0.337213
0.858686 0.463082
0.856773 0.468527
1.06783 0.455017
0.80531 0.33871
1.0608 0.204682
0.94756 0.473244
0.918476 0.511181
0.734375 0.402466
0.770062 0.521017
0.935052 0.479362
0.856325 0.366974
0.947614 0.408888
0.868791 0.280126
0.950378 0.383423
0.871243 0.483815
0.796877 0.386377
0.848374 0.290977
0.946753 0.566219
0.999537 0.489958
0.890609 0.347581
0.8833 0.45592
0.84406 0.360896
0.918593 0.516234
0.86001 0.411235
0.870895 0.347938
0.775663 0.231707
0.866479 0.383837
0.97289 0.300196
0.834264 0.533498
0.961931 0.443935
0.972831 0.423002
1.07664 0.307297
0.991376 0.317258
0.80754 0.436356
0.899572 0.430868
0.862653 0.285997
0.991482 0.396611
0.939414 0.462735
0.979587 0.471127
0.907103 0.305279
0.835148 0.358715
0.909789 0.426121
0.87008 0.395177
0.914018 0.427298
0.864848 0.233967
0.909716 0.361976
0.814056 0.379846
0.815692 0.398882
0.90248 0.38777
0.816264 0.414379
0.762723 0.28649
0.683763 0.501852
0.804321 0.261061
0.795603 0.371188
0.943987 0.539993
0.86067 0.535633
0.936291 0.576006
0.852422 0.347692
0.873381 0.400334
0.842433 0.372215
0.893418 0.176726
0.976913 0.548601
0.850521 0.437528
0.886857 0.575085
0.928735 0.378006
0.981386 0.352819
0.920643 0.392202
0.865851 0.500546
0.95177 0.361543
0.858212 0.419614
0.832404 0.515463
0.937481 0.607012
0.659362 0.57072
0.870449 0.331964
1.07827 0.35134
0.847946 0.459577
0.886318 0.422351
0.917532 0.49634
0.887166 0.301438
0.94237 0.487336
0.739472 0.436971
0.762948 0.475532
0.864322 0.369214
0.811523 0.243319
0.74929 0.329277
0.816757 0.212496
1.02077 0.296136
0.949645 0.312904
0.972504 0.348167
0.979607 0.453411
0.991765 0.485571
0.88489 0.481671
0.856092 0.421529
0.836144 0.613303
0.914019 0.395353
0.991955 0.400117
0.900351 0.519118
0.945343 0.349016
0.940835 0.484406
1.09426 0.453979
0.920558 0.531295
0.941263 0.331088
0.930174 0.361482
0.945193 0.405991
0.885923 0.263434
0.971086 0.340495
0.852421 0.493952
0.98314 0.372248
0.988916 0.387497
0.065 -0.04
0.065 -0.04
----

=== arrows

----
-5	-5	0.0186400139049451	0.0104826388202004	-0.0271929824561403
-5	-4.5	0.0340430078708921	0.00739883757003473	-0.0415481726082171
-5	-4	0.0510768712915359	-0.00512829528479731	-0.0555278319647961
-5	-3.5	0.063605447686999	-0.0303935988391293	-0.0640843214756258
-5	-3	0.0631201800044234	-0.0656612130273334	-0.0611111111111111
-5	-2.5	0.045174727360601	-0.100833030667667	-0.0435982532751092
-5	-2	0.0137388096910122	-0.125726988705472	-0.0142376142376142
-5	-1.5	-0.023161852903357	-0.137321722100962	0.021147412333237
-5	-1	-0.0598398713174425	-0.138328076127764	0.0576923076923077
-5	-0.5	-0.094336664569372	-0.132186310703492	0.0928459612901364
-5	0	-0.126511628961181	-0.120492815215342	0.125490196078431
-5	0.5	-0.155986380482551	-0.103005132441885	0.154685461044324
-5	1	-0.180959069188167	-0.0788758054431775	0.178904428904429
-5	1.5	-0.198181473315027	-0.0483803232219125	0.196020567851554
-5	2	-0.204357647699172	-0.0142587819200765	0.204105571847507
-5	2.5	-0.198324907748712	0.0186155631863141	0.202593317606117
-5	3	-0.182174594433536	0.0454341034546356	0.192857142857143
-5	3.5	-0.160181946018809	0.0636806657384497	0.177648837664905
-5	4	-0.136668199567119	0.0735726807329678	0.1599276345545
-5	4.5	-0.114591964240405	0.0769653413129138	0.14198303511529
-5	5	-0.0953626952522456	0.0760619943690752	0.125187969924812

-4.5	-5	0.0179202626702959	0.0260525291268165	-0.0429563237565382
-4.5	-4.5	0.0389385775173941	0.0282291279662495	-0.0677305655431375
-4.5	-4	0.066013140836031	0.0167040315618979	-0.0954859192428642
-4.5	-3.5	0.0902885964899131	-0.0183926264455295	-0.117176825141427
-4.5	-3	0.0949402872627119	-0.0753182991492797	-0.118805713538195
-4.5	-2.5	0.0699349440804933	-0.132430005159976	-0.0926408430316716
-4.5	-2	0.0246439938176342	-0.168024690164645	-0.0458257978689579
-4.5	-1.5	-0.0248510750821539	-0.180123447540489	0.00823095079586031
-4.5	-1	-0.0705508554295254	-0.178003802126975	0.0610282503148225
-4.5	-0.5	-0.112158783266944	-0.16908696891159	0.110108669581742
-4.5	0	-0.151764339326504	-0.155495470731372	0.155590218178733
-4.5	0.5	-0.190264594397089	-0.135340952749724	0.197285860207209
-4.5	1	-0.225330650466937	-0.105131367585948	0.23313184270827
-4.5	1.5	-0.250891003779896	-0.0632685964701913	0.258993920148705
-4.5	2	-0.259703163210023	-0.0137046954012663	0.270412374039317
-4.5	2.5	-0.248698046769564	0.0341100326660959	0.265714550994741
-4.5	3	-0.222037355181559	0.0707563031546513	0.247709523888336
-4.5	3.5	-0.188140796470708	0.0923981637641606	0.222068159264848
-4.5	4	-0.154454303244575	0.100939460678046	0.194278494519776
-4.5	4.5	-0.1250125389788	0.100679554120385	0.167913736769901
-4.5	5	-0.100966579691031	0.0955874423977573	0.144611313972482

-4	-5	0.00819176478452383	0.0436697669446123	-0.0588744588744589
-4	-4.5	0.0307076427860252	0.0555417784175471	-0.0975232673513711
-4	-4	0.0649435216981017	0.0506727144738252	-0.146825396825397
-4	-3.5	0.101817481915677	0.00546134615246099	-0.192818401361891
-4	-3	0.113412023815765	-0.0858687883188036	-0.204987417067033
-4	-2.5	0.0797844036498636	-0.177736880244978	-0.16370522133234
-4	-2	0.0201062262632782	-0.224570868929092	-0.0876623376623377
-4	-1.5	-0.0386644614574767	-0.232103271394952	-0.0063529878896168
-4	-1	-0.0887634143064998	-0.223586955622771	0.0673992673992674
-4	-0.5	-0.133838341510993	-0.211823193918649	0.13358857056336
-4	0	-0.179276570989283	-0.198659890055438	0.195614035087719
-4	0.5	-0.228100461368315	-0.179032157804043	0.255281844481459
-4	1	-0.277810488309633	-0.143970348374416	0.310005783689994
-4	1.5	-0.317569363371009	-0.0865177211151341	0.351523408802511
-4	2	-0.331546168513069	-0.0117034922383822	0.369047619047619
-4	2.5	-0.311935164230339	0.0607931815165402	0.357721422199567
-4	3	-0.267737036998085	0.111286342962428	0.323903047307303
-4	3.5	-0.21604952070342	0.134724754855123	0.280026287447744
-4	4	-0.169185199702919	0.138063925449897	0.236324786324786
-4	4.5	-0.131590033099435	0.130539430532226	0.197889814914394
-4	5	-0.103026229200347	0.118689339955371	0.166027007818053

-3.5	-5	-0.0138112899924297	0.0573432489548586	-0.0700395678290998
-3.5	-4.5	-0.000458373551410152	0.0806476361766292	-0.122068612391193
-3.5	-4	0.0243593402558716	0.0878797580480341	-0.19582670089541
-3.5	-3.5	0.0561033961553511	0.0368369228997938	-0.274613255170168
-3.5	-3	0.0669041233425689	-0.097184560593482	-0.303341103341103
-3.5	-2.5	0.032682136970628	-0.232102095291337	-0.240445269016698
-3.5	-2	-0.0231833420118969	-0.285959396121644	-0.126168254903887
-3.5	-1.5	-0.0738067998111603	-0.2837827974438	-0.0140535792709706
-3.5	-1	-0.116260044659284	-0.268049117374365	0.0811689601361895
-3.5	-0.5	-0.157052160661474	-0.255933012242751	0.165136823960353
-3.5	0	-0.203443809283976	-0.248307214672184	0.246558609349307
-3.5	0.5	-0.261029784490208	-0.236323670825913	0.331034482758621
-3.5	1	-0.329037695579738	-0.201919860869141	0.41638342431421
-3.5	1.5	-0.391009362459262	-0.124713570204613	0.486956521739131
-3.5	2	-0.41448829953983	-0.00765867097965835	0.516649608277351
-3.5	2.5	-0.380641580241552	0.106467219419409	0.491597291597292
-3.5	3	-0.30955818987016	0.174868910103392	0.42753586282998
-3.5	3.5	-0.234929186561829	0.194505005582277	0.352636127917027
-3.5	4	-0.174470062595994	0.185527810750991	0.2850882131054
-3.5	4.5	-0.130431421424369	0.16568259446918	0.230525030525031
-3.5	5	-0.0993646260031291	0.144194262516854	0.188250803328664

-3	-5	-0.0453360737299466	0.0587447553603984	-0.0705128205128205
-3	-4.5	-0.0527542364621511	0.0869276913187883	-0.127603159127371
-3	-4	-0.0614088758925529	0.100622148001143	-0.212283840190817
-3	-3.5	-0.0714316695538903	0.0480752684382802	-0.307860947485487
-3	-2.5	-0.0960755151287535	-0.267546022339135	-0.268197375158326
-3	-2	-0.111054815921232	-0.323808504723002	-0.131295981890209
-3	-1.5	-0.128403990280112	-0.31718983529058	-0.00158247409934971
-3	-1	-0.149353006274226	-0.300668427553712	0.107142857142857
-3	-0.5	-0.176540219315332	-0.293775121129375	0.205095838123361
-3	0	-0.214906565947805	-0.298210065565442	0.305916305916306
-3	0.5	-0.271710015049061	-0.303911745385474	0.420868685475156
-3	1	-0.351240483841757	-0.282130183319541	0.551587301587302
-3	1.5	-0.43617451327112	-0.185107138286761	0.673004897723999
-3	2	-0.471805970763029	-0.000876588984221174	0.726403823178017
-3	2.5	-0.419589452879934	0.179763842813357	0.674602427356405
-3	3	-0.319444444444444	0.266052758067073	0.557017543859649
-3	3.5	-0.22726152112789	0.2700098083625	0.434786631914992
-3	4	-0.161187025128628	0.239317908855261	0.335873884437496
-3	4.5	-0.11727513444311	0.202423858541676	0.262540897734031
-3	5	-0.0881149404294805	0.169419804569651	0.209207459207459

-2.5	-5	-0.0762908940679309	0.0436581765383874	-0.0574835462640341
-2.5	-4.5	-0.104471796421786	0.0646171429502315	-0.106690166703386
-2.5	-4	-0.146632898054223	0.0692241729812022	-0.176973353443942
-2.5	-3.5	-0.198508462845798	0.0153054101840479	-0.251505016722408
-2.5	-3	-0.232456575140237	-0.12181818309856	-0.2750499490316
-2.5	-2.5	-0.224590000142264	-0.260112500761139	-0.205847953216374
-2.5	-2	-0.198543212034509	-0.317900974937173	-0.083817552310703
-2.5	-1.5	-0.181812445687739	-0.321021109587509	0.0381577918523731
-2.5	-1	-0.178921743207402	-0.313769322134964	0.146810035842294
-2.5	-0.5	-0.187020018809974	-0.316699129394718	0.250980392156863
-2.5	0	-0.20587972942549	-0.335504639199993	0.365942571785268
-2.5	0.5	-0.240303282641811	-0.363604425563867	0.508812260536399
-2.5	1	-0.297510393806314	-0.365899631532802	0.689622352901186
-2.5	1.5	-0.368990002087576	-0.258038270455294	0.878004535147392
-2.5	2	-0.400189548358708	0.00946298631487891	0.966477355468181
-2.5	2.5	-0.344410035022721	0.272591162243249	0.874493927125506
-2.5	3	-0.250069092974491	0.36750977049125	0.685240824534942
-2.5	3.5	-0.173060977370183	0.34418886407918	0.508929056071215
-2.5	4	-0.122429996711916	0.287647333742164	0.378919177427068
-2.5	4.5	-0.0901949137099115	0.233725813097402	0.288788335847159
-2.5	5	-0.068994096738103	0.190357152277976	0.2261755016472

-2	-5	-0.0965526652735401	0.0163536126036069	-0.0338740147221679
-2	-4.5	-0.133857030088164	0.0234642190069808	-0.0668470778141765
-2	-4	-0.185528912403238	0.0132432703975734	-0.109133126934985
-2	-3.5	-0.242803204340468	-0.037833718801995	-0.14650325009733
-2	-3	-0.277983462943153	-0.135427840921023	-0.148148148148148
-2	-2.5	-0.271164851343429	-0.233896046641564	-0.0940933270366839
-2	-2	-0.241291299830333	-0.287902210090951	-0.00252525252525251
-2	-1.5	-0.214817867650161	-0.30420814805629	0.0980228348649401
-2	-1	-0.198889072423327	-0.308674119764191	0.196855775803144
-2	-0.5	-0.189462852064785	-0.319107177437575	0.29869969595997
-2	0	-0.181191101479912	-0.344334310624612	0.416666666666667
-2	0.5	-0.170708847038256	-0.381934621564875	0.56939802644615
-2	1	-0.1569686600167	-0.396974691768728	0.771929824561404
-2	1.5	-0.14060725737668	-0.287053645849382	0.994026284348865
-2	2.5	-0.10570356695432	0.330414868870805	0.98252504112515
-2	3	-0.0896392233108442	0.424415108784311	0.752136752136752
-2	3.5	-0.0754114988810141	0.384159371657137	0.547662341499314
-2	4	-0.0631957402697059	0.314026644313875	0.402337858220211
-2	4.5	-0.052919045919772	0.251625620105531	0.30397797784246
-2	5	-0.0443811651005676	0.203070512762422	0.236660250544319

-1.5	-5	-0.103275574157038	-0.0147571266765676	-0.00575460994911049
-1.5	-4.5	-0.138962072462	-0.0198977997535515	-0.0219458118823043
-1.5	-4	-0.183579180117079	-0.0397220012711021	-0.0390150550578358
-1.5	-3.5	-0.228707383199591	-0.0839616242737715	-0.0474762135139494
-1.5	-3	-0.257831853055435	-0.150579308101901	-0.0328673641696987
-1.5	-2.5	-0.260890106608324	-0.217509240023571	0.0130081300813008
-1.5	-2	-0.246546994632586	-0.262700604111623	0.0834964122635356
-1.5	-1.5	-0.229065804786024	-0.284434577386078	0.165903062454787
-1.5	-1	-0.213112499965407	-0.293785732011319	0.253286968041066
-1.5	-0.5	-0.19390200039403	-0.302407675218236	0.346952574133101
-1.5	0	-0.162294747138782	-0.318201010089972	0.455054617676266
-1.5	0.5	-0.107791648156482	-0.339323464886167	0.590734935562522
-1.5	1	-0.0220970024592098	-0.334874548632047	0.762723210810643
-1.5	1.5	0.0839511003721589	-0.222949044045771	0.941001855287569
-1.5	2	0.152136757215105	0.0453517137521592	1.01908441634469
-1.5	2.5	0.13245500418089	0.306644255903075	0.917355956168257
-1.5	3	0.0711427155523798	0.398137638796324	0.719572152952237
-1.5	3.5	0.0230561850235952	0.370740444493075	0.53614661527017
-1.5	4	-0.00297066135926793	0.310111869830053	0.400394210996004
-1.5	4.5	-0.0146505653900643	0.252445323948678	0.305721713766355
-1.5	5	-0.0188589843999361	0.205821065541916	0.239558884144871

-1	-5	-0.0995785641370993	-0.0435344813716212	0.0217948717948718
-1	-4.5	-0.129349737948766	-0.0566861574283347	0.0189867738155031
-1	-4	-0.163928179146033	-0.0808086496684701	0.0195360195360195
-1	-3.5	-0.197848733075323	-0.1190328427853	0.0291826340043657
-1	-3	-0.223207091296544	-0.168116714881995	0.0547619047619047
-1	-2.5	-0.235779991454585	-0.216963481714301	0.099934548854605
-1	-2	-0.238760158661551	-0.253870579086284	0.162406015037594
-1	-1.5	-0.237420874089188	-0.274144534645919	0.236350514111108
-1	-1	-0.231639381717008	-0.279751904149477	0.316666666666667
-1	-0.5	-0.214069693950793	-0.275789992425581	0.401250229821658
-1	0	-0.173127769310826	-0.267619476811848	0.491774891774892
-1	0.5	-0.0979055220763381	-0.254532049770378	0.592824527071102
-1	1	0.0141117657488348	-0.216594982961408	0.704545454545455
-1	1.5	0.139880078383462	-0.110834899391479	0.803704471629
-1	2	0.218393406771017	0.0743109587977717	0.834408602150538
-1	2.5	0.206570307140321	0.250160326283526	0.761711451966325
-1	3	0.142029162442886	0.32857972327862	0.626190476190476
-1	3.5	0.0800137340365117	0.323658028125808	0.489259250415861
-1	4	0.038936547794244	0.284351621031175	0.378643578643579
-1	4.5	0.0155003240701398	0.239736680359044	0.296151959188104
-1	5	0.00303091688198961	0.200122256206601	0.235714285714286

-0.5	-5	-0.0897063447198544	-0.0676169577643983	0.0461515962945593
-0.5	-4.5	-0.113310671584555	-0.0856406289101169	0.0530358153448136
-0.5	-4	-0.139921005235078	-0.111935059537461	0.0652926730918663
-0.5	-3.5	-0.166880614932086	-0.147231698945751	0.0866654190838583
-0.5	-3	-0.191220850906827	-0.188833718186762	0.121076990642208
-0.5	-2.5	-0.211977331898929	-0.23022583401129	0.170882145961833
-0.5	-2	-0.230869620465391	-0.263278913145944	0.235555283174331
-0.5	-1.5	-0.249150600610634	-0.280787950744335	0.311688311688312
-0.5	-1	-0.262700980197968	-0.277686431455471	0.393635067489515
-0.5	-0.5	-0.259749299477167	-0.252762564092163	0.474451849705399
-0.5	0	-0.224797347576004	-0.210675915675938	0.548089591567852
-0.5	0.5	-0.14854880198194	-0.158209692162631	0.611852996358018
-0.5	1	-0.0381360503086279	-0.0931200247119578	0.664039591874643
-0.5	1.5	0.0774049934109028	-0.00207293997251146	0.695071010860485
-0.5	2	0.15443687398077	0.113863195638065	0.685411006507866
-0.5	2.5	0.167970206338955	0.217567287807285	0.625366970194556
-0.5	3	0.136215348588396	0.271497649216469	0.532266554374145
-0.5	3.5	0.0932604106005088	0.276042844476862	0.434231790908922
-0.5	4	0.0580256726845076	0.253130687193371	0.348668333722131
-0.5	4.5	0.0340532069664612	0.221206316184995	0.280235472401935
-0.5	5	0.0190124346186786	0.189610842199267	0.227328129686363

0	-5	-0.0765955510167327	-0.0868021747593612	0.0664711632453568
0	-4.5	-0.0948788159290032	-0.108065787176652	0.0802647933745793
0	-4	-0.115618876424623	-0.136321710031839	0.100649350649351
0	-3.5	-0.138135923427364	-0.171826726604375	0.13066708654805
0	-3	-0.162335044921017	-0.212856528050482	0.173607038123167
0	-2.5	-0.189704613653184	-0.255096749047665	0.232199546485261
0	-2	-0.223141676648695	-0.291320454046559	0.307575757575758
0	-1.5	-0.264099164938313	-0.31078839208111	0.397753706619047
0	-1	-0.306756288977146	-0.299690848678631	0.495238095238095
0	-0.5	-0.332578879562346	-0.247512525971537	0.585294291629695
0	0	-0.315298203719625	-0.160032126069232	0.65
0	0.5	-0.241957468262787	-0.0618219826282857	0.67941348973607
0	1	-0.129373192734527	0.0254838003111779	0.677248677248677
0	1.5	-0.0143768652754862	0.100143394305418	0.651636363636364
0	2	0.0685399784769171	0.166588511461955	0.605555555555556
0	2.5	0.104734688031915	0.218167141858317	0.540655534941249
0	3	0.103389611591345	0.244288120535092	0.464437689969605
0	3.5	0.0841235767651996	0.244551804353686	0.388028461345073
0	4	0.0618904842478896	0.22772080433515	0.31969696969697
0	4.5	0.0432420872682265	0.203396872494784	0.262681131932327
0	5	0.0294719185910813	0.177868541459431	0.216774193548387

0.5	-5	-0.0617959757465588	-0.101487204519981	0.0827040798327512
0.5	-4.5	-0.0753956523823167	-0.125167486479237	0.101446879381816
0.5	-4	-0.0911673919885086	-0.155662763036705	0.127772117769339
0.5	-3.5	-0.109599659078431	-0.193653308066505	0.164800716524854
0.5	-3	-0.132287767175524	-0.238760020917985	0.216390031682981
0.5	-2.5	-0.162786666612762	-0.28864176124789	0.286924207069398
0.5	-2	-0.206803979306696	-0.336987497093042	0.380536819948684
0.5	-1.5	-0.269897013310645	-0.369342340924345	0.498493376542157
0.5	-1	-0.349191406308508	-0.358791409142885	0.632576079866133
0.5	-0.5	-0.418556686174897	-0.27462551941143	0.755817213344547
0.5	0	-0.428206828240509	-0.120054504376378	0.826136906375453
0.5	0.5	-0.350105557083472	0.0433048897432873	0.819407008086254
0.5	1	-0.217395991333663	0.154258346956685	0.754586936405118
0.5	1.5	-0.0870542481780948	0.208986117508064	0.667847071939144
0.5	2	0.00686692526835941	0.232870439400196	0.580582899054237
0.5	2.5	0.0577126409718704	0.2422582157419	0.498536493248985
0.5	3	0.07460140971809	0.240850409831238	0.422730813043401
0.5	3.5	0.0715734647917857	0.229529981386973	0.354595257250124
0.5	4	0.060277474702195	0.21106593333941	0.295603177590755
0.5	4.5	0.047535836185359	0.189209065687465	0.246195616911475
0.5	5	0.0362863352387569	0.167009738332303	0.205726578833955

1	-5	-0.0461019188911044	-0.111981804340537	0.095021645021645
1	-4.5	-0.0552149190002885	-0.13741451484825	0.117208227461143
1	-4	-0.0659005234184264	-0.17006176088757	0.147816349384099
1	-3.5	-0.0790336322232139	-0.211419810706953	0.190411639412313
1	-3	-0.0967692859588179	-0.262802647242406	0.25
1	-2.5	-0.123596885180377	-0.324525172133655	0.333529803776379
1	-2	-0.16751613677608	-0.393066309411452	0.450013923698134
1	-1.5	-0.239767534684914	-0.452988819231208	0.608067360755533
1	-1	-0.346681727285117	-0.461463922630049	0.804545454545455
1	-0.5	-0.461780225917429	-0.346739347997433	0.997781838660369
1	0	-0.502581837695187	-0.0902363805692291	1.0962962962963
1	0.5	-0.411671003810656	0.172777650665658	1.04096246806367
1	1	-0.250838736837006	0.306711173433118	0.887254901960784
1	1.5	-0.107291397900887	0.328563863469498	0.723062558356676
1	2	-0.0117099542600708	0.306237156394483	0.587133796436122
1	2.5	0.040437328520828	0.276684191516109	0.481376713501066
1	3	0.0620885789458918	0.249498566324361	0.398148148148148
1	3.5	0.0654737372736586	0.224615275477851	0.331067197328381
1	4	0.059762320801408	0.200983213175213	0.27630269704111
1	4.5	0.0507346894328021	0.178486696072523	0.23150627358201
1	5	0.0414470388456741	0.157548715744815	0.194947735191638

1.5	-5	-0.0300885375067228	-0.11840944729168	0.103617058383712
1.5	-4.5	-0.0346796251938235	-0.144732409692619	0.127915236891217
1.5	-4	-0.0397282860941243	-0.178685259318644	0.161173803980539
1.5	-3.5	-0.04574977807538	-0.222538580683529	0.207395927504413
1.5	-3	-0.0541618450104974	-0.279180765216162	0.272678260454686
1.5	-2.5	-0.0681488712616502	-0.351742802022534	0.366467746518897
1.5	-2	-0.0940664367519797	-0.441004161836027	0.503104949791167
1.5	-1.5	-0.142929269387614	-0.535086950992101	0.701322038249262
1.5	-1	-0.227034804205112	-0.580421896086161	0.971003190358029
1.5	-0.5	-0.3336330613166	-0.449773686357636	1.26247325631151
1.5	0	-0.380418957915334	-0.068478710427146	1.41092237442922
1.5	0.5	-0.297238746253582	0.317440905407319	1.29222661396574
1.5	1	-0.157495823435621	0.461538704699472	1.02808067321086
1.5	1.5	-0.0465978269621329	0.437051677143917	0.78106828938472
1.5	2	0.0202743905872295	0.368605439842258	0.599186856028961
1.5	2.5	0.0544200171238267	0.306297277653316	0.471824591905728
1.5	3	0.0676676808235292	0.258601290469652	0.380646825676024
1.5	3.5	0.0685873544811085	0.222380500376409	0.312604796967267
1.5	4	0.063063047381129	0.193583697596103	0.259937515020428
1.5	4.5	0.0548920287382787	0.169576717121835	0.218155455439905
1.5	5	0.0462773274053059	0.148981478400413	0.184519045597059

2	-5	-0.0143812007600414	-0.120857221273	0.108703792863639
2	-4.5	-0.0145006147256656	-0.146944531940069	0.133838447233011
2	-4	-0.0135864185416296	-0.180626088782661	0.167989417989418
2	-3.5	-0.0112800505998212	-0.224499897790857	0.215279845285124
2	-3	-0.00726707846690833	-0.282155883907359	0.282201863597212
2	-2.5	-0.0013319849575778	-0.358064591782476	0.379226697629288
2	-2	0.00660578032157317	-0.455350264322139	0.523109243697479
2	-1.5	0.0164772984699386	-0.565160536504934	0.737810021232481
2	-1	0.0280536517077592	-0.631704394636702	1.04181600955795
2	-0.5	0.0409134166023082	-0.499353637060425	1.38573237216753
2	0.5	0.0674580713908103	0.397289237079191	1.40662105842573
2	1	0.0788637065726754	0.53901533105236	1.08200734394125
2	1.5	0.0872168565621534	0.486923321786162	0.794307372873046
2	2	0.0914224208434476	0.394914151131526	0.591880341880342
2	2.5	0.0910687337425138	0.316634304825227	0.455758155823957
2	3	0.0865970383392962	0.25884125256801	0.362117414748994
2	3.5	0.0791150797746989	0.21683671274192	0.294851314675243
2	4	0.0699809630271114	0.185333408603433	0.244417862838916
2	4.5	0.0604093698920934	0.160625088128082	0.205293675466269
2	5	0.0512624420136766	0.140467712250956	0.174196174196174

2.5	-5	0.000309472082387329	-0.119563397876548	0.110575711661311
2.5	-4.5	0.00428717963239156	-0.144184833790504	0.135355578024941
2.5	-4	0.0107974023492687	-0.175693568109337	0.168643137622409
2.5	-3.5	0.0211411981304285	-0.216386330148627	0.214222559050145
2.5	-3	0.0374316442573214	-0.269303037915461	0.277986957056724
2.5	-2.5	0.0633270948068348	-0.337826425132663	0.369230769230769
2.5	-2	0.105358459070831	-0.423033302555712	0.502212393729422
2.5	-1.5	0.174406711902261	-0.513350494770448	0.695652173913044
2.5	-1	0.282334473702715	-0.555540593652422	0.959490716180372
2.5	-0.5	0.415602594062234	-0.422801212574734	1.24420141262246
2.5	0	0.490603334745179	-0.0410653375148935	1.38528138528139
2.5	0.5	0.435160858592087	0.342944503438666	1.25916074294886
2.5	1	0.319885299114857	0.482256152280767	0.988373039852231
2.5	1.5	0.227003728053375	0.450205113902336	0.736507936507937
2.5	2	0.169055686208541	0.372457317022619	0.552420391541141
2.5	2.5	0.133725099310603	0.300883056238083	0.425830065359477
2.5	3	0.11027786786082	0.245712583544871	0.338036157390996
2.5	3.5	0.0928289439975999	0.204798047709329	0.275106385993416
2.5	4	0.0786487155080503	0.174100930515331	0.22826634552662
2.5	4.5	0.0666012153225129	0.150345393522356	0.192209336901576
2.5	5	0.0562393434054242	0.131322712271531	0.163702132729656

3	-5	0.0132979014457023	-0.115023101812843	0.109649122807018
3	-4.5	0.020616415266941	-0.137104762081223	0.133068403993614
3	-4	0.0315865566065713	-0.164786041928203	0.163999742947111
3	-3.5	0.0480973292118221	-0.19959338289539	0.205512018442331
3	-3	0.0732231537137836	-0.243174629610784	0.262145748987854
3	-2.5	0.112063098652132	-0.296416760889183	0.340508575802694
3	-2	0.172814457359694	-0.356447225429814	0.44944203083738
3	-1.5	0.266562262855159	-0.40842871999357	0.597539264944416
3	-1	0.399252960587426	-0.410125556347401	0.781746031746032
3	-0.5	0.543804319911436	-0.290587145962568	0.960628428960276
3	0	0.616666400647399	-0.0324854090530802	1.04323953328758
3	0.5	0.558400573528711	0.227225655836556	0.971552493940554
3	1	0.427373348840288	0.351421064118288	0.802910052910053
3	1.5	0.306194980405235	0.356935840858071	0.627655684867166
3	2	0.221263712998853	0.313970488161104	0.486772486772487
3	2.5	0.166294994640032	0.26386828713265	0.383066805085154
3	3	0.130236955320736	0.220579597902539	0.307915057915058
3	3.5	0.105242761436767	0.186235579320828	0.252636320661447
3	4	0.0867668515785108	0.159442832579558	0.2109166130008
3	4.5	0.0723596715910087	0.138301988641391	0.178572554428769
3	5	0.0607199957530203	0.121252398537365	0.152894491129785

3.5	-5	0.0240717389508934	-0.10796898404796	0.106454098578451
3.5	-4.5	0.0337149717403145	-0.126809019780379	0.127789240831643
3.5	-4	0.0475375749736009	-0.14968469122741	0.155352729938365
3.5	-3.5	0.0675068166251156	-0.177239991463497	0.191346271705822
3.5	-3	0.0966131614952842	-0.20968839622468	0.238750722099719
3.5	-2.5	0.139280615852215	-0.245777088568874	0.301337613697164
3.5	-2	0.201369204984118	-0.280358679051412	0.382987693324624
3.5	-1.5	0.288101858025889	-0.299856742219175	0.484976905419095
3.5	-1	0.396213756019707	-0.278006501029557	0.599188031312384
3.5	-0.5	0.499339135264206	-0.185031619185801	0.698812738416699
3.5	0	0.547277256682308	-0.0260477144796203	0.742275424011275
3.5	0.5	0.510382286882298	0.134089085519949	0.706938566115173
3.5	1	0.41756168637055	0.230407359394758	0.614981436994977
3.5	1.5	0.318367520147568	0.257461075350436	0.507573047107931
3.5	2	0.238685324607972	0.244527447784084	0.411211434299336
3.5	2.5	0.18152177636187	0.217277444039732	0.333829928460801
3.5	3	0.141632594332671	0.188688326385535	0.274104411089441
3.5	3.5	0.113344250784217	0.163386771387489	0.228228502669317
3.5	4	0.0925643455107486	0.142240874759055	0.192596701351439
3.5	4.5	0.0767031180893916	0.124809300556135	0.16444678278367
3.5	5	0.0641948361820637	0.110364685094598	0.141811075760267

4	-5	0.0323886245780034	-0.0992549051943522	0.101580881113695
4	-4.5	0.043290427734854	-0.114601296164352	0.120428489942772
4	-4	0.058328823294838	-0.132475440408809	0.144159894159894
4	-3.5	0.0791622174692465	-0.152823859512074	0.174175395825914
4	-3	0.10805776965182	-0.174917454113335	0.212138188608777
4	-2.5	0.147854761562206	-0.196534011094363	0.25972052801022
4	-2	0.201309478653265	-0.212563896882193	0.317806267806268
4	-1.5	0.268877660968916	-0.213414535633075	0.384658015938235
4	-1	0.344050222737929	-0.185509108618229	0.452942801878972
4	-0.5	0.40860748602843	-0.118757692404009	0.507730491204697
4	0	0.437273359979686	-0.0211505293829259	0.530952380952381
4	0.5	0.417077148532547	0.0772938852916058	0.513879164313947
4	1	0.360475777665999	0.146479375781153	0.464928106719151
4	1.5	0.292291132600958	0.178193395356054	0.401888857616412
4	2	0.230399278538936	0.182190089416992	0.339473684210526
4	2.5	0.181110185125037	0.171644526867015	0.284877848575328
4	3	0.143923564260621	0.155737154492824	0.239787798408488
4	3.5	0.116177834820963	0.13920732820494	0.203349142047812
4	4	0.095232321332907	0.12398685696958	0.173982683982684
4	4.5	0.0790774731893151	0.110612132949871	0.150159445074699
4	5	0.066328325786064	0.0990398640773229	0.130631732863836

4.5	-5	0.0382840509142814	-0.0897106549776493	0.0956090280612866
4.5	-4.5	0.0495153716216886	-0.101700798660846	0.111855619558139
4.5	-4	0.0644433333356582	-0.114987431234089	0.131755821455446
4.5	-3.5	0.0842581312287767	-0.129113893410409	0.15609308390451
4.5	-3	0.110371941803356	-0.142972851459645	0.185626527930005
4.5	-2.5	0.144168136143063	-0.154325836573638	0.220810286568105
4.5	-2	0.18627993892792	-0.159240565707611	0.26121534279976
4.5	-1.5	0.235106081490138	-0.151930159674819	0.304583590182947
4.5	-1	0.284777711909646	-0.126150176987117	0.345818752742221
4.5	-0.5	0.324390948743998	-0.0792876828371358	0.377041260897636
4.5	0	0.341693331489906	-0.0173745675341421	0.3902172523626
4.5	0.5	0.330972651807494	0.045155128294514	0.38176753199564
4.5	1	0.297579165240622	0.0938146777261903	0.355055205883935
4.5	1.5	0.253442793421969	0.122421276668177	0.31791925243582
4.5	2	0.209217813031078	0.133359148927851	0.278083687284656
4.5	2.5	0.170618730677339	0.132596782481754	0.240540936920608
4.5	3	0.139195260947332	0.125633213808125	0.207501858930288
4.5	3.5	0.114357574319343	0.116134529205157	0.179401967346587
4.5	4	0.0948404052520095	0.106120293043033	0.155838108084249
4.5	4.5	0.0793973821135763	0.0965403747431746	0.136133493836628
4.5	5	0.0670243083196828	0.087757789712101	0.119604290255579

5	-5	0.0420069111314165	-0.0800295055606319	0.089047619047619
5	-4.5	0.0528778146229471	-0.0890549402957435	0.10279570652761
5	-4	0.0668150191869865	-0.0984977077718574	0.119174243723909
5	-3.5	0.0845601467565398	-0.107752489704168	0.138553303057259
5	-3	0.106833274803433	-0.115716199373712	0.161164274322169
5	-2.5	0.134062485703377	-0.120575191649165	0.186888879294216
5	-2	0.165859881104085	-0.119690376782547	0.214925373134328
5	-1.5	0.200246086188258	-0.109877626038242	0.243383633047292
5	-1	0.232969799214695	-0.0884936670198738	0.269047619047619
5	-0.5	0.257806765983867	-0.055365835062621	0.287760334033433
5	0	0.268697196455405	-0.0144253456075278	0.295757575757576
5	0.5	0.262985131274498	0.0269754822410922	0.291445799397021
5	1	0.243068133654718	0.0614482242048002	0.276266416510319
5	1.5	0.214773798843312	0.0849580353844979	0.253845281684974
5	2	0.184142704106197	0.0975197491036891	0.228226675285499
5	2.5	0.15530610639131	0.101584392820676	0.202547823332553
5	3	0.130192786035865	0.100132317408798	0.178657616892911
5	3.5	0.109205730037272	0.0956093178239593	0.157353068221842
5	4	0.0919859420286288	0.0896638004432172	0.138779095300834
5	4.5	0.0779199499441216	0.0832725342227664	0.122754538716389
5	5	0.0663925903516896	0.07695710881299	0.108974358974359



-2 2
-3 -3
2 0
----

=== bumps

----
0 	17
1 	24
2 	0
3 	25
4 	41
5 	34
6 	40
7 	33
8 	19
9 	41
10 	63
11 	41
12 	33
13 	50
14 	57
15 	60
16 	40
17 	45
18 	69
19 	59
20 	80
21 	70
22 	68
23 	89
24 	81
25 	90
26 	102
27 	83
28 	133
29 	112
30 	136
31 	141
32 	165
33 	178
34 	181
35 	211
36 	265
37 	295
38 	293
39 	353
40 	397
41 	416
42 	443
43 	525
44 	573
45 	591
46 	665
47 	682
48 	705
49 	686
50 	696
51 	669
52 	620
53 	576
54 	520
55 	491
56 	439
57 	389
58 	385
59 	350
60 	310
61 	305
62 	282
63 	262
64 	286
65 	269
66 	236
67 	210
68 	211
69 	168
70 	165
71 	168
72 	170
73 	161
74 	134
75 	156
76 	173
77 	170
78 	159
79 	154
80 	144
81 	165
82 	194
83 	184
84 	167
85 	212
86 	205
87 	214
88 	207
89 	239
90 	216
91 	257
92 	223
93 	227
94 	215
95 	203
96 	198
97 	169
98 	167
99 	152
100 	138
101 	114
102 	122
103 	126
104 	117
105 	106
106 	98
107 	92
108 	68
109 	81
110 	44
111 	80
112 	64
113 	46
114 	27
115 	64
116 	60
117 	45
118 	36
119 	30
120 	52
121 	30
122 	45
123 	37
124 	52
125 	36
126 	34
127 	8
128 	29
129 	35
130 	28
131 	7
132 	5
133 	17
134 	28
135 	29
136 	12
137 	3
138 	26
139 	17
----

=== callcenter

----
0 	 43
1 	 81
2 	 44
3 	 19
4 	 17
5 	 67
6 	 61
7 	 49
8 	 43
9 	 22
10 	 28
11 	 25
12 	 58
13 	 62
14 	 70
15 	 36
16 	 33
17 	 32
18 	 30
19 	 83
20 	 87
21 	 30
22 	 32
23 	 52
24 	 188
25 	 128
26 	 70
27 	 46
28 	 74
29 	 50
30 	 41
31 	 75
32 	 76
33 	 129
34 	 69
35 	 95
36 	 66
37 	 63
38 	 25
39 	 46
40 	 70
41 	 39
42 	 54
43 	 38
44 	 31
45 	 21
46 	 30
47 	 46
48 	 73
49 	 45
50 	 32
51 	 28
52 	 22
53 	 27
54 	 29
55 	 37
56 	 27
57 	 31
58 	 23
59 	 19
60 	 15
61 	 44
62 	 40
63 	 29
64 	 32
65 	 23
66 	 14
67 	 13
68 	 36
69 	 25
70 	 31
71 	 19
72 	 18
73 	 13
74 	 19
75 	 25
76 	 20
77 	 31
78 	 38
79 	 29
80 	 16
81 	 11
82 	 17
83 	 21
84 	 20
85 	 14
86 	 13
87 	 9
88 	 9
89 	 14
90 	 19
91 	 27
92 	 17
93 	 12
94 	 9
95 	 13
96 	 13
97 	 24
98 	 17
99 	 22
100 	 19
101 	 13
102 	 11
103 	 40
104 	 104
105 	 46
106 	 44
107 	 28
108 	 20
109 	 22
110 	 39
111 	 67
112 	 68
113 	 59
114 	 49
115 	 39
116 	 40
117 	 92
118 	 70
119 	 66
120 	 88
121 	 86
122 	 60
123 	 62
124 	 92
125 	 85
126 	 123
127 	 177
128 	 141
129 	 103
130 	 92
131 	 97
132 	 95
133 	 102
134 	 124
135 	 103
136 	 96
137 	 89
138 	 100
139 	 122
140 	 128
141 	 127
142 	 123
143 	 116
144 	 118
145 	 119
146 	 116
147 	 118
148 	 132
149 	 111
150 	 134
151 	 100
152 	 118
153 	 107
154 	 117
155 	 170
156 	 103
157 	 98
158 	 80
159 	 103
160 	 120
161 	 101
162 	 109
163 	 111
164 	 103
165 	 83
166 	 118
167 	 111
168 	 114
169 	 92
170 	 95
171 	 96
172 	 85
173 	 124
174 	 110
175 	 125
176 	 96
177 	 106
178 	 89
179 	 88
180 	 88
181 	 122
182 	 107
183 	 125
184 	 110
185 	 103
186 	 84
187 	 93
188 	 115
189 	 96
190 	 111
191 	 88
192 	 104
193 	 98
194 	 102
195 	 163
196 	 129
197 	 158
198 	 128
199 	 123
200 	 103
201 	 85
202 	 119
203 	 156
204 	 138
205 	 114
206 	 107
207 	 45
208 	 21
209 	 77
210 	 111
211 	 91
212 	 90
213 	 88
214 	 78
215 	 80
216 	 143
217 	 151
218 	 159
219 	 122
220 	 117
221 	 102
222 	 90
223 	 132
224 	 118
225 	 125
226 	 105
227 	 102
228 	 81
229 	 101
230 	 129
231 	 112
232 	 119
233 	 117
234 	 103
235 	 80
236 	 89
237 	 123
238 	 82
239 	 107
240 	 99
241 	 106
242 	 96
243 	 91
244 	 129
245 	 106
246 	 160
247 	 107
248 	 100
249 	 82
250 	 90
251 	 150
252 	 132
253 	 137
254 	 88
255 	 90
256 	 125
257 	 113
258 	 104
259 	 114
260 	 148
261 	 129
262 	 113
263 	 134
264 	 148
265 	 144
266 	 144
267 	 167
268 	 147
269 	 124
270 	 166
271 	 156
272 	 425
273 	 177
274 	 139
275 	 121
276 	 104
277 	 120
278 	 118
279 	 129
280 	 128
281 	 147
282 	 135
283 	 122
284 	 136
285 	 106
286 	 159
287 	 154
288 	 119
289 	 115
290 	 119
291 	 131
292 	 143
293 	 126
294 	 110
295 	 132
296 	 97
297 	 120
298 	 122
299 	 104
300 	 142
301 	 132
302 	 123
303 	 130
304 	 122
305 	 133
306 	 128
307 	 152
308 	 143
309 	 147
310 	 158
311 	 178
312 	 209
313 	 258
314 	 145
315 	 171
316 	 203
317 	 107
318 	 123
319 	 116
320 	 124
321 	 135
322 	 148
323 	 130
324 	 115
325 	 104
326 	 117
327 	 192
328 	 142
329 	 93
330 	 96
331 	 66
332 	 68
333 	 71
334 	 77
335 	 104
336 	 83
337 	 81
338 	 69
339 	 60
340 	 64
341 	 70
342 	 99
343 	 61
344 	 77
345 	 65
346 	 51
347 	 56
348 	 57
349 	 55
350 	 82
351 	 62
352 	 36
353 	 46
354 	 52
355 	 47
356 	 61
357 	 62
358 	 55
359 	 41
360 	 21
361 	 18
362 	 46
363 	 40
364 	 38
365 	 33
366 	 28
367 	 29
368 	 59
369 	 74
370 	 53
371 	 75
372 	 71
373 	 23
374 	 12
375 	 12
376 	 18
377 	 24
378 	 28
379 	 39
380 	 46
381 	 23
382 	 12
383 	 44
384 	 42
385 	 40
386 	 66
387 	 101
388 	 75
389 	 35
390 	 39
391 	 38
392 	 43
393 	 50
394 	 34
395 	 21
396 	 157
397 	 179
398 	 77
399 	 55
400 	 68
401 	 58
402 	 26
403 	 20
404 	 39
405 	 64
406 	 48
407 	 34
408 	 30
409 	 17
410 	 16
411 	 29
412 	 34
413 	 22
414 	 22
415 	 27
416 	 16
417 	 12
418 	 24
419 	 24
420 	 40
421 	 21
422 	 17
423 	 11
424 	 10
425 	 23
426 	 23
427 	 26
428 	 29
429 	 25
430 	 8
431 	 8
432 	 12
433 	 29
434 	 24
435 	 13
436 	 11
437 	 9
438 	 9
439 	 11
440 	 12
441 	 18
442 	 15
443 	 24
444 	 10
445 	 9
446 	 13
447 	 13
448 	 25
449 	 14
450 	 14
----

=== cloud

----
1.395 -0.2 0.528571
1.435 -0.075 0.414286
1.255 -0.09 0.985714
1.465 -0.005 0.628571
1.375 -0.005 1.07143
1.415 -0.15 0.8
1.425 0 1.12857
1.47 -0.01 1.11429
1.425 -0.175 0.214286
1.35 -0.1 1.21429
1.265 -0.05 0.871429
1.435 -0.05 0.928571
1.62 -0.02 0.971429
1.265 -0.125 1.1
1.3 -0.16 1.12857
1.5 -0.15 1.1
1.245 0 1
1.4 -0.175 0.757143
1.405 -0.07 1.17143
1.43 -0.035 0.885714
1.35 -0.125 1.04286
1.44 -0.1 0.857143
1.365 -0.18 0.571429
1.385 -0.005 1.11429
1.49 -0.11 0.614286
1.55 0.005 0.885714
1.52 0.09 0.885714
1.275 -0.085 0.742857
1.22 -0.225 0.514286
1.26 -0.14 0.585714
1.46 0.015 0.771429
1.3 -0.32 1.27143
1.45 0.05 0.742857
1.33 0.1 1.37143
1.3 -0.245 0.971429
1.325 -0.275 0.528571
1.305 -0.11 0.714286
1.19 -0.14 0.642857
1.06 -0.125 0.671429
1.355 -0.125 0.6
1.265 -0.03 1.38571
1.335 -0.145 1.08571
1.14 -0.145 0.642857
1.21 -0.195 0.771429
1.325 0.04 0.771429
1.375 -0.11 0.942857
1.22 -0.195 0.914286
1.43 0.155 1.08571
1.195 -0.255 0.814286
1.13 -0.28 0.571429
1.22 -0.085 0.885714
1.175 -0.195 0.942857
1.255 -0.11 0.742857
1.265 -0.1 0.985714
1.13 -0.17 0.471429
1.165 -0.24 0.428571
1.235 -0.07 0.728571
1.36 -0.05 1.21429
1.305 0.02 1.31429
1.275 -0.035 0.8
1.325 -0.07 0.971429
1.42 0.12 0.9
1.425 -0.2 0.728571
1.315 -0.145 0.5
1.265 -0.025 0.628571
1.065 -0.04 0.857143
1.245 -0.085 0.614286
1.24 -0.06 0.814286
1.425 0.16 1.41429
1.31 -0.17 0.785714
1.45 -0.08 1.21429
1.34 -0.075 1.08571
1.395 -0.125 0.7
1.185 -0.27 0.614286
1.32 -0.18 0.657143
1.23 -0.125 0.742857
1.275 -0.125 0.771429
0.955 -0.095 1.11429
1.425 -0.06 0.942857
1.455 -0.04 1.37143
1.36 0.13 1.2
1.36 0.005 1.02857
1.4 -0.175 0.942857
1.24 -0.065 0.757143
1.135 -0.015 0.885714
1.23 -0.105 0.885714
1.41 -0.185 0.814286
1.465 -0.09 1.02857
1.415 -0.09 0.771429
1.39 -0.125 0.742857
1.325 0 0.728571
1.35 -0.12 0.814286
1.31 -0.145 0.871429
1.44 -0.025 0.6
1.56 0.05 1.57143
1.27 -0.07 0.828571
1.29 -0.145 0.542857
1.445 -0.15 1.18571
1.46 -0.105 1.08571
1.33 -0.1 1.45714
1.155 0.005 1.08571
1.35 -0.1 0.585714
1.1 -0.135 0.6
1.33 -0.125 0.585714
1.255 -0.53 0.442857
1.185 -0.24 0.728571
1.12 -0.005 1.18571
1.335 -0.1 0.771429
1.15 -0.145 0.6
1.275 -0.255 0.714286
1.03 -0.075 0.528571
1.43 0.01 1.11429
1.13 -0.28 0.528571
1.305 0.085 1.25714
1.355 0.03 1.15714
1.275 -0.085 0.771429
1.295 -0.075 1.01429
1.4 0.03 1.32857
1.275 -0.11 1.11429
1.345 -0.23 0.0571429
1.355 -0.075 0.885714
1.44 -0.04 0.671429
1.355 -0.075 0.771429
1.42 0.1 1.35714
1.185 -0.16 1.05714
1.23 -0.065 0.6
1.42 0.03 1.08571
1.275 -0.015 1.15714
1.265 0.02 1.01429
1.46 0.03 1.15714
1.315 -0.16 1.05714
1.24 -0.22 1.35714
1.315 -0.05 1.6
1.195 -0.125 1.21429
1.305 -0.22 1.32857
1.325 0.03 1.01429
1.175 -0.11 0.814286
1.22 -0.015 1.28571
1.295 -0.195 0.885714
1.305 -0.35 1.11429
1.43 -0.1 1.92857
1.24 -0.05 1.21429
1.355 -0.11 0.885714
1.305 -0.145 1.55714
1.46 0.02 1.08571
1.195 -0.16 0.914286
1.255 -0.065 0.571429
1.185 -0.16 0.571429
1.03 -0.18 0.742857
1.275 -0.16 1.05714
1.305 -0.23 1.08571
1.185 -0.195 0.6
1.195 -0.145 0.914286
1.22 -0.015 1.18571
1.13 -0.11 0.885714
1.24 -0.205 0.771429
1.265 -0.135 0.914286
1.265 -0.24 0.671429
1.44 0.02 1.42857
1.305 -0.11 0.571429
1.335 0.03 1.55714
1.52 0.04 0.985714
1.4 0.04 1.15714
1.305 -0.23 0.742857
1.305 -0.04 0.814286
1.51 0.11 1.21429
1.24 0.235 1.35714
1.23 -0.065 0.885714
1.365 0.01 1.62857
1.295 -0.05 0.885714
1.24 -0.1 1.32857
1.365 -0.145 0.471429
1.365 -0.16 1.62857
1.275 -0.065 1.15714
1.385 -0.075 1.38571
1.43 0.04 0.914286
1.375 0.065 0.771429
1.315 0.04 1.21429
1.315 -0.265 1.21429
1.365 -0.17 1.32857
1.095 -0.205 0.842857
1.265 -0.075 0.742857
1.255 -0.18 1.05714
1.41 0.065 1.28571
1.5 -0.05 1.62857
1.355 -0.015 1.35714
1.295 -0.065 1.38571
1.315 -0.135 0.885714
1.355 -0.015 1.55714
1.51 -0.015 0.842857
1.355 0.055 1.15714
1.31 -0.01 1.2
1.335 -0.04 0.742857
1.4 -0.03 1.52857
1.335 -0.075 1.35714
1.15 -0.015 1.25714
1.345 -0.11 0.714286
1.285 -0.1 0.771429
1.315 -0.015 1.25714
1.295 -0.065 1.08571
1.335 -0.16 0.814286
1.315 0.055 1.77143
1.305 -0.11 1.01429
1.42 -0.135 0.842857
1.285 -0.11 1.01429
1.375 -0.24 0.985714
1.265 -0.085 0.6
1.24 -0.11 1.18571
1.24 -0.085 0.814286
1.275 -0.005 1.05714
1.305 -0.16 0.885714
1.375 -0.03 1.35714
1.375 -0.03 0.842857
1.175 -0.28 0.571429
1.44 -0.04 0.842857
1.325 -0.05 1.05714
1.265 -0.11 0.942857
1.265 0.01 0.942857
1.355 -0.145 0.885714
1.355 0.065 0.942857
1.195 -0.03 1.45714
1.47 -0.3 0.942857
1.295 -0.28 0.671429
1.355 -0.065 1.6
1.4 -0.145 1.6
1.15 -0.145 0.942857
1.105 -0.29 0.528571
1.305 -0.3 1.08571
1.295 -0.28 0.814286
1.195 -0.145 1.08571
1.295 -0.085 1.38571
1.21 -0.16 1.38571
1.335 -0.17 0.842857
1.22 -0.17 1.42857
1.255 -0.18 1.11429
1.195 -0.22 1.01429
1.195 -0.18 1.08571
1.335 -0.18 0.885714
1.41 -0.16 1.15714
1.275 -0.04 1.38571
1.21 -0.325 0.814286
1.295 -0.23 0.942857
1.335 -0.135 1.11429
1.44 0.11 1.62857
1.345 -0.1 1.77143
1.4 -0.11 1.05714
1.325 -0.075 0.814286
1.13 -0.25 0.314286
1.085 -0.18 0.4
0.99 -0.205 0.342857
1.08 -0.105 0.757143
1.025 -0.09 0.6
1.1 -0.1 0.157143
1.025 -0.175 0.2
1.12 0.01 0.685714
1.14 -0.05 0.657143
1.18 -0.06 0.814286
1.13 -0.075 0.214286
1.05 -0.22 0.2
1.225 0 0.471429
0.95 -0.25 0.414286
1 -0.175 0.614286
1.03 -0.21 0.314286
1.06 -0.13 0.0857143
1.2 -0.08 0.8
0.88 -0.22 0.185714
1.13 0 0.728571
1.065 -0.125 0.2
1.15 -0.02 1.04286
1.1 -0.105 0.157143
1.38 0.09 0.842857
1.125 -0.04 0.8
1.055 -0.09 0.257143
1.205 -0.125 0.457143
1.23 -0.07 0.571429
1.275 -0.02 0.485714
1 -0.2 0.3
0.975 -0.18 0.657143
1.03 -0.105 0.228571
1.205 -0.015 0.871429
1.08 -0.09 0.0428571
0.99 -0.185 0.285714
1.085 -0.395 0.385714
1.235 0.08 0.714286
1.025 -0.285 0.142857
1.05 -0.1 0.471429
1.04 -0.18 0.471429
1.13 -0.135 0.571429
1.13 -0.065 0.714286
0.995 -0.1 0.228571
0.915 -0.255 0.471429
1.06 -0.145 0.285714
0.915 -0.04 0.114286
1.05 -0.24 0.357143
0.95 -0.135 0.428571
1.06 -0.065 0.742857
0.995 -0.145 0.714286
1.12 -0.085 0.328571
0.94 -0.065 0.671429
0.95 -0.135 0.714286
0.97 -0.325 0.357143
0.985 -0.11 0.357143
1.03 -0.18 0.157143
0.94 -0.015 0.471429
1.14 -0.17 0.357143
1.165 0.02 0.671429
1.265 -0.04 0.357143
1.195 -0.125 0.228571
1.22 -0.04 0.571429
1 -0.15 0.757143
1.285 -0.05 0.528571
1.23 0.02 1.05714
1.095 -0.085 0.428571
1.03 -0.215 0.214286
1.16 0 0.771429
1.095 -0.05 0.228571
1.095 -0.155 0.3
0.99 -0.18 0.128571
1.08 -0.125 0.528571
1.095 -0.13 0.6
1.095 -0.18 0.371429
1.095 0.01 0.5
1.05 -0.07 0.5
1.06 0.01 0.4
1.005 -0.095 0.442857
1.19 -0.14 0.457143
1.07 -0.19 0.471429
1.18 -0.29 0.185714
1.075 -0.2 0.271429
1.125 -0.13 0.7
1.245 -0.5 0.514286
0.97 -0.195 0.685714
1.185 -0.325 0.342857
0.88 -0.27 0.257143
0.975 -0.22 0.571429
1.085 -0.09 0.5
1.075 -0.15 0.371429
0.96 -0.1 0.914286
1.14 -0.07 0.471429
1.035 -0.225 0.285714
0.945 -0.285 0.257143
1.01 -0.295 0.557143
1.105 -0.285 0.314286
1.135 -0.19 0.542857
1.14 -0.095 0.557143
1.215 -0.275 1.05714
1.11 -0.28 0.585714
1.055 -0.16 0.314286
1.01 -0.245 0.857143
1.04 -0.115 0.342857
1 -0.22 0.557143
1.14 -0.005 0.471429
1.035 -0.15 0.357143
1.225 -0.01 0.742857
1.19 -0.185 0.714286
1.145 -0.05 0.657143
1.135 -0.25 0.371429
1.16 -0.205 0.414286
1.25 0.05 1.04286
1.035 -0.085 0.485714
1.035 -0.205 0.1
1.05 -0.12 0.657143
1 -0.25 0.2
1.1 -0.155 0.371429
1.085 -0.325 0.457143
0.89 -0.19 0.3
0.99 -0.485 0.471429
1 -0.315 0.2
1.185 -0.145 0.357143
0.89 -0.455 0.457143
1.085 -0.35 0.428571
1.19 -0.175 0.485714
1.07 -0.255 0.357143
0.95 -0.11 0.357143
1.16 -0.125 0.914286
1.005 -0.33 0.314286
1.05 -0.24 0.2
1.045 -0.245 0.585714
1 -0.145 0.785714
1.01 -0.28 0.157143
0.995 -0.19 0.0857143
1.05 -0.095 0.685714
1.07 -0.115 0.428571
1.025 -0.115 0.942857
0.955 -0.565 0.3
1.105 -0.25 0.442857
1.01 -0.2 0.471429
1.125 -0.2 0.514286
1.065 -0.255 0.371429
1.11 -0.2 0.685714
1.13 -0.115 0.485714
0.93 -0.285 0.6
0.975 -0.04 0.614286
1.05 -0.145 0.642857
1.02 -0.15 0.542857
1.04 -0.085 0.742857
1.165 -0.085 0.671429
0.94 -0.065 0.528571
1.095 0.055 0.4
0.995 -0.1 0.571429
1.005 -0.085 0.6
1.12 0.01 1.08571
1.095 -0.125 0.328571
1.05 -0.1 0.328571
0.895 -0.17 0.642857
1.165 0.085 0.742857
1.13 0.035 1.52857
1.085 -0.1 0.471429
1.195 -0.24 0.471429
1.14 -0.1 0.4
1.15 0.085 1.18571
1.185 0.02 0.671429
1.105 -0.145 0.471429
1.04 0.01 0.942857
1.175 0.02 0.6
1.175 0.04 0.257143
1.05 0.01 0.671429
0.95 -0.18 0.742857
1.165 -0.17 0.6
1.185 0.165 0.985714
1.095 -0.05 0.985714
1.04 -0.17 0.642857
1.085 -0.05 0.814286
1.085 -0.1 0.771429
1.13 0.065 0.428571
1.005 -0.315 0.642857
1.015 -0.335 0.185714
1.175 -0.17 1.18571
1.14 -0.03 0.257143
1.005 -0.22 0.4
0.87 0.01 0.185714
1.21 0.065 0.528571
1.165 0.04 0.428571
0.895 -0.455 0.714286
1.15 -0.085 0.528571
1.14 0.1 0.4
0.96 -0.04 0.571429
1.13 0.065 0.885714
1.015 -0.23 0.471429
0.995 -0.135 0.528571
1.12 0.1 0.814286
1.06 0.055 1.01429
1.195 -0.05 0.328571
1.05 0.02 0.6
0.915 -0.205 0.571429
1.12 -0.03 0.842857
0.985 -0.03 0.528571
1.185 -0.1 0.328571
1.06 -0.085 0.328571
1.13 -0.11 0.842857
0.995 -0.195 0.357143
0.985 -0.265 0.528571
0.95 -0.16 0.471429
1.14 -0.075 0.571429
1.005 -0.11 0.328571
1.21 -0.005 0.642857
1.005 -0.005 0.571429
1.105 -0.04 0.571429
1.04 -0.03 0.428571
1.015 -0.16 0.642857
1.13 -0.16 0.357143
1.04 -0.05 0.571429
1.05 -0.04 0.5
1.03 -0.085 0.0571429
1.105 -0.11 0.942857
1.03 0.01 1.11429
1.005 -0.03 0.528571
1.04 -0.16 1.32857
1.12 -0.03 0.357143
1.195 -0.075 0.742857
1.12 -0.05 0.528571
1.13 -0.085 0.4
1.005 -0.17 0.428571
1.15 0.165 0.942857
1.085 -0.24 0.642857
1.03 -0.005 0.6
1.03 0.04 1.82857
1.03 -0.135 0.5
1.14 -0.05 0.942857
1.295 -0.065 0.6
0.95 -0.205 0.885714
0.995 0.065 0.985714
1.04 0.075 0.5
1.075 -0.125 0.642857
0.895 -0.16 0.328571
1.095 -0.075 0.228571
1.04 -0.03 0.571429
1.22 -0.085 1.08571
1.075 -0.085 0.528571
1.04 -0.135 0.6
0.97 -0.015 0.5
1.075 -0.17 0.285714
1.175 -0.22 0.428571
1.015 -0.23 0.157143
1.06 -0.065 0.285714
0.995 -0.065 0.4
1.185 -0.015 0.257143
1.13 -0.24 0.742857
0.985 -0.03 0.528571
1.14 -0.015 0.642857
1.24 -0.125 0.771429
1.075 -0.015 0.885714
1.15 0.02 0.428571
1.015 -0.065 0.528571
0.985 -0.255 0.471429
1.175 -0.05 0.185714
1.03 -0.05 0.914286
----

=== composition

----
0 	 0.18369 	 0.150406 	 0.057305 	 0.32185
1 	 0.18212 	 0.150092 	 0.057462 	 0.32342
2 	 0.18526 	 0.15072 	 0.057148 	 0.32028
3 	 0.17898 	 0.150406 	 0.058404 	 0.32656
4 	 0.189986 	 0.151071 	 0.0600713 	 0.31957
5 	 0.189986 	 0.150649 	 0.0585221 	 0.325929
6 	 0.182091 	 0.154818 	 0.0573235 	 0.328645
7 	 0.182091 	 0.154161 	 0.0570155 	 0.329873
8 	 0.182091 	 0.153136 	 0.0548586 	 0.332746
9 	 0.182091 	 0.150625 	 0.0532622 	 0.334416
10 	 0.182091 	 0.147224 	 0.052379 	 0.335751
11 	 0.188407 	 0.142656 	 0.0516282 	 0.336818
12 	 0.191566 	 0.139284 	 0.0511679 	 0.33712
13 	 0.191566 	 0.138524 	 0.0505986 	 0.337283
14 	 0.191566 	 0.138068 	 0.0512994 	 0.337415
15 	 0.20104 	 0.1359 	 0.0521319 	 0.337201
16 	 0.20104 	 0.136494 	 0.0523655 	 0.337663
17 	 0.199461 	 0.139377 	 0.0528013 	 0.336454
18 	 0.194724 	 0.141422 	 0.0540005 	 0.333594
19 	 0.191566 	 0.14265 	 0.0554935 	 0.329722
20 	 0.191566 	 0.142312 	 0.0557444 	 0.326943
21 	 0.191566 	 0.142362 	 0.0544413 	 0.325982
22 	 0.191566 	 0.139234 	 0.0542815 	 0.32553
23 	 0.191566 	 0.132809 	 0.0582197 	 0.323907
24 	 0.191566 	 0.13085 	 0.0620407 	 0.323555
25 	 0.20104 	 0.133464 	 0.0624461 	 0.327694
26 	 0.202619 	 0.136927 	 0.0637385 	 0.333531
27 	 0.210515 	 0.137741 	 0.0647776 	 0.341123
28 	 0.212094 	 0.146442 	 0.0650096 	 0.345855
29 	 0.215253 	 0.155621 	 0.0632484 	 0.351536
30 	 0.218411 	 0.160327 	 0.0615779 	 0.35829
31 	 0.21999 	 0.159993 	 0.0611053 	 0.366535
32 	 0.21999 	 0.160425 	 0.0614143 	 0.374081
33 	 0.21999 	 0.164474 	 0.0614401 	 0.381064
34 	 0.21999 	 0.170061 	 0.0609882 	 0.388861
35 	 0.219753 	 0.168992 	 0.062973 	 0.396045
36 	 0.220937 	 0.170245 	 0.0641863 	 0.402743
37 	 0.224095 	 0.174772 	 0.0602211 	 0.413503
38 	 0.226464 	 0.17245 	 0.0567728 	 0.42537
39 	 0.228833 	 0.171057 	 0.0548894 	 0.433778
40 	 0.231596 	 0.172116 	 0.0532883 	 0.441773
41 	 0.23436 	 0.174646 	 0.0510985 	 0.449902
42 	 0.235939 	 0.179955 	 0.0506582 	 0.454512
43 	 0.23436 	 0.18314 	 0.0520606 	 0.455831
44 	 0.231991 	 0.184419 	 0.0591742 	 0.450254
45 	 0.231201 	 0.188344 	 0.0659315 	 0.445475
46 	 0.228833 	 0.190068 	 0.0716752 	 0.442916
47 	 0.226859 	 0.199314 	 0.07182 	 0.443082
48 	 0.22449 	 0.203598 	 0.0709954 	 0.44479
49 	 0.219409 	 0.2068 	 0.069584 	 0.44837
50 	 0.217516 	 0.206827 	 0.0695096 	 0.451312
51 	 0.212121 	 0.209369 	 0.0695055 	 0.45422
52 	 0.208368 	 0.220147 	 0.0702126 	 0.457175
53 	 0.207136 	 0.219753 	 0.0715242 	 0.460173
54 	 0.204501 	 0.224727 	 0.0726389 	 0.464149
55 	 0.201657 	 0.226306 	 0.0738236 	 0.470174
56 	 0.199319 	 0.229465 	 0.0745935 	 0.477202
57 	 0.196653 	 0.231044 	 0.0754847 	 0.483142
58 	 0.195054 	 0.235781 	 0.0760056 	 0.487579
59 	 0.19262 	 0.23894 	 0.0772377 	 0.490179
60 	 0.190528 	 0.23894 	 0.0787591 	 0.491313
61 	 0.190115 	 0.23894 	 0.0797359 	 0.49001
62 	 0.189868 	 0.243677 	 0.0798559 	 0.48865
63 	 0.189087 	 0.248414 	 0.0804317 	 0.489457
64 	 0.187229 	 0.254731 	 0.077889 	 0.496421
65 	 0.186241 	 0.257889 	 0.0750884 	 0.504991
66 	 0.186911 	 0.257889 	 0.0789848 	 0.506005
67 	 0.18984 	 0.265785 	 0.0804019 	 0.510605
68 	 0.197282 	 0.268943 	 0.0782899 	 0.519023
69 	 0.201748 	 0.27368 	 0.0753107 	 0.528917
70 	 0.203163 	 0.279997 	 0.0720677 	 0.536516
71 	 0.201627 	 0.283155 	 0.0681688 	 0.537097
72 	 0.197564 	 0.281576 	 0.0711489 	 0.526321
73 	 0.191179 	 0.291051 	 0.074689 	 0.520226
74 	 0.186716 	 0.303684 	 0.0758027 	 0.519139
75 	 0.189091 	 0.31 	 0.0750915 	 0.520166
76 	 0.190516 	 0.314738 	 0.0752567 	 0.522804
77 	 0.191371 	 0.322634 	 0.0758118 	 0.529413
78 	 0.195043 	 0.32895 	 0.0784152 	 0.543229
79 	 0.205457 	 0.333687 	 0.0819904 	 0.554992
80 	 0.217496 	 0.333687 	 0.0869438 	 0.560534
81 	 0.227646 	 0.333687 	 0.0914779 	 0.565282
82 	 0.235125 	 0.335267 	 0.0948107 	 0.570346
83 	 0.240876 	 0.343162 	 0.0970517 	 0.577713
84 	 0.246854 	 0.343162 	 0.0990155 	 0.586053
85 	 0.253598 	 0.344741 	 0.100862 	 0.593752
86 	 0.262067 	 0.351058 	 0.101959 	 0.601175
87 	 0.270396 	 0.358954 	 0.106765 	 0.602849
88 	 0.277199 	 0.36527 	 0.108137 	 0.60943
89 	 0.28128 	 0.371587 	 0.110288 	 0.616539
90 	 0.282465 	 0.381061 	 0.117195 	 0.616721
91 	 0.283808 	 0.390536 	 0.123066 	 0.619076
92 	 0.286383 	 0.404748 	 0.127156 	 0.620012
93 	 0.290581 	 0.414223 	 0.128927 	 0.622656
94 	 0.291836 	 0.428435 	 0.128774 	 0.630455
95 	 0.293221 	 0.442648 	 0.127342 	 0.639697
96 	 0.296578 	 0.45686 	 0.125532 	 0.649459
97 	 0.299224 	 0.471072 	 0.125533 	 0.658056
98 	 0.30397 	 0.483705 	 0.126719 	 0.664302
99 	 0.305554 	 0.501076 	 0.129858 	 0.671197
100 	 0.3084 	 0.518446 	 0.13319 	 0.679298
101 	 0.310739 	 0.534237 	 0.138418 	 0.686379
102 	 0.312143 	 0.54687 	 0.145607 	 0.692172
103 	 0.312985 	 0.559503 	 0.151479 	 0.699335
104 	 0.312858 	 0.562662 	 0.157182 	 0.708852
105 	 0.313414 	 0.570557 	 0.161555 	 0.718363
106 	 0.313748 	 0.567399 	 0.160298 	 0.73292
107 	 0.315212 	 0.556345 	 0.158993 	 0.741721
108 	 0.312931 	 0.532658 	 0.161342 	 0.740996
109 	 0.306509 	 0.490022 	 0.161349 	 0.739275
110 	 0.298866 	 0.444227 	 0.154438 	 0.74428
111 	 0.281964 	 0.411065 	 0.153846 	 0.737294
112 	 0.272453 	 0.376324 	 0.155996 	 0.719955
113 	 0.268642 	 0.3479 	 0.158119 	 0.703162
114 	 0.269577 	 0.32895 	 0.158775 	 0.690282
115 	 0.255768 	 0.330529 	 0.161642 	 0.689453
116 	 0.246314 	 0.360533 	 0.163392 	 0.697237
117 	 0.246326 	 0.390536 	 0.166242 	 0.70607
118 	 0.248409 	 0.418961 	 0.183164 	 0.704453
119 	 0.255795 	 0.444227 	 0.19572 	 0.712946
120 	 0.261489 	 0.471072 	 0.206156 	 0.723534
121 	 0.266801 	 0.499496 	 0.213014 	 0.733108
122 	 0.271252 	 0.515288 	 0.215313 	 0.74516
123 	 0.27708 	 0.523183 	 0.213691 	 0.745354
124 	 0.264154 	 0.497917 	 0.222971 	 0.71993
125 	 0.256579 	 0.45686 	 0.227103 	 0.687453
126 	 0.24718 	 0.423698 	 0.227538 	 0.655054
127 	 0.243056 	 0.395274 	 0.223075 	 0.62724
128 	 0.244371 	 0.366849 	 0.221461 	 0.599555
129 	 0.248951 	 0.338425 	 0.21785 	 0.579129
130 	 0.252962 	 0.327371 	 0.216203 	 0.56942
131 	 0.259474 	 0.357374 	 0.21421 	 0.578394
132 	 0.26875 	 0.377903 	 0.206239 	 0.609574
133 	 0.278737 	 0.395274 	 0.216472 	 0.624791
134 	 0.290415 	 0.409486 	 0.225453 	 0.640692
135 	 0.305318 	 0.425277 	 0.231429 	 0.65578
136 	 0.323078 	 0.452122 	 0.233793 	 0.667379
137 	 0.342034 	 0.471072 	 0.23525 	 0.681141
138 	 0.356186 	 0.496338 	 0.234782 	 0.702195
139 	 0.374941 	 0.516867 	 0.23172 	 0.727563
140 	 0.403722 	 0.524762 	 0.228465 	 0.750702
141 	 0.435518 	 0.523183 	 0.224705 	 0.779069
142 	 0.455733 	 0.523183 	 0.234915 	 0.798791
143 	 0.485042 	 0.523183 	 0.241556 	 0.823854
144 	 0.511471 	 0.515288 	 0.250364 	 0.854532
145 	 0.534277 	 0.513709 	 0.265039 	 0.883072
146 	 0.55112 	 0.515288 	 0.283221 	 0.912503
147 	 0.559962 	 0.537396 	 0.302342 	 0.946004
148 	 0.585164 	 0.56582 	 0.317363 	 0.984393
149 	 0.595661 	 0.600561 	 0.328538 	 1.03818
150 	 0.611725 	 0.576648 	 0.364576 	 1.06309
----

=== curves

----
0	0.234295949413539	3.60468498370344
1	0.401987851586465	3.63739425068354
2	1.23389655148802	3.72703346402498
3	2.55146406365262	4.90318424946631
4	3.38568126167496	4.31800389182177
5	4.92337066828162	5.21138798511029
6	5.78850510151731	5.55814152259242
7	7.18187508353578	5.18707593485514
8	8.99047842613113	5.87328501959469
9	9.11195838674259	5.77207538340048
10	9.99900047674045	5.99069341815386
----

=== cusum

----
0 5.02241537051
1 5.10166027802
2 4.3788855965
3 4.71461975846
4 5.94378647845
5 5.84645881581
6 3.71500981677
7 5.32573690289
8 4.48978555655
9 4.72787390309
10 6.03929392509
11 3.90621126788
12 5.85144764083
13 5.23169801295
14 5.43092060973
15 4.39953613814
16 6.70598103647
17 5.29388848701
18 4.26072309354
19 5.85047729585
20 5.54691876141
21 6.83051734449
22 5.59071238021
23 5.07682128328
24 5.17624845061
25 4.48469961503
26 6.15244428451
27 5.47738688375
28 6.16272259371
29 6.67861265304
30 5.42554929575
----

=== dense

----
0.000 	 0.26000 	 0.55000 	 0.0707043
0.004 	 0.24246 	 0.54664 	 0.0752476
0.008 	 0.19682 	 0.54561 	 0.0990106
0.012 	 0.17765 	 0.54571 	 0.123483
0.016 	 0.19595 	 0.55241 	 0.144755
0.020 	 0.25603 	 0.56177 	 0.150437
0.024 	 0.36088 	 0.57574 	 0.144688
0.028 	 0.47355 	 0.59480 	 0.130329
0.032 	 0.57740 	 0.61288 	 0.126449
0.036 	 0.64774 	 0.62936 	 0.138278
0.040 	 0.66453 	 0.64196 	 0.159868
0.044 	 0.67654 	 0.65406 	 0.180786
0.048 	 0.69489 	 0.66656 	 0.191444
0.052 	 0.74479 	 0.68045 	 0.191252
0.056 	 0.79124 	 0.69370 	 0.181259
0.060 	 0.81661 	 0.70528 	 0.152885
0.064 	 0.84207 	 0.71596 	 0.109281
0.068 	 0.87061 	 0.72611 	 0.0650956
0.072 	 0.89548 	 0.73515 	 0.03388
0.076 	 0.90655 	 0.74261 	 0.000883797
0.080 	 0.90184 	 0.74714 	 -0.0446031
0.084 	 0.87037 	 0.74942 	 -0.109441
0.088 	 0.81414 	 0.74993 	 -0.228859
0.092 	 0.77232 	 0.75140 	 -0.326618
0.096 	 0.76289 	 0.75316 	 -0.377408
0.100 	 0.77056 	 0.75691 	 -0.388899
0.104 	 0.77872 	 0.76059 	 -0.3771
0.108 	 0.78706 	 0.76387 	 -0.341822
0.112 	 0.78464 	 0.76654 	 -0.257435
0.116 	 0.77623 	 0.76830 	 -0.180679
0.120 	 0.75474 	 0.77022 	 -0.143724
0.124 	 0.73417 	 0.77224 	 -0.13753
0.128 	 0.74158 	 0.77612 	 -0.161547
0.132 	 0.77192 	 0.78045 	 -0.261905
0.136 	 0.82737 	 0.78624 	 -0.312224
0.140 	 0.86629 	 0.79138 	 -0.330984
0.144 	 0.87960 	 0.79440 	 -0.332835
0.148 	 0.85783 	 0.79606 	 -0.319177
0.152 	 0.83456 	 0.79605 	 -0.27975
0.156 	 0.83556 	 0.79722 	 -0.0929247
0.160 	 0.84796 	 0.79899 	 -0.0352605
0.164 	 0.87282 	 0.80053 	 -0.0325476
0.168 	 0.88777 	 0.80182 	 -0.0658161
0.172 	 0.88561 	 0.80080 	 -0.118326
0.176 	 0.86295 	 0.79864 	 -0.174857
0.180 	 0.80602 	 0.79381 	 -0.22443
0.184 	 0.75402 	 0.79096 	 -0.251284
0.188 	 0.74913 	 0.78995 	 -0.25435
0.192 	 0.77066 	 0.78968 	 -0.240168
0.196 	 0.79266 	 0.78967 	 -0.221017
0.200 	 0.77812 	 0.78918 	 -0.213458
0.204 	 0.79542 	 0.78904 	 -0.245261
0.208 	 0.83150 	 0.79080 	 -0.298456
0.212 	 0.87749 	 0.79200 	 -0.296203
0.216 	 0.91020 	 0.79225 	 -0.286882
0.220 	 0.90772 	 0.78938 	 -0.272774
0.224 	 0.87365 	 0.78429 	 -0.249007
0.228 	 0.82419 	 0.77798 	 -0.199833
0.232 	 0.78742 	 0.77143 	 -0.0643917
0.236 	 0.77565 	 0.76711 	 -0.0112927
0.240 	 0.77084 	 0.76279 	 0.0239836
0.244 	 0.76573 	 0.75848 	 0.0441071
0.248 	 0.76062 	 0.75428 	 0.0614576
0.252 	 0.75639 	 0.75021 	 0.076695
0.256 	 0.75283 	 0.74545 	 0.0898892
0.260 	 0.73942 	 0.74037 	 0.09278
0.264 	 0.72275 	 0.73391 	 0.0968573
0.268 	 0.66305 	 0.72740 	 0.102931
0.272 	 0.60204 	 0.72155 	 0.113531
0.276 	 0.59300 	 0.71726 	 0.126406
0.280 	 0.60282 	 0.71599 	 0.141057
0.284 	 0.65697 	 0.71711 	 0.155584
0.288 	 0.72634 	 0.72013 	 0.166906
0.292 	 0.77222 	 0.72084 	 0.171423
0.296 	 0.78432 	 0.72083 	 0.170535
0.300 	 0.76093 	 0.71735 	 0.156881
0.304 	 0.72051 	 0.71375 	 0.127521
0.308 	 0.69209 	 0.70994 	 0.0842146
0.312 	 0.68191 	 0.70708 	 0.0368419
0.316 	 0.68450 	 0.70555 	 -0.00887786
0.320 	 0.69288 	 0.70355 	 -0.065005
0.324 	 0.67940 	 0.70126 	 -0.11229
0.328 	 0.63979 	 0.69661 	 -0.146493
0.332 	 0.57485 	 0.69168 	 -0.168586
0.336 	 0.51070 	 0.68888 	 -0.189398
0.340 	 0.51240 	 0.68781 	 -0.22272
0.344 	 0.52987 	 0.69109 	 -0.257902
0.348 	 0.57392 	 0.69646 	 -0.280917
0.352 	 0.64488 	 0.70400 	 -0.295813
0.356 	 0.70160 	 0.71119 	 -0.313763
0.360 	 0.74877 	 0.71824 	 -0.324008
0.364 	 0.80129 	 0.72416 	 -0.325127
0.368 	 0.82071 	 0.72960 	 -0.318493
0.372 	 0.82546 	 0.73212 	 -0.306177
0.376 	 0.82294 	 0.73392 	 -0.31525
0.380 	 0.80183 	 0.73416 	 -0.334933
0.384 	 0.78526 	 0.73481 	 -0.347189
0.388 	 0.80285 	 0.73582 	 -0.349989
0.392 	 0.81382 	 0.73608 	 -0.356146
0.396 	 0.81704 	 0.73607 	 -0.356802
0.400 	 0.80940 	 0.73558 	 -0.343468
0.404 	 0.81611 	 0.73503 	 -0.283229
0.408 	 0.84526 	 0.73426 	 -0.200138
0.412 	 0.85982 	 0.73223 	 -0.159957
0.416 	 0.85042 	 0.72816 	 -0.15832
0.420 	 0.81334 	 0.72256 	 -0.182653
0.424 	 0.77966 	 0.71595 	 -0.24333
0.428 	 0.76305 	 0.70913 	 -0.320546
0.432 	 0.72946 	 0.70222 	 -0.401228
0.436 	 0.68851 	 0.69433 	 -0.4446
0.440 	 0.65261 	 0.68664 	 -0.446931
0.444 	 0.63472 	 0.67952 	 -0.426869
0.448 	 0.60890 	 0.67265 	 -0.38141
0.452 	 0.57813 	 0.66605 	 -0.313254
0.456 	 0.53939 	 0.66088 	 -0.249278
0.460 	 0.52609 	 0.65630 	 -0.187792
0.464 	 0.54656 	 0.65480 	 -0.135393
0.468 	 0.57422 	 0.65378 	 -0.0835962
0.472 	 0.60143 	 0.65429 	 -0.0217371
0.476 	 0.62721 	 0.65479 	 0.047904
0.480 	 0.65046 	 0.65529 	 0.12799
0.484 	 0.66962 	 0.65550 	 0.19977
0.488 	 0.67892 	 0.65549 	 0.281978
0.492 	 0.68760 	 0.65430 	 0.341345
0.496 	 0.69679 	 0.65277 	 0.391978
0.500 	 0.69706 	 0.65100 	 0.435887
0.504 	 0.69507 	 0.64895 	 0.458826
0.508 	 0.68419 	 0.64590 	 0.469598
0.512 	 0.66511 	 0.64241 	 0.468085
0.516 	 0.63800 	 0.63835 	 0.459933
0.520 	 0.61811 	 0.63429 	 0.443573
0.524 	 0.60211 	 0.63022 	 0.426249
0.528 	 0.58538 	 0.62660 	 0.40937
0.532 	 0.55757 	 0.62316 	 0.39492
0.536 	 0.54160 	 0.62087 	 0.382946
0.540 	 0.54928 	 0.61927 	 0.373735
0.544 	 0.56109 	 0.61926 	 0.368412
0.548 	 0.57407 	 0.61991 	 0.365617
0.552 	 0.58809 	 0.62116 	 0.366363
0.556 	 0.61078 	 0.62224 	 0.369932
0.560 	 0.62887 	 0.62325 	 0.375995
0.564 	 0.64674 	 0.62496 	 0.383804
0.568 	 0.65977 	 0.62646 	 0.392641
0.572 	 0.66500 	 0.62645 	 0.4029
0.576 	 0.66651 	 0.62571 	 0.414824
0.580 	 0.65243 	 0.62369 	 0.429447
0.584 	 0.64189 	 0.62224 	 0.443594
0.588 	 0.64538 	 0.62122 	 0.45588
0.592 	 0.66211 	 0.62061 	 0.465171
0.596 	 0.67005 	 0.62008 	 0.470033
0.600 	 0.64859 	 0.61653 	 0.472732
0.604 	 0.63364 	 0.61336 	 0.472245
0.608 	 0.63084 	 0.61159 	 0.46999
0.612 	 0.64920 	 0.60958 	 0.466203
0.616 	 0.65717 	 0.60730 	 0.456882
0.620 	 0.63851 	 0.60368 	 0.446466
0.624 	 0.61004 	 0.59936 	 0.435143
0.628 	 0.58989 	 0.59482 	 0.42382
0.632 	 0.57772 	 0.59036 	 0.412526
0.636 	 0.57136 	 0.58706 	 0.40126
0.640 	 0.56909 	 0.58399 	 0.390601
0.644 	 0.57309 	 0.58146 	 0.381517
0.648 	 0.58290 	 0.57865 	 0.375447
0.652 	 0.58214 	 0.57560 	 0.36219
0.656 	 0.58063 	 0.57275 	 0.333586
0.660 	 0.57734 	 0.56995 	 0.294753
0.664 	 0.57763 	 0.56692 	 0.260211
0.668 	 0.58141 	 0.56392 	 0.233889
0.672 	 0.58709 	 0.56112 	 0.207927
0.676 	 0.59353 	 0.55813 	 0.193623
0.680 	 0.60005 	 0.55483 	 0.185508
0.684 	 0.59223 	 0.55028 	 0.178581
0.688 	 0.56790 	 0.54495 	 0.170891
0.692 	 0.54143 	 0.53940 	 0.162489
0.696 	 0.52488 	 0.53382 	 0.152903
0.700 	 0.50595 	 0.52848 	 0.137853
0.704 	 0.49568 	 0.52355 	 0.120169
0.708 	 0.50047 	 0.51975 	 0.10172
0.712 	 0.50617 	 0.51619 	 0.0843873
0.716 	 0.51277 	 0.51288 	 0.0682393
0.720 	 0.52340 	 0.50941 	 0.053516
0.724 	 0.53215 	 0.50585 	 0.0521173
0.728 	 0.53408 	 0.50136 	 0.0587128
0.732 	 0.51888 	 0.49668 	 0.0690125
0.736 	 0.50614 	 0.49135 	 0.084326
0.740 	 0.49412 	 0.48592 	 0.114523
0.744 	 0.46966 	 0.48032 	 0.145104
0.748 	 0.45707 	 0.47502 	 0.173098
0.752 	 0.43985 	 0.46994 	 0.190246
0.756 	 0.42897 	 0.46506 	 0.205956
0.760 	 0.41619 	 0.46025 	 0.22008
0.764 	 0.40118 	 0.45593 	 0.229146
0.768 	 0.38331 	 0.45180 	 0.230795
0.772 	 0.36748 	 0.44824 	 0.231597
0.776 	 0.37155 	 0.44549 	 0.230541
0.780 	 0.37489 	 0.44371 	 0.224757
0.784 	 0.36930 	 0.44244 	 0.220556
0.788 	 0.36863 	 0.44143 	 0.217227
0.792 	 0.37686 	 0.44219 	 0.21507
0.796 	 0.41188 	 0.44324 	 0.215725
0.800 	 0.43602 	 0.44476 	 0.218382
0.804 	 0.46398 	 0.44635 	 0.221711
0.808 	 0.48993 	 0.44811 	 0.225681
0.812 	 0.50275 	 0.44896 	 0.230394
0.816 	 0.50786 	 0.44895 	 0.235718
0.820 	 0.50811 	 0.44765 	 0.241233
0.824 	 0.50124 	 0.44587 	 0.246961
0.828 	 0.49265 	 0.44313 	 0.253249
0.832 	 0.48680 	 0.44038 	 0.259599
0.836 	 0.48138 	 0.43784 	 0.265681
0.840 	 0.47732 	 0.43473 	 0.272474
0.844 	 0.46074 	 0.43066 	 0.279828
0.848 	 0.44074 	 0.42690 	 0.288664
0.852 	 0.43807 	 0.42335 	 0.2971
0.856 	 0.43989 	 0.41979 	 0.305258
0.860 	 0.43298 	 0.41622 	 0.313747
0.864 	 0.42201 	 0.41215 	 0.321747
0.868 	 0.40277 	 0.40783 	 0.329218
0.872 	 0.37484 	 0.40275 	 0.33699
0.876 	 0.37155 	 0.39875 	 0.344054
0.880 	 0.37098 	 0.39595 	 0.349808
0.884 	 0.37224 	 0.39316 	 0.355283
0.888 	 0.37675 	 0.39037 	 0.360699
0.892 	 0.38205 	 0.38758 	 0.366096
0.896 	 0.38772 	 0.38485 	 0.369603
0.900 	 0.39339 	 0.38256 	 0.371502
0.904 	 0.39905 	 0.38010 	 0.368691
0.908 	 0.40248 	 0.37731 	 0.366291
0.912 	 0.40296 	 0.37396 	 0.364182
0.916 	 0.39202 	 0.37015 	 0.362584
0.920 	 0.38079 	 0.36594 	 0.362556
0.924 	 0.36981 	 0.36162 	 0.36488
0.928 	 0.35481 	 0.35730 	 0.369093
0.932 	 0.33783 	 0.35293 	 0.373368
0.936 	 0.32027 	 0.34836 	 0.376953
0.940 	 0.30930 	 0.34411 	 0.382488
0.944 	 0.30271 	 0.34030 	 0.388755
0.948 	 0.30547 	 0.33797 	 0.399672
0.952 	 0.31775 	 0.33644 	 0.410579
0.956 	 0.34617 	 0.33514 	 0.421487
0.960 	 0.36579 	 0.33383 	 0.432426
0.964 	 0.38378 	 0.33204 	 0.446525
0.968 	 0.39048 	 0.32968 	 0.468705
0.972 	 0.38745 	 0.32587 	 0.499835
0.976 	 0.37787 	 0.32116 	 0.530425
0.980 	 0.35933 	 0.31556 	 0.561607
0.984 	 0.32357 	 0.30960 	 0.591858
0.988 	 0.30013 	 0.30350 	 0.6232
0.992 	 0.28791 	 0.29823 	 0.640083
0.996 	 0.27896 	 0.29363 	 0.643106
----

=== distorted-grid

----
# x      y     z
  0     -1     10
  0      0     10
  0      1     10
             
  1     -1     10
  1.2    0.2    5
  1      1     10
             
  2     -1     10
  1.9   -0.2    1
  2      1     10
             
  3     -1     10
  2.8    0      0
  3      1     10
----

=== elections

----
# Year  Red   Green Blue  Spending
1990    33    45    18    32 
1991    35    42    19    28
1992    34    44    14    35
1993    37    43    25    40
1994    47    15    30    45
1995    41    14    32    43
1996    42    20    35    47
1997    39    21    31    48
----

=== europeanunion

----
# Name		Area(km^2)	Population	
Malta          	    316	  421400
Luxembourg     	   2586	  537000
Cyprus         	   9251	  865900
Slovenia       	  20273	 2058800
Belgium        	  30528	11161600
Netherlands    	  41543	16779600
Denmark        	  43075	 5602600
Estonia        	  45227	 1324800
Slovakia       	  49035	 5410800
Croatia        	  56594	 4262100
Latvia         	  64589	 2023800
Lithuania      	  65200	 2971900
Ireland        	  70273	 4591100
CzechRepublic  	  78866	10516100
Austria        	  83855	 8451900
Portugal       	  92390	10487300
Hungary        	  93030	 9908800
Bulgaria       	 110994	 7284600
Greece         	 131990	11062500
Romania        	 238391	20057500
UnitedKingdom  	 243610	63730100
Italy          	 301338	59685200
Poland         	 312685	38533300
Finland        	 338424	 5426700
Germany        	 357021	80523700
Sweden         	 449964	 9555900
Spain          	 504030	46704300
France         	 674843	65633200
----

=== frankfurt

----
# Frankfurt/M	Celsius
2014-11-01	 9.3
2014-11-02	10.2
2014-11-03	12.9
2014-11-04	12.3
2014-11-05	 9.3
2014-11-06	 6.6
2014-11-07	 5.8
----

=== grains

----
Year	Wheat	Barley	Rye
1990	8	6	14
1991	10	5	12
1992	10	7	15
1993	11	5	13
1994	9	6	12
----

=== grid

----
# x     y    z
  0    -1    10
  0     0    10
  0     1    10

  1    -1    10
  1     0     5
  1     1    10

  2    -1    10
  2     0     1
  2     1    10

  3    -1    10
  3     0     0
  3     1    10 
----

=== icecream

----
# Date		Consumption [g]	Temperature (Celsius)
1951-04-01	179.886 	6.020
1951-04-29	180.870 	13.341
1951-05-27	186.524 	17.788
1951-06-24	202.175 	19.383
1951-07-22	190.169 	19.484
1951-08-19	166.321 	17.991
1951-09-16	150.741 	16.368
1951-10-14	138.497 	9.379
1951-11-11	130.703 	-0.491
1951-12-09	117.748 	-4.538
1952-01-06	135.773 	-1.414
1952-02-03	137.938 	-3.376
1952-03-02	157.573 	-0.779
1952-03-30	150.306 	4.021
1952-04-27	180.762 	13.126
1952-05-25	182.101 	17.167
1952-06-22	224.160 	22.804
1952-07-20	205.468 	21.567
1952-08-17	178.884 	19.806
1952-09-14	165.382 	16.061
1952-10-12	148.138 	5.895
1952-11-09	146.160 	4.426
1952-12-07	131.040 	-0.360
1953-01-04	154.424 	-3.665
1953-02-01	145.533 	-2.665
1953-03-01	174.206 	0.957
1953-03-29	182.450 	5.539
1953-04-26	200.074 	10.134
1953-05-24	207.266 	18.854
1953-06-21	254.959 	21.519
----

=== jitter

----
1.20633841071206
0.187684396274087
5.09994286207362
4.06097090523893
0.904667322085864
0.392802044047618
1.40801491840608
1.59832188288928
0.300243001102096
0.356004250084364
4.46203819756586
5.54350984312847
1.25027550847189
0.212195382162988
1.43944169125726
2.36484070547496
0.754127387330165
0.591192334677945
2.21431837950063
1.77765627674176
3.53284892616325
3.67746278814233
5.81901357283772
0.42685765333513
1.94809850952643
0.524621421757922
0.256208884457669
1.69187325180591
3.4008400633356
1.37263492511239
0.192464502021185
0.224188281349013
1.73570852474344
2.92775237262762
1.64975917740456
0.597807597483478
1.29020364864876
1.51182047091625
0.302649086833874
0.796586738734828
0.246251729765775
1.71810810536562
1.32814339616319
1.88817549819341
0.795766752537435
0.454479090811048
2.47713403649297
1.48147799946144
8.1960892763972
2.73114577434871
1.03485697817804
0.907206337056673
0.761927029004858
1.02664725733198
4.99139375686187
0.434450414992278
0.921301848772828
0.809961509129064
0.383657597807469
10.5191384487062
3.23322827882187
0.473821041649802
4.37309369278521
1.25661418715459
1.6436032022692
1.63528039618566
1.43126932970245
5.19855388109457
1.58110586677714
0.328063655233677
0.293823802097528
0.491127334078796
1.2530101140724
0.636683470680499
0.300497795134513
0.543545143456016
0.583186823514095
0.589195336546926
0.763760949802721
1.0227716254688
0.502907308429449
0.4924168350476
0.819501002662492
2.17104109990028
5.4455469294781
0.424514461632749
0.775186042905981
0.765019864553361
1.59273068140952
0.647028483075635
0.342301933102775
2.72394871860544
3.4724292228451
3.2058805035743
0.394625238421816
0.405534569479596
3.43099430012147
4.16282693633237
0.418895357668248
0.997639951121089
5.81185941460628
4.11574550084608
5.63243730081961
0.880314907379467
0.636537969783093
4.98848476652728
0.886467312836975
2.95496744662306
0.238071362551718
0.784125815902255
3.62266981254419
1.80266470584794
5.04444504543936
1.03394942665469
0.637594940207821
0.360720727146796
0.541162640304164
0.808334488004579
6.91765751887
3.69465789977572
0.42853629000705
0.630381572311415
0.246714714822949
6.21643449582628
4.88849673835023
8.99252782183816
2.01904766147743
3.82050837236907
1.08913772344063
2.49980356362006
0.573849045014507
0.945192596095898
4.31436604503673
0.891374415025757
2.45707191327158
0.538780927740338
0.359936708668343
3.57764979813245
0.136226035148827
1.85869977653999
1.54401034314006
6.61426161173219
3.14379379583432
4.16954709958009
1.48639847658083
0.520213063276198
4.89523296757772
0.902801548407284
0.542892108243755
0.12032107876116
0.927079245239183
1.23701713382734
0.710269841791873
1.40970525933942
0.524911561402632
3.09928453339766
0.212699728030268
0.794779956912271
3.48215037527592
0.651801124737884
0.802728996199936
0.546336060164567
3.10423126802091
1.25485242444618
1.8762328264219
1.0325035869104
4.57188965822918
0.446812576521627
0.678330349940482
1.17143093668224
2.5446684180389
2.2594043623393
4.71297022632145
0.57909302404242
2.40841025895567
3.39352695628297
4.67850863125592
0.363585042027633
0.584191236481966
2.4136846366723
3.81801934216585
3.33329576176525
3.79235146073299
1.72681957274672
5.52389615300543
2.33085211583902
0.655944966689882
0.872634294129532
2.32017978810663
2.23248919469257
0.839797182890917
2.12419425464131
0.560771031699555
0.72857730913327
0.750633344375519
1.47869366325634
0.616180139940143
0.295053703246651
3.34374658528967
0.478865034850531
3.44903781335714
2.17676700328343
3.72320308364663
0.858466253111385
2.84118931270267
0.1878290654775
2.35578767502615
5.7679036124627
0.354578423392328
0.948893281755269
0.410311488633421
0.854415516923365
0.876491902251853
4.84186500137225
9.38291592936801
1.04088234233421
0.431829121254295
1.27682558456345
0.350715853702284
1.18344620573249
1.15978783840518
1.03471950908941
0.463435760245222
3.18436471593603
0.526086722656439
1.61899822793997
0.444201366578157
1.26883962378155
0.274286187703351
0.539634705174488
2.3721238135327
2.30516643256142
1.85579769654379
1.36567950858164
5.38521041106391
0.539012353464284
1.68726426039271
0.395745372899228
2.11105553916479
3.91189701506546
2.68503999864261
1.16772933729736
5.38311758174183
0.425109485376499
3.43120809328737
1.83535218524538
3.64808698722627
1.56768496306209
0.324496541537666
0.485969942559245
4.3378242159729
0.802794368356422
4.99738585540578
1.34672546092724
3.09282710391806
4.00639861213524
3.47693745121285
0.488010806529634
1.02089171357025
0.808100785648208
1.46201690005034
1.5058784321979
1.39620706031456
0.74980922206423
3.51852560711819
0.877462654611137
0.339904582438268
3.41183332048474
1.25846618309012
0.419405110135851
0.854265013429962
4.88290488275983
1.77007839602944
0.731111889601778
1.15033195240012
0.680444146600084
0.713537546109904
0.665997038546976
1.41883624001278
3.36173861550212
5.8362686070518
0.285798353190535
0.507953862606648
10.2978435682182
5.82961944394208
3.33212527640864
3.76142057182386
0.351627289560282
4.54772104363299
3.59218360767598
5.51020757831164
0.722708574001867
1.49454353050986
1.88766975137371
0.328333657028951
0.544334682104223
2.37243523328074
3.04114180213124
0.920359379889021
3.91809638175544
----

=== labels

----
1	2.6	3	ABC
2	2.1	6	EFG
3	1.0	2	PQR
4	1.2	1	UVW
5	1.6	4	XYZ
----

=== machines

----
# Day Machine Defects
1 1 2
1 3 0
1 4 1
1 5 2
1 6 0
1 7 0
1 8 1
1 9 0
1 10 1
1 11 0
1 12 0
1 13 0
1 14 2
1 15 1
1 16 1
1 18 0
1 19 0
2 1 1
2 2 0
2 3 0
2 4 0
2 6 2
2 7 0
2 8 1
2 9 0
2 10 0
2 12 1
2 13 0
2 14 1
2 15 0
2 16 2
2 17 0
2 18 2
2 19 0
2 20 1
3 1 0
3 2 0
3 3 0
3 4 0
3 5 1
3 6 1
3 7 0
3 9 0
3 10 0
3 11 0
3 12 0
3 13 50
3 14 1
3 15 1
3 16 1
3 17 0
3 18 0
3 19 2
3 20 0
4 1 1
4 2 0
4 3 0
4 4 0
4 5 1
4 6 0
4 7 2
4 8 2
4 9 0
4 10 1
4 11 0
4 13 0
4 14 1
4 15 0
4 16 1
4 18 0
4 19 0
4 20 0
5 2 0
5 3 0
5 4 0
5 5 1
5 6 0
5 7 0
5 8 1
5 9 1
5 10 0
5 11 1
5 12 0
5 13 0
5 14 1
5 15 2
5 16 1
5 17 0
5 18 0
5 19 0
5 20 0
6 1 0
6 3 0
6 4 2
6 5 1
6 9 0
6 14 1
6 15 2
6 16 0
6 19 0
7 3 0
7 10 0
7 13 0
7 18 0
8 3 2
8 4 1
8 7 5
8 8 5
8 9 0
8 10 2
8 11 2
8 12 2
8 13 1
8 15 3
8 16 3
8 17 1
8 18 0
8 20 0
9 1 1
9 2 1
9 3 1
9 4 1
9 5 1
9 6 4
9 7 0
9 8 2
9 9 4
9 10 0
9 11 0
9 13 1
9 14 2
9 15 2
9 16 5
9 17 3
9 18 1
9 19 0
9 20 2
10 2 1
10 3 1
10 4 0
10 5 4
10 6 4
10 7 1
10 8 3
10 9 1
10 10 1
10 11 0
10 12 2
10 13 0
10 14 3
10 15 4
10 16 3
10 17 1
10 18 1
10 19 2
10 20 2
11 1 1
11 2 1
11 3 1
11 4 1
11 5 3
11 6 5
11 8 4
11 9 2
11 10 2
11 11 0
11 12 0
11 13 0
11 14 0
11 15 3
11 16 4
11 17 3
11 18 1
11 19 0
11 20 2
12 1 1
12 2 1
12 3 1
12 4 1
12 5 6
12 6 0
12 7 0
12 8 4
12 9 0
12 10 1
12 11 1
12 12 1
12 13 0
12 15 2
12 16 5
12 17 0
12 18 1
12 19 0
13 1 1
13 6 3
13 8 3
13 9 1
13 10 0
13 11 0
13 12 1
13 13 0
13 14 2
13 15 2
13 16 4
14 3 0
14 4 1
14 6 5
14 7 2
14 8 6
14 9 0
14 11 2
14 13 3
14 14 1
14 16 3
14 18 0
14 19 1
15 1 2
15 2 0
15 3 2
15 4 1
15 5 6
15 6 1
15 7 2
15 9 2
15 10 1
15 11 0
15 12 0
15 13 0
15 14 5
15 15 1
15 16 3
15 17 0
15 18 1
15 19 0
15 20 1
16 1 1
16 2 0
16 3 0
16 4 0
16 5 1
16 6 5
16 8 3
16 9 0
16 10 2
16 11 0
16 13 1
16 14 2
16 15 4
16 16 3
16 17 0
16 18 0
16 19 1
16 20 3
17 1 0
17 2 0
17 3 0
17 4 50
17 6 2
17 7 3
17 8 1
17 9 1
17 10 0
17 12 0
17 13 0
17 14 2
17 15 1
17 16 0
17 17 0
17 18 0
17 19 0
17 20 1
18 1 0
18 2 1
18 3 0
18 4 0
18 6 4
18 7 4
18 8 3
18 9 0
18 10 0
18 11 0
18 12 0
18 13 0
18 14 3
18 15 3
18 16 0
18 17 0
18 18 0
18 20 1
19 1 0
19 3 0
19 4 1
19 7 1
19 8 2
19 10 0
19 11 1
19 12 3
19 14 1
19 17 0
19 18 1
19 19 0
19 20 0
20 2 0
20 3 0
20 6 2
20 9 1
20 11 0
20 16 1
20 19 0
20 20 0
21 4 0
21 5 1
21 10 0
21 20 0
22 1 0
22 2 0
22 3 0
22 4 0
22 5 3
22 6 1
22 7 6
22 8 2
22 9 0
22 11 0
22 12 0
22 13 2
22 15 3
22 16 1
22 17 0
22 18 0
22 19 0
22 20 0
23 1 0
23 2 0
23 3 0
23 5 1
23 7 0
23 8 1
23 9 0
23 10 0
23 11 2
23 12 1
23 13 0
23 14 0
23 15 0
23 16 1
23 17 0
23 18 0
24 1 1
24 2 0
24 3 0
24 4 0
24 5 0
24 6 1
24 7 0
24 8 1
24 9 0
24 10 1
24 11 0
24 12 0
24 13 0
24 14 2
24 15 3
24 16 2
24 17 1
24 18 0
24 19 1
24 20 0
25 1 0
25 2 0
25 3 0
25 4 0
25 5 0
25 6 1
25 7 0
25 8 2
25 9 0
25 10 1
25 11 1
25 12 0
25 13 0
25 14 0
25 15 1
25 16 0
25 17 0
25 18 0
25 20 0
26 1 0
26 2 0
26 4 0
26 5 0
26 6 1
26 7 0
26 8 0
26 9 0
26 11 0
26 13 0
26 14 1
26 15 1
26 16 1
26 17 1
26 18 0
26 19 0
26 20 0
27 2 0
27 3 0
27 5 0
27 6 1
27 7 2
27 8 2
27 9 0
27 10 0
27 12 0
27 13 0
27 14 0
27 17 50
27 18 0
27 19 1
28 1 0
28 2 0
28 3 0
28 5 1
28 6 2
28 7 0
28 10 1
28 11 0
28 14 1
28 15 0
28 16 0
28 17 0
28 19 0
28 20 0
29 1 0
29 2 0
29 3 0
29 4 0
29 5 1
29 6 0
29 7 0
29 8 0
29 9 0
29 10 1
29 11 0
29 13 1
29 14 0
29 15 1
29 16 1
29 17 0
29 18 0
29 20 1
30 1 0
30 2 0
30 3 0
30 4 1
30 5 1
30 6 1
30 7 1
30 8 1
30 9 0
30 10 1
30 11 0
30 12 1
30 13 0
30 14 0
30 15 1
30 16 1
30 17 0
30 18 0
30 19 0
30 20 1
31 1 0
31 2 1
31 3 0
31 4 0
31 5 1
31 6 1
31 7 0
31 8 0
31 10 0
31 11 0
31 12 0
31 13 0
31 14 3
31 15 4
31 16 0
31 17 0
31 18 0
31 19 1
31 20 0
----

=== mammals

----
# Source: http://www.sjsu.edu/faculty/watkins/longevity.htm
# Columns: weight[gram]	heartrate[1/minute]	lifetime[years]
Human		90000	60	70
Cat		2000	150	15
Dog		5000	90	15
Hamster		60	450	3 
# Chicken		1500	275	15
Monkey		5000	190	15
Horse		1200000	44	40
Cow		800000	65	22
Pig		150000	70	25
Rabbit		1000	205	9 
Elephant	5000000	30	70
# Giraffe		900000	65	20
LargeWhale   120000000	20	80
Rat	     300	350	?
Wolf	     40000	80	?
----

=== mammals~

----
# Source: http://www.sjsu.edu/faculty/watkins/longevity.htm
# Columns: weight[gram]	heartrate[1/minute]	lifetime[years]
Human		90000	60	70
Cat		2000	150	15
Dog		5000	90	15
Hamster		60	450	3 
Chicken		1500	275	15
Monkey		5000	190	15
Horse		1200000	44	40
Cow		800000	65	22
Pig		150000	70	25
Rabbit		1000	205	9 
Elephant	5000000	30	70
# Giraffe		900000	65	20
LargeWhale   120000000	20	80
----

=== marathon

----
135 	 1
140 	 2
145 	 4
150 	 7
155 	 11
160 	 13
165 	 35
170 	 29
175 	 34
180 	 44
185 	 35
190 	 25
195 	 23
200 	 15
205 	 9
210 	 12
215 	 13
220 	 22
225 	 29
230 	 40
235 	 51
240 	 46
245 	 85
250 	 60
255 	 64
260 	 82
265 	 67
270 	 84
275 	 73
280 	 78
285 	 93
290 	 73
295 	 86
300 	 85
305 	 63
310 	 57
315 	 67
320 	 53
325 	 54
330 	 49
335 	 38
340 	 32
345 	 24
350 	 33
355 	 14
360 	 12
365 	 14
370 	 9
375 	 15
380 	 7
385 	 9
390 	 6
395 	 4
400 	 6
405 	 4
410 	 5
415 	 8
420 	 7
425 	 1
430 	 9
435 	 5
440 	 1
445 	 3
----

=== matrix

----
# na  x0 x1 x2 ...
# y0:  z  z  z
# y1:  ...
# y2:  ...
-1   0  1  2  3
-1  10 10 10 10 
 0  10  5  1  0 
 1  10 10 10 10 
----

=== measurements

----
2.14
1.25
1.10
1.00
1.60
1.31
0.95
0.90
4.01
1.95
2.53
0.65
----

=== men-women

----
1897	175.167	NaN
1898	162.000	NaN
1899	174.633	NaN
1900	159.733	NaN
1901	149.383	NaN
1902	163.200	NaN
1903	161.483	NaN
1904	158.067	NaN
1905	158.417	NaN
1906	165.750	NaN
1907	144.400	NaN
1908	145.717	NaN
1909	173.600	NaN
1910	148.867	NaN
1911	141.650	NaN
1912	141.300	NaN
1913	145.233	NaN
1914	145.233	NaN
1915	151.683	NaN
1916	147.267	NaN
1917	148.617	NaN
1918	149.883	NaN
1919	149.217	NaN
1920	149.517	NaN
1921	138.950	NaN
1922	138.167	NaN
1923	143.783	NaN
1924	149.667	NaN
1925	153.000	NaN
1926	145.667	NaN
1927	160.367	NaN
1928	157.117	NaN
1929	153.133	NaN
1930	154.800	NaN
1931	166.750	NaN
1932	153.600	NaN
1933	151.017	NaN
1934	152.883	NaN
1935	152.117	NaN
1936	153.667	NaN
1937	153.333	NaN
1938	155.567	NaN
1939	148.850	NaN
1940	148.467	NaN
1941	150.633	NaN
1942	146.850	NaN
1943	148.417	NaN
1944	151.833	NaN
1945	150.667	NaN
1946	149.450	NaN
1947	145.650	NaN
1948	151.033	NaN
1949	151.833	NaN
1950	152.650	NaN
1951	147.750	NaN
1952	151.883	NaN
1953	138.850	NaN
1954	140.650	NaN
1955	138.367	NaN
1956	134.233	NaN
1957	140.083	NaN
1958	145.900	NaN
1959	142.700	NaN
1960	140.900	NaN
1961	143.650	NaN
1962	143.800	NaN
1963	138.967	NaN
1964	139.983	NaN
1965	136.550	NaN
1966	137.183	201.667
1967	135.750	207.283
1968	142.283	210.000
1969	133.817	202.767
1970	130.500	185.117
1971	138.750	188.500
1972	135.650	190.433
1973	136.050	185.983
1974	133.650	167.183
1975	129.917	162.400
1976	140.317	167.167
1977	134.767	168.550
1978	130.217	164.867
1979	129.450	155.250
1980	132.183	154.467
1981	129.433	146.767
1982	128.867	149.550
1983	129.000	142.717
1984	130.567	149.280
1985	134.083	154.060
1986	127.850	144.917
1987	131.833	145.350
1988	128.717	144.500
1989	129.100	144.550
1990	128.317	145.400


1991	131.100	144.300
1992	128.233	143.717
1993	129.550	145.450
1994	127.250	141.750
1995	129.367	145.183
1996	129.250	147.200
1997	130.567	146.383
1998	127.567	143.350
1999	129.867	143.417
2000	129.783	146.183
2001	129.717	143.883
2002	129.033	140.717
2003	130.183	145.333
2004	130.617	144.450
2005	131.750	145.217
2006	127.233	143.633
2007	134.217	149.300
2008	127.750	145.417
2009	128.700	152.267
2010	125.867	146.183
2011	123.033	142.600
2012	132.667	151.833
2013	130.367	146.417
2014	128.617	138.950
----

=== missing

----
1    10
2    10 
3    11
4    12
5    NaN
6    11
7    11
8    10
9    10
----

=== monitoring

----
1 	 1.96667
1.05901 	 1.96466
1.11802 	 1.9626
1.17704 	 1.96048
1.23605 	 1.95833
1.29506 	 1.95615
1.35407 	 1.95396
1.41308 	 1.95178
1.47209 	 1.94962
1.53111 	 1.94749
1.59012 	 1.94541
1.64913 	 1.94339
1.70814 	 1.94144
1.76715 	 1.93957
1.82617 	 1.93781
1.88518 	 1.93616
1.94419 	 1.93464
2.0032 	 1.93326
2.06221 	 1.93193
2.12122 	 1.93058
2.18024 	 1.92921
2.23925 	 1.92785
2.29826 	 1.92651
2.35727 	 1.92519
2.41628 	 1.92392
2.4753 	 1.92271
2.53431 	 1.92157
2.59332 	 1.92051
2.65233 	 1.91956
2.71134 	 1.91871
2.77035 	 1.918
2.82937 	 1.91742
2.88838 	 1.917
2.94739 	 1.91674
3.0064 	 1.91667
3.06541 	 1.91667
3.12442 	 1.91667
3.18344 	 1.91667
3.24245 	 1.91667
3.30146 	 1.91667
3.36047 	 1.91667
3.41948 	 1.91667
3.4785 	 1.91667
3.53751 	 1.91667
3.59652 	 1.91667
3.65553 	 1.91667
3.71454 	 1.91667
3.77355 	 1.91667
3.83257 	 1.91667
3.89158 	 1.91667
3.95059 	 1.91667
4.0096 	 1.91666
4.06861 	 1.91655
4.12763 	 1.91628
4.18664 	 1.91585
4.24565 	 1.91528
4.30466 	 1.91458
4.36367 	 1.91376
4.42268 	 1.91283
4.4817 	 1.9118
4.54071 	 1.91067
4.59972 	 1.90947
4.65873 	 1.9082
4.71774 	 1.90687
4.77676 	 1.90549
4.83577 	 1.90407
4.89478 	 1.90262
4.95379 	 1.90115
5.0128 	 1.89967
5.07181 	 1.89799
5.13083 	 1.89604
5.18984 	 1.89383
5.24885 	 1.8914
5.30786 	 1.88876
5.36687 	 1.88594
5.42589 	 1.88296
5.4849 	 1.87984
5.54391 	 1.8766
5.60292 	 1.87326
5.66193 	 1.86985
5.72094 	 1.86639
5.77996 	 1.8629
5.83897 	 1.85941
5.89798 	 1.85592
5.95699 	 1.85248
6.016 	 1.84908
6.07502 	 1.84556
6.13403 	 1.84187
6.19304 	 1.83804
6.25205 	 1.83409
6.31106 	 1.83003
6.37007 	 1.82591
6.42909 	 1.82173
6.4881 	 1.81752
6.54711 	 1.8133
6.60612 	 1.80911
6.66513 	 1.80496
6.72414 	 1.80087
6.78316 	 1.79687
6.84217 	 1.79299
6.90118 	 1.78924
6.96019 	 1.78565
7.0192 	 1.78224
7.07822 	 1.77889
7.13723 	 1.77558
7.19624 	 1.77231
7.25525 	 1.76907
7.31426 	 1.76589
7.37327 	 1.76275
7.43229 	 1.75966
7.4913 	 1.75663
7.55031 	 1.75366
7.60932 	 1.75075
7.66833 	 1.74791
7.72735 	 1.74514
7.78636 	 1.74244
7.84537 	 1.73982
7.90438 	 1.73727
7.96339 	 1.73481
8.0224 	 1.73244
8.08142 	 1.73016
8.14043 	 1.72796
8.19944 	 1.72583
8.25845 	 1.72377
8.31746 	 1.72177
8.37648 	 1.71981
8.43549 	 1.71789
8.4945 	 1.71601
8.55351 	 1.71415
8.61252 	 1.7123
8.67153 	 1.71047
8.73055 	 1.70863
8.78956 	 1.70678
8.84857 	 1.70492
8.90758 	 1.70303
8.96659 	 1.70111
9.02561 	 1.69913
9.08462 	 1.69696
9.14363 	 1.69462
9.20264 	 1.69215
9.26165 	 1.68959
9.32066 	 1.68698
9.37968 	 1.68436
9.43869 	 1.68178
9.4977 	 1.67926
9.55671 	 1.67686
9.61572 	 1.67462
9.67473 	 1.67257
9.73375 	 1.67076
9.79276 	 1.66923
9.85177 	 1.66802
9.91078 	 1.66717
9.96979 	 1.66673
10.0288 	 1.66667
10.0878 	 1.66667
10.1468 	 1.66667
10.2058 	 1.66667
10.2649 	 1.66667
10.3239 	 1.66667
10.3829 	 1.66667
10.4419 	 1.66667
10.5009 	 1.66667
10.5599 	 1.66667
10.6189 	 1.66667
10.6779 	 1.66667
10.7369 	 1.66667
10.796 	 1.66667
10.855 	 1.66667
10.914 	 1.66667
10.973 	 1.66667
11.032 	 1.66679
11.091 	 1.66762
11.15 	 1.66919
11.209 	 1.67142
11.2681 	 1.67426
11.3271 	 1.67764
11.3861 	 1.68148
11.4451 	 1.68574
11.5041 	 1.69033
11.5631 	 1.69519
11.6221 	 1.70027
11.6811 	 1.70549
11.7401 	 1.71078
11.7992 	 1.71608
11.8582 	 1.72133
11.9172 	 1.72646
11.9762 	 1.73141
12.0352 	 1.73617
12.0942 	 1.74101
12.1532 	 1.74596
12.2122 	 1.75104
12.2713 	 1.75624
12.3303 	 1.76157
12.3893 	 1.76704
12.4483 	 1.77266
12.5073 	 1.77843
12.5663 	 1.78436
12.6253 	 1.79045
12.6843 	 1.79671
12.7433 	 1.80314
12.8024 	 1.80976
12.8614 	 1.81657
12.9204 	 1.82357
12.9794 	 1.83077
13.0384 	 1.83827
13.0974 	 1.84634
13.1564 	 1.85495
13.2154 	 1.86403
13.2745 	 1.87354
13.3335 	 1.88339
13.3925 	 1.89353
13.4515 	 1.9039
13.5105 	 1.91444
13.5695 	 1.92508
13.6285 	 1.93576
13.6875 	 1.94642
13.7465 	 1.957
13.8056 	 1.96743
13.8646 	 1.97766
13.9236 	 1.98761
13.9826 	 1.99723
14.0416 	 2.00652
14.1006 	 2.0156
14.1596 	 2.02451
14.2186 	 2.03329
14.2777 	 2.04196
14.3367 	 2.05054
14.3957 	 2.05907
14.4547 	 2.06758
14.5137 	 2.07609
14.5727 	 2.08463
14.6317 	 2.09323
14.6907 	 2.10192
14.7497 	 2.11072
14.8088 	 2.11967
14.8678 	 2.12879
14.9268 	 2.13811
14.9858 	 2.14766
15.0448 	 2.15752
15.1038 	 2.16778
15.1628 	 2.1784
15.2218 	 2.18932
15.2809 	 2.20047
15.3399 	 2.2118
15.3989 	 2.22325
15.4579 	 2.23477
15.5169 	 2.24629
15.5759 	 2.25776
15.6349 	 2.26911
15.6939 	 2.2803
15.753 	 2.29125
15.812 	 2.30192
15.871 	 2.31225
15.93 	 2.32217
15.989 	 2.33163
16.048 	 2.34094
16.107 	 2.35076
16.166 	 2.36097
16.225 	 2.37142
16.2841 	 2.38198
16.3431 	 2.3925
16.4021 	 2.40286
16.4611 	 2.41291
16.5201 	 2.42251
16.5791 	 2.43153
16.6381 	 2.43982
16.6971 	 2.44726
16.7562 	 2.45369
16.8152 	 2.45898
16.8742 	 2.463
16.9332 	 2.4656
16.9922 	 2.46665
17.0512 	 2.46667
17.1102 	 2.46667
17.1692 	 2.46667
17.2282 	 2.46667
17.2873 	 2.46667
17.3463 	 2.46667
17.4053 	 2.46667
17.4643 	 2.46667
17.5233 	 2.46667
17.5823 	 2.46667
17.6413 	 2.46667
17.7003 	 2.46667
17.7594 	 2.46667
17.8184 	 2.46667
17.8774 	 2.46667
17.9364 	 2.46667
17.9954 	 2.46667
18.0544 	 2.46633
18.1134 	 2.46526
18.1724 	 2.46349
18.2314 	 2.4611
18.2905 	 2.45814
18.3495 	 2.45467
18.4085 	 2.45076
18.4675 	 2.44645
18.5265 	 2.44182
18.5855 	 2.43692
18.6445 	 2.43181
18.7035 	 2.42655
18.7626 	 2.42121
18.8216 	 2.41583
18.8806 	 2.41048
18.9396 	 2.40523
18.9986 	 2.40012
19.0576 	 2.39491
19.1166 	 2.38929
19.1756 	 2.38331
19.2346 	 2.377
19.2937 	 2.3704
19.3527 	 2.36356
19.4117 	 2.3565
19.4707 	 2.34928
19.5297 	 2.34193
19.5887 	 2.33448
19.6477 	 2.32699
19.7067 	 2.31948
19.7658 	 2.312
19.8248 	 2.30458
19.8838 	 2.29727
19.9428 	 2.29011
20.0018 	 2.28312
20.0608 	 2.27624
20.1198 	 2.26935
20.1788 	 2.26247
20.2378 	 2.25558
20.2969 	 2.2487
20.3559 	 2.24182
20.4149 	 2.23493
20.4739 	 2.22805
20.5329 	 2.22116
20.5919 	 2.21428
20.6509 	 2.20739
20.7099 	 2.20051
20.769 	 2.19362
20.828 	 2.18674
20.887 	 2.17985
20.946 	 2.17297
21.005 	 2.16608
21.064 	 2.1593
21.123 	 2.15266
21.182 	 2.14613
21.241 	 2.13969
21.3001 	 2.13329
21.3591 	 2.12692
21.4181 	 2.12053
21.4771 	 2.11409
21.5361 	 2.10758
21.5951 	 2.10095
21.6541 	 2.09419
21.7131 	 2.08725
21.7722 	 2.0801
21.8312 	 2.07272
21.8902 	 2.06507
21.9492 	 2.05711
22.0082 	 2.04882
22.0672 	 2.03998
22.1262 	 2.03053
22.1852 	 2.02054
22.2442 	 2.01008
22.3033 	 1.99923
22.3623 	 1.98805
22.4213 	 1.97663
22.4803 	 1.96503
22.5393 	 1.95333
22.5983 	 1.9416
22.6573 	 1.92992
22.7163 	 1.91835
22.7754 	 1.90697
22.8344 	 1.89585
22.8934 	 1.88507
22.9524 	 1.87469
23.0114 	 1.86479
23.0704 	 1.85511
23.1294 	 1.84551
23.1884 	 1.836
23.2474 	 1.82658
23.3065 	 1.81727
23.3655 	 1.80805
23.4245 	 1.79894
23.4835 	 1.78994
23.5425 	 1.78106
23.6015 	 1.7723
23.6605 	 1.76367
23.7195 	 1.75516
23.7786 	 1.74679
23.8376 	 1.73856
23.8966 	 1.73048
23.9556 	 1.72254
24.0146 	 1.71475
24.0736 	 1.707
24.1326 	 1.69925
24.1916 	 1.69154
24.2507 	 1.68387
24.3097 	 1.67628
24.3687 	 1.66878
24.4277 	 1.6614
24.4867 	 1.65415
24.5457 	 1.64705
24.6047 	 1.64014
24.6637 	 1.63342
24.7227 	 1.62693
24.7818 	 1.62067
24.8408 	 1.61468
24.8998 	 1.60898
24.9588 	 1.60358
25.0178 	 1.5985
25.0768 	 1.59369
25.1358 	 1.5891
25.1948 	 1.58471
25.2539 	 1.58051
25.3129 	 1.57646
25.3719 	 1.57254
25.4309 	 1.56874
25.4899 	 1.56502
25.5489 	 1.56138
25.6079 	 1.55777
25.6669 	 1.55419
25.7259 	 1.55061
25.785 	 1.54701
25.844 	 1.54336
25.903 	 1.53965
25.962 	 1.53584
26.021 	 1.53193
26.08 	 1.52794
26.139 	 1.52391
26.198 	 1.51983
26.2571 	 1.51573
26.3161 	 1.51161
26.3751 	 1.50749
26.4341 	 1.50338
26.4931 	 1.49929
26.5521 	 1.49523
26.6111 	 1.49121
26.6701 	 1.48725
26.7291 	 1.48335
26.7882 	 1.47954
26.8472 	 1.47581
26.9062 	 1.47219
26.9652 	 1.46868
27.0242 	 1.4653
27.0832 	 1.46209
27.1422 	 1.45902
27.2012 	 1.45609
27.2603 	 1.45326
27.3193 	 1.45051
27.3783 	 1.44782
27.4373 	 1.44516
27.4963 	 1.4425
27.5553 	 1.43983
27.6143 	 1.43712
27.6733 	 1.43434
27.7323 	 1.43147
27.7914 	 1.42849
27.8504 	 1.42536
27.9094 	 1.42208
27.9684 	 1.41861
28.0274 	 1.41494
28.0864 	 1.4111
28.1454 	 1.40711
28.2044 	 1.40297
28.2635 	 1.39867
28.3225 	 1.39423
28.3815 	 1.38965
28.4405 	 1.38492
28.4995 	 1.38005
28.5585 	 1.37504
28.6175 	 1.36989
28.6765 	 1.36461
28.7355 	 1.35919
28.7946 	 1.35365
28.8536 	 1.34797
28.9126 	 1.34216
28.9716 	 1.33623
29.0306 	 1.33014
29.0896 	 1.32367
29.1486 	 1.31683
29.2076 	 1.30966
29.2667 	 1.30219
29.3257 	 1.29447
29.3847 	 1.28652
29.4437 	 1.2784
29.5027 	 1.27013
29.5617 	 1.26176
29.6207 	 1.25332
29.6797 	 1.24485
29.7387 	 1.23639
29.7978 	 1.22797
29.8568 	 1.21964
29.9158 	 1.21143
29.9748 	 1.20338
30.0338 	 1.19546
30.0928 	 1.18738
30.1518 	 1.17915
30.2108 	 1.17081
30.2699 	 1.16238
30.3289 	 1.15392
30.3879 	 1.14545
30.4469 	 1.13702
30.5059 	 1.12866
30.5649 	 1.12041
30.6239 	 1.11231
30.6829 	 1.10439
30.7419 	 1.0967
30.801 	 1.08928
30.86 	 1.08215
30.919 	 1.07536
30.978 	 1.06895
31.037 	 1.0629
31.096 	 1.05698
31.155 	 1.0512
31.214 	 1.04554
31.2731 	 1.04001
31.3321 	 1.03461
31.3911 	 1.02935
31.4501 	 1.02422
31.5091 	 1.01923
31.5681 	 1.01438
31.6271 	 1.00967
31.6861 	 1.00511
31.7451 	 1.00069
31.8042 	 0.996422
31.8632 	 0.992301
31.9222 	 0.988332
31.9812 	 0.984516
32.0402 	 0.980821
32.0992 	 0.977144
32.1582 	 0.973493
32.2172 	 0.969884
32.2763 	 0.966331
32.3353 	 0.96285
32.3943 	 0.959457
32.4533 	 0.956167
32.5123 	 0.952995
32.5713 	 0.949957
32.6303 	 0.947068
32.6893 	 0.944344
32.7483 	 0.9418
32.8074 	 0.939452
32.8664 	 0.937314
32.9254 	 0.935402
32.9844 	 0.933732
33.0434 	 0.932249
33.1024 	 0.930782
33.1614 	 0.929333
33.2204 	 0.927912
33.2795 	 0.926529
33.3385 	 0.925195
33.3975 	 0.92392
33.4565 	 0.922714
33.5155 	 0.921587
33.5745 	 0.920551
33.6335 	 0.919614
33.6925 	 0.918788
33.7516 	 0.918082
33.8106 	 0.917507
33.8696 	 0.917073
33.9286 	 0.916791
33.9876 	 0.91667
34.0466 	 0.916667
34.1056 	 0.916667
34.1646 	 0.916667
34.2236 	 0.916667
34.2827 	 0.916667
34.3417 	 0.916667
34.4007 	 0.916667
34.4597 	 0.916667
34.5187 	 0.916667
34.5777 	 0.916667
34.6367 	 0.916667
34.6957 	 0.916667
34.7548 	 0.916667
34.8138 	 0.916667
34.8728 	 0.916667
34.9318 	 0.916667
34.9908 	 0.916667
35.0498 	 0.916721
35.1088 	 0.916923
35.1678 	 0.917266
35.2268 	 0.917745
35.2859 	 0.918353
35.3449 	 0.919082
35.4039 	 0.919926
35.4629 	 0.920877
35.5219 	 0.92193
35.5809 	 0.923077
35.6399 	 0.924311
35.6989 	 0.925626
35.758 	 0.927014
35.817 	 0.928469
35.876 	 0.929984
35.935 	 0.931552
35.994 	 0.933167
36.053 	 0.935046
36.112 	 0.937496
36.171 	 0.940479
36.23 	 0.943957
36.2891 	 0.94789
36.3481 	 0.95224
36.4071 	 0.956967
36.4661 	 0.962032
36.5251 	 0.967395
36.5841 	 0.973019
36.6431 	 0.978863
36.7021 	 0.984888
36.7612 	 0.991056
36.8202 	 0.997326
36.8792 	 1.00366
36.9382 	 1.01002
36.9972 	 1.01637
37.0562 	 1.02293
37.1152 	 1.02999
37.1742 	 1.03751
37.2332 	 1.04545
37.2923 	 1.05375
37.3513 	 1.06239
37.4103 	 1.07131
37.4693 	 1.08047
37.5283 	 1.08984
37.5873 	 1.09935
37.6463 	 1.10898
37.7053 	 1.11869
37.7644 	 1.12841
37.8234 	 1.13813
37.8824 	 1.14778
37.9414 	 1.15733
38.0004 	 1.16673
38.0594 	 1.17608
38.1184 	 1.1855
38.1774 	 1.19498
38.2364 	 1.20453
38.2955 	 1.21414
38.3545 	 1.22381
38.4135 	 1.23354
38.4725 	 1.24333
38.5315 	 1.25318
38.5905 	 1.26308
38.6495 	 1.27305
38.7085 	 1.28307
38.7676 	 1.29314
38.8266 	 1.30327
38.8856 	 1.31345
38.9446 	 1.32368
39.0036 	 1.33396
39.0626 	 1.34448
39.1216 	 1.35534
39.1806 	 1.36648
39.2396 	 1.37784
39.2987 	 1.38935
39.3577 	 1.40097
39.4167 	 1.41261
39.4757 	 1.42424
39.5347 	 1.43577
39.5937 	 1.44716
39.6527 	 1.45834
39.7117 	 1.46925
39.7708 	 1.47983
39.8298 	 1.49002
39.8888 	 1.49976
39.9478 	 1.50898
40.0068 	 1.51764
40.0658 	 1.52619
40.1248 	 1.5349
40.1838 	 1.5437
40.2428 	 1.55252
40.3019 	 1.56126
40.3609 	 1.56987
40.4199 	 1.57827
40.4789 	 1.58637
40.5379 	 1.5941
40.5969 	 1.60139
40.6559 	 1.60816
40.7149 	 1.61433
40.774 	 1.61983
40.833 	 1.62459
40.892 	 1.62852
40.951 	 1.63155
41.01 	 1.63362
41.069 	 1.63531
41.128 	 1.63692
41.187 	 1.63847
41.246 	 1.63994
41.3051 	 1.64134
41.3641 	 1.64265
41.4231 	 1.64387
41.4821 	 1.64499
41.5411 	 1.64602
41.6001 	 1.64694
41.6591 	 1.64774
41.7181 	 1.64844
41.7772 	 1.64901
41.8362 	 1.64946
41.8952 	 1.64978
41.9542 	 1.64996
42.0132 	 1.64999
42.0722 	 1.64973
42.1312 	 1.64914
42.1902 	 1.64824
42.2492 	 1.64704
42.3083 	 1.64558
42.3673 	 1.64388
42.4263 	 1.64196
42.4853 	 1.63984
42.5443 	 1.63755
42.6033 	 1.63512
42.6623 	 1.63256
42.7213 	 1.62989
42.7804 	 1.62715
42.8394 	 1.62436
42.8984 	 1.62153
42.9574 	 1.6187
43.0164 	 1.61588
43.0754 	 1.61286
43.1344 	 1.6096
43.1934 	 1.60608
43.2525 	 1.6023
43.3115 	 1.59828
43.3705 	 1.594
43.4295 	 1.58948
43.4885 	 1.58471
43.5475 	 1.5797
43.6065 	 1.57444
43.6655 	 1.56895
43.7245 	 1.56321
43.7836 	 1.55724
43.8426 	 1.55103
43.9016 	 1.54459
43.9606 	 1.53792
44.0196 	 1.53098
44.0786 	 1.5233
44.1376 	 1.5148
44.1966 	 1.50553
44.2557 	 1.49555
44.3147 	 1.48491
44.3737 	 1.47369
44.4327 	 1.46193
44.4917 	 1.44969
44.5507 	 1.43704
44.6097 	 1.42404
44.6687 	 1.41074
44.7277 	 1.3972
44.7868 	 1.38348
44.8458 	 1.36964
44.9048 	 1.35574
44.9638 	 1.34184
45.0228 	 1.32792
45.0818 	 1.31329
45.1408 	 1.29787
45.1998 	 1.28176
45.2589 	 1.26506
45.3179 	 1.24789
45.3769 	 1.23036
45.4359 	 1.21256
45.4949 	 1.19461
45.5539 	 1.17661
45.6129 	 1.15866
45.6719 	 1.14089
45.7309 	 1.12339
45.79 	 1.10626
45.849 	 1.08963
45.908 	 1.07358
45.967 	 1.05824
46.026 	 1.04365
46.085 	 1.02947
46.144 	 1.01559
46.203 	 1.002
46.2621 	 0.98866
46.3211 	 0.975554
46.3801 	 0.962654
46.4391 	 0.949936
46.4981 	 0.937374
46.5571 	 0.924944
46.6161 	 0.912621
46.6751 	 0.900379
46.7341 	 0.888194
46.7932 	 0.876041
46.8522 	 0.863895
46.9112 	 0.85173
46.9702 	 0.839523
47.0292 	 0.827154
47.0882 	 0.814089
47.1472 	 0.80039
47.2062 	 0.786222
47.2653 	 0.771752
47.3243 	 0.757146
47.3833 	 0.742569
47.4423 	 0.72819
47.5013 	 0.714172
47.5603 	 0.700684
47.6193 	 0.687892
47.6783 	 0.67596
47.7373 	 0.665057
47.7964 	 0.655348
47.8554 	 0.646999
47.9144 	 0.640177
47.9734 	 0.635048
48.0324 	 0.631497
48.0914 	 0.628236
48.1504 	 0.625093
48.2094 	 0.622079
48.2685 	 0.619207
48.3275 	 0.616487
48.3865 	 0.613932
48.4455 	 0.611554
48.5045 	 0.609364
48.5635 	 0.607373
48.6225 	 0.605594
48.6815 	 0.604039
48.7405 	 0.602719
48.7996 	 0.601645
48.8586 	 0.60083
48.9176 	 0.600286
48.9766 	 0.600023
49.0356 	 0.600135
49.0946 	 0.600929
49.1536 	 0.602393
49.2126 	 0.604475
49.2717 	 0.607125
49.3307 	 0.610292
49.3897 	 0.613925
49.4487 	 0.617975
49.5077 	 0.62239
49.5667 	 0.62712
49.6257 	 0.632114
49.6847 	 0.637322
49.7437 	 0.642693
49.8028 	 0.648176
49.8618 	 0.653722
49.9208 	 0.659278
49.9798 	 0.664796
50.0388 	 0.670419
50.0978 	 0.676746
50.1568 	 0.683759
50.2158 	 0.691386
50.2749 	 0.699557
50.3339 	 0.7082
50.3929 	 0.717244
50.4519 	 0.726618
50.5109 	 0.736251
50.5699 	 0.746072
50.6289 	 0.756009
50.6879 	 0.765992
50.7469 	 0.77595
50.806 	 0.78581
50.865 	 0.795503
50.924 	 0.804956
50.983 	 0.8141
51.042 	 0.823065
51.101 	 0.832349
51.16 	 0.841913
51.219 	 0.851685
51.2781 	 0.861595
51.3371 	 0.871572
51.3961 	 0.881544
51.4551 	 0.891441
51.5141 	 0.901191
51.5731 	 0.910723
51.6321 	 0.919966
51.6911 	 0.928849
51.7502 	 0.937301
51.8092 	 0.94525
51.8682 	 0.952625
51.9272 	 0.959356
51.9862 	 0.965371
52.0452 	 0.970815
52.1042 	 0.976148
52.1632 	 0.981371
52.2222 	 0.986467
52.2813 	 0.991417
52.3403 	 0.996204
52.3993 	 1.00081
52.4583 	 1.00522
52.5173 	 1.00941
52.5763 	 1.01337
52.6353 	 1.01708
52.6943 	 1.02051
52.7534 	 1.02366
52.8124 	 1.02651
52.8714 	 1.02903
52.9304 	 1.03122
52.9894 	 1.03304
53.0484 	 1.03462
53.1074 	 1.03615
53.1664 	 1.03765
53.2254 	 1.0391
53.2845 	 1.0405
53.3435 	 1.04183
53.4025 	 1.04309
53.4615 	 1.04427
53.5205 	 1.04537
53.5795 	 1.04637
53.6385 	 1.04727
53.6975 	 1.04805
53.7566 	 1.04871
53.8156 	 1.04925
53.8746 	 1.04965
53.9336 	 1.0499
53.9926 	 1.05
54.0516 	 1.0497
54.1106 	 1.04866
54.1696 	 1.04692
54.2286 	 1.04456
54.2877 	 1.04163
54.3467 	 1.03818
54.4057 	 1.03429
54.4647 	 1.03
54.5237 	 1.02538
54.5827 	 1.02049
54.6417 	 1.01539
54.7007 	 1.01014
54.7598 	 1.00479
54.8188 	 0.999418
54.8778 	 0.994068
54.9368 	 0.988806
54.9958 	 0.98369
55.0548 	 0.978165
55.1138 	 0.971559
55.1728 	 0.964049
55.2318 	 0.95582
55.2909 	 0.947055
55.3499 	 0.937936
55.4089 	 0.928647
55.4679 	 0.91937
55.5269 	 0.91029
55.5859 	 0.901588
55.6449 	 0.893449
55.7039 	 0.886054
55.763 	 0.879588
55.822 	 0.874233
55.881 	 0.870173
55.94 	 0.86759
55.999 	 0.866667
56.058 	 0.866667
56.117 	 0.866667
56.176 	 0.866667
56.235 	 0.866667
56.2941 	 0.866667
56.3531 	 0.866667
56.4121 	 0.866667
56.4711 	 0.866667
56.5301 	 0.866667
56.5891 	 0.866667
56.6481 	 0.866667
56.7071 	 0.866667
56.7662 	 0.866667
56.8252 	 0.866667
56.8842 	 0.866667
56.9432 	 0.866667
57.0022 	 0.866668
57.0612 	 0.86766
57.1202 	 0.870395
57.1792 	 0.874721
57.2382 	 0.880488
57.2973 	 0.887542
57.3563 	 0.895734
57.4153 	 0.904912
57.4743 	 0.914924
57.5333 	 0.925619
57.5923 	 0.936847
57.6513 	 0.948455
57.7103 	 0.960292
57.7694 	 0.972207
57.8284 	 0.984049
57.8874 	 0.995666
57.9464 	 1.00691
58.0054 	 1.01763
58.0644 	 1.02844
58.1234 	 1.03979
58.1824 	 1.05163
58.2414 	 1.06389
58.3005 	 1.07652
58.3595 	 1.08946
58.4185 	 1.10265
58.4775 	 1.11602
58.5365 	 1.12953
58.5955 	 1.1431
58.6545 	 1.15669
58.7135 	 1.17023
58.7726 	 1.18366
58.8316 	 1.19692
58.8906 	 1.20996
58.9496 	 1.22271
59.0086 	 1.23512
59.0676 	 1.24745
59.1266 	 1.25983
59.1856 	 1.27225
59.2446 	 1.28467
59.3037 	 1.29708
59.3627 	 1.30944
59.4217 	 1.32174
59.4807 	 1.33394
59.5397 	 1.34602
59.5987 	 1.35796
59.6577 	 1.36973
59.7167 	 1.3813
59.7758 	 1.39265
59.8348 	 1.40376
59.8938 	 1.41459
59.9528 	 1.42513
60.0118 	 1.43537
60.0708 	 1.44582
60.1298 	 1.45667
60.1888 	 1.46779
60.2478 	 1.47906
60.3069 	 1.49035
60.3659 	 1.50155
60.4249 	 1.51254
60.4839 	 1.52318
60.5429 	 1.53337
60.6019 	 1.54297
60.6609 	 1.55188
60.7199 	 1.55995
60.779 	 1.56709
60.838 	 1.57315
60.897 	 1.57803
60.956 	 1.5816
61.015 	 1.58378
61.074 	 1.5855
61.133 	 1.58714
61.192 	 1.5887
61.2511 	 1.59018
61.3101 	 1.59157
61.3691 	 1.59288
61.4281 	 1.59408
61.4871 	 1.59519
61.5461 	 1.59619
61.6051 	 1.59709
61.6641 	 1.59787
61.7231 	 1.59854
61.7822 	 1.59909
61.8412 	 1.59951
61.9002 	 1.5998
61.9592 	 1.59997
62.0182 	 1.59996
62.0772 	 1.59934
62.1362 	 1.59799
62.1952 	 1.59597
62.2543 	 1.59335
62.3133 	 1.59019
62.3723 	 1.58654
62.4313 	 1.58247
62.4903 	 1.57803
62.5493 	 1.57329
62.6083 	 1.5683
62.6673 	 1.56313
62.7263 	 1.55783
62.7854 	 1.55246
62.8444 	 1.54709
62.9034 	 1.54177
62.9624 	 1.53656
63.0214 	 1.53147
63.0804 	 1.52593
63.1394 	 1.51982
63.1984 	 1.51323
63.2575 	 1.50625
63.3165 	 1.49894
63.3755 	 1.49139
63.4345 	 1.48367
63.4935 	 1.47586
63.5525 	 1.46805
63.6115 	 1.4603
63.6705 	 1.45271
63.7295 	 1.44534
63.7886 	 1.43827
63.8476 	 1.43159
63.9066 	 1.42537
63.9656 	 1.4197
64.0246 	 1.4146
64.0836 	 1.40975
64.1426 	 1.40509
64.2016 	 1.40058
64.2607 	 1.39622
64.3197 	 1.392
64.3787 	 1.38792
64.4377 	 1.38395
64.4967 	 1.38008
64.5557 	 1.37632
64.6147 	 1.37264
64.6737 	 1.36904
64.7327 	 1.3655
64.7918 	 1.36202
64.8508 	 1.35858
64.9098 	 1.35517
64.9688 	 1.35178
65.0278 	 1.34841
65.0868 	 1.34507
65.1458 	 1.34177
65.2048 	 1.3385
65.2639 	 1.33527
65.3229 	 1.33209
65.3819 	 1.32896
65.4409 	 1.32588
65.4999 	 1.32286
65.5589 	 1.3199
65.6179 	 1.317
65.6769 	 1.31417
65.7359 	 1.31141
65.795 	 1.30872
65.854 	 1.30611
65.913 	 1.30358
65.972 	 1.30113
66.031 	 1.29877
66.09 	 1.2965
66.149 	 1.29431
66.208 	 1.2922
66.2671 	 1.29014
66.3261 	 1.28814
66.3851 	 1.28619
66.4441 	 1.28428
66.5031 	 1.2824
66.5621 	 1.28054
66.6211 	 1.2787
66.6801 	 1.27686
66.7391 	 1.27503
66.7982 	 1.27318
66.8572 	 1.27131
66.9162 	 1.26942
66.9752 	 1.26749
67.0342 	 1.26551
67.0932 	 1.26347
67.1522 	 1.26137
67.2112 	 1.25923
67.2703 	 1.25707
67.3293 	 1.25488
67.3883 	 1.2527
67.4473 	 1.25053
67.5063 	 1.24838
67.5653 	 1.24628
67.6243 	 1.24423
67.6833 	 1.24225
67.7423 	 1.24034
67.8014 	 1.23854
67.8604 	 1.23684
67.9194 	 1.23526
67.9784 	 1.23382
68.0374 	 1.23252
68.0964 	 1.23129
68.1554 	 1.23013
68.2144 	 1.22902
68.2735 	 1.22797
68.3325 	 1.22697
68.3915 	 1.226
68.4505 	 1.22507
68.5095 	 1.22416
68.5685 	 1.22327
68.6275 	 1.22239
68.6865 	 1.22152
68.7455 	 1.22064
68.8046 	 1.21975
68.8636 	 1.21885
68.9226 	 1.21793
68.9816 	 1.21697
69.0406 	 1.21596
69.0996 	 1.21486
69.1586 	 1.21367
69.2176 	 1.21242
69.2767 	 1.21113
69.3357 	 1.20982
69.3947 	 1.20852
69.4537 	 1.20723
69.5127 	 1.20599
69.5717 	 1.2048
69.6307 	 1.20371
69.6897 	 1.20271
69.7487 	 1.20184
69.8078 	 1.20111
69.8668 	 1.20055
69.9258 	 1.20018
69.9848 	 1.20001
70.0438 	 1.20004
70.1028 	 1.20024
70.1618 	 1.20058
70.2208 	 1.20107
70.2799 	 1.20168
70.3389 	 1.20242
70.3979 	 1.20327
70.4569 	 1.20423
70.5159 	 1.20529
70.5749 	 1.20645
70.6339 	 1.20768
70.6929 	 1.20899
70.752 	 1.21036
70.811 	 1.21179
70.87 	 1.21327
70.929 	 1.21479
70.988 	 1.21635
71.047 	 1.21806
71.106 	 1.22021
71.165 	 1.22276
71.224 	 1.22569
71.2831 	 1.22895
71.3421 	 1.23252
71.4011 	 1.23637
71.4601 	 1.24045
71.5191 	 1.24474
71.5781 	 1.24921
71.6371 	 1.25382
71.6961 	 1.25854
71.7552 	 1.26334
71.8142 	 1.26818
71.8732 	 1.27303
71.9322 	 1.27786
71.9912 	 1.28263
72.0502 	 1.28739
72.1092 	 1.29226
72.1682 	 1.29724
72.2272 	 1.30235
72.2863 	 1.30758
72.3453 	 1.31295
72.4043 	 1.31846
72.4633 	 1.32411
72.5223 	 1.32992
72.5813 	 1.33589
72.6403 	 1.34202
72.6993 	 1.34833
72.7584 	 1.35481
72.8174 	 1.36147
72.8764 	 1.36833
72.9354 	 1.37538
72.9944 	 1.38263
73.0534 	 1.39015
73.1124 	 1.39801
73.1714 	 1.40619
73.2304 	 1.41469
73.2895 	 1.4235
73.3485 	 1.43261
73.4075 	 1.44201
73.4665 	 1.45168
73.5255 	 1.46162
73.5845 	 1.47182
73.6435 	 1.48226
73.7025 	 1.49294
73.7616 	 1.50384
73.8206 	 1.51497
73.8796 	 1.52629
73.9386 	 1.53781
73.9976 	 1.54952
74.0566 	 1.56161
74.1156 	 1.57429
74.1746 	 1.58751
74.2336 	 1.60121
74.2927 	 1.61535
74.3517 	 1.62988
74.4107 	 1.64474
74.4697 	 1.65988
74.5287 	 1.67524
74.5877 	 1.69079
74.6467 	 1.70646
74.7057 	 1.7222
74.7648 	 1.73796
74.8238 	 1.7537
74.8828 	 1.76935
74.9418 	 1.78487
75.0008 	 1.80021
75.0598 	 1.8155
75.1188 	 1.83089
75.1778 	 1.84639
75.2368 	 1.86197
75.2959 	 1.87763
75.3549 	 1.89336
75.4139 	 1.90915
75.4729 	 1.92497
75.5319 	 1.94084
75.5909 	 1.95673
75.6499 	 1.97263
75.7089 	 1.98853
75.768 	 2.00443
75.827 	 2.02031
75.886 	 2.03616
75.945 	 2.05197
76.004 	 2.06773
76.063 	 2.08375
76.122 	 2.10018
76.181 	 2.11695
76.24 	 2.13395
76.2991 	 2.1511
76.3581 	 2.1683
76.4171 	 2.18546
76.4761 	 2.20249
76.5351 	 2.2193
76.5941 	 2.2358
76.6531 	 2.25188
76.7121 	 2.26747
76.7712 	 2.28247
76.8302 	 2.29678
76.8892 	 2.31032
76.9482 	 2.323
77.0072 	 2.33471
77.0662 	 2.34581
77.1252 	 2.35655
77.1842 	 2.36695
77.2432 	 2.37701
77.3023 	 2.38677
77.3613 	 2.39622
77.4203 	 2.40538
77.4793 	 2.41427
77.5383 	 2.42291
77.5973 	 2.43131
77.6563 	 2.43948
77.7153 	 2.44744
77.7744 	 2.4552
77.8334 	 2.46278
77.8924 	 2.4702
77.9514 	 2.47746
78.0104 	 2.48459
78.0694 	 2.49193
78.1284 	 2.49956
78.1874 	 2.50741
78.2464 	 2.51535
78.3055 	 2.52331
78.3645 	 2.53117
78.4235 	 2.53884
78.4825 	 2.54621
78.5415 	 2.55321
78.6005 	 2.55971
78.6595 	 2.56563
78.7185 	 2.57086
78.7776 	 2.57531
78.8366 	 2.57887
78.8956 	 2.58146
78.9546 	 2.58297
79.0136 	 2.58332
79.0726 	 2.58309
79.1316 	 2.58253
79.1906 	 2.58169
79.2496 	 2.58056
79.3087 	 2.57918
79.3677 	 2.57756
79.4267 	 2.57572
79.4857 	 2.57367
79.5447 	 2.57144
79.6037 	 2.56904
79.6627 	 2.5665
79.7217 	 2.56382
79.7808 	 2.56103
79.8398 	 2.55815
79.8988 	 2.5552
79.9578 	 2.55218
80.0168 	 2.54909
80.0758 	 2.5453
80.1348 	 2.54067
80.1938 	 2.53528
80.2529 	 2.52922
80.3119 	 2.52259
80.3709 	 2.51547
80.4299 	 2.50796
80.4889 	 2.50014
80.5479 	 2.49212
80.6069 	 2.48397
80.6659 	 2.4758
80.7249 	 2.46768
80.784 	 2.45972
80.843 	 2.452
80.902 	 2.44461
80.961 	 2.43766
81.02 	 2.43119
81.079 	 2.42492
81.138 	 2.41874
81.197 	 2.41265
81.2561 	 2.40664
81.3151 	 2.40069
81.3741 	 2.3948
81.4331 	 2.38895
81.4921 	 2.38315
81.5511 	 2.37737
81.6101 	 2.37161
81.6691 	 2.36586
81.7281 	 2.3601
81.7872 	 2.35434
81.8462 	 2.34856
81.9052 	 2.34275
81.9642 	 2.3369
82.0232 	 2.33096
82.0822 	 2.32449
82.1412 	 2.3175
82.2002 	 2.3101
82.2593 	 2.30243
82.3183 	 2.2946
82.3773 	 2.28674
82.4363 	 2.27897
82.4953 	 2.27142
82.5543 	 2.26421
82.6133 	 2.25746
82.6723 	 2.25129
82.7313 	 2.24583
82.7904 	 2.2412
82.8494 	 2.23753
82.9084 	 2.23494
82.9674 	 2.23354
83.0264 	 2.23333
83.0854 	 2.23333
83.1444 	 2.23333
83.2034 	 2.23333
83.2625 	 2.23333
83.3215 	 2.23333
83.3805 	 2.23333
83.4395 	 2.23333
83.4985 	 2.23333
83.5575 	 2.23333
83.6165 	 2.23333
83.6755 	 2.23333
83.7345 	 2.23333
83.7936 	 2.23333
83.8526 	 2.23333
83.9116 	 2.23333
83.9706 	 2.23333
84.0296 	 2.23364
84.0886 	 2.23597
84.1476 	 2.24041
84.2066 	 2.24672
84.2657 	 2.25469
84.3247 	 2.26408
84.3837 	 2.27467
84.4427 	 2.28622
84.5017 	 2.29851
84.5607 	 2.31131
84.6197 	 2.32439
84.6787 	 2.33752
84.7377 	 2.35048
84.7968 	 2.36303
84.8558 	 2.37495
84.9148 	 2.38601
84.9738 	 2.39598
85.0328 	 2.40483
85.0918 	 2.41336
85.1508 	 2.42172
85.2098 	 2.42992
85.2689 	 2.43798
85.3279 	 2.44591
85.3869 	 2.45374
85.4459 	 2.46148
85.5049 	 2.46915
85.5639 	 2.47678
85.6229 	 2.48437
85.6819 	 2.49195
85.7409 	 2.49953
85.8 	 2.50714
85.859 	 2.51478
85.918 	 2.52249
85.977 	 2.53027
86.036 	 2.53819
86.095 	 2.54637
86.154 	 2.55476
86.213 	 2.56333
86.2721 	 2.572
86.3311 	 2.58073
86.3901 	 2.58947
86.4491 	 2.59815
86.5081 	 2.60672
86.5671 	 2.61514
86.6261 	 2.62333
86.6851 	 2.63125
86.7441 	 2.63885
86.8032 	 2.64606
86.8622 	 2.65284
86.9212 	 2.65913
86.9802 	 2.66487
87.0392 	 2.67018
87.0982 	 2.67557
87.1572 	 2.68102
87.2162 	 2.68648
87.2753 	 2.69189
87.3343 	 2.6972
87.3933 	 2.70236
87.4523 	 2.7073
87.5113 	 2.71198
87.5703 	 2.71634
87.6293 	 2.72033
87.6883 	 2.72389
87.7473 	 2.72696
87.8064 	 2.72949
87.8654 	 2.73143
87.9244 	 2.73272
87.9834 	 2.7333
88.0424 	 2.73333
88.1014 	 2.73333
88.1604 	 2.73333
88.2194 	 2.73333
88.2785 	 2.73333
88.3375 	 2.73333
88.3965 	 2.73333
88.4555 	 2.73333
88.5145 	 2.73333
88.5735 	 2.73333
88.6325 	 2.73333
88.6915 	 2.73333
88.7506 	 2.73333
88.8096 	 2.73333
88.8686 	 2.73333
88.9276 	 2.73333
88.9866 	 2.73333
89.0456 	 2.73314
89.1046 	 2.73237
89.1636 	 2.73103
89.2226 	 2.7292
89.2817 	 2.72692
89.3407 	 2.72425
89.3997 	 2.72124
89.4587 	 2.71793
89.5177 	 2.71439
89.5767 	 2.71067
89.6357 	 2.70682
89.6947 	 2.70289
89.7538 	 2.69893
89.8128 	 2.695
89.8718 	 2.69116
89.9308 	 2.68745
89.9898 	 2.68392
90.0488 	 2.68054
90.1078 	 2.67715
90.1668 	 2.67374
90.2258 	 2.67028
90.2849 	 2.66679
90.3439 	 2.66323
90.4029 	 2.6596
90.4619 	 2.6559
90.5209 	 2.65211
90.5799 	 2.64822
90.6389 	 2.64421
90.6979 	 2.64009
90.757 	 2.63583
90.816 	 2.63143
90.875 	 2.62687
90.934 	 2.62215
90.993 	 2.61726
91.052 	 2.61214
91.111 	 2.60673
91.17 	 2.60105
91.229 	 2.59511
91.2881 	 2.58892
91.3471 	 2.5825
91.4061 	 2.57586
91.4651 	 2.56902
91.5241 	 2.56199
91.5831 	 2.55478
91.6421 	 2.54741
91.7011 	 2.53988
91.7602 	 2.53223
91.8192 	 2.52445
91.8782 	 2.51656
91.9372 	 2.50858
91.9962 	 2.50052
92.0552 	 2.49231
92.1142 	 2.48385
92.1732 	 2.47515
92.2322 	 2.46622
92.2913 	 2.45707
92.3503 	 2.4477
92.4093 	 2.43814
92.4683 	 2.42838
92.5273 	 2.41844
92.5863 	 2.40832
92.6453 	 2.39804
92.7043 	 2.38761
92.7634 	 2.37703
92.8224 	 2.36631
92.8814 	 2.35547
92.9404 	 2.34451
92.9994 	 2.33345
93.0584 	 2.32219
93.1174 	 2.31066
93.1764 	 2.29888
93.2354 	 2.28687
93.2945 	 2.27462
93.3535 	 2.26217
93.4125 	 2.24953
93.4715 	 2.23672
93.5305 	 2.22374
93.5895 	 2.21062
93.6485 	 2.19737
93.7075 	 2.18401
93.7666 	 2.17055
93.8256 	 2.15701
93.8846 	 2.14341
93.9436 	 2.12975
94.0026 	 2.11606
94.0616 	 2.1021
94.1206 	 2.08768
94.1796 	 2.0729
94.2386 	 2.05781
94.2977 	 2.04248
94.3567 	 2.02699
94.4157 	 2.0114
94.4747 	 1.99578
94.5337 	 1.9802
94.5927 	 1.96474
94.6517 	 1.94946
94.7107 	 1.93442
94.7698 	 1.91971
94.8288 	 1.90539
94.8878 	 1.89152
94.9468 	 1.87818
95.0058 	 1.86544
95.0648 	 1.85292
95.1238 	 1.84036
95.1828 	 1.82783
95.2418 	 1.81536
95.3009 	 1.80301
95.3599 	 1.79083
95.4189 	 1.77887
95.4779 	 1.76718
95.5369 	 1.75581
95.5959 	 1.7448
95.6549 	 1.73422
95.7139 	 1.72411
95.773 	 1.71451
95.832 	 1.70548
95.891 	 1.69707
95.95 	 1.68933
96.009 	 1.68231
96.068 	 1.67585
96.127 	 1.66983
96.186 	 1.66419
96.245 	 1.65889
96.3041 	 1.65388
96.3631 	 1.64911
96.4221 	 1.64453
96.4811 	 1.6401
96.5401 	 1.63577
96.5991 	 1.63149
96.6581 	 1.62721
96.7171 	 1.62288
96.7762 	 1.61846
96.8352 	 1.6139
96.8942 	 1.60915
96.9532 	 1.60416
97.0122 	 1.59889
97.0712 	 1.59339
97.1302 	 1.58774
97.1892 	 1.58194
97.2482 	 1.57603
97.3073 	 1.57002
97.3663 	 1.56394
97.4253 	 1.5578
97.4843 	 1.55164
97.5433 	 1.54547
97.6023 	 1.53932
97.6613 	 1.53321
97.7203 	 1.52716
97.7794 	 1.52119
97.8384 	 1.51533
97.8974 	 1.5096
97.9564 	 1.50402
98.0154 	 1.49859
98.0744 	 1.49303
98.1334 	 1.48727
98.1924 	 1.48135
98.2515 	 1.47535
98.3105 	 1.46932
98.3695 	 1.46332
98.4285 	 1.4574
98.4875 	 1.45164
98.5465 	 1.44608
98.6055 	 1.44079
98.6645 	 1.43583
98.7235 	 1.43125
98.7826 	 1.42711
98.8416 	 1.42348
98.9006 	 1.42041
98.9596 	 1.41796
99.0186 	 1.41616
99.0776 	 1.41455
99.1366 	 1.413
99.1956 	 1.41149
99.2547 	 1.41005
99.3137 	 1.40868
99.3727 	 1.40738
99.4317 	 1.40617
99.4907 	 1.40504
99.5497 	 1.40401
99.6087 	 1.40308
99.6677 	 1.40226
99.7267 	 1.40156
99.7858 	 1.40098
99.8448 	 1.40053
99.9038 	 1.40022
99.9628 	 1.40005
100.022 	 1.4001
100.081 	 1.40118
100.14 	 1.40341
100.199 	 1.40669
100.258 	 1.4109
100.317 	 1.41594
100.376 	 1.42171
100.435 	 1.4281
100.494 	 1.435
100.553 	 1.44231
100.612 	 1.44993
100.671 	 1.45774
100.73 	 1.46565
100.789 	 1.47354
100.848 	 1.48131
100.907 	 1.48886
100.966 	 1.49608
101.025 	 1.50294
101.084 	 1.51003
101.143 	 1.51746
101.202 	 1.52517
101.261 	 1.53311
101.32 	 1.54125
101.379 	 1.54953
101.438 	 1.5579
101.497 	 1.56633
101.556 	 1.57476
101.615 	 1.58314
101.674 	 1.59143
101.733 	 1.59959
101.792 	 1.60756
101.851 	 1.6153
101.91 	 1.62276
101.969 	 1.62989
102.028 	 1.63668
102.087 	 1.64325
102.146 	 1.64965
102.205 	 1.65589
102.264 	 1.66199
102.323 	 1.66797
102.382 	 1.67386
102.441 	 1.67965
102.5 	 1.68538
102.559 	 1.69106
102.618 	 1.69671
102.677 	 1.70235
102.736 	 1.70799
102.795 	 1.71366
102.854 	 1.71936
102.913 	 1.72512
102.972 	 1.73096
103.031 	 1.7369
103.09 	 1.74295
103.149 	 1.74911
103.208 	 1.75534
103.267 	 1.76163
103.326 	 1.76794
103.385 	 1.77426
103.444 	 1.78055
103.504 	 1.78681
103.563 	 1.79299
103.622 	 1.79909
103.681 	 1.80506
103.74 	 1.8109
103.799 	 1.81657
103.858 	 1.82205
103.917 	 1.82732
103.976 	 1.83236
104.035 	 1.83717
104.094 	 1.84192
104.153 	 1.84661
104.212 	 1.85124
104.271 	 1.8558
104.33 	 1.86028
104.389 	 1.86466
104.448 	 1.86895
104.507 	 1.87312
104.566 	 1.87718
104.625 	 1.88111
104.684 	 1.88491
104.743 	 1.88856
104.802 	 1.89205
104.861 	 1.89539
104.92 	 1.89855
104.979 	 1.90153
105.038 	 1.90434
105.097 	 1.90704
105.156 	 1.90966
105.215 	 1.91219
105.274 	 1.91463
105.333 	 1.91699
105.392 	 1.91928
105.451 	 1.92149
105.51 	 1.92363
105.569 	 1.92571
105.628 	 1.92772
105.687 	 1.92968
105.746 	 1.93159
105.805 	 1.93344
105.864 	 1.93525
105.923 	 1.93702
105.982 	 1.93875
106.041 	 1.94043
106.1 	 1.94202
106.159 	 1.94355
106.218 	 1.94501
106.277 	 1.94641
106.336 	 1.94777
106.395 	 1.94909
106.454 	 1.95039
106.513 	 1.95167
106.572 	 1.95295
106.631 	 1.95423
106.69 	 1.95553
106.749 	 1.95685
106.808 	 1.9582
106.867 	 1.9596
106.926 	 1.96105
106.985 	 1.96257
107.044 	 1.96416
107.103 	 1.96581
107.162 	 1.96752
107.221 	 1.96929
107.28 	 1.97109
107.339 	 1.97293
107.398 	 1.97479
107.457 	 1.97667
107.516 	 1.97856
107.575 	 1.98044
107.634 	 1.98232
107.693 	 1.98418
107.752 	 1.98602
107.811 	 1.98782
107.87 	 1.98958
107.929 	 1.99129
107.988 	 1.99294
108.047 	 1.99452
108.106 	 1.99604
108.165 	 1.99749
108.224 	 1.99889
108.283 	 2.00026
108.342 	 2.0016
108.401 	 2.00292
108.46 	 2.00424
108.52 	 2.00556
108.579 	 2.0069
108.638 	 2.00827
108.697 	 2.00968
108.756 	 2.01113
108.815 	 2.01265
108.874 	 2.01424
108.933 	 2.01591
108.992 	 2.01767
109.051 	 2.01965
109.11 	 2.02201
109.169 	 2.02468
109.228 	 2.02761
109.287 	 2.03073
109.346 	 2.03397
109.405 	 2.03728
109.464 	 2.04058
109.523 	 2.04381
109.582 	 2.04691
109.641 	 2.04981
109.7 	 2.05245
109.759 	 2.05476
109.818 	 2.05669
109.877 	 2.05816
109.936 	 2.05911
109.995 	 2.05948
110.054 	 2.05933
110.113 	 2.05884
110.172 	 2.05805
110.231 	 2.05702
110.29 	 2.05577
110.349 	 2.05437
110.408 	 2.05285
110.467 	 2.05126
110.526 	 2.04965
110.585 	 2.04805
110.644 	 2.04652
110.703 	 2.0451
110.762 	 2.04384
110.821 	 2.04277
110.88 	 2.04195
110.939 	 2.04142
110.998 	 2.04122
111.057 	 2.04145
111.116 	 2.04213
111.175 	 2.04323
111.234 	 2.04473
111.293 	 2.04659
111.352 	 2.04879
111.411 	 2.05128
111.47 	 2.05404
111.529 	 2.05703
111.588 	 2.06023
111.647 	 2.06361
111.706 	 2.06712
111.765 	 2.07075
111.824 	 2.07445
111.883 	 2.0782
111.942 	 2.08197
112.001 	 2.08572
112.06 	 2.08964
112.119 	 2.09392
112.178 	 2.09855
112.237 	 2.10352
112.296 	 2.10883
112.355 	 2.11447
112.414 	 2.12043
112.473 	 2.1267
112.532 	 2.13328
112.591 	 2.14016
112.65 	 2.14733
112.709 	 2.15479
112.768 	 2.16252
112.827 	 2.17053
112.886 	 2.1788
112.945 	 2.18732
113.004 	 2.19609
113.063 	 2.20545
113.122 	 2.21563
113.181 	 2.22659
113.24 	 2.23827
113.299 	 2.25063
113.358 	 2.26364
113.417 	 2.27724
113.476 	 2.29139
113.536 	 2.30606
113.595 	 2.32118
113.654 	 2.33673
113.713 	 2.35265
113.772 	 2.3689
113.831 	 2.38545
113.89 	 2.40223
113.949 	 2.41921
114.008 	 2.43636
114.067 	 2.45406
114.126 	 2.47255
114.185 	 2.49178
114.244 	 2.5117
114.303 	 2.53227
114.362 	 2.55343
114.421 	 2.57515
114.48 	 2.59736
114.539 	 2.62003
114.598 	 2.64311
114.657 	 2.66655
114.716 	 2.6903
114.775 	 2.71432
114.834 	 2.73856
114.893 	 2.76298
114.952 	 2.78751
115.011 	 2.81214
115.07 	 2.83742
115.129 	 2.86356
115.188 	 2.89046
115.247 	 2.918
115.306 	 2.94609
115.365 	 2.97461
115.424 	 3.00347
115.483 	 3.03255
115.542 	 3.06174
115.601 	 3.09095
115.66 	 3.12007
115.719 	 3.14898
115.778 	 3.17759
115.837 	 3.20578
115.896 	 3.23345
115.955 	 3.2605
116.014 	 3.28684
116.073 	 3.3129
116.132 	 3.33887
116.191 	 3.36473
116.25 	 3.39045
116.309 	 3.41602
116.368 	 3.44141
116.427 	 3.4666
116.486 	 3.49157
116.545 	 3.51629
116.604 	 3.54075
116.663 	 3.56492
116.722 	 3.58878
116.781 	 3.6123
116.84 	 3.63546
116.899 	 3.65825
116.958 	 3.68064
117.017 	 3.70263
117.076 	 3.72468
117.135 	 3.74688
117.194 	 3.76912
117.253 	 3.79133
117.312 	 3.81341
117.371 	 3.83527
117.43 	 3.85682
117.489 	 3.87796
117.548 	 3.89862
117.607 	 3.9187
117.666 	 3.9381
117.725 	 3.95673
117.784 	 3.97452
117.843 	 3.99135
117.902 	 4.00715
117.961 	 4.02183
118.02 	 4.03538
118.079 	 4.04893
118.138 	 4.0627
118.197 	 4.07654
118.256 	 4.09032
118.315 	 4.10389
118.374 	 4.11712
118.433 	 4.12987
118.492 	 4.14199
118.552 	 4.15335
118.611 	 4.1638
118.67 	 4.17321
118.729 	 4.18143
118.788 	 4.18832
118.847 	 4.19375
118.906 	 4.19757
118.965 	 4.19965
119.024 	 4.19994
119.083 	 4.19931
119.142 	 4.198
119.201 	 4.19607
119.26 	 4.19356
119.319 	 4.19052
119.378 	 4.18698
119.437 	 4.18299
119.496 	 4.1786
119.555 	 4.17384
119.614 	 4.16877
119.673 	 4.16342
119.732 	 4.15784
119.791 	 4.15207
119.85 	 4.14616
119.909 	 4.14016
119.968 	 4.13409
120.027 	 4.1279
120.086 	 4.12085
120.145 	 4.11283
120.204 	 4.10392
120.263 	 4.09418
120.322 	 4.08368
120.381 	 4.07248
120.44 	 4.06065
120.499 	 4.04825
120.558 	 4.03536
120.617 	 4.02203
120.676 	 4.00834
120.735 	 3.99435
120.794 	 3.98013
120.853 	 3.96574
120.912 	 3.95124
120.971 	 3.93671
121.03 	 3.92208
121.089 	 3.90661
121.148 	 3.89028
121.207 	 3.87317
121.266 	 3.85538
121.325 	 3.837
121.384 	 3.81812
121.443 	 3.79883
121.502 	 3.77922
121.561 	 3.7594
121.62 	 3.73944
121.679 	 3.71944
121.738 	 3.69949
121.797 	 3.67968
121.856 	 3.66012
121.915 	 3.64087
121.974 	 3.62205
122.033 	 3.60366
122.092 	 3.58532
122.151 	 3.56699
122.21 	 3.54868
122.269 	 3.5304
122.328 	 3.51214
122.387 	 3.49391
122.446 	 3.47571
122.505 	 3.45756
122.564 	 3.43945
122.623 	 3.4214
122.682 	 3.40339
122.741 	 3.38545
122.8 	 3.36757
122.859 	 3.34976
122.918 	 3.33202
122.977 	 3.31436
123.036 	 3.29675
123.095 	 3.27909
123.154 	 3.26137
123.213 	 3.24364
123.272 	 3.22591
123.331 	 3.2082
123.39 	 3.19056
123.449 	 3.17299
123.509 	 3.15552
123.568 	 3.13819
123.627 	 3.12101
123.686 	 3.10401
123.745 	 3.08721
123.804 	 3.07064
123.863 	 3.05433
123.922 	 3.0383
123.981 	 3.02257
124.04 	 3.00713
124.099 	 2.99185
124.158 	 2.97672
124.217 	 2.96174
124.276 	 2.94693
124.335 	 2.93227
124.394 	 2.91777
124.453 	 2.90344
124.512 	 2.88927
124.571 	 2.87527
124.63 	 2.86144
124.689 	 2.84779
124.748 	 2.83432
124.807 	 2.82102
124.866 	 2.8079
124.925 	 2.79497
124.984 	 2.78223
125.043 	 2.76965
125.102 	 2.75716
125.161 	 2.74479
125.22 	 2.73253
125.279 	 2.72039
125.338 	 2.70839
125.397 	 2.69653
125.456 	 2.68482
125.515 	 2.67327
125.574 	 2.66189
125.633 	 2.6507
125.692 	 2.63969
125.751 	 2.62888
125.81 	 2.61827
125.869 	 2.60789
125.928 	 2.59772
125.987 	 2.5878
126.046 	 2.57811
126.105 	 2.56866
126.164 	 2.55942
126.223 	 2.55037
126.282 	 2.5415
126.341 	 2.53279
126.4 	 2.52423
126.459 	 2.51579
126.518 	 2.50745
126.577 	 2.49921
126.636 	 2.49104
126.695 	 2.48293
126.754 	 2.47485
126.813 	 2.4668
126.872 	 2.45874
126.931 	 2.45067
126.99 	 2.44257
127.049 	 2.43442
127.108 	 2.4262
127.167 	 2.41794
127.226 	 2.40966
127.285 	 2.40139
127.344 	 2.39313
127.403 	 2.38493
127.462 	 2.37679
127.521 	 2.36874
127.58 	 2.36081
127.639 	 2.353
127.698 	 2.34535
127.757 	 2.33788
127.816 	 2.33061
127.875 	 2.32356
127.934 	 2.31675
127.993 	 2.3102
128.052 	 2.30395
128.111 	 2.29799
128.17 	 2.29229
128.229 	 2.2868
128.288 	 2.2815
128.347 	 2.27634
128.406 	 2.27128
128.465 	 2.2663
128.525 	 2.26134
128.584 	 2.25638
128.643 	 2.25137
128.702 	 2.24628
128.761 	 2.24107
128.82 	 2.23571
128.879 	 2.23014
128.938 	 2.22435
128.997 	 2.21828
129.056 	 2.21195
129.115 	 2.20538
129.174 	 2.19861
129.233 	 2.19165
129.292 	 2.18453
129.351 	 2.17725
129.41 	 2.16985
129.469 	 2.16234
129.528 	 2.15475
129.587 	 2.14709
129.646 	 2.13938
129.705 	 2.13165
129.764 	 2.12391
129.823 	 2.11618
129.882 	 2.10849
129.941 	 2.10085
130 	 2.09329
130.059 	 2.08579
130.118 	 2.07832
130.177 	 2.07088
130.236 	 2.06344
130.295 	 2.05601
130.354 	 2.04856
130.413 	 2.04108
130.472 	 2.03358
130.531 	 2.02602
130.59 	 2.01841
130.649 	 2.01073
130.708 	 2.00296
130.767 	 1.99511
130.826 	 1.98715
130.885 	 1.97907
130.944 	 1.97087
131.003 	 1.96253
131.062 	 1.95409
131.121 	 1.94558
131.18 	 1.93699
131.239 	 1.92832
131.298 	 1.91956
131.357 	 1.9107
131.416 	 1.90174
131.475 	 1.89266
131.534 	 1.88347
131.593 	 1.87415
131.652 	 1.8647
131.711 	 1.85511
131.77 	 1.84537
131.829 	 1.83548
131.888 	 1.82544
131.947 	 1.81522
132.006 	 1.80483
132.065 	 1.79408
132.124 	 1.7829
132.183 	 1.77134
132.242 	 1.75945
132.301 	 1.74729
132.36 	 1.73492
132.419 	 1.72239
132.478 	 1.70976
132.537 	 1.69709
132.596 	 1.68443
132.655 	 1.67184
132.714 	 1.65937
132.773 	 1.64708
132.832 	 1.63502
132.891 	 1.62326
132.95 	 1.61184
133.009 	 1.60083
133.068 	 1.59016
133.127 	 1.57978
133.186 	 1.56965
133.245 	 1.55972
133.304 	 1.54995
133.363 	 1.54032
133.422 	 1.53078
133.481 	 1.52129
133.541 	 1.51181
133.6 	 1.50232
133.659 	 1.49276
133.718 	 1.48311
133.777 	 1.47332
133.836 	 1.46336
133.895 	 1.45319
133.954 	 1.44276
134.013 	 1.43204
134.072 	 1.42077
134.131 	 1.40891
134.19 	 1.39656
134.249 	 1.38384
134.308 	 1.37085
134.367 	 1.35769
134.426 	 1.34447
134.485 	 1.33128
134.544 	 1.31824
134.603 	 1.30545
134.662 	 1.29302
134.721 	 1.28104
134.78 	 1.26962
134.839 	 1.25887
134.898 	 1.24888
134.957 	 1.23978
135.016 	 1.23162
135.075 	 1.22391
135.134 	 1.21643
135.193 	 1.20919
135.252 	 1.20217
135.311 	 1.19539
135.37 	 1.18885
135.429 	 1.18254
135.488 	 1.17646
135.547 	 1.17061
135.606 	 1.16499
135.665 	 1.15961
135.724 	 1.15446
135.783 	 1.14955
135.842 	 1.14487
135.901 	 1.14042
135.96 	 1.1362
136.019 	 1.1322
136.078 	 1.12818
136.137 	 1.12409
136.196 	 1.11999
136.255 	 1.1159
136.314 	 1.11188
136.373 	 1.10796
136.432 	 1.10419
136.491 	 1.1006
136.55 	 1.09724
136.609 	 1.09414
136.668 	 1.09135
136.727 	 1.08892
136.786 	 1.08687
136.845 	 1.08526
136.904 	 1.08412
136.963 	 1.08349
137.022 	 1.08341
137.081 	 1.08371
137.14 	 1.08436
137.199 	 1.08531
137.258 	 1.08654
137.317 	 1.08804
137.376 	 1.08977
137.435 	 1.09172
137.494 	 1.09387
137.553 	 1.09618
137.612 	 1.09863
137.671 	 1.10121
137.73 	 1.10388
137.789 	 1.10663
137.848 	 1.10942
137.907 	 1.11225
137.966 	 1.11508
138.025 	 1.11793
138.084 	 1.12114
138.143 	 1.12474
138.202 	 1.1287
138.261 	 1.13299
138.32 	 1.13757
138.379 	 1.1424
138.438 	 1.14746
138.497 	 1.1527
138.557 	 1.1581
138.616 	 1.16361
138.675 	 1.16921
138.734 	 1.17485
138.793 	 1.18051
138.852 	 1.18615
138.911 	 1.19173
138.97 	 1.19722
139.029 	 1.20262
139.088 	 1.2081
139.147 	 1.2137
139.206 	 1.21939
139.265 	 1.22517
139.324 	 1.23102
139.383 	 1.23694
139.442 	 1.24292
139.501 	 1.24894
139.56 	 1.25499
139.619 	 1.26106
139.678 	 1.26714
139.737 	 1.27321
139.796 	 1.27928
139.855 	 1.28531
139.914 	 1.29132
139.973 	 1.29727
140.032 	 1.30321
140.091 	 1.30933
140.15 	 1.31562
140.209 	 1.32204
140.268 	 1.32854
140.327 	 1.33508
140.386 	 1.34164
140.445 	 1.34815
140.504 	 1.35459
140.563 	 1.36091
140.622 	 1.36707
140.681 	 1.37303
140.74 	 1.37874
140.799 	 1.38417
140.858 	 1.38928
140.917 	 1.39403
140.976 	 1.39836
141.035 	 1.40231
141.094 	 1.40607
141.153 	 1.40968
141.212 	 1.41315
141.271 	 1.41649
141.33 	 1.4197
141.389 	 1.4228
141.448 	 1.42579
141.507 	 1.42868
141.566 	 1.43147
141.625 	 1.43419
141.684 	 1.43682
141.743 	 1.43939
141.802 	 1.4419
141.861 	 1.44436
141.92 	 1.44678
141.979 	 1.44917
142.038 	 1.45156
142.097 	 1.45405
142.156 	 1.45664
142.215 	 1.45927
142.274 	 1.46192
142.333 	 1.46456
142.392 	 1.46716
142.451 	 1.46967
142.51 	 1.47208
142.569 	 1.47433
142.628 	 1.47641
142.687 	 1.47828
142.746 	 1.47991
142.805 	 1.48126
142.864 	 1.4823
142.923 	 1.48299
142.982 	 1.48331
143.041 	 1.48322
143.1 	 1.48269
143.159 	 1.48177
143.218 	 1.4805
143.277 	 1.47891
143.336 	 1.47706
143.395 	 1.47497
143.454 	 1.47269
143.514 	 1.47027
143.573 	 1.46774
143.632 	 1.46514
143.691 	 1.46252
143.75 	 1.45992
143.809 	 1.45737
143.868 	 1.45492
143.927 	 1.45261
143.986 	 1.45049
144.045 	 1.44849
144.104 	 1.44644
144.163 	 1.44433
144.222 	 1.44219
144.281 	 1.44002
144.34 	 1.43783
144.399 	 1.43565
144.458 	 1.43348
144.517 	 1.43134
144.576 	 1.42925
144.635 	 1.42721
144.694 	 1.42524
144.753 	 1.42335
144.812 	 1.42156
144.871 	 1.41989
144.93 	 1.41833
144.989 	 1.41692
145.048 	 1.41564
145.107 	 1.41447
145.166 	 1.41339
145.225 	 1.41239
145.284 	 1.41145
145.343 	 1.41056
145.402 	 1.40971
145.461 	 1.40888
145.52 	 1.40806
145.579 	 1.40723
145.638 	 1.40639
145.697 	 1.40551
145.756 	 1.40459
145.815 	 1.40361
145.874 	 1.40256
145.933 	 1.40142
145.992 	 1.40018
146.051 	 1.39873
146.11 	 1.39694
146.169 	 1.39487
146.228 	 1.39257
146.287 	 1.39009
146.346 	 1.3875
146.405 	 1.38484
146.464 	 1.38216
146.523 	 1.37954
146.582 	 1.37701
146.641 	 1.37463
146.7 	 1.37246
146.759 	 1.37056
146.818 	 1.36897
146.877 	 1.36776
146.936 	 1.36697
146.995 	 1.36667
147.054 	 1.3668
147.113 	 1.36725
147.172 	 1.36798
147.231 	 1.369
147.29 	 1.37027
147.349 	 1.37179
147.408 	 1.37354
147.467 	 1.3755
147.526 	 1.37765
147.585 	 1.37998
147.644 	 1.38247
147.703 	 1.38511
147.762 	 1.38788
147.821 	 1.39076
147.88 	 1.39374
147.939 	 1.39679
147.998 	 1.39991
148.057 	 1.40351
148.116 	 1.408
148.175 	 1.41331
148.234 	 1.41938
148.293 	 1.42613
148.352 	 1.43348
148.411 	 1.44137
148.47 	 1.44971
148.53 	 1.45845
148.589 	 1.4675
148.648 	 1.47679
148.707 	 1.48625
148.766 	 1.49581
148.825 	 1.5054
148.884 	 1.51494
148.943 	 1.52436
149.002 	 1.53358
149.061 	 1.54296
149.12 	 1.55281
149.179 	 1.56308
149.238 	 1.57369
149.297 	 1.58461
149.356 	 1.59576
149.415 	 1.60709
149.474 	 1.61854
149.533 	 1.63006
149.592 	 1.64158
149.651 	 1.65305
149.71 	 1.6644
149.769 	 1.67559
149.828 	 1.68654
149.887 	 1.69721
149.946 	 1.70754
150.005 	 1.71746
150.064 	 1.72715
150.123 	 1.73676
150.182 	 1.74628
150.241 	 1.7557
150.3 	 1.76503
150.359 	 1.77426
150.418 	 1.78338
150.477 	 1.79239
150.536 	 1.80128
150.595 	 1.81006
150.654 	 1.81871
150.713 	 1.82723
150.772 	 1.83561
150.831 	 1.84386
150.89 	 1.85196
150.949 	 1.85991
151.008 	 1.86772
151.067 	 1.87561
151.126 	 1.88367
151.185 	 1.89186
151.244 	 1.90009
151.303 	 1.90832
151.362 	 1.91648
151.421 	 1.9245
151.48 	 1.93234
151.539 	 1.93991
151.598 	 1.94717
151.657 	 1.95405
151.716 	 1.96049
151.775 	 1.96643
151.834 	 1.9718
151.893 	 1.97654
151.952 	 1.9806
152.011 	 1.98391
152.07 	 1.98695
152.129 	 1.98994
152.188 	 1.99286
152.247 	 1.9957
152.306 	 1.99844
152.365 	 2.00106
152.424 	 2.00354
152.483 	 2.00586
152.542 	 2.008
152.601 	 2.00995
152.66 	 2.01169
152.719 	 2.0132
152.778 	 2.01446
152.837 	 2.01546
152.896 	 2.01617
152.955 	 2.01657
153.014 	 2.01666
153.073 	 2.01654
153.132 	 2.01627
153.191 	 2.01586
153.25 	 2.01531
153.309 	 2.01463
153.368 	 2.01383
153.427 	 2.01292
153.486 	 2.01191
153.546 	 2.01081
153.605 	 2.00961
153.664 	 2.00834
153.723 	 2.007
153.782 	 2.0056
153.841 	 2.00414
153.9 	 2.00264
153.959 	 2.0011
154.018 	 1.99951
154.077 	 1.99751
154.136 	 1.99501
154.195 	 1.99207
154.254 	 1.98874
154.313 	 1.98506
154.372 	 1.98109
154.431 	 1.97687
154.49 	 1.97245
154.549 	 1.96789
154.608 	 1.96323
154.667 	 1.95851
154.726 	 1.9538
154.785 	 1.94914
154.844 	 1.94457
154.903 	 1.94016
154.962 	 1.93594
155.021 	 1.93194
155.08 	 1.92788
155.139 	 1.92371
155.198 	 1.91945
155.257 	 1.91512
155.316 	 1.91076
155.375 	 1.90639
155.434 	 1.90204
155.493 	 1.89774
155.552 	 1.89351
155.611 	 1.88938
155.67 	 1.88538
155.729 	 1.88154
155.788 	 1.87788
155.847 	 1.87443
155.906 	 1.87122
155.965 	 1.86828
156.024 	 1.86561
156.083 	 1.86312
156.142 	 1.86077
156.201 	 1.85854
156.26 	 1.85642
156.319 	 1.85439
156.378 	 1.85244
156.437 	 1.85056
156.496 	 1.84873
156.555 	 1.84694
156.614 	 1.84518
156.673 	 1.84343
156.732 	 1.84168
156.791 	 1.83991
156.85 	 1.83812
156.909 	 1.83628
156.968 	 1.83438
157.027 	 1.83244
157.086 	 1.83056
157.145 	 1.82875
157.204 	 1.827
157.263 	 1.82529
157.322 	 1.8236
157.381 	 1.82191
157.44 	 1.82021
157.499 	 1.81847
157.558 	 1.81669
157.617 	 1.81484
157.676 	 1.8129
157.735 	 1.81087
157.794 	 1.80871
157.853 	 1.80641
157.912 	 1.80396
157.971 	 1.80134
158.03 	 1.79848
158.089 	 1.79513
158.148 	 1.7913
158.207 	 1.78705
158.266 	 1.78243
158.325 	 1.77751
158.384 	 1.77232
158.443 	 1.76693
158.503 	 1.7614
158.562 	 1.75578
158.621 	 1.75013
158.68 	 1.74449
158.739 	 1.73894
158.798 	 1.73351
158.857 	 1.72827
158.916 	 1.72328
158.975 	 1.71858
159.034 	 1.71418
159.093 	 1.70985
159.152 	 1.70556
159.211 	 1.70132
159.27 	 1.69712
159.329 	 1.69297
159.388 	 1.68887
159.447 	 1.68482
159.506 	 1.68083
159.565 	 1.6769
159.624 	 1.67304
159.683 	 1.66923
159.742 	 1.6655
159.801 	 1.66183
159.86 	 1.65824
159.919 	 1.65472
159.978 	 1.65127
160.037 	 1.64785
160.096 	 1.64423
160.155 	 1.64046
160.214 	 1.63657
160.273 	 1.63262
160.332 	 1.62867
160.391 	 1.62477
160.45 	 1.62097
160.509 	 1.61732
160.568 	 1.61388
160.627 	 1.6107
160.686 	 1.60783
160.745 	 1.60533
160.804 	 1.60325
160.863 	 1.60163
160.922 	 1.60054
160.981 	 1.60003
161.04 	 1.6
161.099 	 1.6
161.158 	 1.6
161.217 	 1.6
161.276 	 1.6
161.335 	 1.6
161.394 	 1.6
161.453 	 1.6
161.512 	 1.6
161.571 	 1.6
161.63 	 1.6
161.689 	 1.6
161.748 	 1.6
161.807 	 1.6
161.866 	 1.6
161.925 	 1.6
161.984 	 1.6
162.043 	 1.59988
162.102 	 1.59934
162.161 	 1.59841
162.22 	 1.59712
162.279 	 1.59553
162.338 	 1.59366
162.397 	 1.59157
162.456 	 1.58929
162.515 	 1.58686
162.574 	 1.58433
162.633 	 1.58173
162.692 	 1.57911
162.751 	 1.5765
162.81 	 1.57396
162.869 	 1.57152
162.928 	 1.56921
162.987 	 1.56709
163.046 	 1.56515
163.105 	 1.56329
163.164 	 1.56151
163.223 	 1.55977
163.282 	 1.55807
163.341 	 1.55638
163.4 	 1.55469
163.459 	 1.55298
163.519 	 1.55123
163.578 	 1.54943
163.637 	 1.54755
163.696 	 1.54559
163.755 	 1.54351
163.814 	 1.54131
163.873 	 1.53897
163.932 	 1.53646
163.991 	 1.53378
164.05 	 1.53083
164.109 	 1.52751
164.168 	 1.52384
164.227 	 1.51984
164.286 	 1.51554
164.345 	 1.51098
164.404 	 1.50617
164.463 	 1.50114
164.522 	 1.49593
164.581 	 1.49055
164.64 	 1.48504
164.699 	 1.47941
164.758 	 1.47371
164.817 	 1.46795
164.876 	 1.46216
164.935 	 1.45637
164.994 	 1.4506
165.053 	 1.44474
165.112 	 1.43857
165.171 	 1.43214
165.23 	 1.42547
165.289 	 1.41861
165.348 	 1.41158
165.407 	 1.40443
165.466 	 1.39719
165.525 	 1.38989
165.584 	 1.38257
165.643 	 1.37526
165.702 	 1.368
165.761 	 1.36083
165.82 	 1.35377
165.879 	 1.34686
165.938 	 1.34015
165.997 	 1.33366
166.056 	 1.32714
166.115 	 1.3203
166.174 	 1.31323
166.233 	 1.306
166.292 	 1.29869
166.351 	 1.29138
166.41 	 1.28414
166.469 	 1.27706
166.528 	 1.27022
166.587 	 1.26369
166.646 	 1.25755
166.705 	 1.25188
166.764 	 1.24675
166.823 	 1.24226
166.882 	 1.23847
166.941 	 1.23547
167 	 1.23333
167.059 	 1.23167
167.118 	 1.23006
167.177 	 1.22852
167.236 	 1.22704
167.295 	 1.22564
167.354 	 1.22432
167.413 	 1.22308
167.472 	 1.22193
167.531 	 1.22088
167.59 	 1.21994
167.649 	 1.2191
167.708 	 1.21837
167.767 	 1.21777
167.826 	 1.21729
167.885 	 1.21694
167.944 	 1.21673
168.003 	 1.21667
168.062 	 1.21708
168.121 	 1.21818
168.18 	 1.21993
168.239 	 1.22228
168.298 	 1.22517
168.357 	 1.22855
168.416 	 1.23238
168.475 	 1.2366
168.535 	 1.24117
168.594 	 1.24603
168.653 	 1.25112
168.712 	 1.25641
168.771 	 1.26184
168.83 	 1.26736
168.889 	 1.27291
168.948 	 1.27846
169.007 	 1.28395
169.066 	 1.28978
169.125 	 1.29623
169.184 	 1.30323
169.243 	 1.31075
169.302 	 1.31873
169.361 	 1.32715
169.42 	 1.33594
169.479 	 1.34507
169.538 	 1.3545
169.597 	 1.36417
169.656 	 1.37404
169.715 	 1.38407
169.774 	 1.39421
169.833 	 1.40442
169.892 	 1.41465
169.951 	 1.42487
170.01 	 1.43502
170.069 	 1.44539
170.128 	 1.45612
170.187 	 1.46717
170.246 	 1.47851
170.305 	 1.4901
170.364 	 1.5019
170.423 	 1.51389
170.482 	 1.52602
170.541 	 1.53826
170.6 	 1.55057
170.659 	 1.56293
170.718 	 1.57529
170.777 	 1.58762
170.836 	 1.59988
170.895 	 1.61205
170.954 	 1.62407
171.013 	 1.63594
171.072 	 1.64782
171.131 	 1.65981
171.19 	 1.67187
171.249 	 1.68399
171.308 	 1.69614
171.367 	 1.7083
171.426 	 1.72044
171.485 	 1.73256
171.544 	 1.74461
171.603 	 1.75658
171.662 	 1.76845
171.721 	 1.7802
171.78 	 1.7918
171.839 	 1.80323
171.898 	 1.81446
171.957 	 1.82548
172.016 	 1.83627
172.075 	 1.84673
172.134 	 1.85689
172.193 	 1.86679
172.252 	 1.87648
172.311 	 1.886
172.37 	 1.89539
172.429 	 1.90471
172.488 	 1.914
172.547 	 1.9233
172.606 	 1.93266
172.665 	 1.94213
172.724 	 1.95175
172.783 	 1.96156
172.842 	 1.97161
172.901 	 1.98195
172.96 	 1.99263
173.019 	 2.00371
173.078 	 2.01556
173.137 	 2.02819
173.196 	 2.04145
173.255 	 2.05522
173.314 	 2.06937
173.373 	 2.08375
173.432 	 2.09824
173.491 	 2.11271
173.551 	 2.12701
173.61 	 2.14102
173.669 	 2.1546
173.728 	 2.16762
173.787 	 2.17995
173.846 	 2.19145
173.905 	 2.20199
173.964 	 2.21144
174.023 	 2.21977
174.082 	 2.22798
174.141 	 2.23626
174.2 	 2.24453
174.259 	 2.25273
174.318 	 2.26077
174.377 	 2.26857
174.436 	 2.27606
174.495 	 2.28316
174.554 	 2.28978
174.613 	 2.29586
174.672 	 2.30132
174.731 	 2.30607
174.79 	 2.31004
174.849 	 2.31315
174.908 	 2.31533
174.967 	 2.31649
175.026 	 2.31667
175.085 	 2.31667
175.144 	 2.31667
175.203 	 2.31667
175.262 	 2.31667
175.321 	 2.31667
175.38 	 2.31667
175.439 	 2.31667
175.498 	 2.31667
175.557 	 2.31667
175.616 	 2.31667
175.675 	 2.31667
175.734 	 2.31667
175.793 	 2.31667
175.852 	 2.31667
175.911 	 2.31667
175.97 	 2.31667
176.029 	 2.31629
176.088 	 2.31333
176.147 	 2.30765
176.206 	 2.29956
176.265 	 2.28933
176.324 	 2.27725
176.383 	 2.26362
176.442 	 2.24873
176.501 	 2.23286
176.56 	 2.2163
176.619 	 2.19935
176.678 	 2.18229
176.737 	 2.16541
176.796 	 2.149
176.855 	 2.13335
176.914 	 2.11876
176.973 	 2.1055
177.032 	 2.09363
177.091 	 2.08213
177.15 	 2.0708
177.209 	 2.05964
177.268 	 2.04863
177.327 	 2.03774
177.386 	 2.02696
177.445 	 2.01627
177.504 	 2.00565
177.563 	 1.99508
177.622 	 1.98455
177.681 	 1.97403
177.74 	 1.96351
177.799 	 1.95296
177.858 	 1.94237
177.917 	 1.93172
177.976 	 1.92099
178.035 	 1.91005
178.094 	 1.89851
178.153 	 1.88645
178.212 	 1.874
178.271 	 1.86128
178.33 	 1.84842
178.389 	 1.83556
178.448 	 1.82282
178.508 	 1.81034
178.567 	 1.79823
178.626 	 1.78664
178.685 	 1.77568
178.744 	 1.7655
178.803 	 1.75621
178.862 	 1.74795
178.921 	 1.74084
178.98 	 1.73502
179.039 	 1.73031
179.098 	 1.72575
179.157 	 1.72128
179.216 	 1.71694
179.275 	 1.71274
179.334 	 1.70871
179.393 	 1.70488
179.452 	 1.70128
179.511 	 1.69792
179.57 	 1.69485
179.629 	 1.69208
179.688 	 1.68965
179.747 	 1.68757
179.806 	 1.68587
179.865 	 1.68459
179.924 	 1.68374
179.983 	 1.68335
180.042 	 1.68342
180.101 	 1.68381
180.16 	 1.6845
180.219 	 1.68548
180.278 	 1.68673
180.337 	 1.68823
180.396 	 1.68996
180.455 	 1.6919
180.514 	 1.69404
180.573 	 1.69635
180.632 	 1.69882
180.691 	 1.70143
180.75 	 1.70416
180.809 	 1.707
180.868 	 1.70992
180.927 	 1.71291
180.986 	 1.71594
181.045 	 1.71924
181.104 	 1.72331
181.163 	 1.72811
181.222 	 1.73356
181.281 	 1.7396
181.34 	 1.74615
181.399 	 1.75314
181.458 	 1.76051
181.517 	 1.76818
181.576 	 1.77608
181.635 	 1.78414
181.694 	 1.79229
181.753 	 1.80047
181.812 	 1.8086
181.871 	 1.81661
181.93 	 1.82442
181.989 	 1.83198
182.048 	 1.83937
182.107 	 1.84687
182.166 	 1.85447
182.225 	 1.86216
182.284 	 1.86994
182.343 	 1.87779
182.402 	 1.88569
182.461 	 1.89365
182.52 	 1.90164
182.579 	 1.90966
182.638 	 1.9177
182.697 	 1.92574
182.756 	 1.93378
182.815 	 1.9418
182.874 	 1.94979
182.933 	 1.95775
182.992 	 1.96565
183.051 	 1.97352
183.11 	 1.98139
183.169 	 1.98926
183.228 	 1.99713
183.287 	 2.00499
183.346 	 2.01286
183.405 	 2.02073
183.464 	 2.0286
183.524 	 2.03647
183.583 	 2.04434
183.642 	 2.0522
183.701 	 2.06007
183.76 	 2.06794
183.819 	 2.07581
183.878 	 2.08368
183.937 	 2.09154
183.996 	 2.09941
184.055 	 2.10737
184.114 	 2.1155
184.173 	 2.12378
184.232 	 2.13215
184.291 	 2.1406
184.35 	 2.14907
184.409 	 2.15753
184.468 	 2.16594
184.527 	 2.17427
184.586 	 2.18247
184.645 	 2.19051
184.704 	 2.19835
184.763 	 2.20595
184.822 	 2.21327
184.881 	 2.22028
184.94 	 2.22694
184.999 	 2.23321
185.058 	 2.2394
185.117 	 2.24583
185.176 	 2.25241
185.235 	 2.25906
185.294 	 2.26572
185.353 	 2.2723
185.412 	 2.27871
185.471 	 2.28489
185.53 	 2.29074
185.589 	 2.2962
185.648 	 2.30119
185.707 	 2.30562
185.766 	 2.30941
185.825 	 2.31249
185.884 	 2.31478
185.943 	 2.3162
186.002 	 2.31667
186.061 	 2.31667
186.12 	 2.31667
186.179 	 2.31667
186.238 	 2.31667
186.297 	 2.31667
186.356 	 2.31667
186.415 	 2.31667
186.474 	 2.31667
186.533 	 2.31667
186.592 	 2.31667
186.651 	 2.31667
186.71 	 2.31667
186.769 	 2.31667
186.828 	 2.31667
186.887 	 2.31667
186.946 	 2.31667
187.005 	 2.31666
187.064 	 2.31577
187.123 	 2.31345
187.182 	 2.30983
187.241 	 2.30507
187.3 	 2.29928
187.359 	 2.2926
187.418 	 2.28517
187.477 	 2.27712
187.536 	 2.26859
187.595 	 2.2597
187.654 	 2.2506
187.713 	 2.24142
187.772 	 2.23228
187.831 	 2.22334
187.89 	 2.21471
187.949 	 2.20654
188.008 	 2.19895
188.067 	 2.1915
188.126 	 2.18388
188.185 	 2.17612
188.244 	 2.16825
188.303 	 2.16028
188.362 	 2.15224
188.421 	 2.14414
188.48 	 2.13602
188.54 	 2.12789
188.599 	 2.11978
188.658 	 2.1117
188.717 	 2.10368
188.776 	 2.09574
188.835 	 2.0879
188.894 	 2.08019
188.953 	 2.07262
189.012 	 2.06521
189.071 	 2.05755
189.13 	 2.0495
189.189 	 2.04117
189.248 	 2.03265
189.307 	 2.02404
189.366 	 2.01544
189.425 	 2.00695
189.484 	 1.99866
189.543 	 1.99068
189.602 	 1.98311
189.661 	 1.97603
189.72 	 1.96955
189.779 	 1.96377
189.838 	 1.95879
189.897 	 1.9547
189.956 	 1.95161
190.015 	 1.94957
190.074 	 1.94789
190.133 	 1.94628
190.192 	 1.94474
190.251 	 1.94327
190.31 	 1.94189
190.369 	 1.94058
190.428 	 1.93937
190.487 	 1.93826
190.546 	 1.93724
190.605 	 1.93633
190.664 	 1.93553
190.723 	 1.93484
190.782 	 1.93428
190.841 	 1.93384
190.9 	 1.93354
190.959 	 1.93337
191.018 	 1.93333
191.077 	 1.93333
191.136 	 1.93333
191.195 	 1.93333
191.254 	 1.93333
191.313 	 1.93333
191.372 	 1.93333
191.431 	 1.93333
191.49 	 1.93333
191.549 	 1.93333
191.608 	 1.93333
191.667 	 1.93333
191.726 	 1.93333
191.785 	 1.93333
191.844 	 1.93333
191.903 	 1.93333
191.962 	 1.93333
192.021 	 1.93328
192.08 	 1.93262
192.139 	 1.93123
192.198 	 1.92919
192.257 	 1.92654
192.316 	 1.92335
192.375 	 1.91968
192.434 	 1.91559
192.493 	 1.91113
192.552 	 1.90638
192.611 	 1.90138
192.67 	 1.89619
192.729 	 1.89089
192.788 	 1.88552
192.847 	 1.88015
192.906 	 1.87484
192.965 	 1.86964
193.024 	 1.86455
193.083 	 1.85904
193.142 	 1.85304
193.201 	 1.84662
193.26 	 1.83984
193.319 	 1.83275
193.378 	 1.82543
193.437 	 1.81794
193.496 	 1.81033
193.556 	 1.80268
193.615 	 1.79505
193.674 	 1.78749
193.733 	 1.78008
193.792 	 1.77287
193.851 	 1.76594
193.91 	 1.75933
193.969 	 1.75312
194.028 	 1.74734
194.087 	 1.74183
194.146 	 1.73653
194.205 	 1.7314
194.264 	 1.72643
194.323 	 1.72159
194.382 	 1.71685
194.441 	 1.71218
194.5 	 1.70757
194.559 	 1.70297
194.618 	 1.69837
194.677 	 1.69374
194.736 	 1.68906
194.795 	 1.68429
194.854 	 1.67941
194.913 	 1.67439
194.972 	 1.66921
195.031 	 1.66383
195.09 	 1.65821
195.149 	 1.65239
195.208 	 1.64638
195.267 	 1.64024
195.326 	 1.63399
195.385 	 1.62768
195.444 	 1.62133
195.503 	 1.61499
195.562 	 1.60869
195.621 	 1.60246
195.68 	 1.59635
195.739 	 1.59038
195.798 	 1.58459
195.857 	 1.57903
195.916 	 1.57372
195.975 	 1.5687
196.034 	 1.56393
196.093 	 1.55913
196.152 	 1.55429
196.211 	 1.54944
196.27 	 1.54462
196.329 	 1.53985
196.388 	 1.53517
196.447 	 1.53062
196.506 	 1.52622
196.565 	 1.52201
196.624 	 1.51803
196.683 	 1.51429
196.742 	 1.51085
196.801 	 1.50773
196.86 	 1.50496
196.919 	 1.50258
196.978 	 1.50061
197.037 	 1.49901
197.096 	 1.49747
197.155 	 1.49597
197.214 	 1.49451
197.273 	 1.4931
197.332 	 1.49175
197.391 	 1.49048
197.45 	 1.48928
197.509 	 1.48816
197.568 	 1.48715
197.627 	 1.48623
197.686 	 1.48542
197.745 	 1.48474
197.804 	 1.48418
197.863 	 1.48375
197.922 	 1.48347
197.981 	 1.48334
198.04 	 1.48419
198.099 	 1.48837
198.158 	 1.4957
198.217 	 1.50583
198.276 	 1.51839
198.335 	 1.53304
198.394 	 1.54942
198.453 	 1.56717
198.513 	 1.58593
198.572 	 1.60536
198.631 	 1.6251
198.69 	 1.64478
198.749 	 1.66406
198.808 	 1.68257
198.867 	 1.69997
198.926 	 1.7159
198.985 	 1.73
199.044 	 1.74229
199.103 	 1.75365
199.162 	 1.76426
199.221 	 1.77425
199.28 	 1.78378
199.339 	 1.79298
199.398 	 1.80199
199.457 	 1.81097
199.516 	 1.82005
199.575 	 1.82937
199.634 	 1.83907
199.693 	 1.84931
199.752 	 1.86021
199.811 	 1.87193
199.87 	 1.88461
199.929 	 1.89838
199.988 	 1.91339
200.047 	 1.93044
200.106 	 1.95077
200.165 	 1.97411
200.224 	 2.00011
200.283 	 2.02845
200.342 	 2.05879
200.401 	 2.09079
200.46 	 2.12412
200.519 	 2.15845
200.578 	 2.19344
200.637 	 2.22877
200.696 	 2.26408
200.755 	 2.29906
200.814 	 2.33336
200.873 	 2.36665
200.932 	 2.39861
200.991 	 2.42888
201.05 	 2.45805
201.109 	 2.4875
201.168 	 2.51715
201.227 	 2.54692
201.286 	 2.5767
201.345 	 2.60641
201.404 	 2.63593
201.463 	 2.66518
201.522 	 2.69406
201.581 	 2.72248
201.64 	 2.75033
201.699 	 2.77753
201.758 	 2.80396
201.817 	 2.82955
201.876 	 2.85419
201.935 	 2.87778
201.994 	 2.90023
202.053 	 2.92193
202.112 	 2.94351
202.171 	 2.9649
202.23 	 2.98604
202.289 	 3.00684
202.348 	 3.02725
202.407 	 3.04718
202.466 	 3.06657
202.525 	 3.08535
202.584 	 3.10344
202.643 	 3.12077
202.702 	 3.13728
202.761 	 3.15288
202.82 	 3.16751
202.879 	 3.1811
202.938 	 3.19358
202.997 	 3.20487
203.056 	 3.21521
203.115 	 3.22495
203.174 	 3.23415
203.233 	 3.24285
203.292 	 3.25111
203.351 	 3.25897
203.41 	 3.26649
203.469 	 3.27371
203.529 	 3.28068
203.588 	 3.28745
203.647 	 3.29407
203.706 	 3.30059
203.765 	 3.30706
203.824 	 3.31352
203.883 	 3.32004
203.942 	 3.32665
204.001 	 3.3334
204.06 	 3.3403
204.119 	 3.34727
204.178 	 3.3543
204.237 	 3.36133
204.296 	 3.36836
204.355 	 3.37533
204.414 	 3.38222
204.473 	 3.389
204.532 	 3.39563
204.591 	 3.40209
204.65 	 3.40833
204.709 	 3.41434
204.768 	 3.42007
204.827 	 3.42549
204.886 	 3.43058
204.945 	 3.4353
205.004 	 3.43961
205.063 	 3.4438
205.122 	 3.44806
205.181 	 3.45234
205.24 	 3.45662
205.299 	 3.46084
205.358 	 3.46495
205.417 	 3.46893
205.476 	 3.47272
205.535 	 3.47629
205.594 	 3.47959
205.653 	 3.48258
205.712 	 3.48521
205.771 	 3.48745
205.83 	 3.48924
205.889 	 3.49056
205.948 	 3.49135
206.007 	 3.49158
206.066 	 3.49147
206.125 	 3.49119
206.184 	 3.49076
206.243 	 3.49018
206.302 	 3.48946
206.361 	 3.48862
206.42 	 3.48766
206.479 	 3.48659
206.538 	 3.48544
206.597 	 3.48419
206.656 	 3.48288
206.715 	 3.4815
206.774 	 3.48007
206.833 	 3.47859
206.892 	 3.47709
206.951 	 3.47556
207.01 	 3.47402
207.069 	 3.4723
207.128 	 3.47031
207.187 	 3.46808
207.246 	 3.46563
207.305 	 3.46295
207.364 	 3.46009
207.423 	 3.45705
207.482 	 3.45384
207.541 	 3.45049
207.6 	 3.44702
207.659 	 3.44343
207.718 	 3.43975
207.777 	 3.43599
207.836 	 3.43217
207.895 	 3.42831
207.954 	 3.42442
208.013 	 3.42052
208.072 	 3.41657
208.131 	 3.41254
208.19 	 3.40841
208.249 	 3.40418
208.308 	 3.39981
208.367 	 3.39529
208.426 	 3.39062
208.485 	 3.38576
208.545 	 3.38071
208.604 	 3.37545
208.663 	 3.36995
208.722 	 3.36421
208.781 	 3.35822
208.84 	 3.35194
208.899 	 3.34537
208.958 	 3.33848
209.017 	 3.33123
209.076 	 3.323
209.135 	 3.31364
209.194 	 3.30329
209.253 	 3.29208
209.312 	 3.28011
209.371 	 3.26753
209.43 	 3.25445
209.489 	 3.24099
209.548 	 3.22728
209.607 	 3.21344
209.666 	 3.19959
209.725 	 3.18587
209.784 	 3.17239
209.843 	 3.15927
209.902 	 3.14664
209.961 	 3.13463
210.02 	 3.12332
210.079 	 3.11233
210.138 	 3.10153
210.197 	 3.0909
210.256 	 3.08041
210.315 	 3.07005
210.374 	 3.05979
210.433 	 3.04962
210.492 	 3.03953
210.551 	 3.02949
210.61 	 3.01947
210.669 	 3.00948
210.728 	 2.99948
210.787 	 2.98945
210.846 	 2.97938
210.905 	 2.96925
210.964 	 2.95905
211.023 	 2.94872
211.082 	 2.93809
211.141 	 2.92717
211.2 	 2.91603
211.259 	 2.90474
211.318 	 2.89335
211.377 	 2.88194
211.436 	 2.87058
211.495 	 2.85934
211.554 	 2.84827
211.613 	 2.83745
211.672 	 2.82694
211.731 	 2.81681
211.79 	 2.80713
211.849 	 2.79797
211.908 	 2.78939
211.967 	 2.78146
212.026 	 2.77418
212.085 	 2.76716
212.144 	 2.76032
212.203 	 2.75365
212.262 	 2.74717
212.321 	 2.74088
212.38 	 2.73479
212.439 	 2.72891
212.498 	 2.72323
212.557 	 2.71777
212.616 	 2.71253
212.675 	 2.70751
212.734 	 2.70273
212.793 	 2.69819
212.852 	 2.69389
212.911 	 2.68985
212.97 	 2.68606
213.029 	 2.68249
213.088 	 2.6789
213.147 	 2.67527
213.206 	 2.67164
213.265 	 2.66805
213.324 	 2.66453
213.383 	 2.66111
213.442 	 2.65783
213.502 	 2.65472
213.561 	 2.65183
213.62 	 2.64917
213.679 	 2.6468
213.738 	 2.64474
213.797 	 2.64303
213.856 	 2.6417
213.915 	 2.64079
213.974 	 2.64033
214.033 	 2.64031
214.092 	 2.64054
214.151 	 2.64097
214.21 	 2.6416
214.269 	 2.6424
214.328 	 2.64337
214.387 	 2.64449
214.446 	 2.64576
214.505 	 2.64715
214.564 	 2.64866
214.623 	 2.65027
214.682 	 2.65197
214.741 	 2.65375
214.8 	 2.65559
214.859 	 2.65749
214.918 	 2.65943
214.977 	 2.66139
215.036 	 2.66342
215.095 	 2.6657
215.154 	 2.66827
215.213 	 2.67112
215.272 	 2.67423
215.331 	 2.67761
215.39 	 2.68126
215.449 	 2.68516
215.508 	 2.68932
215.567 	 2.69372
215.626 	 2.69838
215.685 	 2.70327
215.744 	 2.70841
215.803 	 2.71377
215.862 	 2.71937
215.921 	 2.72519
215.98 	 2.73124
216.039 	 2.7378
216.098 	 2.74582
216.157 	 2.75521
216.216 	 2.76579
216.275 	 2.7774
216.334 	 2.78986
216.393 	 2.803
216.452 	 2.81666
216.511 	 2.83065
216.57 	 2.84482
216.629 	 2.85898
216.688 	 2.87298
216.747 	 2.88663
216.806 	 2.89976
216.865 	 2.91222
216.924 	 2.92381
216.983 	 2.93439
217.042 	 2.94398
217.101 	 2.95315
217.16 	 2.96196
217.219 	 2.97045
217.278 	 2.97868
217.337 	 2.98668
217.396 	 2.99449
217.455 	 3.00216
217.514 	 3.00973
217.573 	 3.01724
217.632 	 3.02474
217.691 	 3.03227
217.75 	 3.03987
217.809 	 3.04758
217.868 	 3.05545
217.927 	 3.06351
217.986 	 3.07182
218.045 	 3.08047
218.104 	 3.08957
218.163 	 3.09905
218.222 	 3.10882
218.281 	 3.11881
218.34 	 3.12892
218.399 	 3.13909
218.458 	 3.14922
218.518 	 3.15924
218.577 	 3.16907
218.636 	 3.17861
218.695 	 3.1878
218.754 	 3.19654
218.813 	 3.20477
218.872 	 3.21239
218.931 	 3.21932
218.99 	 3.22548
219.049 	 3.23103
219.108 	 3.23636
219.167 	 3.24149
219.226 	 3.24643
219.285 	 3.25118
219.344 	 3.25575
219.403 	 3.26013
219.462 	 3.26434
219.521 	 3.26837
219.58 	 3.27224
219.639 	 3.27595
219.698 	 3.2795
219.757 	 3.28289
219.816 	 3.28613
219.875 	 3.28923
219.934 	 3.2922
219.993 	 3.29502
220.052 	 3.29779
220.111 	 3.30063
220.17 	 3.30349
220.229 	 3.30635
220.288 	 3.30919
220.347 	 3.31197
220.406 	 3.31466
220.465 	 3.31724
220.524 	 3.31967
220.583 	 3.32193
220.642 	 3.32398
220.701 	 3.32581
220.76 	 3.32737
220.819 	 3.32864
220.878 	 3.3296
220.937 	 3.3302
220.996 	 3.33043
221.055 	 3.33018
221.114 	 3.32938
221.173 	 3.32808
221.232 	 3.32631
221.291 	 3.32413
221.35 	 3.32158
221.409 	 3.3187
221.468 	 3.31555
221.527 	 3.31215
221.586 	 3.30856
221.645 	 3.30482
221.704 	 3.30098
221.763 	 3.29708
221.822 	 3.29317
221.881 	 3.28928
221.94 	 3.28547
221.999 	 3.28178
222.058 	 3.278
222.117 	 3.2739
222.176 	 3.26951
222.235 	 3.26488
222.294 	 3.26004
222.353 	 3.25502
222.412 	 3.24987
222.471 	 3.24462
222.53 	 3.23931
222.589 	 3.23398
222.648 	 3.22866
222.707 	 3.22339
222.766 	 3.21821
222.825 	 3.21316
222.884 	 3.20827
222.943 	 3.20358
223.002 	 3.19913
223.061 	 3.19482
223.12 	 3.19055
223.179 	 3.18632
223.238 	 3.18213
223.297 	 3.17799
223.356 	 3.1739
223.415 	 3.16986
223.474 	 3.16587
223.534 	 3.16194
223.593 	 3.15807
223.652 	 3.15426
223.711 	 3.15052
223.77 	 3.14684
223.829 	 3.14323
223.888 	 3.13969
223.947 	 3.13623
224.006 	 3.13284
224.065 	 3.12945
224.124 	 3.12601
224.183 	 3.12253
224.242 	 3.11906
224.301 	 3.11559
224.36 	 3.11216
224.419 	 3.10879
224.478 	 3.10551
224.537 	 3.10232
224.596 	 3.09926
224.655 	 3.09634
224.714 	 3.09359
224.773 	 3.09103
224.832 	 3.08868
224.891 	 3.08656
224.95 	 3.0847
225.009 	 3.08311
225.068 	 3.08163
225.127 	 3.08017
225.186 	 3.07873
225.245 	 3.07733
225.304 	 3.07597
225.363 	 3.07466
225.422 	 3.07342
225.481 	 3.07225
225.54 	 3.07116
225.599 	 3.07016
225.658 	 3.06926
225.717 	 3.06848
225.776 	 3.0678
225.835 	 3.06726
225.894 	 3.06686
225.953 	 3.0666
226.012 	 3.06649
226.071 	 3.06644
226.13 	 3.06639
226.189 	 3.06634
226.248 	 3.0663
226.307 	 3.06626
226.366 	 3.06622
226.425 	 3.06619
226.484 	 3.06616
226.543 	 3.06613
226.602 	 3.0661
226.661 	 3.06608
226.72 	 3.06606
226.779 	 3.06605
226.838 	 3.06604
226.897 	 3.06603
226.956 	 3.06603
227.015 	 3.06604
227.074 	 3.06645
227.133 	 3.06735
227.192 	 3.06872
227.251 	 3.07052
227.31 	 3.07272
227.369 	 3.07527
227.428 	 3.07814
227.487 	 3.08129
227.546 	 3.0847
227.605 	 3.08831
227.664 	 3.09211
227.723 	 3.09604
227.782 	 3.10007
227.841 	 3.10417
227.9 	 3.10831
227.959 	 3.11243
228.018 	 3.11656
228.077 	 3.12118
228.136 	 3.12643
228.195 	 3.13224
228.254 	 3.13852
228.313 	 3.14523
228.372 	 3.15228
228.431 	 3.15961
228.49 	 3.16715
228.55 	 3.17483
228.609 	 3.18258
228.668 	 3.19034
228.727 	 3.19804
228.786 	 3.2056
228.845 	 3.21295
228.904 	 3.22004
228.963 	 3.22679
229.022 	 3.23315
229.081 	 3.2393
229.14 	 3.24532
229.199 	 3.25122
229.258 	 3.25702
229.317 	 3.26274
229.376 	 3.26841
229.435 	 3.27403
229.494 	 3.27963
229.553 	 3.28523
229.612 	 3.29084
229.671 	 3.29649
229.73 	 3.3022
229.789 	 3.30797
229.848 	 3.31384
229.907 	 3.31982
229.966 	 3.32593
230.025 	 3.33221
230.084 	 3.33887
230.143 	 3.34587
230.202 	 3.35316
230.261 	 3.36067
230.32 	 3.36833
230.379 	 3.37606
230.438 	 3.38379
230.497 	 3.39147
230.556 	 3.39902
230.615 	 3.40637
230.674 	 3.41345
230.733 	 3.4202
230.792 	 3.42654
230.851 	 3.4324
230.91 	 3.43772
230.969 	 3.44242
231.028 	 3.44654
231.087 	 3.45059
231.146 	 3.45464
231.205 	 3.45868
231.264 	 3.46265
231.323 	 3.46652
231.382 	 3.47026
231.441 	 3.47384
231.5 	 3.47721
231.559 	 3.48035
231.618 	 3.48322
231.677 	 3.48578
231.736 	 3.488
231.795 	 3.48984
231.854 	 3.49127
231.913 	 3.49225
231.972 	 3.49275
232.031 	 3.49271
232.09 	 3.49197
232.149 	 3.49058
232.208 	 3.48855
232.267 	 3.48596
232.326 	 3.48283
232.385 	 3.47922
232.444 	 3.47517
232.503 	 3.47073
232.562 	 3.46594
232.621 	 3.46085
232.68 	 3.45551
232.739 	 3.44996
232.798 	 3.44424
232.857 	 3.4384
232.916 	 3.4325
232.975 	 3.42656
233.034 	 3.42037
233.093 	 3.41276
233.152 	 3.4038
233.211 	 3.39366
233.27 	 3.38253
233.329 	 3.37061
233.388 	 3.35809
233.447 	 3.34514
233.507 	 3.33197
233.566 	 3.31876
233.625 	 3.3057
233.684 	 3.29298
233.743 	 3.28079
233.802 	 3.26931
233.861 	 3.25875
233.92 	 3.24928
233.979 	 3.2411
234.038 	 3.23419
234.097 	 3.22788
234.156 	 3.22203
234.215 	 3.2166
234.274 	 3.21151
234.333 	 3.20671
234.392 	 3.20212
234.451 	 3.19769
234.51 	 3.19336
234.569 	 3.18906
234.628 	 3.18473
234.687 	 3.1803
234.746 	 3.17572
234.805 	 3.17092
234.864 	 3.16584
234.923 	 3.16041
234.982 	 3.15457
235.041 	 3.14807
235.1 	 3.14037
235.159 	 3.13165
235.218 	 3.1221
235.277 	 3.11194
235.336 	 3.10137
235.395 	 3.09059
235.454 	 3.07981
235.513 	 3.06924
235.572 	 3.05907
235.631 	 3.04953
235.69 	 3.04081
235.749 	 3.03311
235.808 	 3.02665
235.867 	 3.02163
235.926 	 3.01826
235.985 	 3.01673
236.044 	 3.01679
236.103 	 3.01735
236.162 	 3.01833
236.221 	 3.01971
236.28 	 3.02147
236.339 	 3.02357
236.398 	 3.026
236.457 	 3.02873
236.516 	 3.03174
236.575 	 3.035
236.634 	 3.03849
236.693 	 3.04219
236.752 	 3.04607
236.811 	 3.0501
236.87 	 3.05427
236.929 	 3.05855
236.988 	 3.06291
237.047 	 3.06776
237.106 	 3.07391
237.165 	 3.08125
237.224 	 3.08967
237.283 	 3.09904
237.342 	 3.10926
237.401 	 3.12019
237.46 	 3.13172
237.519 	 3.14372
237.578 	 3.15608
237.637 	 3.16868
237.696 	 3.18139
237.755 	 3.19409
237.814 	 3.20667
237.873 	 3.219
237.932 	 3.23097
237.991 	 3.24244
238.05 	 3.25367
238.109 	 3.26516
238.168 	 3.27689
238.227 	 3.2888
238.286 	 3.30086
238.345 	 3.31302
238.404 	 3.32522
238.463 	 3.33743
238.523 	 3.3496
238.582 	 3.36168
238.641 	 3.37363
238.7 	 3.3854
238.759 	 3.39694
238.818 	 3.40821
238.877 	 3.41916
238.936 	 3.42975
238.995 	 3.43992
239.054 	 3.44977
239.113 	 3.45946
239.172 	 3.46898
239.231 	 3.47834
239.29 	 3.48755
239.349 	 3.49661
239.408 	 3.50552
239.467 	 3.51429
239.526 	 3.52291
239.585 	 3.53139
239.644 	 3.53974
239.703 	 3.54796
239.762 	 3.55604
239.821 	 3.564
239.88 	 3.57183
239.939 	 3.57955
239.998 	 3.58714
240.057 	 3.59462
240.116 	 3.60195
240.175 	 3.60916
240.234 	 3.61626
240.293 	 3.62323
240.352 	 3.63011
240.411 	 3.63688
240.47 	 3.64356
240.529 	 3.65015
240.588 	 3.65667
240.647 	 3.66311
240.706 	 3.66949
240.765 	 3.6758
240.824 	 3.68207
240.883 	 3.68829
240.942 	 3.69447
241.001 	 3.70062
241.06 	 3.70678
241.119 	 3.71295
241.178 	 3.71912
241.237 	 3.72528
241.296 	 3.73141
241.355 	 3.73749
241.414 	 3.74352
241.473 	 3.74947
241.532 	 3.75533
241.591 	 3.76109
241.65 	 3.76672
241.709 	 3.77222
241.768 	 3.77756
241.827 	 3.78274
241.886 	 3.78773
241.945 	 3.79253
242.004 	 3.79711
242.063 	 3.80153
242.122 	 3.80584
242.181 	 3.81004
242.24 	 3.81413
242.299 	 3.81813
242.358 	 3.82203
242.417 	 3.82585
242.476 	 3.82957
242.535 	 3.83322
242.594 	 3.83679
242.653 	 3.84028
242.712 	 3.84371
242.771 	 3.84707
242.83 	 3.85037
242.889 	 3.85362
242.948 	 3.85682
243.007 	 3.85997
243.066 	 3.86315
243.125 	 3.86638
243.184 	 3.86965
243.243 	 3.87293
243.302 	 3.8762
243.361 	 3.87943
243.42 	 3.8826
243.479 	 3.88569
243.539 	 3.88867
243.598 	 3.89151
243.657 	 3.8942
243.716 	 3.89671
243.775 	 3.89902
243.834 	 3.9011
243.893 	 3.90293
243.952 	 3.90449
244.011 	 3.90575
244.07 	 3.9069
244.129 	 3.90803
244.188 	 3.90913
244.247 	 3.9102
244.306 	 3.91122
244.365 	 3.91221
244.424 	 3.91313
244.483 	 3.914
244.542 	 3.9148
244.601 	 3.91553
244.66 	 3.91618
244.719 	 3.91674
244.778 	 3.91721
244.837 	 3.91758
244.896 	 3.91785
244.955 	 3.918
245.014 	 3.91803
245.073 	 3.91788
245.132 	 3.91755
245.191 	 3.91703
245.25 	 3.91635
245.309 	 3.9155
245.368 	 3.9145
245.427 	 3.91337
245.486 	 3.9121
245.545 	 3.91071
245.604 	 3.90921
245.663 	 3.90762
245.722 	 3.90593
245.781 	 3.90416
245.84 	 3.90232
245.899 	 3.90042
245.958 	 3.89847
246.017 	 3.89645
246.076 	 3.89388
246.135 	 3.89065
246.194 	 3.88682
246.253 	 3.88246
246.312 	 3.87763
246.371 	 3.8724
246.43 	 3.86684
246.489 	 3.86101
246.548 	 3.85499
246.607 	 3.84882
246.666 	 3.8426
246.725 	 3.83637
246.784 	 3.8302
246.843 	 3.82417
246.902 	 3.81833
246.961 	 3.81276
247.02 	 3.80749
247.079 	 3.8022
247.138 	 3.79679
247.197 	 3.79131
247.256 	 3.78576
247.315 	 3.78018
247.374 	 3.77459
247.433 	 3.76902
247.492 	 3.76349
247.551 	 3.75803
247.61 	 3.75266
247.669 	 3.74741
247.728 	 3.7423
247.787 	 3.73736
247.846 	 3.73262
247.905 	 3.7281
247.964 	 3.72382
248.023 	 3.71981
248.082 	 3.71605
248.141 	 3.71252
248.2 	 3.70918
248.259 	 3.706
248.318 	 3.70295
248.377 	 3.69999
248.436 	 3.6971
248.495 	 3.69424
248.555 	 3.69139
248.614 	 3.6885
248.673 	 3.68556
248.732 	 3.68252
248.791 	 3.67936
248.85 	 3.67604
248.909 	 3.67254
248.968 	 3.66882
249.027 	 3.66479
249.086 	 3.66007
249.145 	 3.65469
249.204 	 3.64878
249.263 	 3.64245
249.322 	 3.63584
249.381 	 3.62905
249.44 	 3.62222
249.499 	 3.61547
249.558 	 3.60891
249.617 	 3.60268
249.676 	 3.5969
249.735 	 3.59168
249.794 	 3.58715
249.853 	 3.58344
249.912 	 3.58066
249.971 	 3.57893
250.03 	 3.57824
250.089 	 3.57771
250.148 	 3.57722
250.207 	 3.57675
250.266 	 3.57631
250.325 	 3.5759
250.384 	 3.57552
250.443 	 3.57518
250.502 	 3.57486
250.561 	 3.57458
250.62 	 3.57433
250.679 	 3.57412
250.738 	 3.57394
250.797 	 3.57379
250.856 	 3.57368
250.915 	 3.57361
250.974 	 3.57358
251.033 	 3.57364
251.092 	 3.57412
251.151 	 3.575
251.21 	 3.57622
251.269 	 3.57775
251.328 	 3.57952
251.387 	 3.5815
251.446 	 3.58363
251.505 	 3.58586
251.564 	 3.58815
251.623 	 3.59044
251.682 	 3.59268
251.741 	 3.59482
251.8 	 3.59682
251.859 	 3.59863
251.918 	 3.60019
251.977 	 3.60145
252.036 	 3.60244
252.095 	 3.60342
252.154 	 3.60439
252.213 	 3.60535
252.272 	 3.6063
252.331 	 3.60722
252.39 	 3.60811
252.449 	 3.60896
252.508 	 3.60975
252.567 	 3.61049
252.626 	 3.61116
252.685 	 3.61176
252.744 	 3.61228
252.803 	 3.6127
252.862 	 3.61303
252.921 	 3.61324
252.98 	 3.61334
253.039 	 3.61321
253.098 	 3.61252
253.157 	 3.61126
253.216 	 3.6095
253.275 	 3.60726
253.334 	 3.6046
253.393 	 3.60156
253.452 	 3.59817
253.512 	 3.59449
253.571 	 3.59054
253.63 	 3.58639
253.689 	 3.58206
253.748 	 3.5776
253.807 	 3.57306
253.866 	 3.56847
253.925 	 3.56388
253.984 	 3.55933
254.043 	 3.55472
254.102 	 3.54969
254.161 	 3.54424
254.22 	 3.53841
254.279 	 3.5322
254.338 	 3.52565
254.397 	 3.51879
254.456 	 3.51163
254.515 	 3.5042
254.574 	 3.49653
254.633 	 3.48863
254.692 	 3.48054
254.751 	 3.47228
254.81 	 3.46387
254.869 	 3.45533
254.928 	 3.4467
254.987 	 3.43799
255.046 	 3.42904
255.105 	 3.41947
255.164 	 3.40934
255.223 	 3.39871
255.282 	 3.38767
255.341 	 3.37628
255.4 	 3.36462
255.459 	 3.35276
255.518 	 3.34077
255.577 	 3.32873
255.636 	 3.3167
255.695 	 3.30476
255.754 	 3.29298
255.813 	 3.28144
255.872 	 3.2702
255.931 	 3.25934
255.99 	 3.24893
256.049 	 3.23893
256.108 	 3.22912
256.167 	 3.21949
256.226 	 3.21002
256.285 	 3.20069
256.344 	 3.19147
256.403 	 3.18236
256.462 	 3.17332
256.521 	 3.16436
256.58 	 3.15544
256.639 	 3.14654
256.698 	 3.13765
256.757 	 3.12876
256.816 	 3.11983
256.875 	 3.11086
256.934 	 3.10182
256.993 	 3.0927
257.052 	 3.08332
257.111 	 3.07352
257.17 	 3.06337
257.229 	 3.05298
257.288 	 3.04242
257.347 	 3.03179
257.406 	 3.02119
257.465 	 3.0107
257.524 	 3.0004
257.583 	 2.99041
257.642 	 2.98079
257.701 	 2.97165
257.76 	 2.96308
257.819 	 2.95516
257.878 	 2.94799
257.937 	 2.94166
257.996 	 2.93626
258.055 	 2.93141
258.114 	 2.92657
258.173 	 2.92178
258.232 	 2.91708
258.291 	 2.91249
258.35 	 2.90807
258.409 	 2.90384
258.468 	 2.89984
258.528 	 2.89611
258.587 	 2.89268
258.646 	 2.88958
258.705 	 2.88687
258.764 	 2.88456
258.823 	 2.88271
258.882 	 2.88134
258.941 	 2.88049
259 	 2.88019
259.059 	 2.8803
259.118 	 2.8806
259.177 	 2.88108
259.236 	 2.88171
259.295 	 2.88245
259.354 	 2.88329
259.413 	 2.88419
259.472 	 2.88513
259.531 	 2.88609
259.59 	 2.88703
259.649 	 2.88793
259.708 	 2.88877
259.767 	 2.88951
259.826 	 2.89012
259.885 	 2.8906
259.944 	 2.8909
260.003 	 2.89099
260.062 	 2.89051
260.121 	 2.88918
260.18 	 2.88708
260.239 	 2.88429
260.298 	 2.88087
260.357 	 2.87691
260.416 	 2.87247
260.475 	 2.86763
260.534 	 2.86245
260.593 	 2.85702
260.652 	 2.8514
260.711 	 2.84566
260.77 	 2.83989
260.829 	 2.83415
260.888 	 2.82852
260.947 	 2.82306
261.006 	 2.81786
261.065 	 2.81248
261.124 	 2.80667
261.183 	 2.8005
261.242 	 2.79402
261.301 	 2.7873
261.36 	 2.78041
261.419 	 2.77341
261.478 	 2.76637
261.537 	 2.75934
261.596 	 2.75241
261.655 	 2.74562
261.714 	 2.73905
261.773 	 2.73275
261.832 	 2.7268
261.891 	 2.72126
261.95 	 2.7162
262.009 	 2.71166
262.068 	 2.70724
262.127 	 2.70273
262.186 	 2.69817
262.245 	 2.69361
262.304 	 2.6891
262.363 	 2.68469
262.422 	 2.68042
262.481 	 2.67634
262.54 	 2.67251
262.599 	 2.66896
262.658 	 2.66575
262.717 	 2.66292
262.776 	 2.66052
262.835 	 2.65861
262.894 	 2.65722
262.953 	 2.65641
263.012 	 2.65621
263.071 	 2.65627
263.13 	 2.6564
263.189 	 2.6566
263.248 	 2.65688
263.307 	 2.65724
263.366 	 2.65767
263.425 	 2.65817
263.484 	 2.65874
263.544 	 2.65938
263.603 	 2.66009
263.662 	 2.66088
263.721 	 2.66173
263.78 	 2.66265
263.839 	 2.66363
263.898 	 2.66469
263.957 	 2.6658
264.016 	 2.66714
264.075 	 2.67165
264.134 	 2.68016
264.193 	 2.69227
264.252 	 2.70758
264.311 	 2.7257
264.37 	 2.74623
264.429 	 2.76876
264.488 	 2.7929
264.547 	 2.81825
264.606 	 2.84441
264.665 	 2.87098
264.724 	 2.89757
264.783 	 2.92377
264.842 	 2.94918
264.901 	 2.97341
264.96 	 2.99606
265.019 	 3.01687
265.078 	 3.03765
265.137 	 3.05895
265.196 	 3.08064
265.255 	 3.1026
265.314 	 3.12472
265.373 	 3.14688
265.432 	 3.16896
265.491 	 3.19085
265.55 	 3.21241
265.609 	 3.23354
265.668 	 3.25412
265.727 	 3.27403
265.786 	 3.29315
265.845 	 3.31136
265.904 	 3.32854
265.963 	 3.34458
266.022 	 3.3595
266.081 	 3.37455
266.14 	 3.38997
266.199 	 3.40558
266.258 	 3.4212
266.317 	 3.43666
266.376 	 3.45179
266.435 	 3.46642
266.494 	 3.48038
266.553 	 3.4935
266.612 	 3.50559
266.671 	 3.5165
266.73 	 3.52605
266.789 	 3.53406
266.848 	 3.54037
266.907 	 3.5448
266.966 	 3.54718
267.025 	 3.54747
267.084 	 3.54663
267.143 	 3.54493
267.202 	 3.54243
267.261 	 3.53918
267.32 	 3.53524
267.379 	 3.53066
267.438 	 3.5255
267.497 	 3.51981
267.556 	 3.51364
267.615 	 3.50706
267.674 	 3.50011
267.733 	 3.49286
267.792 	 3.48535
267.851 	 3.47764
267.91 	 3.46978
267.969 	 3.46184
268.028 	 3.45362
268.087 	 3.44367
268.146 	 3.43191
268.205 	 3.41854
268.264 	 3.40377
268.323 	 3.3878
268.382 	 3.37083
268.441 	 3.35308
268.501 	 3.33473
268.56 	 3.316
268.619 	 3.2971
268.678 	 3.27821
268.737 	 3.25956
268.796 	 3.24134
268.855 	 3.22375
268.914 	 3.20701
268.973 	 3.19131
269.032 	 3.17662
269.091 	 3.16181
269.15 	 3.14678
269.209 	 3.13163
269.268 	 3.11645
269.327 	 3.10133
269.386 	 3.08636
269.445 	 3.07161
269.504 	 3.0572
269.563 	 3.0432
269.622 	 3.0297
269.681 	 3.0168
269.74 	 3.00457
269.799 	 2.99313
269.858 	 2.98254
269.917 	 2.9729
269.976 	 2.9643
270.035 	 2.95662
270.094 	 2.94898
270.153 	 2.94135
270.212 	 2.93379
270.271 	 2.92637
270.33 	 2.91915
270.389 	 2.91218
270.448 	 2.90555
270.507 	 2.89931
270.566 	 2.89352
270.625 	 2.88825
270.684 	 2.88356
270.743 	 2.87952
270.802 	 2.87619
270.861 	 2.87363
270.92 	 2.87191
270.979 	 2.87109
271.038 	 2.87121
271.097 	 2.8722
271.156 	 2.87398
271.215 	 2.8765
271.274 	 2.87968
271.333 	 2.88346
271.392 	 2.88777
271.451 	 2.89255
271.51 	 2.89773
271.569 	 2.90325
271.628 	 2.90904
271.687 	 2.91503
271.746 	 2.92116
271.805 	 2.92737
271.864 	 2.93358
271.923 	 2.93973
271.982 	 2.94576
272.041 	 2.9518
272.1 	 2.95837
272.159 	 2.96545
272.218 	 2.973
272.277 	 2.98094
272.336 	 2.98925
272.395 	 2.99785
272.454 	 3.0067
272.513 	 3.01574
272.572 	 3.02492
272.631 	 3.03418
272.69 	 3.04348
272.749 	 3.05276
272.808 	 3.06196
272.867 	 3.07103
272.926 	 3.07992
272.985 	 3.08857
273.044 	 3.09699
273.103 	 3.10532
273.162 	 3.11358
273.221 	 3.12178
273.28 	 3.12995
273.339 	 3.1381
273.398 	 3.14625
273.457 	 3.15443
273.517 	 3.16264
273.576 	 3.17091
273.635 	 3.17925
273.694 	 3.18769
273.753 	 3.19624
273.812 	 3.20492
273.871 	 3.21374
273.93 	 3.22274
273.989 	 3.23192
274.048 	 3.24139
274.107 	 3.25125
274.166 	 3.26148
274.225 	 3.27199
274.284 	 3.28274
274.343 	 3.29367
274.402 	 3.30472
274.461 	 3.31583
274.52 	 3.32694
274.579 	 3.33799
274.638 	 3.34893
274.697 	 3.35969
274.756 	 3.37022
274.815 	 3.38046
274.874 	 3.39034
274.933 	 3.39982
274.992 	 3.40883
275.051 	 3.41749
275.11 	 3.42606
275.169 	 3.43454
275.228 	 3.4429
275.287 	 3.45114
275.346 	 3.45925
275.405 	 3.4672
275.464 	 3.475
275.523 	 3.48262
275.582 	 3.49006
275.641 	 3.4973
275.7 	 3.50432
275.759 	 3.51112
275.818 	 3.51769
275.877 	 3.524
275.936 	 3.53005
275.995 	 3.53582
276.054 	 3.54149
276.113 	 3.54726
276.172 	 3.55308
276.231 	 3.55891
276.29 	 3.5647
276.349 	 3.57039
276.408 	 3.57594
276.467 	 3.58129
276.526 	 3.5864
276.585 	 3.59121
276.644 	 3.59568
276.703 	 3.59975
276.762 	 3.60338
276.821 	 3.60652
276.88 	 3.60911
276.939 	 3.61111
276.998 	 3.61246
277.057 	 3.61344
277.116 	 3.61438
277.175 	 3.61527
277.234 	 3.61612
277.293 	 3.61693
277.352 	 3.61768
277.411 	 3.61838
277.47 	 3.61903
277.529 	 3.61962
277.588 	 3.62015
277.647 	 3.62061
277.706 	 3.62102
277.765 	 3.62135
277.824 	 3.62161
277.883 	 3.62181
277.942 	 3.62192
278.001 	 3.62196
278.06 	 3.62193
278.119 	 3.62184
278.178 	 3.62169
278.237 	 3.62148
278.296 	 3.62122
278.355 	 3.62091
278.414 	 3.62055
278.473 	 3.62014
278.533 	 3.61968
278.592 	 3.61919
278.651 	 3.61865
278.71 	 3.61807
278.769 	 3.61745
278.828 	 3.61679
278.887 	 3.61611
278.946 	 3.61539
279.005 	 3.61464
279.064 	 3.6136
279.123 	 3.61209
279.182 	 3.61016
279.241 	 3.60784
279.3 	 3.60515
279.359 	 3.60213
279.418 	 3.59882
279.477 	 3.59525
279.536 	 3.59144
279.595 	 3.58745
279.654 	 3.58329
279.713 	 3.579
279.772 	 3.57462
279.831 	 3.57017
279.89 	 3.5657
279.949 	 3.56123
280.008 	 3.55679
280.067 	 3.55197
280.126 	 3.54656
280.185 	 3.54063
280.244 	 3.53428
280.303 	 3.52758
280.362 	 3.52061
280.421 	 3.51345
280.48 	 3.50619
280.539 	 3.49889
280.598 	 3.49165
280.657 	 3.48454
280.716 	 3.47765
280.775 	 3.47105
280.834 	 3.46482
280.893 	 3.45905
280.952 	 3.45381
281.011 	 3.44918
281.07 	 3.44496
281.129 	 3.44099
281.188 	 3.43725
281.247 	 3.43371
281.306 	 3.43033
281.365 	 3.42709
281.424 	 3.42395
281.483 	 3.42089
281.542 	 3.41787
281.601 	 3.41486
281.66 	 3.41184
281.719 	 3.40877
281.778 	 3.40562
281.837 	 3.40236
281.896 	 3.39897
281.955 	 3.3954
282.014 	 3.39163
282.073 	 3.38754
282.132 	 3.38313
282.191 	 3.37845
282.25 	 3.37356
282.309 	 3.36853
282.368 	 3.36341
282.427 	 3.35826
282.486 	 3.35314
282.545 	 3.3481
282.604 	 3.3432
282.663 	 3.3385
282.722 	 3.33407
282.781 	 3.32995
282.84 	 3.3262
282.899 	 3.32289
282.958 	 3.32007
283.017 	 3.31777
283.076 	 3.31562
283.135 	 3.3135
283.194 	 3.31141
283.253 	 3.30937
283.312 	 3.3074
283.371 	 3.30551
283.43 	 3.30371
283.489 	 3.30202
283.549 	 3.30046
283.608 	 3.29904
283.667 	 3.29777
283.726 	 3.29667
283.785 	 3.29575
283.844 	 3.29503
283.903 	 3.29452
283.962 	 3.29424
284.021 	 3.2942
284.08 	 3.29426
284.139 	 3.2944
284.198 	 3.29461
284.257 	 3.29488
284.316 	 3.29523
284.375 	 3.29563
284.434 	 3.2961
284.493 	 3.29663
284.552 	 3.29722
284.611 	 3.29785
284.67 	 3.29855
284.729 	 3.29929
284.788 	 3.30007
284.847 	 3.30091
284.906 	 3.30178
284.965 	 3.30269
285.024 	 3.30369
285.083 	 3.30514
285.142 	 3.30713
285.201 	 3.30961
285.26 	 3.31257
285.319 	 3.31598
285.378 	 3.31981
285.437 	 3.32403
285.496 	 3.32862
285.555 	 3.33355
285.614 	 3.33879
285.673 	 3.34432
285.732 	 3.35011
285.791 	 3.35613
285.85 	 3.36236
285.909 	 3.36877
285.968 	 3.37533
286.027 	 3.38214
286.086 	 3.39008
286.145 	 3.39923
286.204 	 3.4095
286.263 	 3.42077
286.322 	 3.43294
286.381 	 3.44592
286.44 	 3.45959
286.499 	 3.47386
286.558 	 3.48863
286.617 	 3.50379
286.676 	 3.51923
286.735 	 3.53486
286.794 	 3.55057
286.853 	 3.56627
286.912 	 3.58184
286.971 	 3.59718
287.03 	 3.61239
287.089 	 3.62838
287.148 	 3.6452
287.207 	 3.66271
287.266 	 3.68078
287.325 	 3.69926
287.384 	 3.71802
287.443 	 3.73692
287.502 	 3.75584
287.561 	 3.77462
287.62 	 3.79314
287.679 	 3.81126
287.738 	 3.82884
287.797 	 3.84575
287.856 	 3.86185
287.915 	 3.877
287.974 	 3.89107
288.033 	 3.90404
288.092 	 3.91636
288.151 	 3.92816
288.21 	 3.93949
288.269 	 3.9504
288.328 	 3.96095
288.387 	 3.97119
288.446 	 3.98117
288.506 	 3.99095
288.565 	 4.00058
288.624 	 4.01012
288.683 	 4.01962
288.742 	 4.02914
288.801 	 4.03872
288.86 	 4.04843
288.919 	 4.05831
288.978 	 4.06842
289.037 	 4.07881
289.096 	 4.08945
289.155 	 4.1003
289.214 	 4.1113
289.273 	 4.1224
289.332 	 4.13356
289.391 	 4.14472
289.45 	 4.15583
289.509 	 4.16683
289.568 	 4.17769
289.627 	 4.18835
289.686 	 4.19875
289.745 	 4.20885
289.804 	 4.21859
289.863 	 4.22793
289.922 	 4.23682
289.981 	 4.2452
290.04 	 4.25324
290.099 	 4.26156
290.158 	 4.27011
290.217 	 4.27879
290.276 	 4.28749
290.335 	 4.29612
290.394 	 4.30456
290.453 	 4.31273
290.512 	 4.3205
290.571 	 4.32779
290.63 	 4.33449
290.689 	 4.34049
290.748 	 4.3457
290.807 	 4.35001
290.866 	 4.35332
290.925 	 4.35552
290.984 	 4.35652
291.043 	 4.35654
291.102 	 4.35645
291.161 	 4.35627
291.22 	 4.35603
291.279 	 4.35573
291.338 	 4.35536
291.397 	 4.35494
291.456 	 4.35447
291.515 	 4.35396
291.574 	 4.3534
291.633 	 4.35281
291.692 	 4.35218
291.751 	 4.35153
291.81 	 4.35086
291.869 	 4.35017
291.928 	 4.34947
291.987 	 4.34876
292.046 	 4.34803
292.105 	 4.3472
292.164 	 4.34629
292.223 	 4.34529
292.282 	 4.3442
292.341 	 4.34302
292.4 	 4.34175
292.459 	 4.34039
292.518 	 4.33895
292.577 	 4.33742
292.636 	 4.33581
292.695 	 4.3341
292.754 	 4.33231
292.813 	 4.33044
292.872 	 4.32848
292.931 	 4.32643
292.99 	 4.3243
293.049 	 4.32193
293.108 	 4.31908
293.167 	 4.3158
293.226 	 4.31212
293.285 	 4.3081
293.344 	 4.30378
293.403 	 4.2992
293.462 	 4.29442
293.522 	 4.28947
293.581 	 4.28442
293.64 	 4.27929
293.699 	 4.27414
293.758 	 4.26902
293.817 	 4.26397
293.876 	 4.25904
293.935 	 4.25427
293.994 	 4.24971
294.053 	 4.24524
294.112 	 4.24065
294.171 	 4.23596
294.23 	 4.23119
294.289 	 4.22638
294.348 	 4.22155
294.407 	 4.21673
294.466 	 4.21193
294.525 	 4.2072
294.584 	 4.20255
294.643 	 4.19802
294.702 	 4.19362
294.761 	 4.18939
294.82 	 4.18535
294.879 	 4.18152
294.938 	 4.17795
294.997 	 4.17464
295.056 	 4.17144
295.115 	 4.16815
295.174 	 4.16481
295.233 	 4.16146
295.292 	 4.15812
295.351 	 4.15484
295.41 	 4.15166
295.469 	 4.14861
295.528 	 4.14572
295.587 	 4.14303
295.646 	 4.14059
295.705 	 4.13842
295.764 	 4.13656
295.823 	 4.13506
295.882 	 4.13393
295.941 	 4.13323
296 	 4.13299
 	 
----

=== months

----
# Month  Data     Month Name
1        3        Jan
2        4        Feb
3        2        Mar
4        5        Apr
5        8        May
6        7        Jun
7        4        Jul
8        5        Aug
9        3        Sep
10       2        Oct
11       4        Nov
12       2        Dec
----

=== newyork

----
# New York	Fahrenheit
2014-11-01	45
2014-11-02	45
2014-11-03	50
2014-11-04	61
2014-11-05	60
2014-11-06	53
2014-11-07	47
----

=== orders

----
# ID	 Date	 CustomerID ItemCount Weight Value ShipMethod
oid0009   2014-12-01   cid69   5   6.08   18.54   2-Express
oid0012   2014-12-01   cid59   2   2.13   11.39   1-Regular
oid0014   2014-12-01   cid61   4   7.11   15.44   0-Ground
oid0015   2014-12-01   cid30   2   2.33   11.11   0-Ground
oid0025   2014-12-01   cid87   4   4.48   16.55   2-Express
oid0034   2014-12-01   cid08   4   4.35   16.95   1-Regular
oid0038   2014-12-01   cid20   1   0.27    6.93   2-Express
oid0039   2014-12-01   cid70   2   2.72   11.08   1-Regular
oid0051   2014-12-01   cid22   1   0.96    7.08   2-Express
oid0056   2014-12-01   cid57   1   0.54    7.14   2-Express
oid0067   2014-12-02   cid70   1   0.73    7.29   0-Ground
oid0070   2014-12-02   cid71   1   0.45    7.25   2-Express
oid0074   2014-12-02   cid37   2   3.09   10.78   1-Regular
oid0081   2014-12-02   cid94   3   4.22   14.37   2-Express
oid0092   2014-12-02   cid22   2   3.67   11.27   2-Express
oid0100   2014-12-02   cid20   3   2.75   14.13   2-Express
oid0112   2014-12-02   cid54   1   0.59    6.48   0-Ground
oid0114   2014-12-02   cid97   5   4.69   16.60   1-Regular
oid0117   2014-12-02   cid63   4   3.97   16.01   2-Express
oid0126   2014-12-02   cid37   3   2.36   14.57   2-Express
oid0132   2014-12-02   cid21   2   1.99   10.50   0-Ground
oid0138   2014-12-02   cid72   3   5.60   13.41   2-Express
oid0139   2014-12-03   cid52   5   4.35   17.85   2-Express
oid0141   2014-12-03   cid35   2   1.63   10.83   1-Regular
oid0143   2014-12-03   cid61   3   2.81   13.01   1-Regular
oid0153   2014-12-03   cid97   3   7.69   13.96   1-Regular
oid0161   2014-12-03   cid06   3   3.11   14.98   0-Ground
oid0170   2014-12-03   cid50   1   2.11    7.30   1-Regular
oid0175   2014-12-03   cid98   2   2.67   12.13   1-Regular
oid0179   2014-12-03   cid64   2   1.66   11.96   1-Regular
oid0183   2014-12-03   cid38   3   2.86   14.13   1-Regular
oid0187   2014-12-03   cid50   2   1.67   11.56   2-Express
oid0197   2014-12-03   cid98   2   1.35   10.03   2-Express
oid0209   2014-12-03   cid61   1   0.87    6.94   2-Express
oid0213   2014-12-03   cid38   4   4.51   16.41   2-Express
oid0216   2014-12-04   cid99   1   2.39    6.22   1-Regular
oid0219   2014-12-04   cid24   2   2.08   11.44   2-Express
oid0231   2014-12-04   cid90   2   2.43   10.65   1-Regular
oid0239   2014-12-04   cid83   5   6.69   16.89   0-Ground
oid0245   2014-12-04   cid10   1   1.89    7.73   0-Ground
oid0250   2014-12-04   cid78   1   0.86    6.23   2-Express
oid0252   2014-12-04   cid70   1   0.80    6.29   2-Express
oid0256   2014-12-04   cid91   1   1.51    6.86   2-Express
oid0257   2014-12-04   cid65   3   2.23   13.63   2-Express
oid0265   2014-12-04   cid48   4   3.89   15.74   1-Regular
oid0269   2014-12-04   cid14   2   1.98   10.49   1-Regular
oid0274   2014-12-04   cid76   3   3.89   13.83   1-Regular
oid0286   2014-12-05   cid74   4   4.11   16.75   2-Express
oid0293   2014-12-05   cid73   4   4.01   17.82   2-Express
oid0299   2014-12-05   cid55   1   0.57    6.58   2-Express
oid0308   2014-12-05   cid44   2   1.74   10.55   1-Regular
oid0310   2014-12-05   cid18   2   2.00   10.72   1-Regular
oid0319   2014-12-05   cid20   3   5.15   13.29   0-Ground
oid0331   2014-12-05   cid34   1   0.73    6.84   1-Regular
oid0339   2014-12-05   cid72   1   1.47    6.57   0-Ground
oid0342   2014-12-05   cid10   6   6.90   20.52   1-Regular
oid0352   2014-12-05   cid30   1   1.48    6.52   2-Express
oid0357   2014-12-05   cid94   4   2.51   15.51   1-Regular
oid0369   2014-12-05   cid29   3   2.46   14.01   2-Express
oid0380   2014-12-06   cid80   2   4.08   10.70   2-Express
oid0384   2014-12-06   cid53   1   0.45    6.92   2-Express
oid0392   2014-12-06   cid01   2   1.45   10.57   2-Express
oid0393   2014-12-07   cid62   2   1.27   10.52   2-Express
oid0405   2014-12-07   cid84   3   2.23   14.34   2-Express
oid0412   2014-12-07   cid97   4   5.17   14.85   0-Ground
oid0418   2014-12-07   cid27   2   2.13   10.60   2-Express
oid0427   2014-12-07   cid65   4   2.84   17.20   1-Regular
oid0428   2014-12-07   cid10   4   2.71   15.36   1-Regular
oid0438   2014-12-07   cid42   2   1.28   11.10   1-Regular
oid0448   2014-12-08   cid91   3   4.06   14.70   1-Regular
oid0458   2014-12-08   cid32   2   2.46   11.11   0-Ground
oid0464   2014-12-08   cid04   3   2.03   13.05   1-Regular
oid0465   2014-12-08   cid13   1   1.26    6.65   1-Regular
oid0476   2014-12-08   cid58   2   3.26   10.87   2-Express
oid0480   2014-12-08   cid50   2   1.63   11.31   1-Regular
oid0492   2014-12-08   cid75   3   2.10   14.62   1-Regular
oid0502   2014-12-08   cid90   4   3.44   16.27   1-Regular
oid0508   2014-12-08   cid68   2   1.85   10.20   1-Regular
oid0510   2014-12-08   cid86   2   2.84   10.65   0-Ground
oid0521   2014-12-09   cid07   1   0.31    7.02   1-Regular
oid0529   2014-12-09   cid03   4   4.62   15.47   1-Regular
oid0541   2014-12-09   cid13   1   0.61    6.74   0-Ground
oid0549   2014-12-09   cid91   3   1.88   13.38   1-Regular
oid0551   2014-12-09   cid44   2   1.73   10.64   2-Express
oid0560   2014-12-09   cid22   2   1.50   11.27   1-Regular
oid0564   2014-12-09   cid23   1   0.80    5.96   2-Express
oid0565   2014-12-09   cid55   5   4.91   17.29   0-Ground
oid0577   2014-12-09   cid13   1   0.77    7.13   1-Regular
oid0582   2014-12-09   cid29   2   2.27   10.06   2-Express
oid0588   2014-12-09   cid67   4   5.38   15.56   2-Express
oid0598   2014-12-09   cid04   1   1.25    6.64   1-Regular
oid0600   2014-12-09   cid31   1   0.81    6.55   1-Regular
oid0610   2014-12-10   cid37   2   2.50   12.35   1-Regular
oid0613   2014-12-10   cid68   2   3.70   11.40   2-Express
oid0615   2014-12-10   cid27   1   0.77    7.23   1-Regular
oid0623   2014-12-10   cid86   3   4.35   13.21   1-Regular
oid0633   2014-12-10   cid62   2   2.96   11.47   1-Regular
oid0634   2014-12-10   cid57   2   2.15   11.17   2-Express
oid0635   2014-12-10   cid13   2   1.52   11.52   2-Express
oid0645   2014-12-10   cid32   2   2.43   10.84   2-Express
oid0647   2014-12-10   cid78   2   2.25   10.65   1-Regular
oid0651   2014-12-10   cid37   3   2.24   13.81   2-Express
oid0657   2014-12-10   cid06   2   3.57   10.30   0-Ground
oid0665   2014-12-10   cid48   1   1.26    6.52   1-Regular
oid0668   2014-12-10   cid18   4   4.98   16.38   2-Express
oid0670   2014-12-10   cid06   2   2.32   10.70   0-Ground
oid0674   2014-12-11   cid45   1   0.36    6.96   2-Express
oid0684   2014-12-11   cid03   1   1.40    7.22   2-Express
oid0694   2014-12-11   cid28   2   1.90   11.18   1-Regular
oid0698   2014-12-11   cid73   3   4.45   13.43   2-Express
oid0700   2014-12-11   cid90   2   2.20   10.66   1-Regular
oid0711   2014-12-11   cid35   1   0.59    7.28   2-Express
oid0720   2014-12-11   cid78   3   2.52   13.91   2-Express
oid0724   2014-12-11   cid59   4   4.49   15.73   1-Regular
oid0731   2014-12-11   cid01   3   2.29   14.77   1-Regular
oid0740   2014-12-11   cid94   1   1.09    7.61   2-Express
oid0741   2014-12-11   cid15   4   6.30   16.53   2-Express
oid0744   2014-12-11   cid25   2   1.49   10.88   0-Ground
oid0753   2014-12-12   cid53   3   3.50   14.70   1-Regular
oid0757   2014-12-12   cid98   3   2.41   13.41   2-Express
oid0758   2014-12-12   cid24   1   0.62    7.34   1-Regular
oid0759   2014-12-12   cid53   3   6.44   13.68   1-Regular
oid0770   2014-12-12   cid85   1   1.51    6.96   1-Regular
oid0773   2014-12-12   cid97   1   0.85    6.64   2-Express
oid0777   2014-12-12   cid80   5   5.00   18.29   1-Regular
oid0782   2014-12-12   cid13   2   2.19   11.80   0-Ground
oid0785   2014-12-12   cid98   1   0.86    6.74   1-Regular
oid0791   2014-12-12   cid75   3   3.15   12.82   1-Regular
oid0803   2014-12-12   cid32   3   1.39   13.96   0-Ground
oid0806   2014-12-12   cid77   1   0.27    7.59   2-Express
oid0812   2014-12-12   cid12   1   1.23    6.40   2-Express
oid0819   2014-12-12   cid79   3   2.97   13.94   1-Regular
oid0827   2014-12-12   cid77   5   4.41   19.14   0-Ground
oid0828   2014-12-13   cid47   2   2.70   11.67   2-Express
oid0833   2014-12-13   cid01   3   3.04   15.40   2-Express
oid0842   2014-12-13   cid94   2   3.71   10.83   2-Express
oid0853   2014-12-13   cid28   2   4.13   11.74   2-Express
oid0860   2014-12-13   cid66   5   4.55   17.28   0-Ground
oid0863   2014-12-13   cid59   1   0.36    6.44   1-Regular
oid0865   2014-12-13   cid49   2   1.68   11.62   2-Express
oid0874   2014-12-14   cid04   1   1.01    7.04   2-Express
oid0883   2014-12-14   cid15   2   2.42   10.89   2-Express
oid0886   2014-12-14   cid01   2   1.97   12.08   1-Regular
oid0894   2014-12-14   cid10   2   1.29   10.91   2-Express
oid0903   2014-12-14   cid01   2   2.09   11.16   1-Regular
oid0910   2014-12-14   cid41   3   2.74   13.63   0-Ground
oid0912   2014-12-14   cid22   2   1.86   11.15   2-Express
----

=== packedmatrix

----
10 10 10 10 
10  5  1  0 
10 10 10 10 
----

=== passwd

----
at:x:25:25:Batch jobs daemon:/var/spool/atjobs:/bin/bash
daemon:x:2:2:Daemon:/sbin:/bin/bash
ftp:x:40:49:FTP account:/srv/ftp:/bin/bash
games:x:12:100:Games account:/var/games:/bin/bash
ldap:x:76:70:User for OpenLDAP:/var/lib/ldap:/bin/bash
lp:x:4:7:Printing daemon:/var/spool/lpd:/bin/bash
mail:x:8:12:Mailer daemon:/var/spool/clientmqueue:/bin/false
man:x:13:62:Manual pages viewer:/var/cache/man:/bin/bash
mysql:x:60:108:MySQL database admin:/var/lib/mysql:/bin/false
news:x:9:13:News system:/etc/news:/bin/bash
ntp:x:74:103:NTP daemon:/var/lib/ntp:/bin/false
postfix:x:51:51:Postfix Daemon:/var/spool/postfix:/bin/false
sshd:x:71:65:SSH daemon:/var/lib/sshd:/bin/false
uucp:x:10:14:Unix-to-Unix CoPy system:/etc/uucp:/bin/bash
wwwrun:x:30:8:WWW daemon apache:/var/lib/wwwrun:/bin/false
----

=== pie-data

----
A	55	50
B	25	80
C	10	90
D	7	97
E	3	100
----

=== polardata

----

#Curve 0 of 1, 1000 points
#x y type
-3.14159  0.0957244  i
-3.1353  0.0962649  i
-3.12901  0.0968266  i
-3.12272  0.0974155  i
-3.11643  0.0980374  i
-3.11015  0.0986982  i
-3.10386  0.0994038  i
-3.09757  0.10016  i
-3.09128  0.100973  i
-3.08499  0.101847  i
-3.0787  0.102787  i
-3.07241  0.103799  i
-3.06612  0.104886  i
-3.05983  0.106052  i
-3.05354  0.107301  i
-3.04725  0.108634  i
-3.04096  0.110055  i
-3.03467  0.111564  i
-3.02838  0.113161  i
-3.02209  0.114847  i
-3.0158  0.116621  i
-3.00951  0.118482  i
-3.00322  0.120426  i
-2.99693  0.122451  i
-2.99065  0.124554  i
-2.98436  0.12673  i
-2.97807  0.128974  i
-2.97178  0.13128  i
-2.96549  0.133643  i
-2.9592  0.136055  i
-2.95291  0.13851  i
-2.94662  0.141  i
-2.94033  0.143517  i
-2.93404  0.146055  i
-2.92775  0.148604  i
-2.92146  0.151158  i
-2.91517  0.153707  i
-2.90888  0.156244  i
-2.90259  0.158762  i
-2.8963  0.161253  i
-2.89001  0.163711  i
-2.88372  0.166128  i
-2.87743  0.1685  i
-2.87115  0.170822  i
-2.86486  0.173087  i
-2.85857  0.175294  i
-2.85228  0.177438  i
-2.84599  0.179517  i
-2.8397  0.181531  i
-2.83341  0.183478  i
-2.82712  0.185359  i
-2.82083  0.187175  i
-2.81454  0.188928  i
-2.80825  0.190621  i
-2.80196  0.192258  i
-2.79567  0.193842  i
-2.78938  0.19538  i
-2.78309  0.196876  i
-2.7768  0.198337  i
-2.77051  0.19977  i
-2.76422  0.201181  i
-2.75793  0.202579  i
-2.75165  0.203969  i
-2.74536  0.205361  i
-2.73907  0.206761  i
-2.73278  0.208177  i
-2.72649  0.209615  i
-2.7202  0.211084  i
-2.71391  0.212588  i
-2.70762  0.214133  i
-2.70133  0.215724  i
-2.69504  0.217366  i
-2.68875  0.219062  i
-2.68246  0.220814  i
-2.67617  0.222623  i
-2.66988  0.224489  i
-2.66359  0.226413  i
-2.6573  0.228391  i
-2.65101  0.23042  i
-2.64472  0.232496  i
-2.63843  0.234614  i
-2.63215  0.236767  i
-2.62586  0.238947  i
-2.61957  0.241145  i
-2.61328  0.243352  i
-2.60699  0.245556  i
-2.6007  0.247747  i
-2.59441  0.249911  i
-2.58812  0.252036  i
-2.58183  0.254109  i
-2.57554  0.256116  i
-2.56925  0.258043  i
-2.56296  0.259876  i
-2.55667  0.2616  i
-2.55038  0.263203  i
-2.54409  0.26467  i
-2.5378  0.26599  i
-2.53151  0.267148  i
-2.52522  0.268135  i
-2.51893  0.26894  i
-2.51265  0.269553  i
-2.50636  0.269965  i
-2.50007  0.270171  i
-2.49378  0.270163  i
-2.48749  0.269938  i
-2.4812  0.269494  i
-2.47491  0.268828  i
-2.46862  0.267942  i
-2.46233  0.266838  i
-2.45604  0.265518  i
-2.44975  0.263988  i
-2.44346  0.262255  i
-2.43717  0.260327  i
-2.43088  0.258213  i
-2.42459  0.255925  i
-2.4183  0.253474  i
-2.41201  0.250874  i
-2.40572  0.248137  i
-2.39943  0.245281  i
-2.39315  0.242319  i
-2.38686  0.239268  i
-2.38057  0.236144  i
-2.37428  0.232963  i
-2.36799  0.229742  i
-2.3617  0.226498  i
-2.35541  0.223244  i
-2.34912  0.219998  i
-2.34283  0.216772  i
-2.33654  0.213582  i
-2.33025  0.210438  i
-2.32396  0.207352  i
-2.31767  0.204334  i
-2.31138  0.201393  i
-2.30509  0.198535  i
-2.2988  0.195765  i
-2.29251  0.193089  i
-2.28622  0.190506  i
-2.27993  0.188018  i
-2.27365  0.185623  i
-2.26736  0.183318  i
-2.26107  0.181098  i
-2.25478  0.178958  i
-2.24849  0.176889  i
-2.2422  0.174883  i
-2.23591  0.172928  i
-2.22962  0.171015  i
-2.22333  0.169131  i
-2.21704  0.167262  i
-2.21075  0.165396  i
-2.20446  0.163519  i
-2.19817  0.161616  i
-2.19188  0.159675  i
-2.18559  0.157682  i
-2.1793  0.155623  i
-2.17301  0.153486  i
-2.16672  0.15126  i
-2.16043  0.148936  i
-2.15415  0.146503  i
-2.14786  0.143955  i
-2.14157  0.141285  i
-2.13528  0.13849  i
-2.12899  0.135568  i
-2.1227  0.132518  i
-2.11641  0.129343  i
-2.11012  0.126046  i
-2.10383  0.122635  i
-2.09754  0.119116  i
-2.09125  0.115502  i
-2.08496  0.111804  i
-2.07867  0.108038  i
-2.07238  0.10422  i
-2.06609  0.100369  i
-2.0598  0.0965046  i
-2.05351  0.0926491  i
-2.04722  0.0888253  i
-2.04093  0.0850576  i
-2.03465  0.0813709  i
-2.02836  0.077791  i
-2.02207  0.0743442  i
-2.01578  0.0710569  i
-2.00949  0.0679554  i
-2.0032  0.0650657  i
-1.99691  0.0624131  i
-1.99062  0.0600223  i
-1.98433  0.0579165  i
-1.97804  0.0561181  i
-1.97175  0.0546473  i
-1.96546  0.0535231  i
-1.95917  0.0527622  i
-1.95288  0.0523793  i
-1.94659  0.0523866  i
-1.9403  0.052794  i
-1.93401  0.0536091  i
-1.92772  0.0548364  i
-1.92143  0.0564782  i
-1.91515  0.0585339  i
-1.90886  0.0610003  i
-1.90257  0.0638716  i
-1.89628  0.0671394  i
-1.88999  0.070793  i
-1.8837  0.0748192  i
-1.87741  0.0792029  i
-1.87112  0.0839267  i
-1.86483  0.0889716  i
-1.85854  0.0943172  i
-1.85225  0.0999414  i
-1.84596  0.105821  i
-1.83967  0.111933  i
-1.83338  0.118253  i
-1.82709  0.124756  i
-1.8208  0.131418  i
-1.81451  0.138215  i
-1.80822  0.145123  i
-1.80193  0.15212  i
-1.79565  0.159184  i
-1.78936  0.166295  i
-1.78307  0.173436  i
-1.77678  0.180588  i
-1.77049  0.187739  i
-1.7642  0.194875  i
-1.75791  0.201987  i
-1.75162  0.209066  i
-1.74533  0.216109  i
-1.73904  0.223113  i
-1.73275  0.230077  i
-1.72646  0.237006  i
-1.72017  0.243902  i
-1.71388  0.250776  i
-1.70759  0.257636  i
-1.7013  0.264495  i
-1.69501  0.271367  i
-1.68872  0.278267  i
-1.68243  0.285215  i
-1.67615  0.292227  i
-1.66986  0.299326  i
-1.66357  0.30653  i
-1.65728  0.313862  i
-1.65099  0.321343  i
-1.6447  0.328994  i
-1.63841  0.336836  i
-1.63212  0.34489  i
-1.62583  0.353174  i
-1.61954  0.361707  i
-1.61325  0.370504  i
-1.60696  0.37958  i
-1.60067  0.388946  i
-1.59438  0.398614  i
-1.58809  0.408589  i
-1.5818  0.418876  i
-1.57551  0.429478  i
-1.56922  0.440391  i
-1.56293  0.451613  i
-1.55665  0.463135  i
-1.55036  0.474947  i
-1.54407  0.487034  i
-1.53778  0.49938  i
-1.53149  0.511965  i
-1.5252  0.524767  i
-1.51891  0.53776  i
-1.51262  0.550916  i
-1.50633  0.564206  i
-1.50004  0.577597  i
-1.49375  0.591057  i
-1.48746  0.604551  i
-1.48117  0.618041  i
-1.47488  0.631492  i
-1.46859  0.644867  i
-1.4623  0.658128  i
-1.45601  0.671238  i
-1.44972  0.684161  i
-1.44343  0.696863  i
-1.43714  0.709308  i
-1.43086  0.721466  i
-1.42457  0.733305  i
-1.41828  0.744797  i
-1.41199  0.755916  i
-1.4057  0.766641  i
-1.39941  0.776951  i
-1.39312  0.786828  i
-1.38683  0.79626  i
-1.38054  0.805235  i
-1.37425  0.813748  i
-1.36796  0.821794  i
-1.36167  0.829374  i
-1.35538  0.83649  i
-1.34909  0.843149  i
-1.3428  0.849361  i
-1.33651  0.855138  i
-1.33022  0.860496  i
-1.32393  0.865453  i
-1.31764  0.870028  i
-1.31136  0.874245  i
-1.30507  0.878127  i
-1.29878  0.8817  i
-1.29249  0.884991  i
-1.2862  0.888026  i
-1.27991  0.890833  i
-1.27362  0.89344  i
-1.26733  0.895874  i
-1.26104  0.898163  i
-1.25475  0.90033  i
-1.24846  0.902402  i
-1.24217  0.9044  i
-1.23588  0.906344  i
-1.22959  0.908254  i
-1.2233  0.910145  i
-1.21701  0.912031  i
-1.21072  0.913921  i
-1.20443  0.915823  i
-1.19814  0.917742  i
-1.19186  0.919678  i
-1.18557  0.921629  i
-1.17928  0.923591  i
-1.17299  0.925554  i
-1.1667  0.927508  i
-1.16041  0.929437  i
-1.15412  0.931326  i
-1.14783  0.933153  i
-1.14154  0.934898  i
-1.13525  0.936537  i
-1.12896  0.938043  i
-1.12267  0.93939  i
-1.11638  0.940549  i
-1.11009  0.941491  i
-1.1038  0.942186  i
-1.09751  0.942607  i
-1.09122  0.942722  i
-1.08493  0.942504  i
-1.07864  0.941926  i
-1.07236  0.940961  i
-1.06607  0.939586  i
-1.05978  0.937778  i
-1.05349  0.935518  i
-1.0472  0.932789  i
-1.04091  0.929576  i
-1.03462  0.925871  i
-1.02833  0.921663  i
-1.02204  0.916951  i
-1.01575  0.911733  i
-1.00946  0.906013  i
-1.00317  0.899797  i
-0.996882  0.893096  i
-0.990592  0.885926  i
-0.984303  0.878302  i
-0.978013  0.870248  i
-0.971724  0.861786  i
-0.965434  0.852946  i
-0.959145  0.843757  i
-0.952855  0.834251  i
-0.946566  0.824465  i
-0.940276  0.814434  i
-0.933987  0.804198  i
-0.927698  0.793796  i
-0.921408  0.783268  i
-0.915119  0.772655  i
-0.908829  0.761999  i
-0.90254  0.751339  i
-0.89625  0.740715  i
-0.889961  0.730165  i
-0.883671  0.719727  i
-0.877382  0.709436  i
-0.871092  0.699325  i
-0.864803  0.689423  i
-0.858513  0.679758  i
-0.852224  0.670355  i
-0.845934  0.661236  i
-0.839645  0.652418  i
-0.833355  0.643914  i
-0.827066  0.635737  i
-0.820776  0.627893  i
-0.814487  0.620385  i
-0.808198  0.613212  i
-0.801908  0.606371  i
-0.795619  0.599854  i
-0.789329  0.59365  i
-0.78304  0.587745  i
-0.77675  0.582121  i
-0.770461  0.57676  i
-0.764171  0.571639  i
-0.757882  0.566733  i
-0.751592  0.562018  i
-0.745303  0.557466  i
-0.739013  0.553048  i
-0.732724  0.548736  i
-0.726434  0.5445  i
-0.720145  0.540312  i
-0.713855  0.536143  i
-0.707566  0.531967  i
-0.701276  0.527755  i
-0.694987  0.523486  i
-0.688697  0.519134  i
-0.682408  0.514682  i
-0.676119  0.51011  i
-0.669829  0.505404  i
-0.66354  0.500552  i
-0.65725  0.495546  i
-0.650961  0.490381  i
-0.644671  0.485054  i
-0.638382  0.479567  i
-0.632092  0.473926  i
-0.625803  0.46814  i
-0.619513  0.46222  i
-0.613224  0.456181  i
-0.606934  0.450044  i
-0.600645  0.443828  i
-0.594355  0.43756  i
-0.588066  0.431264  i
-0.581776  0.424971  i
-0.575487  0.418711  i
-0.569197  0.412517  i
-0.562908  0.406422  i
-0.556619  0.400461  i
-0.550329  0.394668  i
-0.54404  0.389078  i
-0.53775  0.383726  i
-0.531461  0.378645  i
-0.525171  0.373867  i
-0.518882  0.369424  i
-0.512592  0.365343  i
-0.506303  0.361653  i
-0.500013  0.358376  i
-0.493724  0.355535  i
-0.487434  0.353146  i
-0.481145  0.351225  i
-0.474855  0.349782  i
-0.468566  0.348825  i
-0.462276  0.348358  i
-0.455987  0.34838  i
-0.449697  0.348886  i
-0.443408  0.349869  i
-0.437118  0.351316  i
-0.430829  0.353212  i
-0.42454  0.355537  i
-0.41825  0.358268  i
-0.411961  0.36138  i
-0.405671  0.364843  i
-0.399382  0.368626  i
-0.393092  0.372695  i
-0.386803  0.377014  i
-0.380513  0.381546  i
-0.374224  0.386252  i
-0.367934  0.391092  i
-0.361645  0.396026  i
-0.355355  0.401015  i
-0.349066  0.406019  i
-0.342776  0.410999  i
-0.336487  0.415918  i
-0.330197  0.420739  i
-0.323908  0.425429  i
-0.317618  0.429956  i
-0.311329  0.43429  i
-0.30504  0.438405  i
-0.29875  0.442279  i
-0.292461  0.445891  i
-0.286171  0.449226  i
-0.279882  0.452269  i
-0.273592  0.455013  i
-0.267303  0.457452  i
-0.261013  0.459586  i
-0.254724  0.461415  i
-0.248434  0.462948  i
-0.242145  0.464192  i
-0.235855  0.465162  i
-0.229566  0.465873  i
-0.223276  0.466345  i
-0.216987  0.4666  i
-0.210697  0.466662  i
-0.204408  0.466557  i
-0.198118  0.466314  i
-0.191829  0.465962  i
-0.18554  0.465531  i
-0.17925  0.465052  i
-0.172961  0.464556  i
-0.166671  0.464075  i
-0.160382  0.463638  i
-0.154092  0.463275  i
-0.147803  0.463013  i
-0.141513  0.462879  i
-0.135224  0.462896  i
-0.128934  0.463085  i
-0.122645  0.463467  i
-0.116355  0.464056  i
-0.110066  0.464865  i
-0.103776  0.465904  i
-0.0974869  0.467179  i
-0.0911974  0.468691  i
-0.0849079  0.47044  i
-0.0786184  0.47242  i
-0.072329  0.474623  i
-0.0660395  0.477037  i
-0.05975  0.479646  i
-0.0534605  0.482432  i
-0.0471711  0.485372  i
-0.0408816  0.488441  i
-0.0345921  0.491614  i
-0.0283026  0.494859  i
-0.0220132  0.498145  i
-0.0157237  0.50144  i
-0.00943421  0.504709  i
-0.00314474  0.507917  i
 0.00314474  0.511029  i
 0.00943421  0.514008  i
 0.0157237  0.51682  i
 0.0220132  0.51943  i
 0.0283026  0.521805  i
 0.0345921  0.523913  i
 0.0408816  0.525725  i
 0.0471711  0.527214  i
 0.0534605  0.528353  i
 0.05975  0.529123  i
 0.0660395  0.529503  i
 0.072329  0.529478  i
 0.0786184  0.529038  i
 0.0849079  0.528173  i
 0.0911974  0.52688  i
 0.0974869  0.525159  i
 0.103776  0.523013  i
 0.110066  0.52045  i
 0.116355  0.517482  i
 0.122645  0.514125  i
 0.128934  0.510396  i
 0.135224  0.50632  i
 0.141513  0.501921  i
 0.147803  0.497228  i
 0.154092  0.492272  i
 0.160382  0.487088  i
 0.166671  0.481711  i
 0.172961  0.476178  i
 0.17925  0.470528  i
 0.18554  0.4648  i
 0.191829  0.459034  i
 0.198118  0.45327  i
 0.204408  0.447548  i
 0.210697  0.441906  i
 0.216987  0.436382  i
 0.223276  0.431012  i
 0.229566  0.42583  i
 0.235855  0.420867  i
 0.242145  0.416154  i
 0.248434  0.411716  i
 0.254724  0.407576  i
 0.261013  0.403755  i
 0.267303  0.400269  i
 0.273592  0.397131  i
 0.279882  0.394349  i
 0.286171  0.39193  i
 0.292461  0.389874  i
 0.29875  0.38818  i
 0.30504  0.386841  i
 0.311329  0.385848  i
 0.317618  0.385189  i
 0.323908  0.384847  i
 0.330197  0.384804  i
 0.336487  0.385037  i
 0.342776  0.385524  i
 0.349066  0.386237  i
 0.355355  0.38715  i
 0.361645  0.388233  i
 0.367934  0.389456  i
 0.374224  0.390789  i
 0.380513  0.392202  i
 0.386803  0.393663  i
 0.393092  0.395144  i
 0.399382  0.396614  i
 0.405671  0.398048  i
 0.411961  0.399419  i
 0.41825  0.400705  i
 0.42454  0.401883  i
 0.430829  0.402935  i
 0.437118  0.403847  i
 0.443408  0.404606  i
 0.449697  0.405202  i
 0.455987  0.40563  i
 0.462276  0.405888  i
 0.468566  0.405978  i
 0.474855  0.405905  i
 0.481145  0.405677  i
 0.487434  0.405307  i
 0.493724  0.40481  i
 0.500013  0.404206  i
 0.506303  0.403516  i
 0.512592  0.402764  i
 0.518882  0.401978  i
 0.525171  0.401188  i
 0.531461  0.400423  i
 0.53775  0.399719  i
 0.54404  0.399107  i
 0.550329  0.398623  i
 0.556619  0.398303  i
 0.562908  0.398181  i
 0.569197  0.398292  i
 0.575487  0.39867  i
 0.581776  0.399349  i
 0.588066  0.400358  i
 0.594355  0.401728  i
 0.600645  0.403485  i
 0.606934  0.405653  i
 0.613224  0.408255  i
 0.619513  0.411309  i
 0.625803  0.414829  i
 0.632092  0.418827  i
 0.638382  0.423311  i
 0.644671  0.428284  i
 0.650961  0.433746  i
 0.65725  0.439694  i
 0.66354  0.446119  i
 0.669829  0.453011  i
 0.676119  0.460352  i
 0.682408  0.468125  i
 0.688697  0.476307  i
 0.694987  0.484872  i
 0.701276  0.493792  i
 0.707566  0.503036  i
 0.713855  0.512569  i
 0.720145  0.522357  i
 0.726434  0.532363  i
 0.732724  0.542547  i
 0.739013  0.552871  i
 0.745303  0.563295  i
 0.751592  0.573778  i
 0.757882  0.584283  i
 0.764171  0.594769  i
 0.770461  0.605199  i
 0.77675  0.615537  i
 0.78304  0.625748  i
 0.789329  0.635801  i
 0.795619  0.645665  i
 0.801908  0.655313  i
 0.808198  0.664722  i
 0.814487  0.67387  i
 0.820776  0.68274  i
 0.827066  0.691317  i
 0.833355  0.699591  i
 0.839645  0.707555  i
 0.845934  0.715205  i
 0.852224  0.722542  i
 0.858513  0.729569  i
 0.864803  0.736292  i
 0.871092  0.742723  i
 0.877382  0.748873  i
 0.883671  0.75476  i
 0.889961  0.7604  i
 0.89625  0.765815  i
 0.90254  0.771027  i
 0.908829  0.77606  i
 0.915119  0.780939  i
 0.921408  0.78569  i
 0.927698  0.79034  i
 0.933987  0.794914  i
 0.940276  0.79944  i
 0.946566  0.803942  i
 0.952855  0.808446  i
 0.959145  0.812973  i
 0.965434  0.817546  i
 0.971724  0.822184  i
 0.978013  0.826904  i
 0.984303  0.83172  i
 0.990592  0.836643  i
 0.996882  0.841682  i
 1.00317  0.846843  i
 1.00946  0.852128  i
 1.01575  0.857534  i
 1.02204  0.863058  i
 1.02833  0.868692  i
 1.03462  0.874423  i
 1.04091  0.880237  i
 1.0472  0.886115  i
 1.05349  0.892038  i
 1.05978  0.897981  i
 1.06607  0.903917  i
 1.07236  0.909818  i
 1.07864  0.915653  i
 1.08493  0.92139  i
 1.09122  0.926995  i
 1.09751  0.932432  i
 1.1038  0.937666  i
 1.11009  0.942662  i
 1.11638  0.947383  i
 1.12267  0.951795  i
 1.12896  0.955862  i
 1.13525  0.959551  i
 1.14154  0.962831  i
 1.14783  0.965671  i
 1.15412  0.968045  i
 1.16041  0.969926  i
 1.1667  0.971294  i
 1.17299  0.972127  i
 1.17928  0.972411  i
 1.18557  0.972132  i
 1.19186  0.971281  i
 1.19814  0.969853  i
 1.20443  0.967846  i
 1.21072  0.965261  i
 1.21701  0.962103  i
 1.2233  0.958383  i
 1.22959  0.954112  i
 1.23588  0.949306  i
 1.24217  0.943983  i
 1.24846  0.938167  i
 1.25475  0.931881  i
 1.26104  0.925153  i
 1.26733  0.918011  i
 1.27362  0.910487  i
 1.27991  0.902613  i
 1.2862  0.894423  i
 1.29249  0.885951  i
 1.29878  0.877232  i
 1.30507  0.868301  i
 1.31136  0.859193  i
 1.31764  0.849942  i
 1.32393  0.840579  i
 1.33022  0.831138  i
 1.33651  0.821649  i
 1.3428  0.812138  i
 1.34909  0.802632  i
 1.35538  0.793155  i
 1.36167  0.783726  i
 1.36796  0.774366  i
 1.37425  0.765087  i
 1.38054  0.755903  i
 1.38683  0.746822  i
 1.39312  0.73785  i
 1.39941  0.72899  i
 1.4057  0.720241  i
 1.41199  0.711601  i
 1.41828  0.703062  i
 1.42457  0.694617  i
 1.43086  0.686254  i
 1.43714  0.677958  i
 1.44343  0.669715  i
 1.44972  0.661507  i
 1.45601  0.653315  i
 1.4623  0.645119  i
 1.46859  0.636898  i
 1.47488  0.628631  i
 1.48117  0.620295  i
 1.48746  0.611869  i
 1.49375  0.603333  i
 1.50004  0.594665  i
 1.50633  0.585846  i
 1.51262  0.576859  i
 1.51891  0.567688  i
 1.5252  0.558318  i
 1.53149  0.548737  i
 1.53778  0.538935  i
 1.54407  0.528906  i
 1.55036  0.518646  i
 1.55665  0.508152  i
 1.56293  0.497427  i
 1.56922  0.486474  i
 1.57551  0.475301  i
 1.5818  0.463918  i
 1.58809  0.45234  i
 1.59438  0.440581  i
 1.60067  0.428661  i
 1.60696  0.4166  i
 1.61325  0.404424  i
 1.61954  0.392157  i
 1.62583  0.379827  i
 1.63212  0.367464  i
 1.63841  0.355098  i
 1.6447  0.342761  i
 1.65099  0.330486  i
 1.65728  0.318306  i
 1.66357  0.306253  i
 1.66986  0.29436  i
 1.67615  0.282661  i
 1.68243  0.271185  i
 1.68872  0.259965  i
 1.69501  0.249028  i
 1.7013  0.238401  i
 1.70759  0.228111  i
 1.71388  0.21818  i
 1.72017  0.208628  i
 1.72646  0.199475  i
 1.73275  0.190734  i
 1.73904  0.182419  i
 1.74533  0.17454  i
 1.75162  0.167102  i
 1.75791  0.160109  i
 1.7642  0.153562  i
 1.77049  0.147459  i
 1.77678  0.141794  i
 1.78307  0.136559  i
 1.78936  0.131743  i
 1.79565  0.127333  i
 1.80193  0.123314  i
 1.80822  0.119669  i
 1.81451  0.116377  i
 1.8208  0.113417  i
 1.82709  0.110769  i
 1.83338  0.108407  i
 1.83967  0.106308  i
 1.84596  0.104448  i
 1.85225  0.1028  i
 1.85854  0.101342  i
 1.86483  0.100048  i
 1.87112  0.0988944  i
 1.87741  0.0978587  i
 1.8837  0.0969191  i
 1.88999  0.0960553  i
 1.89628  0.0952486  i
 1.90257  0.0944821  i
 1.90886  0.0937409  i
 1.91515  0.093012  i
 1.92143  0.0922847  i
 1.92772  0.0915504  i
 1.93401  0.0908031  i
 1.9403  0.0900389  i
 1.94659  0.0892564  i
 1.95288  0.0884562  i
 1.95917  0.0876415  i
 1.96546  0.0868173  i
 1.97175  0.0859909  i
 1.97804  0.0851712  i
 1.98433  0.0843691  i
 1.99062  0.0835968  i
 1.99691  0.082868  i
 2.0032  0.0821973  i
 2.00949  0.0816005  i
 2.01578  0.0810937  i
 2.02207  0.0806937  i
 2.02836  0.0804173  i
 2.03465  0.0802812  i
 2.04093  0.0803019  i
 2.04722  0.0804953  i
 2.05351  0.0808763  i
 2.0598  0.081459  i
 2.06609  0.0822562  i
 2.07238  0.0832793  i
 2.07867  0.0845381  i
 2.08496  0.0860407  i
 2.09125  0.0877931  i
 2.09754  0.0897996  i
 2.10383  0.0920624  i
 2.11012  0.0945815  i
 2.11641  0.0973546  i
 2.1227  0.100378  i
 2.12899  0.103644  i
 2.13528  0.107145  i
 2.14157  0.11087  i
 2.14786  0.114807  i
 2.15415  0.118942  i
 2.16043  0.123257  i
 2.16672  0.127736  i
 2.17301  0.13236  i
 2.1793  0.137109  i
 2.18559  0.14196  i
 2.19188  0.146893  i
 2.19817  0.151885  i
 2.20446  0.156913  i
 2.21075  0.161954  i
 2.21704  0.166984  i
 2.22333  0.171982  i
 2.22962  0.176925  i
 2.23591  0.181791  i
 2.2422  0.186561  i
 2.24849  0.191215  i
 2.25478  0.195734  i
 2.26107  0.200103  i
 2.26736  0.204305  i
 2.27365  0.208328  i
 2.27993  0.212159  i
 2.28622  0.21579  i
 2.29251  0.219211  i
 2.2988  0.222417  i
 2.30509  0.225405  i
 2.31138  0.22817  i
 2.31767  0.230715  i
 2.32396  0.23304  i
 2.33025  0.235149  i
 2.33654  0.237046  i
 2.34283  0.23874  i
 2.34912  0.240237  i
 2.35541  0.241547  i
 2.3617  0.242682  i
 2.36799  0.243653  i
 2.37428  0.244472  i
 2.38057  0.245153  i
 2.38686  0.245709  i
 2.39315  0.246154  i
 2.39943  0.246504  i
 2.40572  0.246771  i
 2.41201  0.246971  i
 2.4183  0.247115  i
 2.42459  0.247218  i
 2.43088  0.247292  i
 2.43717  0.247348  i
 2.44346  0.247397  i
 2.44975  0.247447  i
 2.45604  0.247509  i
 2.46233  0.247588  i
 2.46862  0.24769  i
 2.47491  0.24782  i
 2.4812  0.247981  i
 2.48749  0.248174  i
 2.49378  0.248399  i
 2.50007  0.248657  i
 2.50636  0.248943  i
 2.51265  0.249255  i
 2.51893  0.249587  i
 2.52522  0.249934  i
 2.53151  0.250289  i
 2.5378  0.250644  i
 2.54409  0.25099  i
 2.55038  0.251317  i
 2.55667  0.251617  i
 2.56296  0.25188  i
 2.56925  0.252093  i
 2.57554  0.252248  i
 2.58183  0.252334  i
 2.58812  0.25234  i
 2.59441  0.252257  i
 2.6007  0.252075  i
 2.60699  0.251785  i
 2.61328  0.251379  i
 2.61957  0.25085  i
 2.62586  0.25019  i
 2.63215  0.249395  i
 2.63843  0.24846  i
 2.64472  0.247381  i
 2.65101  0.246157  i
 2.6573  0.244785  i
 2.66359  0.243266  i
 2.66988  0.241602  i
 2.67617  0.239795  i
 2.68246  0.237848  i
 2.68875  0.235765  i
 2.69504  0.233554  i
 2.70133  0.23122  i
 2.70762  0.228772  i
 2.71391  0.226217  i
 2.7202  0.223566  i
 2.72649  0.220828  i
 2.73278  0.218013  i
 2.73907  0.215132  i
 2.74536  0.212198  i
 2.75165  0.209221  i
 2.75793  0.206213  i
 2.76422  0.203185  i
 2.77051  0.200149  i
 2.7768  0.197117  i
 2.78309  0.194098  i
 2.78938  0.191105  i
 2.79567  0.188145  i
 2.80196  0.18523  i
 2.80825  0.182366  i
 2.81454  0.179563  i
 2.82083  0.176827  i
 2.82712  0.174165  i
 2.83341  0.17158  i
 2.8397  0.169079  i
 2.84599  0.166663  i
 2.85228  0.164336  i
 2.85857  0.162098  i
 2.86486  0.159951  i
 2.87115  0.157893  i
 2.87743  0.155924  i
 2.88372  0.154041  i
 2.89001  0.152241  i
 2.8963  0.150521  i
 2.90259  0.148876  i
 2.90888  0.147301  i
 2.91517  0.145792  i
 2.92146  0.144341  i
 2.92775  0.142943  i
 2.93404  0.141592  i
 2.94033  0.140281  i
 2.94662  0.139003  i
 2.95291  0.137751  i
 2.9592  0.13652  i
 2.96549  0.135303  i
 2.97178  0.134093  i
 2.97807  0.132885  i
 2.98436  0.131673  i
 2.99065  0.130453  i
 2.99693  0.12922  i
 3.00322  0.12797  i
 3.00951  0.126699  i
 3.0158  0.125406  i
 3.02209  0.124087  i
 3.02838  0.122741  i
 3.03467  0.121368  i
 3.04096  0.119968  i
 3.04725  0.11854  i
 3.05354  0.117086  i
 3.05983  0.115608  i
 3.06612  0.114107  i
 3.07241  0.112587  i
 3.0787  0.11105  i
 3.08499  0.109501  i
 3.09128  0.107943  i
 3.09757  0.106381  i
 3.10386  0.104819  i
 3.11015  0.103262  i
 3.11643  0.101715  i
 3.12272  0.100182  i
 3.12901  0.0986699  i
 3.1353  0.0971823  i
 3.14159  0.0957244  i
----

=== prices

----
# Average PQR and XYZ stock price (in dollars per share) per calendar year
1975 49 162
1976 52 144
1977 67 140
1978 53 122
1979 67 125
1980 46 117
1981 60 116
1982 50 113
1983 66 96
1984 70 101
1985 91 93
1986 133 92
1987 127 95
1988 136 79
1989 154 78
1990 127 85
1991 147 71
1992 146 54
1993 133 51
1994 144 49
1995 158 43
----

=== probplotdata1

----
-1.12197351886 18.0340553447
5.82627331357 11.1584618566
4.07134746535 3.17780401923
0.116258553492 9.83970496606
8.75519098153 17.7555708526
2.71985809527 3.82711529236
-4.78104718816 20.1561985719
2.61965031232 43.4625738869
3.66601646854 11.3681917177
0.406035799829 4.24989851228
8.87538194355 6.07592867691
-0.840189394421 14.1562707141
4.43238172319 17.1276249435
3.2853809302 1.69533954026
1.5398783291 5.02149985526
-0.0274819018775 10.7725603553
6.97962223045 3.9081882289
0.834827300025 4.42206671846
1.23744007484 5.62131719887
4.80860337027 6.79679256984
4.55346933414 9.45137435649
3.86989855789 5.24743373503
4.25524635391 6.86599292591
5.78997200431 32.9733335342
2.97457374858 11.6507062434
1.87116767837 1.92326566756
2.67401743044 7.01714918533
3.64141446969 4.67803888022
-3.51422646112 6.85987163793
3.96448069286 7.84863460946
-0.2108745616 3.82924665813
2.35251927676 2.60071974837
4.65544778752 10.7224862879
1.57034141546 4.78065917228
4.37149516005 30.9047754802
9.321870736 14.0236618575
9.82484222218 5.18892491521
5.42193661099 20.6050671
1.07553173594 6.90742517813
3.75027531888 6.64554735524
-4.68474975247 5.36452449553
-1.52988219308 6.4009091797
7.31306895365 7.05527319578
2.67129993486 2.28283120756
0.957136218737 2.76433061878
-0.280785581258 9.19472269401
4.5481196924 10.2335240767
-0.074873926672 7.93345694898
1.95434891798 6.57785894423
1.69748748715 5.07295411014
-2.74775651233 9.24230157903
-1.47042798134 9.99317067324
8.89016695503 25.4079115081
2.07265077565 7.0082162738
8.62774154962 6.12295572044
2.31579879048 8.91561716135
0.580336516331 6.20004253611
1.90217996406 3.90723923287
-4.1715743723 28.4103861714
-3.51975754686 10.6578400137
5.97019546621 5.3525860377
3.30536052036 24.1279581776
1.10796453274 1.53015188791
3.99996454148 2.84564698322
11.8883160294 5.28874665774
-0.629614512395 11.2850480225
-0.681834417654 4.99617724967
5.83794818967 6.30185014125
2.93605817144 12.3481271688
6.17049357833 4.01063510943
-1.35167404739 15.2934955038
-0.865225243991 4.77525021517
-2.90947270352 6.38173499302
1.39722999652 19.9954730475
1.87610563583 6.60378316953
2.9088982819 7.02655352082
2.90492859244 11.066721448
3.60487285327 15.9751485246
9.64495140535 1.1019087266
4.36327740199 3.88078483557
-5.91144613511 7.23912267898
6.13837624476 4.35257684459
2.08059989152 3.1486016536
7.87088934786 0.987176608943
8.62234652226 2.95780329622
1.94064363371 13.4960735657
7.51743086927 9.9108764885
6.61567465097 4.75316467286
-0.969063286828 11.3349340058
8.19093281844 9.32137813859
7.40407760538 22.846866728
6.03753320406 4.50354110398
-3.32372729223 12.8531243874
10.9792761284 16.6487627855
-0.951037583203 15.6367141687
12.3940306147 17.1677749615
3.24002012431 10.4437269082
3.27667693242 21.1872869458
3.15198613747 15.5024471945
8.16661067128 6.8450565291
----

=== probplotdata2

----
8.12748497854
8.14010352324
8.09500926032
8.08127047437
8.11868039579
8.08964742144
8.12612576116
8.08914928314
8.1081285678
8.11982579355
8.17690023541
8.08679851501
8.13486324494
8.13584923366
8.0840683122
8.15664399444
8.08767790829
8.10874419574
8.12584459966
8.17927095459
8.11707507793
8.16778821841
8.14263733057
8.08857962602
8.05647404106
8.12604886266
8.1230714309
8.10811238121
8.16410046429
8.16342538051
8.12052018925
8.11976813921
8.17301763071
8.14077521344
8.07979136913
8.15317806685
8.0759643051
8.11763622811
8.08454229684
8.06177293933
8.15948618527
8.09345973749
8.09474279882
8.12788360529
8.10223323449
8.13296034419
8.12012124304
8.15672984891
8.06184530394
8.13679828555
8.17325589336
8.09640602491
8.1425574176
8.12883806579
8.13569325955
8.1360278232
8.16475883649
8.15548379307
8.16451021949
8.09925810018
8.14412419174
8.1041927767
8.15063007824
8.18617805515
8.1493625033
8.08783582143
8.11853429834
8.10102836048
8.14609534432
8.1440540841
8.09556402722
8.16245021833
8.1019219919
8.16621549191
8.12442318408
8.13371421745
8.11306853772
8.15083648622
8.15678637384
8.1008074864
8.04409397848
8.09593893275
8.09673653031
8.17178112222
8.11925337551
8.05783564211
8.10355391948
8.1791282915
8.13197001631
8.15738012314
8.16489794882
8.08013565701
8.10870861253
8.13219789616
8.11375845715
8.1280918799
8.10438789888
8.12801419625
8.12330204475
8.14024156923
8.13546683529
8.12180493501
8.18081007132
8.11707369783
8.11473165838
8.10006543097
8.05634111259
8.09070123055
8.13917045878
8.17206987256
8.1026912678
8.15681360231
8.18638234462
8.06470358104
8.16937713001
8.07999075406
8.1456837335
8.09964679759
8.12545285276
8.1477729568
8.1663497514
8.11240599248
8.09907500858
8.08416089051
8.14336402127
8.15873282663
8.10260492529
8.12575292628
8.10359841776
8.1223802556
8.13677518538
8.08849479434
8.10287314309
8.14244727153
8.16934899195
8.12137927124
8.09032618279
8.05719465421
8.07335284751
8.05634552123
8.12655137064
8.1161470961
8.1430233871
8.17234527946
8.16174967616
8.06773699436
8.13857696139
8.16024290975
8.18282255582
8.16492335231
8.10067031093
8.106461356
8.10403041758
8.11346892158
8.05919155059
8.11386047466
8.16838619261
8.11308472402
8.15004307986
8.09951404775
8.14564197324
8.07178298842
8.12837028762
8.0885394829
8.06913739984
8.14062978648
8.05334172036
8.11951722931
8.11136874867
8.11379223442
8.19498745052
8.11432995697
8.13410881315
8.12130597065
8.12783389105
8.14185960133
8.1132663736
8.09201477869
8.11581071245
8.10514679012
8.10250175104
8.1323711929
8.11011935087
8.13971762471
8.12104416805
8.14378234572
8.09855074055
8.10786566269
8.13335638156
8.1777589667
8.20428912598
8.16104778371
8.09438110057
8.1376512804
8.15785284192
8.12800230279
8.1251830215
8.13290425799
8.10295882375
8.10045716776
8.12949059573
8.1279317033
8.09985125038
8.14935141825
8.12649508708
8.13084970672
8.11456191871
8.11123700395
8.0973302124
8.08360291913
8.11287962337
8.13312537538
8.11637803024
8.11943174516
8.15197412294
8.08113136759
8.11170392436
8.20032239591
8.1236994885
8.15563002514
8.11256178622
8.1147891477
8.15234334233
8.1117866924
8.10973382128
8.09774266702
8.16141365424
8.13120182832
8.1469029405
8.08488281945
8.06184231154
8.14150181745
8.08493047326
8.13899033684
8.09881118918
8.15132186101
8.17455730644
8.16702303013
8.01435763942
8.10456831347
8.13991750822
8.04012686794
8.14313330338
8.0710978026
8.14529359582
8.14792684999
8.10981104344
8.07836429979
8.11347696205
8.13224473448
8.10190400969
8.11511108305
8.11421749565
8.13975513548
8.10602606888
8.11637124573
8.12191328166
8.09935743449
8.0997051394
8.12389299319
8.08930058355
8.1356553185
8.10243605681
8.14841465261
8.04093338136
8.15487982533
8.0897268428
8.09309850792
8.08937178569
8.19820799983
8.15307826134
8.1428855303
8.10921062439
8.12087138063
8.06957656736
8.04396755733
8.08713284131
8.08665946871
8.13310097455
8.1165996769
8.09314370863
8.11858571157
8.10094988766
8.14459235912
8.15370707726
8.07018210216
8.13746651374
8.07473997174
8.17773811584
8.14956393512
8.17957657506
8.0794921338
8.12336614212
8.1202443145
8.14085502643
8.16516019489
8.13704970177
8.10961125407
8.107056735
8.0496367301
8.08504622311
8.09363382952
8.08987249913
8.08823596633
8.07933041875
8.13652123694
8.1859501312
8.10718238915
8.12709879664
8.10058461963
8.13502309586
8.13167613045
8.14836866682
8.15515102116
8.13848875993
8.10755780968
8.12646580038
8.12566114431
8.10523725621
8.07045141773
8.07807524305
8.10140758152
8.14791072937
8.12326429676
8.16331417293
8.14907741737
8.10065609963
8.12516180612
8.14724390624
8.15261567576
8.15631286248
8.17798536219
8.11177441324
8.18002052708
8.15322281292
8.09430313802
8.13972351175
8.14092356842
8.14016254721
8.09622748624
8.17851336693
8.08241356475
8.14932548516
8.09316283471
8.14193414728
8.18487439046
8.09050243058
8.14028303104
8.12706875029
8.0904879578
8.09706313861
8.0797668215
8.09748017555
8.08116714234
8.07742357788
8.1153083295
8.13813867787
8.14911128913
8.14816146673
8.12346054748
8.06704474338
8.11688771245
8.12242858141
8.14424578726
8.07836313407
8.10789731854
8.07696101383
8.13960815378
8.12445264658
8.1028204307
8.12888332681
8.12111899582
8.13453463259
8.12181770112
8.12913006894
8.15267278317
8.09037783764
8.08001239285
8.13754316159
8.10441132161
8.17151454247
8.17003981124
8.14259402219
8.08390320168
8.12419964108
8.09400938462
8.11187758143
8.1505749074
8.10581916765
8.11290636883
8.15110745952
8.1183263937
8.14779875149
8.13619662069
8.16624893731
8.14416979329
8.12480513261
8.14951624454
8.13791673189
8.14999792818
8.14331913238
8.14408609916
8.12857459033
8.09371322778
8.09564878917
8.13807860086
8.08111026872
8.07808309002
8.07954748327
8.11751841
8.0774753099
8.15404258403
8.0737382427
8.11466050037
8.14154539086
8.10897825709
8.06614479489
8.11412050722
8.09475414707
8.15139913252
8.13544895253
8.05918924116
8.15864259633
8.13526405545
8.12658372915
8.13429065535
8.11643076593
8.08894039245
8.14999048377
8.11208888888
8.11869712617
8.11561419698
8.13535712776
8.11567441671
8.12428751608
8.15733165624
8.15301513582
8.14469822682
8.10433106226
8.11562409472
8.11066074049
8.10976365262
8.09290003919
8.18834413298
8.20580666692
8.11237367914
8.14804946345
8.07657095098
8.05986568471
8.13103731107
8.14365439823
8.09127473123
8.13571052005
8.17249205864
8.12973823927
8.0871277382
8.07532958376
8.05675978547
8.12950964177
8.07777145389
8.12456045904
8.15699850637
8.13859224105
8.12177713518
8.08091488219
8.13799054012
8.09327303514
8.11085762085
8.09833465887
8.1019296294
8.12395521012
8.13668201967
8.12658996074
8.16469239547
8.1625550823
8.11308402275
8.08888996256
8.11664911776
8.1125557656
8.15944581745
8.13557417939
8.13365790633
8.14319435035
8.11894111961
8.09533736664
8.1158811234
8.13398227466
8.12389939962
8.10371395431
8.12331284959
8.09191096311
8.1879875548
8.1149048611
8.0969757596
8.13645442166
8.11202678133
8.10954161345
8.13899700887
8.14469181001
8.12989317754
8.05059912363
8.11555812734
8.14897155675
8.1331917356
8.19024813086
8.1341610172
8.12701784802
8.11376205335
8.13961618606
8.1487922777
8.15393946265
8.09073515829
8.09722752132
8.10340383967
8.09088449156
8.14131605707
8.06913083097
8.11607798494
8.08374456162
8.1335922693
8.12831332799
8.1811835141
8.15064884166
8.11866798449
8.12914507156
8.15252573477
8.15925467255
8.0663696949
8.13079925846
8.1137391569
8.09872308527
8.12342155169
8.10093869955
8.11083588282
8.14081744993
8.13648517891
8.07790970176
8.114702827
8.13857924881
8.13160037498
8.13931740688
8.1447734271
8.11559148743
8.16007271775
8.09268122199
8.09715603061
8.15889543384
8.13481814872
8.15412367091
8.1210326964
8.12061407745
8.09312790687
8.12051118366
8.09279223656
8.15460758065
8.10610667545
8.13372501127
8.16507855534
8.10732638076
8.10484806864
8.11385842545
8.13573340551
8.14984405489
8.1127818753
8.12318792341
8.18324763021
8.11020368045
8.09972332967
8.1244869777
8.11791369549
8.14827513453
8.11886776432
8.08957496993
8.08935523234
8.11248052382
8.09794658349
8.1131615538
8.1357119422
8.10537344447
8.10672595058
8.07601961488
8.13747856324
8.19279877081
8.19154575188
8.14758746829
8.12275358295
8.1004685546
8.09687186069
8.08138841024
8.14145083441
8.13780177815
8.16243489073
8.07931062034
8.07028618588
8.13375112179
8.13504713233
8.08308411048
8.09731375239
8.07772105443
8.11909457676
8.07912358925
8.06086012962
8.12532435394
8.07951651215
8.10329957007
8.10245199891
8.0576060466
8.12046430441
8.13687812142
8.11680746586
8.11724654825
8.12867593596
8.10478590855
8.11223442981
8.16809070821
8.14142444376
8.10961948668
8.13303872306
8.12277302969
8.07312091167
8.12683434374
8.08632880536
8.14823925025
8.09824084112
8.16656171438
8.1242125829
8.14176667655
8.15432282406
8.14792195272
8.12916982965
8.16627759066
8.18565353142
8.17829579625
8.20191199505
8.1000929468
8.161908921
8.15891015003
8.05229296309
8.10973647012
8.17386978377
8.08756194292
8.11799522057
8.10831385447
8.13533698893
8.08723648924
8.17634539271
8.12119403301
8.18609371134
8.12889036088
8.11730444928
8.12817872568
8.14112707846
8.04375914162
8.11082367714
8.11059051689
8.08123942529
8.07032455537
8.06751074109
8.08451575401
8.1063747777
8.11935400653
8.10967584649
8.16859705405
8.14275092586
8.15068451168
8.11557633666
8.17009590105
8.12626337657
8.13393364341
8.09665214045
8.08632599213
8.14861667295
8.12570771276
8.08645121039
8.12688888564
8.17428534722
8.09402567951
8.07183208027
8.14211221114
8.10648235805
8.11757014822
8.09380125353
8.09208331284
8.12436085484
8.08362962707
8.09686775866
8.15209290535
8.16017880804
8.14705107952
8.09965049368
8.12402938262
8.11124328787
8.10004944397
8.11831302673
8.12219304315
8.12326188382
8.05611278415
8.15061906121
8.16820123288
8.03195500024
8.10721941962
8.16636741302
8.18017592614
8.12159400112
8.13155251983
8.09225125875
8.14735869111
8.0756193147
8.133144403
8.15129250946
8.134510604
8.09462821605
8.18489490376
8.12863098058
8.08359644573
8.12700776029
8.18376791985
8.09673124017
8.1303971329
8.13000708482
8.11321297651
8.11821497056
8.11771192312
8.09993348255
8.14616310081
8.14533794213
8.14436724264
8.12080422235
8.1290375456
8.14234713216
8.09022960812
8.11626098496
8.14130282648
8.15253106055
8.06888355247
8.12782337752
8.13289684022
8.13076896332
8.1542046202
8.08205218478
8.15704009494
8.13961387756
8.10264768337
8.0962768032
8.11974181252
8.16514590394
8.1501171943
8.10391156048
8.14328609499
8.06668655185
8.16942264322
8.10176832034
8.10220470165
8.14237137479
8.09652858403
8.11918774646
8.1152641509
8.11457633423
8.07468584976
8.07732861985
8.12587096892
8.12289936883
8.10175509851
8.13202655479
8.17748434282
8.12967985804
8.16410533776
8.1271475854
8.1159994583
8.11698847258
8.14923757453
8.07235728297
8.11995983153
8.13138030668
8.17639043134
8.08127462435
8.13898975988
8.08045774968
8.12943236967
8.13563734231
8.10154068377
8.1294332227
8.07762960589
8.10286835061
8.13312567957
8.14229842669
8.11919270712
8.09778271581
8.15953039397
8.14658765758
8.11486149187
8.12093493181
8.08660368209
8.13888541272
8.07209182252
8.11639581084
8.09838570897
8.10269380418
8.09428173856
8.10539793699
8.1319226544
8.12185051561
8.096822471
8.11921142407
8.10740887654
8.15631064896
8.15071230577
8.09628080571
8.12077646483
8.13231342389
8.10931799451
8.1305087686
8.08781205644
8.10043761194
8.10430158821
8.10456712201
8.13723351929
8.1259788112
8.12099186074
8.05224994765
8.16290390888
8.12750228846
8.12127725806
8.09236861253
8.11431286767
8.12921207981
8.10343804218
8.03924188778
8.12227112679
8.06026971363
8.16607461633
8.15628252814
8.11031445313
8.05804076234
8.1247092147
8.10841634592
8.08616632076
8.15855032496
8.06848500234
8.14464268275
8.13226916414
8.14915698544
8.12662266829
8.15483240913
8.12254236906
8.10844974588
8.09990033744
8.13370716299
8.12365882916
8.08026452557
8.12776899311
8.12247448501
8.13393229151
8.12576312989
8.0403597949
8.09467029063
8.18540440532
8.14246230465
8.14186140649
8.10428866715
8.06954872382
8.14801147019
8.13043390646
8.14261757034
8.06451517806
8.08718377247
8.08511222959
8.09862835536
8.09339574286
8.12789344506
8.1231011739
8.11729591062
8.08118884425
8.11516436721
8.14095729537
8.09248170444
8.0943895208
8.13951134779
8.09569743892
8.11246242485
8.05739998582
8.159207539
8.072334198
8.07843027803
8.11359386722
8.11294096768
8.15264944318
8.13962976538
8.14705343352
8.1444862571
8.06545711509
8.10924189377
8.08894949765
8.08253707035
8.08047636049
8.11383824455
8.18585189129
8.136898205
8.07946957399
8.10347447074
8.1575947596
8.10574978775
8.13245289115
8.07637285053
8.13976158088
8.13943146537
8.15540261529
8.1074030452
8.11645180587
8.15510387105
8.05554838622
8.11446189627
8.15536929152
8.15707686921
8.06386171561
8.18131022376
8.16671497077
8.1717415616
8.13032352412
8.11018653575
8.06198935237
8.09251898011
8.11957704053
8.17506357694
8.13056084625
8.19399426665
8.09593177746
8.17194152524
8.13579911954
8.11176671718
8.11866299564
8.05827923407
8.11816246337
8.19148735002
8.11710173707
8.16883005981
8.10170692726
8.10740461509
8.1372675155
8.14697360215
8.07597178309
8.08145469918
8.08608598868
8.08299129767
8.11275042316
8.10544175951
8.08135330241
8.14361121324
8.07023350082
8.14460519238
8.12592017125
8.05901163665
8.15015362265
8.10499740948
8.11720311652
8.08026290022
8.15621795766
8.14361679679
8.09921998985
8.14922635565
8.13551119055
8.09283813765
8.12501597027
8.0462753505
8.14759714568
8.11348285139
8.07144138085
8.19292089307
8.13083464777
8.11398451112
8.13218393
8.12303446201
8.12140840366
8.12025954888
8.16311538496
8.13131447193
8.12320283778
8.16108359654
8.15197389963
8.10147220463
8.12362691746
8.12358402452
8.11158129382
8.11448330777
8.14570942598
8.09254842179
8.09218569457
8.13713303778
8.11051721542
8.13719495093
8.06898184094
8.16136395357
8.16325503208
8.17294001365
8.10478660377
8.11634851072
8.05877711613
8.12913142932
8.14307017867
8.12846444794
8.09714887486
8.06747129296
8.11250459881
8.06847162831
8.13178340731
8.14602958776
8.12648168569
8.1169697557
8.15963329001
8.09175334198
8.08106383019
8.10311088612
8.13999886543
8.10926533742
8.13439838315
8.16083489718
8.11817082678
8.07763612751
8.13151605283
8.10912647417
8.14218484176
8.10214306126
8.13459494106
8.11971860161
8.11123717012
8.1431652538
8.11637288627
8.08509662202
8.07901581563
8.13783683036
8.1236658677
8.12618277815
8.1120651988
8.10329967187
8.15299071123
8.1207236223
8.09933019227
8.15214512182
8.11574291979
8.16495492794
8.13664351417
8.13517103338
8.14246886462
8.10912831982
8.09200598267
8.09720989348
8.14353233306
8.08948575204
8.09594083296
8.10603887986
8.10389650047
8.10409800021
8.10026985562
8.11967423183
8.06945009357
8.11813331431
8.14650639814
8.15172015448
8.14192258088
8.11266400541
8.15306235915
8.11999308057
8.13280279443
8.05464725014
8.10557973785
8.09240697389
8.12690916327
8.13190503764
8.10942716592
8.13151001022
8.11629089572
8.06755440768
8.15765215456
8.07882085211
8.14657586336
8.05573676302
8.06526543834
8.1324058624
8.13655691891
8.10421305676
8.10996759071
8.12364648243
8.07587906288
8.12126079682
8.09637650976
8.14296526403
8.14174911456
8.15956856914
8.08151425855
8.11827496251
8.05426368457
8.12465166428
8.09220562216
8.09500562989
8.21095356329
8.11010870797
8.1195087016
8.06519273494
8.1041735977
8.15984049076
8.1490289924
8.11273370747
8.11334430886
8.13290235203
8.14525671171
8.16014141465
8.19336359985
8.12088033918
8.11679685795
8.1376524118
8.06963391094
8.13426701121
8.14221432945
8.13646490445
8.06386469124
8.10455399335
8.16959083791
8.11979950997
8.12287971418
8.11914002266
8.11217629138
8.14704840657
8.10105258753
8.08521870479
8.14969336763
8.07990649258
8.09016431933
8.10502786878
8.15500096144
8.17472681992
8.12308588725
8.15437522395
8.07387549584
8.10616995451
8.13076753873
8.13429035163
8.10152738104
8.08459782686
8.15230221221
8.15166611687
8.14648620776
8.14385522039
8.12330737211
8.11489953667
8.12808765016
8.13677934106
8.13174329832
8.07935249162
8.20008711387
8.12772965094
8.08829017587
8.1415710105
8.07983883421
8.12023037032
8.05772109133
8.08049052236
8.1429103015
8.10503026531
8.13607271016
8.11073033438
8.0855481167
8.10890655809
8.08179587186
8.12446937551
8.18049607538
8.04884213738
8.08210013286
8.11667944437
8.10504272538
8.12253985693
8.10360140557
8.12337363274
8.1212091055
8.15618817707
8.16675619501
8.10799463435
8.13017241003
8.10908273354
8.15320574128
8.15708139605
8.15260006689
8.07723248373
8.13190678907
8.08929346436
8.11700518097
8.12087121273
8.13193040217
8.13405385159
8.10848547168
8.08755964401
8.14678833663
8.1336234924
8.08279664464
8.18068926459
8.14184830883
8.13415351215
8.12600670442
8.07462312634
8.12556509372
8.14348956987
8.16999263902
8.13951447236
8.16185024818
8.13061569938
8.08530183698
8.0997513515
8.12621316844
8.15593387908
8.11648363779
8.1002550786
8.10992894461
8.04792280186
8.17409979721
8.13410112675
8.06733703484
8.11444198318
8.11834035871
8.13387419825
8.13224385992
8.1297506319
8.06906963366
8.09128524509
8.09364393424
8.1487168863
8.06553158494
8.09145941079
8.1351256213
8.08190699556
8.1089006764
8.11954112452
8.0471900358
8.16966299363
8.12465229641
8.09763671629
8.07567340783
8.07441121734
8.08477646966
8.11823102309
8.09943204695
8.09860892794
8.12565239743
8.15339626479
8.14375057182
8.12313433406
8.13260805342
8.11011953959
8.09476263792
8.09608606012
8.09643929529
8.1085815123
8.11715966773
8.13267323783
8.11279423317
8.17377876052
8.12382327757
8.1037922461
8.08165102145
8.12536799713
8.11869125804
8.08394821358
8.1785125857
8.17382246282
8.10582555068
8.11565262251
8.14647640253
8.11718407705
8.13132865736
8.07930140012
8.15793158788
8.1248538696
8.0900764001
8.09834178705
8.11189297589
8.13444272804
8.09976505753
8.10312072159
8.04096262614
8.12590432524
8.13172592508
8.08502216286
8.11833575264
8.11122504293
8.14978929172
8.1048309922
8.08950376607
8.11489197212
8.11659736493
8.13303771905
8.14067299446
8.14290408017
8.10686232479
8.09699114538
8.11315734951
8.16884801801
8.09051009103
8.10695676674
8.12544861159
8.0836607723
8.0553785456
8.13772795976
8.06067783012
8.11256030285
8.12762102549
8.09563549625
8.0441188955
8.11198391318
8.11533911042
8.08276633412
8.09283206113
8.11024126807
8.04268344056
8.12529795112
8.17052834713
8.114945349
8.11797753317
8.10708432657
8.10942382757
8.12434071587
8.18425326319
8.10897820167
8.16420681776
8.10051498608
8.14437164093
8.19760313314
8.0861663295
8.14202431618
8.09702444359
8.16776605082
8.121886842
8.12915116549
8.15760788573
8.1300442832
8.14294961216
8.11746763369
8.11777788902
8.08905538438
8.1239335077
8.12936232387
8.11532331848
8.14772571586
8.10462142152
8.04736900227
8.14625508004
8.06215426911
8.08555466298
8.14554750177
8.09835108723
8.16345363651
8.08378583716
8.10009194021
8.09313807185
8.06943182435
8.13334024873
8.12571183941
8.06457180713
8.09404467302
8.13327159935
8.15135339806
8.11299069007
8.08164016854
8.18368222103
8.11044425895
8.10823279739
8.08110287623
8.21601367972
8.15834502116
8.12768804401
8.10725419574
8.12842430101
8.12681739748
8.11928974159
8.12166254316
8.11991569171
8.10376631455
8.17030253693
8.10819418495
8.10482902429
8.0964655331
8.16968406618
8.08302753312
8.13421681013
8.10880118696
8.14787401291
8.07862918237
8.14404378423
8.06585841741
8.03167536397
8.14358573761
8.07648269978
8.16997947094
8.16199391995
8.13169896777
8.13466609913
8.12475574294
8.13748595129
8.12952471833
8.10368575759
8.19070038544
8.14583907476
8.17414757259
8.13858666589
8.04818895588
8.16203065702
8.10177214835
8.10703164937
8.11547646913
8.10130660048
8.09503719176
8.12194912862
8.16836120097
8.07955361525
8.10954249829
8.12120407332
8.09305953264
8.129594799
8.09998028706
8.12628675645
8.17414099214
8.13606423065
8.10170462566
8.13756042159
8.15146734632
8.13150508634
8.12692065896
8.1494055394
8.0859223209
8.14218806089
8.11670908676
8.16200174149
8.20930757816
8.09892859169
8.15982572526
8.11836633952
8.13170304507
8.13772551111
8.13160043814
8.12156339209
8.06789881567
8.11382620071
8.12501570796
8.11992831972
8.12358431606
8.11877705708
8.14472483898
8.15569766652
8.13885508378
8.15706886687
8.15200430534
8.0783084055
8.14678196971
8.18931700649
8.07069504256
8.02162508054
8.08187657016
8.06651147742
8.16251794567
8.09234133263
8.11727643974
8.15044433352
8.10366893693
8.13588365707
8.13640683767
8.15826224375
8.1612496933
8.168414811
8.10849198275
8.10930005671
8.13543382683
8.1074306312
8.10867770884
8.13082122404
8.1055783974
8.1442985552
8.09322830219
8.12233100382
8.14487389038
8.18333039444
8.10731917218
8.14818510743
8.09328459342
8.11267144682
8.15404999846
8.13499284849
8.11385847777
8.09120548323
8.14063213
8.1202342342
8.13633692997
8.07809691776
8.16617441501
8.12142515417
8.15752781472
8.12775912546
8.18470067522
8.10712653869
8.11002489848
8.07433221672
8.19702018303
8.1100398801
8.13657236871
8.13380757044
8.14631279983
8.20011737644
8.19156585002
8.18018778668
8.0602492353
8.12363659928
8.1302406242
8.15276506014
8.11928235358
8.12723794418
8.08826274659
8.09969070222
8.08390756226
8.10516691337
8.15441011323
8.1458573758
8.10330796871
8.14128368299
8.10582090093
8.1578966982
8.12328827575
8.13261129097
8.11823811412
8.10384529114
8.11438446833
8.12160496594
8.14033123452
8.14327244167
8.12956425347
8.14345332445
8.13553719488
8.15636754804
8.15047990301
8.16288884718
8.12275276897
8.11913914642
8.11189042916
8.16356051448
8.08550905629
8.14151692056
8.16015368877
8.13448347254
8.05773116362
8.13954937808
8.08936221903
8.13716629135
8.08020560881
8.1133361511
8.12537429994
8.15945448408
8.1097245953
8.10723756649
8.10634373027
8.09571045198
8.14551406051
8.10618468569
8.15541661217
8.10975971125
8.08948154711
8.18588872887
8.0847094498
8.15356972739
8.068114899
8.15828608916
8.11883638838
8.08280811958
8.13127269898
8.07949245545
8.20436770597
8.12326865607
8.15035506301
8.12586851503
8.10766256575
8.17957675353
8.15334378092
8.0637252378
8.13683150971
8.10418823306
8.12367697496
8.10033080368
8.13697351917
8.08622760948
8.12105204027
8.15849306375
8.18065276565
8.0856117235
8.12592098186
8.1749979832
8.13634902023
8.13547162705
8.12961669173
8.1348142796
8.13031766497
8.20484664619
8.1073123486
8.12081607493
8.12040280252
8.11413378457
8.10604954906
8.17410821685
8.0408245432
8.12585846097
8.13893263075
8.10201540144
8.10152008071
8.13411117297
8.08603794019
8.1509140042
8.15337535635
8.1332302499
8.10678341864
8.15248281742
8.13451652798
8.12230500067
8.14623765724
8.0968216709
8.1019317909
8.06763748989
8.08413029128
8.0847000312
8.1209829165
8.10441430156
8.14736992993
8.11613451722
8.1430050569
8.09984016229
8.12689684034
8.07252877965
8.14884123982
8.16622821219
8.13033760471
8.15177050176
8.10586615011
8.09551323638
8.18126722079
8.14167887203
8.15790797809
8.11110860106
8.16379922926
8.10603611188
8.11414929317
8.09401926578
8.11916441927
8.14293093406
8.08739526874
8.0947752845
8.09176867271
8.16456808838
8.14125282593
8.12818580841
8.1367543484
8.10408125631
8.10722329524
8.09821255381
8.04989545498
8.10272158304
8.13141033935
8.1668653418
8.18201025544
8.09455708715
8.1192163633
8.11237200818
8.12760071185
8.15539287668
8.08623586996
8.10233677418
8.08407997121
8.11764676471
8.13226091285
8.13522277236
8.15303587988
8.10484089799
8.1249679931
8.04089041003
8.18100499673
8.12058811851
8.16980551398
8.08726550821
8.11599096231
8.13238194763
8.12666250241
8.10965512949
8.13055722408
8.14622789504
8.14938576316
8.18258032576
8.11351197108
8.10794733645
8.17128736141
8.08235181611
8.11632757565
8.12212348799
8.15005200991
8.15814269975
8.13517360797
8.12754207654
8.19407387339
8.13500744935
8.0897009142
8.1824671886
8.11350361165
8.15761639058
8.13170103817
8.11064481686
8.1083799897
8.1312498471
8.11322266796
8.11665548659
8.15259727931
8.16717952687
8.08457265124
8.15792909824
8.14629626521
8.1457376593
8.12237810631
8.1136777927
8.08392786201
8.12020778919
8.08422245331
8.07073241478
8.10290712092
8.16598801961
8.11768430852
8.1253517483
8.11622467045
8.12947821356
8.14031469636
8.07944240925
8.16075265392
8.12202775324
8.10993568596
8.13987239608
8.17503293763
8.15247550384
8.09366152087
8.13656776153
8.09268839479
8.10349239535
8.14158291334
8.15530031504
8.09747898157
8.08212586128
8.09102326874
8.09738567207
8.081046369
8.10314803198
8.10368470914
8.1233258186
8.15141522494
8.12625129958
8.07451542812
8.105828144
8.15246046002
8.121250497
8.15994892511
8.07513619685
8.13279528143
8.13941598111
8.0805070588
8.09659193161
8.09339488725
8.15888097198
8.09273297148
8.14938364864
8.11301835013
8.15308136453
8.12477882654
8.11404848697
8.17386849021
8.07674796259
8.15742694785
8.0860908008
8.11330068273
8.13534001594
8.1373050138
8.09543393847
8.15597946854
8.10942741032
8.04940382844
8.14468359045
8.12799098128
8.12777456738
8.11884317288
8.13523240385
8.05363957515
8.10501739644
8.18963478822
8.08355698772
8.15317991594
8.12114913524
8.17564440376
8.12837478548
8.10864628022
8.0908363096
8.14208124924
8.13642331636
8.15196479853
8.12728353997
8.11871772703
8.09660027082
8.13470931524
8.1577871382
8.11287807047
8.10314980372
8.08028674152
8.13519726723
8.14515031688
8.09019280094
8.14285971385
8.15480551849
8.11337465926
8.15539242134
8.11518294105
8.10697418365
8.06345628108
8.10690786952
8.09859899624
8.18090930232
8.12201724681
8.13033693036
8.0837778045
8.13952286823
8.1108071902
8.11656642439
8.10495067835
8.12218526574
8.13591392274
8.09002145293
8.13980005782
8.11558745685
8.1297704549
8.12375171738
8.06656174707
8.12014865975
8.139987473
8.09301631195
8.1036725261
8.13754165862
8.1163031507
8.1403875865
8.09175735942
8.14364200341
8.11352651875
8.12604904172
8.12888184295
8.09783266586
8.1803610396
8.11681310375
8.16777648466
8.12134239338
8.09813459769
8.13753061277
8.16416908087
8.14923904386
8.12424969392
8.15193918987
8.1155519239
8.12190401876
8.15793131296
8.17007477305
8.10251771323
8.11439343832
8.20015570368
8.09051483828
8.13738371291
8.11519206653
8.09089652473
8.15470495056
8.13097424665
8.16493439017
8.08301623053
8.15070343696
8.08141605911
8.0867196781
8.20296659971
8.15451852922
8.11115294953
8.15394891909
8.13312142396
8.15865133833
8.16404921787
8.11182622731
8.16001072799
8.0933222248
8.09446499949
8.08536526925
8.16284333349
8.10030388675
8.18263050185
8.10221579545
8.07982878491
8.07569898425
8.15965229425
8.05761483886
8.1261424536
8.14650703562
8.11470818872
8.14246229983
8.06307724074
8.11660804486
8.16215325804
8.09543055627
8.14665497134
8.14832410897
8.11160691621
8.0710648014
8.12439402397
8.13998533325
8.14436196087
8.07697870887
8.10268829691
8.1360640697
8.07301565736
8.09555840841
8.10445365997
8.08595538241
8.13485749897
8.12444394016
8.1257783662
8.149904631
8.13216540482
8.11473769809
8.10862292203
8.07724815844
8.12438074975
8.0890512207
8.14998218698
8.14815351279
8.11736352368
8.11594609832
8.10875475866
8.10599237427
8.17765666687
8.07055207311
8.06307668019
8.11510936004
8.09078822812
8.13292144766
8.11896659852
8.09279788452
8.11331380645
8.12087796462
8.0750191066
8.09684386685
8.10147165349
8.10482620226
8.16240242722
8.05341713536
8.12088479229
8.09860144976
8.10694437029
8.11914792423
8.17314986585
8.10270469282
8.11263941601
8.08752033781
8.13669739176
8.14403436983
8.18160072467
8.09621597782
8.15620160899
8.14955574163
8.13345883041
8.16580660766
8.14468704318
8.0758892704
8.12064230117
8.11991352521
8.04654530349
8.16333782643
8.08179225393
8.19593223182
8.1550893358
8.12684780283
8.11933644753
8.13024367988
8.12000038134
8.1658585041
8.09826452206
8.08646817596
8.10431060269
8.05226374108
8.09433349786
8.16008401793
8.11581507977
8.0959780518
8.13022118597
8.1427665725
8.12112483132
8.2389262231
8.00316676951
8.26341306979
7.97460536796
8.28178206323
8.01008090238
8.25673027715
7.9782665502
8.23841764449
7.96825989192
----

=== progress

----
1 	 0
2 	 1
3 	 2
4 	 5
5 	 8
6 	 13
7 	 19
8 	 27
9 	 39
10 	 52
11 	 70
12 	 91
13 	 115
14 	 144
15 	 177
16 	 217
17 	 259
18 	 311
19 	 370
20 	 432
21 	 501
22 	 575
23 	 650
24 	 736
25 	 840
26 	 946
27 	 1080
28 	 1211
29 	 1358
30 	 1534
31 	 1709
32 	 1904
33 	 2098
34 	 2316
35 	 2540
36 	 2780
37 	 3025
38 	 3271
39 	 3519
40 	 3799
41 	 4077
42 	 4382
43 	 4688
44 	 5007
45 	 5332
46 	 5658
47 	 5994
48 	 6338
49 	 6721
50 	 7083
----

=== pyramid

----
# End Points
# x      y       z         color    label
# 0	 0 	 0	   0	    "Origin"
 1	 0	-0.7 	   1	    "A"
-1	 0	-0.7	   1	    "B"
 0	 1	 0.7	   2	    "C"
 0	-1	 0.7	   2	    "D"


# Edges
# x1    y1       z1        x2     y2     z2
 1	 0	-0.7 	   -1	   0	-0.7	   # A -> B
-1	 0	-0.7	    0	   1	 0.7	   # B -> C
 0	 1	 0.7	    0	  -1	 0.7	   # C -> D
 0	-1	 0.7	    1	   0	-0.7 	   # D -> A
 1	 0	-0.7 	    0	   1	 0.7	   # A -> C
-1	 0	-0.7	    0	  -1	 0.7	   # B -> D
----

=== records

----
# Distance    Men      Women	Men		Women
100          9.58      10.49	2009-08-16	1988-07-16
200         19.19      21.34	2009-08-20	1988-09-29
400         43.18      47.60	1999-08-26	1985-10-06
800        100.91     113.28 	2012-08-09	1983-07-26
1000       131.96     148.98 	1999-09-05	1996-08-23
1500       206.00     230.46	1998-07-14	1993-09-11
3000       440.67     486.11	1996-09-01	1993-09-13
5000       757.35     851.15	2005-05-31	2008-06-06
10000     1577.53    1771.78	2005-08-26	1993-09-08
21098     3503.00    3912.00	2010-03-21	2014-02-16
42195     7377.00    8262.00	2014-09-28	2003-04-13
----

=== runtime

----
# Size 	 Seconds
100 	 0
200 	 0
300 	 0
400 	 0
500 	 0
600 	 0
700 	 0
800 	 0
900 	 0
1000 	 0
1100 	 0
1200 	 0
1300 	 0
1400 	 0
1500 	 0
1600 	 0
1700 	 0
1800 	 1
1900 	 1
2000 	 1
2100 	 1
2200 	 1
2300 	 1
2400 	 1
2500 	 2
2600 	 2
2700 	 2
2800 	 2
2900 	 2
3000 	 2
3100 	 3
3200 	 3
3300 	 3
3400 	 3
3500 	 3
3600 	 4
3700 	 4
3800 	 4
3900 	 4
4000 	 5
4100 	 5
4200 	 5
4300 	 6
4400 	 6
4500 	 6
4600 	 7
4700 	 7
4800 	 7
4900 	 8
5000 	 8
5200 	 9
5300 	 10
5400 	 10
5500 	 11
5600 	 11
5700 	 12
5800 	 12
5900 	 12
6000 	 13
6100 	 14
6200 	 14
6300 	 15
6400 	 15
6500 	 16
6600 	 16
6700 	 17
6800 	 18
6900 	 18
7000 	 19
7100 	 20
7200 	 20
7300 	 21
7400 	 22
7500 	 23
7600 	 23
7700 	 24
7800 	 25
7900 	 26
8000 	 27
8100 	 28
8200 	 29
8300 	 31
8400 	 31
8500 	 33
8600 	 34
8700 	 35
8800 	 36
8900 	 38
9000 	 39
9100 	 40
9200 	 42
9300 	 43
9400 	 44
9500 	 45
9600 	 47
9700 	 48
9800 	 50
9900 	 51
10000 	 52
10200 	 55
10300 	 57
10400 	 59
10500 	 61
10600 	 63
10700 	 64
10800 	 66
10900 	 68
11000 	 70
11100 	 72
11200 	 74
11300 	 76
11400 	 78
11500 	 80
11600 	 82
11700 	 85
11800 	 87
11900 	 89
12000 	 91
12100 	 93
12200 	 95
12300 	 98
12400 	 100
12500 	 102
12600 	 104
12700 	 107
12800 	 109
12900 	 112
13000 	 115
13100 	 117
13200 	 120
13300 	 122
13400 	 125
13500 	 128
13600 	 132
13700 	 134
13800 	 138
13900 	 141
14000 	 144
14100 	 148
14200 	 151
14300 	 154
14400 	 156
14500 	 160
14600 	 164
14700 	 167
14800 	 170
14900 	 174
15000 	 177
15200 	 184
15300 	 187
15400 	 192
15500 	 196
15600 	 200
15700 	 205
15800 	 209
15900 	 213
16000 	 217
16100 	 221
16200 	 225
16300 	 229
16400 	 233
16500 	 237
16600 	 241
16700 	 245
16800 	 251
16900 	 255
17000 	 259
17100 	 264
17200 	 268
17300 	 273
17400 	 279
17500 	 284
17600 	 289
17700 	 294
17800 	 300
17900 	 307
18000 	 311
18100 	 316
18200 	 321
18300 	 327
18400 	 334
18500 	 339
18600 	 345
18700 	 352
18800 	 357
18900 	 363
19000 	 370
19100 	 376
19200 	 380
19300 	 387
19400 	 394
19500 	 400
19600 	 406
19700 	 413
19800 	 419
19900 	 425
20000 	 432
20200 	 444
20300 	 450
20400 	 456
20500 	 463
20600 	 470
20700 	 479
20800 	 486
20900 	 494
21000 	 501
21100 	 508
21200 	 515
21300 	 524
21400 	 530
21500 	 538
21600 	 545
21700 	 554
21800 	 560
21900 	 569
22000 	 575
22100 	 585
22200 	 591
22300 	 599
22400 	 605
22500 	 612
22600 	 619
22700 	 628
22800 	 635
22900 	 642
23000 	 650
23100 	 657
23200 	 666
23300 	 676
23400 	 687
23500 	 695
23600 	 703
23700 	 713
23800 	 720
23900 	 729
24000 	 736
24100 	 745
24200 	 755
24300 	 767
24400 	 777
24500 	 790
24600 	 800
24700 	 811
24800 	 821
24900 	 830
25000 	 840
25200 	 862
25300 	 873
25400 	 882
25500 	 892
25600 	 902
25700 	 911
25800 	 924
25900 	 935
26000 	 946
26100 	 957
26200 	 971
26300 	 982
26400 	 998
26500 	 1010
26600 	 1023
26700 	 1040
26800 	 1054
26900 	 1067
27000 	 1080
27100 	 1093
27200 	 1105
27300 	 1116
27400 	 1129
27500 	 1143
27600 	 1157
27700 	 1173
27800 	 1185
27900 	 1200
28000 	 1211
28100 	 1227
28200 	 1243
28300 	 1256
28400 	 1270
28500 	 1283
28600 	 1298
28700 	 1313
28800 	 1332
28900 	 1344
29000 	 1358
29100 	 1376
29200 	 1397
29300 	 1415
29400 	 1428
29500 	 1447
29600 	 1462
29700 	 1480
29800 	 1495
29900 	 1516
30000 	 1534
30200 	 1568
30300 	 1591
30400 	 1606
30500 	 1622
30600 	 1639
30700 	 1658
30800 	 1673
30900 	 1691
31000 	 1709
31100 	 1729
31200 	 1746
31300 	 1764
31400 	 1784
31500 	 1807
31600 	 1830
31700 	 1849
31800 	 1866
31900 	 1887
32000 	 1904
32100 	 1923
32200 	 1949
32300 	 1968
32400 	 1989
32500 	 2006
32600 	 2025
32700 	 2043
32800 	 2065
32900 	 2080
33000 	 2098
33100 	 2117
33200 	 2138
33300 	 2165
33400 	 2192
33500 	 2212
33600 	 2232
33700 	 2255
33800 	 2276
33900 	 2296
34000 	 2316
34100 	 2338
34200 	 2359
34300 	 2384
34400 	 2407
34500 	 2426
34600 	 2453
34700 	 2478
34800 	 2498
34900 	 2522
35000 	 2540
35100 	 2562
35200 	 2582
35300 	 2609
35400 	 2633
35500 	 2657
35600 	 2680
35700 	 2709
35800 	 2731
35900 	 2757
36000 	 2780
36100 	 2808
36200 	 2826
36300 	 2851
36400 	 2873
36500 	 2902
36600 	 2928
36700 	 2951
36800 	 2976
36900 	 3004
37000 	 3025
37100 	 3052
37200 	 3074
37300 	 3101
37400 	 3119
37500 	 3142
37600 	 3166
37700 	 3193
37800 	 3219
37900 	 3248
38000 	 3271
38100 	 3295
38200 	 3316
38300 	 3338
38400 	 3364
38500 	 3386
38600 	 3416
38700 	 3447
38800 	 3473
38900 	 3495
39000 	 3519
39100 	 3553
39200 	 3577
39300 	 3610
39400 	 3636
39500 	 3662
39600 	 3690
39700 	 3721
39800 	 3745
39900 	 3770
40000 	 3799
40200 	 3849
40300 	 3873
40400 	 3900
40500 	 3933
40600 	 3965
40700 	 3996
40800 	 4026
40900 	 4049
41000 	 4077
41100 	 4111
41200 	 4140
41300 	 4171
41400 	 4205
41500 	 4234
41600 	 4262
41700 	 4293
41800 	 4314
41900 	 4344
42000 	 4382
42100 	 4417
42200 	 4448
42300 	 4476
42400 	 4506
42500 	 4536
42600 	 4568
42700 	 4598
42800 	 4633
42900 	 4663
43000 	 4688
43100 	 4717
43200 	 4746
43300 	 4785
43400 	 4819
43500 	 4849
43600 	 4880
43700 	 4908
43800 	 4935
43900 	 4971
44000 	 5007
44100 	 5037
44200 	 5072
44300 	 5111
44400 	 5141
44500 	 5173
44600 	 5202
44700 	 5232
44800 	 5262
44900 	 5296
45000 	 5332
45200 	 5396
45300 	 5435
45400 	 5461
45500 	 5496
45600 	 5523
45700 	 5555
45800 	 5591
45900 	 5633
46000 	 5658
46100 	 5689
46200 	 5724
46300 	 5754
46400 	 5794
46500 	 5831
46600 	 5859
46700 	 5903
46800 	 5933
46900 	 5963
47000 	 5994
47100 	 6025
47200 	 6056
47300 	 6093
47400 	 6119
47500 	 6153
47600 	 6193
47700 	 6229
47800 	 6268
47900 	 6306
48000 	 6338
48100 	 6369
48200 	 6413
48300 	 6454
48400 	 6492
48500 	 6531
48600 	 6565
48700 	 6602
48800 	 6637
48900 	 6671
49000 	 6721
49100 	 6757
49200 	 6788
49300 	 6822
49400 	 6858
49500 	 6896
49600 	 6933
49700 	 6966
49800 	 7004
49900 	 7043
50000 	 7083
----

=== semilog

----
# For log-scale demo
0	0.50
1	0.70
2	0.60
3	0.70
4	0.90
5	1.37
6	1.39
7	1.29
8	1.26
9	1.25
10	1.26
11	1.29
12	1.34
13	1.39
14	1.63
15	1.75
16	2.57
17	2.61
18	2.63
19	2.72
20	2.60
21	2.30
22	2.50
23	3.36
24	3.57
25	3.95
26	4.60
27	5.11
28	5.05
29	5.21
30	5.56
31	7.26
32	7.78
33	9.28
34	9.65
35	11.06
36	11.36
37	11.51
38	11.65
39	11.78
40	11.89
41	12.98
42	13.54
43	13.91
44	14.40
45	14.62
46	14.56
47	14.64
48	14.75
49	15.07
50	16.26
51	16.42
52	16.26
53	17.52
54	20.04
55	28.27
56	35.59
57	36.21
58	38.44
59	42.53
60	53.96
61	73.27
62	72.23
63	70.88
64	96.04
65	102.68
66	105.24
67	108.77
68	103.18
69	92.55
70	84.40
71	82.26
72	82.26
73	100.17
74	134.48
75	147.37
76	151.11
77	151.41
78	154.12
79	144.35
80	128.95
81	149.36
82	192.35
83	234.35
84	296.83
85	319.29
86	325.00
87	340.00
88	376.19
89	438.10
90	486.67
91	480.95
92	496.19
93	529.52
94	691.43
95	740.95
96	883.81
97	1053.33
98	1096.19
99	1109.52
100	1519.05
----

=== sequence

----
1e-06 0.176462243197 0.538268857629 1.21778930597 12.815511558
0.25 0.0643692901927 0.163652002803 0.281362819404 0.63629436112
0.5 0.0237826634895 0.0580302866775 0.0954603378382 0.19314718056
0.75 0.0052086087822 0.0123857621304 0.019839054603 0.0376820724518
1.0 -0.0 -0.0 -0.0 -0.0
1.25 0.00429052784074 0.00986209611785 0.0152684114959 0.0268564486858
1.5 0.0158950178996 0.0360840148202 0.0551882186447 0.0945348918918
1.75 0.0334147874222 0.075054049627 0.113614200134 0.190384212065
2.0 0.0558812644451 0.124356621856 0.186577207212 0.30685281944
2.25 0.0825860471588 0.182276302792 0.271340552915 0.439069783784
2.5 0.112989713542 0.24753986048 0.365924407784 0.583709268126
2.75 0.146668581897 0.319169633107 0.468842608666 0.738399088322
3.0 0.183281586305 0.396394412392 0.578946407203 0.901387711332
3.25 0.222548613714 0.478592365858 0.695326462807 1.07134500366
3.5 0.264235755773 0.565252902651 0.817248585768 1.2472370315
3.75 0.308144930028 0.655950293609 0.944110043464 1.42824416002
4.0 0.354106370088 0.750324882016 1.0754089265 1.61370563888
4.25 0.401973061523 0.848069364082 1.21072210478 1.80308101706
4.5 0.451616534332 0.948918554302 1.34968900484 1.99592260322
4.75 0.502923624146 1.05264160664 1.49199943564 2.19185538195
5.0 0.555793939813 1.15903600442 1.63738429404 2.39056208757
5.25 0.610137855656 1.26792284874 1.78560836005 2.5917719234
5.5 0.665874899878 1.37914311655 1.93646463541 2.79525190776
5.75 0.722932446493 1.49255465404 2.08976984046 3.00080014519
6.0 0.781244642892 1.60802973518 2.24536079245 3.20824053077
6.25 0.840751522556 1.72545306025 2.40309146358 3.41741853625
6.5 0.901398264822 1.84472010058 2.5628305693 3.6281978231
6.75 0.963134572612 1.96573571872 2.72445957458 3.84045749512
7.0 1.02591414565 2.08841300979 2.88787103326 4.05408985094
7.25 1.08969423164 2.21267232179 3.0529671947 4.26899853113
7.5 1.15443524156 2.33844042218 3.21965882732 4.48509697946
7.75 1.22010041812 2.46564978471 3.38786421899 4.70230715663
8.0 1.28665554849 2.59423797585 3.55750832303 4.92055845832
8.25 1.35406871426 2.72414712417 3.72852202462 5.13978679965
8.5 1.42231007278 2.85532345947 3.90084150763 5.3599338365
8.75 1.4913516652 2.98771691047 4.07440770556 5.58094629963
9.0 1.56116724715 3.12128075239 4.24916582328 5.80277542266
9.25 1.63173213896 3.25597129689 4.42506491888 6.02537644848
9.5 1.7030230927 3.39174761834 4.60205753652 6.24870820139
9.75 1.77501817363 3.52857131122 4.78009938296 6.47273271499
----

=== shapes

----
1	1	0.1	0
2	1.2	0.2	15
3	1.8	0.3	45
4	1.7	0.2	90
5	1.6	0.15	160
6       1.5     0.2     250
7       1.4     0.3     300
----

=== sparse

----
0.00 	 1.01273 	 1.24
0.04 	 1.00182 	 1.15
0.08 	 1.03273 	 1.20
0.12 	 1.12727 	 1.32
0.16 	 1.32003 	 1.39
0.20 	 1.43818 	 1.68
0.24 	 1.49273 	 1.59
0.28 	 1.49091 	 1.43
0.32 	 1.50727 	 1.50
0.36 	 1.67455 	 1.41
0.40 	 1.80182 	 1.28
0.44 	 1.84002 	 1.00
0.48 	 1.85091 	 1.15
0.52 	 1.90364 	 1.12
0.56 	 1.81273 	 1.14
0.60 	 1.59273 	 1.00
0.64 	 1.32545 	 0.90
0.68 	 1.05636 	 0.80
0.72 	 0.95636 	 0.87
0.76 	 0.92182 	 0.85
0.80 	 0.91573 	 0.84
0.84 	 0.9452 	 0.86
0.88 	 0.84023 	 0.91
0.92 	 0.86545 	 0.99
0.96 	 0.88182 	 1.02
1.00 	 0.87091 	 1.01
----

=== spectrum

----
-10 0.0445441039423535
-9.75 0.0423335085220186
-9.5 0.0401160605122593
-9.25 0.0378945853356644
-9 0.0356725077190434
-8.75 0.0334539789846631
-8.5 0.0312440356719529
-8.25 0.0290487986765219
-8 0.0268757253260756
-7.75 0.0247339314125356
-7.5 0.0226346068593776
-7.25 0.0205915585350605
-7 0.0186219285588505
-6.75 0.0167471593881452
-6.5 0.0149943134575606
-6.25 0.0133979150086415
-6 0.012002583599368
-5.75 0.0108669093542836
-5.5 0.0100693557757026
-5.25 0.00971763588604579
-5 0.00996439236734334
-4.75 0.0110351558731161
-4.5 0.0132824129680189
-4.25 0.0173018100532659
-4 0.024220300927457
-3.75 0.0365757602929715
-3.5 0.0621113820188032
-3.25 0.151157999675566
-3 0.142741121902409
-2.75 0.101086076374784
-2.5 0.10901760213169
-2.25 0.132817680729742
-2 0.168447849343828
-1.75 0.216962464804893
-1.5 0.281798794255377
-1.25 0.368176196668876
-1 0.482069886472817
-0.75 0.626399169348524
-0.5 0.790852270564037
-0.25 0.936568368218949
0 1
0.25 0.945848119133178
0.5 0.809411786380531
0.75 0.654233722453111
1 0.519158836581446
1.25 0.414461202536935
1.5 0.337142159848525
1.75 0.281064747316713
2 0.240673525716443
2.25 0.211785899660344
2.5 0.191472978058976
2.75 0.17777581374921
3 0.169473639391939
3.25 0.16595573237285
3.5 0.167224273784863
3.75 0.174108243432999
4 0.188963292684534
4.25 0.217897214161241
4.5 0.279680115671517
4.75 0.46623791804582
5.25 -0.117361678435608
5.5 0.0947275783242046
5.75 0.163508313559732
6 0.197741537003712
6.25 0.218443121793364
6.5 0.232502106198858
6.75 0.242833533784143
7 0.250877499450521
7.25 0.257424137542791
7.5 0.262941234129099
7.75 0.267722219737709
8 0.271959730939604
8.25 0.275784983636786
8.5 0.279290129449234
8.75 0.282541577473839
9 0.285588258038457
9.25 0.288466926167486
9.5 0.291205665868351
9.75 0.293826264854243
10 0.296345859803872
----

=== splines

----
1975     49    162
1976     52    144
1977     67    140
1978     53    122
1979     67    125
1980     46    117
1981     60    116
1982     50    113
1983     66     96
1984     70    101
1985     91     93
1986    133     92
1987     40    95
1988    136     79
1989    134     78
1990    127     85
1991    147     71
1992    146     54
1993    133     51
1994    144     49
1995    158     43
----

=== supercars

----
# Year	PS	Cyl	Len	Height	Weight	Manu	Name
2005	1014	16	4462	1159	1888	France	"Bugatti Veyron"
2006	1061	8	4475	1092	1270	USA	"SSC Aero"
2012	1261	8	4655	1079.5	1244	UK	"Hennessey Venom GT"
2011	940	8	4293	1120	1435	Sweden	"Koenigsegg Agera"
2005	806	8	4293	1120	1456	Sweden	"Koenigsegg CCX"
1992	636	12	4287	1140	1138	UK	"McLaren F1"
2009	1104	8	4665	1198	1688	Denmark	"Zenvo ST1"
2005	650	8	4460	1114	1100	Germany	"Gumpert Apollo"
2009	750	12	4601	1222	1630	UK	"Aston Martin One-77"
2011	700	12	4780	1136	1575	Italy	"Lamborghini Aventador"
----

=== traffic1

----
# Day   Hits
# host=main
0       101
1       100
2       102
3       103


# host=staging
0        25
1        26
2        27
3        28


# host=test
0         5
1         4
2         3
3         2
----

=== traffic2

----
# Day     Hits
0         101       # host=main
0          25       # host=staging
0           5       # host=test
1         100
1          26
1           4
2         102
2          27
2           3
3         103
3          28
3           2
----

=== unsmoothed

----
0 1.04
1 1.05788
2 1.12219
3 1.03859
4 1.0418
5 1.07074
6 1.07717
7 1.03215
8 0.932476
9 0.948553
10 0.954984
11 1.01608
12 0.993569
13 0.996785
14 0.990354
15 0.983923
16 0.945338
17 0.958199
18 1.01286
19 0.971061
20 0.961415
21 0.967846
22 0.945338
23 0.848875
24 0.749196
25 1
26 1.03215
27 0.954984
28 0.954984
29 1.00965
30 1.07074
31 1.04823
32 0.983923
33 0.942122
34 0.88746
35 0.919614
36 0.919614
37 0.958199
38 0.926045
39 1.00322
40 0.948553
41 0.909968
42 0.974277
43 1.08682
44 1.02572
45 1.00965
46 0.958199
47 1.03859
48 1.04823
49 1.01929
50 0.977492
51 0.884244
52 0.932476
53 0.987138
54 0.980707
55 1.00322
56 1
57 0.96463
58 0.977492
59 0.951768
60 0.839228
61 1.03215
62 1.09325
63 1.03537
64 0.913183
65 0.954984
66 1.06752
67 1.08039
68 1.01929
69 1.03215
70 1.00643
71 1
72 1.07395
73 1.09003
74 1.12219
75 1.04823
76 1.10932
77 1.06431
78 0.954984
79 1.02251
80 1.06431
81 1.00965
82 0.942122
83 0.958199
84 1.06752
85 1.06109
86 1.03537
87 1.01286
88 0.987138
89 0.951768
90 0.961415
91 1.03537
92 1.00322
93 1.05145
94 1.02251
95 1.07395
96 1.05145
97 0.996785
98 0.983923
99 1.01286
100 1.09646
----

=== weather

----
# Day 	 Temp	Dew	Cloud	Visib	Wind	Direct	Press 	 Trend
1 	 14.3	14	20	7	0	0	1007.6	 dn
2 	 14.3	14	80	2.5	7	0	1006.4	 up
3 	 13.8	13.5	70	10	6	150	1006.4	 dn
4 	 14.3	13.9	50	10	8	190	1009.6	 --
5 	 14.3	13.9	10	10	6	170	1012  	 dn
6 	 12.4	11.8	80	1.75	6	210	1008.2	 up
7 	 12.4	11.5	90	2.5	3	190	1005.8	 dn
8 	 12.7	12.2	100	2.5	6	210	1007.8	 --
9 	 12.7	12.7	100	1.25	7	170	1009.1	 dn
10 	 12.7	12.5	100	0.25	6	150	1008  	 --
11 	 12.7	12.6	80	0.25	9	340	1006.6	 --
12 	 13	12.8	90	0.25	9	330	1007.6	 up
13 	 12.4	12	80	1.25	0	330	1009.9	 dn
14 	 12.4	11.8	40	2.5	0	330	1009.7	 up
15 	 12.4	12	20	9	9	320	1009.1	 dn
16 	 11.9	11.9	30	10	14	330	1007.1	 --
17 	 9.6	8.3	0	10	13	320	1005.2	 --
18 	 9.1	7	0	10	22	0	1007.5	 --
19 	 9.1	7	0	10	24	340	1010.2	 dn
20 	 8.8	7.2	0	10	17	330	1010.1	 --
21 	 8.5	7	10	10	13	340	1010.5	 --
22 	 7.5	6.1	0	10	13	320	1010.6	 up
23 	 7.5	6	0	10	21	320	1009.8	 dn
24 	 7.2	5.6	0	10	24	330	1010.4	 dn
25 	 8	5.6	30	10	20	340	1012.7	 --
26 	 9.3	6.7	0	10	15	0	1013.4	 dn
27 	 10.3	6.7	0	10	17	0	1012.7	 up
28 	 11.1	6.1	10	10	22	360	1010.8	 dn
29 	 9.2	2.8	40	10	17	340	1010  	 --
30 	 9.1	4.4	20	10	26	350	1012.1	 dn
31 	 7.3	3.9	60	10	23	360	1012.2	 up
----

=== webtraffic

----
1	37954
2	82004
3	138804
4	69742
5	89994
6	122960
7	205521
8	140829
9	73520
10	165318
11	102277
12	95144
13	64553
14	69306
15	124080
16	114281
17	81758
18	63134
19	165628
20	94320
21	158725
22	128546
23	68262
24	142799
25	125767
26	150320
27	140149
28	136041
29	100979
30	215650
31	217176
32	225907
33	209892
34	298902
35	255436
36	278175
37	81321
38	63644
39	55054
40	82251
41	128090
42	75163
43	25657
44	30020
45	17262
46	24611
47	6142
48	3580
49	10906
50	4861
51	13243
52	7734
53	4449
54	15067
55	4419
56	3735
57	4162
58	8940
59	11113
60	3202
61	2438
62	3473
63	1838
64	2342
65	3123
66	5565
67	6649
68	5559
69	8289
70	3883
71	4200
72	3806
73	3224
74	2273
75	14880
76	2802
77	4988
78	5788
79	4840
80	5947
81	5418
82	3131
83	3514
84	3572
85	4055
86	4253
87	9941
88	11171
89	4737
90	2606
91	2358
92	8559
93	4022
94	13949
95	10775
96	8067
97	15045
98	11392
99	7356
100	8555
101	4986
102	3796
103	3255
104	4687
105	5168
106	4375
107	5211
108	5799
109	9798
110	4731
111	4513
112	4016
113	13221
114	3829
115	3800
116	8897
117	3966
118	6757
119	2802
120	3037
121	5806
122	3912
123	2641
124	16816
125	21021
126	9929
127	9586
128	6017
129	30075
130	6189
131	12851
132	8708
133	42458
134	41977
135	32941
136	43086
137	94080
138	82065
139	68338
140	153854
141	34498
142	127156
143	96362
144	26164
145	43197
146	27237
147	41493
148	40428
149	81360
150	20148
151	36868
152	44616
153	37786
154	27289
155	37510
156	54471
157	36016
158	129644
159	38768
160	74348
161	112860
162	88736
163	159680
164	70986
165	93066
166	116431
167	72511
168	103767
169	59797
170	89230
171	175584
172	193199
173	96731
174	144494
175	65044
176	104433
177	178714
178	106428
179	169764
180	159158
181	121000
182	230798
183	165364
184	82540
185	271212
186	266265
187	247641
188	167276
189	185776
190	86149
191	303378
192	330883
193	101228
194	64980
195	67016
196	62708
197	57577
198	76407
199	13450
200	19681
201	10358
202	17652
203	10188
204	14203
205	17513
206	13098
207	8176
208	8873
209	9051
210	24694
211	7978
212	19610
213	16057
214	15359
215	11549
216	6208
217	23588
218	9042
219	4379
220	4578
221	21843
222	14419
223	6423
224	8669
225	7605
226	16223
227	9345
228	89047
229	52092
230	3227
231	4204
232	2817
233	4978
234	6517
235	4937
236	5807
237	4795
238	3345
239	6250
240	5842
241	2994
242	7605
243	5642
244	5046
245	5793
246	5892
247	3914
248	2376
249	3526
250	4192
251	2780
252	3120
253	2675
254	2515
255	12075
256	5304
257	3130
258	2578
259	2497
260	10527
261	11164
262	4619
263	5580
264	8529
265	10464
266	4704
267	3267
268	3076
269	4101
270	2362
271	2142
272	3353
273	2822
274	4019
275	1688
276	3415
277	13434
278	3428
279	2819
280	3470
281	3148
282	4055
283	4657
284	9929
285	6363
286	5672
287	3932
288	4103
289	2032
290	2634
291	5729
292	4860
293	4882
294	13182
295	3130
296	10369
297	7183
298	4069
299	7524
300	7199
301	47295
302	28158
303	68889
304	58305
305	29061
306	78370
307	58756
308	95368
309	62087
310	40337
311	125293
312	54020
313	85264
314	41438
315	29652
316	29191
317	39038
318	66775
319	18227
320	11682
321	89090
322	37246
323	25891
324	82314
325	33532
326	38242
327	79513
328	77907
329	51284
330	246379
331	103916
332	60446
333	130093
334	255146
335	172982
336	67409
337	47758
338	285078
339	109935
340	70323
341	117875
342	296644
343	122526
344	50370
345	130479
346	157238
347	305990
348	168421
349	118667
350	85272
351	158942
352	172983
353	47021
354	264910
355	139251
356	92207
357	125702
358	107227
359	98903
360	60826
361	56996
362	28317
363	44669
364	26201
365	43923

----

